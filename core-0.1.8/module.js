if(function(window,undefined){function isArraylike(obj){var length=obj.length,type=jQuery.type(obj);return jQuery.isWindow(obj)?!1:1===obj.nodeType&&length?!0:"array"===type||"function"!==type&&(0===length||"number"==typeof length&&length>0&&length-1 in obj)}function createOptions(options){var object=optionsCache[options]={};return jQuery.each(options.match(core_rnotwhite)||[],function(_,flag){object[flag]=!0}),object}function Data(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=jQuery.expando+Math.random()}function dataAttr(elem,key,data){var name;if(data===undefined&&1===elem.nodeType)if(name="data-"+key.replace(rmultiDash,"-$1").toLowerCase(),data=elem.getAttribute(name),"string"==typeof data){try{data="true"===data?!0:"false"===data?!1:"null"===data?null:+data+""===data?+data:rbrace.test(data)?JSON.parse(data):data}catch(e){}data_user.set(elem,key,data)}else data=undefined;return data}function returnTrue(){return!0}function returnFalse(){return!1}function safeActiveElement(){try{return document.activeElement}catch(err){}}function sibling(cur,dir){for(;(cur=cur[dir])&&1!==cur.nodeType;);return cur}function winnow(elements,qualifier,not){if(jQuery.isFunction(qualifier))return jQuery.grep(elements,function(elem,i){return!!qualifier.call(elem,i,elem)!==not});if(qualifier.nodeType)return jQuery.grep(elements,function(elem){return elem===qualifier!==not});if("string"==typeof qualifier){if(isSimple.test(qualifier))return jQuery.filter(qualifier,elements,not);qualifier=jQuery.filter(qualifier,elements)}return jQuery.grep(elements,function(elem){return core_indexOf.call(qualifier,elem)>=0!==not})}function manipulationTarget(elem,content){return jQuery.nodeName(elem,"table")&&jQuery.nodeName(1===content.nodeType?content:content.firstChild,"tr")?elem.getElementsByTagName("tbody")[0]||elem.appendChild(elem.ownerDocument.createElement("tbody")):elem}function disableScript(elem){return elem.type=(null!==elem.getAttribute("type"))+"/"+elem.type,elem}function restoreScript(elem){var match=rscriptTypeMasked.exec(elem.type);return match?elem.type=match[1]:elem.removeAttribute("type"),elem}function setGlobalEval(elems,refElements){for(var l=elems.length,i=0;l>i;i++)data_priv.set(elems[i],"globalEval",!refElements||data_priv.get(refElements[i],"globalEval"))}function cloneCopyEvent(src,dest){var i,l,type,pdataOld,pdataCur,udataOld,udataCur,events;if(1===dest.nodeType){if(data_priv.hasData(src)&&(pdataOld=data_priv.access(src),pdataCur=data_priv.set(dest,pdataOld),events=pdataOld.events)){delete pdataCur.handle,pdataCur.events={};for(type in events)for(i=0,l=events[type].length;l>i;i++)jQuery.event.add(dest,type,events[type][i])}data_user.hasData(src)&&(udataOld=data_user.access(src),udataCur=jQuery.extend({},udataOld),data_user.set(dest,udataCur))}}function getAll(context,tag){var ret=context.getElementsByTagName?context.getElementsByTagName(tag||"*"):context.querySelectorAll?context.querySelectorAll(tag||"*"):[];return tag===undefined||tag&&jQuery.nodeName(context,tag)?jQuery.merge([context],ret):ret}function fixInput(src,dest){var nodeName=dest.nodeName.toLowerCase();"input"===nodeName&&manipulation_rcheckableType.test(src.type)?dest.checked=src.checked:("input"===nodeName||"textarea"===nodeName)&&(dest.defaultValue=src.defaultValue)}function vendorPropName(style,name){if(name in style)return name;for(var capName=name.charAt(0).toUpperCase()+name.slice(1),origName=name,i=cssPrefixes.length;i--;)if(name=cssPrefixes[i]+capName,name in style)return name;return origName}function isHidden(elem,el){return elem=el||elem,"none"===jQuery.css(elem,"display")||!jQuery.contains(elem.ownerDocument,elem)}function getStyles(elem){return window.getComputedStyle(elem,null)}function showHide(elements,show){for(var display,elem,hidden,values=[],index=0,length=elements.length;length>index;index++)elem=elements[index],elem.style&&(values[index]=data_priv.get(elem,"olddisplay"),display=elem.style.display,show?(values[index]||"none"!==display||(elem.style.display=""),""===elem.style.display&&isHidden(elem)&&(values[index]=data_priv.access(elem,"olddisplay",css_defaultDisplay(elem.nodeName)))):values[index]||(hidden=isHidden(elem),(display&&"none"!==display||!hidden)&&data_priv.set(elem,"olddisplay",hidden?display:jQuery.css(elem,"display"))));for(index=0;length>index;index++)elem=elements[index],elem.style&&(show&&"none"!==elem.style.display&&""!==elem.style.display||(elem.style.display=show?values[index]||"":"none"));return elements}function setPositiveNumber(elem,value,subtract){var matches=rnumsplit.exec(value);return matches?Math.max(0,matches[1]-(subtract||0))+(matches[2]||"px"):value}function augmentWidthOrHeight(elem,name,extra,isBorderBox,styles){for(var i=extra===(isBorderBox?"border":"content")?4:"width"===name?1:0,val=0;4>i;i+=2)"margin"===extra&&(val+=jQuery.css(elem,extra+cssExpand[i],!0,styles)),isBorderBox?("content"===extra&&(val-=jQuery.css(elem,"padding"+cssExpand[i],!0,styles)),"margin"!==extra&&(val-=jQuery.css(elem,"border"+cssExpand[i]+"Width",!0,styles))):(val+=jQuery.css(elem,"padding"+cssExpand[i],!0,styles),"padding"!==extra&&(val+=jQuery.css(elem,"border"+cssExpand[i]+"Width",!0,styles)));return val}function getWidthOrHeight(elem,name,extra){var valueIsBorderBox=!0,val="width"===name?elem.offsetWidth:elem.offsetHeight,styles=getStyles(elem),isBorderBox=jQuery.support.boxSizing&&"border-box"===jQuery.css(elem,"boxSizing",!1,styles);if(0>=val||null==val){if(val=curCSS(elem,name,styles),(0>val||null==val)&&(val=elem.style[name]),rnumnonpx.test(val))return val;valueIsBorderBox=isBorderBox&&(jQuery.support.boxSizingReliable||val===elem.style[name]),val=parseFloat(val)||0}return val+augmentWidthOrHeight(elem,name,extra||(isBorderBox?"border":"content"),valueIsBorderBox,styles)+"px"}function css_defaultDisplay(nodeName){var doc=document,display=elemdisplay[nodeName];return display||(display=actualDisplay(nodeName,doc),"none"!==display&&display||(iframe=(iframe||jQuery("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(doc.documentElement),doc=(iframe[0].contentWindow||iframe[0].contentDocument).document,doc.write("<!doctype html><html><body>"),doc.close(),display=actualDisplay(nodeName,doc),iframe.detach()),elemdisplay[nodeName]=display),display}function actualDisplay(name,doc){var elem=jQuery(doc.createElement(name)).appendTo(doc.body),display=jQuery.css(elem[0],"display");return elem.remove(),display}function buildParams(prefix,obj,traditional,add){var name;if(jQuery.isArray(obj))jQuery.each(obj,function(i,v){traditional||rbracket.test(prefix)?add(prefix,v):buildParams(prefix+"["+("object"==typeof v?i:"")+"]",v,traditional,add)});else if(traditional||"object"!==jQuery.type(obj))add(prefix,obj);else for(name in obj)buildParams(prefix+"["+name+"]",obj[name],traditional,add)}function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){"string"!=typeof dataTypeExpression&&(func=dataTypeExpression,dataTypeExpression="*");var dataType,i=0,dataTypes=dataTypeExpression.toLowerCase().match(core_rnotwhite)||[];if(jQuery.isFunction(func))for(;dataType=dataTypes[i++];)"+"===dataType[0]?(dataType=dataType.slice(1)||"*",(structure[dataType]=structure[dataType]||[]).unshift(func)):(structure[dataType]=structure[dataType]||[]).push(func)}}function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR){function inspect(dataType){var selected;return inspected[dataType]=!0,jQuery.each(structure[dataType]||[],function(_,prefilterOrFactory){var dataTypeOrTransport=prefilterOrFactory(options,originalOptions,jqXHR);return"string"!=typeof dataTypeOrTransport||seekingTransport||inspected[dataTypeOrTransport]?seekingTransport?!(selected=dataTypeOrTransport):void 0:(options.dataTypes.unshift(dataTypeOrTransport),inspect(dataTypeOrTransport),!1)}),selected}var inspected={},seekingTransport=structure===transports;return inspect(options.dataTypes[0])||!inspected["*"]&&inspect("*")}function ajaxExtend(target,src){var key,deep,flatOptions=jQuery.ajaxSettings.flatOptions||{};for(key in src)src[key]!==undefined&&((flatOptions[key]?target:deep||(deep={}))[key]=src[key]);return deep&&jQuery.extend(!0,target,deep),target}function ajaxHandleResponses(s,jqXHR,responses){for(var ct,type,finalDataType,firstDataType,contents=s.contents,dataTypes=s.dataTypes;"*"===dataTypes[0];)dataTypes.shift(),ct===undefined&&(ct=s.mimeType||jqXHR.getResponseHeader("Content-Type"));if(ct)for(type in contents)if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break}if(dataTypes[0]in responses)finalDataType=dataTypes[0];else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break}firstDataType||(firstDataType=type)}finalDataType=finalDataType||firstDataType}return finalDataType?(finalDataType!==dataTypes[0]&&dataTypes.unshift(finalDataType),responses[finalDataType]):void 0}function ajaxConvert(s,response,jqXHR,isSuccess){var conv2,current,conv,tmp,prev,converters={},dataTypes=s.dataTypes.slice();if(dataTypes[1])for(conv in s.converters)converters[conv.toLowerCase()]=s.converters[conv];for(current=dataTypes.shift();current;)if(s.responseFields[current]&&(jqXHR[s.responseFields[current]]=response),!prev&&isSuccess&&s.dataFilter&&(response=s.dataFilter(response,s.dataType)),prev=current,current=dataTypes.shift())if("*"===current)current=prev;else if("*"!==prev&&prev!==current){if(conv=converters[prev+" "+current]||converters["* "+current],!conv)for(conv2 in converters)if(tmp=conv2.split(" "),tmp[1]===current&&(conv=converters[prev+" "+tmp[0]]||converters["* "+tmp[0]])){conv===!0?conv=converters[conv2]:converters[conv2]!==!0&&(current=tmp[0],dataTypes.unshift(tmp[1]));break}if(conv!==!0)if(conv&&s["throws"])response=conv(response);else try{response=conv(response)}catch(e){return{state:"parsererror",error:conv?e:"No conversion from "+prev+" to "+current}}}return{state:"success",data:response}}function createFxNow(){return setTimeout(function(){fxNow=undefined}),fxNow=jQuery.now()}function createTween(value,prop,animation){for(var tween,collection=(tweeners[prop]||[]).concat(tweeners["*"]),index=0,length=collection.length;length>index;index++)if(tween=collection[index].call(animation,prop,value))return tween}function Animation(elem,properties,options){var result,stopped,index=0,length=animationPrefilters.length,deferred=jQuery.Deferred().always(function(){delete tick.elem}),tick=function(){if(stopped)return!1;for(var currentTime=fxNow||createFxNow(),remaining=Math.max(0,animation.startTime+animation.duration-currentTime),temp=remaining/animation.duration||0,percent=1-temp,index=0,length=animation.tweens.length;length>index;index++)animation.tweens[index].run(percent);return deferred.notifyWith(elem,[animation,percent,remaining]),1>percent&&length?remaining:(deferred.resolveWith(elem,[animation]),!1)},animation=deferred.promise({elem:elem,props:jQuery.extend({},properties),opts:jQuery.extend(!0,{specialEasing:{}},options),originalProperties:properties,originalOptions:options,startTime:fxNow||createFxNow(),duration:options.duration,tweens:[],createTween:function(prop,end){var tween=jQuery.Tween(elem,animation.opts,prop,end,animation.opts.specialEasing[prop]||animation.opts.easing);return animation.tweens.push(tween),tween},stop:function(gotoEnd){var index=0,length=gotoEnd?animation.tweens.length:0;if(stopped)return this;for(stopped=!0;length>index;index++)animation.tweens[index].run(1);return gotoEnd?deferred.resolveWith(elem,[animation,gotoEnd]):deferred.rejectWith(elem,[animation,gotoEnd]),this}}),props=animation.props;for(propFilter(props,animation.opts.specialEasing);length>index;index++)if(result=animationPrefilters[index].call(animation,elem,props,animation.opts))return result;return jQuery.map(props,createTween,animation),jQuery.isFunction(animation.opts.start)&&animation.opts.start.call(elem,animation),jQuery.fx.timer(jQuery.extend(tick,{elem:elem,anim:animation,queue:animation.opts.queue})),animation.progress(animation.opts.progress).done(animation.opts.done,animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always)}function propFilter(props,specialEasing){var index,name,easing,value,hooks;for(index in props)if(name=jQuery.camelCase(index),easing=specialEasing[name],value=props[index],jQuery.isArray(value)&&(easing=value[1],value=props[index]=value[0]),index!==name&&(props[name]=value,delete props[index]),hooks=jQuery.cssHooks[name],hooks&&"expand"in hooks){value=hooks.expand(value),delete props[name];for(index in value)index in props||(props[index]=value[index],specialEasing[index]=easing)}else specialEasing[name]=easing}function defaultPrefilter(elem,props,opts){var prop,value,toggle,tween,hooks,oldfire,anim=this,orig={},style=elem.style,hidden=elem.nodeType&&isHidden(elem),dataShow=data_priv.get(elem,"fxshow");opts.queue||(hooks=jQuery._queueHooks(elem,"fx"),null==hooks.unqueued&&(hooks.unqueued=0,oldfire=hooks.empty.fire,hooks.empty.fire=function(){hooks.unqueued||oldfire()}),hooks.unqueued++,anim.always(function(){anim.always(function(){hooks.unqueued--,jQuery.queue(elem,"fx").length||hooks.empty.fire()})})),1===elem.nodeType&&("height"in props||"width"in props)&&(opts.overflow=[style.overflow,style.overflowX,style.overflowY],"inline"===jQuery.css(elem,"display")&&"none"===jQuery.css(elem,"float")&&(style.display="inline-block")),opts.overflow&&(style.overflow="hidden",anim.always(function(){style.overflow=opts.overflow[0],style.overflowX=opts.overflow[1],style.overflowY=opts.overflow[2]}));for(prop in props)if(value=props[prop],rfxtypes.exec(value)){if(delete props[prop],toggle=toggle||"toggle"===value,value===(hidden?"hide":"show")){if("show"!==value||!dataShow||dataShow[prop]===undefined)continue;hidden=!0}orig[prop]=dataShow&&dataShow[prop]||jQuery.style(elem,prop)}if(!jQuery.isEmptyObject(orig)){dataShow?"hidden"in dataShow&&(hidden=dataShow.hidden):dataShow=data_priv.access(elem,"fxshow",{}),toggle&&(dataShow.hidden=!hidden),hidden?jQuery(elem).show():anim.done(function(){jQuery(elem).hide()}),anim.done(function(){var prop;data_priv.remove(elem,"fxshow");for(prop in orig)jQuery.style(elem,prop,orig[prop])});for(prop in orig)tween=createTween(hidden?dataShow[prop]:0,prop,anim),prop in dataShow||(dataShow[prop]=tween.start,hidden&&(tween.end=tween.start,tween.start="width"===prop||"height"===prop?1:0))}}function Tween(elem,options,prop,end,easing){return new Tween.prototype.init(elem,options,prop,end,easing)}function genFx(type,includeWidth){var which,attrs={height:type},i=0;for(includeWidth=includeWidth?1:0;4>i;i+=2-includeWidth)which=cssExpand[i],attrs["margin"+which]=attrs["padding"+which]=type;return includeWidth&&(attrs.opacity=attrs.width=type),attrs}function getWindow(elem){return jQuery.isWindow(elem)?elem:9===elem.nodeType&&elem.defaultView}var rootjQuery,readyList,core_strundefined=typeof undefined,location=window.location,document=window.document,docElem=document.documentElement,_jQuery=window.jQuery,_$=window.$,class2type={},core_deletedIds=[],core_version="2.0.3",core_concat=core_deletedIds.concat,core_push=core_deletedIds.push,core_slice=core_deletedIds.slice,core_indexOf=core_deletedIds.indexOf,core_toString=class2type.toString,core_hasOwn=class2type.hasOwnProperty,core_trim=core_version.trim,jQuery=function(selector,context){return new jQuery.fn.init(selector,context,rootjQuery)},core_pnum=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,core_rnotwhite=/\S+/g,rquickExpr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,rmsPrefix=/^-ms-/,rdashAlpha=/-([\da-z])/gi,fcamelCase=function(all,letter){return letter.toUpperCase()},completed=function(){document.removeEventListener("DOMContentLoaded",completed,!1),window.removeEventListener("load",completed,!1),jQuery.ready()};jQuery.fn=jQuery.prototype={jquery:core_version,constructor:jQuery,init:function(selector,context,rootjQuery){var match,elem;if(!selector)return this;if("string"==typeof selector){if(match="<"===selector.charAt(0)&&">"===selector.charAt(selector.length-1)&&selector.length>=3?[null,selector,null]:rquickExpr.exec(selector),!match||!match[1]&&context)return!context||context.jquery?(context||rootjQuery).find(selector):this.constructor(context).find(selector);if(match[1]){if(context=context instanceof jQuery?context[0]:context,jQuery.merge(this,jQuery.parseHTML(match[1],context&&context.nodeType?context.ownerDocument||context:document,!0)),rsingleTag.test(match[1])&&jQuery.isPlainObject(context))for(match in context)jQuery.isFunction(this[match])?this[match](context[match]):this.attr(match,context[match]);return this}return elem=document.getElementById(match[2]),elem&&elem.parentNode&&(this.length=1,this[0]=elem),this.context=document,this.selector=selector,this}return selector.nodeType?(this.context=this[0]=selector,this.length=1,this):jQuery.isFunction(selector)?rootjQuery.ready(selector):(selector.selector!==undefined&&(this.selector=selector.selector,this.context=selector.context),jQuery.makeArray(selector,this))},selector:"",length:0,toArray:function(){return core_slice.call(this)},get:function(num){return null==num?this.toArray():0>num?this[this.length+num]:this[num]},pushStack:function(elems){var ret=jQuery.merge(this.constructor(),elems);return ret.prevObject=this,ret.context=this.context,ret},each:function(callback,args){return jQuery.each(this,callback,args)},ready:function(fn){return jQuery.ready.promise().done(fn),this},slice:function(){return this.pushStack(core_slice.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(i){var len=this.length,j=+i+(0>i?len:0);return this.pushStack(j>=0&&len>j?[this[j]]:[])},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem)}))},end:function(){return this.prevObject||this.constructor(null)},push:core_push,sort:[].sort,splice:[].splice},jQuery.fn.init.prototype=jQuery.fn,jQuery.extend=jQuery.fn.extend=function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=!1;for("boolean"==typeof target&&(deep=target,target=arguments[1]||{},i=2),"object"==typeof target||jQuery.isFunction(target)||(target={}),length===i&&(target=this,--i);length>i;i++)if(null!=(options=arguments[i]))for(name in options)src=target[name],copy=options[name],target!==copy&&(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))?(copyIsArray?(copyIsArray=!1,clone=src&&jQuery.isArray(src)?src:[]):clone=src&&jQuery.isPlainObject(src)?src:{},target[name]=jQuery.extend(deep,clone,copy)):copy!==undefined&&(target[name]=copy));return target},jQuery.extend({expando:"jQuery"+(core_version+Math.random()).replace(/\D/g,""),noConflict:function(deep){return window.$===jQuery&&(window.$=_$),deep&&window.jQuery===jQuery&&(window.jQuery=_jQuery),jQuery},isReady:!1,readyWait:1,holdReady:function(hold){hold?jQuery.readyWait++:jQuery.ready(!0)},ready:function(wait){(wait===!0?--jQuery.readyWait:jQuery.isReady)||(jQuery.isReady=!0,wait!==!0&&--jQuery.readyWait>0||(readyList.resolveWith(document,[jQuery]),jQuery.fn.trigger&&jQuery(document).trigger("ready").off("ready")))},isFunction:function(obj){return"function"===jQuery.type(obj)},isArray:Array.isArray,isWindow:function(obj){return null!=obj&&obj===obj.window},isNumeric:function(obj){return!isNaN(parseFloat(obj))&&isFinite(obj)},type:function(obj){return null==obj?String(obj):"object"==typeof obj||"function"==typeof obj?class2type[core_toString.call(obj)]||"object":typeof obj},isPlainObject:function(obj){if("object"!==jQuery.type(obj)||obj.nodeType||jQuery.isWindow(obj))return!1;try{if(obj.constructor&&!core_hasOwn.call(obj.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}return!0},isEmptyObject:function(obj){var name;for(name in obj)return!1;return!0},error:function(msg){throw new Error(msg)},parseHTML:function(data,context,keepScripts){if(!data||"string"!=typeof data)return null;"boolean"==typeof context&&(keepScripts=context,context=!1),context=context||document;var parsed=rsingleTag.exec(data),scripts=!keepScripts&&[];return parsed?[context.createElement(parsed[1])]:(parsed=jQuery.buildFragment([data],context,scripts),scripts&&jQuery(scripts).remove(),jQuery.merge([],parsed.childNodes))},parseJSON:JSON.parse,parseXML:function(data){var xml,tmp;if(!data||"string"!=typeof data)return null;try{tmp=new DOMParser,xml=tmp.parseFromString(data,"text/xml")}catch(e){xml=undefined}return(!xml||xml.getElementsByTagName("parsererror").length)&&jQuery.error("Invalid XML: "+data),xml},noop:function(){},globalEval:function(code){var script,indirect=eval;code=jQuery.trim(code),code&&(1===code.indexOf("use strict")?(script=document.createElement("script"),script.text=code,document.head.appendChild(script).parentNode.removeChild(script)):indirect(code))},camelCase:function(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toLowerCase()===name.toLowerCase()},each:function(obj,callback,args){var value,i=0,length=obj.length,isArray=isArraylike(obj);if(args){if(isArray)for(;length>i&&(value=callback.apply(obj[i],args),value!==!1);i++);else for(i in obj)if(value=callback.apply(obj[i],args),value===!1)break}else if(isArray)for(;length>i&&(value=callback.call(obj[i],i,obj[i]),value!==!1);i++);else for(i in obj)if(value=callback.call(obj[i],i,obj[i]),value===!1)break;return obj},trim:function(text){return null==text?"":core_trim.call(text)},makeArray:function(arr,results){var ret=results||[];return null!=arr&&(isArraylike(Object(arr))?jQuery.merge(ret,"string"==typeof arr?[arr]:arr):core_push.call(ret,arr)),ret},inArray:function(elem,arr,i){return null==arr?-1:core_indexOf.call(arr,elem,i)},merge:function(first,second){var l=second.length,i=first.length,j=0;if("number"==typeof l)for(;l>j;j++)first[i++]=second[j];else for(;second[j]!==undefined;)first[i++]=second[j++];return first.length=i,first},grep:function(elems,callback,inv){var retVal,ret=[],i=0,length=elems.length;for(inv=!!inv;length>i;i++)retVal=!!callback(elems[i],i),inv!==retVal&&ret.push(elems[i]);return ret},map:function(elems,callback,arg){var value,i=0,length=elems.length,isArray=isArraylike(elems),ret=[];if(isArray)for(;length>i;i++)value=callback(elems[i],i,arg),null!=value&&(ret[ret.length]=value);else for(i in elems)value=callback(elems[i],i,arg),null!=value&&(ret[ret.length]=value);return core_concat.apply([],ret)},guid:1,proxy:function(fn,context){var tmp,args,proxy;return"string"==typeof context&&(tmp=fn[context],context=fn,fn=tmp),jQuery.isFunction(fn)?(args=core_slice.call(arguments,2),proxy=function(){return fn.apply(context||this,args.concat(core_slice.call(arguments)))},proxy.guid=fn.guid=fn.guid||jQuery.guid++,proxy):undefined},access:function(elems,fn,key,value,chainable,emptyGet,raw){var i=0,length=elems.length,bulk=null==key;if("object"===jQuery.type(key)){chainable=!0;for(i in key)jQuery.access(elems,fn,i,key[i],!0,emptyGet,raw)}else if(value!==undefined&&(chainable=!0,jQuery.isFunction(value)||(raw=!0),bulk&&(raw?(fn.call(elems,value),fn=null):(bulk=fn,fn=function(elem,key,value){return bulk.call(jQuery(elem),value)})),fn))for(;length>i;i++)fn(elems[i],key,raw?value:value.call(elems[i],i,fn(elems[i],key)));return chainable?elems:bulk?fn.call(elems):length?fn(elems[0],key):emptyGet},now:Date.now,swap:function(elem,options,callback,args){var ret,name,old={};for(name in options)old[name]=elem.style[name],elem.style[name]=options[name];ret=callback.apply(elem,args||[]);for(name in options)elem.style[name]=old[name];return ret}}),jQuery.ready.promise=function(obj){return readyList||(readyList=jQuery.Deferred(),"complete"===document.readyState?setTimeout(jQuery.ready):(document.addEventListener("DOMContentLoaded",completed,!1),window.addEventListener("load",completed,!1))),readyList.promise(obj)},jQuery.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase()}),rootjQuery=jQuery(document),function(window,undefined){function Sizzle(selector,context,results,seed){var match,elem,m,nodeType,i,groups,old,nid,newContext,newSelector;if((context?context.ownerDocument||context:preferredDoc)!==document&&setDocument(context),context=context||document,results=results||[],!selector||"string"!=typeof selector)return results;if(1!==(nodeType=context.nodeType)&&9!==nodeType)return[];if(documentIsHTML&&!seed){if(match=rquickExpr.exec(selector))if(m=match[1]){if(9===nodeType){if(elem=context.getElementById(m),!elem||!elem.parentNode)return results;if(elem.id===m)return results.push(elem),results}else if(context.ownerDocument&&(elem=context.ownerDocument.getElementById(m))&&contains(context,elem)&&elem.id===m)return results.push(elem),results}else{if(match[2])return push.apply(results,context.getElementsByTagName(selector)),results;if((m=match[3])&&support.getElementsByClassName&&context.getElementsByClassName)return push.apply(results,context.getElementsByClassName(m)),results}if(support.qsa&&(!rbuggyQSA||!rbuggyQSA.test(selector))){if(nid=old=expando,newContext=context,newSelector=9===nodeType&&selector,1===nodeType&&"object"!==context.nodeName.toLowerCase()){for(groups=tokenize(selector),(old=context.getAttribute("id"))?nid=old.replace(rescape,"\\$&"):context.setAttribute("id",nid),nid="[id='"+nid+"'] ",i=groups.length;i--;)groups[i]=nid+toSelector(groups[i]);newContext=rsibling.test(selector)&&context.parentNode||context,newSelector=groups.join(",")}if(newSelector)try{return push.apply(results,newContext.querySelectorAll(newSelector)),results}catch(qsaError){}finally{old||context.removeAttribute("id")}}}return select(selector.replace(rtrim,"$1"),context,results,seed)}function createCache(){function cache(key,value){return keys.push(key+=" ")>Expr.cacheLength&&delete cache[keys.shift()],cache[key]=value}var keys=[];return cache}function markFunction(fn){return fn[expando]=!0,fn}function assert(fn){var div=document.createElement("div");try{return!!fn(div)}catch(e){return!1}finally{div.parentNode&&div.parentNode.removeChild(div),div=null}}function addHandle(attrs,handler){for(var arr=attrs.split("|"),i=attrs.length;i--;)Expr.attrHandle[arr[i]]=handler}function siblingCheck(a,b){var cur=b&&a,diff=cur&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||MAX_NEGATIVE)-(~a.sourceIndex||MAX_NEGATIVE);if(diff)return diff;if(cur)for(;cur=cur.nextSibling;)if(cur===b)return-1;return a?1:-1}function createInputPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return"input"===name&&elem.type===type}}function createButtonPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return("input"===name||"button"===name)&&elem.type===type}}function createPositionalPseudo(fn){return markFunction(function(argument){return argument=+argument,markFunction(function(seed,matches){for(var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;i--;)seed[j=matchIndexes[i]]&&(seed[j]=!(matches[j]=seed[j]))})})}function setFilters(){}function tokenize(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[selector+" "];if(cached)return parseOnly?0:cached.slice(0);for(soFar=selector,groups=[],preFilters=Expr.preFilter;soFar;){(!matched||(match=rcomma.exec(soFar)))&&(match&&(soFar=soFar.slice(match[0].length)||soFar),groups.push(tokens=[])),matched=!1,(match=rcombinators.exec(soFar))&&(matched=match.shift(),tokens.push({value:matched,type:match[0].replace(rtrim," ")}),soFar=soFar.slice(matched.length));for(type in Expr.filter)!(match=matchExpr[type].exec(soFar))||preFilters[type]&&!(match=preFilters[type](match))||(matched=match.shift(),tokens.push({value:matched,type:type,matches:match}),soFar=soFar.slice(matched.length));if(!matched)break}return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,groups).slice(0)}function toSelector(tokens){for(var i=0,len=tokens.length,selector="";len>i;i++)selector+=tokens[i].value;return selector}function addCombinator(matcher,combinator,base){var dir=combinator.dir,checkNonElements=base&&"parentNode"===dir,doneName=done++;return combinator.first?function(elem,context,xml){for(;elem=elem[dir];)if(1===elem.nodeType||checkNonElements)return matcher(elem,context,xml)}:function(elem,context,xml){var data,cache,outerCache,dirkey=dirruns+" "+doneName;if(xml){for(;elem=elem[dir];)if((1===elem.nodeType||checkNonElements)&&matcher(elem,context,xml))return!0}else for(;elem=elem[dir];)if(1===elem.nodeType||checkNonElements)if(outerCache=elem[expando]||(elem[expando]={}),(cache=outerCache[dir])&&cache[0]===dirkey){if((data=cache[1])===!0||data===cachedruns)return data===!0}else if(cache=outerCache[dir]=[dirkey],cache[1]=matcher(elem,context,xml)||cachedruns,cache[1]===!0)return!0}}function elementMatcher(matchers){return matchers.length>1?function(elem,context,xml){for(var i=matchers.length;i--;)if(!matchers[i](elem,context,xml))return!1;return!0}:matchers[0]}function condense(unmatched,map,filter,context,xml){for(var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=null!=map;len>i;i++)(elem=unmatched[i])&&(!filter||filter(elem,context,xml))&&(newUnmatched.push(elem),mapped&&map.push(i));return newUnmatched}function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){return postFilter&&!postFilter[expando]&&(postFilter=setMatcher(postFilter)),postFinder&&!postFinder[expando]&&(postFinder=setMatcher(postFinder,postSelector)),markFunction(function(seed,results,context,xml){var temp,i,elem,preMap=[],postMap=[],preexisting=results.length,elems=seed||multipleContexts(selector||"*",context.nodeType?[context]:context,[]),matcherIn=!preFilter||!seed&&selector?elems:condense(elems,preMap,preFilter,context,xml),matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;if(matcher&&matcher(matcherIn,matcherOut,context,xml),postFilter)for(temp=condense(matcherOut,postMap),postFilter(temp,[],context,xml),i=temp.length;i--;)(elem=temp[i])&&(matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem));if(seed){if(postFinder||preFilter){if(postFinder){for(temp=[],i=matcherOut.length;i--;)(elem=matcherOut[i])&&temp.push(matcherIn[i]=elem);postFinder(null,matcherOut=[],temp,xml)}for(i=matcherOut.length;i--;)(elem=matcherOut[i])&&(temp=postFinder?indexOf.call(seed,elem):preMap[i])>-1&&(seed[temp]=!(results[temp]=elem))}}else matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut),postFinder?postFinder(null,results,matcherOut,xml):push.apply(results,matcherOut)})}function matcherFromTokens(tokens){for(var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator(function(elem){return elem===checkContext},implicitRelative,!0),matchAnyContext=addCombinator(function(elem){return indexOf.call(checkContext,elem)>-1},implicitRelative,!0),matchers=[function(elem,context,xml){return!leadingRelative&&(xml||context!==outermostContext)||((checkContext=context).nodeType?matchContext(elem,context,xml):matchAnyContext(elem,context,xml))}];len>i;i++)if(matcher=Expr.relative[tokens[i].type])matchers=[addCombinator(elementMatcher(matchers),matcher)];else{if(matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches),matcher[expando]){for(j=++i;len>j&&!Expr.relative[tokens[j].type];j++);return setMatcher(i>1&&elementMatcher(matchers),i>1&&toSelector(tokens.slice(0,i-1).concat({value:" "===tokens[i-2].type?"*":""})).replace(rtrim,"$1"),matcher,j>i&&matcherFromTokens(tokens.slice(i,j)),len>j&&matcherFromTokens(tokens=tokens.slice(j)),len>j&&toSelector(tokens))}matchers.push(matcher)}return elementMatcher(matchers)}function matcherFromGroupMatchers(elementMatchers,setMatchers){var matcherCachedRuns=0,bySet=setMatchers.length>0,byElement=elementMatchers.length>0,superMatcher=function(seed,context,xml,results,expandContext){var elem,j,matcher,setMatched=[],matchedCount=0,i="0",unmatched=seed&&[],outermost=null!=expandContext,contextBackup=outermostContext,elems=seed||byElement&&Expr.find.TAG("*",expandContext&&context.parentNode||context),dirrunsUnique=dirruns+=null==contextBackup?1:Math.random()||.1;
for(outermost&&(outermostContext=context!==document&&context,cachedruns=matcherCachedRuns);null!=(elem=elems[i]);i++){if(byElement&&elem){for(j=0;matcher=elementMatchers[j++];)if(matcher(elem,context,xml)){results.push(elem);break}outermost&&(dirruns=dirrunsUnique,cachedruns=++matcherCachedRuns)}bySet&&((elem=!matcher&&elem)&&matchedCount--,seed&&unmatched.push(elem))}if(matchedCount+=i,bySet&&i!==matchedCount){for(j=0;matcher=setMatchers[j++];)matcher(unmatched,setMatched,context,xml);if(seed){if(matchedCount>0)for(;i--;)unmatched[i]||setMatched[i]||(setMatched[i]=pop.call(results));setMatched=condense(setMatched)}push.apply(results,setMatched),outermost&&!seed&&setMatched.length>0&&matchedCount+setMatchers.length>1&&Sizzle.uniqueSort(results)}return outermost&&(dirruns=dirrunsUnique,outermostContext=contextBackup),unmatched};return bySet?markFunction(superMatcher):superMatcher}function multipleContexts(selector,contexts,results){for(var i=0,len=contexts.length;len>i;i++)Sizzle(selector,contexts[i],results);return results}function select(selector,context,results,seed){var i,tokens,token,type,find,match=tokenize(selector);if(!seed&&1===match.length){if(tokens=match[0]=match[0].slice(0),tokens.length>2&&"ID"===(token=tokens[0]).type&&support.getById&&9===context.nodeType&&documentIsHTML&&Expr.relative[tokens[1].type]){if(context=(Expr.find.ID(token.matches[0].replace(runescape,funescape),context)||[])[0],!context)return results;selector=selector.slice(tokens.shift().value.length)}for(i=matchExpr.needsContext.test(selector)?0:tokens.length;i--&&(token=tokens[i],!Expr.relative[type=token.type]);)if((find=Expr.find[type])&&(seed=find(token.matches[0].replace(runescape,funescape),rsibling.test(tokens[0].type)&&context.parentNode||context))){if(tokens.splice(i,1),selector=seed.length&&toSelector(tokens),!selector)return push.apply(results,seed),results;break}}return compile(selector,match)(seed,context,!documentIsHTML,results,rsibling.test(selector)),results}var i,support,cachedruns,Expr,getText,isXML,compile,outermostContext,sortInput,setDocument,document,docElem,documentIsHTML,rbuggyQSA,rbuggyMatches,matches,contains,expando="sizzle"+-new Date,preferredDoc=window.document,dirruns=0,done=0,classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),hasDuplicate=!1,sortOrder=function(a,b){return a===b?(hasDuplicate=!0,0):0},strundefined=typeof undefined,MAX_NEGATIVE=1<<31,hasOwn={}.hasOwnProperty,arr=[],pop=arr.pop,push_native=arr.push,push=arr.push,slice=arr.slice,indexOf=arr.indexOf||function(elem){for(var i=0,len=this.length;len>i;i++)if(this[i]===elem)return i;return-1},booleans="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",whitespace="[\\x20\\t\\r\\n\\f]",characterEncoding="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",identifier=characterEncoding.replace("w","w#"),attributes="\\["+whitespace+"*("+characterEncoding+")"+whitespace+"*(?:([*^$|!~]?=)"+whitespace+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+identifier+")|)|)"+whitespace+"*\\]",pseudos=":("+characterEncoding+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+attributes.replace(3,8)+")*)|.*)\\)|)",rtrim=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),rcomma=new RegExp("^"+whitespace+"*,"+whitespace+"*"),rcombinators=new RegExp("^"+whitespace+"*([>+~]|"+whitespace+")"+whitespace+"*"),rsibling=new RegExp(whitespace+"*[+~]"),rattributeQuotes=new RegExp("="+whitespace+"*([^\\]'\"]*)"+whitespace+"*\\]","g"),rpseudo=new RegExp(pseudos),ridentifier=new RegExp("^"+identifier+"$"),matchExpr={ID:new RegExp("^#("+characterEncoding+")"),CLASS:new RegExp("^\\.("+characterEncoding+")"),TAG:new RegExp("^("+characterEncoding.replace("w","w*")+")"),ATTR:new RegExp("^"+attributes),PSEUDO:new RegExp("^"+pseudos),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+whitespace+"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+"*(\\d+)|))"+whitespace+"*\\)|)","i"),bool:new RegExp("^(?:"+booleans+")$","i"),needsContext:new RegExp("^"+whitespace+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+whitespace+"*((?:-\\d)?\\d*)"+whitespace+"*\\)|)(?=[^-]|$)","i")},rnative=/^[^{]+\{\s*\[native \w/,rquickExpr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rinputs=/^(?:input|select|textarea|button)$/i,rheader=/^h\d$/i,rescape=/'|\\/g,runescape=new RegExp("\\\\([\\da-f]{1,6}"+whitespace+"?|("+whitespace+")|.)","ig"),funescape=function(_,escaped,escapedWhitespace){var high="0x"+escaped-65536;return high!==high||escapedWhitespace?escaped:0>high?String.fromCharCode(high+65536):String.fromCharCode(high>>10|55296,1023&high|56320)};try{push.apply(arr=slice.call(preferredDoc.childNodes),preferredDoc.childNodes),arr[preferredDoc.childNodes.length].nodeType}catch(e){push={apply:arr.length?function(target,els){push_native.apply(target,slice.call(els))}:function(target,els){for(var j=target.length,i=0;target[j++]=els[i++];);target.length=j-1}}}isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return documentElement?"HTML"!==documentElement.nodeName:!1},support=Sizzle.support={},setDocument=Sizzle.setDocument=function(node){var doc=node?node.ownerDocument||node:preferredDoc,parent=doc.defaultView;return doc!==document&&9===doc.nodeType&&doc.documentElement?(document=doc,docElem=doc.documentElement,documentIsHTML=!isXML(doc),parent&&parent.attachEvent&&parent!==parent.top&&parent.attachEvent("onbeforeunload",function(){setDocument()}),support.attributes=assert(function(div){return div.className="i",!div.getAttribute("className")}),support.getElementsByTagName=assert(function(div){return div.appendChild(doc.createComment("")),!div.getElementsByTagName("*").length}),support.getElementsByClassName=assert(function(div){return div.innerHTML="<div class='a'></div><div class='a i'></div>",div.firstChild.className="i",2===div.getElementsByClassName("i").length}),support.getById=assert(function(div){return docElem.appendChild(div).id=expando,!doc.getElementsByName||!doc.getElementsByName(expando).length}),support.getById?(Expr.find.ID=function(id,context){if(typeof context.getElementById!==strundefined&&documentIsHTML){var m=context.getElementById(id);return m&&m.parentNode?[m]:[]}},Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){return elem.getAttribute("id")===attrId}}):(delete Expr.find.ID,Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){var node=typeof elem.getAttributeNode!==strundefined&&elem.getAttributeNode("id");return node&&node.value===attrId}}),Expr.find.TAG=support.getElementsByTagName?function(tag,context){return typeof context.getElementsByTagName!==strundefined?context.getElementsByTagName(tag):void 0}:function(tag,context){var elem,tmp=[],i=0,results=context.getElementsByTagName(tag);if("*"===tag){for(;elem=results[i++];)1===elem.nodeType&&tmp.push(elem);return tmp}return results},Expr.find.CLASS=support.getElementsByClassName&&function(className,context){return typeof context.getElementsByClassName!==strundefined&&documentIsHTML?context.getElementsByClassName(className):void 0},rbuggyMatches=[],rbuggyQSA=[],(support.qsa=rnative.test(doc.querySelectorAll))&&(assert(function(div){div.innerHTML="<select><option selected=''></option></select>",div.querySelectorAll("[selected]").length||rbuggyQSA.push("\\["+whitespace+"*(?:value|"+booleans+")"),div.querySelectorAll(":checked").length||rbuggyQSA.push(":checked")}),assert(function(div){var input=doc.createElement("input");input.setAttribute("type","hidden"),div.appendChild(input).setAttribute("t",""),div.querySelectorAll("[t^='']").length&&rbuggyQSA.push("[*^$]="+whitespace+"*(?:''|\"\")"),div.querySelectorAll(":enabled").length||rbuggyQSA.push(":enabled",":disabled"),div.querySelectorAll("*,:x"),rbuggyQSA.push(",.*:")})),(support.matchesSelector=rnative.test(matches=docElem.webkitMatchesSelector||docElem.mozMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector))&&assert(function(div){support.disconnectedMatch=matches.call(div,"div"),matches.call(div,"[s!='']:x"),rbuggyMatches.push("!=",pseudos)}),rbuggyQSA=rbuggyQSA.length&&new RegExp(rbuggyQSA.join("|")),rbuggyMatches=rbuggyMatches.length&&new RegExp(rbuggyMatches.join("|")),contains=rnative.test(docElem.contains)||docElem.compareDocumentPosition?function(a,b){var adown=9===a.nodeType?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!(!bup||1!==bup.nodeType||!(adown.contains?adown.contains(bup):a.compareDocumentPosition&&16&a.compareDocumentPosition(bup)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},sortOrder=docElem.compareDocumentPosition?function(a,b){if(a===b)return hasDuplicate=!0,0;var compare=b.compareDocumentPosition&&a.compareDocumentPosition&&a.compareDocumentPosition(b);return compare?1&compare||!support.sortDetached&&b.compareDocumentPosition(a)===compare?a===doc||contains(preferredDoc,a)?-1:b===doc||contains(preferredDoc,b)?1:sortInput?indexOf.call(sortInput,a)-indexOf.call(sortInput,b):0:4&compare?-1:1:a.compareDocumentPosition?-1:1}:function(a,b){var cur,i=0,aup=a.parentNode,bup=b.parentNode,ap=[a],bp=[b];if(a===b)return hasDuplicate=!0,0;if(!aup||!bup)return a===doc?-1:b===doc?1:aup?-1:bup?1:sortInput?indexOf.call(sortInput,a)-indexOf.call(sortInput,b):0;if(aup===bup)return siblingCheck(a,b);for(cur=a;cur=cur.parentNode;)ap.unshift(cur);for(cur=b;cur=cur.parentNode;)bp.unshift(cur);for(;ap[i]===bp[i];)i++;return i?siblingCheck(ap[i],bp[i]):ap[i]===preferredDoc?-1:bp[i]===preferredDoc?1:0},doc):document},Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements)},Sizzle.matchesSelector=function(elem,expr){if((elem.ownerDocument||elem)!==document&&setDocument(elem),expr=expr.replace(rattributeQuotes,"='$1']"),!(!support.matchesSelector||!documentIsHTML||rbuggyMatches&&rbuggyMatches.test(expr)||rbuggyQSA&&rbuggyQSA.test(expr)))try{var ret=matches.call(elem,expr);if(ret||support.disconnectedMatch||elem.document&&11!==elem.document.nodeType)return ret}catch(e){}return Sizzle(expr,document,null,[elem]).length>0},Sizzle.contains=function(context,elem){return(context.ownerDocument||context)!==document&&setDocument(context),contains(context,elem)},Sizzle.attr=function(elem,name){(elem.ownerDocument||elem)!==document&&setDocument(elem);var fn=Expr.attrHandle[name.toLowerCase()],val=fn&&hasOwn.call(Expr.attrHandle,name.toLowerCase())?fn(elem,name,!documentIsHTML):undefined;return val===undefined?support.attributes||!documentIsHTML?elem.getAttribute(name):(val=elem.getAttributeNode(name))&&val.specified?val.value:null:val},Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg)},Sizzle.uniqueSort=function(results){var elem,duplicates=[],j=0,i=0;if(hasDuplicate=!support.detectDuplicates,sortInput=!support.sortStable&&results.slice(0),results.sort(sortOrder),hasDuplicate){for(;elem=results[i++];)elem===results[i]&&(j=duplicates.push(i));for(;j--;)results.splice(duplicates[j],1)}return results},getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(nodeType){if(1===nodeType||9===nodeType||11===nodeType){if("string"==typeof elem.textContent)return elem.textContent;for(elem=elem.firstChild;elem;elem=elem.nextSibling)ret+=getText(elem)}else if(3===nodeType||4===nodeType)return elem.nodeValue}else for(;node=elem[i];i++)ret+=getText(node);return ret},Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(match){return match[1]=match[1].replace(runescape,funescape),match[3]=(match[4]||match[5]||"").replace(runescape,funescape),"~="===match[2]&&(match[3]=" "+match[3]+" "),match.slice(0,4)},CHILD:function(match){return match[1]=match[1].toLowerCase(),"nth"===match[1].slice(0,3)?(match[3]||Sizzle.error(match[0]),match[4]=+(match[4]?match[5]+(match[6]||1):2*("even"===match[3]||"odd"===match[3])),match[5]=+(match[7]+match[8]||"odd"===match[3])):match[3]&&Sizzle.error(match[0]),match},PSEUDO:function(match){var excess,unquoted=!match[5]&&match[2];return matchExpr.CHILD.test(match[0])?null:(match[3]&&match[4]!==undefined?match[2]=match[4]:unquoted&&rpseudo.test(unquoted)&&(excess=tokenize(unquoted,!0))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)&&(match[0]=match[0].slice(0,excess),match[2]=unquoted.slice(0,excess)),match.slice(0,3))}},filter:{TAG:function(nodeNameSelector){var nodeName=nodeNameSelector.replace(runescape,funescape).toLowerCase();return"*"===nodeNameSelector?function(){return!0}:function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName}},CLASS:function(className){var pattern=classCache[className+" "];return pattern||(pattern=new RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)"))&&classCache(className,function(elem){return pattern.test("string"==typeof elem.className&&elem.className||typeof elem.getAttribute!==strundefined&&elem.getAttribute("class")||"")})},ATTR:function(name,operator,check){return function(elem){var result=Sizzle.attr(elem,name);return null==result?"!="===operator:operator?(result+="","="===operator?result===check:"!="===operator?result!==check:"^="===operator?check&&0===result.indexOf(check):"*="===operator?check&&result.indexOf(check)>-1:"$="===operator?check&&result.slice(-check.length)===check:"~="===operator?(" "+result+" ").indexOf(check)>-1:"|="===operator?result===check||result.slice(0,check.length+1)===check+"-":!1):!0}},CHILD:function(type,what,argument,first,last){var simple="nth"!==type.slice(0,3),forward="last"!==type.slice(-4),ofType="of-type"===what;return 1===first&&0===last?function(elem){return!!elem.parentNode}:function(elem,context,xml){var cache,outerCache,node,diff,nodeIndex,start,dir=simple!==forward?"nextSibling":"previousSibling",parent=elem.parentNode,name=ofType&&elem.nodeName.toLowerCase(),useCache=!xml&&!ofType;if(parent){if(simple){for(;dir;){for(node=elem;node=node[dir];)if(ofType?node.nodeName.toLowerCase()===name:1===node.nodeType)return!1;start=dir="only"===type&&!start&&"nextSibling"}return!0}if(start=[forward?parent.firstChild:parent.lastChild],forward&&useCache){for(outerCache=parent[expando]||(parent[expando]={}),cache=outerCache[type]||[],nodeIndex=cache[0]===dirruns&&cache[1],diff=cache[0]===dirruns&&cache[2],node=nodeIndex&&parent.childNodes[nodeIndex];node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop();)if(1===node.nodeType&&++diff&&node===elem){outerCache[type]=[dirruns,nodeIndex,diff];break}}else if(useCache&&(cache=(elem[expando]||(elem[expando]={}))[type])&&cache[0]===dirruns)diff=cache[1];else for(;(node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop())&&((ofType?node.nodeName.toLowerCase()!==name:1!==node.nodeType)||!++diff||(useCache&&((node[expando]||(node[expando]={}))[type]=[dirruns,diff]),node!==elem)););return diff-=last,diff===first||diff%first===0&&diff/first>=0}}},PSEUDO:function(pseudo,argument){var args,fn=Expr.pseudos[pseudo]||Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo);return fn[expando]?fn(argument):fn.length>1?(args=[pseudo,pseudo,"",argument],Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction(function(seed,matches){for(var idx,matched=fn(seed,argument),i=matched.length;i--;)idx=indexOf.call(seed,matched[i]),seed[idx]=!(matches[idx]=matched[i])}):function(elem){return fn(elem,0,args)}):fn}},pseudos:{not:markFunction(function(selector){var input=[],results=[],matcher=compile(selector.replace(rtrim,"$1"));return matcher[expando]?markFunction(function(seed,matches,context,xml){for(var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length;i--;)(elem=unmatched[i])&&(seed[i]=!(matches[i]=elem))}):function(elem,context,xml){return input[0]=elem,matcher(input,null,xml,results),!results.pop()}}),has:markFunction(function(selector){return function(elem){return Sizzle(selector,elem).length>0}}),contains:markFunction(function(text){return function(elem){return(elem.textContent||elem.innerText||getText(elem)).indexOf(text)>-1}}),lang:markFunction(function(lang){return ridentifier.test(lang||"")||Sizzle.error("unsupported lang: "+lang),lang=lang.replace(runescape,funescape).toLowerCase(),function(elem){var elemLang;do if(elemLang=documentIsHTML?elem.lang:elem.getAttribute("xml:lang")||elem.getAttribute("lang"))return elemLang=elemLang.toLowerCase(),elemLang===lang||0===elemLang.indexOf(lang+"-");while((elem=elem.parentNode)&&1===elem.nodeType);return!1}}),target:function(elem){var hash=window.location&&window.location.hash;return hash&&hash.slice(1)===elem.id},root:function(elem){return elem===docElem},focus:function(elem){return elem===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(elem.type||elem.href||~elem.tabIndex)},enabled:function(elem){return elem.disabled===!1},disabled:function(elem){return elem.disabled===!0},checked:function(elem){var nodeName=elem.nodeName.toLowerCase();return"input"===nodeName&&!!elem.checked||"option"===nodeName&&!!elem.selected},selected:function(elem){return elem.parentNode&&elem.parentNode.selectedIndex,elem.selected===!0},empty:function(elem){for(elem=elem.firstChild;elem;elem=elem.nextSibling)if(elem.nodeName>"@"||3===elem.nodeType||4===elem.nodeType)return!1;return!0},parent:function(elem){return!Expr.pseudos.empty(elem)},header:function(elem){return rheader.test(elem.nodeName)},input:function(elem){return rinputs.test(elem.nodeName)},button:function(elem){var name=elem.nodeName.toLowerCase();return"input"===name&&"button"===elem.type||"button"===name},text:function(elem){var attr;return"input"===elem.nodeName.toLowerCase()&&"text"===elem.type&&(null==(attr=elem.getAttribute("type"))||attr.toLowerCase()===elem.type)},first:createPositionalPseudo(function(){return[0]}),last:createPositionalPseudo(function(matchIndexes,length){return[length-1]}),eq:createPositionalPseudo(function(matchIndexes,length,argument){return[0>argument?argument+length:argument]}),even:createPositionalPseudo(function(matchIndexes,length){for(var i=0;length>i;i+=2)matchIndexes.push(i);return matchIndexes}),odd:createPositionalPseudo(function(matchIndexes,length){for(var i=1;length>i;i+=2)matchIndexes.push(i);return matchIndexes}),lt:createPositionalPseudo(function(matchIndexes,length,argument){for(var i=0>argument?argument+length:argument;--i>=0;)matchIndexes.push(i);return matchIndexes}),gt:createPositionalPseudo(function(matchIndexes,length,argument){for(var i=0>argument?argument+length:argument;++i<length;)matchIndexes.push(i);return matchIndexes})}},Expr.pseudos.nth=Expr.pseudos.eq;for(i in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})Expr.pseudos[i]=createInputPseudo(i);for(i in{submit:!0,reset:!0})Expr.pseudos[i]=createButtonPseudo(i);setFilters.prototype=Expr.filters=Expr.pseudos,Expr.setFilters=new setFilters,compile=Sizzle.compile=function(selector,group){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[selector+" "];if(!cached){for(group||(group=tokenize(selector)),i=group.length;i--;)cached=matcherFromTokens(group[i]),cached[expando]?setMatchers.push(cached):elementMatchers.push(cached);cached=compilerCache(selector,matcherFromGroupMatchers(elementMatchers,setMatchers))}return cached},support.sortStable=expando.split("").sort(sortOrder).join("")===expando,support.detectDuplicates=hasDuplicate,setDocument(),support.sortDetached=assert(function(div1){return 1&div1.compareDocumentPosition(document.createElement("div"))}),assert(function(div){return div.innerHTML="<a href='#'></a>","#"===div.firstChild.getAttribute("href")})||addHandle("type|href|height|width",function(elem,name,isXML){return isXML?void 0:elem.getAttribute(name,"type"===name.toLowerCase()?1:2)}),support.attributes&&assert(function(div){return div.innerHTML="<input/>",div.firstChild.setAttribute("value",""),""===div.firstChild.getAttribute("value")})||addHandle("value",function(elem,name,isXML){return isXML||"input"!==elem.nodeName.toLowerCase()?void 0:elem.defaultValue}),assert(function(div){return null==div.getAttribute("disabled")})||addHandle(booleans,function(elem,name,isXML){var val;return isXML?void 0:(val=elem.getAttributeNode(name))&&val.specified?val.value:elem[name]===!0?name.toLowerCase():null}),jQuery.find=Sizzle,jQuery.expr=Sizzle.selectors,jQuery.expr[":"]=jQuery.expr.pseudos,jQuery.unique=Sizzle.uniqueSort,jQuery.text=Sizzle.getText,jQuery.isXMLDoc=Sizzle.isXML,jQuery.contains=Sizzle.contains}(window);var optionsCache={};jQuery.Callbacks=function(options){options="string"==typeof options?optionsCache[options]||createOptions(options):jQuery.extend({},options);var memory,fired,firing,firingStart,firingLength,firingIndex,list=[],stack=!options.once&&[],fire=function(data){for(memory=options.memory&&data,fired=!0,firingIndex=firingStart||0,firingStart=0,firingLength=list.length,firing=!0;list&&firingLength>firingIndex;firingIndex++)if(list[firingIndex].apply(data[0],data[1])===!1&&options.stopOnFalse){memory=!1;break}firing=!1,list&&(stack?stack.length&&fire(stack.shift()):memory?list=[]:self.disable())},self={add:function(){if(list){var start=list.length;!function add(args){jQuery.each(args,function(_,arg){var type=jQuery.type(arg);"function"===type?options.unique&&self.has(arg)||list.push(arg):arg&&arg.length&&"string"!==type&&add(arg)})}(arguments),firing?firingLength=list.length:memory&&(firingStart=start,fire(memory))}return this},remove:function(){return list&&jQuery.each(arguments,function(_,arg){for(var index;(index=jQuery.inArray(arg,list,index))>-1;)list.splice(index,1),firing&&(firingLength>=index&&firingLength--,firingIndex>=index&&firingIndex--)}),this},has:function(fn){return fn?jQuery.inArray(fn,list)>-1:!(!list||!list.length)},empty:function(){return list=[],firingLength=0,this},disable:function(){return list=stack=memory=undefined,this},disabled:function(){return!list},lock:function(){return stack=undefined,memory||self.disable(),this},locked:function(){return!stack},fireWith:function(context,args){return!list||fired&&!stack||(args=args||[],args=[context,args.slice?args.slice():args],firing?stack.push(args):fire(args)),this},fire:function(){return self.fireWith(this,arguments),this},fired:function(){return!!fired}};return self},jQuery.extend({Deferred:function(func){var tuples=[["resolve","done",jQuery.Callbacks("once memory"),"resolved"],["reject","fail",jQuery.Callbacks("once memory"),"rejected"],["notify","progress",jQuery.Callbacks("memory")]],state="pending",promise={state:function(){return state},always:function(){return deferred.done(arguments).fail(arguments),this},then:function(){var fns=arguments;return jQuery.Deferred(function(newDefer){jQuery.each(tuples,function(i,tuple){var action=tuple[0],fn=jQuery.isFunction(fns[i])&&fns[i];deferred[tuple[1]](function(){var returned=fn&&fn.apply(this,arguments);returned&&jQuery.isFunction(returned.promise)?returned.promise().done(newDefer.resolve).fail(newDefer.reject).progress(newDefer.notify):newDefer[action+"With"](this===promise?newDefer.promise():this,fn?[returned]:arguments)})}),fns=null}).promise()},promise:function(obj){return null!=obj?jQuery.extend(obj,promise):promise}},deferred={};return promise.pipe=promise.then,jQuery.each(tuples,function(i,tuple){var list=tuple[2],stateString=tuple[3];promise[tuple[1]]=list.add,stateString&&list.add(function(){state=stateString},tuples[1^i][2].disable,tuples[2][2].lock),deferred[tuple[0]]=function(){return deferred[tuple[0]+"With"](this===deferred?promise:this,arguments),this},deferred[tuple[0]+"With"]=list.fireWith}),promise.promise(deferred),func&&func.call(deferred,deferred),deferred},when:function(subordinate){var progressValues,progressContexts,resolveContexts,i=0,resolveValues=core_slice.call(arguments),length=resolveValues.length,remaining=1!==length||subordinate&&jQuery.isFunction(subordinate.promise)?length:0,deferred=1===remaining?subordinate:jQuery.Deferred(),updateFunc=function(i,contexts,values){return function(value){contexts[i]=this,values[i]=arguments.length>1?core_slice.call(arguments):value,values===progressValues?deferred.notifyWith(contexts,values):--remaining||deferred.resolveWith(contexts,values)}};if(length>1)for(progressValues=new Array(length),progressContexts=new Array(length),resolveContexts=new Array(length);length>i;i++)resolveValues[i]&&jQuery.isFunction(resolveValues[i].promise)?resolveValues[i].promise().done(updateFunc(i,resolveContexts,resolveValues)).fail(deferred.reject).progress(updateFunc(i,progressContexts,progressValues)):--remaining;return remaining||deferred.resolveWith(resolveContexts,resolveValues),deferred.promise()}}),jQuery.support=function(support){var input=document.createElement("input"),fragment=document.createDocumentFragment(),div=document.createElement("div"),select=document.createElement("select"),opt=select.appendChild(document.createElement("option"));return input.type?(input.type="checkbox",support.checkOn=""!==input.value,support.optSelected=opt.selected,support.reliableMarginRight=!0,support.boxSizingReliable=!0,support.pixelPosition=!1,input.checked=!0,support.noCloneChecked=input.cloneNode(!0).checked,select.disabled=!0,support.optDisabled=!opt.disabled,input=document.createElement("input"),input.value="t",input.type="radio",support.radioValue="t"===input.value,input.setAttribute("checked","t"),input.setAttribute("name","t"),fragment.appendChild(input),support.checkClone=fragment.cloneNode(!0).cloneNode(!0).lastChild.checked,support.focusinBubbles="onfocusin"in window,div.style.backgroundClip="content-box",div.cloneNode(!0).style.backgroundClip="",support.clearCloneStyle="content-box"===div.style.backgroundClip,jQuery(function(){var container,marginDiv,divReset="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",body=document.getElementsByTagName("body")[0];body&&(container=document.createElement("div"),container.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",body.appendChild(container).appendChild(div),div.innerHTML="",div.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",jQuery.swap(body,null!=body.style.zoom?{zoom:1}:{},function(){support.boxSizing=4===div.offsetWidth}),window.getComputedStyle&&(support.pixelPosition="1%"!==(window.getComputedStyle(div,null)||{}).top,support.boxSizingReliable="4px"===(window.getComputedStyle(div,null)||{width:"4px"}).width,marginDiv=div.appendChild(document.createElement("div")),marginDiv.style.cssText=div.style.cssText=divReset,marginDiv.style.marginRight=marginDiv.style.width="0",div.style.width="1px",support.reliableMarginRight=!parseFloat((window.getComputedStyle(marginDiv,null)||{}).marginRight)),body.removeChild(container))}),support):support}({});var data_user,data_priv,rbrace=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,rmultiDash=/([A-Z])/g;Data.uid=1,Data.accepts=function(owner){return owner.nodeType?1===owner.nodeType||9===owner.nodeType:!0},Data.prototype={key:function(owner){if(!Data.accepts(owner))return 0;var descriptor={},unlock=owner[this.expando];if(!unlock){unlock=Data.uid++;try{descriptor[this.expando]={value:unlock},Object.defineProperties(owner,descriptor)}catch(e){descriptor[this.expando]=unlock,jQuery.extend(owner,descriptor)}}return this.cache[unlock]||(this.cache[unlock]={}),unlock},set:function(owner,data,value){var prop,unlock=this.key(owner),cache=this.cache[unlock];if("string"==typeof data)cache[data]=value;else if(jQuery.isEmptyObject(cache))jQuery.extend(this.cache[unlock],data);else for(prop in data)cache[prop]=data[prop];return cache},get:function(owner,key){var cache=this.cache[this.key(owner)];return key===undefined?cache:cache[key]},access:function(owner,key,value){var stored;return key===undefined||key&&"string"==typeof key&&value===undefined?(stored=this.get(owner,key),stored!==undefined?stored:this.get(owner,jQuery.camelCase(key))):(this.set(owner,key,value),value!==undefined?value:key)},remove:function(owner,key){var i,name,camel,unlock=this.key(owner),cache=this.cache[unlock];if(key===undefined)this.cache[unlock]={};else{jQuery.isArray(key)?name=key.concat(key.map(jQuery.camelCase)):(camel=jQuery.camelCase(key),key in cache?name=[key,camel]:(name=camel,name=name in cache?[name]:name.match(core_rnotwhite)||[])),i=name.length;for(;i--;)delete cache[name[i]]}},hasData:function(owner){return!jQuery.isEmptyObject(this.cache[owner[this.expando]]||{})},discard:function(owner){owner[this.expando]&&delete this.cache[owner[this.expando]]}},data_user=new Data,data_priv=new Data,jQuery.extend({acceptData:Data.accepts,hasData:function(elem){return data_user.hasData(elem)||data_priv.hasData(elem)},data:function(elem,name,data){return data_user.access(elem,name,data)},removeData:function(elem,name){data_user.remove(elem,name)},_data:function(elem,name,data){return data_priv.access(elem,name,data)},_removeData:function(elem,name){data_priv.remove(elem,name)}}),jQuery.fn.extend({data:function(key,value){var attrs,name,elem=this[0],i=0,data=null;if(key===undefined){if(this.length&&(data=data_user.get(elem),1===elem.nodeType&&!data_priv.get(elem,"hasDataAttrs"))){for(attrs=elem.attributes;i<attrs.length;i++)name=attrs[i].name,0===name.indexOf("data-")&&(name=jQuery.camelCase(name.slice(5)),dataAttr(elem,name,data[name]));data_priv.set(elem,"hasDataAttrs",!0)}return data}return"object"==typeof key?this.each(function(){data_user.set(this,key)}):jQuery.access(this,function(value){var data,camelKey=jQuery.camelCase(key);if(elem&&value===undefined){if(data=data_user.get(elem,key),data!==undefined)return data;if(data=data_user.get(elem,camelKey),data!==undefined)return data;if(data=dataAttr(elem,camelKey,undefined),data!==undefined)return data}else this.each(function(){var data=data_user.get(this,camelKey);data_user.set(this,camelKey,value),-1!==key.indexOf("-")&&data!==undefined&&data_user.set(this,key,value)})},null,value,arguments.length>1,null,!0)},removeData:function(key){return this.each(function(){data_user.remove(this,key)})}}),jQuery.extend({queue:function(elem,type,data){var queue;return elem?(type=(type||"fx")+"queue",queue=data_priv.get(elem,type),data&&(!queue||jQuery.isArray(data)?queue=data_priv.access(elem,type,jQuery.makeArray(data)):queue.push(data)),queue||[]):void 0},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),startLength=queue.length,fn=queue.shift(),hooks=jQuery._queueHooks(elem,type),next=function(){jQuery.dequeue(elem,type)};"inprogress"===fn&&(fn=queue.shift(),startLength--),fn&&("fx"===type&&queue.unshift("inprogress"),delete hooks.stop,fn.call(elem,next,hooks)),!startLength&&hooks&&hooks.empty.fire()},_queueHooks:function(elem,type){var key=type+"queueHooks";return data_priv.get(elem,key)||data_priv.access(elem,key,{empty:jQuery.Callbacks("once memory").add(function(){data_priv.remove(elem,[type+"queue",key])})})}}),jQuery.fn.extend({queue:function(type,data){var setter=2;return"string"!=typeof type&&(data=type,type="fx",setter--),arguments.length<setter?jQuery.queue(this[0],type):data===undefined?this:this.each(function(){var queue=jQuery.queue(this,type,data);jQuery._queueHooks(this,type),"fx"===type&&"inprogress"!==queue[0]&&jQuery.dequeue(this,type)})},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type)})},delay:function(time,type){return time=jQuery.fx?jQuery.fx.speeds[time]||time:time,type=type||"fx",this.queue(type,function(next,hooks){var timeout=setTimeout(next,time);hooks.stop=function(){clearTimeout(timeout)}})},clearQueue:function(type){return this.queue(type||"fx",[])},promise:function(type,obj){var tmp,count=1,defer=jQuery.Deferred(),elements=this,i=this.length,resolve=function(){--count||defer.resolveWith(elements,[elements])
};for("string"!=typeof type&&(obj=type,type=undefined),type=type||"fx";i--;)tmp=data_priv.get(elements[i],type+"queueHooks"),tmp&&tmp.empty&&(count++,tmp.empty.add(resolve));return resolve(),defer.promise(obj)}});var nodeHook,boolHook,rclass=/[\t\r\n\f]/g,rreturn=/\r/g,rfocusable=/^(?:input|select|textarea|button)$/i;jQuery.fn.extend({attr:function(name,value){return jQuery.access(this,jQuery.attr,name,value,arguments.length>1)},removeAttr:function(name){return this.each(function(){jQuery.removeAttr(this,name)})},prop:function(name,value){return jQuery.access(this,jQuery.prop,name,value,arguments.length>1)},removeProp:function(name){return this.each(function(){delete this[jQuery.propFix[name]||name]})},addClass:function(value){var classes,elem,cur,clazz,j,i=0,len=this.length,proceed="string"==typeof value&&value;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).addClass(value.call(this,j,this.className))});if(proceed)for(classes=(value||"").match(core_rnotwhite)||[];len>i;i++)if(elem=this[i],cur=1===elem.nodeType&&(elem.className?(" "+elem.className+" ").replace(rclass," "):" ")){for(j=0;clazz=classes[j++];)cur.indexOf(" "+clazz+" ")<0&&(cur+=clazz+" ");elem.className=jQuery.trim(cur)}return this},removeClass:function(value){var classes,elem,cur,clazz,j,i=0,len=this.length,proceed=0===arguments.length||"string"==typeof value&&value;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).removeClass(value.call(this,j,this.className))});if(proceed)for(classes=(value||"").match(core_rnotwhite)||[];len>i;i++)if(elem=this[i],cur=1===elem.nodeType&&(elem.className?(" "+elem.className+" ").replace(rclass," "):"")){for(j=0;clazz=classes[j++];)for(;cur.indexOf(" "+clazz+" ")>=0;)cur=cur.replace(" "+clazz+" "," ");elem.className=value?jQuery.trim(cur):""}return this},toggleClass:function(value,stateVal){var type=typeof value;return"boolean"==typeof stateVal&&"string"===type?stateVal?this.addClass(value):this.removeClass(value):this.each(jQuery.isFunction(value)?function(i){jQuery(this).toggleClass(value.call(this,i,this.className,stateVal),stateVal)}:function(){if("string"===type)for(var className,i=0,self=jQuery(this),classNames=value.match(core_rnotwhite)||[];className=classNames[i++];)self.hasClass(className)?self.removeClass(className):self.addClass(className);else(type===core_strundefined||"boolean"===type)&&(this.className&&data_priv.set(this,"__className__",this.className),this.className=this.className||value===!1?"":data_priv.get(this,"__className__")||"")})},hasClass:function(selector){for(var className=" "+selector+" ",i=0,l=this.length;l>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(rclass," ").indexOf(className)>=0)return!0;return!1},val:function(value){var hooks,ret,isFunction,elem=this[0];{if(arguments.length)return isFunction=jQuery.isFunction(value),this.each(function(i){var val;1===this.nodeType&&(val=isFunction?value.call(this,i,jQuery(this).val()):value,null==val?val="":"number"==typeof val?val+="":jQuery.isArray(val)&&(val=jQuery.map(val,function(value){return null==value?"":value+""})),hooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()],hooks&&"set"in hooks&&hooks.set(this,val,"value")!==undefined||(this.value=val))});if(elem)return hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()],hooks&&"get"in hooks&&(ret=hooks.get(elem,"value"))!==undefined?ret:(ret=elem.value,"string"==typeof ret?ret.replace(rreturn,""):null==ret?"":ret)}}}),jQuery.extend({valHooks:{option:{get:function(elem){var val=elem.attributes.value;return!val||val.specified?elem.value:elem.text}},select:{get:function(elem){for(var value,option,options=elem.options,index=elem.selectedIndex,one="select-one"===elem.type||0>index,values=one?null:[],max=one?index+1:options.length,i=0>index?max:one?index:0;max>i;i++)if(option=options[i],!(!option.selected&&i!==index||(jQuery.support.optDisabled?option.disabled:null!==option.getAttribute("disabled"))||option.parentNode.disabled&&jQuery.nodeName(option.parentNode,"optgroup"))){if(value=jQuery(option).val(),one)return value;values.push(value)}return values},set:function(elem,value){for(var optionSet,option,options=elem.options,values=jQuery.makeArray(value),i=options.length;i--;)option=options[i],(option.selected=jQuery.inArray(jQuery(option).val(),values)>=0)&&(optionSet=!0);return optionSet||(elem.selectedIndex=-1),values}}},attr:function(elem,name,value){var hooks,ret,nType=elem.nodeType;if(elem&&3!==nType&&8!==nType&&2!==nType)return typeof elem.getAttribute===core_strundefined?jQuery.prop(elem,name,value):(1===nType&&jQuery.isXMLDoc(elem)||(name=name.toLowerCase(),hooks=jQuery.attrHooks[name]||(jQuery.expr.match.bool.test(name)?boolHook:nodeHook)),value===undefined?hooks&&"get"in hooks&&null!==(ret=hooks.get(elem,name))?ret:(ret=jQuery.find.attr(elem,name),null==ret?undefined:ret):null!==value?hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined?ret:(elem.setAttribute(name,value+""),value):void jQuery.removeAttr(elem,name))},removeAttr:function(elem,value){var name,propName,i=0,attrNames=value&&value.match(core_rnotwhite);if(attrNames&&1===elem.nodeType)for(;name=attrNames[i++];)propName=jQuery.propFix[name]||name,jQuery.expr.match.bool.test(name)&&(elem[propName]=!1),elem.removeAttribute(name)},attrHooks:{type:{set:function(elem,value){if(!jQuery.support.radioValue&&"radio"===value&&jQuery.nodeName(elem,"input")){var val=elem.value;return elem.setAttribute("type",value),val&&(elem.value=val),value}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(elem,name,value){var ret,hooks,notxml,nType=elem.nodeType;if(elem&&3!==nType&&8!==nType&&2!==nType)return notxml=1!==nType||!jQuery.isXMLDoc(elem),notxml&&(name=jQuery.propFix[name]||name,hooks=jQuery.propHooks[name]),value!==undefined?hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined?ret:elem[name]=value:hooks&&"get"in hooks&&null!==(ret=hooks.get(elem,name))?ret:elem[name]},propHooks:{tabIndex:{get:function(elem){return elem.hasAttribute("tabindex")||rfocusable.test(elem.nodeName)||elem.href?elem.tabIndex:-1}}}}),boolHook={set:function(elem,value,name){return value===!1?jQuery.removeAttr(elem,name):elem.setAttribute(name,name),name}},jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g),function(i,name){var getter=jQuery.expr.attrHandle[name]||jQuery.find.attr;jQuery.expr.attrHandle[name]=function(elem,name,isXML){var fn=jQuery.expr.attrHandle[name],ret=isXML?undefined:(jQuery.expr.attrHandle[name]=undefined)!=getter(elem,name,isXML)?name.toLowerCase():null;return jQuery.expr.attrHandle[name]=fn,ret}}),jQuery.support.optSelected||(jQuery.propHooks.selected={get:function(elem){var parent=elem.parentNode;return parent&&parent.parentNode&&parent.parentNode.selectedIndex,null}}),jQuery.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){jQuery.propFix[this.toLowerCase()]=this}),jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={set:function(elem,value){return jQuery.isArray(value)?elem.checked=jQuery.inArray(jQuery(elem).val(),value)>=0:void 0}},jQuery.support.checkOn||(jQuery.valHooks[this].get=function(elem){return null===elem.getAttribute("value")?"on":elem.value})});var rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|contextmenu)|click/,rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,rtypenamespace=/^([^.]*)(?:\.(.+)|)$/;jQuery.event={global:{},add:function(elem,types,handler,data,selector){var handleObjIn,eventHandle,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=data_priv.get(elem);if(elemData){for(handler.handler&&(handleObjIn=handler,handler=handleObjIn.handler,selector=handleObjIn.selector),handler.guid||(handler.guid=jQuery.guid++),(events=elemData.events)||(events=elemData.events={}),(eventHandle=elemData.handle)||(eventHandle=elemData.handle=function(e){return typeof jQuery===core_strundefined||e&&jQuery.event.triggered===e.type?undefined:jQuery.event.dispatch.apply(eventHandle.elem,arguments)},eventHandle.elem=elem),types=(types||"").match(core_rnotwhite)||[""],t=types.length;t--;)tmp=rtypenamespace.exec(types[t])||[],type=origType=tmp[1],namespaces=(tmp[2]||"").split(".").sort(),type&&(special=jQuery.event.special[type]||{},type=(selector?special.delegateType:special.bindType)||type,special=jQuery.event.special[type]||{},handleObj=jQuery.extend({type:type,origType:origType,data:data,handler:handler,guid:handler.guid,selector:selector,needsContext:selector&&jQuery.expr.match.needsContext.test(selector),namespace:namespaces.join(".")},handleObjIn),(handlers=events[type])||(handlers=events[type]=[],handlers.delegateCount=0,special.setup&&special.setup.call(elem,data,namespaces,eventHandle)!==!1||elem.addEventListener&&elem.addEventListener(type,eventHandle,!1)),special.add&&(special.add.call(elem,handleObj),handleObj.handler.guid||(handleObj.handler.guid=handler.guid)),selector?handlers.splice(handlers.delegateCount++,0,handleObj):handlers.push(handleObj),jQuery.event.global[type]=!0);elem=null}},remove:function(elem,types,handler,selector,mappedTypes){var j,origCount,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=data_priv.hasData(elem)&&data_priv.get(elem);if(elemData&&(events=elemData.events)){for(types=(types||"").match(core_rnotwhite)||[""],t=types.length;t--;)if(tmp=rtypenamespace.exec(types[t])||[],type=origType=tmp[1],namespaces=(tmp[2]||"").split(".").sort(),type){for(special=jQuery.event.special[type]||{},type=(selector?special.delegateType:special.bindType)||type,handlers=events[type]||[],tmp=tmp[2]&&new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"),origCount=j=handlers.length;j--;)handleObj=handlers[j],!mappedTypes&&origType!==handleObj.origType||handler&&handler.guid!==handleObj.guid||tmp&&!tmp.test(handleObj.namespace)||selector&&selector!==handleObj.selector&&("**"!==selector||!handleObj.selector)||(handlers.splice(j,1),handleObj.selector&&handlers.delegateCount--,special.remove&&special.remove.call(elem,handleObj));origCount&&!handlers.length&&(special.teardown&&special.teardown.call(elem,namespaces,elemData.handle)!==!1||jQuery.removeEvent(elem,type,elemData.handle),delete events[type])}else for(type in events)jQuery.event.remove(elem,type+types[t],handler,selector,!0);jQuery.isEmptyObject(events)&&(delete elemData.handle,data_priv.remove(elem,"events"))}},trigger:function(event,data,elem,onlyHandlers){var i,cur,tmp,bubbleType,ontype,handle,special,eventPath=[elem||document],type=core_hasOwn.call(event,"type")?event.type:event,namespaces=core_hasOwn.call(event,"namespace")?event.namespace.split("."):[];if(cur=tmp=elem=elem||document,3!==elem.nodeType&&8!==elem.nodeType&&!rfocusMorph.test(type+jQuery.event.triggered)&&(type.indexOf(".")>=0&&(namespaces=type.split("."),type=namespaces.shift(),namespaces.sort()),ontype=type.indexOf(":")<0&&"on"+type,event=event[jQuery.expando]?event:new jQuery.Event(type,"object"==typeof event&&event),event.isTrigger=onlyHandlers?2:3,event.namespace=namespaces.join("."),event.namespace_re=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,event.result=undefined,event.target||(event.target=elem),data=null==data?[event]:jQuery.makeArray(data,[event]),special=jQuery.event.special[type]||{},onlyHandlers||!special.trigger||special.trigger.apply(elem,data)!==!1)){if(!onlyHandlers&&!special.noBubble&&!jQuery.isWindow(elem)){for(bubbleType=special.delegateType||type,rfocusMorph.test(bubbleType+type)||(cur=cur.parentNode);cur;cur=cur.parentNode)eventPath.push(cur),tmp=cur;tmp===(elem.ownerDocument||document)&&eventPath.push(tmp.defaultView||tmp.parentWindow||window)}for(i=0;(cur=eventPath[i++])&&!event.isPropagationStopped();)event.type=i>1?bubbleType:special.bindType||type,handle=(data_priv.get(cur,"events")||{})[event.type]&&data_priv.get(cur,"handle"),handle&&handle.apply(cur,data),handle=ontype&&cur[ontype],handle&&jQuery.acceptData(cur)&&handle.apply&&handle.apply(cur,data)===!1&&event.preventDefault();return event.type=type,onlyHandlers||event.isDefaultPrevented()||special._default&&special._default.apply(eventPath.pop(),data)!==!1||!jQuery.acceptData(elem)||ontype&&jQuery.isFunction(elem[type])&&!jQuery.isWindow(elem)&&(tmp=elem[ontype],tmp&&(elem[ontype]=null),jQuery.event.triggered=type,elem[type](),jQuery.event.triggered=undefined,tmp&&(elem[ontype]=tmp)),event.result}},dispatch:function(event){event=jQuery.event.fix(event);var i,j,ret,matched,handleObj,handlerQueue=[],args=core_slice.call(arguments),handlers=(data_priv.get(this,"events")||{})[event.type]||[],special=jQuery.event.special[event.type]||{};if(args[0]=event,event.delegateTarget=this,!special.preDispatch||special.preDispatch.call(this,event)!==!1){for(handlerQueue=jQuery.event.handlers.call(this,event,handlers),i=0;(matched=handlerQueue[i++])&&!event.isPropagationStopped();)for(event.currentTarget=matched.elem,j=0;(handleObj=matched.handlers[j++])&&!event.isImmediatePropagationStopped();)(!event.namespace_re||event.namespace_re.test(handleObj.namespace))&&(event.handleObj=handleObj,event.data=handleObj.data,ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args),ret!==undefined&&(event.result=ret)===!1&&(event.preventDefault(),event.stopPropagation()));return special.postDispatch&&special.postDispatch.call(this,event),event.result}},handlers:function(event,handlers){var i,matches,sel,handleObj,handlerQueue=[],delegateCount=handlers.delegateCount,cur=event.target;if(delegateCount&&cur.nodeType&&(!event.button||"click"!==event.type))for(;cur!==this;cur=cur.parentNode||this)if(cur.disabled!==!0||"click"!==event.type){for(matches=[],i=0;delegateCount>i;i++)handleObj=handlers[i],sel=handleObj.selector+" ",matches[sel]===undefined&&(matches[sel]=handleObj.needsContext?jQuery(sel,this).index(cur)>=0:jQuery.find(sel,this,null,[cur]).length),matches[sel]&&matches.push(handleObj);matches.length&&handlerQueue.push({elem:cur,handlers:matches})}return delegateCount<handlers.length&&handlerQueue.push({elem:this,handlers:handlers.slice(delegateCount)}),handlerQueue},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(event,original){return null==event.which&&(event.which=null!=original.charCode?original.charCode:original.keyCode),event}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(event,original){var eventDoc,doc,body,button=original.button;return null==event.pageX&&null!=original.clientX&&(eventDoc=event.target.ownerDocument||document,doc=eventDoc.documentElement,body=eventDoc.body,event.pageX=original.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0),event.pageY=original.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)),event.which||button===undefined||(event.which=1&button?1:2&button?3:4&button?2:0),event}},fix:function(event){if(event[jQuery.expando])return event;var i,prop,copy,type=event.type,originalEvent=event,fixHook=this.fixHooks[type];for(fixHook||(this.fixHooks[type]=fixHook=rmouseEvent.test(type)?this.mouseHooks:rkeyEvent.test(type)?this.keyHooks:{}),copy=fixHook.props?this.props.concat(fixHook.props):this.props,event=new jQuery.Event(originalEvent),i=copy.length;i--;)prop=copy[i],event[prop]=originalEvent[prop];return event.target||(event.target=document),3===event.target.nodeType&&(event.target=event.target.parentNode),fixHook.filter?fixHook.filter(event,originalEvent):event},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==safeActiveElement()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===safeActiveElement()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&jQuery.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(event){return jQuery.nodeName(event.target,"a")}},beforeunload:{postDispatch:function(event){event.result!==undefined&&(event.originalEvent.returnValue=event.result)}}},simulate:function(type,elem,event,bubble){var e=jQuery.extend(new jQuery.Event,event,{type:type,isSimulated:!0,originalEvent:{}});bubble?jQuery.event.trigger(e,null,elem):jQuery.event.dispatch.call(elem,e),e.isDefaultPrevented()&&event.preventDefault()}},jQuery.removeEvent=function(elem,type,handle){elem.removeEventListener&&elem.removeEventListener(type,handle,!1)},jQuery.Event=function(src,props){return this instanceof jQuery.Event?(src&&src.type?(this.originalEvent=src,this.type=src.type,this.isDefaultPrevented=src.defaultPrevented||src.getPreventDefault&&src.getPreventDefault()?returnTrue:returnFalse):this.type=src,props&&jQuery.extend(this,props),this.timeStamp=src&&src.timeStamp||jQuery.now(),void(this[jQuery.expando]=!0)):new jQuery.Event(src,props)},jQuery.Event.prototype={isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=returnTrue,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=returnTrue,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=returnTrue,this.stopPropagation()}},jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var ret,target=this,related=event.relatedTarget,handleObj=event.handleObj;return(!related||related!==target&&!jQuery.contains(target,related))&&(event.type=handleObj.origType,ret=handleObj.handler.apply(this,arguments),event.type=fix),ret}}}),jQuery.support.focusinBubbles||jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){var attaches=0,handler=function(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event),!0)};jQuery.event.special[fix]={setup:function(){0===attaches++&&document.addEventListener(orig,handler,!0)},teardown:function(){0===--attaches&&document.removeEventListener(orig,handler,!0)}}}),jQuery.fn.extend({on:function(types,selector,data,fn,one){var origFn,type;if("object"==typeof types){"string"!=typeof selector&&(data=data||selector,selector=undefined);for(type in types)this.on(type,selector,data,types[type],one);return this}if(null==data&&null==fn?(fn=selector,data=selector=undefined):null==fn&&("string"==typeof selector?(fn=data,data=undefined):(fn=data,data=selector,selector=undefined)),fn===!1)fn=returnFalse;else if(!fn)return this;return 1===one&&(origFn=fn,fn=function(event){return jQuery().off(event),origFn.apply(this,arguments)},fn.guid=origFn.guid||(origFn.guid=jQuery.guid++)),this.each(function(){jQuery.event.add(this,types,fn,data,selector)})},one:function(types,selector,data,fn){return this.on(types,selector,data,fn,1)},off:function(types,selector,fn){var handleObj,type;if(types&&types.preventDefault&&types.handleObj)return handleObj=types.handleObj,jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler),this;if("object"==typeof types){for(type in types)this.off(type,selector,types[type]);return this}return(selector===!1||"function"==typeof selector)&&(fn=selector,selector=undefined),fn===!1&&(fn=returnFalse),this.each(function(){jQuery.event.remove(this,types,fn,selector)})},trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this)})},triggerHandler:function(type,data){var elem=this[0];return elem?jQuery.event.trigger(type,data,elem,!0):void 0}});var isSimple=/^.[^:#\[\.,]*$/,rparentsprev=/^(?:parents|prev(?:Until|All))/,rneedsContext=jQuery.expr.match.needsContext,guaranteedUnique={children:!0,contents:!0,next:!0,prev:!0};jQuery.fn.extend({find:function(selector){var i,ret=[],self=this,len=self.length;if("string"!=typeof selector)return this.pushStack(jQuery(selector).filter(function(){for(i=0;len>i;i++)if(jQuery.contains(self[i],this))return!0}));for(i=0;len>i;i++)jQuery.find(selector,self[i],ret);return ret=this.pushStack(len>1?jQuery.unique(ret):ret),ret.selector=this.selector?this.selector+" "+selector:selector,ret},has:function(target){var targets=jQuery(target,this),l=targets.length;return this.filter(function(){for(var i=0;l>i;i++)if(jQuery.contains(this,targets[i]))return!0})},not:function(selector){return this.pushStack(winnow(this,selector||[],!0))},filter:function(selector){return this.pushStack(winnow(this,selector||[],!1))},is:function(selector){return!!winnow(this,"string"==typeof selector&&rneedsContext.test(selector)?jQuery(selector):selector||[],!1).length},closest:function(selectors,context){for(var cur,i=0,l=this.length,matched=[],pos=rneedsContext.test(selectors)||"string"!=typeof selectors?jQuery(selectors,context||this.context):0;l>i;i++)for(cur=this[i];cur&&cur!==context;cur=cur.parentNode)if(cur.nodeType<11&&(pos?pos.index(cur)>-1:1===cur.nodeType&&jQuery.find.matchesSelector(cur,selectors))){cur=matched.push(cur);break}return this.pushStack(matched.length>1?jQuery.unique(matched):matched)},index:function(elem){return elem?"string"==typeof elem?core_indexOf.call(jQuery(elem),this[0]):core_indexOf.call(this,elem.jquery?elem[0]:elem):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(selector,context){var set="string"==typeof selector?jQuery(selector,context):jQuery.makeArray(selector&&selector.nodeType?[selector]:selector),all=jQuery.merge(this.get(),set);return this.pushStack(jQuery.unique(all))},addBack:function(selector){return this.add(null==selector?this.prevObject:this.prevObject.filter(selector))}}),jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&11!==parent.nodeType?parent:null},parents:function(elem){return jQuery.dir(elem,"parentNode")},parentsUntil:function(elem,i,until){return jQuery.dir(elem,"parentNode",until)},next:function(elem){return sibling(elem,"nextSibling")},prev:function(elem){return sibling(elem,"previousSibling")},nextAll:function(elem){return jQuery.dir(elem,"nextSibling")},prevAll:function(elem){return jQuery.dir(elem,"previousSibling")},nextUntil:function(elem,i,until){return jQuery.dir(elem,"nextSibling",until)},prevUntil:function(elem,i,until){return jQuery.dir(elem,"previousSibling",until)},siblings:function(elem){return jQuery.sibling((elem.parentNode||{}).firstChild,elem)},children:function(elem){return jQuery.sibling(elem.firstChild)},contents:function(elem){return elem.contentDocument||jQuery.merge([],elem.childNodes)}},function(name,fn){jQuery.fn[name]=function(until,selector){var matched=jQuery.map(this,fn,until);return"Until"!==name.slice(-5)&&(selector=until),selector&&"string"==typeof selector&&(matched=jQuery.filter(selector,matched)),this.length>1&&(guaranteedUnique[name]||jQuery.unique(matched),rparentsprev.test(name)&&matched.reverse()),this.pushStack(matched)}}),jQuery.extend({filter:function(expr,elems,not){var elem=elems[0];return not&&(expr=":not("+expr+")"),1===elems.length&&1===elem.nodeType?jQuery.find.matchesSelector(elem,expr)?[elem]:[]:jQuery.find.matches(expr,jQuery.grep(elems,function(elem){return 1===elem.nodeType}))},dir:function(elem,dir,until){for(var matched=[],truncate=until!==undefined;(elem=elem[dir])&&9!==elem.nodeType;)if(1===elem.nodeType){if(truncate&&jQuery(elem).is(until))break;matched.push(elem)}return matched},sibling:function(n,elem){for(var matched=[];n;n=n.nextSibling)1===n.nodeType&&n!==elem&&matched.push(n);return matched}});var rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,rtagName=/<([\w:]+)/,rhtml=/<|&#?\w+;/,rnoInnerhtml=/<(?:script|style|link)/i,manipulation_rcheckableType=/^(?:checkbox|radio)$/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptType=/^$|\/(?:java|ecma)script/i,rscriptTypeMasked=/^true\/(.*)/,rcleanScript=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};wrapMap.optgroup=wrapMap.option,wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead,wrapMap.th=wrapMap.td,jQuery.fn.extend({text:function(value){return jQuery.access(this,function(value){return value===undefined?jQuery.text(this):this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(value))},null,value,arguments.length)},append:function(){return this.domManip(arguments,function(elem){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var target=manipulationTarget(this,elem);target.appendChild(elem)}})},prepend:function(){return this.domManip(arguments,function(elem){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var target=manipulationTarget(this,elem);target.insertBefore(elem,target.firstChild)}})},before:function(){return this.domManip(arguments,function(elem){this.parentNode&&this.parentNode.insertBefore(elem,this)})},after:function(){return this.domManip(arguments,function(elem){this.parentNode&&this.parentNode.insertBefore(elem,this.nextSibling)})},remove:function(selector,keepData){for(var elem,elems=selector?jQuery.filter(selector,this):this,i=0;null!=(elem=elems[i]);i++)keepData||1!==elem.nodeType||jQuery.cleanData(getAll(elem)),elem.parentNode&&(keepData&&jQuery.contains(elem.ownerDocument,elem)&&setGlobalEval(getAll(elem,"script")),elem.parentNode.removeChild(elem));return this},empty:function(){for(var elem,i=0;null!=(elem=this[i]);i++)1===elem.nodeType&&(jQuery.cleanData(getAll(elem,!1)),elem.textContent="");return this},clone:function(dataAndEvents,deepDataAndEvents){return dataAndEvents=null==dataAndEvents?!1:dataAndEvents,deepDataAndEvents=null==deepDataAndEvents?dataAndEvents:deepDataAndEvents,this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents)})},html:function(value){return jQuery.access(this,function(value){var elem=this[0]||{},i=0,l=this.length;if(value===undefined&&1===elem.nodeType)return elem.innerHTML;if("string"==typeof value&&!rnoInnerhtml.test(value)&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){value=value.replace(rxhtmlTag,"<$1></$2>");try{for(;l>i;i++)elem=this[i]||{},1===elem.nodeType&&(jQuery.cleanData(getAll(elem,!1)),elem.innerHTML=value);elem=0}catch(e){}}elem&&this.empty().append(value)},null,value,arguments.length)},replaceWith:function(){var args=jQuery.map(this,function(elem){return[elem.nextSibling,elem.parentNode]}),i=0;return this.domManip(arguments,function(elem){var next=args[i++],parent=args[i++];parent&&(next&&next.parentNode!==parent&&(next=this.nextSibling),jQuery(this).remove(),parent.insertBefore(elem,next))},!0),i?this:this.remove()},detach:function(selector){return this.remove(selector,!0)},domManip:function(args,callback,allowIntersection){args=core_concat.apply([],args);var fragment,first,scripts,hasScripts,node,doc,i=0,l=this.length,set=this,iNoClone=l-1,value=args[0],isFunction=jQuery.isFunction(value);if(isFunction||!(1>=l||"string"!=typeof value||jQuery.support.checkClone)&&rchecked.test(value))return this.each(function(index){var self=set.eq(index);isFunction&&(args[0]=value.call(this,index,self.html())),self.domManip(args,callback,allowIntersection)});if(l&&(fragment=jQuery.buildFragment(args,this[0].ownerDocument,!1,!allowIntersection&&this),first=fragment.firstChild,1===fragment.childNodes.length&&(fragment=first),first)){for(scripts=jQuery.map(getAll(fragment,"script"),disableScript),hasScripts=scripts.length;l>i;i++)node=fragment,i!==iNoClone&&(node=jQuery.clone(node,!0,!0),hasScripts&&jQuery.merge(scripts,getAll(node,"script"))),callback.call(this[i],node,i);if(hasScripts)for(doc=scripts[scripts.length-1].ownerDocument,jQuery.map(scripts,restoreScript),i=0;hasScripts>i;i++)node=scripts[i],rscriptType.test(node.type||"")&&!data_priv.access(node,"globalEval")&&jQuery.contains(doc,node)&&(node.src?jQuery._evalUrl(node.src):jQuery.globalEval(node.textContent.replace(rcleanScript,"")))}return this}}),jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){for(var elems,ret=[],insert=jQuery(selector),last=insert.length-1,i=0;last>=i;i++)elems=i===last?this:this.clone(!0),jQuery(insert[i])[original](elems),core_push.apply(ret,elems.get());return this.pushStack(ret)}}),jQuery.extend({clone:function(elem,dataAndEvents,deepDataAndEvents){var i,l,srcElements,destElements,clone=elem.cloneNode(!0),inPage=jQuery.contains(elem.ownerDocument,elem);if(!(jQuery.support.noCloneChecked||1!==elem.nodeType&&11!==elem.nodeType||jQuery.isXMLDoc(elem)))for(destElements=getAll(clone),srcElements=getAll(elem),i=0,l=srcElements.length;l>i;i++)fixInput(srcElements[i],destElements[i]);if(dataAndEvents)if(deepDataAndEvents)for(srcElements=srcElements||getAll(elem),destElements=destElements||getAll(clone),i=0,l=srcElements.length;l>i;i++)cloneCopyEvent(srcElements[i],destElements[i]);else cloneCopyEvent(elem,clone);return destElements=getAll(clone,"script"),destElements.length>0&&setGlobalEval(destElements,!inPage&&getAll(elem,"script")),clone},buildFragment:function(elems,context,scripts,selection){for(var elem,tmp,tag,wrap,contains,j,i=0,l=elems.length,fragment=context.createDocumentFragment(),nodes=[];l>i;i++)if(elem=elems[i],elem||0===elem)if("object"===jQuery.type(elem))jQuery.merge(nodes,elem.nodeType?[elem]:elem);else if(rhtml.test(elem)){for(tmp=tmp||fragment.appendChild(context.createElement("div")),tag=(rtagName.exec(elem)||["",""])[1].toLowerCase(),wrap=wrapMap[tag]||wrapMap._default,tmp.innerHTML=wrap[1]+elem.replace(rxhtmlTag,"<$1></$2>")+wrap[2],j=wrap[0];j--;)tmp=tmp.lastChild;jQuery.merge(nodes,tmp.childNodes),tmp=fragment.firstChild,tmp.textContent=""}else nodes.push(context.createTextNode(elem));for(fragment.textContent="",i=0;elem=nodes[i++];)if((!selection||-1===jQuery.inArray(elem,selection))&&(contains=jQuery.contains(elem.ownerDocument,elem),tmp=getAll(fragment.appendChild(elem),"script"),contains&&setGlobalEval(tmp),scripts))for(j=0;elem=tmp[j++];)rscriptType.test(elem.type||"")&&scripts.push(elem);return fragment},cleanData:function(elems){for(var data,elem,events,type,key,j,special=jQuery.event.special,i=0;(elem=elems[i])!==undefined;i++){if(Data.accepts(elem)&&(key=elem[data_priv.expando],key&&(data=data_priv.cache[key]))){if(events=Object.keys(data.events||{}),events.length)for(j=0;(type=events[j])!==undefined;j++)special[type]?jQuery.event.remove(elem,type):jQuery.removeEvent(elem,type,data.handle);data_priv.cache[key]&&delete data_priv.cache[key]}delete data_user.cache[elem[data_user.expando]]}},_evalUrl:function(url){return jQuery.ajax({url:url,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),jQuery.fn.extend({wrapAll:function(html){var wrap;return jQuery.isFunction(html)?this.each(function(i){jQuery(this).wrapAll(html.call(this,i))}):(this[0]&&(wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&wrap.insertBefore(this[0]),wrap.map(function(){for(var elem=this;elem.firstElementChild;)elem=elem.firstElementChild;return elem}).append(this)),this)},wrapInner:function(html){return this.each(jQuery.isFunction(html)?function(i){jQuery(this).wrapInner(html.call(this,i))}:function(){var self=jQuery(this),contents=self.contents();contents.length?contents.wrapAll(html):self.append(html)})},wrap:function(html){var isFunction=jQuery.isFunction(html);return this.each(function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html)
})},unwrap:function(){return this.parent().each(function(){jQuery.nodeName(this,"body")||jQuery(this).replaceWith(this.childNodes)}).end()}});var curCSS,iframe,rdisplayswap=/^(none|table(?!-c[ea]).+)/,rmargin=/^margin/,rnumsplit=new RegExp("^("+core_pnum+")(.*)$","i"),rnumnonpx=new RegExp("^("+core_pnum+")(?!px)[a-z%]+$","i"),rrelNum=new RegExp("^([+-])=("+core_pnum+")","i"),elemdisplay={BODY:"block"},cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:0,fontWeight:400},cssExpand=["Top","Right","Bottom","Left"],cssPrefixes=["Webkit","O","Moz","ms"];jQuery.fn.extend({css:function(name,value){return jQuery.access(this,function(elem,name,value){var styles,len,map={},i=0;if(jQuery.isArray(name)){for(styles=getStyles(elem),len=name.length;len>i;i++)map[name[i]]=jQuery.css(elem,name[i],!1,styles);return map}return value!==undefined?jQuery.style(elem,name,value):jQuery.css(elem,name)},name,value,arguments.length>1)},show:function(){return showHide(this,!0)},hide:function(){return showHide(this)},toggle:function(state){return"boolean"==typeof state?state?this.show():this.hide():this.each(function(){isHidden(this)?jQuery(this).show():jQuery(this).hide()})}}),jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,"opacity");return""===ret?"1":ret}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(elem,name,value,extra){if(elem&&3!==elem.nodeType&&8!==elem.nodeType&&elem.style){var ret,type,hooks,origName=jQuery.camelCase(name),style=elem.style;return name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(style,origName)),hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName],value===undefined?hooks&&"get"in hooks&&(ret=hooks.get(elem,!1,extra))!==undefined?ret:style[name]:(type=typeof value,"string"===type&&(ret=rrelNum.exec(value))&&(value=(ret[1]+1)*ret[2]+parseFloat(jQuery.css(elem,name)),type="number"),null==value||"number"===type&&isNaN(value)||("number"!==type||jQuery.cssNumber[origName]||(value+="px"),jQuery.support.clearCloneStyle||""!==value||0!==name.indexOf("background")||(style[name]="inherit"),hooks&&"set"in hooks&&(value=hooks.set(elem,value,extra))===undefined||(style[name]=value)),void 0)}},css:function(elem,name,extra,styles){var val,num,hooks,origName=jQuery.camelCase(name);return name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(elem.style,origName)),hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName],hooks&&"get"in hooks&&(val=hooks.get(elem,!0,extra)),val===undefined&&(val=curCSS(elem,name,styles)),"normal"===val&&name in cssNormalTransform&&(val=cssNormalTransform[name]),""===extra||extra?(num=parseFloat(val),extra===!0||jQuery.isNumeric(num)?num||0:val):val}}),curCSS=function(elem,name,_computed){var width,minWidth,maxWidth,computed=_computed||getStyles(elem),ret=computed?computed.getPropertyValue(name)||computed[name]:undefined,style=elem.style;return computed&&(""!==ret||jQuery.contains(elem.ownerDocument,elem)||(ret=jQuery.style(elem,name)),rnumnonpx.test(ret)&&rmargin.test(name)&&(width=style.width,minWidth=style.minWidth,maxWidth=style.maxWidth,style.minWidth=style.maxWidth=style.width=ret,ret=computed.width,style.width=width,style.minWidth=minWidth,style.maxWidth=maxWidth)),ret},jQuery.each(["height","width"],function(i,name){jQuery.cssHooks[name]={get:function(elem,computed,extra){return computed?0===elem.offsetWidth&&rdisplayswap.test(jQuery.css(elem,"display"))?jQuery.swap(elem,cssShow,function(){return getWidthOrHeight(elem,name,extra)}):getWidthOrHeight(elem,name,extra):void 0},set:function(elem,value,extra){var styles=extra&&getStyles(elem);return setPositiveNumber(elem,value,extra?augmentWidthOrHeight(elem,name,extra,jQuery.support.boxSizing&&"border-box"===jQuery.css(elem,"boxSizing",!1,styles),styles):0)}}}),jQuery(function(){jQuery.support.reliableMarginRight||(jQuery.cssHooks.marginRight={get:function(elem,computed){return computed?jQuery.swap(elem,{display:"inline-block"},curCSS,[elem,"marginRight"]):void 0}}),!jQuery.support.pixelPosition&&jQuery.fn.position&&jQuery.each(["top","left"],function(i,prop){jQuery.cssHooks[prop]={get:function(elem,computed){return computed?(computed=curCSS(elem,prop),rnumnonpx.test(computed)?jQuery(elem).position()[prop]+"px":computed):void 0}}})}),jQuery.expr&&jQuery.expr.filters&&(jQuery.expr.filters.hidden=function(elem){return elem.offsetWidth<=0&&elem.offsetHeight<=0},jQuery.expr.filters.visible=function(elem){return!jQuery.expr.filters.hidden(elem)}),jQuery.each({margin:"",padding:"",border:"Width"},function(prefix,suffix){jQuery.cssHooks[prefix+suffix]={expand:function(value){for(var i=0,expanded={},parts="string"==typeof value?value.split(" "):[value];4>i;i++)expanded[prefix+cssExpand[i]+suffix]=parts[i]||parts[i-2]||parts[0];return expanded}},rmargin.test(prefix)||(jQuery.cssHooks[prefix+suffix].set=setPositiveNumber)});var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i;jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var elements=jQuery.prop(this,"elements");return elements?jQuery.makeArray(elements):this}).filter(function(){var type=this.type;return this.name&&!jQuery(this).is(":disabled")&&rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(type)&&(this.checked||!manipulation_rcheckableType.test(type))}).map(function(i,elem){var val=jQuery(this).val();return null==val?null:jQuery.isArray(val)?jQuery.map(val,function(val){return{name:elem.name,value:val.replace(rCRLF,"\r\n")}}):{name:elem.name,value:val.replace(rCRLF,"\r\n")}}).get()}}),jQuery.param=function(a,traditional){var prefix,s=[],add=function(key,value){value=jQuery.isFunction(value)?value():null==value?"":value,s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value)};if(traditional===undefined&&(traditional=jQuery.ajaxSettings&&jQuery.ajaxSettings.traditional),jQuery.isArray(a)||a.jquery&&!jQuery.isPlainObject(a))jQuery.each(a,function(){add(this.name,this.value)});else for(prefix in a)buildParams(prefix,a[prefix],traditional,add);return s.join("&").replace(r20,"+")},jQuery.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(i,name){jQuery.fn[name]=function(data,fn){return arguments.length>0?this.on(name,null,data,fn):this.trigger(name)}}),jQuery.fn.extend({hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver)},bind:function(types,data,fn){return this.on(types,null,data,fn)},unbind:function(types,fn){return this.off(types,null,fn)},delegate:function(selector,types,data,fn){return this.on(types,selector,data,fn)},undelegate:function(selector,types,fn){return 1===arguments.length?this.off(selector,"**"):this.off(types,selector||"**",fn)}});var ajaxLocParts,ajaxLocation,ajax_nonce=jQuery.now(),ajax_rquery=/\?/,rhash=/#.*$/,rts=/([?&])_=[^&]*/,rheaders=/^(.*?):[ \t]*([^\r\n]*)$/gm,rlocalProtocol=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,rurl=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,_load=jQuery.fn.load,prefilters={},transports={},allTypes="*/".concat("*");try{ajaxLocation=location.href}catch(e){ajaxLocation=document.createElement("a"),ajaxLocation.href="",ajaxLocation=ajaxLocation.href}ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[],jQuery.fn.load=function(url,params,callback){if("string"!=typeof url&&_load)return _load.apply(this,arguments);var selector,type,response,self=this,off=url.indexOf(" ");return off>=0&&(selector=url.slice(off),url=url.slice(0,off)),jQuery.isFunction(params)?(callback=params,params=undefined):params&&"object"==typeof params&&(type="POST"),self.length>0&&jQuery.ajax({url:url,type:type,dataType:"html",data:params}).done(function(responseText){response=arguments,self.html(selector?jQuery("<div>").append(jQuery.parseHTML(responseText)).find(selector):responseText)}).complete(callback&&function(jqXHR,status){self.each(callback,response||[jqXHR.responseText,status,jqXHR])}),this},jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(i,type){jQuery.fn[type]=function(fn){return this.on(type,fn)}}),jQuery.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ajaxLocation,type:"GET",isLocal:rlocalProtocol.test(ajaxLocParts[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":allTypes,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(target,settings){return settings?ajaxExtend(ajaxExtend(target,jQuery.ajaxSettings),settings):ajaxExtend(jQuery.ajaxSettings,target)},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){function done(status,nativeStatusText,responses,headers){var isSuccess,success,error,response,modified,statusText=nativeStatusText;2!==state&&(state=2,timeoutTimer&&clearTimeout(timeoutTimer),transport=undefined,responseHeadersString=headers||"",jqXHR.readyState=status>0?4:0,isSuccess=status>=200&&300>status||304===status,responses&&(response=ajaxHandleResponses(s,jqXHR,responses)),response=ajaxConvert(s,response,jqXHR,isSuccess),isSuccess?(s.ifModified&&(modified=jqXHR.getResponseHeader("Last-Modified"),modified&&(jQuery.lastModified[cacheURL]=modified),modified=jqXHR.getResponseHeader("etag"),modified&&(jQuery.etag[cacheURL]=modified)),204===status||"HEAD"===s.type?statusText="nocontent":304===status?statusText="notmodified":(statusText=response.state,success=response.data,error=response.error,isSuccess=!error)):(error=statusText,(status||!statusText)&&(statusText="error",0>status&&(status=0))),jqXHR.status=status,jqXHR.statusText=(nativeStatusText||statusText)+"",isSuccess?deferred.resolveWith(callbackContext,[success,statusText,jqXHR]):deferred.rejectWith(callbackContext,[jqXHR,statusText,error]),jqXHR.statusCode(statusCode),statusCode=undefined,fireGlobals&&globalEventContext.trigger(isSuccess?"ajaxSuccess":"ajaxError",[jqXHR,s,isSuccess?success:error]),completeDeferred.fireWith(callbackContext,[jqXHR,statusText]),fireGlobals&&(globalEventContext.trigger("ajaxComplete",[jqXHR,s]),--jQuery.active||jQuery.event.trigger("ajaxStop")))}"object"==typeof url&&(options=url,url=undefined),options=options||{};var transport,cacheURL,responseHeadersString,responseHeaders,timeoutTimer,parts,fireGlobals,i,s=jQuery.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=s.context&&(callbackContext.nodeType||callbackContext.jquery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),statusCode=s.statusCode||{},requestHeaders={},requestHeadersNames={},state=0,strAbort="canceled",jqXHR={readyState:0,getResponseHeader:function(key){var match;if(2===state){if(!responseHeaders)for(responseHeaders={};match=rheaders.exec(responseHeadersString);)responseHeaders[match[1].toLowerCase()]=match[2];match=responseHeaders[key.toLowerCase()]}return null==match?null:match},getAllResponseHeaders:function(){return 2===state?responseHeadersString:null},setRequestHeader:function(name,value){var lname=name.toLowerCase();return state||(name=requestHeadersNames[lname]=requestHeadersNames[lname]||name,requestHeaders[name]=value),this},overrideMimeType:function(type){return state||(s.mimeType=type),this},statusCode:function(map){var code;if(map)if(2>state)for(code in map)statusCode[code]=[statusCode[code],map[code]];else jqXHR.always(map[jqXHR.status]);return this},abort:function(statusText){var finalText=statusText||strAbort;return transport&&transport.abort(finalText),done(0,finalText),this}};if(deferred.promise(jqXHR).complete=completeDeferred.add,jqXHR.success=jqXHR.done,jqXHR.error=jqXHR.fail,s.url=((url||s.url||ajaxLocation)+"").replace(rhash,"").replace(rprotocol,ajaxLocParts[1]+"//"),s.type=options.method||options.type||s.method||s.type,s.dataTypes=jQuery.trim(s.dataType||"*").toLowerCase().match(core_rnotwhite)||[""],null==s.crossDomain&&(parts=rurl.exec(s.url.toLowerCase()),s.crossDomain=!(!parts||parts[1]===ajaxLocParts[1]&&parts[2]===ajaxLocParts[2]&&(parts[3]||("http:"===parts[1]?"80":"443"))===(ajaxLocParts[3]||("http:"===ajaxLocParts[1]?"80":"443")))),s.data&&s.processData&&"string"!=typeof s.data&&(s.data=jQuery.param(s.data,s.traditional)),inspectPrefiltersOrTransports(prefilters,s,options,jqXHR),2===state)return jqXHR;fireGlobals=s.global,fireGlobals&&0===jQuery.active++&&jQuery.event.trigger("ajaxStart"),s.type=s.type.toUpperCase(),s.hasContent=!rnoContent.test(s.type),cacheURL=s.url,s.hasContent||(s.data&&(cacheURL=s.url+=(ajax_rquery.test(cacheURL)?"&":"?")+s.data,delete s.data),s.cache===!1&&(s.url=rts.test(cacheURL)?cacheURL.replace(rts,"$1_="+ajax_nonce++):cacheURL+(ajax_rquery.test(cacheURL)?"&":"?")+"_="+ajax_nonce++)),s.ifModified&&(jQuery.lastModified[cacheURL]&&jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[cacheURL]),jQuery.etag[cacheURL]&&jqXHR.setRequestHeader("If-None-Match",jQuery.etag[cacheURL])),(s.data&&s.hasContent&&s.contentType!==!1||options.contentType)&&jqXHR.setRequestHeader("Content-Type",s.contentType),jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+("*"!==s.dataTypes[0]?", "+allTypes+"; q=0.01":""):s.accepts["*"]);for(i in s.headers)jqXHR.setRequestHeader(i,s.headers[i]);if(s.beforeSend&&(s.beforeSend.call(callbackContext,jqXHR,s)===!1||2===state))return jqXHR.abort();strAbort="abort";for(i in{success:1,error:1,complete:1})jqXHR[i](s[i]);if(transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR)){jqXHR.readyState=1,fireGlobals&&globalEventContext.trigger("ajaxSend",[jqXHR,s]),s.async&&s.timeout>0&&(timeoutTimer=setTimeout(function(){jqXHR.abort("timeout")},s.timeout));try{state=1,transport.send(requestHeaders,done)}catch(e){if(!(2>state))throw e;done(-1,e)}}else done(-1,"No Transport");return jqXHR},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json")},getScript:function(url,callback){return jQuery.get(url,undefined,callback,"script")}}),jQuery.each(["get","post"],function(i,method){jQuery[method]=function(url,data,callback,type){return jQuery.isFunction(data)&&(type=type||callback,callback=data,data=undefined),jQuery.ajax({url:url,type:method,dataType:type,data:data,success:callback})}}),jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(text){return jQuery.globalEval(text),text}}}),jQuery.ajaxPrefilter("script",function(s){s.cache===undefined&&(s.cache=!1),s.crossDomain&&(s.type="GET")}),jQuery.ajaxTransport("script",function(s){if(s.crossDomain){var script,callback;return{send:function(_,complete){script=jQuery("<script>").prop({async:!0,charset:s.scriptCharset,src:s.url}).on("load error",callback=function(evt){script.remove(),callback=null,evt&&complete("error"===evt.type?404:200,evt.type)}),document.head.appendChild(script[0])},abort:function(){callback&&callback()}}}});var oldCallbacks=[],rjsonp=/(=)\?(?=&|$)|\?\?/;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var callback=oldCallbacks.pop()||jQuery.expando+"_"+ajax_nonce++;return this[callback]=!0,callback}}),jQuery.ajaxPrefilter("json jsonp",function(s,originalSettings,jqXHR){var callbackName,overwritten,responseContainer,jsonProp=s.jsonp!==!1&&(rjsonp.test(s.url)?"url":"string"==typeof s.data&&!(s.contentType||"").indexOf("application/x-www-form-urlencoded")&&rjsonp.test(s.data)&&"data");return jsonProp||"jsonp"===s.dataTypes[0]?(callbackName=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback,jsonProp?s[jsonProp]=s[jsonProp].replace(rjsonp,"$1"+callbackName):s.jsonp!==!1&&(s.url+=(ajax_rquery.test(s.url)?"&":"?")+s.jsonp+"="+callbackName),s.converters["script json"]=function(){return responseContainer||jQuery.error(callbackName+" was not called"),responseContainer[0]},s.dataTypes[0]="json",overwritten=window[callbackName],window[callbackName]=function(){responseContainer=arguments},jqXHR.always(function(){window[callbackName]=overwritten,s[callbackName]&&(s.jsonpCallback=originalSettings.jsonpCallback,oldCallbacks.push(callbackName)),responseContainer&&jQuery.isFunction(overwritten)&&overwritten(responseContainer[0]),responseContainer=overwritten=undefined}),"script"):void 0}),jQuery.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var xhrSupported=jQuery.ajaxSettings.xhr(),xhrSuccessStatus={0:200,1223:204},xhrId=0,xhrCallbacks={};window.ActiveXObject&&jQuery(window).on("unload",function(){for(var key in xhrCallbacks)xhrCallbacks[key]();xhrCallbacks=undefined}),jQuery.support.cors=!!xhrSupported&&"withCredentials"in xhrSupported,jQuery.support.ajax=xhrSupported=!!xhrSupported,jQuery.ajaxTransport(function(options){var callback;return jQuery.support.cors||xhrSupported&&!options.crossDomain?{send:function(headers,complete){var i,id,xhr=options.xhr();if(xhr.open(options.type,options.url,options.async,options.username,options.password),options.xhrFields)for(i in options.xhrFields)xhr[i]=options.xhrFields[i];options.mimeType&&xhr.overrideMimeType&&xhr.overrideMimeType(options.mimeType),options.crossDomain||headers["X-Requested-With"]||(headers["X-Requested-With"]="XMLHttpRequest");for(i in headers)xhr.setRequestHeader(i,headers[i]);callback=function(type){return function(){callback&&(delete xhrCallbacks[id],callback=xhr.onload=xhr.onerror=null,"abort"===type?xhr.abort():"error"===type?complete(xhr.status||404,xhr.statusText):complete(xhrSuccessStatus[xhr.status]||xhr.status,xhr.statusText,"string"==typeof xhr.responseText?{text:xhr.responseText}:undefined,xhr.getAllResponseHeaders()))}},xhr.onload=callback(),xhr.onerror=callback("error"),callback=xhrCallbacks[id=xhrId++]=callback("abort"),xhr.send(options.hasContent&&options.data||null)},abort:function(){callback&&callback()}}:void 0});var fxNow,timerId,rfxtypes=/^(?:toggle|show|hide)$/,rfxnum=new RegExp("^(?:([+-])=|)("+core_pnum+")([a-z%]*)$","i"),rrun=/queueHooks$/,animationPrefilters=[defaultPrefilter],tweeners={"*":[function(prop,value){var tween=this.createTween(prop,value),target=tween.cur(),parts=rfxnum.exec(value),unit=parts&&parts[3]||(jQuery.cssNumber[prop]?"":"px"),start=(jQuery.cssNumber[prop]||"px"!==unit&&+target)&&rfxnum.exec(jQuery.css(tween.elem,prop)),scale=1,maxIterations=20;if(start&&start[3]!==unit){unit=unit||start[3],parts=parts||[],start=+target||1;do scale=scale||".5",start/=scale,jQuery.style(tween.elem,prop,start+unit);while(scale!==(scale=tween.cur()/target)&&1!==scale&&--maxIterations)}return parts&&(start=tween.start=+start||+target||0,tween.unit=unit,tween.end=parts[1]?start+(parts[1]+1)*parts[2]:+parts[2]),tween}]};jQuery.Animation=jQuery.extend(Animation,{tweener:function(props,callback){jQuery.isFunction(props)?(callback=props,props=["*"]):props=props.split(" ");for(var prop,index=0,length=props.length;length>index;index++)prop=props[index],tweeners[prop]=tweeners[prop]||[],tweeners[prop].unshift(callback)},prefilter:function(callback,prepend){prepend?animationPrefilters.unshift(callback):animationPrefilters.push(callback)}}),jQuery.Tween=Tween,Tween.prototype={constructor:Tween,init:function(elem,options,prop,end,easing,unit){this.elem=elem,this.prop=prop,this.easing=easing||"swing",this.options=options,this.start=this.now=this.cur(),this.end=end,this.unit=unit||(jQuery.cssNumber[prop]?"":"px")},cur:function(){var hooks=Tween.propHooks[this.prop];return hooks&&hooks.get?hooks.get(this):Tween.propHooks._default.get(this)},run:function(percent){var eased,hooks=Tween.propHooks[this.prop];return this.pos=eased=this.options.duration?jQuery.easing[this.easing](percent,this.options.duration*percent,0,1,this.options.duration):percent,this.now=(this.end-this.start)*eased+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),hooks&&hooks.set?hooks.set(this):Tween.propHooks._default.set(this),this}},Tween.prototype.init.prototype=Tween.prototype,Tween.propHooks={_default:{get:function(tween){var result;return null==tween.elem[tween.prop]||tween.elem.style&&null!=tween.elem.style[tween.prop]?(result=jQuery.css(tween.elem,tween.prop,""),result&&"auto"!==result?result:0):tween.elem[tween.prop]},set:function(tween){jQuery.fx.step[tween.prop]?jQuery.fx.step[tween.prop](tween):tween.elem.style&&(null!=tween.elem.style[jQuery.cssProps[tween.prop]]||jQuery.cssHooks[tween.prop])?jQuery.style(tween.elem,tween.prop,tween.now+tween.unit):tween.elem[tween.prop]=tween.now}}},Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(tween){tween.elem.nodeType&&tween.elem.parentNode&&(tween.elem[tween.prop]=tween.now)}},jQuery.each(["toggle","show","hide"],function(i,name){var cssFn=jQuery.fn[name];jQuery.fn[name]=function(speed,easing,callback){return null==speed||"boolean"==typeof speed?cssFn.apply(this,arguments):this.animate(genFx(name,!0),speed,easing,callback)}}),jQuery.fn.extend({fadeTo:function(speed,to,easing,callback){return this.filter(isHidden).css("opacity",0).show().end().animate({opacity:to},speed,easing,callback)},animate:function(prop,speed,easing,callback){var empty=jQuery.isEmptyObject(prop),optall=jQuery.speed(speed,easing,callback),doAnimation=function(){var anim=Animation(this,jQuery.extend({},prop),optall);(empty||data_priv.get(this,"finish"))&&anim.stop(!0)};return doAnimation.finish=doAnimation,empty||optall.queue===!1?this.each(doAnimation):this.queue(optall.queue,doAnimation)},stop:function(type,clearQueue,gotoEnd){var stopQueue=function(hooks){var stop=hooks.stop;delete hooks.stop,stop(gotoEnd)};return"string"!=typeof type&&(gotoEnd=clearQueue,clearQueue=type,type=undefined),clearQueue&&type!==!1&&this.queue(type||"fx",[]),this.each(function(){var dequeue=!0,index=null!=type&&type+"queueHooks",timers=jQuery.timers,data=data_priv.get(this);if(index)data[index]&&data[index].stop&&stopQueue(data[index]);else for(index in data)data[index]&&data[index].stop&&rrun.test(index)&&stopQueue(data[index]);for(index=timers.length;index--;)timers[index].elem!==this||null!=type&&timers[index].queue!==type||(timers[index].anim.stop(gotoEnd),dequeue=!1,timers.splice(index,1));(dequeue||!gotoEnd)&&jQuery.dequeue(this,type)})},finish:function(type){return type!==!1&&(type=type||"fx"),this.each(function(){var index,data=data_priv.get(this),queue=data[type+"queue"],hooks=data[type+"queueHooks"],timers=jQuery.timers,length=queue?queue.length:0;for(data.finish=!0,jQuery.queue(this,type,[]),hooks&&hooks.stop&&hooks.stop.call(this,!0),index=timers.length;index--;)timers[index].elem===this&&timers[index].queue===type&&(timers[index].anim.stop(!0),timers.splice(index,1));for(index=0;length>index;index++)queue[index]&&queue[index].finish&&queue[index].finish.call(this);delete data.finish})}}),jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback)}}),jQuery.speed=function(speed,easing,fn){var opt=speed&&"object"==typeof speed?jQuery.extend({},speed):{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};return opt.duration=jQuery.fx.off?0:"number"==typeof opt.duration?opt.duration:opt.duration in jQuery.fx.speeds?jQuery.fx.speeds[opt.duration]:jQuery.fx.speeds._default,(null==opt.queue||opt.queue===!0)&&(opt.queue="fx"),opt.old=opt.complete,opt.complete=function(){jQuery.isFunction(opt.old)&&opt.old.call(this),opt.queue&&jQuery.dequeue(this,opt.queue)},opt},jQuery.easing={linear:function(p){return p},swing:function(p){return.5-Math.cos(p*Math.PI)/2}},jQuery.timers=[],jQuery.fx=Tween.prototype.init,jQuery.fx.tick=function(){var timer,timers=jQuery.timers,i=0;for(fxNow=jQuery.now();i<timers.length;i++)timer=timers[i],timer()||timers[i]!==timer||timers.splice(i--,1);timers.length||jQuery.fx.stop(),fxNow=undefined},jQuery.fx.timer=function(timer){timer()&&jQuery.timers.push(timer)&&jQuery.fx.start()},jQuery.fx.interval=13,jQuery.fx.start=function(){timerId||(timerId=setInterval(jQuery.fx.tick,jQuery.fx.interval))},jQuery.fx.stop=function(){clearInterval(timerId),timerId=null},jQuery.fx.speeds={slow:600,fast:200,_default:400},jQuery.fx.step={},jQuery.expr&&jQuery.expr.filters&&(jQuery.expr.filters.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem}).length}),jQuery.fn.offset=function(options){if(arguments.length)return options===undefined?this:this.each(function(i){jQuery.offset.setOffset(this,options,i)});var docElem,win,elem=this[0],box={top:0,left:0},doc=elem&&elem.ownerDocument;if(doc)return docElem=doc.documentElement,jQuery.contains(docElem,elem)?(typeof elem.getBoundingClientRect!==core_strundefined&&(box=elem.getBoundingClientRect()),win=getWindow(doc),{top:box.top+win.pageYOffset-docElem.clientTop,left:box.left+win.pageXOffset-docElem.clientLeft}):box},jQuery.offset={setOffset:function(elem,options,i){var curPosition,curLeft,curCSSTop,curTop,curOffset,curCSSLeft,calculatePosition,position=jQuery.css(elem,"position"),curElem=jQuery(elem),props={};"static"===position&&(elem.style.position="relative"),curOffset=curElem.offset(),curCSSTop=jQuery.css(elem,"top"),curCSSLeft=jQuery.css(elem,"left"),calculatePosition=("absolute"===position||"fixed"===position)&&(curCSSTop+curCSSLeft).indexOf("auto")>-1,calculatePosition?(curPosition=curElem.position(),curTop=curPosition.top,curLeft=curPosition.left):(curTop=parseFloat(curCSSTop)||0,curLeft=parseFloat(curCSSLeft)||0),jQuery.isFunction(options)&&(options=options.call(elem,i,curOffset)),null!=options.top&&(props.top=options.top-curOffset.top+curTop),null!=options.left&&(props.left=options.left-curOffset.left+curLeft),"using"in options?options.using.call(elem,props):curElem.css(props)}},jQuery.fn.extend({position:function(){if(this[0]){var offsetParent,offset,elem=this[0],parentOffset={top:0,left:0};return"fixed"===jQuery.css(elem,"position")?offset=elem.getBoundingClientRect():(offsetParent=this.offsetParent(),offset=this.offset(),jQuery.nodeName(offsetParent[0],"html")||(parentOffset=offsetParent.offset()),parentOffset.top+=jQuery.css(offsetParent[0],"borderTopWidth",!0),parentOffset.left+=jQuery.css(offsetParent[0],"borderLeftWidth",!0)),{top:offset.top-parentOffset.top-jQuery.css(elem,"marginTop",!0),left:offset.left-parentOffset.left-jQuery.css(elem,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var offsetParent=this.offsetParent||docElem;offsetParent&&!jQuery.nodeName(offsetParent,"html")&&"static"===jQuery.css(offsetParent,"position");)offsetParent=offsetParent.offsetParent;return offsetParent||docElem})}}),jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(method,prop){var top="pageYOffset"===prop;jQuery.fn[method]=function(val){return jQuery.access(this,function(elem,method,val){var win=getWindow(elem);return val===undefined?win?win[prop]:elem[method]:void(win?win.scrollTo(top?window.pageXOffset:val,top?val:window.pageYOffset):elem[method]=val)},method,val,arguments.length,null)}}),jQuery.each({Height:"height",Width:"width"},function(name,type){jQuery.each({padding:"inner"+name,content:type,"":"outer"+name},function(defaultExtra,funcName){jQuery.fn[funcName]=function(margin,value){var chainable=arguments.length&&(defaultExtra||"boolean"!=typeof margin),extra=defaultExtra||(margin===!0||value===!0?"margin":"border");return jQuery.access(this,function(elem,type,value){var doc;return jQuery.isWindow(elem)?elem.document.documentElement["client"+name]:9===elem.nodeType?(doc=elem.documentElement,Math.max(elem.body["scroll"+name],doc["scroll"+name],elem.body["offset"+name],doc["offset"+name],doc["client"+name])):value===undefined?jQuery.css(elem,type,extra):jQuery.style(elem,type,value,extra)},type,chainable?margin:undefined,chainable,null)}})}),jQuery.fn.size=function(){return this.length},jQuery.fn.andSelf=jQuery.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=jQuery:"function"==typeof define&&define.amd&&define("jquery",[],function(){return jQuery}),"object"==typeof window&&"object"==typeof window.document&&(window.jQuery=window.$=jQuery)}(window),define("jquery",{}),function($,undefined){function focusable(element,isTabIndexNotNaN){var map,mapName,img,nodeName=element.nodeName.toLowerCase();return"area"===nodeName?(map=element.parentNode,mapName=map.name,element.href&&mapName&&"map"===map.nodeName.toLowerCase()?(img=$("img[usemap=#"+mapName+"]")[0],!!img&&visible(img)):!1):(/input|select|textarea|button|object/.test(nodeName)?!element.disabled:"a"===nodeName?element.href||isTabIndexNotNaN:isTabIndexNotNaN)&&visible(element)}function visible(element){return $.expr.filters.visible(element)&&!$(element).parents().addBack().filter(function(){return"hidden"===$.css(this,"visibility")}).length}var uuid=0,runiqueId=/^ui-id-\d+$/;$.ui=$.ui||{},$.extend($.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),$.fn.extend({focus:function(orig){return function(delay,fn){return"number"==typeof delay?this.each(function(){var elem=this;setTimeout(function(){$(elem).focus(),fn&&fn.call(elem)},delay)}):orig.apply(this,arguments)}}($.fn.focus),scrollParent:function(){var scrollParent;return scrollParent=$.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test($.css(this,"position"))&&/(auto|scroll)/.test($.css(this,"overflow")+$.css(this,"overflow-y")+$.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test($.css(this,"overflow")+$.css(this,"overflow-y")+$.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!scrollParent.length?$(document):scrollParent},zIndex:function(zIndex){if(zIndex!==undefined)return this.css("zIndex",zIndex);if(this.length)for(var position,value,elem=$(this[0]);elem.length&&elem[0]!==document;){if(position=elem.css("position"),("absolute"===position||"relative"===position||"fixed"===position)&&(value=parseInt(elem.css("zIndex"),10),!isNaN(value)&&0!==value))return value;elem=elem.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++uuid)})},removeUniqueId:function(){return this.each(function(){runiqueId.test(this.id)&&$(this).removeAttr("id")})}}),$.extend($.expr[":"],{data:$.expr.createPseudo?$.expr.createPseudo(function(dataName){return function(elem){return!!$.data(elem,dataName)}}):function(elem,i,match){return!!$.data(elem,match[3])},focusable:function(element){return focusable(element,!isNaN($.attr(element,"tabindex")))},tabbable:function(element){var tabIndex=$.attr(element,"tabindex"),isTabIndexNaN=isNaN(tabIndex);return(isTabIndexNaN||tabIndex>=0)&&focusable(element,!isTabIndexNaN)}}),$("<a>").outerWidth(1).jquery||$.each(["Width","Height"],function(i,name){function reduce(elem,size,border,margin){return $.each(side,function(){size-=parseFloat($.css(elem,"padding"+this))||0,border&&(size-=parseFloat($.css(elem,"border"+this+"Width"))||0),margin&&(size-=parseFloat($.css(elem,"margin"+this))||0)
}),size}var side="Width"===name?["Left","Right"]:["Top","Bottom"],type=name.toLowerCase(),orig={innerWidth:$.fn.innerWidth,innerHeight:$.fn.innerHeight,outerWidth:$.fn.outerWidth,outerHeight:$.fn.outerHeight};$.fn["inner"+name]=function(size){return size===undefined?orig["inner"+name].call(this):this.each(function(){$(this).css(type,reduce(this,size)+"px")})},$.fn["outer"+name]=function(size,margin){return"number"!=typeof size?orig["outer"+name].call(this,size):this.each(function(){$(this).css(type,reduce(this,size,!0,margin)+"px")})}}),$.fn.addBack||($.fn.addBack=function(selector){return this.add(null==selector?this.prevObject:this.prevObject.filter(selector))}),$("<a>").data("a-b","a").removeData("a-b").data("a-b")&&($.fn.removeData=function(removeData){return function(key){return arguments.length?removeData.call(this,$.camelCase(key)):removeData.call(this)}}($.fn.removeData)),$.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),$.support.selectstart="onselectstart"in document.createElement("div"),$.fn.extend({disableSelection:function(){return this.bind(($.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(event){event.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),$.extend($.ui,{plugin:{add:function(module,option,set){var i,proto=$.ui[module].prototype;for(i in set)proto.plugins[i]=proto.plugins[i]||[],proto.plugins[i].push([option,set[i]])},call:function(instance,name,args){var i,set=instance.plugins[name];if(set&&instance.element[0].parentNode&&11!==instance.element[0].parentNode.nodeType)for(i=0;i<set.length;i++)instance.options[set[i][0]]&&set[i][1].apply(instance.element,args)}},hasScroll:function(el,a){if("hidden"===$(el).css("overflow"))return!1;var scroll=a&&"left"===a?"scrollLeft":"scrollTop",has=!1;return el[scroll]>0?!0:(el[scroll]=1,has=el[scroll]>0,el[scroll]=0,has)}})}(jQuery),function($,undefined){var uuid=0,slice=Array.prototype.slice,_cleanData=$.cleanData;$.cleanData=function(elems){for(var elem,i=0;null!=(elem=elems[i]);i++)try{$(elem).triggerHandler("remove")}catch(e){}_cleanData(elems)},$.widget=function(name,base,prototype){var fullName,existingConstructor,constructor,basePrototype,proxiedPrototype={},namespace=name.split(".")[0];name=name.split(".")[1],fullName=namespace+"-"+name,prototype||(prototype=base,base=$.Widget),$.expr[":"][fullName.toLowerCase()]=function(elem){return!!$.data(elem,fullName)},$[namespace]=$[namespace]||{},existingConstructor=$[namespace][name],constructor=$[namespace][name]=function(options,element){return this._createWidget?void(arguments.length&&this._createWidget(options,element)):new constructor(options,element)},$.extend(constructor,existingConstructor,{version:prototype.version,_proto:$.extend({},prototype),_childConstructors:[]}),basePrototype=new base,basePrototype.options=$.widget.extend({},basePrototype.options),$.each(prototype,function(prop,value){return $.isFunction(value)?void(proxiedPrototype[prop]=function(){var _super=function(){return base.prototype[prop].apply(this,arguments)},_superApply=function(args){return base.prototype[prop].apply(this,args)};return function(){var returnValue,__super=this._super,__superApply=this._superApply;return this._super=_super,this._superApply=_superApply,returnValue=value.apply(this,arguments),this._super=__super,this._superApply=__superApply,returnValue}}()):void(proxiedPrototype[prop]=value)}),constructor.prototype=$.widget.extend(basePrototype,{widgetEventPrefix:existingConstructor?basePrototype.widgetEventPrefix:name},proxiedPrototype,{constructor:constructor,namespace:namespace,widgetName:name,widgetFullName:fullName}),existingConstructor?($.each(existingConstructor._childConstructors,function(i,child){var childPrototype=child.prototype;$.widget(childPrototype.namespace+"."+childPrototype.widgetName,constructor,child._proto)}),delete existingConstructor._childConstructors):base._childConstructors.push(constructor),$.widget.bridge(name,constructor)},$.widget.extend=function(target){for(var key,value,input=slice.call(arguments,1),inputIndex=0,inputLength=input.length;inputLength>inputIndex;inputIndex++)for(key in input[inputIndex])value=input[inputIndex][key],input[inputIndex].hasOwnProperty(key)&&value!==undefined&&(target[key]=$.isPlainObject(value)?$.isPlainObject(target[key])?$.widget.extend({},target[key],value):$.widget.extend({},value):value);return target},$.widget.bridge=function(name,object){var fullName=object.prototype.widgetFullName||name;$.fn[name]=function(options){var isMethodCall="string"==typeof options,args=slice.call(arguments,1),returnValue=this;return options=!isMethodCall&&args.length?$.widget.extend.apply(null,[options].concat(args)):options,this.each(isMethodCall?function(){var methodValue,instance=$.data(this,fullName);return instance?$.isFunction(instance[options])&&"_"!==options.charAt(0)?(methodValue=instance[options].apply(instance,args),methodValue!==instance&&methodValue!==undefined?(returnValue=methodValue&&methodValue.jquery?returnValue.pushStack(methodValue.get()):methodValue,!1):void 0):$.error("no such method '"+options+"' for "+name+" widget instance"):$.error("cannot call methods on "+name+" prior to initialization; attempted to call method '"+options+"'")}:function(){var instance=$.data(this,fullName);instance?instance.option(options||{})._init():$.data(this,fullName,new object(options,this))}),returnValue}},$.Widget=function(){},$.Widget._childConstructors=[],$.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(options,element){element=$(element||this.defaultElement||this)[0],this.element=$(element),this.uuid=uuid++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=$.widget.extend({},this.options,this._getCreateOptions(),options),this.bindings=$(),this.hoverable=$(),this.focusable=$(),element!==this&&($.data(element,this.widgetFullName,this),this._on(!0,this.element,{remove:function(event){event.target===element&&this.destroy()}}),this.document=$(element.style?element.ownerDocument:element.document||element),this.window=$(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:$.noop,_getCreateEventData:$.noop,_create:$.noop,_init:$.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData($.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:$.noop,widget:function(){return this.element},option:function(key,value){var parts,curOption,i,options=key;if(0===arguments.length)return $.widget.extend({},this.options);if("string"==typeof key)if(options={},parts=key.split("."),key=parts.shift(),parts.length){for(curOption=options[key]=$.widget.extend({},this.options[key]),i=0;i<parts.length-1;i++)curOption[parts[i]]=curOption[parts[i]]||{},curOption=curOption[parts[i]];if(key=parts.pop(),value===undefined)return curOption[key]===undefined?null:curOption[key];curOption[key]=value}else{if(value===undefined)return this.options[key]===undefined?null:this.options[key];options[key]=value}return this._setOptions(options),this},_setOptions:function(options){var key;for(key in options)this._setOption(key,options[key]);return this},_setOption:function(key,value){return this.options[key]=value,"disabled"===key&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!value).attr("aria-disabled",value),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(suppressDisabledCheck,element,handlers){var delegateElement,instance=this;"boolean"!=typeof suppressDisabledCheck&&(handlers=element,element=suppressDisabledCheck,suppressDisabledCheck=!1),handlers?(element=delegateElement=$(element),this.bindings=this.bindings.add(element)):(handlers=element,element=this.element,delegateElement=this.widget()),$.each(handlers,function(event,handler){function handlerProxy(){return suppressDisabledCheck||instance.options.disabled!==!0&&!$(this).hasClass("ui-state-disabled")?("string"==typeof handler?instance[handler]:handler).apply(instance,arguments):void 0}"string"!=typeof handler&&(handlerProxy.guid=handler.guid=handler.guid||handlerProxy.guid||$.guid++);var match=event.match(/^(\w+)\s*(.*)$/),eventName=match[1]+instance.eventNamespace,selector=match[2];selector?delegateElement.delegate(selector,eventName,handlerProxy):element.bind(eventName,handlerProxy)})},_off:function(element,eventName){eventName=(eventName||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,element.unbind(eventName).undelegate(eventName)},_delay:function(handler,delay){function handlerProxy(){return("string"==typeof handler?instance[handler]:handler).apply(instance,arguments)}var instance=this;return setTimeout(handlerProxy,delay||0)},_hoverable:function(element){this.hoverable=this.hoverable.add(element),this._on(element,{mouseenter:function(event){$(event.currentTarget).addClass("ui-state-hover")},mouseleave:function(event){$(event.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(element){this.focusable=this.focusable.add(element),this._on(element,{focusin:function(event){$(event.currentTarget).addClass("ui-state-focus")},focusout:function(event){$(event.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(type,event,data){var prop,orig,callback=this.options[type];if(data=data||{},event=$.Event(event),event.type=(type===this.widgetEventPrefix?type:this.widgetEventPrefix+type).toLowerCase(),event.target=this.element[0],orig=event.originalEvent)for(prop in orig)prop in event||(event[prop]=orig[prop]);return this.element.trigger(event,data),!($.isFunction(callback)&&callback.apply(this.element[0],[event].concat(data))===!1||event.isDefaultPrevented())}},$.each({show:"fadeIn",hide:"fadeOut"},function(method,defaultEffect){$.Widget.prototype["_"+method]=function(element,options,callback){"string"==typeof options&&(options={effect:options});var hasOptions,effectName=options?options===!0||"number"==typeof options?defaultEffect:options.effect||defaultEffect:method;options=options||{},"number"==typeof options&&(options={duration:options}),hasOptions=!$.isEmptyObject(options),options.complete=callback,options.delay&&element.delay(options.delay),hasOptions&&$.effects&&$.effects.effect[effectName]?element[method](options):effectName!==method&&element[effectName]?element[effectName](options.duration,options.easing,callback):element.queue(function(next){$(this)[method](),callback&&callback.call(element[0]),next()})}})}(jQuery),function($){var mouseHandled=!1;$(document).mouseup(function(){mouseHandled=!1}),$.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var that=this;this.element.bind("mousedown."+this.widgetName,function(event){return that._mouseDown(event)}).bind("click."+this.widgetName,function(event){return!0===$.data(event.target,that.widgetName+".preventClickEvent")?($.removeData(event.target,that.widgetName+".preventClickEvent"),event.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&$(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(event){if(!mouseHandled){this._mouseStarted&&this._mouseUp(event),this._mouseDownEvent=event;var that=this,btnIsLeft=1===event.which,elIsCancel="string"==typeof this.options.cancel&&event.target.nodeName?$(event.target).closest(this.options.cancel).length:!1;return btnIsLeft&&!elIsCancel&&this._mouseCapture(event)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){that.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(event)&&this._mouseDelayMet(event)&&(this._mouseStarted=this._mouseStart(event)!==!1,!this._mouseStarted)?(event.preventDefault(),!0):(!0===$.data(event.target,this.widgetName+".preventClickEvent")&&$.removeData(event.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(event){return that._mouseMove(event)},this._mouseUpDelegate=function(event){return that._mouseUp(event)},$(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),event.preventDefault(),mouseHandled=!0,!0)):!0}},_mouseMove:function(event){return $.ui.ie&&(!document.documentMode||document.documentMode<9)&&!event.button?this._mouseUp(event):this._mouseStarted?(this._mouseDrag(event),event.preventDefault()):(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,event)!==!1,this._mouseStarted?this._mouseDrag(event):this._mouseUp(event)),!this._mouseStarted)},_mouseUp:function(event){return $(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,event.target===this._mouseDownEvent.target&&$.data(event.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(event)),!1},_mouseDistanceMet:function(event){return Math.max(Math.abs(this._mouseDownEvent.pageX-event.pageX),Math.abs(this._mouseDownEvent.pageY-event.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function($){$.widget("ui.draggable",$.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(event){var o=this.options;return this.helper||o.disabled||$(event.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(event),this.handle?($(o.iframeFix===!0?"iframe":o.iframeFix).each(function(){$("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css($(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(event){var o=this.options;return this.helper=this._createHelper(event),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),$.ui.ddmanager&&($.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,$.extend(this.offset,{click:{left:event.pageX-this.offset.left,top:event.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(event),this.originalPageX=event.pageX,this.originalPageY=event.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this._setContainment(),this._trigger("start",event)===!1?(this._clear(),!1):(this._cacheHelperProportions(),$.ui.ddmanager&&!o.dropBehaviour&&$.ui.ddmanager.prepareOffsets(this,event),this._mouseDrag(event,!0),$.ui.ddmanager&&$.ui.ddmanager.dragStart(this,event),!0)},_mouseDrag:function(event,noPropagation){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(event),this.positionAbs=this._convertPositionTo("absolute"),!noPropagation){var ui=this._uiHash();if(this._trigger("drag",event,ui)===!1)return this._mouseUp({}),!1;this.position=ui.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),$.ui.ddmanager&&$.ui.ddmanager.drag(this,event),!1},_mouseStop:function(event){var that=this,dropped=!1;return $.ui.ddmanager&&!this.options.dropBehaviour&&(dropped=$.ui.ddmanager.drop(this,event)),this.dropped&&(dropped=this.dropped,this.dropped=!1),"original"!==this.options.helper||$.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!dropped||"valid"===this.options.revert&&dropped||this.options.revert===!0||$.isFunction(this.options.revert)&&this.options.revert.call(this.element,dropped)?$(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){that._trigger("stop",event)!==!1&&that._clear()}):this._trigger("stop",event)!==!1&&this._clear(),!1):!1},_mouseUp:function(event){return $("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),$.ui.ddmanager&&$.ui.ddmanager.dragStop(this,event),$.ui.mouse.prototype._mouseUp.call(this,event)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(event){return this.options.handle?!!$(event.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(event){var o=this.options,helper=$.isFunction(o.helper)?$(o.helper.apply(this.element[0],[event])):"clone"===o.helper?this.element.clone().removeAttr("id"):this.element;return helper.parents("body").length||helper.appendTo("parent"===o.appendTo?this.element[0].parentNode:o.appendTo),helper[0]===this.element[0]||/(fixed|absolute)/.test(helper.css("position"))||helper.css("position","absolute"),helper},_adjustOffsetFromHelper:function(obj){"string"==typeof obj&&(obj=obj.split(" ")),$.isArray(obj)&&(obj={left:+obj[0],top:+obj[1]||0}),"left"in obj&&(this.offset.click.left=obj.left+this.margins.left),"right"in obj&&(this.offset.click.left=this.helperProportions.width-obj.right+this.margins.left),"top"in obj&&(this.offset.click.top=obj.top+this.margins.top),"bottom"in obj&&(this.offset.click.top=this.helperProportions.height-obj.bottom+this.margins.top)},_getParentOffset:function(){var po=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0])&&(po.left+=this.scrollParent.scrollLeft(),po.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&$.ui.ie)&&(po={top:0,left:0}),{top:po.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:po.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var p=this.element.position();return{top:p.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:p.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var over,c,ce,o=this.options;return o.containment?"window"===o.containment?void(this.containment=[$(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,$(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,$(window).scrollLeft()+$(window).width()-this.helperProportions.width-this.margins.left,$(window).scrollTop()+($(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===o.containment?void(this.containment=[0,0,$(document).width()-this.helperProportions.width-this.margins.left,($(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):o.containment.constructor===Array?void(this.containment=o.containment):("parent"===o.containment&&(o.containment=this.helper[0].parentNode),c=$(o.containment),ce=c[0],void(ce&&(over="hidden"!==c.css("overflow"),this.containment=[(parseInt(c.css("borderLeftWidth"),10)||0)+(parseInt(c.css("paddingLeft"),10)||0),(parseInt(c.css("borderTopWidth"),10)||0)+(parseInt(c.css("paddingTop"),10)||0),(over?Math.max(ce.scrollWidth,ce.offsetWidth):ce.offsetWidth)-(parseInt(c.css("borderRightWidth"),10)||0)-(parseInt(c.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(over?Math.max(ce.scrollHeight,ce.offsetHeight):ce.offsetHeight)-(parseInt(c.css("borderBottomWidth"),10)||0)-(parseInt(c.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=c))):void(this.containment=null)},_convertPositionTo:function(d,pos){pos||(pos=this.position);var mod="absolute"===d?1:-1,scroll="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:scroll.scrollTop(),left:scroll.scrollLeft()}),{top:pos.top+this.offset.relative.top*mod+this.offset.parent.top*mod-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*mod,left:pos.left+this.offset.relative.left*mod+this.offset.parent.left*mod-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*mod}},_generatePosition:function(event){var containment,co,top,left,o=this.options,scroll="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,pageX=event.pageX,pageY=event.pageY;return this.offset.scroll||(this.offset.scroll={top:scroll.scrollTop(),left:scroll.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(co=this.relative_container.offset(),containment=[this.containment[0]+co.left,this.containment[1]+co.top,this.containment[2]+co.left,this.containment[3]+co.top]):containment=this.containment,event.pageX-this.offset.click.left<containment[0]&&(pageX=containment[0]+this.offset.click.left),event.pageY-this.offset.click.top<containment[1]&&(pageY=containment[1]+this.offset.click.top),event.pageX-this.offset.click.left>containment[2]&&(pageX=containment[2]+this.offset.click.left),event.pageY-this.offset.click.top>containment[3]&&(pageY=containment[3]+this.offset.click.top)),o.grid&&(top=o.grid[1]?this.originalPageY+Math.round((pageY-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,pageY=containment?top-this.offset.click.top>=containment[1]||top-this.offset.click.top>containment[3]?top:top-this.offset.click.top>=containment[1]?top-o.grid[1]:top+o.grid[1]:top,left=o.grid[0]?this.originalPageX+Math.round((pageX-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,pageX=containment?left-this.offset.click.left>=containment[0]||left-this.offset.click.left>containment[2]?left:left-this.offset.click.left>=containment[0]?left-o.grid[0]:left+o.grid[0]:left)),{top:pageY-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:pageX-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(type,event,ui){return ui=ui||this._uiHash(),$.ui.plugin.call(this,type,[event,ui]),"drag"===type&&(this.positionAbs=this._convertPositionTo("absolute")),$.Widget.prototype._trigger.call(this,type,event,ui)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),$.ui.plugin.add("draggable","connectToSortable",{start:function(event,ui){var inst=$(this).data("ui-draggable"),o=inst.options,uiSortable=$.extend({},ui,{item:inst.element});inst.sortables=[],$(o.connectToSortable).each(function(){var sortable=$.data(this,"ui-sortable");sortable&&!sortable.options.disabled&&(inst.sortables.push({instance:sortable,shouldRevert:sortable.options.revert}),sortable.refreshPositions(),sortable._trigger("activate",event,uiSortable))})},stop:function(event,ui){var inst=$(this).data("ui-draggable"),uiSortable=$.extend({},ui,{item:inst.element});$.each(inst.sortables,function(){this.instance.isOver?(this.instance.isOver=0,inst.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(event),this.instance.options.helper=this.instance.options._helper,"original"===inst.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",event,uiSortable))})},drag:function(event,ui){var inst=$(this).data("ui-draggable"),that=this;$.each(inst.sortables,function(){var innermostIntersecting=!1,thisSortable=this;this.instance.positionAbs=inst.positionAbs,this.instance.helperProportions=inst.helperProportions,this.instance.offset.click=inst.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(innermostIntersecting=!0,$.each(inst.sortables,function(){return this.instance.positionAbs=inst.positionAbs,this.instance.helperProportions=inst.helperProportions,this.instance.offset.click=inst.offset.click,this!==thisSortable&&this.instance._intersectsWith(this.instance.containerCache)&&$.contains(thisSortable.instance.element[0],this.instance.element[0])&&(innermostIntersecting=!1),innermostIntersecting})),innermostIntersecting?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=$(that).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return ui.helper[0]},event.target=this.instance.currentItem[0],this.instance._mouseCapture(event,!0),this.instance._mouseStart(event,!0,!0),this.instance.offset.click.top=inst.offset.click.top,this.instance.offset.click.left=inst.offset.click.left,this.instance.offset.parent.left-=inst.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=inst.offset.parent.top-this.instance.offset.parent.top,inst._trigger("toSortable",event),inst.dropped=this.instance.element,inst.currentItem=inst.element,this.instance.fromOutside=inst),this.instance.currentItem&&this.instance._mouseDrag(event)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",event,this.instance._uiHash(this.instance)),this.instance._mouseStop(event,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),inst._trigger("fromSortable",event),inst.dropped=!1)})}}),$.ui.plugin.add("draggable","cursor",{start:function(){var t=$("body"),o=$(this).data("ui-draggable").options;t.css("cursor")&&(o._cursor=t.css("cursor")),t.css("cursor",o.cursor)},stop:function(){var o=$(this).data("ui-draggable").options;o._cursor&&$("body").css("cursor",o._cursor)}}),$.ui.plugin.add("draggable","opacity",{start:function(event,ui){var t=$(ui.helper),o=$(this).data("ui-draggable").options;t.css("opacity")&&(o._opacity=t.css("opacity")),t.css("opacity",o.opacity)},stop:function(event,ui){var o=$(this).data("ui-draggable").options;o._opacity&&$(ui.helper).css("opacity",o._opacity)}}),$.ui.plugin.add("draggable","scroll",{start:function(){var i=$(this).data("ui-draggable");i.scrollParent[0]!==document&&"HTML"!==i.scrollParent[0].tagName&&(i.overflowOffset=i.scrollParent.offset())},drag:function(event){var i=$(this).data("ui-draggable"),o=i.options,scrolled=!1;i.scrollParent[0]!==document&&"HTML"!==i.scrollParent[0].tagName?(o.axis&&"x"===o.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-event.pageY<o.scrollSensitivity?i.scrollParent[0].scrollTop=scrolled=i.scrollParent[0].scrollTop+o.scrollSpeed:event.pageY-i.overflowOffset.top<o.scrollSensitivity&&(i.scrollParent[0].scrollTop=scrolled=i.scrollParent[0].scrollTop-o.scrollSpeed)),o.axis&&"y"===o.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-event.pageX<o.scrollSensitivity?i.scrollParent[0].scrollLeft=scrolled=i.scrollParent[0].scrollLeft+o.scrollSpeed:event.pageX-i.overflowOffset.left<o.scrollSensitivity&&(i.scrollParent[0].scrollLeft=scrolled=i.scrollParent[0].scrollLeft-o.scrollSpeed))):(o.axis&&"x"===o.axis||(event.pageY-$(document).scrollTop()<o.scrollSensitivity?scrolled=$(document).scrollTop($(document).scrollTop()-o.scrollSpeed):$(window).height()-(event.pageY-$(document).scrollTop())<o.scrollSensitivity&&(scrolled=$(document).scrollTop($(document).scrollTop()+o.scrollSpeed))),o.axis&&"y"===o.axis||(event.pageX-$(document).scrollLeft()<o.scrollSensitivity?scrolled=$(document).scrollLeft($(document).scrollLeft()-o.scrollSpeed):$(window).width()-(event.pageX-$(document).scrollLeft())<o.scrollSensitivity&&(scrolled=$(document).scrollLeft($(document).scrollLeft()+o.scrollSpeed)))),scrolled!==!1&&$.ui.ddmanager&&!o.dropBehaviour&&$.ui.ddmanager.prepareOffsets(i,event)}}),$.ui.plugin.add("draggable","snap",{start:function(){var i=$(this).data("ui-draggable"),o=i.options;i.snapElements=[],$(o.snap.constructor!==String?o.snap.items||":data(ui-draggable)":o.snap).each(function(){var $t=$(this),$o=$t.offset();this!==i.element[0]&&i.snapElements.push({item:this,width:$t.outerWidth(),height:$t.outerHeight(),top:$o.top,left:$o.left})})},drag:function(event,ui){var ts,bs,ls,rs,l,r,t,b,i,first,inst=$(this).data("ui-draggable"),o=inst.options,d=o.snapTolerance,x1=ui.offset.left,x2=x1+inst.helperProportions.width,y1=ui.offset.top,y2=y1+inst.helperProportions.height;for(i=inst.snapElements.length-1;i>=0;i--)l=inst.snapElements[i].left,r=l+inst.snapElements[i].width,t=inst.snapElements[i].top,b=t+inst.snapElements[i].height,l-d>x2||x1>r+d||t-d>y2||y1>b+d||!$.contains(inst.snapElements[i].item.ownerDocument,inst.snapElements[i].item)?(inst.snapElements[i].snapping&&inst.options.snap.release&&inst.options.snap.release.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item})),inst.snapElements[i].snapping=!1):("inner"!==o.snapMode&&(ts=Math.abs(t-y2)<=d,bs=Math.abs(b-y1)<=d,ls=Math.abs(l-x2)<=d,rs=Math.abs(r-x1)<=d,ts&&(ui.position.top=inst._convertPositionTo("relative",{top:t-inst.helperProportions.height,left:0}).top-inst.margins.top),bs&&(ui.position.top=inst._convertPositionTo("relative",{top:b,left:0}).top-inst.margins.top),ls&&(ui.position.left=inst._convertPositionTo("relative",{top:0,left:l-inst.helperProportions.width}).left-inst.margins.left),rs&&(ui.position.left=inst._convertPositionTo("relative",{top:0,left:r}).left-inst.margins.left)),first=ts||bs||ls||rs,"outer"!==o.snapMode&&(ts=Math.abs(t-y1)<=d,bs=Math.abs(b-y2)<=d,ls=Math.abs(l-x1)<=d,rs=Math.abs(r-x2)<=d,ts&&(ui.position.top=inst._convertPositionTo("relative",{top:t,left:0}).top-inst.margins.top),bs&&(ui.position.top=inst._convertPositionTo("relative",{top:b-inst.helperProportions.height,left:0}).top-inst.margins.top),ls&&(ui.position.left=inst._convertPositionTo("relative",{top:0,left:l}).left-inst.margins.left),rs&&(ui.position.left=inst._convertPositionTo("relative",{top:0,left:r-inst.helperProportions.width}).left-inst.margins.left)),!inst.snapElements[i].snapping&&(ts||bs||ls||rs||first)&&inst.options.snap.snap&&inst.options.snap.snap.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item})),inst.snapElements[i].snapping=ts||bs||ls||rs||first)
}}),$.ui.plugin.add("draggable","stack",{start:function(){var min,o=this.data("ui-draggable").options,group=$.makeArray($(o.stack)).sort(function(a,b){return(parseInt($(a).css("zIndex"),10)||0)-(parseInt($(b).css("zIndex"),10)||0)});group.length&&(min=parseInt($(group[0]).css("zIndex"),10)||0,$(group).each(function(i){$(this).css("zIndex",min+i)}),this.css("zIndex",min+group.length))}}),$.ui.plugin.add("draggable","zIndex",{start:function(event,ui){var t=$(ui.helper),o=$(this).data("ui-draggable").options;t.css("zIndex")&&(o._zIndex=t.css("zIndex")),t.css("zIndex",o.zIndex)},stop:function(event,ui){var o=$(this).data("ui-draggable").options;o._zIndex&&$(ui.helper).css("zIndex",o._zIndex)}})}(jQuery),function($){function isOverAxis(x,reference,size){return x>reference&&reference+size>x}$.widget("ui.droppable",{version:"1.10.3",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var o=this.options,accept=o.accept;this.isover=!1,this.isout=!0,this.accept=$.isFunction(accept)?accept:function(d){return d.is(accept)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},$.ui.ddmanager.droppables[o.scope]=$.ui.ddmanager.droppables[o.scope]||[],$.ui.ddmanager.droppables[o.scope].push(this),o.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var i=0,drop=$.ui.ddmanager.droppables[this.options.scope];i<drop.length;i++)drop[i]===this&&drop.splice(i,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(key,value){"accept"===key&&(this.accept=$.isFunction(value)?value:function(d){return d.is(value)}),$.Widget.prototype._setOption.apply(this,arguments)},_activate:function(event){var draggable=$.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),draggable&&this._trigger("activate",event,this.ui(draggable))},_deactivate:function(event){var draggable=$.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),draggable&&this._trigger("deactivate",event,this.ui(draggable))},_over:function(event){var draggable=$.ui.ddmanager.current;draggable&&(draggable.currentItem||draggable.element)[0]!==this.element[0]&&this.accept.call(this.element[0],draggable.currentItem||draggable.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",event,this.ui(draggable)))},_out:function(event){var draggable=$.ui.ddmanager.current;draggable&&(draggable.currentItem||draggable.element)[0]!==this.element[0]&&this.accept.call(this.element[0],draggable.currentItem||draggable.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",event,this.ui(draggable)))},_drop:function(event,custom){var draggable=custom||$.ui.ddmanager.current,childrenIntersection=!1;return draggable&&(draggable.currentItem||draggable.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var inst=$.data(this,"ui-droppable");return inst.options.greedy&&!inst.options.disabled&&inst.options.scope===draggable.options.scope&&inst.accept.call(inst.element[0],draggable.currentItem||draggable.element)&&$.ui.intersect(draggable,$.extend(inst,{offset:inst.element.offset()}),inst.options.tolerance)?(childrenIntersection=!0,!1):void 0}),childrenIntersection?!1:this.accept.call(this.element[0],draggable.currentItem||draggable.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",event,this.ui(draggable)),this.element):!1):!1},ui:function(c){return{draggable:c.currentItem||c.element,helper:c.helper,position:c.position,offset:c.positionAbs}}}),$.ui.intersect=function(draggable,droppable,toleranceMode){if(!droppable.offset)return!1;var draggableLeft,draggableTop,x1=(draggable.positionAbs||draggable.position.absolute).left,x2=x1+draggable.helperProportions.width,y1=(draggable.positionAbs||draggable.position.absolute).top,y2=y1+draggable.helperProportions.height,l=droppable.offset.left,r=l+droppable.proportions.width,t=droppable.offset.top,b=t+droppable.proportions.height;switch(toleranceMode){case"fit":return x1>=l&&r>=x2&&y1>=t&&b>=y2;case"intersect":return l<x1+draggable.helperProportions.width/2&&x2-draggable.helperProportions.width/2<r&&t<y1+draggable.helperProportions.height/2&&y2-draggable.helperProportions.height/2<b;case"pointer":return draggableLeft=(draggable.positionAbs||draggable.position.absolute).left+(draggable.clickOffset||draggable.offset.click).left,draggableTop=(draggable.positionAbs||draggable.position.absolute).top+(draggable.clickOffset||draggable.offset.click).top,isOverAxis(draggableTop,t,droppable.proportions.height)&&isOverAxis(draggableLeft,l,droppable.proportions.width);case"touch":return(y1>=t&&b>=y1||y2>=t&&b>=y2||t>y1&&y2>b)&&(x1>=l&&r>=x1||x2>=l&&r>=x2||l>x1&&x2>r);default:return!1}},$.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,event){var i,j,m=$.ui.ddmanager.droppables[t.options.scope]||[],type=event?event.type:null,list=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();droppablesLoop:for(i=0;i<m.length;i++)if(!(m[i].options.disabled||t&&!m[i].accept.call(m[i].element[0],t.currentItem||t.element))){for(j=0;j<list.length;j++)if(list[j]===m[i].element[0]){m[i].proportions.height=0;continue droppablesLoop}m[i].visible="none"!==m[i].element.css("display"),m[i].visible&&("mousedown"===type&&m[i]._activate.call(m[i],event),m[i].offset=m[i].element.offset(),m[i].proportions={width:m[i].element[0].offsetWidth,height:m[i].element[0].offsetHeight})}},drop:function(draggable,event){var dropped=!1;return $.each(($.ui.ddmanager.droppables[draggable.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&$.ui.intersect(draggable,this,this.options.tolerance)&&(dropped=this._drop.call(this,event)||dropped),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],draggable.currentItem||draggable.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,event)))}),dropped},dragStart:function(draggable,event){draggable.element.parentsUntil("body").bind("scroll.droppable",function(){draggable.options.refreshPositions||$.ui.ddmanager.prepareOffsets(draggable,event)})},drag:function(draggable,event){draggable.options.refreshPositions&&$.ui.ddmanager.prepareOffsets(draggable,event),$.each($.ui.ddmanager.droppables[draggable.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var parentInstance,scope,parent,intersects=$.ui.intersect(draggable,this,this.options.tolerance),c=!intersects&&this.isover?"isout":intersects&&!this.isover?"isover":null;c&&(this.options.greedy&&(scope=this.options.scope,parent=this.element.parents(":data(ui-droppable)").filter(function(){return $.data(this,"ui-droppable").options.scope===scope}),parent.length&&(parentInstance=$.data(parent[0],"ui-droppable"),parentInstance.greedyChild="isover"===c)),parentInstance&&"isover"===c&&(parentInstance.isover=!1,parentInstance.isout=!0,parentInstance._out.call(parentInstance,event)),this[c]=!0,this["isout"===c?"isover":"isout"]=!1,this["isover"===c?"_over":"_out"].call(this,event),parentInstance&&"isout"===c&&(parentInstance.isout=!1,parentInstance.isover=!0,parentInstance._over.call(parentInstance,event)))}})},dragStop:function(draggable,event){draggable.element.parentsUntil("body").unbind("scroll.droppable"),draggable.options.refreshPositions||$.ui.ddmanager.prepareOffsets(draggable,event)}}}(jQuery),function($){function num(v){return parseInt(v,10)||0}function isNumber(value){return!isNaN(parseInt(value,10))}$.widget("ui.resizable",$.ui.mouse,{version:"1.10.3",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var n,i,handle,axis,hname,that=this,o=this.options;if(this.element.addClass("ui-resizable"),$.extend(this,{_aspectRatio:!!o.aspectRatio,aspectRatio:o.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:o.helper||o.ghost||o.animate?o.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap($("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=o.handles||($(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),n=this.handles.split(","),this.handles={},i=0;i<n.length;i++)handle=$.trim(n[i]),hname="ui-resizable-"+handle,axis=$("<div class='ui-resizable-handle "+hname+"'></div>"),axis.css({zIndex:o.zIndex}),"se"===handle&&axis.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[handle]=".ui-resizable-"+handle,this.element.append(axis);this._renderAxis=function(target){var i,axis,padPos,padWrapper;target=target||this.element;for(i in this.handles)this.handles[i].constructor===String&&(this.handles[i]=$(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(axis=$(this.handles[i],this.element),padWrapper=/sw|ne|nw|se|n|s/.test(i)?axis.outerHeight():axis.outerWidth(),padPos=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),target.css(padPos,padWrapper),this._proportionallyResize()),$(this.handles[i]).length},this._renderAxis(this.element),this._handles=$(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){that.resizing||(this.className&&(axis=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),that.axis=axis&&axis[1]?axis[1]:"se")}),o.autoHide&&(this._handles.hide(),$(this.element).addClass("ui-resizable-autohide").mouseenter(function(){o.disabled||($(this).removeClass("ui-resizable-autohide"),that._handles.show())}).mouseleave(function(){o.disabled||that.resizing||($(this).addClass("ui-resizable-autohide"),that._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var wrapper,_destroy=function(exp){$(exp).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(_destroy(this.element),wrapper=this.element,this.originalElement.css({position:wrapper.css("position"),width:wrapper.outerWidth(),height:wrapper.outerHeight(),top:wrapper.css("top"),left:wrapper.css("left")}).insertAfter(wrapper),wrapper.remove()),this.originalElement.css("resize",this.originalResizeStyle),_destroy(this.originalElement),this},_mouseCapture:function(event){var i,handle,capture=!1;for(i in this.handles)handle=$(this.handles[i])[0],(handle===event.target||$.contains(handle,event.target))&&(capture=!0);return!this.options.disabled&&capture},_mouseStart:function(event){var curleft,curtop,cursor,o=this.options,iniPos=this.element.position(),el=this.element;return this.resizing=!0,/absolute/.test(el.css("position"))?el.css({position:"absolute",top:el.css("top"),left:el.css("left")}):el.is(".ui-draggable")&&el.css({position:"absolute",top:iniPos.top,left:iniPos.left}),this._renderProxy(),curleft=num(this.helper.css("left")),curtop=num(this.helper.css("top")),o.containment&&(curleft+=$(o.containment).scrollLeft()||0,curtop+=$(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:curleft,top:curtop},this.size=this._helper?{width:el.outerWidth(),height:el.outerHeight()}:{width:el.width(),height:el.height()},this.originalSize=this._helper?{width:el.outerWidth(),height:el.outerHeight()}:{width:el.width(),height:el.height()},this.originalPosition={left:curleft,top:curtop},this.sizeDiff={width:el.outerWidth()-el.width(),height:el.outerHeight()-el.height()},this.originalMousePosition={left:event.pageX,top:event.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,cursor=$(".ui-resizable-"+this.axis).css("cursor"),$("body").css("cursor","auto"===cursor?this.axis+"-resize":cursor),el.addClass("ui-resizable-resizing"),this._propagate("start",event),!0},_mouseDrag:function(event){var data,el=this.helper,props={},smp=this.originalMousePosition,a=this.axis,prevTop=this.position.top,prevLeft=this.position.left,prevWidth=this.size.width,prevHeight=this.size.height,dx=event.pageX-smp.left||0,dy=event.pageY-smp.top||0,trigger=this._change[a];return trigger?(data=trigger.apply(this,[event,dx,dy]),this._updateVirtualBoundaries(event.shiftKey),(this._aspectRatio||event.shiftKey)&&(data=this._updateRatio(data,event)),data=this._respectSize(data,event),this._updateCache(data),this._propagate("resize",event),this.position.top!==prevTop&&(props.top=this.position.top+"px"),this.position.left!==prevLeft&&(props.left=this.position.left+"px"),this.size.width!==prevWidth&&(props.width=this.size.width+"px"),this.size.height!==prevHeight&&(props.height=this.size.height+"px"),el.css(props),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),$.isEmptyObject(props)||this._trigger("resize",event,this.ui()),!1):!1},_mouseStop:function(event){this.resizing=!1;var pr,ista,soffseth,soffsetw,s,left,top,o=this.options,that=this;return this._helper&&(pr=this._proportionallyResizeElements,ista=pr.length&&/textarea/i.test(pr[0].nodeName),soffseth=ista&&$.ui.hasScroll(pr[0],"left")?0:that.sizeDiff.height,soffsetw=ista?0:that.sizeDiff.width,s={width:that.helper.width()-soffsetw,height:that.helper.height()-soffseth},left=parseInt(that.element.css("left"),10)+(that.position.left-that.originalPosition.left)||null,top=parseInt(that.element.css("top"),10)+(that.position.top-that.originalPosition.top)||null,o.animate||this.element.css($.extend(s,{top:top,left:left})),that.helper.height(that.size.height),that.helper.width(that.size.width),this._helper&&!o.animate&&this._proportionallyResize()),$("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",event),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(forceAspectRatio){var pMinWidth,pMaxWidth,pMinHeight,pMaxHeight,b,o=this.options;b={minWidth:isNumber(o.minWidth)?o.minWidth:0,maxWidth:isNumber(o.maxWidth)?o.maxWidth:1/0,minHeight:isNumber(o.minHeight)?o.minHeight:0,maxHeight:isNumber(o.maxHeight)?o.maxHeight:1/0},(this._aspectRatio||forceAspectRatio)&&(pMinWidth=b.minHeight*this.aspectRatio,pMinHeight=b.minWidth/this.aspectRatio,pMaxWidth=b.maxHeight*this.aspectRatio,pMaxHeight=b.maxWidth/this.aspectRatio,pMinWidth>b.minWidth&&(b.minWidth=pMinWidth),pMinHeight>b.minHeight&&(b.minHeight=pMinHeight),pMaxWidth<b.maxWidth&&(b.maxWidth=pMaxWidth),pMaxHeight<b.maxHeight&&(b.maxHeight=pMaxHeight)),this._vBoundaries=b},_updateCache:function(data){this.offset=this.helper.offset(),isNumber(data.left)&&(this.position.left=data.left),isNumber(data.top)&&(this.position.top=data.top),isNumber(data.height)&&(this.size.height=data.height),isNumber(data.width)&&(this.size.width=data.width)},_updateRatio:function(data){var cpos=this.position,csize=this.size,a=this.axis;return isNumber(data.height)?data.width=data.height*this.aspectRatio:isNumber(data.width)&&(data.height=data.width/this.aspectRatio),"sw"===a&&(data.left=cpos.left+(csize.width-data.width),data.top=null),"nw"===a&&(data.top=cpos.top+(csize.height-data.height),data.left=cpos.left+(csize.width-data.width)),data},_respectSize:function(data){var o=this._vBoundaries,a=this.axis,ismaxw=isNumber(data.width)&&o.maxWidth&&o.maxWidth<data.width,ismaxh=isNumber(data.height)&&o.maxHeight&&o.maxHeight<data.height,isminw=isNumber(data.width)&&o.minWidth&&o.minWidth>data.width,isminh=isNumber(data.height)&&o.minHeight&&o.minHeight>data.height,dw=this.originalPosition.left+this.originalSize.width,dh=this.position.top+this.size.height,cw=/sw|nw|w/.test(a),ch=/nw|ne|n/.test(a);return isminw&&(data.width=o.minWidth),isminh&&(data.height=o.minHeight),ismaxw&&(data.width=o.maxWidth),ismaxh&&(data.height=o.maxHeight),isminw&&cw&&(data.left=dw-o.minWidth),ismaxw&&cw&&(data.left=dw-o.maxWidth),isminh&&ch&&(data.top=dh-o.minHeight),ismaxh&&ch&&(data.top=dh-o.maxHeight),data.width||data.height||data.left||!data.top?data.width||data.height||data.top||!data.left||(data.left=null):data.top=null,data},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var i,j,borders,paddings,prel,element=this.helper||this.element;for(i=0;i<this._proportionallyResizeElements.length;i++){if(prel=this._proportionallyResizeElements[i],!this.borderDif)for(this.borderDif=[],borders=[prel.css("borderTopWidth"),prel.css("borderRightWidth"),prel.css("borderBottomWidth"),prel.css("borderLeftWidth")],paddings=[prel.css("paddingTop"),prel.css("paddingRight"),prel.css("paddingBottom"),prel.css("paddingLeft")],j=0;j<borders.length;j++)this.borderDif[j]=(parseInt(borders[j],10)||0)+(parseInt(paddings[j],10)||0);prel.css({height:element.height()-this.borderDif[0]-this.borderDif[2]||0,width:element.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var el=this.element,o=this.options;this.elementOffset=el.offset(),this._helper?(this.helper=this.helper||$("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++o.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(event,dx){return{width:this.originalSize.width+dx}},w:function(event,dx){var cs=this.originalSize,sp=this.originalPosition;return{left:sp.left+dx,width:cs.width-dx}},n:function(event,dx,dy){var cs=this.originalSize,sp=this.originalPosition;return{top:sp.top+dy,height:cs.height-dy}},s:function(event,dx,dy){return{height:this.originalSize.height+dy}},se:function(event,dx,dy){return $.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[event,dx,dy]))},sw:function(event,dx,dy){return $.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[event,dx,dy]))},ne:function(event,dx,dy){return $.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[event,dx,dy]))},nw:function(event,dx,dy){return $.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[event,dx,dy]))}},_propagate:function(n,event){$.ui.plugin.call(this,n,[event,this.ui()]),"resize"!==n&&this._trigger(n,event,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),$.ui.plugin.add("resizable","animate",{stop:function(event){var that=$(this).data("ui-resizable"),o=that.options,pr=that._proportionallyResizeElements,ista=pr.length&&/textarea/i.test(pr[0].nodeName),soffseth=ista&&$.ui.hasScroll(pr[0],"left")?0:that.sizeDiff.height,soffsetw=ista?0:that.sizeDiff.width,style={width:that.size.width-soffsetw,height:that.size.height-soffseth},left=parseInt(that.element.css("left"),10)+(that.position.left-that.originalPosition.left)||null,top=parseInt(that.element.css("top"),10)+(that.position.top-that.originalPosition.top)||null;that.element.animate($.extend(style,top&&left?{top:top,left:left}:{}),{duration:o.animateDuration,easing:o.animateEasing,step:function(){var data={width:parseInt(that.element.css("width"),10),height:parseInt(that.element.css("height"),10),top:parseInt(that.element.css("top"),10),left:parseInt(that.element.css("left"),10)};pr&&pr.length&&$(pr[0]).css({width:data.width,height:data.height}),that._updateCache(data),that._propagate("resize",event)}})}}),$.ui.plugin.add("resizable","containment",{start:function(){var element,p,co,ch,cw,width,height,that=$(this).data("ui-resizable"),o=that.options,el=that.element,oc=o.containment,ce=oc instanceof $?oc.get(0):/parent/.test(oc)?el.parent().get(0):oc;ce&&(that.containerElement=$(ce),/document/.test(oc)||oc===document?(that.containerOffset={left:0,top:0},that.containerPosition={left:0,top:0},that.parentData={element:$(document),left:0,top:0,width:$(document).width(),height:$(document).height()||document.body.parentNode.scrollHeight}):(element=$(ce),p=[],$(["Top","Right","Left","Bottom"]).each(function(i,name){p[i]=num(element.css("padding"+name))}),that.containerOffset=element.offset(),that.containerPosition=element.position(),that.containerSize={height:element.innerHeight()-p[3],width:element.innerWidth()-p[1]},co=that.containerOffset,ch=that.containerSize.height,cw=that.containerSize.width,width=$.ui.hasScroll(ce,"left")?ce.scrollWidth:cw,height=$.ui.hasScroll(ce)?ce.scrollHeight:ch,that.parentData={element:ce,left:co.left,top:co.top,width:width,height:height}))},resize:function(event){var woset,hoset,isParent,isOffsetRelative,that=$(this).data("ui-resizable"),o=that.options,co=that.containerOffset,cp=that.position,pRatio=that._aspectRatio||event.shiftKey,cop={top:0,left:0},ce=that.containerElement;ce[0]!==document&&/static/.test(ce.css("position"))&&(cop=co),cp.left<(that._helper?co.left:0)&&(that.size.width=that.size.width+(that._helper?that.position.left-co.left:that.position.left-cop.left),pRatio&&(that.size.height=that.size.width/that.aspectRatio),that.position.left=o.helper?co.left:0),cp.top<(that._helper?co.top:0)&&(that.size.height=that.size.height+(that._helper?that.position.top-co.top:that.position.top),pRatio&&(that.size.width=that.size.height*that.aspectRatio),that.position.top=that._helper?co.top:0),that.offset.left=that.parentData.left+that.position.left,that.offset.top=that.parentData.top+that.position.top,woset=Math.abs((that._helper?that.offset.left-cop.left:that.offset.left-cop.left)+that.sizeDiff.width),hoset=Math.abs((that._helper?that.offset.top-cop.top:that.offset.top-co.top)+that.sizeDiff.height),isParent=that.containerElement.get(0)===that.element.parent().get(0),isOffsetRelative=/relative|absolute/.test(that.containerElement.css("position")),isParent&&isOffsetRelative&&(woset-=that.parentData.left),woset+that.size.width>=that.parentData.width&&(that.size.width=that.parentData.width-woset,pRatio&&(that.size.height=that.size.width/that.aspectRatio)),hoset+that.size.height>=that.parentData.height&&(that.size.height=that.parentData.height-hoset,pRatio&&(that.size.width=that.size.height*that.aspectRatio))},stop:function(){var that=$(this).data("ui-resizable"),o=that.options,co=that.containerOffset,cop=that.containerPosition,ce=that.containerElement,helper=$(that.helper),ho=helper.offset(),w=helper.outerWidth()-that.sizeDiff.width,h=helper.outerHeight()-that.sizeDiff.height;that._helper&&!o.animate&&/relative/.test(ce.css("position"))&&$(this).css({left:ho.left-cop.left-co.left,width:w,height:h}),that._helper&&!o.animate&&/static/.test(ce.css("position"))&&$(this).css({left:ho.left-cop.left-co.left,width:w,height:h})}}),$.ui.plugin.add("resizable","alsoResize",{start:function(){var that=$(this).data("ui-resizable"),o=that.options,_store=function(exp){$(exp).each(function(){var el=$(this);el.data("ui-resizable-alsoresize",{width:parseInt(el.width(),10),height:parseInt(el.height(),10),left:parseInt(el.css("left"),10),top:parseInt(el.css("top"),10)})})};"object"!=typeof o.alsoResize||o.alsoResize.parentNode?_store(o.alsoResize):o.alsoResize.length?(o.alsoResize=o.alsoResize[0],_store(o.alsoResize)):$.each(o.alsoResize,function(exp){_store(exp)})},resize:function(event,ui){var that=$(this).data("ui-resizable"),o=that.options,os=that.originalSize,op=that.originalPosition,delta={height:that.size.height-os.height||0,width:that.size.width-os.width||0,top:that.position.top-op.top||0,left:that.position.left-op.left||0},_alsoResize=function(exp,c){$(exp).each(function(){var el=$(this),start=$(this).data("ui-resizable-alsoresize"),style={},css=c&&c.length?c:el.parents(ui.originalElement[0]).length?["width","height"]:["width","height","top","left"];$.each(css,function(i,prop){var sum=(start[prop]||0)+(delta[prop]||0);sum&&sum>=0&&(style[prop]=sum||null)}),el.css(style)})};"object"!=typeof o.alsoResize||o.alsoResize.nodeType?_alsoResize(o.alsoResize):$.each(o.alsoResize,function(exp,c){_alsoResize(exp,c)})},stop:function(){$(this).removeData("resizable-alsoresize")}}),$.ui.plugin.add("resizable","ghost",{start:function(){var that=$(this).data("ui-resizable"),o=that.options,cs=that.size;that.ghost=that.originalElement.clone(),that.ghost.css({opacity:.25,display:"block",position:"relative",height:cs.height,width:cs.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof o.ghost?o.ghost:""),that.ghost.appendTo(that.helper)},resize:function(){var that=$(this).data("ui-resizable");that.ghost&&that.ghost.css({position:"relative",height:that.size.height,width:that.size.width})},stop:function(){var that=$(this).data("ui-resizable");that.ghost&&that.helper&&that.helper.get(0).removeChild(that.ghost.get(0))}}),$.ui.plugin.add("resizable","grid",{resize:function(){var that=$(this).data("ui-resizable"),o=that.options,cs=that.size,os=that.originalSize,op=that.originalPosition,a=that.axis,grid="number"==typeof o.grid?[o.grid,o.grid]:o.grid,gridX=grid[0]||1,gridY=grid[1]||1,ox=Math.round((cs.width-os.width)/gridX)*gridX,oy=Math.round((cs.height-os.height)/gridY)*gridY,newWidth=os.width+ox,newHeight=os.height+oy,isMaxWidth=o.maxWidth&&o.maxWidth<newWidth,isMaxHeight=o.maxHeight&&o.maxHeight<newHeight,isMinWidth=o.minWidth&&o.minWidth>newWidth,isMinHeight=o.minHeight&&o.minHeight>newHeight;o.grid=grid,isMinWidth&&(newWidth+=gridX),isMinHeight&&(newHeight+=gridY),isMaxWidth&&(newWidth-=gridX),isMaxHeight&&(newHeight-=gridY),/^(se|s|e)$/.test(a)?(that.size.width=newWidth,that.size.height=newHeight):/^(ne)$/.test(a)?(that.size.width=newWidth,that.size.height=newHeight,that.position.top=op.top-oy):/^(sw)$/.test(a)?(that.size.width=newWidth,that.size.height=newHeight,that.position.left=op.left-ox):(that.size.width=newWidth,that.size.height=newHeight,that.position.top=op.top-oy,that.position.left=op.left-ox)}})}(jQuery),function($){$.widget("ui.selectable",$.ui.mouse,{version:"1.10.3",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var selectees,that=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){selectees=$(that.options.filter,that.element[0]),selectees.addClass("ui-selectee"),selectees.each(function(){var $this=$(this),pos=$this.offset();$.data(this,"selectable-item",{element:this,$element:$this,left:pos.left,top:pos.top,right:pos.left+$this.outerWidth(),bottom:pos.top+$this.outerHeight(),startselected:!1,selected:$this.hasClass("ui-selected"),selecting:$this.hasClass("ui-selecting"),unselecting:$this.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=selectees.addClass("ui-selectee"),this._mouseInit(),this.helper=$("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(event){var that=this,options=this.options;this.opos=[event.pageX,event.pageY],this.options.disabled||(this.selectees=$(options.filter,this.element[0]),this._trigger("start",event),$(options.appendTo).append(this.helper),this.helper.css({left:event.pageX,top:event.pageY,width:0,height:0}),options.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var selectee=$.data(this,"selectable-item");selectee.startselected=!0,event.metaKey||event.ctrlKey||(selectee.$element.removeClass("ui-selected"),selectee.selected=!1,selectee.$element.addClass("ui-unselecting"),selectee.unselecting=!0,that._trigger("unselecting",event,{unselecting:selectee.element}))}),$(event.target).parents().addBack().each(function(){var doSelect,selectee=$.data(this,"selectable-item");return selectee?(doSelect=!event.metaKey&&!event.ctrlKey||!selectee.$element.hasClass("ui-selected"),selectee.$element.removeClass(doSelect?"ui-unselecting":"ui-selected").addClass(doSelect?"ui-selecting":"ui-unselecting"),selectee.unselecting=!doSelect,selectee.selecting=doSelect,selectee.selected=doSelect,doSelect?that._trigger("selecting",event,{selecting:selectee.element}):that._trigger("unselecting",event,{unselecting:selectee.element}),!1):void 0}))},_mouseDrag:function(event){if(this.dragged=!0,!this.options.disabled){var tmp,that=this,options=this.options,x1=this.opos[0],y1=this.opos[1],x2=event.pageX,y2=event.pageY;return x1>x2&&(tmp=x2,x2=x1,x1=tmp),y1>y2&&(tmp=y2,y2=y1,y1=tmp),this.helper.css({left:x1,top:y1,width:x2-x1,height:y2-y1}),this.selectees.each(function(){var selectee=$.data(this,"selectable-item"),hit=!1;selectee&&selectee.element!==that.element[0]&&("touch"===options.tolerance?hit=!(selectee.left>x2||selectee.right<x1||selectee.top>y2||selectee.bottom<y1):"fit"===options.tolerance&&(hit=selectee.left>x1&&selectee.right<x2&&selectee.top>y1&&selectee.bottom<y2),hit?(selectee.selected&&(selectee.$element.removeClass("ui-selected"),selectee.selected=!1),selectee.unselecting&&(selectee.$element.removeClass("ui-unselecting"),selectee.unselecting=!1),selectee.selecting||(selectee.$element.addClass("ui-selecting"),selectee.selecting=!0,that._trigger("selecting",event,{selecting:selectee.element}))):(selectee.selecting&&((event.metaKey||event.ctrlKey)&&selectee.startselected?(selectee.$element.removeClass("ui-selecting"),selectee.selecting=!1,selectee.$element.addClass("ui-selected"),selectee.selected=!0):(selectee.$element.removeClass("ui-selecting"),selectee.selecting=!1,selectee.startselected&&(selectee.$element.addClass("ui-unselecting"),selectee.unselecting=!0),that._trigger("unselecting",event,{unselecting:selectee.element}))),selectee.selected&&(event.metaKey||event.ctrlKey||selectee.startselected||(selectee.$element.removeClass("ui-selected"),selectee.selected=!1,selectee.$element.addClass("ui-unselecting"),selectee.unselecting=!0,that._trigger("unselecting",event,{unselecting:selectee.element})))))}),!1}},_mouseStop:function(event){var that=this;return this.dragged=!1,$(".ui-unselecting",this.element[0]).each(function(){var selectee=$.data(this,"selectable-item");selectee.$element.removeClass("ui-unselecting"),selectee.unselecting=!1,selectee.startselected=!1,that._trigger("unselected",event,{unselected:selectee.element})
}),$(".ui-selecting",this.element[0]).each(function(){var selectee=$.data(this,"selectable-item");selectee.$element.removeClass("ui-selecting").addClass("ui-selected"),selectee.selecting=!1,selectee.selected=!0,selectee.startselected=!0,that._trigger("selected",event,{selected:selectee.element})}),this._trigger("stop",event),this.helper.remove(),!1}})}(jQuery),function($){function isOverAxis(x,reference,size){return x>reference&&reference+size>x}function isFloating(item){return/left|right/.test(item.css("float"))||/inline|table-cell/.test(item.css("display"))}$.widget("ui.sortable",$.ui.mouse,{version:"1.10.3",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var o=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===o.axis||isFloating(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var i=this.items.length-1;i>=0;i--)this.items[i].item.removeData(this.widgetName+"-item");return this},_setOption:function(key,value){"disabled"===key?(this.options[key]=value,this.widget().toggleClass("ui-sortable-disabled",!!value)):$.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(event,overrideHandle){var currentItem=null,validHandle=!1,that=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(event),$(event.target).parents().each(function(){return $.data(this,that.widgetName+"-item")===that?(currentItem=$(this),!1):void 0}),$.data(event.target,that.widgetName+"-item")===that&&(currentItem=$(event.target)),currentItem&&(!this.options.handle||overrideHandle||($(this.options.handle,currentItem).find("*").addBack().each(function(){this===event.target&&(validHandle=!0)}),validHandle))?(this.currentItem=currentItem,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(event,overrideHandle,noActivation){var i,body,o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(event),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},$.extend(this.offset,{click:{left:event.pageX-this.offset.left,top:event.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(event),this.originalPageX=event.pageX,this.originalPageY=event.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(body=this.document.find("body"),this.storedCursor=body.css("cursor"),body.css("cursor",o.cursor),this.storedStylesheet=$("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(body)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",event,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!noActivation)for(i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("activate",event,this._uiHash(this));return $.ui.ddmanager&&($.ui.ddmanager.current=this),$.ui.ddmanager&&!o.dropBehaviour&&$.ui.ddmanager.prepareOffsets(this,event),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(event),!0},_mouseDrag:function(event){var i,item,itemElement,intersection,o=this.options,scrolled=!1;for(this.position=this._generatePosition(event),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-event.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=scrolled=this.scrollParent[0].scrollTop+o.scrollSpeed:event.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=scrolled=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-event.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=scrolled=this.scrollParent[0].scrollLeft+o.scrollSpeed:event.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=scrolled=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(event.pageY-$(document).scrollTop()<o.scrollSensitivity?scrolled=$(document).scrollTop($(document).scrollTop()-o.scrollSpeed):$(window).height()-(event.pageY-$(document).scrollTop())<o.scrollSensitivity&&(scrolled=$(document).scrollTop($(document).scrollTop()+o.scrollSpeed)),event.pageX-$(document).scrollLeft()<o.scrollSensitivity?scrolled=$(document).scrollLeft($(document).scrollLeft()-o.scrollSpeed):$(window).width()-(event.pageX-$(document).scrollLeft())<o.scrollSensitivity&&(scrolled=$(document).scrollLeft($(document).scrollLeft()+o.scrollSpeed))),scrolled!==!1&&$.ui.ddmanager&&!o.dropBehaviour&&$.ui.ddmanager.prepareOffsets(this,event)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(item=this.items[i],itemElement=item.item[0],intersection=this._intersectsWithPointer(item),intersection&&item.instance===this.currentContainer&&itemElement!==this.currentItem[0]&&this.placeholder[1===intersection?"next":"prev"]()[0]!==itemElement&&!$.contains(this.placeholder[0],itemElement)&&("semi-dynamic"===this.options.type?!$.contains(this.element[0],itemElement):!0)){if(this.direction=1===intersection?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(item))break;this._rearrange(event,item),this._trigger("change",event,this._uiHash());break}return this._contactContainers(event),$.ui.ddmanager&&$.ui.ddmanager.drag(this,event),this._trigger("sort",event,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(event,noPropagation){if(event){if($.ui.ddmanager&&!this.options.dropBehaviour&&$.ui.ddmanager.drop(this,event),this.options.revert){var that=this,cur=this.placeholder.offset(),axis=this.options.axis,animation={};axis&&"x"!==axis||(animation.left=cur.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),axis&&"y"!==axis||(animation.top=cur.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,$(this.helper).animate(animation,parseInt(this.options.revert,10)||500,function(){that._clear(event)})}else this._clear(event,noPropagation);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("deactivate",null,this._uiHash(this)),this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",null,this._uiHash(this)),this.containers[i].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),$.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?$(this.domPosition.prev).after(this.currentItem):$(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(o){var items=this._getItemsAsjQuery(o&&o.connected),str=[];return o=o||{},$(items).each(function(){var res=($(o.item||this).attr(o.attribute||"id")||"").match(o.expression||/(.+)[\-=_](.+)/);res&&str.push((o.key||res[1]+"[]")+"="+(o.key&&o.expression?res[1]:res[2]))}),!str.length&&o.key&&str.push(o.key+"="),str.join("&")},toArray:function(o){var items=this._getItemsAsjQuery(o&&o.connected),ret=[];return o=o||{},items.each(function(){ret.push($(o.item||this).attr(o.attribute||"id")||"")}),ret},_intersectsWith:function(item){var x1=this.positionAbs.left,x2=x1+this.helperProportions.width,y1=this.positionAbs.top,y2=y1+this.helperProportions.height,l=item.left,r=l+item.width,t=item.top,b=t+item.height,dyClick=this.offset.click.top,dxClick=this.offset.click.left,isOverElementHeight="x"===this.options.axis||y1+dyClick>t&&b>y1+dyClick,isOverElementWidth="y"===this.options.axis||x1+dxClick>l&&r>x1+dxClick,isOverElement=isOverElementHeight&&isOverElementWidth;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>item[this.floating?"width":"height"]?isOverElement:l<x1+this.helperProportions.width/2&&x2-this.helperProportions.width/2<r&&t<y1+this.helperProportions.height/2&&y2-this.helperProportions.height/2<b},_intersectsWithPointer:function(item){var isOverElementHeight="x"===this.options.axis||isOverAxis(this.positionAbs.top+this.offset.click.top,item.top,item.height),isOverElementWidth="y"===this.options.axis||isOverAxis(this.positionAbs.left+this.offset.click.left,item.left,item.width),isOverElement=isOverElementHeight&&isOverElementWidth,verticalDirection=this._getDragVerticalDirection(),horizontalDirection=this._getDragHorizontalDirection();return isOverElement?this.floating?horizontalDirection&&"right"===horizontalDirection||"down"===verticalDirection?2:1:verticalDirection&&("down"===verticalDirection?2:1):!1},_intersectsWithSides:function(item){var isOverBottomHalf=isOverAxis(this.positionAbs.top+this.offset.click.top,item.top+item.height/2,item.height),isOverRightHalf=isOverAxis(this.positionAbs.left+this.offset.click.left,item.left+item.width/2,item.width),verticalDirection=this._getDragVerticalDirection(),horizontalDirection=this._getDragHorizontalDirection();return this.floating&&horizontalDirection?"right"===horizontalDirection&&isOverRightHalf||"left"===horizontalDirection&&!isOverRightHalf:verticalDirection&&("down"===verticalDirection&&isOverBottomHalf||"up"===verticalDirection&&!isOverBottomHalf)},_getDragVerticalDirection:function(){var delta=this.positionAbs.top-this.lastPositionAbs.top;return 0!==delta&&(delta>0?"down":"up")},_getDragHorizontalDirection:function(){var delta=this.positionAbs.left-this.lastPositionAbs.left;return 0!==delta&&(delta>0?"right":"left")},refresh:function(event){return this._refreshItems(event),this.refreshPositions(),this},_connectWith:function(){var options=this.options;return options.connectWith.constructor===String?[options.connectWith]:options.connectWith},_getItemsAsjQuery:function(connected){var i,j,cur,inst,items=[],queries=[],connectWith=this._connectWith();if(connectWith&&connected)for(i=connectWith.length-1;i>=0;i--)for(cur=$(connectWith[i]),j=cur.length-1;j>=0;j--)inst=$.data(cur[j],this.widgetFullName),inst&&inst!==this&&!inst.options.disabled&&queries.push([$.isFunction(inst.options.items)?inst.options.items.call(inst.element):$(inst.options.items,inst.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),inst]);for(queries.push([$.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):$(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=queries.length-1;i>=0;i--)queries[i][0].each(function(){items.push(this)});return $(items)},_removeCurrentsFromItems:function(){var list=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=$.grep(this.items,function(item){for(var j=0;j<list.length;j++)if(list[j]===item.item[0])return!1;return!0})},_refreshItems:function(event){this.items=[],this.containers=[this];var i,j,cur,inst,targetData,_queries,item,queriesLength,items=this.items,queries=[[$.isFunction(this.options.items)?this.options.items.call(this.element[0],event,{item:this.currentItem}):$(this.options.items,this.element),this]],connectWith=this._connectWith();if(connectWith&&this.ready)for(i=connectWith.length-1;i>=0;i--)for(cur=$(connectWith[i]),j=cur.length-1;j>=0;j--)inst=$.data(cur[j],this.widgetFullName),inst&&inst!==this&&!inst.options.disabled&&(queries.push([$.isFunction(inst.options.items)?inst.options.items.call(inst.element[0],event,{item:this.currentItem}):$(inst.options.items,inst.element),inst]),this.containers.push(inst));for(i=queries.length-1;i>=0;i--)for(targetData=queries[i][1],_queries=queries[i][0],j=0,queriesLength=_queries.length;queriesLength>j;j++)item=$(_queries[j]),item.data(this.widgetName+"-item",targetData),items.push({item:item,instance:targetData,width:0,height:0,left:0,top:0})},refreshPositions:function(fast){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,item,t,p;for(i=this.items.length-1;i>=0;i--)item=this.items[i],item.instance!==this.currentContainer&&this.currentContainer&&item.item[0]!==this.currentItem[0]||(t=this.options.toleranceElement?$(this.options.toleranceElement,item.item):item.item,fast||(item.width=t.outerWidth(),item.height=t.outerHeight()),p=t.offset(),item.left=p.left,item.top=p.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)p=this.containers[i].element.offset(),this.containers[i].containerCache.left=p.left,this.containers[i].containerCache.top=p.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(that){that=that||this;var className,o=that.options;o.placeholder&&o.placeholder.constructor!==String||(className=o.placeholder,o.placeholder={element:function(){var nodeName=that.currentItem[0].nodeName.toLowerCase(),element=$("<"+nodeName+">",that.document[0]).addClass(className||that.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===nodeName?that.currentItem.children().each(function(){$("<td>&#160;</td>",that.document[0]).attr("colspan",$(this).attr("colspan")||1).appendTo(element)}):"img"===nodeName&&element.attr("src",that.currentItem.attr("src")),className||element.css("visibility","hidden"),element},update:function(container,p){(!className||o.forcePlaceholderSize)&&(p.height()||p.height(that.currentItem.innerHeight()-parseInt(that.currentItem.css("paddingTop")||0,10)-parseInt(that.currentItem.css("paddingBottom")||0,10)),p.width()||p.width(that.currentItem.innerWidth()-parseInt(that.currentItem.css("paddingLeft")||0,10)-parseInt(that.currentItem.css("paddingRight")||0,10)))}}),that.placeholder=$(o.placeholder.element.call(that.element,that.currentItem)),that.currentItem.after(that.placeholder),o.placeholder.update(that,that.placeholder)},_contactContainers:function(event){var i,j,dist,itemWithLeastDistance,posProperty,sizeProperty,base,cur,nearBottom,floating,innermostContainer=null,innermostIndex=null;for(i=this.containers.length-1;i>=0;i--)if(!$.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(innermostContainer&&$.contains(this.containers[i].element[0],innermostContainer.element[0]))continue;innermostContainer=this.containers[i],innermostIndex=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",event,this._uiHash(this)),this.containers[i].containerCache.over=0);if(innermostContainer)if(1===this.containers.length)this.containers[innermostIndex].containerCache.over||(this.containers[innermostIndex]._trigger("over",event,this._uiHash(this)),this.containers[innermostIndex].containerCache.over=1);else{for(dist=1e4,itemWithLeastDistance=null,floating=innermostContainer.floating||isFloating(this.currentItem),posProperty=floating?"left":"top",sizeProperty=floating?"width":"height",base=this.positionAbs[posProperty]+this.offset.click[posProperty],j=this.items.length-1;j>=0;j--)$.contains(this.containers[innermostIndex].element[0],this.items[j].item[0])&&this.items[j].item[0]!==this.currentItem[0]&&(!floating||isOverAxis(this.positionAbs.top+this.offset.click.top,this.items[j].top,this.items[j].height))&&(cur=this.items[j].item.offset()[posProperty],nearBottom=!1,Math.abs(cur-base)>Math.abs(cur+this.items[j][sizeProperty]-base)&&(nearBottom=!0,cur+=this.items[j][sizeProperty]),Math.abs(cur-base)<dist&&(dist=Math.abs(cur-base),itemWithLeastDistance=this.items[j],this.direction=nearBottom?"up":"down"));if(!itemWithLeastDistance&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[innermostIndex])return;itemWithLeastDistance?this._rearrange(event,itemWithLeastDistance,null,!0):this._rearrange(event,null,this.containers[innermostIndex].element,!0),this._trigger("change",event,this._uiHash()),this.containers[innermostIndex]._trigger("change",event,this._uiHash(this)),this.currentContainer=this.containers[innermostIndex],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[innermostIndex]._trigger("over",event,this._uiHash(this)),this.containers[innermostIndex].containerCache.over=1}},_createHelper:function(event){var o=this.options,helper=$.isFunction(o.helper)?$(o.helper.apply(this.element[0],[event,this.currentItem])):"clone"===o.helper?this.currentItem.clone():this.currentItem;return helper.parents("body").length||$("parent"!==o.appendTo?o.appendTo:this.currentItem[0].parentNode)[0].appendChild(helper[0]),helper[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!helper[0].style.width||o.forceHelperSize)&&helper.width(this.currentItem.width()),(!helper[0].style.height||o.forceHelperSize)&&helper.height(this.currentItem.height()),helper},_adjustOffsetFromHelper:function(obj){"string"==typeof obj&&(obj=obj.split(" ")),$.isArray(obj)&&(obj={left:+obj[0],top:+obj[1]||0}),"left"in obj&&(this.offset.click.left=obj.left+this.margins.left),"right"in obj&&(this.offset.click.left=this.helperProportions.width-obj.right+this.margins.left),"top"in obj&&(this.offset.click.top=obj.top+this.margins.top),"bottom"in obj&&(this.offset.click.top=this.helperProportions.height-obj.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var po=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0])&&(po.left+=this.scrollParent.scrollLeft(),po.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&$.ui.ie)&&(po={top:0,left:0}),{top:po.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:po.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var p=this.currentItem.position();return{top:p.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:p.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var ce,co,over,o=this.options;"parent"===o.containment&&(o.containment=this.helper[0].parentNode),("document"===o.containment||"window"===o.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,$("document"===o.containment?document:window).width()-this.helperProportions.width-this.margins.left,($("document"===o.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(o.containment)||(ce=$(o.containment)[0],co=$(o.containment).offset(),over="hidden"!==$(ce).css("overflow"),this.containment=[co.left+(parseInt($(ce).css("borderLeftWidth"),10)||0)+(parseInt($(ce).css("paddingLeft"),10)||0)-this.margins.left,co.top+(parseInt($(ce).css("borderTopWidth"),10)||0)+(parseInt($(ce).css("paddingTop"),10)||0)-this.margins.top,co.left+(over?Math.max(ce.scrollWidth,ce.offsetWidth):ce.offsetWidth)-(parseInt($(ce).css("borderLeftWidth"),10)||0)-(parseInt($(ce).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,co.top+(over?Math.max(ce.scrollHeight,ce.offsetHeight):ce.offsetHeight)-(parseInt($(ce).css("borderTopWidth"),10)||0)-(parseInt($(ce).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(d,pos){pos||(pos=this.position);var mod="absolute"===d?1:-1,scroll="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,scrollIsRootNode=/(html|body)/i.test(scroll[0].tagName);return{top:pos.top+this.offset.relative.top*mod+this.offset.parent.top*mod-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():scrollIsRootNode?0:scroll.scrollTop())*mod,left:pos.left+this.offset.relative.left*mod+this.offset.parent.left*mod-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())*mod}},_generatePosition:function(event){var top,left,o=this.options,pageX=event.pageX,pageY=event.pageY,scroll="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,scrollIsRootNode=/(html|body)/i.test(scroll[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(event.pageX-this.offset.click.left<this.containment[0]&&(pageX=this.containment[0]+this.offset.click.left),event.pageY-this.offset.click.top<this.containment[1]&&(pageY=this.containment[1]+this.offset.click.top),event.pageX-this.offset.click.left>this.containment[2]&&(pageX=this.containment[2]+this.offset.click.left),event.pageY-this.offset.click.top>this.containment[3]&&(pageY=this.containment[3]+this.offset.click.top)),o.grid&&(top=this.originalPageY+Math.round((pageY-this.originalPageY)/o.grid[1])*o.grid[1],pageY=this.containment?top-this.offset.click.top>=this.containment[1]&&top-this.offset.click.top<=this.containment[3]?top:top-this.offset.click.top>=this.containment[1]?top-o.grid[1]:top+o.grid[1]:top,left=this.originalPageX+Math.round((pageX-this.originalPageX)/o.grid[0])*o.grid[0],pageX=this.containment?left-this.offset.click.left>=this.containment[0]&&left-this.offset.click.left<=this.containment[2]?left:left-this.offset.click.left>=this.containment[0]?left-o.grid[0]:left+o.grid[0]:left)),{top:pageY-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():scrollIsRootNode?0:scroll.scrollTop()),left:pageX-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())}},_rearrange:function(event,i,a,hardRefresh){a?a[0].appendChild(this.placeholder[0]):i.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?i.item[0]:i.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var counter=this.counter;this._delay(function(){counter===this.counter&&this.refreshPositions(!hardRefresh)})},_clear:function(event,noPropagation){this.reverting=!1;var i,delayedTriggers=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)("auto"===this._storedCSS[i]||"static"===this._storedCSS[i])&&(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!noPropagation&&delayedTriggers.push(function(event){this._trigger("receive",event,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||noPropagation||delayedTriggers.push(function(event){this._trigger("update",event,this._uiHash())}),this!==this.currentContainer&&(noPropagation||(delayedTriggers.push(function(event){this._trigger("remove",event,this._uiHash())}),delayedTriggers.push(function(c){return function(event){c._trigger("receive",event,this._uiHash(this))}}.call(this,this.currentContainer)),delayedTriggers.push(function(c){return function(event){c._trigger("update",event,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)noPropagation||delayedTriggers.push(function(c){return function(event){c._trigger("deactivate",event,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over&&(delayedTriggers.push(function(c){return function(event){c._trigger("out",event,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!noPropagation){for(this._trigger("beforeStop",event,this._uiHash()),i=0;i<delayedTriggers.length;i++)delayedTriggers[i].call(this,event);this._trigger("stop",event,this._uiHash())}return this.fromOutside=!1,!1}if(noPropagation||this._trigger("beforeStop",event,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!noPropagation){for(i=0;i<delayedTriggers.length;i++)delayedTriggers[i].call(this,event);this._trigger("stop",event,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){$.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(_inst){var inst=_inst||this;return{helper:inst.helper,placeholder:inst.placeholder||$([]),position:inst.position,originalPosition:inst.originalPosition,offset:inst.positionAbs,item:inst.currentItem,sender:_inst?_inst.element:null}}})}(jQuery),function($,undefined){var dataSpace="ui-effects-";$.effects={effect:{}},function(jQuery,undefined){function clamp(value,prop,allowEmpty){var type=propTypes[prop.type]||{};return null==value?allowEmpty||!prop.def?null:prop.def:(value=type.floor?~~value:parseFloat(value),isNaN(value)?prop.def:type.mod?(value+type.mod)%type.mod:0>value?0:type.max<value?type.max:value)}function stringParse(string){var inst=color(),rgba=inst._rgba=[];return string=string.toLowerCase(),each(stringParsers,function(i,parser){var parsed,match=parser.re.exec(string),values=match&&parser.parse(match),spaceName=parser.space||"rgba";return values?(parsed=inst[spaceName](values),inst[spaces[spaceName].cache]=parsed[spaces[spaceName].cache],rgba=inst._rgba=parsed._rgba,!1):void 0}),rgba.length?("0,0,0,0"===rgba.join()&&jQuery.extend(rgba,colors.transparent),inst):colors[string]}function hue2rgb(p,q,h){return h=(h+1)%1,1>6*h?p+(q-p)*h*6:1>2*h?q:2>3*h?p+(q-p)*(2/3-h)*6:p}var colors,stepHooks="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",rplusequals=/^([\-+])=\s*(\d+\.?\d*)/,stringParsers=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(execResult){return[execResult[1],execResult[2],execResult[3],execResult[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(execResult){return[2.55*execResult[1],2.55*execResult[2],2.55*execResult[3],execResult[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(execResult){return[parseInt(execResult[1],16),parseInt(execResult[2],16),parseInt(execResult[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(execResult){return[parseInt(execResult[1]+execResult[1],16),parseInt(execResult[2]+execResult[2],16),parseInt(execResult[3]+execResult[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(execResult){return[execResult[1],execResult[2]/100,execResult[3]/100,execResult[4]]}}],color=jQuery.Color=function(color,green,blue,alpha){return new jQuery.Color.fn.parse(color,green,blue,alpha)},spaces={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},propTypes={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},support=color.support={},supportElem=jQuery("<p>")[0],each=jQuery.each;supportElem.style.cssText="background-color:rgba(1,1,1,.5)",support.rgba=supportElem.style.backgroundColor.indexOf("rgba")>-1,each(spaces,function(spaceName,space){space.cache="_"+spaceName,space.props.alpha={idx:3,type:"percent",def:1}}),color.fn=jQuery.extend(color.prototype,{parse:function(red,green,blue,alpha){if(red===undefined)return this._rgba=[null,null,null,null],this;(red.jquery||red.nodeType)&&(red=jQuery(red).css(green),green=undefined);var inst=this,type=jQuery.type(red),rgba=this._rgba=[];return green!==undefined&&(red=[red,green,blue,alpha],type="array"),"string"===type?this.parse(stringParse(red)||colors._default):"array"===type?(each(spaces.rgba.props,function(key,prop){rgba[prop.idx]=clamp(red[prop.idx],prop)}),this):"object"===type?(red instanceof color?each(spaces,function(spaceName,space){red[space.cache]&&(inst[space.cache]=red[space.cache].slice())}):each(spaces,function(spaceName,space){var cache=space.cache;each(space.props,function(key,prop){if(!inst[cache]&&space.to){if("alpha"===key||null==red[key])return;inst[cache]=space.to(inst._rgba)}inst[cache][prop.idx]=clamp(red[key],prop,!0)}),inst[cache]&&jQuery.inArray(null,inst[cache].slice(0,3))<0&&(inst[cache][3]=1,space.from&&(inst._rgba=space.from(inst[cache])))}),this):void 0},is:function(compare){var is=color(compare),same=!0,inst=this;return each(spaces,function(_,space){var localCache,isCache=is[space.cache];
return isCache&&(localCache=inst[space.cache]||space.to&&space.to(inst._rgba)||[],each(space.props,function(_,prop){return null!=isCache[prop.idx]?same=isCache[prop.idx]===localCache[prop.idx]:void 0})),same}),same},_space:function(){var used=[],inst=this;return each(spaces,function(spaceName,space){inst[space.cache]&&used.push(spaceName)}),used.pop()},transition:function(other,distance){var end=color(other),spaceName=end._space(),space=spaces[spaceName],startColor=0===this.alpha()?color("transparent"):this,start=startColor[space.cache]||space.to(startColor._rgba),result=start.slice();return end=end[space.cache],each(space.props,function(key,prop){var index=prop.idx,startValue=start[index],endValue=end[index],type=propTypes[prop.type]||{};null!==endValue&&(null===startValue?result[index]=endValue:(type.mod&&(endValue-startValue>type.mod/2?startValue+=type.mod:startValue-endValue>type.mod/2&&(startValue-=type.mod)),result[index]=clamp((endValue-startValue)*distance+startValue,prop)))}),this[spaceName](result)},blend:function(opaque){if(1===this._rgba[3])return this;var rgb=this._rgba.slice(),a=rgb.pop(),blend=color(opaque)._rgba;return color(jQuery.map(rgb,function(v,i){return(1-a)*blend[i]+a*v}))},toRgbaString:function(){var prefix="rgba(",rgba=jQuery.map(this._rgba,function(v,i){return null==v?i>2?1:0:v});return 1===rgba[3]&&(rgba.pop(),prefix="rgb("),prefix+rgba.join()+")"},toHslaString:function(){var prefix="hsla(",hsla=jQuery.map(this.hsla(),function(v,i){return null==v&&(v=i>2?1:0),i&&3>i&&(v=Math.round(100*v)+"%"),v});return 1===hsla[3]&&(hsla.pop(),prefix="hsl("),prefix+hsla.join()+")"},toHexString:function(includeAlpha){var rgba=this._rgba.slice(),alpha=rgba.pop();return includeAlpha&&rgba.push(~~(255*alpha)),"#"+jQuery.map(rgba,function(v){return v=(v||0).toString(16),1===v.length?"0"+v:v}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),color.fn.parse.prototype=color.fn,spaces.hsla.to=function(rgba){if(null==rgba[0]||null==rgba[1]||null==rgba[2])return[null,null,null,rgba[3]];var h,s,r=rgba[0]/255,g=rgba[1]/255,b=rgba[2]/255,a=rgba[3],max=Math.max(r,g,b),min=Math.min(r,g,b),diff=max-min,add=max+min,l=.5*add;return h=min===max?0:r===max?60*(g-b)/diff+360:g===max?60*(b-r)/diff+120:60*(r-g)/diff+240,s=0===diff?0:.5>=l?diff/add:diff/(2-add),[Math.round(h)%360,s,l,null==a?1:a]},spaces.hsla.from=function(hsla){if(null==hsla[0]||null==hsla[1]||null==hsla[2])return[null,null,null,hsla[3]];var h=hsla[0]/360,s=hsla[1],l=hsla[2],a=hsla[3],q=.5>=l?l*(1+s):l+s-l*s,p=2*l-q;return[Math.round(255*hue2rgb(p,q,h+1/3)),Math.round(255*hue2rgb(p,q,h)),Math.round(255*hue2rgb(p,q,h-1/3)),a]},each(spaces,function(spaceName,space){var props=space.props,cache=space.cache,to=space.to,from=space.from;color.fn[spaceName]=function(value){if(to&&!this[cache]&&(this[cache]=to(this._rgba)),value===undefined)return this[cache].slice();var ret,type=jQuery.type(value),arr="array"===type||"object"===type?value:arguments,local=this[cache].slice();return each(props,function(key,prop){var val=arr["object"===type?key:prop.idx];null==val&&(val=local[prop.idx]),local[prop.idx]=clamp(val,prop)}),from?(ret=color(from(local)),ret[cache]=local,ret):color(local)},each(props,function(key,prop){color.fn[key]||(color.fn[key]=function(value){var match,vtype=jQuery.type(value),fn="alpha"===key?this._hsla?"hsla":"rgba":spaceName,local=this[fn](),cur=local[prop.idx];return"undefined"===vtype?cur:("function"===vtype&&(value=value.call(this,cur),vtype=jQuery.type(value)),null==value&&prop.empty?this:("string"===vtype&&(match=rplusequals.exec(value),match&&(value=cur+parseFloat(match[2])*("+"===match[1]?1:-1))),local[prop.idx]=value,this[fn](local)))})})}),color.hook=function(hook){var hooks=hook.split(" ");each(hooks,function(i,hook){jQuery.cssHooks[hook]={set:function(elem,value){var parsed,curElem,backgroundColor="";if("transparent"!==value&&("string"!==jQuery.type(value)||(parsed=stringParse(value)))){if(value=color(parsed||value),!support.rgba&&1!==value._rgba[3]){for(curElem="backgroundColor"===hook?elem.parentNode:elem;(""===backgroundColor||"transparent"===backgroundColor)&&curElem&&curElem.style;)try{backgroundColor=jQuery.css(curElem,"backgroundColor"),curElem=curElem.parentNode}catch(e){}value=value.blend(backgroundColor&&"transparent"!==backgroundColor?backgroundColor:"_default")}value=value.toRgbaString()}try{elem.style[hook]=value}catch(e){}}},jQuery.fx.step[hook]=function(fx){fx.colorInit||(fx.start=color(fx.elem,hook),fx.end=color(fx.end),fx.colorInit=!0),jQuery.cssHooks[hook].set(fx.elem,fx.start.transition(fx.end,fx.pos))}})},color.hook(stepHooks),jQuery.cssHooks.borderColor={expand:function(value){var expanded={};return each(["Top","Right","Bottom","Left"],function(i,part){expanded["border"+part+"Color"]=value}),expanded}},colors=jQuery.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function getElementStyles(elem){var key,len,style=elem.ownerDocument.defaultView?elem.ownerDocument.defaultView.getComputedStyle(elem,null):elem.currentStyle,styles={};if(style&&style.length&&style[0]&&style[style[0]])for(len=style.length;len--;)key=style[len],"string"==typeof style[key]&&(styles[$.camelCase(key)]=style[key]);else for(key in style)"string"==typeof style[key]&&(styles[key]=style[key]);return styles}function styleDifference(oldStyle,newStyle){var name,value,diff={};for(name in newStyle)value=newStyle[name],oldStyle[name]!==value&&(shorthandStyles[name]||($.fx.step[name]||!isNaN(parseFloat(value)))&&(diff[name]=value));return diff}var classAnimationActions=["add","remove","toggle"],shorthandStyles={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};$.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(_,prop){$.fx.step[prop]=function(fx){("none"!==fx.end&&!fx.setAttr||1===fx.pos&&!fx.setAttr)&&(jQuery.style(fx.elem,prop,fx.end),fx.setAttr=!0)}}),$.fn.addBack||($.fn.addBack=function(selector){return this.add(null==selector?this.prevObject:this.prevObject.filter(selector))}),$.effects.animateClass=function(value,duration,easing,callback){var o=$.speed(duration,easing,callback);return this.queue(function(){var applyClassChange,animated=$(this),baseClass=animated.attr("class")||"",allAnimations=o.children?animated.find("*").addBack():animated;allAnimations=allAnimations.map(function(){var el=$(this);return{el:el,start:getElementStyles(this)}}),applyClassChange=function(){$.each(classAnimationActions,function(i,action){value[action]&&animated[action+"Class"](value[action])})},applyClassChange(),allAnimations=allAnimations.map(function(){return this.end=getElementStyles(this.el[0]),this.diff=styleDifference(this.start,this.end),this}),animated.attr("class",baseClass),allAnimations=allAnimations.map(function(){var styleInfo=this,dfd=$.Deferred(),opts=$.extend({},o,{queue:!1,complete:function(){dfd.resolve(styleInfo)}});return this.el.animate(this.diff,opts),dfd.promise()}),$.when.apply($,allAnimations.get()).done(function(){applyClassChange(),$.each(arguments,function(){var el=this.el;$.each(this.diff,function(key){el.css(key,"")})}),o.complete.call(animated[0])})})},$.fn.extend({addClass:function(orig){return function(classNames,speed,easing,callback){return speed?$.effects.animateClass.call(this,{add:classNames},speed,easing,callback):orig.apply(this,arguments)}}($.fn.addClass),removeClass:function(orig){return function(classNames,speed,easing,callback){return arguments.length>1?$.effects.animateClass.call(this,{remove:classNames},speed,easing,callback):orig.apply(this,arguments)}}($.fn.removeClass),toggleClass:function(orig){return function(classNames,force,speed,easing,callback){return"boolean"==typeof force||force===undefined?speed?$.effects.animateClass.call(this,force?{add:classNames}:{remove:classNames},speed,easing,callback):orig.apply(this,arguments):$.effects.animateClass.call(this,{toggle:classNames},force,speed,easing)}}($.fn.toggleClass),switchClass:function(remove,add,speed,easing,callback){return $.effects.animateClass.call(this,{add:add,remove:remove},speed,easing,callback)}})}(),function(){function _normalizeArguments(effect,options,speed,callback){return $.isPlainObject(effect)&&(options=effect,effect=effect.effect),effect={effect:effect},null==options&&(options={}),$.isFunction(options)&&(callback=options,speed=null,options={}),("number"==typeof options||$.fx.speeds[options])&&(callback=speed,speed=options,options={}),$.isFunction(speed)&&(callback=speed,speed=null),options&&$.extend(effect,options),speed=speed||options.duration,effect.duration=$.fx.off?0:"number"==typeof speed?speed:speed in $.fx.speeds?$.fx.speeds[speed]:$.fx.speeds._default,effect.complete=callback||options.complete,effect}function standardAnimationOption(option){return!option||"number"==typeof option||$.fx.speeds[option]?!0:"string"!=typeof option||$.effects.effect[option]?$.isFunction(option)?!0:"object"!=typeof option||option.effect?!1:!0:!0}$.extend($.effects,{version:"1.10.3",save:function(element,set){for(var i=0;i<set.length;i++)null!==set[i]&&element.data(dataSpace+set[i],element[0].style[set[i]])},restore:function(element,set){var val,i;for(i=0;i<set.length;i++)null!==set[i]&&(val=element.data(dataSpace+set[i]),val===undefined&&(val=""),element.css(set[i],val))},setMode:function(el,mode){return"toggle"===mode&&(mode=el.is(":hidden")?"show":"hide"),mode},getBaseline:function(origin,original){var y,x;switch(origin[0]){case"top":y=0;break;case"middle":y=.5;break;case"bottom":y=1;break;default:y=origin[0]/original.height}switch(origin[1]){case"left":x=0;break;case"center":x=.5;break;case"right":x=1;break;default:x=origin[1]/original.width}return{x:x,y:y}},createWrapper:function(element){if(element.parent().is(".ui-effects-wrapper"))return element.parent();var props={width:element.outerWidth(!0),height:element.outerHeight(!0),"float":element.css("float")},wrapper=$("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),size={width:element.width(),height:element.height()},active=document.activeElement;try{active.id}catch(e){active=document.body}return element.wrap(wrapper),(element[0]===active||$.contains(element[0],active))&&$(active).focus(),wrapper=element.parent(),"static"===element.css("position")?(wrapper.css({position:"relative"}),element.css({position:"relative"})):($.extend(props,{position:element.css("position"),zIndex:element.css("z-index")}),$.each(["top","left","bottom","right"],function(i,pos){props[pos]=element.css(pos),isNaN(parseInt(props[pos],10))&&(props[pos]="auto")}),element.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),element.css(size),wrapper.css(props).show()},removeWrapper:function(element){var active=document.activeElement;return element.parent().is(".ui-effects-wrapper")&&(element.parent().replaceWith(element),(element[0]===active||$.contains(element[0],active))&&$(active).focus()),element},setTransition:function(element,list,factor,value){return value=value||{},$.each(list,function(i,x){var unit=element.cssUnit(x);unit[0]>0&&(value[x]=unit[0]*factor+unit[1])}),value}}),$.fn.extend({effect:function(){function run(next){function done(){$.isFunction(complete)&&complete.call(elem[0]),$.isFunction(next)&&next()}var elem=$(this),complete=args.complete,mode=args.mode;(elem.is(":hidden")?"hide"===mode:"show"===mode)?(elem[mode](),done()):effectMethod.call(elem[0],args,done)}var args=_normalizeArguments.apply(this,arguments),mode=args.mode,queue=args.queue,effectMethod=$.effects.effect[args.effect];return $.fx.off||!effectMethod?mode?this[mode](args.duration,args.complete):this.each(function(){args.complete&&args.complete.call(this)}):queue===!1?this.each(run):this.queue(queue||"fx",run)},show:function(orig){return function(option){if(standardAnimationOption(option))return orig.apply(this,arguments);var args=_normalizeArguments.apply(this,arguments);return args.mode="show",this.effect.call(this,args)}}($.fn.show),hide:function(orig){return function(option){if(standardAnimationOption(option))return orig.apply(this,arguments);var args=_normalizeArguments.apply(this,arguments);return args.mode="hide",this.effect.call(this,args)}}($.fn.hide),toggle:function(orig){return function(option){if(standardAnimationOption(option)||"boolean"==typeof option)return orig.apply(this,arguments);var args=_normalizeArguments.apply(this,arguments);return args.mode="toggle",this.effect.call(this,args)}}($.fn.toggle),cssUnit:function(key){var style=this.css(key),val=[];return $.each(["em","px","%","pt"],function(i,unit){style.indexOf(unit)>0&&(val=[parseFloat(style),unit])}),val}})}(),function(){var baseEasings={};$.each(["Quad","Cubic","Quart","Quint","Expo"],function(i,name){baseEasings[name]=function(p){return Math.pow(p,i+2)}}),$.extend(baseEasings,{Sine:function(p){return 1-Math.cos(p*Math.PI/2)},Circ:function(p){return 1-Math.sqrt(1-p*p)},Elastic:function(p){return 0===p||1===p?p:-Math.pow(2,8*(p-1))*Math.sin((80*(p-1)-7.5)*Math.PI/15)},Back:function(p){return p*p*(3*p-2)},Bounce:function(p){for(var pow2,bounce=4;p<((pow2=Math.pow(2,--bounce))-1)/11;);return 1/Math.pow(4,3-bounce)-7.5625*Math.pow((3*pow2-2)/22-p,2)}}),$.each(baseEasings,function(name,easeIn){$.easing["easeIn"+name]=easeIn,$.easing["easeOut"+name]=function(p){return 1-easeIn(1-p)},$.easing["easeInOut"+name]=function(p){return.5>p?easeIn(2*p)/2:1-easeIn(-2*p+2)/2}})}()}(jQuery),function($){var uid=0,hideProps={},showProps={};hideProps.height=hideProps.paddingTop=hideProps.paddingBottom=hideProps.borderTopWidth=hideProps.borderBottomWidth="hide",showProps.height=showProps.paddingTop=showProps.paddingBottom=showProps.borderTopWidth=showProps.borderBottomWidth="show",$.widget("ui.accordion",{version:"1.10.3",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var options=this.options;this.prevShow=this.prevHide=$(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),options.collapsible||options.active!==!1&&null!=options.active||(options.active=0),this._processPanels(),options.active<0&&(options.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():$(),content:this.active.length?this.active.next():$()}},_createIcons:function(){var icons=this.options.icons;icons&&($("<span>").addClass("ui-accordion-header-icon ui-icon "+icons.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(icons.header).addClass(icons.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var contents;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),contents=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),"content"!==this.options.heightStyle&&contents.css("height","")},_setOption:function(key,value){return"active"===key?void this._activate(value):("event"===key&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(value)),this._super(key,value),"collapsible"!==key||value||this.options.active!==!1||this._activate(0),"icons"===key&&(this._destroyIcons(),value&&this._createIcons()),void("disabled"===key&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!value)))},_keydown:function(event){if(!event.altKey&&!event.ctrlKey){var keyCode=$.ui.keyCode,length=this.headers.length,currentIndex=this.headers.index(event.target),toFocus=!1;switch(event.keyCode){case keyCode.RIGHT:case keyCode.DOWN:toFocus=this.headers[(currentIndex+1)%length];break;case keyCode.LEFT:case keyCode.UP:toFocus=this.headers[(currentIndex-1+length)%length];break;case keyCode.SPACE:case keyCode.ENTER:this._eventHandler(event);break;case keyCode.HOME:toFocus=this.headers[0];break;case keyCode.END:toFocus=this.headers[length-1]}toFocus&&($(event.target).attr("tabIndex",-1),$(toFocus).attr("tabIndex",0),toFocus.focus(),event.preventDefault())}},_panelKeyDown:function(event){event.keyCode===$.ui.keyCode.UP&&event.ctrlKey&&$(event.currentTarget).prev().focus()},refresh:function(){var options=this.options;this._processPanels(),options.active===!1&&options.collapsible===!0||!this.headers.length?(options.active=!1,this.active=$()):options.active===!1?this._activate(0):this.active.length&&!$.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(options.active=!1,this.active=$()):this._activate(Math.max(0,options.active-1)):options.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var maxHeight,options=this.options,heightStyle=options.heightStyle,parent=this.element.parent(),accordionId=this.accordionId="ui-accordion-"+(this.element.attr("id")||++uid);this.active=this._findActive(options.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(i){var header=$(this),headerId=header.attr("id"),panel=header.next(),panelId=panel.attr("id");headerId||(headerId=accordionId+"-header-"+i,header.attr("id",headerId)),panelId||(panelId=accordionId+"-panel-"+i,panel.attr("id",panelId)),header.attr("aria-controls",panelId),panel.attr("aria-labelledby",headerId)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(options.event),"fill"===heightStyle?(maxHeight=parent.height(),this.element.siblings(":visible").each(function(){var elem=$(this),position=elem.css("position");"absolute"!==position&&"fixed"!==position&&(maxHeight-=elem.outerHeight(!0))}),this.headers.each(function(){maxHeight-=$(this).outerHeight(!0)}),this.headers.next().each(function(){$(this).height(Math.max(0,maxHeight-$(this).innerHeight()+$(this).height()))}).css("overflow","auto")):"auto"===heightStyle&&(maxHeight=0,this.headers.next().each(function(){maxHeight=Math.max(maxHeight,$(this).css("height","").height())}).height(maxHeight))},_activate:function(index){var active=this._findActive(index)[0];active!==this.active[0]&&(active=active||this.active[0],this._eventHandler({target:active,currentTarget:active,preventDefault:$.noop}))},_findActive:function(selector){return"number"==typeof selector?this.headers.eq(selector):$()},_setupEvents:function(event){var events={keydown:"_keydown"};event&&$.each(event.split(" "),function(index,eventName){events[eventName]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,events),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(event){var options=this.options,active=this.active,clicked=$(event.currentTarget),clickedIsActive=clicked[0]===active[0],collapsing=clickedIsActive&&options.collapsible,toShow=collapsing?$():clicked.next(),toHide=active.next(),eventData={oldHeader:active,oldPanel:toHide,newHeader:collapsing?$():clicked,newPanel:toShow};event.preventDefault(),clickedIsActive&&!options.collapsible||this._trigger("beforeActivate",event,eventData)===!1||(options.active=collapsing?!1:this.headers.index(clicked),this.active=clickedIsActive?$():clicked,this._toggle(eventData),active.removeClass("ui-accordion-header-active ui-state-active"),options.icons&&active.children(".ui-accordion-header-icon").removeClass(options.icons.activeHeader).addClass(options.icons.header),clickedIsActive||(clicked.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),options.icons&&clicked.children(".ui-accordion-header-icon").removeClass(options.icons.header).addClass(options.icons.activeHeader),clicked.next().addClass("ui-accordion-content-active")))},_toggle:function(data){var toShow=data.newPanel,toHide=this.prevShow.length?this.prevShow:data.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=toShow,this.prevHide=toHide,this.options.animate?this._animate(toShow,toHide,data):(toHide.hide(),toShow.show(),this._toggleComplete(data)),toHide.attr({"aria-expanded":"false","aria-hidden":"true"}),toHide.prev().attr("aria-selected","false"),toShow.length&&toHide.length?toHide.prev().attr("tabIndex",-1):toShow.length&&this.headers.filter(function(){return 0===$(this).attr("tabIndex")}).attr("tabIndex",-1),toShow.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(toShow,toHide,data){var total,easing,duration,that=this,adjust=0,down=toShow.length&&(!toHide.length||toShow.index()<toHide.index()),animate=this.options.animate||{},options=down&&animate.down||animate,complete=function(){that._toggleComplete(data)};return"number"==typeof options&&(duration=options),"string"==typeof options&&(easing=options),easing=easing||options.easing||animate.easing,duration=duration||options.duration||animate.duration,toHide.length?toShow.length?(total=toShow.show().outerHeight(),toHide.animate(hideProps,{duration:duration,easing:easing,step:function(now,fx){fx.now=Math.round(now)}}),void toShow.hide().animate(showProps,{duration:duration,easing:easing,complete:complete,step:function(now,fx){fx.now=Math.round(now),"height"!==fx.prop?adjust+=fx.now:"content"!==that.options.heightStyle&&(fx.now=Math.round(total-toHide.outerHeight()-adjust),adjust=0)}})):toHide.animate(hideProps,duration,easing,complete):toShow.animate(showProps,duration,easing,complete)},_toggleComplete:function(data){var toHide=data.oldPanel;toHide.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),toHide.length&&(toHide.parent()[0].className=toHide.parent()[0].className),this._trigger("activate",null,data)}})}(jQuery),function($){var requestIndex=0;$.widget("ui.autocomplete",{version:"1.10.3",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var suppressKeyPress,suppressKeyPressRepeat,suppressInput,nodeName=this.element[0].nodeName.toLowerCase(),isTextarea="textarea"===nodeName,isInput="input"===nodeName;this.isMultiLine=isTextarea?!0:isInput?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[isTextarea||isInput?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(event){if(this.element.prop("readOnly"))return suppressKeyPress=!0,suppressInput=!0,void(suppressKeyPressRepeat=!0);suppressKeyPress=!1,suppressInput=!1,suppressKeyPressRepeat=!1;var keyCode=$.ui.keyCode;switch(event.keyCode){case keyCode.PAGE_UP:suppressKeyPress=!0,this._move("previousPage",event);break;case keyCode.PAGE_DOWN:suppressKeyPress=!0,this._move("nextPage",event);break;case keyCode.UP:suppressKeyPress=!0,this._keyEvent("previous",event);break;case keyCode.DOWN:suppressKeyPress=!0,this._keyEvent("next",event);break;case keyCode.ENTER:case keyCode.NUMPAD_ENTER:this.menu.active&&(suppressKeyPress=!0,event.preventDefault(),this.menu.select(event));break;case keyCode.TAB:this.menu.active&&this.menu.select(event);break;case keyCode.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(event),event.preventDefault());break;default:suppressKeyPressRepeat=!0,this._searchTimeout(event)}},keypress:function(event){if(suppressKeyPress)return suppressKeyPress=!1,void((!this.isMultiLine||this.menu.element.is(":visible"))&&event.preventDefault());if(!suppressKeyPressRepeat){var keyCode=$.ui.keyCode;switch(event.keyCode){case keyCode.PAGE_UP:this._move("previousPage",event);break;case keyCode.PAGE_DOWN:this._move("nextPage",event);break;case keyCode.UP:this._keyEvent("previous",event);break;case keyCode.DOWN:this._keyEvent("next",event)}}},input:function(event){return suppressInput?(suppressInput=!1,void event.preventDefault()):void this._searchTimeout(event)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(event){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(event),void this._change(event))}}),this._initSource(),this.menu=$("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(event){event.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var menuElement=this.menu.element[0];$(event.target).closest(".ui-menu-item").length||this._delay(function(){var that=this;this.document.one("mousedown",function(event){event.target===that.element[0]||event.target===menuElement||$.contains(menuElement,event.target)||that.close()})})},menufocus:function(event,ui){if(this.isNewMenu&&(this.isNewMenu=!1,event.originalEvent&&/^mouse/.test(event.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){$(event.target).trigger(event.originalEvent)});var item=ui.item.data("ui-autocomplete-item");!1!==this._trigger("focus",event,{item:item})?event.originalEvent&&/^key/.test(event.originalEvent.type)&&this._value(item.value):this.liveRegion.text(item.value)},menuselect:function(event,ui){var item=ui.item.data("ui-autocomplete-item"),previous=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=previous,this._delay(function(){this.previous=previous,this.selectedItem=item})),!1!==this._trigger("select",event,{item:item})&&this._value(item.value),this.term=this._value(),this.close(event),this.selectedItem=item}}),this.liveRegion=$("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(key,value){this._super(key,value),"source"===key&&this._initSource(),"appendTo"===key&&this.menu.element.appendTo(this._appendTo()),"disabled"===key&&value&&this.xhr&&this.xhr.abort()},_appendTo:function(){var element=this.options.appendTo;return element&&(element=element.jquery||element.nodeType?$(element):this.document.find(element).eq(0)),element||(element=this.element.closest(".ui-front")),element.length||(element=this.document[0].body),element},_initSource:function(){var array,url,that=this;$.isArray(this.options.source)?(array=this.options.source,this.source=function(request,response){response($.ui.autocomplete.filter(array,request.term))}):"string"==typeof this.options.source?(url=this.options.source,this.source=function(request,response){that.xhr&&that.xhr.abort(),that.xhr=$.ajax({url:url,data:request,dataType:"json",success:function(data){response(data)},error:function(){response([])}})}):this.source=this.options.source},_searchTimeout:function(event){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,event))},this.options.delay)},search:function(value,event){return value=null!=value?value:this._value(),this.term=this._value(),value.length<this.options.minLength?this.close(event):this._trigger("search",event)!==!1?this._search(value):void 0},_search:function(value){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:value},this._response())},_response:function(){var that=this,index=++requestIndex;return function(content){index===requestIndex&&that.__response(content),that.pending--,that.pending||that.element.removeClass("ui-autocomplete-loading")}},__response:function(content){content&&(content=this._normalize(content)),this._trigger("response",null,{content:content}),!this.options.disabled&&content&&content.length&&!this.cancelSearch?(this._suggest(content),this._trigger("open")):this._close()},close:function(event){this.cancelSearch=!0,this._close(event)},_close:function(event){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",event))},_change:function(event){this.previous!==this._value()&&this._trigger("change",event,{item:this.selectedItem})},_normalize:function(items){return items.length&&items[0].label&&items[0].value?items:$.map(items,function(item){return"string"==typeof item?{label:item,value:item}:$.extend({label:item.label||item.value,value:item.value||item.label},item)})},_suggest:function(items){var ul=this.menu.element.empty();this._renderMenu(ul,items),this.isNewMenu=!0,this.menu.refresh(),ul.show(),this._resizeMenu(),ul.position($.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var ul=this.menu.element;ul.outerWidth(Math.max(ul.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(ul,items){var that=this;$.each(items,function(index,item){that._renderItemData(ul,item)})},_renderItemData:function(ul,item){return this._renderItem(ul,item).data("ui-autocomplete-item",item)},_renderItem:function(ul,item){return $("<li>").append($("<a>").text(item.label)).appendTo(ul)},_move:function(direction,event){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(direction)||this.menu.isLastItem()&&/^next/.test(direction)?(this._value(this.term),void this.menu.blur()):void this.menu[direction](event):void this.search(null,event)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(keyEvent,event){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(keyEvent,event),event.preventDefault())}}),$.extend($.ui.autocomplete,{escapeRegex:function(value){return value.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(array,term){var matcher=new RegExp($.ui.autocomplete.escapeRegex(term),"i");
return $.grep(array,function(value){return matcher.test(value.label||value.value||value)})}}),$.widget("ui.autocomplete",$.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(amount){return amount+(amount>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(content){var message;this._superApply(arguments),this.options.disabled||this.cancelSearch||(message=content&&content.length?this.options.messages.results(content.length):this.options.messages.noResults,this.liveRegion.text(message))}})}(jQuery),function($){var lastActive,startXPos,startYPos,clickDragged,baseClasses="ui-button ui-widget ui-state-default ui-corner-all",stateClasses="ui-state-hover ui-state-active ",typeClasses="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",formResetHandler=function(){var form=$(this);setTimeout(function(){form.find(":ui-button").button("refresh")},1)},radioGroup=function(radio){var name=radio.name,form=radio.form,radios=$([]);return name&&(name=name.replace(/'/g,"\\'"),radios=form?$(form).find("[name='"+name+"']"):$("[name='"+name+"']",radio.ownerDocument).filter(function(){return!this.form})),radios};$.widget("ui.button",{version:"1.10.3",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,formResetHandler),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var that=this,options=this.options,toggleButton="checkbox"===this.type||"radio"===this.type,activeClass=toggleButton?"":"ui-state-active",focusClass="ui-state-focus";null===options.label&&(options.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(baseClasses).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){options.disabled||this===lastActive&&$(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){options.disabled||$(this).removeClass(activeClass)}).bind("click"+this.eventNamespace,function(event){options.disabled&&(event.preventDefault(),event.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){that.buttonElement.addClass(focusClass)}).bind("blur"+this.eventNamespace,function(){that.buttonElement.removeClass(focusClass)}),toggleButton&&(this.element.bind("change"+this.eventNamespace,function(){clickDragged||that.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(event){options.disabled||(clickDragged=!1,startXPos=event.pageX,startYPos=event.pageY)}).bind("mouseup"+this.eventNamespace,function(event){options.disabled||(startXPos!==event.pageX||startYPos!==event.pageY)&&(clickDragged=!0)})),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return options.disabled||clickDragged?!1:void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(options.disabled||clickDragged)return!1;$(this).addClass("ui-state-active"),that.buttonElement.attr("aria-pressed","true");var radio=that.element[0];radioGroup(radio).not(radio).map(function(){return $(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return options.disabled?!1:($(this).addClass("ui-state-active"),lastActive=this,void that.document.one("mouseup",function(){lastActive=null}))}).bind("mouseup"+this.eventNamespace,function(){return options.disabled?!1:void $(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(event){return options.disabled?!1:void((event.keyCode===$.ui.keyCode.SPACE||event.keyCode===$.ui.keyCode.ENTER)&&$(this).addClass("ui-state-active"))}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){$(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(event){event.keyCode===$.ui.keyCode.SPACE&&$(this).click()})),this._setOption("disabled",options.disabled),this._resetButton()},_determineButtonType:function(){var ancestor,labelSelector,checked;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(ancestor=this.element.parents().last(),labelSelector="label[for='"+this.element.attr("id")+"']",this.buttonElement=ancestor.find(labelSelector),this.buttonElement.length||(ancestor=ancestor.length?ancestor.siblings():this.element.siblings(),this.buttonElement=ancestor.filter(labelSelector),this.buttonElement.length||(this.buttonElement=ancestor.find(labelSelector))),this.element.addClass("ui-helper-hidden-accessible"),checked=this.element.is(":checked"),checked&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",checked)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(baseClasses+" "+stateClasses+" "+typeClasses).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(key,value){return this._super(key,value),"disabled"===key?void(value?this.element.prop("disabled",!0):this.element.prop("disabled",!1)):void this._resetButton()},refresh:function(){var isDisabled=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");isDisabled!==this.options.disabled&&this._setOption("disabled",isDisabled),"radio"===this.type?radioGroup(this.element[0]).each(function(){$(this).is(":checked")?$(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):$(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var buttonElement=this.buttonElement.removeClass(typeClasses),buttonText=$("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(buttonElement.empty()).text(),icons=this.options.icons,multipleIcons=icons.primary&&icons.secondary,buttonClasses=[];icons.primary||icons.secondary?(this.options.text&&buttonClasses.push("ui-button-text-icon"+(multipleIcons?"s":icons.primary?"-primary":"-secondary")),icons.primary&&buttonElement.prepend("<span class='ui-button-icon-primary ui-icon "+icons.primary+"'></span>"),icons.secondary&&buttonElement.append("<span class='ui-button-icon-secondary ui-icon "+icons.secondary+"'></span>"),this.options.text||(buttonClasses.push(multipleIcons?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||buttonElement.attr("title",$.trim(buttonText)))):buttonClasses.push("ui-button-text-only"),buttonElement.addClass(buttonClasses.join(" "))}}),$.widget("ui.buttonset",{version:"1.10.3",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(key,value){"disabled"===key&&this.buttons.button("option",key,value),this._super(key,value)},refresh:function(){var rtl="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return $(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(rtl?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(rtl?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return $(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function($,undefined){function Datepicker(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function bindHover(dpDiv){var selector="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return dpDiv.delegate(selector,"mouseout",function(){$(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&$(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&$(this).removeClass("ui-datepicker-next-hover")}).delegate(selector,"mouseover",function(){$.datepicker._isDisabledDatepicker(instActive.inline?dpDiv.parent()[0]:instActive.input[0])||($(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),$(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&$(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&$(this).addClass("ui-datepicker-next-hover"))})}function extendRemove(target,props){$.extend(target,props);for(var name in props)null==props[name]&&(target[name]=props[name]);return target}$.extend($.ui,{datepicker:{version:"1.10.3"}});var instActive,PROP_NAME="datepicker";$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(settings){return extendRemove(this._defaults,settings||{}),this},_attachDatepicker:function(target,settings){var nodeName,inline,inst;nodeName=target.nodeName.toLowerCase(),inline="div"===nodeName||"span"===nodeName,target.id||(this.uuid+=1,target.id="dp"+this.uuid),inst=this._newInst($(target),inline),inst.settings=$.extend({},settings||{}),"input"===nodeName?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(target,inline){var id=target[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:id,input:target,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:inline,dpDiv:inline?bindHover($("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(target,inst){var input=$(target);inst.append=$([]),inst.trigger=$([]),input.hasClass(this.markerClassName)||(this._attachments(input,inst),input.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(inst),$.data(target,PROP_NAME,inst),inst.settings.disabled&&this._disableDatepicker(target))},_attachments:function(input,inst){var showOn,buttonText,buttonImage,appendText=this._get(inst,"appendText"),isRTL=this._get(inst,"isRTL");inst.append&&inst.append.remove(),appendText&&(inst.append=$("<span class='"+this._appendClass+"'>"+appendText+"</span>"),input[isRTL?"before":"after"](inst.append)),input.unbind("focus",this._showDatepicker),inst.trigger&&inst.trigger.remove(),showOn=this._get(inst,"showOn"),("focus"===showOn||"both"===showOn)&&input.focus(this._showDatepicker),("button"===showOn||"both"===showOn)&&(buttonText=this._get(inst,"buttonText"),buttonImage=this._get(inst,"buttonImage"),inst.trigger=$(this._get(inst,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:buttonImage,alt:buttonText,title:buttonText}):$("<button type='button'></button>").addClass(this._triggerClass).html(buttonImage?$("<img/>").attr({src:buttonImage,alt:buttonText,title:buttonText}):buttonText)),input[isRTL?"before":"after"](inst.trigger),inst.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput===input[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!==input[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(input[0])):$.datepicker._showDatepicker(input[0]),!1}))},_autoSize:function(inst){if(this._get(inst,"autoSize")&&!inst.inline){var findMax,max,maxI,i,date=new Date(2009,11,20),dateFormat=this._get(inst,"dateFormat");dateFormat.match(/[DM]/)&&(findMax=function(names){for(max=0,maxI=0,i=0;i<names.length;i++)names[i].length>max&&(max=names[i].length,maxI=i);return maxI},date.setMonth(findMax(this._get(inst,dateFormat.match(/MM/)?"monthNames":"monthNamesShort"))),date.setDate(findMax(this._get(inst,dateFormat.match(/DD/)?"dayNames":"dayNamesShort"))+20-date.getDay())),inst.input.attr("size",this._formatDate(inst,date).length)}},_inlineDatepicker:function(target,inst){var divSpan=$(target);divSpan.hasClass(this.markerClassName)||(divSpan.addClass(this.markerClassName).append(inst.dpDiv),$.data(target,PROP_NAME,inst),this._setDate(inst,this._getDefaultDate(inst),!0),this._updateDatepicker(inst),this._updateAlternate(inst),inst.settings.disabled&&this._disableDatepicker(target),inst.dpDiv.css("display","block"))},_dialogDatepicker:function(input,date,onSelect,settings,pos){var id,browserWidth,browserHeight,scrollX,scrollY,inst=this._dialogInst;return inst||(this.uuid+=1,id="dp"+this.uuid,this._dialogInput=$("<input type='text' id='"+id+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),inst=this._dialogInst=this._newInst(this._dialogInput,!1),inst.settings={},$.data(this._dialogInput[0],PROP_NAME,inst)),extendRemove(inst.settings,settings||{}),date=date&&date.constructor===Date?this._formatDate(inst,date):date,this._dialogInput.val(date),this._pos=pos?pos.length?pos:[pos.pageX,pos.pageY]:null,this._pos||(browserWidth=document.documentElement.clientWidth,browserHeight=document.documentElement.clientHeight,scrollX=document.documentElement.scrollLeft||document.body.scrollLeft,scrollY=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[browserWidth/2-100+scrollX,browserHeight/2-150+scrollY]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),inst.settings.onSelect=onSelect,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,inst),this},_destroyDatepicker:function(target){var nodeName,$target=$(target),inst=$.data(target,PROP_NAME);$target.hasClass(this.markerClassName)&&(nodeName=target.nodeName.toLowerCase(),$.removeData(target,PROP_NAME),"input"===nodeName?(inst.append.remove(),inst.trigger.remove(),$target.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===nodeName||"span"===nodeName)&&$target.removeClass(this.markerClassName).empty())},_enableDatepicker:function(target){var nodeName,inline,$target=$(target),inst=$.data(target,PROP_NAME);$target.hasClass(this.markerClassName)&&(nodeName=target.nodeName.toLowerCase(),"input"===nodeName?(target.disabled=!1,inst.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===nodeName||"span"===nodeName)&&(inline=$target.children("."+this._inlineClass),inline.children().removeClass("ui-state-disabled"),inline.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=$.map(this._disabledInputs,function(value){return value===target?null:value}))},_disableDatepicker:function(target){var nodeName,inline,$target=$(target),inst=$.data(target,PROP_NAME);$target.hasClass(this.markerClassName)&&(nodeName=target.nodeName.toLowerCase(),"input"===nodeName?(target.disabled=!0,inst.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===nodeName||"span"===nodeName)&&(inline=$target.children("."+this._inlineClass),inline.children().addClass("ui-state-disabled"),inline.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=$.map(this._disabledInputs,function(value){return value===target?null:value}),this._disabledInputs[this._disabledInputs.length]=target)},_isDisabledDatepicker:function(target){if(!target)return!1;for(var i=0;i<this._disabledInputs.length;i++)if(this._disabledInputs[i]===target)return!0;return!1},_getInst:function(target){try{return $.data(target,PROP_NAME)}catch(err){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(target,name,value){var settings,date,minDate,maxDate,inst=this._getInst(target);return 2===arguments.length&&"string"==typeof name?"defaults"===name?$.extend({},$.datepicker._defaults):inst?"all"===name?$.extend({},inst.settings):this._get(inst,name):null:(settings=name||{},"string"==typeof name&&(settings={},settings[name]=value),void(inst&&(this._curInst===inst&&this._hideDatepicker(),date=this._getDateDatepicker(target,!0),minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),extendRemove(inst.settings,settings),null!==minDate&&settings.dateFormat!==undefined&&settings.minDate===undefined&&(inst.settings.minDate=this._formatDate(inst,minDate)),null!==maxDate&&settings.dateFormat!==undefined&&settings.maxDate===undefined&&(inst.settings.maxDate=this._formatDate(inst,maxDate)),"disabled"in settings&&(settings.disabled?this._disableDatepicker(target):this._enableDatepicker(target)),this._attachments($(target),inst),this._autoSize(inst),this._setDate(inst,date),this._updateAlternate(inst),this._updateDatepicker(inst))))},_changeDatepicker:function(target,name,value){this._optionDatepicker(target,name,value)},_refreshDatepicker:function(target){var inst=this._getInst(target);inst&&this._updateDatepicker(inst)},_setDateDatepicker:function(target,date){var inst=this._getInst(target);inst&&(this._setDate(inst,date),this._updateDatepicker(inst),this._updateAlternate(inst))},_getDateDatepicker:function(target,noDefault){var inst=this._getInst(target);return inst&&!inst.inline&&this._setDateFromField(inst,noDefault),inst?this._getDate(inst):null},_doKeyDown:function(event){var onSelect,dateStr,sel,inst=$.datepicker._getInst(event.target),handled=!0,isRTL=inst.dpDiv.is(".ui-datepicker-rtl");if(inst._keyEvent=!0,$.datepicker._datepickerShowing)switch(event.keyCode){case 9:$.datepicker._hideDatepicker(),handled=!1;break;case 13:return sel=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",inst.dpDiv),sel[0]&&$.datepicker._selectDay(event.target,inst.selectedMonth,inst.selectedYear,sel[0]),onSelect=$.datepicker._get(inst,"onSelect"),onSelect?(dateStr=$.datepicker._formatDate(inst),onSelect.apply(inst.input?inst.input[0]:null,[dateStr,inst])):$.datepicker._hideDatepicker(),!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(event.target,event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(event.target,event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths"),"M");break;case 35:(event.ctrlKey||event.metaKey)&&$.datepicker._clearDate(event.target),handled=event.ctrlKey||event.metaKey;break;case 36:(event.ctrlKey||event.metaKey)&&$.datepicker._gotoToday(event.target),handled=event.ctrlKey||event.metaKey;break;case 37:(event.ctrlKey||event.metaKey)&&$.datepicker._adjustDate(event.target,isRTL?1:-1,"D"),handled=event.ctrlKey||event.metaKey,event.originalEvent.altKey&&$.datepicker._adjustDate(event.target,event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths"),"M");break;case 38:(event.ctrlKey||event.metaKey)&&$.datepicker._adjustDate(event.target,-7,"D"),handled=event.ctrlKey||event.metaKey;break;case 39:(event.ctrlKey||event.metaKey)&&$.datepicker._adjustDate(event.target,isRTL?-1:1,"D"),handled=event.ctrlKey||event.metaKey,event.originalEvent.altKey&&$.datepicker._adjustDate(event.target,event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths"),"M");break;case 40:(event.ctrlKey||event.metaKey)&&$.datepicker._adjustDate(event.target,7,"D"),handled=event.ctrlKey||event.metaKey;break;default:handled=!1}else 36===event.keyCode&&event.ctrlKey?$.datepicker._showDatepicker(this):handled=!1;handled&&(event.preventDefault(),event.stopPropagation())},_doKeyPress:function(event){var chars,chr,inst=$.datepicker._getInst(event.target);return $.datepicker._get(inst,"constrainInput")?(chars=$.datepicker._possibleChars($.datepicker._get(inst,"dateFormat")),chr=String.fromCharCode(null==event.charCode?event.keyCode:event.charCode),event.ctrlKey||event.metaKey||" ">chr||!chars||chars.indexOf(chr)>-1):void 0},_doKeyUp:function(event){var date,inst=$.datepicker._getInst(event.target);if(inst.input.val()!==inst.lastVal)try{date=$.datepicker.parseDate($.datepicker._get(inst,"dateFormat"),inst.input?inst.input.val():null,$.datepicker._getFormatConfig(inst)),date&&($.datepicker._setDateFromField(inst),$.datepicker._updateAlternate(inst),$.datepicker._updateDatepicker(inst))}catch(err){}return!0},_showDatepicker:function(input){if(input=input.target||input,"input"!==input.nodeName.toLowerCase()&&(input=$("input",input.parentNode)[0]),!$.datepicker._isDisabledDatepicker(input)&&$.datepicker._lastInput!==input){var inst,beforeShow,beforeShowSettings,isFixed,offset,showAnim,duration;inst=$.datepicker._getInst(input),$.datepicker._curInst&&$.datepicker._curInst!==inst&&($.datepicker._curInst.dpDiv.stop(!0,!0),inst&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0])),beforeShow=$.datepicker._get(inst,"beforeShow"),beforeShowSettings=beforeShow?beforeShow.apply(input,[input,inst]):{},beforeShowSettings!==!1&&(extendRemove(inst.settings,beforeShowSettings),inst.lastVal=null,$.datepicker._lastInput=input,$.datepicker._setDateFromField(inst),$.datepicker._inDialog&&(input.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(input),$.datepicker._pos[1]+=input.offsetHeight),isFixed=!1,$(input).parents().each(function(){return isFixed|="fixed"===$(this).css("position"),!isFixed}),offset={left:$.datepicker._pos[0],top:$.datepicker._pos[1]},$.datepicker._pos=null,inst.dpDiv.empty(),inst.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(inst),offset=$.datepicker._checkOffset(inst,offset,isFixed),inst.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":isFixed?"fixed":"absolute",display:"none",left:offset.left+"px",top:offset.top+"px"}),inst.inline||(showAnim=$.datepicker._get(inst,"showAnim"),duration=$.datepicker._get(inst,"duration"),inst.dpDiv.zIndex($(input).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&$.effects.effect[showAnim]?inst.dpDiv.show(showAnim,$.datepicker._get(inst,"showOptions"),duration):inst.dpDiv[showAnim||"show"](showAnim?duration:null),$.datepicker._shouldFocusInput(inst)&&inst.input.focus(),$.datepicker._curInst=inst))}},_updateDatepicker:function(inst){this.maxRows=4,instActive=inst,inst.dpDiv.empty().append(this._generateHTML(inst)),this._attachHandlers(inst),inst.dpDiv.find("."+this._dayOverClass+" a").mouseover();var origyearshtml,numMonths=this._getNumberOfMonths(inst),cols=numMonths[1],width=17;inst.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),cols>1&&inst.dpDiv.addClass("ui-datepicker-multi-"+cols).css("width",width*cols+"em"),inst.dpDiv[(1!==numMonths[0]||1!==numMonths[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),inst.dpDiv[(this._get(inst,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),inst===$.datepicker._curInst&&$.datepicker._datepickerShowing&&$.datepicker._shouldFocusInput(inst)&&inst.input.focus(),inst.yearshtml&&(origyearshtml=inst.yearshtml,setTimeout(function(){origyearshtml===inst.yearshtml&&inst.yearshtml&&inst.dpDiv.find("select.ui-datepicker-year:first").replaceWith(inst.yearshtml),origyearshtml=inst.yearshtml=null},0))},_shouldFocusInput:function(inst){return inst.input&&inst.input.is(":visible")&&!inst.input.is(":disabled")&&!inst.input.is(":focus")},_checkOffset:function(inst,offset,isFixed){var dpWidth=inst.dpDiv.outerWidth(),dpHeight=inst.dpDiv.outerHeight(),inputWidth=inst.input?inst.input.outerWidth():0,inputHeight=inst.input?inst.input.outerHeight():0,viewWidth=document.documentElement.clientWidth+(isFixed?0:$(document).scrollLeft()),viewHeight=document.documentElement.clientHeight+(isFixed?0:$(document).scrollTop());return offset.left-=this._get(inst,"isRTL")?dpWidth-inputWidth:0,offset.left-=isFixed&&offset.left===inst.input.offset().left?$(document).scrollLeft():0,offset.top-=isFixed&&offset.top===inst.input.offset().top+inputHeight?$(document).scrollTop():0,offset.left-=Math.min(offset.left,offset.left+dpWidth>viewWidth&&viewWidth>dpWidth?Math.abs(offset.left+dpWidth-viewWidth):0),offset.top-=Math.min(offset.top,offset.top+dpHeight>viewHeight&&viewHeight>dpHeight?Math.abs(dpHeight+inputHeight):0),offset},_findPos:function(obj){for(var position,inst=this._getInst(obj),isRTL=this._get(inst,"isRTL");obj&&("hidden"===obj.type||1!==obj.nodeType||$.expr.filters.hidden(obj));)obj=obj[isRTL?"previousSibling":"nextSibling"];return position=$(obj).offset(),[position.left,position.top]},_hideDatepicker:function(input){var showAnim,duration,postProcess,onClose,inst=this._curInst;!inst||input&&inst!==$.data(input,PROP_NAME)||this._datepickerShowing&&(showAnim=this._get(inst,"showAnim"),duration=this._get(inst,"duration"),postProcess=function(){$.datepicker._tidyDialog(inst)},$.effects&&($.effects.effect[showAnim]||$.effects[showAnim])?inst.dpDiv.hide(showAnim,$.datepicker._get(inst,"showOptions"),duration,postProcess):inst.dpDiv["slideDown"===showAnim?"slideUp":"fadeIn"===showAnim?"fadeOut":"hide"](showAnim?duration:null,postProcess),showAnim||postProcess(),this._datepickerShowing=!1,onClose=this._get(inst,"onClose"),onClose&&onClose.apply(inst.input?inst.input[0]:null,[inst.input?inst.input.val():"",inst]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(inst){inst.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(event){if($.datepicker._curInst){var $target=$(event.target),inst=$.datepicker._getInst($target[0]);($target[0].id!==$.datepicker._mainDivId&&0===$target.parents("#"+$.datepicker._mainDivId).length&&!$target.hasClass($.datepicker.markerClassName)&&!$target.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||$target.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!==inst)&&$.datepicker._hideDatepicker()}},_adjustDate:function(id,offset,period){var target=$(id),inst=this._getInst(target[0]);this._isDisabledDatepicker(target[0])||(this._adjustInstDate(inst,offset+("M"===period?this._get(inst,"showCurrentAtPos"):0),period),this._updateDatepicker(inst))},_gotoToday:function(id){var date,target=$(id),inst=this._getInst(target[0]);this._get(inst,"gotoCurrent")&&inst.currentDay?(inst.selectedDay=inst.currentDay,inst.drawMonth=inst.selectedMonth=inst.currentMonth,inst.drawYear=inst.selectedYear=inst.currentYear):(date=new Date,inst.selectedDay=date.getDate(),inst.drawMonth=inst.selectedMonth=date.getMonth(),inst.drawYear=inst.selectedYear=date.getFullYear()),this._notifyChange(inst),this._adjustDate(target)},_selectMonthYear:function(id,select,period){var target=$(id),inst=this._getInst(target[0]);inst["selected"+("M"===period?"Month":"Year")]=inst["draw"+("M"===period?"Month":"Year")]=parseInt(select.options[select.selectedIndex].value,10),this._notifyChange(inst),this._adjustDate(target)},_selectDay:function(id,month,year,td){var inst,target=$(id);$(td).hasClass(this._unselectableClass)||this._isDisabledDatepicker(target[0])||(inst=this._getInst(target[0]),inst.selectedDay=inst.currentDay=$("a",td).html(),inst.selectedMonth=inst.currentMonth=month,inst.selectedYear=inst.currentYear=year,this._selectDate(id,this._formatDate(inst,inst.currentDay,inst.currentMonth,inst.currentYear)))},_clearDate:function(id){var target=$(id);this._selectDate(target,"")},_selectDate:function(id,dateStr){var onSelect,target=$(id),inst=this._getInst(target[0]);dateStr=null!=dateStr?dateStr:this._formatDate(inst),inst.input&&inst.input.val(dateStr),this._updateAlternate(inst),onSelect=this._get(inst,"onSelect"),onSelect?onSelect.apply(inst.input?inst.input[0]:null,[dateStr,inst]):inst.input&&inst.input.trigger("change"),inst.inline?this._updateDatepicker(inst):(this._hideDatepicker(),this._lastInput=inst.input[0],"object"!=typeof inst.input[0]&&inst.input.focus(),this._lastInput=null)},_updateAlternate:function(inst){var altFormat,date,dateStr,altField=this._get(inst,"altField");altField&&(altFormat=this._get(inst,"altFormat")||this._get(inst,"dateFormat"),date=this._getDate(inst),dateStr=this.formatDate(altFormat,date,this._getFormatConfig(inst)),$(altField).each(function(){$(this).val(dateStr)}))},noWeekends:function(date){var day=date.getDay();return[day>0&&6>day,""]},iso8601Week:function(date){var time,checkDate=new Date(date.getTime());return checkDate.setDate(checkDate.getDate()+4-(checkDate.getDay()||7)),time=checkDate.getTime(),checkDate.setMonth(0),checkDate.setDate(1),Math.floor(Math.round((time-checkDate)/864e5)/7)+1},parseDate:function(format,value,settings){if(null==format||null==value)throw"Invalid arguments";if(value="object"==typeof value?value.toString():value+"",""===value)return null;var iFormat,dim,extra,date,iValue=0,shortYearCutoffTemp=(settings?settings.shortYearCutoff:null)||this._defaults.shortYearCutoff,shortYearCutoff="string"!=typeof shortYearCutoffTemp?shortYearCutoffTemp:(new Date).getFullYear()%100+parseInt(shortYearCutoffTemp,10),dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort,dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames,monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort,monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames,year=-1,month=-1,day=-1,doy=-1,literal=!1,lookAhead=function(match){var matches=iFormat+1<format.length&&format.charAt(iFormat+1)===match;
return matches&&iFormat++,matches},getNumber=function(match){var isDoubled=lookAhead(match),size="@"===match?14:"!"===match?20:"y"===match&&isDoubled?4:"o"===match?3:2,digits=new RegExp("^\\d{1,"+size+"}"),num=value.substring(iValue).match(digits);if(!num)throw"Missing number at position "+iValue;return iValue+=num[0].length,parseInt(num[0],10)},getName=function(match,shortNames,longNames){var index=-1,names=$.map(lookAhead(match)?longNames:shortNames,function(v,k){return[[k,v]]}).sort(function(a,b){return-(a[1].length-b[1].length)});if($.each(names,function(i,pair){var name=pair[1];return value.substr(iValue,name.length).toLowerCase()===name.toLowerCase()?(index=pair[0],iValue+=name.length,!1):void 0}),-1!==index)return index+1;throw"Unknown name at position "+iValue},checkLiteral=function(){if(value.charAt(iValue)!==format.charAt(iFormat))throw"Unexpected literal at position "+iValue;iValue++};for(iFormat=0;iFormat<format.length;iFormat++)if(literal)"'"!==format.charAt(iFormat)||lookAhead("'")?checkLiteral():literal=!1;else switch(format.charAt(iFormat)){case"d":day=getNumber("d");break;case"D":getName("D",dayNamesShort,dayNames);break;case"o":doy=getNumber("o");break;case"m":month=getNumber("m");break;case"M":month=getName("M",monthNamesShort,monthNames);break;case"y":year=getNumber("y");break;case"@":date=new Date(getNumber("@")),year=date.getFullYear(),month=date.getMonth()+1,day=date.getDate();break;case"!":date=new Date((getNumber("!")-this._ticksTo1970)/1e4),year=date.getFullYear(),month=date.getMonth()+1,day=date.getDate();break;case"'":lookAhead("'")?checkLiteral():literal=!0;break;default:checkLiteral()}if(iValue<value.length&&(extra=value.substr(iValue),!/^\s+/.test(extra)))throw"Extra/unparsed characters found in date: "+extra;if(-1===year?year=(new Date).getFullYear():100>year&&(year+=(new Date).getFullYear()-(new Date).getFullYear()%100+(shortYearCutoff>=year?0:-100)),doy>-1)for(month=1,day=doy;;){if(dim=this._getDaysInMonth(year,month-1),dim>=day)break;month++,day-=dim}if(date=this._daylightSavingAdjust(new Date(year,month-1,day)),date.getFullYear()!==year||date.getMonth()+1!==month||date.getDate()!==day)throw"Invalid date";return date},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(format,date,settings){if(!date)return"";var iFormat,dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort,dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames,monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort,monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames,lookAhead=function(match){var matches=iFormat+1<format.length&&format.charAt(iFormat+1)===match;return matches&&iFormat++,matches},formatNumber=function(match,value,len){var num=""+value;if(lookAhead(match))for(;num.length<len;)num="0"+num;return num},formatName=function(match,value,shortNames,longNames){return lookAhead(match)?longNames[value]:shortNames[value]},output="",literal=!1;if(date)for(iFormat=0;iFormat<format.length;iFormat++)if(literal)"'"!==format.charAt(iFormat)||lookAhead("'")?output+=format.charAt(iFormat):literal=!1;else switch(format.charAt(iFormat)){case"d":output+=formatNumber("d",date.getDate(),2);break;case"D":output+=formatName("D",date.getDay(),dayNamesShort,dayNames);break;case"o":output+=formatNumber("o",Math.round((new Date(date.getFullYear(),date.getMonth(),date.getDate()).getTime()-new Date(date.getFullYear(),0,0).getTime())/864e5),3);break;case"m":output+=formatNumber("m",date.getMonth()+1,2);break;case"M":output+=formatName("M",date.getMonth(),monthNamesShort,monthNames);break;case"y":output+=lookAhead("y")?date.getFullYear():(date.getYear()%100<10?"0":"")+date.getYear()%100;break;case"@":output+=date.getTime();break;case"!":output+=1e4*date.getTime()+this._ticksTo1970;break;case"'":lookAhead("'")?output+="'":literal=!0;break;default:output+=format.charAt(iFormat)}return output},_possibleChars:function(format){var iFormat,chars="",literal=!1,lookAhead=function(match){var matches=iFormat+1<format.length&&format.charAt(iFormat+1)===match;return matches&&iFormat++,matches};for(iFormat=0;iFormat<format.length;iFormat++)if(literal)"'"!==format.charAt(iFormat)||lookAhead("'")?chars+=format.charAt(iFormat):literal=!1;else switch(format.charAt(iFormat)){case"d":case"m":case"y":case"@":chars+="0123456789";break;case"D":case"M":return null;case"'":lookAhead("'")?chars+="'":literal=!0;break;default:chars+=format.charAt(iFormat)}return chars},_get:function(inst,name){return inst.settings[name]!==undefined?inst.settings[name]:this._defaults[name]},_setDateFromField:function(inst,noDefault){if(inst.input.val()!==inst.lastVal){var dateFormat=this._get(inst,"dateFormat"),dates=inst.lastVal=inst.input?inst.input.val():null,defaultDate=this._getDefaultDate(inst),date=defaultDate,settings=this._getFormatConfig(inst);try{date=this.parseDate(dateFormat,dates,settings)||defaultDate}catch(event){dates=noDefault?"":dates}inst.selectedDay=date.getDate(),inst.drawMonth=inst.selectedMonth=date.getMonth(),inst.drawYear=inst.selectedYear=date.getFullYear(),inst.currentDay=dates?date.getDate():0,inst.currentMonth=dates?date.getMonth():0,inst.currentYear=dates?date.getFullYear():0,this._adjustInstDate(inst)}},_getDefaultDate:function(inst){return this._restrictMinMax(inst,this._determineDate(inst,this._get(inst,"defaultDate"),new Date))},_determineDate:function(inst,date,defaultDate){var offsetNumeric=function(offset){var date=new Date;return date.setDate(date.getDate()+offset),date},offsetString=function(offset){try{return $.datepicker.parseDate($.datepicker._get(inst,"dateFormat"),offset,$.datepicker._getFormatConfig(inst))}catch(e){}for(var date=(offset.toLowerCase().match(/^c/)?$.datepicker._getDate(inst):null)||new Date,year=date.getFullYear(),month=date.getMonth(),day=date.getDate(),pattern=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,matches=pattern.exec(offset);matches;){switch(matches[2]||"d"){case"d":case"D":day+=parseInt(matches[1],10);break;case"w":case"W":day+=7*parseInt(matches[1],10);break;case"m":case"M":month+=parseInt(matches[1],10),day=Math.min(day,$.datepicker._getDaysInMonth(year,month));break;case"y":case"Y":year+=parseInt(matches[1],10),day=Math.min(day,$.datepicker._getDaysInMonth(year,month))}matches=pattern.exec(offset)}return new Date(year,month,day)},newDate=null==date||""===date?defaultDate:"string"==typeof date?offsetString(date):"number"==typeof date?isNaN(date)?defaultDate:offsetNumeric(date):new Date(date.getTime());return newDate=newDate&&"Invalid Date"===newDate.toString()?defaultDate:newDate,newDate&&(newDate.setHours(0),newDate.setMinutes(0),newDate.setSeconds(0),newDate.setMilliseconds(0)),this._daylightSavingAdjust(newDate)},_daylightSavingAdjust:function(date){return date?(date.setHours(date.getHours()>12?date.getHours()+2:0),date):null},_setDate:function(inst,date,noChange){var clear=!date,origMonth=inst.selectedMonth,origYear=inst.selectedYear,newDate=this._restrictMinMax(inst,this._determineDate(inst,date,new Date));inst.selectedDay=inst.currentDay=newDate.getDate(),inst.drawMonth=inst.selectedMonth=inst.currentMonth=newDate.getMonth(),inst.drawYear=inst.selectedYear=inst.currentYear=newDate.getFullYear(),origMonth===inst.selectedMonth&&origYear===inst.selectedYear||noChange||this._notifyChange(inst),this._adjustInstDate(inst),inst.input&&inst.input.val(clear?"":this._formatDate(inst))},_getDate:function(inst){var startDate=!inst.currentYear||inst.input&&""===inst.input.val()?null:this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay));return startDate},_attachHandlers:function(inst){var stepMonths=this._get(inst,"stepMonths"),id="#"+inst.id.replace(/\\\\/g,"\\");inst.dpDiv.find("[data-handler]").map(function(){var handler={prev:function(){$.datepicker._adjustDate(id,-stepMonths,"M")},next:function(){$.datepicker._adjustDate(id,+stepMonths,"M")},hide:function(){$.datepicker._hideDatepicker()},today:function(){$.datepicker._gotoToday(id)},selectDay:function(){return $.datepicker._selectDay(id,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return $.datepicker._selectMonthYear(id,this,"M"),!1},selectYear:function(){return $.datepicker._selectMonthYear(id,this,"Y"),!1}};$(this).bind(this.getAttribute("data-event"),handler[this.getAttribute("data-handler")])})},_generateHTML:function(inst){var maxDraw,prevText,prev,nextText,next,currentText,gotoDate,controls,buttonPanel,firstDay,showWeek,dayNames,dayNamesMin,monthNames,monthNamesShort,beforeShowDay,showOtherMonths,selectOtherMonths,defaultDate,html,dow,row,group,col,selectedDate,cornerClass,calender,thead,day,daysInMonth,leadDays,curRows,numRows,printDate,dRow,tbody,daySettings,otherMonth,unselectable,tempDate=new Date,today=this._daylightSavingAdjust(new Date(tempDate.getFullYear(),tempDate.getMonth(),tempDate.getDate())),isRTL=this._get(inst,"isRTL"),showButtonPanel=this._get(inst,"showButtonPanel"),hideIfNoPrevNext=this._get(inst,"hideIfNoPrevNext"),navigationAsDateFormat=this._get(inst,"navigationAsDateFormat"),numMonths=this._getNumberOfMonths(inst),showCurrentAtPos=this._get(inst,"showCurrentAtPos"),stepMonths=this._get(inst,"stepMonths"),isMultiMonth=1!==numMonths[0]||1!==numMonths[1],currentDate=this._daylightSavingAdjust(inst.currentDay?new Date(inst.currentYear,inst.currentMonth,inst.currentDay):new Date(9999,9,9)),minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),drawMonth=inst.drawMonth-showCurrentAtPos,drawYear=inst.drawYear;if(0>drawMonth&&(drawMonth+=12,drawYear--),maxDate)for(maxDraw=this._daylightSavingAdjust(new Date(maxDate.getFullYear(),maxDate.getMonth()-numMonths[0]*numMonths[1]+1,maxDate.getDate())),maxDraw=minDate&&minDate>maxDraw?minDate:maxDraw;this._daylightSavingAdjust(new Date(drawYear,drawMonth,1))>maxDraw;)drawMonth--,0>drawMonth&&(drawMonth=11,drawYear--);for(inst.drawMonth=drawMonth,inst.drawYear=drawYear,prevText=this._get(inst,"prevText"),prevText=navigationAsDateFormat?this.formatDate(prevText,this._daylightSavingAdjust(new Date(drawYear,drawMonth-stepMonths,1)),this._getFormatConfig(inst)):prevText,prev=this._canAdjustMonth(inst,-1,drawYear,drawMonth)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+prevText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"e":"w")+"'>"+prevText+"</span></a>":hideIfNoPrevNext?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+prevText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"e":"w")+"'>"+prevText+"</span></a>",nextText=this._get(inst,"nextText"),nextText=navigationAsDateFormat?this.formatDate(nextText,this._daylightSavingAdjust(new Date(drawYear,drawMonth+stepMonths,1)),this._getFormatConfig(inst)):nextText,next=this._canAdjustMonth(inst,1,drawYear,drawMonth)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+nextText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"w":"e")+"'>"+nextText+"</span></a>":hideIfNoPrevNext?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+nextText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"w":"e")+"'>"+nextText+"</span></a>",currentText=this._get(inst,"currentText"),gotoDate=this._get(inst,"gotoCurrent")&&inst.currentDay?currentDate:today,currentText=navigationAsDateFormat?this.formatDate(currentText,gotoDate,this._getFormatConfig(inst)):currentText,controls=inst.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(inst,"closeText")+"</button>",buttonPanel=showButtonPanel?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(isRTL?controls:"")+(this._isInRange(inst,gotoDate)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+currentText+"</button>":"")+(isRTL?"":controls)+"</div>":"",firstDay=parseInt(this._get(inst,"firstDay"),10),firstDay=isNaN(firstDay)?0:firstDay,showWeek=this._get(inst,"showWeek"),dayNames=this._get(inst,"dayNames"),dayNamesMin=this._get(inst,"dayNamesMin"),monthNames=this._get(inst,"monthNames"),monthNamesShort=this._get(inst,"monthNamesShort"),beforeShowDay=this._get(inst,"beforeShowDay"),showOtherMonths=this._get(inst,"showOtherMonths"),selectOtherMonths=this._get(inst,"selectOtherMonths"),defaultDate=this._getDefaultDate(inst),html="",row=0;row<numMonths[0];row++){for(group="",this.maxRows=4,col=0;col<numMonths[1];col++){if(selectedDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,inst.selectedDay)),cornerClass=" ui-corner-all",calender="",isMultiMonth){if(calender+="<div class='ui-datepicker-group",numMonths[1]>1)switch(col){case 0:calender+=" ui-datepicker-group-first",cornerClass=" ui-corner-"+(isRTL?"right":"left");break;case numMonths[1]-1:calender+=" ui-datepicker-group-last",cornerClass=" ui-corner-"+(isRTL?"left":"right");break;default:calender+=" ui-datepicker-group-middle",cornerClass=""}calender+="'>"}for(calender+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+cornerClass+"'>"+(/all|left/.test(cornerClass)&&0===row?isRTL?next:prev:"")+(/all|right/.test(cornerClass)&&0===row?isRTL?prev:next:"")+this._generateMonthYearHeader(inst,drawMonth,drawYear,minDate,maxDate,row>0||col>0,monthNames,monthNamesShort)+"</div><table class='ui-datepicker-calendar'><thead><tr>",thead=showWeek?"<th class='ui-datepicker-week-col'>"+this._get(inst,"weekHeader")+"</th>":"",dow=0;7>dow;dow++)day=(dow+firstDay)%7,thead+="<th"+((dow+firstDay+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+dayNames[day]+"'>"+dayNamesMin[day]+"</span></th>";for(calender+=thead+"</tr></thead><tbody>",daysInMonth=this._getDaysInMonth(drawYear,drawMonth),drawYear===inst.selectedYear&&drawMonth===inst.selectedMonth&&(inst.selectedDay=Math.min(inst.selectedDay,daysInMonth)),leadDays=(this._getFirstDayOfMonth(drawYear,drawMonth)-firstDay+7)%7,curRows=Math.ceil((leadDays+daysInMonth)/7),numRows=isMultiMonth&&this.maxRows>curRows?this.maxRows:curRows,this.maxRows=numRows,printDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,1-leadDays)),dRow=0;numRows>dRow;dRow++){for(calender+="<tr>",tbody=showWeek?"<td class='ui-datepicker-week-col'>"+this._get(inst,"calculateWeek")(printDate)+"</td>":"",dow=0;7>dow;dow++)daySettings=beforeShowDay?beforeShowDay.apply(inst.input?inst.input[0]:null,[printDate]):[!0,""],otherMonth=printDate.getMonth()!==drawMonth,unselectable=otherMonth&&!selectOtherMonths||!daySettings[0]||minDate&&minDate>printDate||maxDate&&printDate>maxDate,tbody+="<td class='"+((dow+firstDay+6)%7>=5?" ui-datepicker-week-end":"")+(otherMonth?" ui-datepicker-other-month":"")+(printDate.getTime()===selectedDate.getTime()&&drawMonth===inst.selectedMonth&&inst._keyEvent||defaultDate.getTime()===printDate.getTime()&&defaultDate.getTime()===selectedDate.getTime()?" "+this._dayOverClass:"")+(unselectable?" "+this._unselectableClass+" ui-state-disabled":"")+(otherMonth&&!showOtherMonths?"":" "+daySettings[1]+(printDate.getTime()===currentDate.getTime()?" "+this._currentClass:"")+(printDate.getTime()===today.getTime()?" ui-datepicker-today":""))+"'"+(otherMonth&&!showOtherMonths||!daySettings[2]?"":" title='"+daySettings[2].replace(/'/g,"&#39;")+"'")+(unselectable?"":" data-handler='selectDay' data-event='click' data-month='"+printDate.getMonth()+"' data-year='"+printDate.getFullYear()+"'")+">"+(otherMonth&&!showOtherMonths?"&#xa0;":unselectable?"<span class='ui-state-default'>"+printDate.getDate()+"</span>":"<a class='ui-state-default"+(printDate.getTime()===today.getTime()?" ui-state-highlight":"")+(printDate.getTime()===currentDate.getTime()?" ui-state-active":"")+(otherMonth?" ui-priority-secondary":"")+"' href='#'>"+printDate.getDate()+"</a>")+"</td>",printDate.setDate(printDate.getDate()+1),printDate=this._daylightSavingAdjust(printDate);calender+=tbody+"</tr>"}drawMonth++,drawMonth>11&&(drawMonth=0,drawYear++),calender+="</tbody></table>"+(isMultiMonth?"</div>"+(numMonths[0]>0&&col===numMonths[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),group+=calender}html+=group}return html+=buttonPanel,inst._keyEvent=!1,html},_generateMonthYearHeader:function(inst,drawMonth,drawYear,minDate,maxDate,secondary,monthNames,monthNamesShort){var inMinYear,inMaxYear,month,years,thisYear,determineYear,year,endYear,changeMonth=this._get(inst,"changeMonth"),changeYear=this._get(inst,"changeYear"),showMonthAfterYear=this._get(inst,"showMonthAfterYear"),html="<div class='ui-datepicker-title'>",monthHtml="";if(secondary||!changeMonth)monthHtml+="<span class='ui-datepicker-month'>"+monthNames[drawMonth]+"</span>";else{for(inMinYear=minDate&&minDate.getFullYear()===drawYear,inMaxYear=maxDate&&maxDate.getFullYear()===drawYear,monthHtml+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",month=0;12>month;month++)(!inMinYear||month>=minDate.getMonth())&&(!inMaxYear||month<=maxDate.getMonth())&&(monthHtml+="<option value='"+month+"'"+(month===drawMonth?" selected='selected'":"")+">"+monthNamesShort[month]+"</option>");monthHtml+="</select>"}if(showMonthAfterYear||(html+=monthHtml+(!secondary&&changeMonth&&changeYear?"":"&#xa0;")),!inst.yearshtml)if(inst.yearshtml="",secondary||!changeYear)html+="<span class='ui-datepicker-year'>"+drawYear+"</span>";else{for(years=this._get(inst,"yearRange").split(":"),thisYear=(new Date).getFullYear(),determineYear=function(value){var year=value.match(/c[+\-].*/)?drawYear+parseInt(value.substring(1),10):value.match(/[+\-].*/)?thisYear+parseInt(value,10):parseInt(value,10);return isNaN(year)?thisYear:year},year=determineYear(years[0]),endYear=Math.max(year,determineYear(years[1]||"")),year=minDate?Math.max(year,minDate.getFullYear()):year,endYear=maxDate?Math.min(endYear,maxDate.getFullYear()):endYear,inst.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";endYear>=year;year++)inst.yearshtml+="<option value='"+year+"'"+(year===drawYear?" selected='selected'":"")+">"+year+"</option>";inst.yearshtml+="</select>",html+=inst.yearshtml,inst.yearshtml=null}return html+=this._get(inst,"yearSuffix"),showMonthAfterYear&&(html+=(!secondary&&changeMonth&&changeYear?"":"&#xa0;")+monthHtml),html+="</div>"},_adjustInstDate:function(inst,offset,period){var year=inst.drawYear+("Y"===period?offset:0),month=inst.drawMonth+("M"===period?offset:0),day=Math.min(inst.selectedDay,this._getDaysInMonth(year,month))+("D"===period?offset:0),date=this._restrictMinMax(inst,this._daylightSavingAdjust(new Date(year,month,day)));inst.selectedDay=date.getDate(),inst.drawMonth=inst.selectedMonth=date.getMonth(),inst.drawYear=inst.selectedYear=date.getFullYear(),("M"===period||"Y"===period)&&this._notifyChange(inst)},_restrictMinMax:function(inst,date){var minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),newDate=minDate&&minDate>date?minDate:date;return maxDate&&newDate>maxDate?maxDate:newDate},_notifyChange:function(inst){var onChange=this._get(inst,"onChangeMonthYear");onChange&&onChange.apply(inst.input?inst.input[0]:null,[inst.selectedYear,inst.selectedMonth+1,inst])},_getNumberOfMonths:function(inst){var numMonths=this._get(inst,"numberOfMonths");return null==numMonths?[1,1]:"number"==typeof numMonths?[1,numMonths]:numMonths},_getMinMaxDate:function(inst,minMax){return this._determineDate(inst,this._get(inst,minMax+"Date"),null)},_getDaysInMonth:function(year,month){return 32-this._daylightSavingAdjust(new Date(year,month,32)).getDate()},_getFirstDayOfMonth:function(year,month){return new Date(year,month,1).getDay()},_canAdjustMonth:function(inst,offset,curYear,curMonth){var numMonths=this._getNumberOfMonths(inst),date=this._daylightSavingAdjust(new Date(curYear,curMonth+(0>offset?offset:numMonths[0]*numMonths[1]),1));return 0>offset&&date.setDate(this._getDaysInMonth(date.getFullYear(),date.getMonth())),this._isInRange(inst,date)},_isInRange:function(inst,date){var yearSplit,currentYear,minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),minYear=null,maxYear=null,years=this._get(inst,"yearRange");return years&&(yearSplit=years.split(":"),currentYear=(new Date).getFullYear(),minYear=parseInt(yearSplit[0],10),maxYear=parseInt(yearSplit[1],10),yearSplit[0].match(/[+\-].*/)&&(minYear+=currentYear),yearSplit[1].match(/[+\-].*/)&&(maxYear+=currentYear)),(!minDate||date.getTime()>=minDate.getTime())&&(!maxDate||date.getTime()<=maxDate.getTime())&&(!minYear||date.getFullYear()>=minYear)&&(!maxYear||date.getFullYear()<=maxYear)},_getFormatConfig:function(inst){var shortYearCutoff=this._get(inst,"shortYearCutoff");return shortYearCutoff="string"!=typeof shortYearCutoff?shortYearCutoff:(new Date).getFullYear()%100+parseInt(shortYearCutoff,10),{shortYearCutoff:shortYearCutoff,dayNamesShort:this._get(inst,"dayNamesShort"),dayNames:this._get(inst,"dayNames"),monthNamesShort:this._get(inst,"monthNamesShort"),monthNames:this._get(inst,"monthNames")}},_formatDate:function(inst,day,month,year){day||(inst.currentDay=inst.selectedDay,inst.currentMonth=inst.selectedMonth,inst.currentYear=inst.selectedYear);var date=day?"object"==typeof day?day:this._daylightSavingAdjust(new Date(year,month,day)):this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay));return this.formatDate(this._get(inst,"dateFormat"),date,this._getFormatConfig(inst))}}),$.fn.datepicker=function(options){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick),$.datepicker.initialized=!0),0===$("#"+$.datepicker._mainDivId).length&&$("body").append($.datepicker.dpDiv);var otherArgs=Array.prototype.slice.call(arguments,1);return"string"!=typeof options||"isDisabled"!==options&&"getDate"!==options&&"widget"!==options?"option"===options&&2===arguments.length&&"string"==typeof arguments[1]?$.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs)):this.each(function(){"string"==typeof options?$.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this].concat(otherArgs)):$.datepicker._attachDatepicker(this,options)}):$.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.10.3"}(jQuery),function($){var sizeRelatedOptions={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};$.widget("ui.dialog",{version:"1.10.3",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(pos){var topOffset=$(this).css(pos).offset().top;0>topOffset&&$(this).css("top",pos.top-topOffset)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&$.fn.draggable&&this._makeDraggable(),this.options.resizable&&$.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var element=this.options.appendTo;return element&&(element.jquery||element.nodeType)?$(element):this.document.find(element||"body").eq(0)},_destroy:function(){var next,originalPosition=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),next=originalPosition.parent.children().eq(originalPosition.index),next.length&&next[0]!==this.element[0]?next.before(this.element):originalPosition.parent.append(this.element)},widget:function(){return this.uiDialog},disable:$.noop,enable:$.noop,close:function(event){var that=this;this._isOpen&&this._trigger("beforeClose",event)!==!1&&(this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||$(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,function(){that._trigger("close",event)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(event,silent){var moved=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return moved&&!silent&&this._trigger("focus",event),moved},open:function(){var that=this;return this._isOpen?void(this._moveToTop()&&this._focusTabbable()):(this._isOpen=!0,this.opener=$(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){that._focusTabbable(),that._trigger("focus")}),void this._trigger("open"))},_focusTabbable:function(){var hasFocus=this.element.find("[autofocus]");hasFocus.length||(hasFocus=this.element.find(":tabbable")),hasFocus.length||(hasFocus=this.uiDialogButtonPane.find(":tabbable")),hasFocus.length||(hasFocus=this.uiDialogTitlebarClose.filter(":tabbable")),hasFocus.length||(hasFocus=this.uiDialog),hasFocus.eq(0).focus()},_keepFocus:function(event){function checkFocus(){var activeElement=this.document[0].activeElement,isActive=this.uiDialog[0]===activeElement||$.contains(this.uiDialog[0],activeElement);isActive||this._focusTabbable()}event.preventDefault(),checkFocus.call(this),this._delay(checkFocus)},_createWrapper:function(){this.uiDialog=$("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(event){if(this.options.closeOnEscape&&!event.isDefaultPrevented()&&event.keyCode&&event.keyCode===$.ui.keyCode.ESCAPE)return event.preventDefault(),void this.close(event);if(event.keyCode===$.ui.keyCode.TAB){var tabbables=this.uiDialog.find(":tabbable"),first=tabbables.filter(":first"),last=tabbables.filter(":last");event.target!==last[0]&&event.target!==this.uiDialog[0]||event.shiftKey?event.target!==first[0]&&event.target!==this.uiDialog[0]||!event.shiftKey||(last.focus(1),event.preventDefault()):(first.focus(1),event.preventDefault())}},mousedown:function(event){this._moveToTop(event)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var uiDialogTitle;this.uiDialogTitlebar=$("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(event){$(event.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=$("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(event){event.preventDefault(),this.close(event)}}),uiDialogTitle=$("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(uiDialogTitle),this.uiDialog.attr({"aria-labelledby":uiDialogTitle.attr("id")})},_title:function(title){this.options.title||title.html("&#160;"),title.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=$("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=$("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var that=this,buttons=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),$.isEmptyObject(buttons)||$.isArray(buttons)&&!buttons.length?void this.uiDialog.removeClass("ui-dialog-buttons"):($.each(buttons,function(name,props){var click,buttonOptions;props=$.isFunction(props)?{click:props,text:name}:props,props=$.extend({type:"button"},props),click=props.click,props.click=function(){click.apply(that.element[0],arguments)},buttonOptions={icons:props.icons,text:props.showText},delete props.icons,delete props.showText,$("<button></button>",props).button(buttonOptions).appendTo(that.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),void this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function filteredUi(ui){return{position:ui.position,offset:ui.offset}}var that=this,options=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(event,ui){$(this).addClass("ui-dialog-dragging"),that._blockFrames(),that._trigger("dragStart",event,filteredUi(ui))},drag:function(event,ui){that._trigger("drag",event,filteredUi(ui))},stop:function(event,ui){options.position=[ui.position.left-that.document.scrollLeft(),ui.position.top-that.document.scrollTop()],$(this).removeClass("ui-dialog-dragging"),that._unblockFrames(),that._trigger("dragStop",event,filteredUi(ui))}})},_makeResizable:function(){function filteredUi(ui){return{originalPosition:ui.originalPosition,originalSize:ui.originalSize,position:ui.position,size:ui.size}}var that=this,options=this.options,handles=options.resizable,position=this.uiDialog.css("position"),resizeHandles="string"==typeof handles?handles:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:options.maxWidth,maxHeight:options.maxHeight,minWidth:options.minWidth,minHeight:this._minHeight(),handles:resizeHandles,start:function(event,ui){$(this).addClass("ui-dialog-resizing"),that._blockFrames(),that._trigger("resizeStart",event,filteredUi(ui))},resize:function(event,ui){that._trigger("resize",event,filteredUi(ui))},stop:function(event,ui){options.height=$(this).height(),options.width=$(this).width(),$(this).removeClass("ui-dialog-resizing"),that._unblockFrames(),that._trigger("resizeStop",event,filteredUi(ui))}}).css("position",position)},_minHeight:function(){var options=this.options;return"auto"===options.height?options.minHeight:Math.min(options.minHeight,options.height)},_position:function(){var isVisible=this.uiDialog.is(":visible");isVisible||this.uiDialog.show(),this.uiDialog.position(this.options.position),isVisible||this.uiDialog.hide()},_setOptions:function(options){var that=this,resize=!1,resizableOptions={};$.each(options,function(key,value){that._setOption(key,value),key in sizeRelatedOptions&&(resize=!0),key in resizableRelatedOptions&&(resizableOptions[key]=value)}),resize&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",resizableOptions)},_setOption:function(key,value){var isDraggable,isResizable,uiDialog=this.uiDialog;
"dialogClass"===key&&uiDialog.removeClass(this.options.dialogClass).addClass(value),"disabled"!==key&&(this._super(key,value),"appendTo"===key&&this.uiDialog.appendTo(this._appendTo()),"buttons"===key&&this._createButtons(),"closeText"===key&&this.uiDialogTitlebarClose.button({label:""+value}),"draggable"===key&&(isDraggable=uiDialog.is(":data(ui-draggable)"),isDraggable&&!value&&uiDialog.draggable("destroy"),!isDraggable&&value&&this._makeDraggable()),"position"===key&&this._position(),"resizable"===key&&(isResizable=uiDialog.is(":data(ui-resizable)"),isResizable&&!value&&uiDialog.resizable("destroy"),isResizable&&"string"==typeof value&&uiDialog.resizable("option","handles",value),isResizable||value===!1||this._makeResizable()),"title"===key&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var nonContentHeight,minContentHeight,maxContentHeight,options=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),options.minWidth>options.width&&(options.width=options.minWidth),nonContentHeight=this.uiDialog.css({height:"auto",width:options.width}).outerHeight(),minContentHeight=Math.max(0,options.minHeight-nonContentHeight),maxContentHeight="number"==typeof options.maxHeight?Math.max(0,options.maxHeight-nonContentHeight):"none","auto"===options.height?this.element.css({minHeight:minContentHeight,maxHeight:maxContentHeight,height:"auto"}):this.element.height(Math.max(0,options.height-nonContentHeight)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var iframe=$(this);return $("<div>").css({position:"absolute",width:iframe.outerWidth(),height:iframe.outerHeight()}).appendTo(iframe.parent()).offset(iframe.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(event){return $(event.target).closest(".ui-dialog").length?!0:!!$(event.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var that=this,widgetFullName=this.widgetFullName;$.ui.dialog.overlayInstances||this._delay(function(){$.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(event){that._allowInteraction(event)||(event.preventDefault(),$(".ui-dialog:visible:last .ui-dialog-content").data(widgetFullName)._focusTabbable())})}),this.overlay=$("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),$.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&($.ui.dialog.overlayInstances--,$.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),$.ui.dialog.overlayInstances=0,$.uiBackCompat!==!1&&$.widget("ui.dialog",$.ui.dialog,{_position:function(){var isVisible,position=this.options.position,myAt=[],offset=[0,0];position?(("string"==typeof position||"object"==typeof position&&"0"in position)&&(myAt=position.split?position.split(" "):[position[0],position[1]],1===myAt.length&&(myAt[1]=myAt[0]),$.each(["left","top"],function(i,offsetPosition){+myAt[i]===myAt[i]&&(offset[i]=myAt[i],myAt[i]=offsetPosition)}),position={my:myAt[0]+(offset[0]<0?offset[0]:"+"+offset[0])+" "+myAt[1]+(offset[1]<0?offset[1]:"+"+offset[1]),at:myAt.join(" ")}),position=$.extend({},$.ui.dialog.prototype.options.position,position)):position=$.ui.dialog.prototype.options.position,isVisible=this.uiDialog.is(":visible"),isVisible||this.uiDialog.show(),this.uiDialog.position(position),isVisible||this.uiDialog.hide()}})}(jQuery),function($){var rvertical=/up|down|vertical/,rpositivemotion=/up|left|vertical|horizontal/;$.effects.effect.blind=function(o,done){var wrapper,distance,margin,el=$(this),props=["position","top","bottom","left","right","height","width"],mode=$.effects.setMode(el,o.mode||"hide"),direction=o.direction||"up",vertical=rvertical.test(direction),ref=vertical?"height":"width",ref2=vertical?"top":"left",motion=rpositivemotion.test(direction),animation={},show="show"===mode;el.parent().is(".ui-effects-wrapper")?$.effects.save(el.parent(),props):$.effects.save(el,props),el.show(),wrapper=$.effects.createWrapper(el).css({overflow:"hidden"}),distance=wrapper[ref](),margin=parseFloat(wrapper.css(ref2))||0,animation[ref]=show?distance:0,motion||(el.css(vertical?"bottom":"right",0).css(vertical?"top":"left","auto").css({position:"absolute"}),animation[ref2]=show?margin:distance+margin),show&&(wrapper.css(ref,0),motion||wrapper.css(ref2,margin+distance)),wrapper.animate(animation,{duration:o.duration,easing:o.easing,queue:!1,complete:function(){"hide"===mode&&el.hide(),$.effects.restore(el,props),$.effects.removeWrapper(el),done()}})}}(jQuery),function($){$.effects.effect.bounce=function(o,done){var i,upAnim,downAnim,el=$(this),props=["position","top","bottom","left","right","height","width"],mode=$.effects.setMode(el,o.mode||"effect"),hide="hide"===mode,show="show"===mode,direction=o.direction||"up",distance=o.distance,times=o.times||5,anims=2*times+(show||hide?1:0),speed=o.duration/anims,easing=o.easing,ref="up"===direction||"down"===direction?"top":"left",motion="up"===direction||"left"===direction,queue=el.queue(),queuelen=queue.length;for((show||hide)&&props.push("opacity"),$.effects.save(el,props),el.show(),$.effects.createWrapper(el),distance||(distance=el["top"===ref?"outerHeight":"outerWidth"]()/3),show&&(downAnim={opacity:1},downAnim[ref]=0,el.css("opacity",0).css(ref,motion?2*-distance:2*distance).animate(downAnim,speed,easing)),hide&&(distance/=Math.pow(2,times-1)),downAnim={},downAnim[ref]=0,i=0;times>i;i++)upAnim={},upAnim[ref]=(motion?"-=":"+=")+distance,el.animate(upAnim,speed,easing).animate(downAnim,speed,easing),distance=hide?2*distance:distance/2;hide&&(upAnim={opacity:0},upAnim[ref]=(motion?"-=":"+=")+distance,el.animate(upAnim,speed,easing)),el.queue(function(){hide&&el.hide(),$.effects.restore(el,props),$.effects.removeWrapper(el),done()}),queuelen>1&&queue.splice.apply(queue,[1,0].concat(queue.splice(queuelen,anims+1))),el.dequeue()}}(jQuery),function($){$.effects.effect.clip=function(o,done){var wrapper,animate,distance,el=$(this),props=["position","top","bottom","left","right","height","width"],mode=$.effects.setMode(el,o.mode||"hide"),show="show"===mode,direction=o.direction||"vertical",vert="vertical"===direction,size=vert?"height":"width",position=vert?"top":"left",animation={};$.effects.save(el,props),el.show(),wrapper=$.effects.createWrapper(el).css({overflow:"hidden"}),animate="IMG"===el[0].tagName?wrapper:el,distance=animate[size](),show&&(animate.css(size,0),animate.css(position,distance/2)),animation[size]=show?distance:0,animation[position]=show?0:distance/2,animate.animate(animation,{queue:!1,duration:o.duration,easing:o.easing,complete:function(){show||el.hide(),$.effects.restore(el,props),$.effects.removeWrapper(el),done()}})}}(jQuery),function($){$.effects.effect.drop=function(o,done){var distance,el=$(this),props=["position","top","bottom","left","right","opacity","height","width"],mode=$.effects.setMode(el,o.mode||"hide"),show="show"===mode,direction=o.direction||"left",ref="up"===direction||"down"===direction?"top":"left",motion="up"===direction||"left"===direction?"pos":"neg",animation={opacity:show?1:0};$.effects.save(el,props),el.show(),$.effects.createWrapper(el),distance=o.distance||el["top"===ref?"outerHeight":"outerWidth"](!0)/2,show&&el.css("opacity",0).css(ref,"pos"===motion?-distance:distance),animation[ref]=(show?"pos"===motion?"+=":"-=":"pos"===motion?"-=":"+=")+distance,el.animate(animation,{queue:!1,duration:o.duration,easing:o.easing,complete:function(){"hide"===mode&&el.hide(),$.effects.restore(el,props),$.effects.removeWrapper(el),done()}})}}(jQuery),function($){$.effects.effect.explode=function(o,done){function childComplete(){pieces.push(this),pieces.length===rows*cells&&animComplete()}function animComplete(){el.css({visibility:"visible"}),$(pieces).remove(),show||el.hide(),done()}var i,j,left,top,mx,my,rows=o.pieces?Math.round(Math.sqrt(o.pieces)):3,cells=rows,el=$(this),mode=$.effects.setMode(el,o.mode||"hide"),show="show"===mode,offset=el.show().css("visibility","hidden").offset(),width=Math.ceil(el.outerWidth()/cells),height=Math.ceil(el.outerHeight()/rows),pieces=[];for(i=0;rows>i;i++)for(top=offset.top+i*height,my=i-(rows-1)/2,j=0;cells>j;j++)left=offset.left+j*width,mx=j-(cells-1)/2,el.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-j*width,top:-i*height}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:width,height:height,left:left+(show?mx*width:0),top:top+(show?my*height:0),opacity:show?0:1}).animate({left:left+(show?0:mx*width),top:top+(show?0:my*height),opacity:show?1:0},o.duration||500,o.easing,childComplete)}}(jQuery),function($){$.effects.effect.fade=function(o,done){var el=$(this),mode=$.effects.setMode(el,o.mode||"toggle");el.animate({opacity:mode},{queue:!1,duration:o.duration,easing:o.easing,complete:done})}}(jQuery),function($){$.effects.effect.fold=function(o,done){var wrapper,distance,el=$(this),props=["position","top","bottom","left","right","height","width"],mode=$.effects.setMode(el,o.mode||"hide"),show="show"===mode,hide="hide"===mode,size=o.size||15,percent=/([0-9]+)%/.exec(size),horizFirst=!!o.horizFirst,widthFirst=show!==horizFirst,ref=widthFirst?["width","height"]:["height","width"],duration=o.duration/2,animation1={},animation2={};$.effects.save(el,props),el.show(),wrapper=$.effects.createWrapper(el).css({overflow:"hidden"}),distance=widthFirst?[wrapper.width(),wrapper.height()]:[wrapper.height(),wrapper.width()],percent&&(size=parseInt(percent[1],10)/100*distance[hide?0:1]),show&&wrapper.css(horizFirst?{height:0,width:size}:{height:size,width:0}),animation1[ref[0]]=show?distance[0]:size,animation2[ref[1]]=show?distance[1]:0,wrapper.animate(animation1,duration,o.easing).animate(animation2,duration,o.easing,function(){hide&&el.hide(),$.effects.restore(el,props),$.effects.removeWrapper(el),done()})}}(jQuery),function($){$.effects.effect.highlight=function(o,done){var elem=$(this),props=["backgroundImage","backgroundColor","opacity"],mode=$.effects.setMode(elem,o.mode||"show"),animation={backgroundColor:elem.css("backgroundColor")};"hide"===mode&&(animation.opacity=0),$.effects.save(elem,props),elem.show().css({backgroundImage:"none",backgroundColor:o.color||"#ffff99"}).animate(animation,{queue:!1,duration:o.duration,easing:o.easing,complete:function(){"hide"===mode&&elem.hide(),$.effects.restore(elem,props),done()}})}}(jQuery),function($){$.effects.effect.pulsate=function(o,done){var i,elem=$(this),mode=$.effects.setMode(elem,o.mode||"show"),show="show"===mode,hide="hide"===mode,showhide=show||"hide"===mode,anims=2*(o.times||5)+(showhide?1:0),duration=o.duration/anims,animateTo=0,queue=elem.queue(),queuelen=queue.length;for((show||!elem.is(":visible"))&&(elem.css("opacity",0).show(),animateTo=1),i=1;anims>i;i++)elem.animate({opacity:animateTo},duration,o.easing),animateTo=1-animateTo;elem.animate({opacity:animateTo},duration,o.easing),elem.queue(function(){hide&&elem.hide(),done()}),queuelen>1&&queue.splice.apply(queue,[1,0].concat(queue.splice(queuelen,anims+1))),elem.dequeue()}}(jQuery),function($){$.effects.effect.puff=function(o,done){var elem=$(this),mode=$.effects.setMode(elem,o.mode||"hide"),hide="hide"===mode,percent=parseInt(o.percent,10)||150,factor=percent/100,original={height:elem.height(),width:elem.width(),outerHeight:elem.outerHeight(),outerWidth:elem.outerWidth()};$.extend(o,{effect:"scale",queue:!1,fade:!0,mode:mode,complete:done,percent:hide?percent:100,from:hide?original:{height:original.height*factor,width:original.width*factor,outerHeight:original.outerHeight*factor,outerWidth:original.outerWidth*factor}}),elem.effect(o)},$.effects.effect.scale=function(o,done){var el=$(this),options=$.extend(!0,{},o),mode=$.effects.setMode(el,o.mode||"effect"),percent=parseInt(o.percent,10)||(0===parseInt(o.percent,10)?0:"hide"===mode?0:100),direction=o.direction||"both",origin=o.origin,original={height:el.height(),width:el.width(),outerHeight:el.outerHeight(),outerWidth:el.outerWidth()},factor={y:"horizontal"!==direction?percent/100:1,x:"vertical"!==direction?percent/100:1};options.effect="size",options.queue=!1,options.complete=done,"effect"!==mode&&(options.origin=origin||["middle","center"],options.restore=!0),options.from=o.from||("show"===mode?{height:0,width:0,outerHeight:0,outerWidth:0}:original),options.to={height:original.height*factor.y,width:original.width*factor.x,outerHeight:original.outerHeight*factor.y,outerWidth:original.outerWidth*factor.x},options.fade&&("show"===mode&&(options.from.opacity=0,options.to.opacity=1),"hide"===mode&&(options.from.opacity=1,options.to.opacity=0)),el.effect(options)},$.effects.effect.size=function(o,done){var original,baseline,factor,el=$(this),props0=["position","top","bottom","left","right","width","height","overflow","opacity"],props1=["position","top","bottom","left","right","overflow","opacity"],props2=["width","height","overflow"],cProps=["fontSize"],vProps=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],hProps=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],mode=$.effects.setMode(el,o.mode||"effect"),restore=o.restore||"effect"!==mode,scale=o.scale||"both",origin=o.origin||["middle","center"],position=el.css("position"),props=restore?props0:props1,zero={height:0,width:0,outerHeight:0,outerWidth:0};"show"===mode&&el.show(),original={height:el.height(),width:el.width(),outerHeight:el.outerHeight(),outerWidth:el.outerWidth()},"toggle"===o.mode&&"show"===mode?(el.from=o.to||zero,el.to=o.from||original):(el.from=o.from||("show"===mode?zero:original),el.to=o.to||("hide"===mode?zero:original)),factor={from:{y:el.from.height/original.height,x:el.from.width/original.width},to:{y:el.to.height/original.height,x:el.to.width/original.width}},("box"===scale||"both"===scale)&&(factor.from.y!==factor.to.y&&(props=props.concat(vProps),el.from=$.effects.setTransition(el,vProps,factor.from.y,el.from),el.to=$.effects.setTransition(el,vProps,factor.to.y,el.to)),factor.from.x!==factor.to.x&&(props=props.concat(hProps),el.from=$.effects.setTransition(el,hProps,factor.from.x,el.from),el.to=$.effects.setTransition(el,hProps,factor.to.x,el.to))),("content"===scale||"both"===scale)&&factor.from.y!==factor.to.y&&(props=props.concat(cProps).concat(props2),el.from=$.effects.setTransition(el,cProps,factor.from.y,el.from),el.to=$.effects.setTransition(el,cProps,factor.to.y,el.to)),$.effects.save(el,props),el.show(),$.effects.createWrapper(el),el.css("overflow","hidden").css(el.from),origin&&(baseline=$.effects.getBaseline(origin,original),el.from.top=(original.outerHeight-el.outerHeight())*baseline.y,el.from.left=(original.outerWidth-el.outerWidth())*baseline.x,el.to.top=(original.outerHeight-el.to.outerHeight)*baseline.y,el.to.left=(original.outerWidth-el.to.outerWidth)*baseline.x),el.css(el.from),("content"===scale||"both"===scale)&&(vProps=vProps.concat(["marginTop","marginBottom"]).concat(cProps),hProps=hProps.concat(["marginLeft","marginRight"]),props2=props0.concat(vProps).concat(hProps),el.find("*[width]").each(function(){var child=$(this),c_original={height:child.height(),width:child.width(),outerHeight:child.outerHeight(),outerWidth:child.outerWidth()};restore&&$.effects.save(child,props2),child.from={height:c_original.height*factor.from.y,width:c_original.width*factor.from.x,outerHeight:c_original.outerHeight*factor.from.y,outerWidth:c_original.outerWidth*factor.from.x},child.to={height:c_original.height*factor.to.y,width:c_original.width*factor.to.x,outerHeight:c_original.height*factor.to.y,outerWidth:c_original.width*factor.to.x},factor.from.y!==factor.to.y&&(child.from=$.effects.setTransition(child,vProps,factor.from.y,child.from),child.to=$.effects.setTransition(child,vProps,factor.to.y,child.to)),factor.from.x!==factor.to.x&&(child.from=$.effects.setTransition(child,hProps,factor.from.x,child.from),child.to=$.effects.setTransition(child,hProps,factor.to.x,child.to)),child.css(child.from),child.animate(child.to,o.duration,o.easing,function(){restore&&$.effects.restore(child,props2)})})),el.animate(el.to,{queue:!1,duration:o.duration,easing:o.easing,complete:function(){0===el.to.opacity&&el.css("opacity",el.from.opacity),"hide"===mode&&el.hide(),$.effects.restore(el,props),restore||("static"===position?el.css({position:"relative",top:el.to.top,left:el.to.left}):$.each(["top","left"],function(idx,pos){el.css(pos,function(_,str){var val=parseInt(str,10),toRef=idx?el.to.left:el.to.top;return"auto"===str?toRef+"px":val+toRef+"px"})})),$.effects.removeWrapper(el),done()}})}}(jQuery),function($){$.effects.effect.shake=function(o,done){var i,el=$(this),props=["position","top","bottom","left","right","height","width"],mode=$.effects.setMode(el,o.mode||"effect"),direction=o.direction||"left",distance=o.distance||20,times=o.times||3,anims=2*times+1,speed=Math.round(o.duration/anims),ref="up"===direction||"down"===direction?"top":"left",positiveMotion="up"===direction||"left"===direction,animation={},animation1={},animation2={},queue=el.queue(),queuelen=queue.length;for($.effects.save(el,props),el.show(),$.effects.createWrapper(el),animation[ref]=(positiveMotion?"-=":"+=")+distance,animation1[ref]=(positiveMotion?"+=":"-=")+2*distance,animation2[ref]=(positiveMotion?"-=":"+=")+2*distance,el.animate(animation,speed,o.easing),i=1;times>i;i++)el.animate(animation1,speed,o.easing).animate(animation2,speed,o.easing);el.animate(animation1,speed,o.easing).animate(animation,speed/2,o.easing).queue(function(){"hide"===mode&&el.hide(),$.effects.restore(el,props),$.effects.removeWrapper(el),done()}),queuelen>1&&queue.splice.apply(queue,[1,0].concat(queue.splice(queuelen,anims+1))),el.dequeue()}}(jQuery),function($){$.effects.effect.slide=function(o,done){var distance,el=$(this),props=["position","top","bottom","left","right","width","height"],mode=$.effects.setMode(el,o.mode||"show"),show="show"===mode,direction=o.direction||"left",ref="up"===direction||"down"===direction?"top":"left",positiveMotion="up"===direction||"left"===direction,animation={};$.effects.save(el,props),el.show(),distance=o.distance||el["top"===ref?"outerHeight":"outerWidth"](!0),$.effects.createWrapper(el).css({overflow:"hidden"}),show&&el.css(ref,positiveMotion?isNaN(distance)?"-"+distance:-distance:distance),animation[ref]=(show?positiveMotion?"+=":"-=":positiveMotion?"-=":"+=")+distance,el.animate(animation,{queue:!1,duration:o.duration,easing:o.easing,complete:function(){"hide"===mode&&el.hide(),$.effects.restore(el,props),$.effects.removeWrapper(el),done()}})}}(jQuery),function($){$.effects.effect.transfer=function(o,done){var elem=$(this),target=$(o.to),targetFixed="fixed"===target.css("position"),body=$("body"),fixTop=targetFixed?body.scrollTop():0,fixLeft=targetFixed?body.scrollLeft():0,endPosition=target.offset(),animation={top:endPosition.top-fixTop,left:endPosition.left-fixLeft,height:target.innerHeight(),width:target.innerWidth()},startPosition=elem.offset(),transfer=$("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(o.className).css({top:startPosition.top-fixTop,left:startPosition.left-fixLeft,height:elem.innerHeight(),width:elem.innerWidth(),position:targetFixed?"fixed":"absolute"}).animate(animation,o.duration,o.easing,function(){transfer.remove(),done()})}}(jQuery),function($){$.widget("ui.menu",{version:"1.10.3",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,$.proxy(function(event){this.options.disabled&&event.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(event){event.preventDefault()},"click .ui-state-disabled > a":function(event){event.preventDefault()},"click .ui-menu-item:has(a)":function(event){var target=$(event.target).closest(".ui-menu-item");!this.mouseHandled&&target.not(".ui-state-disabled").length&&(this.mouseHandled=!0,this.select(event),target.has(".ui-menu").length?this.expand(event):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(event){var target=$(event.currentTarget);target.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(event,target)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(event,keepActiveItem){var item=this.active||this.element.children(".ui-menu-item").eq(0);keepActiveItem||this.focus(event,item)},blur:function(event){this._delay(function(){$.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(event)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(event){$(event.target).closest(".ui-menu").length||this.collapseAll(event),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var elem=$(this);elem.data("ui-menu-submenu-carat")&&elem.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(event){function escape(value){return value.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var match,prev,character,skip,regex,preventDefault=!0;switch(event.keyCode){case $.ui.keyCode.PAGE_UP:this.previousPage(event);break;case $.ui.keyCode.PAGE_DOWN:this.nextPage(event);break;case $.ui.keyCode.HOME:this._move("first","first",event);break;case $.ui.keyCode.END:this._move("last","last",event);break;case $.ui.keyCode.UP:this.previous(event);break;case $.ui.keyCode.DOWN:this.next(event);break;case $.ui.keyCode.LEFT:this.collapse(event);break;case $.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(event);break;case $.ui.keyCode.ENTER:case $.ui.keyCode.SPACE:this._activate(event);break;case $.ui.keyCode.ESCAPE:this.collapse(event);break;default:preventDefault=!1,prev=this.previousFilter||"",character=String.fromCharCode(event.keyCode),skip=!1,clearTimeout(this.filterTimer),character===prev?skip=!0:character=prev+character,regex=new RegExp("^"+escape(character),"i"),match=this.activeMenu.children(".ui-menu-item").filter(function(){return regex.test($(this).children("a").text())}),match=skip&&-1!==match.index(this.active.next())?this.active.nextAll(".ui-menu-item"):match,match.length||(character=String.fromCharCode(event.keyCode),regex=new RegExp("^"+escape(character),"i"),match=this.activeMenu.children(".ui-menu-item").filter(function(){return regex.test($(this).children("a").text())})),match.length?(this.focus(event,match),match.length>1?(this.previousFilter=character,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}preventDefault&&event.preventDefault()},_activate:function(event){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(event):this.select(event))},refresh:function(){var menus,icon=this.options.icons.submenu,submenus=this.element.find(this.options.menus);submenus.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var menu=$(this),item=menu.prev("a"),submenuCarat=$("<span>").addClass("ui-menu-icon ui-icon "+icon).data("ui-menu-submenu-carat",!0);item.attr("aria-haspopup","true").prepend(submenuCarat),menu.attr("aria-labelledby",item.attr("id"))}),menus=submenus.add(this.element),menus.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),menus.children(":not(.ui-menu-item)").each(function(){var item=$(this);/[^\-\u2014\u2013\s]/.test(item.text())||item.addClass("ui-widget-content ui-menu-divider")}),menus.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!$.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(key,value){"icons"===key&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(value.submenu),this._super(key,value)},focus:function(event,item){var nested,focused;this.blur(event,event&&"focus"===event.type),this._scrollIntoView(item),this.active=item.first(),focused=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",focused.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),event&&"keydown"===event.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),nested=item.children(".ui-menu"),nested.length&&/^mouse/.test(event.type)&&this._startOpening(nested),this.activeMenu=item.parent(),this._trigger("focus",event,{item:item})},_scrollIntoView:function(item){var borderTop,paddingTop,offset,scroll,elementHeight,itemHeight;this._hasScroll()&&(borderTop=parseFloat($.css(this.activeMenu[0],"borderTopWidth"))||0,paddingTop=parseFloat($.css(this.activeMenu[0],"paddingTop"))||0,offset=item.offset().top-this.activeMenu.offset().top-borderTop-paddingTop,scroll=this.activeMenu.scrollTop(),elementHeight=this.activeMenu.height(),itemHeight=item.height(),0>offset?this.activeMenu.scrollTop(scroll+offset):offset+itemHeight>elementHeight&&this.activeMenu.scrollTop(scroll+offset-elementHeight+itemHeight))},blur:function(event,fromFocus){fromFocus||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",event,{item:this.active}))},_startOpening:function(submenu){clearTimeout(this.timer),"true"===submenu.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(submenu)},this.delay))},_open:function(submenu){var position=$.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(submenu.parents(".ui-menu")).hide().attr("aria-hidden","true"),submenu.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(position)},collapseAll:function(event,all){clearTimeout(this.timer),this.timer=this._delay(function(){var currentMenu=all?this.element:$(event&&event.target).closest(this.element.find(".ui-menu"));currentMenu.length||(currentMenu=this.element),this._close(currentMenu),this.blur(event),this.activeMenu=currentMenu},this.delay)},_close:function(startMenu){startMenu||(startMenu=this.active?this.active.parent():this.element),startMenu.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(event){var newItem=this.active&&this.active.parent().closest(".ui-menu-item",this.element);newItem&&newItem.length&&(this._close(),this.focus(event,newItem))},expand:function(event){var newItem=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();newItem&&newItem.length&&(this._open(newItem.parent()),this._delay(function(){this.focus(event,newItem)}))},next:function(event){this._move("next","first",event)},previous:function(event){this._move("prev","last",event)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(direction,filter,event){var next;this.active&&(next="first"===direction||"last"===direction?this.active["first"===direction?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[direction+"All"](".ui-menu-item").eq(0)),next&&next.length&&this.active||(next=this.activeMenu.children(".ui-menu-item")[filter]()),this.focus(event,next)},nextPage:function(event){var item,base,height;return this.active?void(this.isLastItem()||(this._hasScroll()?(base=this.active.offset().top,height=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return item=$(this),item.offset().top-base-height<0}),this.focus(event,item)):this.focus(event,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]()))):void this.next(event)},previousPage:function(event){var item,base,height;return this.active?void(this.isFirstItem()||(this._hasScroll()?(base=this.active.offset().top,height=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return item=$(this),item.offset().top-base+height>0}),this.focus(event,item)):this.focus(event,this.activeMenu.children(".ui-menu-item").first()))):void this.next(event)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(event){this.active=this.active||$(event.target).closest(".ui-menu-item");var ui={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(event,!0),this._trigger("select",event,ui)}})}(jQuery),function($,undefined){function getOffsets(offsets,width,height){return[parseFloat(offsets[0])*(rpercent.test(offsets[0])?width/100:1),parseFloat(offsets[1])*(rpercent.test(offsets[1])?height/100:1)]}function parseCss(element,property){return parseInt($.css(element,property),10)||0}function getDimensions(elem){var raw=elem[0];return 9===raw.nodeType?{width:elem.width(),height:elem.height(),offset:{top:0,left:0}}:$.isWindow(raw)?{width:elem.width(),height:elem.height(),offset:{top:elem.scrollTop(),left:elem.scrollLeft()}}:raw.preventDefault?{width:0,height:0,offset:{top:raw.pageY,left:raw.pageX}}:{width:elem.outerWidth(),height:elem.outerHeight(),offset:elem.offset()}}$.ui=$.ui||{};var cachedScrollbarWidth,max=Math.max,abs=Math.abs,round=Math.round,rhorizontal=/left|center|right/,rvertical=/top|center|bottom/,roffset=/[\+\-]\d+(\.[\d]+)?%?/,rposition=/^\w+/,rpercent=/%$/,_position=$.fn.position;$.position={scrollbarWidth:function(){if(cachedScrollbarWidth!==undefined)return cachedScrollbarWidth;var w1,w2,div=$("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),innerDiv=div.children()[0];return $("body").append(div),w1=innerDiv.offsetWidth,div.css("overflow","scroll"),w2=innerDiv.offsetWidth,w1===w2&&(w2=div[0].clientWidth),div.remove(),cachedScrollbarWidth=w1-w2},getScrollInfo:function(within){var overflowX=within.isWindow?"":within.element.css("overflow-x"),overflowY=within.isWindow?"":within.element.css("overflow-y"),hasOverflowX="scroll"===overflowX||"auto"===overflowX&&within.width<within.element[0].scrollWidth,hasOverflowY="scroll"===overflowY||"auto"===overflowY&&within.height<within.element[0].scrollHeight;return{width:hasOverflowY?$.position.scrollbarWidth():0,height:hasOverflowX?$.position.scrollbarWidth():0}},getWithinInfo:function(element){var withinElement=$(element||window),isWindow=$.isWindow(withinElement[0]);
return{element:withinElement,isWindow:isWindow,offset:withinElement.offset()||{left:0,top:0},scrollLeft:withinElement.scrollLeft(),scrollTop:withinElement.scrollTop(),width:isWindow?withinElement.width():withinElement.outerWidth(),height:isWindow?withinElement.height():withinElement.outerHeight()}}},$.fn.position=function(options){if(!options||!options.of)return _position.apply(this,arguments);options=$.extend({},options);var atOffset,targetWidth,targetHeight,targetOffset,basePosition,dimensions,target=$(options.of),within=$.position.getWithinInfo(options.within),scrollInfo=$.position.getScrollInfo(within),collision=(options.collision||"flip").split(" "),offsets={};return dimensions=getDimensions(target),target[0].preventDefault&&(options.at="left top"),targetWidth=dimensions.width,targetHeight=dimensions.height,targetOffset=dimensions.offset,basePosition=$.extend({},targetOffset),$.each(["my","at"],function(){var horizontalOffset,verticalOffset,pos=(options[this]||"").split(" ");1===pos.length&&(pos=rhorizontal.test(pos[0])?pos.concat(["center"]):rvertical.test(pos[0])?["center"].concat(pos):["center","center"]),pos[0]=rhorizontal.test(pos[0])?pos[0]:"center",pos[1]=rvertical.test(pos[1])?pos[1]:"center",horizontalOffset=roffset.exec(pos[0]),verticalOffset=roffset.exec(pos[1]),offsets[this]=[horizontalOffset?horizontalOffset[0]:0,verticalOffset?verticalOffset[0]:0],options[this]=[rposition.exec(pos[0])[0],rposition.exec(pos[1])[0]]}),1===collision.length&&(collision[1]=collision[0]),"right"===options.at[0]?basePosition.left+=targetWidth:"center"===options.at[0]&&(basePosition.left+=targetWidth/2),"bottom"===options.at[1]?basePosition.top+=targetHeight:"center"===options.at[1]&&(basePosition.top+=targetHeight/2),atOffset=getOffsets(offsets.at,targetWidth,targetHeight),basePosition.left+=atOffset[0],basePosition.top+=atOffset[1],this.each(function(){var collisionPosition,using,elem=$(this),elemWidth=elem.outerWidth(),elemHeight=elem.outerHeight(),marginLeft=parseCss(this,"marginLeft"),marginTop=parseCss(this,"marginTop"),collisionWidth=elemWidth+marginLeft+parseCss(this,"marginRight")+scrollInfo.width,collisionHeight=elemHeight+marginTop+parseCss(this,"marginBottom")+scrollInfo.height,position=$.extend({},basePosition),myOffset=getOffsets(offsets.my,elem.outerWidth(),elem.outerHeight());"right"===options.my[0]?position.left-=elemWidth:"center"===options.my[0]&&(position.left-=elemWidth/2),"bottom"===options.my[1]?position.top-=elemHeight:"center"===options.my[1]&&(position.top-=elemHeight/2),position.left+=myOffset[0],position.top+=myOffset[1],$.support.offsetFractions||(position.left=round(position.left),position.top=round(position.top)),collisionPosition={marginLeft:marginLeft,marginTop:marginTop},$.each(["left","top"],function(i,dir){$.ui.position[collision[i]]&&$.ui.position[collision[i]][dir](position,{targetWidth:targetWidth,targetHeight:targetHeight,elemWidth:elemWidth,elemHeight:elemHeight,collisionPosition:collisionPosition,collisionWidth:collisionWidth,collisionHeight:collisionHeight,offset:[atOffset[0]+myOffset[0],atOffset[1]+myOffset[1]],my:options.my,at:options.at,within:within,elem:elem})}),options.using&&(using=function(props){var left=targetOffset.left-position.left,right=left+targetWidth-elemWidth,top=targetOffset.top-position.top,bottom=top+targetHeight-elemHeight,feedback={target:{element:target,left:targetOffset.left,top:targetOffset.top,width:targetWidth,height:targetHeight},element:{element:elem,left:position.left,top:position.top,width:elemWidth,height:elemHeight},horizontal:0>right?"left":left>0?"right":"center",vertical:0>bottom?"top":top>0?"bottom":"middle"};elemWidth>targetWidth&&abs(left+right)<targetWidth&&(feedback.horizontal="center"),elemHeight>targetHeight&&abs(top+bottom)<targetHeight&&(feedback.vertical="middle"),feedback.important=max(abs(left),abs(right))>max(abs(top),abs(bottom))?"horizontal":"vertical",options.using.call(this,props,feedback)}),elem.offset($.extend(position,{using:using}))})},$.ui.position={fit:{left:function(position,data){var newOverRight,within=data.within,withinOffset=within.isWindow?within.scrollLeft:within.offset.left,outerWidth=within.width,collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=withinOffset-collisionPosLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-withinOffset;data.collisionWidth>outerWidth?overLeft>0&&0>=overRight?(newOverRight=position.left+overLeft+data.collisionWidth-outerWidth-withinOffset,position.left+=overLeft-newOverRight):position.left=overRight>0&&0>=overLeft?withinOffset:overLeft>overRight?withinOffset+outerWidth-data.collisionWidth:withinOffset:overLeft>0?position.left+=overLeft:overRight>0?position.left-=overRight:position.left=max(position.left-collisionPosLeft,position.left)},top:function(position,data){var newOverBottom,within=data.within,withinOffset=within.isWindow?within.scrollTop:within.offset.top,outerHeight=data.within.height,collisionPosTop=position.top-data.collisionPosition.marginTop,overTop=withinOffset-collisionPosTop,overBottom=collisionPosTop+data.collisionHeight-outerHeight-withinOffset;data.collisionHeight>outerHeight?overTop>0&&0>=overBottom?(newOverBottom=position.top+overTop+data.collisionHeight-outerHeight-withinOffset,position.top+=overTop-newOverBottom):position.top=overBottom>0&&0>=overTop?withinOffset:overTop>overBottom?withinOffset+outerHeight-data.collisionHeight:withinOffset:overTop>0?position.top+=overTop:overBottom>0?position.top-=overBottom:position.top=max(position.top-collisionPosTop,position.top)}},flip:{left:function(position,data){var newOverRight,newOverLeft,within=data.within,withinOffset=within.offset.left+within.scrollLeft,outerWidth=within.width,offsetLeft=within.isWindow?within.scrollLeft:within.offset.left,collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=collisionPosLeft-offsetLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-offsetLeft,myOffset="left"===data.my[0]?-data.elemWidth:"right"===data.my[0]?data.elemWidth:0,atOffset="left"===data.at[0]?data.targetWidth:"right"===data.at[0]?-data.targetWidth:0,offset=-2*data.offset[0];0>overLeft?(newOverRight=position.left+myOffset+atOffset+offset+data.collisionWidth-outerWidth-withinOffset,(0>newOverRight||newOverRight<abs(overLeft))&&(position.left+=myOffset+atOffset+offset)):overRight>0&&(newOverLeft=position.left-data.collisionPosition.marginLeft+myOffset+atOffset+offset-offsetLeft,(newOverLeft>0||abs(newOverLeft)<overRight)&&(position.left+=myOffset+atOffset+offset))},top:function(position,data){var newOverTop,newOverBottom,within=data.within,withinOffset=within.offset.top+within.scrollTop,outerHeight=within.height,offsetTop=within.isWindow?within.scrollTop:within.offset.top,collisionPosTop=position.top-data.collisionPosition.marginTop,overTop=collisionPosTop-offsetTop,overBottom=collisionPosTop+data.collisionHeight-outerHeight-offsetTop,top="top"===data.my[1],myOffset=top?-data.elemHeight:"bottom"===data.my[1]?data.elemHeight:0,atOffset="top"===data.at[1]?data.targetHeight:"bottom"===data.at[1]?-data.targetHeight:0,offset=-2*data.offset[1];0>overTop?(newOverBottom=position.top+myOffset+atOffset+offset+data.collisionHeight-outerHeight-withinOffset,position.top+myOffset+atOffset+offset>overTop&&(0>newOverBottom||newOverBottom<abs(overTop))&&(position.top+=myOffset+atOffset+offset)):overBottom>0&&(newOverTop=position.top-data.collisionPosition.marginTop+myOffset+atOffset+offset-offsetTop,position.top+myOffset+atOffset+offset>overBottom&&(newOverTop>0||abs(newOverTop)<overBottom)&&(position.top+=myOffset+atOffset+offset))}},flipfit:{left:function(){$.ui.position.flip.left.apply(this,arguments),$.ui.position.fit.left.apply(this,arguments)},top:function(){$.ui.position.flip.top.apply(this,arguments),$.ui.position.fit.top.apply(this,arguments)}}},function(){var testElement,testElementParent,testElementStyle,offsetLeft,i,body=document.getElementsByTagName("body")[0],div=document.createElement("div");testElement=document.createElement(body?"div":"body"),testElementStyle={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},body&&$.extend(testElementStyle,{position:"absolute",left:"-1000px",top:"-1000px"});for(i in testElementStyle)testElement.style[i]=testElementStyle[i];testElement.appendChild(div),testElementParent=body||document.documentElement,testElementParent.insertBefore(testElement,testElementParent.firstChild),div.style.cssText="position: absolute; left: 10.7432222px;",offsetLeft=$(div).offset().left,$.support.offsetFractions=offsetLeft>10&&11>offsetLeft,testElement.innerHTML="",testElementParent.removeChild(testElement)}()}(jQuery),function($,undefined){$.widget("ui.progressbar",{version:"1.10.3",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=$("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(newValue){return newValue===undefined?this.options.value:(this.options.value=this._constrainedValue(newValue),void this._refreshValue())},_constrainedValue:function(newValue){return newValue===undefined&&(newValue=this.options.value),this.indeterminate=newValue===!1,"number"!=typeof newValue&&(newValue=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,newValue))},_setOptions:function(options){var value=options.value;delete options.value,this._super(options),this.options.value=this._constrainedValue(value),this._refreshValue()},_setOption:function(key,value){"max"===key&&(value=Math.max(this.min,value)),this._super(key,value)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var value=this.options.value,percentage=this._percentage();this.valueDiv.toggle(this.indeterminate||value>this.min).toggleClass("ui-corner-right",value===this.options.max).width(percentage.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=$("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":value}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==value&&(this.oldValue=value,this._trigger("change")),value===this.options.max&&this._trigger("complete")}})}(jQuery),function($){var numPages=5;$.widget("ui.slider",$.ui.mouse,{version:"1.10.3",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var i,handleCount,options=this.options,existingHandles=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),handle="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",handles=[];for(handleCount=options.values&&options.values.length||1,existingHandles.length>handleCount&&(existingHandles.slice(handleCount).remove(),existingHandles=existingHandles.slice(0,handleCount)),i=existingHandles.length;handleCount>i;i++)handles.push(handle);this.handles=existingHandles.add($(handles.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(i){$(this).data("ui-slider-handle-index",i)})},_createRange:function(){var options=this.options,classes="";options.range?(options.range===!0&&(options.values?options.values.length&&2!==options.values.length?options.values=[options.values[0],options.values[0]]:$.isArray(options.values)&&(options.values=options.values.slice(0)):options.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=$("<div></div>").appendTo(this.element),classes="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(classes+("min"===options.range||"max"===options.range?" ui-slider-range-"+options.range:""))):this.range=$([])},_setupEvents:function(){var elements=this.handles.add(this.range).filter("a");this._off(elements),this._on(elements,this._handleEvents),this._hoverable(elements),this._focusable(elements)},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(event){var position,normValue,distance,closestHandle,index,allowed,offset,mouseOverHandle,that=this,o=this.options;return o.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),position={x:event.pageX,y:event.pageY},normValue=this._normValueFromMouse(position),distance=this._valueMax()-this._valueMin()+1,this.handles.each(function(i){var thisDistance=Math.abs(normValue-that.values(i));(distance>thisDistance||distance===thisDistance&&(i===that._lastChangedValue||that.values(i)===o.min))&&(distance=thisDistance,closestHandle=$(this),index=i)}),allowed=this._start(event,index),allowed===!1?!1:(this._mouseSliding=!0,this._handleIndex=index,closestHandle.addClass("ui-state-active").focus(),offset=closestHandle.offset(),mouseOverHandle=!$(event.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=mouseOverHandle?{left:0,top:0}:{left:event.pageX-offset.left-closestHandle.width()/2,top:event.pageY-offset.top-closestHandle.height()/2-(parseInt(closestHandle.css("borderTopWidth"),10)||0)-(parseInt(closestHandle.css("borderBottomWidth"),10)||0)+(parseInt(closestHandle.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(event,index,normValue),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(event){var position={x:event.pageX,y:event.pageY},normValue=this._normValueFromMouse(position);return this._slide(event,this._handleIndex,normValue),!1},_mouseStop:function(event){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(event,this._handleIndex),this._change(event,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(position){var pixelTotal,pixelMouse,percentMouse,valueTotal,valueMouse;return"horizontal"===this.orientation?(pixelTotal=this.elementSize.width,pixelMouse=position.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(pixelTotal=this.elementSize.height,pixelMouse=position.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),percentMouse=pixelMouse/pixelTotal,percentMouse>1&&(percentMouse=1),0>percentMouse&&(percentMouse=0),"vertical"===this.orientation&&(percentMouse=1-percentMouse),valueTotal=this._valueMax()-this._valueMin(),valueMouse=this._valueMin()+percentMouse*valueTotal,this._trimAlignValue(valueMouse)},_start:function(event,index){var uiHash={handle:this.handles[index],value:this.value()};return this.options.values&&this.options.values.length&&(uiHash.value=this.values(index),uiHash.values=this.values()),this._trigger("start",event,uiHash)},_slide:function(event,index,newVal){var otherVal,newValues,allowed;this.options.values&&this.options.values.length?(otherVal=this.values(index?0:1),2===this.options.values.length&&this.options.range===!0&&(0===index&&newVal>otherVal||1===index&&otherVal>newVal)&&(newVal=otherVal),newVal!==this.values(index)&&(newValues=this.values(),newValues[index]=newVal,allowed=this._trigger("slide",event,{handle:this.handles[index],value:newVal,values:newValues}),otherVal=this.values(index?0:1),allowed!==!1&&this.values(index,newVal,!0))):newVal!==this.value()&&(allowed=this._trigger("slide",event,{handle:this.handles[index],value:newVal}),allowed!==!1&&this.value(newVal))},_stop:function(event,index){var uiHash={handle:this.handles[index],value:this.value()};this.options.values&&this.options.values.length&&(uiHash.value=this.values(index),uiHash.values=this.values()),this._trigger("stop",event,uiHash)},_change:function(event,index){if(!this._keySliding&&!this._mouseSliding){var uiHash={handle:this.handles[index],value:this.value()};this.options.values&&this.options.values.length&&(uiHash.value=this.values(index),uiHash.values=this.values()),this._lastChangedValue=index,this._trigger("change",event,uiHash)}},value:function(newValue){return arguments.length?(this.options.value=this._trimAlignValue(newValue),this._refreshValue(),void this._change(null,0)):this._value()},values:function(index,newValue){var vals,newValues,i;if(arguments.length>1)return this.options.values[index]=this._trimAlignValue(newValue),this._refreshValue(),void this._change(null,index);if(!arguments.length)return this._values();if(!$.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(index):this.value();for(vals=this.options.values,newValues=arguments[0],i=0;i<vals.length;i+=1)vals[i]=this._trimAlignValue(newValues[i]),this._change(null,i);this._refreshValue()},_setOption:function(key,value){var i,valsLength=0;switch("range"===key&&this.options.range===!0&&("min"===value?(this.options.value=this._values(0),this.options.values=null):"max"===value&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),$.isArray(this.options.values)&&(valsLength=this.options.values.length),$.Widget.prototype._setOption.apply(this,arguments),key){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=0;valsLength>i;i+=1)this._change(null,i);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var val=this.options.value;return val=this._trimAlignValue(val)},_values:function(index){var val,vals,i;if(arguments.length)return val=this.options.values[index],val=this._trimAlignValue(val);if(this.options.values&&this.options.values.length){for(vals=this.options.values.slice(),i=0;i<vals.length;i+=1)vals[i]=this._trimAlignValue(vals[i]);return vals}return[]},_trimAlignValue:function(val){if(val<=this._valueMin())return this._valueMin();if(val>=this._valueMax())return this._valueMax();var step=this.options.step>0?this.options.step:1,valModStep=(val-this._valueMin())%step,alignValue=val-valModStep;return 2*Math.abs(valModStep)>=step&&(alignValue+=valModStep>0?step:-step),parseFloat(alignValue.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var lastValPercent,valPercent,value,valueMin,valueMax,oRange=this.options.range,o=this.options,that=this,animate=this._animateOff?!1:o.animate,_set={};this.options.values&&this.options.values.length?this.handles.each(function(i){valPercent=(that.values(i)-that._valueMin())/(that._valueMax()-that._valueMin())*100,_set["horizontal"===that.orientation?"left":"bottom"]=valPercent+"%",$(this).stop(1,1)[animate?"animate":"css"](_set,o.animate),that.options.range===!0&&("horizontal"===that.orientation?(0===i&&that.range.stop(1,1)[animate?"animate":"css"]({left:valPercent+"%"},o.animate),1===i&&that.range[animate?"animate":"css"]({width:valPercent-lastValPercent+"%"},{queue:!1,duration:o.animate})):(0===i&&that.range.stop(1,1)[animate?"animate":"css"]({bottom:valPercent+"%"},o.animate),1===i&&that.range[animate?"animate":"css"]({height:valPercent-lastValPercent+"%"},{queue:!1,duration:o.animate}))),lastValPercent=valPercent}):(value=this.value(),valueMin=this._valueMin(),valueMax=this._valueMax(),valPercent=valueMax!==valueMin?(value-valueMin)/(valueMax-valueMin)*100:0,_set["horizontal"===this.orientation?"left":"bottom"]=valPercent+"%",this.handle.stop(1,1)[animate?"animate":"css"](_set,o.animate),"min"===oRange&&"horizontal"===this.orientation&&this.range.stop(1,1)[animate?"animate":"css"]({width:valPercent+"%"},o.animate),"max"===oRange&&"horizontal"===this.orientation&&this.range[animate?"animate":"css"]({width:100-valPercent+"%"},{queue:!1,duration:o.animate}),"min"===oRange&&"vertical"===this.orientation&&this.range.stop(1,1)[animate?"animate":"css"]({height:valPercent+"%"},o.animate),"max"===oRange&&"vertical"===this.orientation&&this.range[animate?"animate":"css"]({height:100-valPercent+"%"},{queue:!1,duration:o.animate}))},_handleEvents:{keydown:function(event){var allowed,curVal,newVal,step,index=$(event.target).data("ui-slider-handle-index");switch(event.keyCode){case $.ui.keyCode.HOME:case $.ui.keyCode.END:case $.ui.keyCode.PAGE_UP:case $.ui.keyCode.PAGE_DOWN:case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:if(event.preventDefault(),!this._keySliding&&(this._keySliding=!0,$(event.target).addClass("ui-state-active"),allowed=this._start(event,index),allowed===!1))return}switch(step=this.options.step,curVal=newVal=this.options.values&&this.options.values.length?this.values(index):this.value(),event.keyCode){case $.ui.keyCode.HOME:newVal=this._valueMin();break;case $.ui.keyCode.END:newVal=this._valueMax();break;case $.ui.keyCode.PAGE_UP:newVal=this._trimAlignValue(curVal+(this._valueMax()-this._valueMin())/numPages);break;case $.ui.keyCode.PAGE_DOWN:newVal=this._trimAlignValue(curVal-(this._valueMax()-this._valueMin())/numPages);break;case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:if(curVal===this._valueMax())return;newVal=this._trimAlignValue(curVal+step);break;case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:if(curVal===this._valueMin())return;newVal=this._trimAlignValue(curVal-step)}this._slide(event,index,newVal)},click:function(event){event.preventDefault()},keyup:function(event){var index=$(event.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(event,index),this._change(event,index),$(event.target).removeClass("ui-state-active"))}}})}(jQuery),function($){function modifier(fn){return function(){var previous=this.element.val();fn.apply(this,arguments),this._refresh(),previous!==this.element.val()&&this._trigger("change")}}$.widget("ui.spinner",{version:"1.10.3",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var options={},element=this.element;return $.each(["min","max","step"],function(i,option){var value=element.attr(option);void 0!==value&&value.length&&(options[option]=value)}),options},_events:{keydown:function(event){this._start(event)&&this._keydown(event)&&event.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(event){return this.cancelBlur?void delete this.cancelBlur:(this._stop(),this._refresh(),void(this.previous!==this.element.val()&&this._trigger("change",event)))},mousewheel:function(event,delta){if(delta){if(!this.spinning&&!this._start(event))return!1;this._spin((delta>0?1:-1)*this.options.step,event),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(event)},100),event.preventDefault()}},"mousedown .ui-spinner-button":function(event){function checkFocus(){var isActive=this.element[0]===this.document[0].activeElement;isActive||(this.element.focus(),this.previous=previous,this._delay(function(){this.previous=previous}))}var previous;previous=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),event.preventDefault(),checkFocus.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,checkFocus.call(this)}),this._start(event)!==!1&&this._repeat(null,$(event.currentTarget).hasClass("ui-spinner-up")?1:-1,event)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(event){return $(event.currentTarget).hasClass("ui-state-active")?this._start(event)===!1?!1:void this._repeat(null,$(event.currentTarget).hasClass("ui-spinner-up")?1:-1,event):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var uiSpinner=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=uiSpinner.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*uiSpinner.height())&&uiSpinner.height()>0&&uiSpinner.height(uiSpinner.height()),this.options.disabled&&this.disable()},_keydown:function(event){var options=this.options,keyCode=$.ui.keyCode;switch(event.keyCode){case keyCode.UP:return this._repeat(null,1,event),!0;case keyCode.DOWN:return this._repeat(null,-1,event),!0;case keyCode.PAGE_UP:return this._repeat(null,options.page,event),!0;case keyCode.PAGE_DOWN:return this._repeat(null,-options.page,event),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(event){return this.spinning||this._trigger("start",event)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(i,steps,event){i=i||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,steps,event)},i),this._spin(steps*this.options.step,event)},_spin:function(step,event){var value=this.value()||0;this.counter||(this.counter=1),value=this._adjustValue(value+step*this._increment(this.counter)),this.spinning&&this._trigger("spin",event,{value:value})===!1||(this._value(value),this.counter++)},_increment:function(i){var incremental=this.options.incremental;return incremental?$.isFunction(incremental)?incremental(i):Math.floor(i*i*i/5e4-i*i/500+17*i/200+1):1},_precision:function(){var precision=this._precisionOf(this.options.step);return null!==this.options.min&&(precision=Math.max(precision,this._precisionOf(this.options.min))),precision},_precisionOf:function(num){var str=num.toString(),decimal=str.indexOf(".");return-1===decimal?0:str.length-decimal-1},_adjustValue:function(value){var base,aboveMin,options=this.options;return base=null!==options.min?options.min:0,aboveMin=value-base,aboveMin=Math.round(aboveMin/options.step)*options.step,value=base+aboveMin,value=parseFloat(value.toFixed(this._precision())),null!==options.max&&value>options.max?options.max:null!==options.min&&value<options.min?options.min:value},_stop:function(event){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",event))},_setOption:function(key,value){if("culture"===key||"numberFormat"===key){var prevValue=this._parse(this.element.val());return this.options[key]=value,void this.element.val(this._format(prevValue))}("max"===key||"min"===key||"step"===key)&&"string"==typeof value&&(value=this._parse(value)),"icons"===key&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(value.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(value.down)),this._super(key,value),"disabled"===key&&(value?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:modifier(function(options){this._super(options),this._value(this.element.val())}),_parse:function(val){return"string"==typeof val&&""!==val&&(val=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(val,10,this.options.culture):+val),""===val||isNaN(val)?null:val},_format:function(value){return""===value?"":window.Globalize&&this.options.numberFormat?Globalize.format(value,this.options.numberFormat,this.options.culture):value},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(value,allowAny){var parsed;""!==value&&(parsed=this._parse(value),null!==parsed&&(allowAny||(parsed=this._adjustValue(parsed)),value=this._format(parsed))),this.element.val(value),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:modifier(function(steps){this._stepUp(steps)}),_stepUp:function(steps){this._start()&&(this._spin((steps||1)*this.options.step),this._stop())},stepDown:modifier(function(steps){this._stepDown(steps)}),_stepDown:function(steps){this._start()&&(this._spin((steps||1)*-this.options.step),this._stop())},pageUp:modifier(function(pages){this._stepUp((pages||1)*this.options.page)}),pageDown:modifier(function(pages){this._stepDown((pages||1)*this.options.page)}),value:function(newVal){return arguments.length?void modifier(this._value).call(this,newVal):this._parse(this.element.val())},widget:function(){return this.uiSpinner}})}(jQuery),function($,undefined){function getNextTabId(){return++tabId}function isLocal(anchor){return anchor.hash.length>1&&decodeURIComponent(anchor.href.replace(rhash,""))===decodeURIComponent(location.href.replace(rhash,""))}var tabId=0,rhash=/#.*$/;$.widget("ui.tabs",{version:"1.10.3",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var that=this,options=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",options.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(event){$(this).is(".ui-state-disabled")&&event.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){$(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),options.active=this._initialActive(),$.isArray(options.disabled)&&(options.disabled=$.unique(options.disabled.concat($.map(this.tabs.filter(".ui-state-disabled"),function(li){return that.tabs.index(li)
}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(options.active):$(),this._refresh(),this.active.length&&this.load(options.active)},_initialActive:function(){var active=this.options.active,collapsible=this.options.collapsible,locationHash=location.hash.substring(1);return null===active&&(locationHash&&this.tabs.each(function(i,tab){return $(tab).attr("aria-controls")===locationHash?(active=i,!1):void 0}),null===active&&(active=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===active||-1===active)&&(active=this.tabs.length?0:!1)),active!==!1&&(active=this.tabs.index(this.tabs.eq(active)),-1===active&&(active=collapsible?!1:0)),!collapsible&&active===!1&&this.anchors.length&&(active=0),active},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):$()}},_tabKeydown:function(event){var focusedTab=$(this.document[0].activeElement).closest("li"),selectedIndex=this.tabs.index(focusedTab),goingForward=!0;if(!this._handlePageNav(event)){switch(event.keyCode){case $.ui.keyCode.RIGHT:case $.ui.keyCode.DOWN:selectedIndex++;break;case $.ui.keyCode.UP:case $.ui.keyCode.LEFT:goingForward=!1,selectedIndex--;break;case $.ui.keyCode.END:selectedIndex=this.anchors.length-1;break;case $.ui.keyCode.HOME:selectedIndex=0;break;case $.ui.keyCode.SPACE:return event.preventDefault(),clearTimeout(this.activating),void this._activate(selectedIndex);case $.ui.keyCode.ENTER:return event.preventDefault(),clearTimeout(this.activating),void this._activate(selectedIndex===this.options.active?!1:selectedIndex);default:return}event.preventDefault(),clearTimeout(this.activating),selectedIndex=this._focusNextTab(selectedIndex,goingForward),event.ctrlKey||(focusedTab.attr("aria-selected","false"),this.tabs.eq(selectedIndex).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",selectedIndex)},this.delay))}},_panelKeydown:function(event){this._handlePageNav(event)||event.ctrlKey&&event.keyCode===$.ui.keyCode.UP&&(event.preventDefault(),this.active.focus())},_handlePageNav:function(event){return event.altKey&&event.keyCode===$.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):event.altKey&&event.keyCode===$.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(index,goingForward){function constrain(){return index>lastTabIndex&&(index=0),0>index&&(index=lastTabIndex),index}for(var lastTabIndex=this.tabs.length-1;-1!==$.inArray(constrain(),this.options.disabled);)index=goingForward?index+1:index-1;return index},_focusNextTab:function(index,goingForward){return index=this._findNextTab(index,goingForward),this.tabs.eq(index).focus(),index},_setOption:function(key,value){return"active"===key?void this._activate(value):"disabled"===key?void this._setupDisabled(value):(this._super(key,value),"collapsible"===key&&(this.element.toggleClass("ui-tabs-collapsible",value),value||this.options.active!==!1||this._activate(0)),"event"===key&&this._setupEvents(value),void("heightStyle"===key&&this._setupHeightStyle(value)))},_tabId:function(tab){return tab.attr("aria-controls")||"ui-tabs-"+getNextTabId()},_sanitizeSelector:function(hash){return hash?hash.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var options=this.options,lis=this.tablist.children(":has(a[href])");options.disabled=$.map(lis.filter(".ui-state-disabled"),function(tab){return lis.index(tab)}),this._processTabs(),options.active!==!1&&this.anchors.length?this.active.length&&!$.contains(this.tablist[0],this.active[0])?this.tabs.length===options.disabled.length?(options.active=!1,this.active=$()):this._activate(this._findNextTab(Math.max(0,options.active-1),!1)):options.active=this.tabs.index(this.active):(options.active=!1,this.active=$()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var that=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return $("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=$(),this.anchors.each(function(i,anchor){var selector,panel,panelId,anchorId=$(anchor).uniqueId().attr("id"),tab=$(anchor).closest("li"),originalAriaControls=tab.attr("aria-controls");isLocal(anchor)?(selector=anchor.hash,panel=that.element.find(that._sanitizeSelector(selector))):(panelId=that._tabId(tab),selector="#"+panelId,panel=that.element.find(selector),panel.length||(panel=that._createPanel(panelId),panel.insertAfter(that.panels[i-1]||that.tablist)),panel.attr("aria-live","polite")),panel.length&&(that.panels=that.panels.add(panel)),originalAriaControls&&tab.data("ui-tabs-aria-controls",originalAriaControls),tab.attr({"aria-controls":selector.substring(1),"aria-labelledby":anchorId}),panel.attr("aria-labelledby",anchorId)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(id){return $("<div>").attr("id",id).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(disabled){$.isArray(disabled)&&(disabled.length?disabled.length===this.anchors.length&&(disabled=!0):disabled=!1);for(var li,i=0;li=this.tabs[i];i++)disabled===!0||-1!==$.inArray(i,disabled)?$(li).addClass("ui-state-disabled").attr("aria-disabled","true"):$(li).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=disabled},_setupEvents:function(event){var events={click:function(event){event.preventDefault()}};event&&$.each(event.split(" "),function(index,eventName){events[eventName]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,events),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(heightStyle){var maxHeight,parent=this.element.parent();"fill"===heightStyle?(maxHeight=parent.height(),maxHeight-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var elem=$(this),position=elem.css("position");"absolute"!==position&&"fixed"!==position&&(maxHeight-=elem.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){maxHeight-=$(this).outerHeight(!0)}),this.panels.each(function(){$(this).height(Math.max(0,maxHeight-$(this).innerHeight()+$(this).height()))}).css("overflow","auto")):"auto"===heightStyle&&(maxHeight=0,this.panels.each(function(){maxHeight=Math.max(maxHeight,$(this).height("").height())}).height(maxHeight))},_eventHandler:function(event){var options=this.options,active=this.active,anchor=$(event.currentTarget),tab=anchor.closest("li"),clickedIsActive=tab[0]===active[0],collapsing=clickedIsActive&&options.collapsible,toShow=collapsing?$():this._getPanelForTab(tab),toHide=active.length?this._getPanelForTab(active):$(),eventData={oldTab:active,oldPanel:toHide,newTab:collapsing?$():tab,newPanel:toShow};event.preventDefault(),tab.hasClass("ui-state-disabled")||tab.hasClass("ui-tabs-loading")||this.running||clickedIsActive&&!options.collapsible||this._trigger("beforeActivate",event,eventData)===!1||(options.active=collapsing?!1:this.tabs.index(tab),this.active=clickedIsActive?$():tab,this.xhr&&this.xhr.abort(),toHide.length||toShow.length||$.error("jQuery UI Tabs: Mismatching fragment identifier."),toShow.length&&this.load(this.tabs.index(tab),event),this._toggle(event,eventData))},_toggle:function(event,eventData){function complete(){that.running=!1,that._trigger("activate",event,eventData)}function show(){eventData.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),toShow.length&&that.options.show?that._show(toShow,that.options.show,complete):(toShow.show(),complete())}var that=this,toShow=eventData.newPanel,toHide=eventData.oldPanel;this.running=!0,toHide.length&&this.options.hide?this._hide(toHide,this.options.hide,function(){eventData.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),show()}):(eventData.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),toHide.hide(),show()),toHide.attr({"aria-expanded":"false","aria-hidden":"true"}),eventData.oldTab.attr("aria-selected","false"),toShow.length&&toHide.length?eventData.oldTab.attr("tabIndex",-1):toShow.length&&this.tabs.filter(function(){return 0===$(this).attr("tabIndex")}).attr("tabIndex",-1),toShow.attr({"aria-expanded":"true","aria-hidden":"false"}),eventData.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(index){var anchor,active=this._findActive(index);active[0]!==this.active[0]&&(active.length||(active=this.active),anchor=active.find(".ui-tabs-anchor")[0],this._eventHandler({target:anchor,currentTarget:anchor,preventDefault:$.noop}))},_findActive:function(index){return index===!1?$():this.tabs.eq(index)},_getIndex:function(index){return"string"==typeof index&&(index=this.anchors.index(this.anchors.filter("[href$='"+index+"']"))),index},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){$.data(this,"ui-tabs-destroy")?$(this).remove():$(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var li=$(this),prev=li.data("ui-tabs-aria-controls");prev?li.attr("aria-controls",prev).removeData("ui-tabs-aria-controls"):li.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(index){var disabled=this.options.disabled;disabled!==!1&&(index===undefined?disabled=!1:(index=this._getIndex(index),disabled=$.isArray(disabled)?$.map(disabled,function(num){return num!==index?num:null}):$.map(this.tabs,function(li,num){return num!==index?num:null})),this._setupDisabled(disabled))},disable:function(index){var disabled=this.options.disabled;if(disabled!==!0){if(index===undefined)disabled=!0;else{if(index=this._getIndex(index),-1!==$.inArray(index,disabled))return;disabled=$.isArray(disabled)?$.merge([index],disabled).sort():[index]}this._setupDisabled(disabled)}},load:function(index,event){index=this._getIndex(index);var that=this,tab=this.tabs.eq(index),anchor=tab.find(".ui-tabs-anchor"),panel=this._getPanelForTab(tab),eventData={tab:tab,panel:panel};isLocal(anchor[0])||(this.xhr=$.ajax(this._ajaxSettings(anchor,event,eventData)),this.xhr&&"canceled"!==this.xhr.statusText&&(tab.addClass("ui-tabs-loading"),panel.attr("aria-busy","true"),this.xhr.success(function(response){setTimeout(function(){panel.html(response),that._trigger("load",event,eventData)},1)}).complete(function(jqXHR,status){setTimeout(function(){"abort"===status&&that.panels.stop(!1,!0),tab.removeClass("ui-tabs-loading"),panel.removeAttr("aria-busy"),jqXHR===that.xhr&&delete that.xhr},1)})))},_ajaxSettings:function(anchor,event,eventData){var that=this;return{url:anchor.attr("href"),beforeSend:function(jqXHR,settings){return that._trigger("beforeLoad",event,$.extend({jqXHR:jqXHR,ajaxSettings:settings},eventData))}}},_getPanelForTab:function(tab){var id=$(tab).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+id))}})}(jQuery),function($){function addDescribedBy(elem,id){var describedby=(elem.attr("aria-describedby")||"").split(/\s+/);describedby.push(id),elem.data("ui-tooltip-id",id).attr("aria-describedby",$.trim(describedby.join(" ")))}function removeDescribedBy(elem){var id=elem.data("ui-tooltip-id"),describedby=(elem.attr("aria-describedby")||"").split(/\s+/),index=$.inArray(id,describedby);-1!==index&&describedby.splice(index,1),elem.removeData("ui-tooltip-id"),describedby=$.trim(describedby.join(" ")),describedby?elem.attr("aria-describedby",describedby):elem.removeAttr("aria-describedby")}var increments=0;$.widget("ui.tooltip",{version:"1.10.3",options:{content:function(){var title=$(this).attr("title")||"";return $("<a>").text(title).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(key,value){var that=this;return"disabled"===key?(this[value?"_disable":"_enable"](),void(this.options[key]=value)):(this._super(key,value),void("content"===key&&$.each(this.tooltips,function(id,element){that._updateContent(element)})))},_disable:function(){var that=this;$.each(this.tooltips,function(id,element){var event=$.Event("blur");event.target=event.currentTarget=element[0],that.close(event,!0)}),this.element.find(this.options.items).addBack().each(function(){var element=$(this);element.is("[title]")&&element.data("ui-tooltip-title",element.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var element=$(this);element.data("ui-tooltip-title")&&element.attr("title",element.data("ui-tooltip-title"))})},open:function(event){var that=this,target=$(event?event.target:this.element).closest(this.options.items);target.length&&!target.data("ui-tooltip-id")&&(target.attr("title")&&target.data("ui-tooltip-title",target.attr("title")),target.data("ui-tooltip-open",!0),event&&"mouseover"===event.type&&target.parents().each(function(){var blurEvent,parent=$(this);parent.data("ui-tooltip-open")&&(blurEvent=$.Event("blur"),blurEvent.target=blurEvent.currentTarget=this,that.close(blurEvent,!0)),parent.attr("title")&&(parent.uniqueId(),that.parents[this.id]={element:this,title:parent.attr("title")},parent.attr("title",""))}),this._updateContent(target,event))},_updateContent:function(target,event){var content,contentOption=this.options.content,that=this,eventType=event?event.type:null;return"string"==typeof contentOption?this._open(event,target,contentOption):(content=contentOption.call(target[0],function(response){target.data("ui-tooltip-open")&&that._delay(function(){event&&(event.type=eventType),this._open(event,target,response)})}),void(content&&this._open(event,target,content)))},_open:function(event,target,content){function position(event){positionOption.of=event,tooltip.is(":hidden")||tooltip.position(positionOption)}var tooltip,events,delayedShow,positionOption=$.extend({},this.options.position);if(content){if(tooltip=this._find(target),tooltip.length)return void tooltip.find(".ui-tooltip-content").html(content);target.is("[title]")&&(event&&"mouseover"===event.type?target.attr("title",""):target.removeAttr("title")),tooltip=this._tooltip(target),addDescribedBy(target,tooltip.attr("id")),tooltip.find(".ui-tooltip-content").html(content),this.options.track&&event&&/^mouse/.test(event.type)?(this._on(this.document,{mousemove:position}),position(event)):tooltip.position($.extend({of:target},this.options.position)),tooltip.hide(),this._show(tooltip,this.options.show),this.options.show&&this.options.show.delay&&(delayedShow=this.delayedShow=setInterval(function(){tooltip.is(":visible")&&(position(positionOption.of),clearInterval(delayedShow))},$.fx.interval)),this._trigger("open",event,{tooltip:tooltip}),events={keyup:function(event){if(event.keyCode===$.ui.keyCode.ESCAPE){var fakeEvent=$.Event(event);fakeEvent.currentTarget=target[0],this.close(fakeEvent,!0)}},remove:function(){this._removeTooltip(tooltip)}},event&&"mouseover"!==event.type||(events.mouseleave="close"),event&&"focusin"!==event.type||(events.focusout="close"),this._on(!0,target,events)}},close:function(event){var that=this,target=$(event?event.currentTarget:this.element),tooltip=this._find(target);this.closing||(clearInterval(this.delayedShow),target.data("ui-tooltip-title")&&target.attr("title",target.data("ui-tooltip-title")),removeDescribedBy(target),tooltip.stop(!0),this._hide(tooltip,this.options.hide,function(){that._removeTooltip($(this))}),target.removeData("ui-tooltip-open"),this._off(target,"mouseleave focusout keyup"),target[0]!==this.element[0]&&this._off(target,"remove"),this._off(this.document,"mousemove"),event&&"mouseleave"===event.type&&$.each(this.parents,function(id,parent){$(parent.element).attr("title",parent.title),delete that.parents[id]}),this.closing=!0,this._trigger("close",event,{tooltip:tooltip}),this.closing=!1)},_tooltip:function(element){var id="ui-tooltip-"+increments++,tooltip=$("<div>").attr({id:id,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return $("<div>").addClass("ui-tooltip-content").appendTo(tooltip),tooltip.appendTo(this.document[0].body),this.tooltips[id]=element,tooltip},_find:function(target){var id=target.data("ui-tooltip-id");return id?$("#"+id):$()},_removeTooltip:function(tooltip){tooltip.remove(),delete this.tooltips[tooltip.attr("id")]},_destroy:function(){var that=this;$.each(this.tooltips,function(id,element){var event=$.Event("blur");event.target=event.currentTarget=element[0],that.close(event,!0),$("#"+id).remove(),element.data("ui-tooltip-title")&&(element.attr("title",element.data("ui-tooltip-title")),element.removeData("ui-tooltip-title"))})}})}(jQuery),define("jquery-ui",["jquery"],function(){}),function(factory){"function"==typeof define&&define.amd?define("jquery.ui.widget",["jquery"],factory):factory(jQuery)}(function($,undefined){var uuid=0,slice=Array.prototype.slice,_cleanData=$.cleanData;$.cleanData=function(elems){for(var elem,i=0;null!=(elem=elems[i]);i++)try{$(elem).triggerHandler("remove")}catch(e){}_cleanData(elems)},$.widget=function(name,base,prototype){var fullName,existingConstructor,constructor,basePrototype,proxiedPrototype={},namespace=name.split(".")[0];name=name.split(".")[1],fullName=namespace+"-"+name,prototype||(prototype=base,base=$.Widget),$.expr[":"][fullName.toLowerCase()]=function(elem){return!!$.data(elem,fullName)},$[namespace]=$[namespace]||{},existingConstructor=$[namespace][name],constructor=$[namespace][name]=function(options,element){return this._createWidget?void(arguments.length&&this._createWidget(options,element)):new constructor(options,element)},$.extend(constructor,existingConstructor,{version:prototype.version,_proto:$.extend({},prototype),_childConstructors:[]}),basePrototype=new base,basePrototype.options=$.widget.extend({},basePrototype.options),$.each(prototype,function(prop,value){return $.isFunction(value)?void(proxiedPrototype[prop]=function(){var _super=function(){return base.prototype[prop].apply(this,arguments)},_superApply=function(args){return base.prototype[prop].apply(this,args)};return function(){var returnValue,__super=this._super,__superApply=this._superApply;return this._super=_super,this._superApply=_superApply,returnValue=value.apply(this,arguments),this._super=__super,this._superApply=__superApply,returnValue}}()):void(proxiedPrototype[prop]=value)}),constructor.prototype=$.widget.extend(basePrototype,{widgetEventPrefix:existingConstructor?basePrototype.widgetEventPrefix:name},proxiedPrototype,{constructor:constructor,namespace:namespace,widgetName:name,widgetFullName:fullName}),existingConstructor?($.each(existingConstructor._childConstructors,function(i,child){var childPrototype=child.prototype;$.widget(childPrototype.namespace+"."+childPrototype.widgetName,constructor,child._proto)}),delete existingConstructor._childConstructors):base._childConstructors.push(constructor),$.widget.bridge(name,constructor)},$.widget.extend=function(target){for(var key,value,input=slice.call(arguments,1),inputIndex=0,inputLength=input.length;inputLength>inputIndex;inputIndex++)for(key in input[inputIndex])value=input[inputIndex][key],input[inputIndex].hasOwnProperty(key)&&value!==undefined&&(target[key]=$.isPlainObject(value)?$.isPlainObject(target[key])?$.widget.extend({},target[key],value):$.widget.extend({},value):value);return target},$.widget.bridge=function(name,object){var fullName=object.prototype.widgetFullName||name;$.fn[name]=function(options){var isMethodCall="string"==typeof options,args=slice.call(arguments,1),returnValue=this;return options=!isMethodCall&&args.length?$.widget.extend.apply(null,[options].concat(args)):options,this.each(isMethodCall?function(){var methodValue,instance=$.data(this,fullName);return instance?$.isFunction(instance[options])&&"_"!==options.charAt(0)?(methodValue=instance[options].apply(instance,args),methodValue!==instance&&methodValue!==undefined?(returnValue=methodValue&&methodValue.jquery?returnValue.pushStack(methodValue.get()):methodValue,!1):void 0):$.error("no such method '"+options+"' for "+name+" widget instance"):$.error("cannot call methods on "+name+" prior to initialization; attempted to call method '"+options+"'")}:function(){var instance=$.data(this,fullName);instance?instance.option(options||{})._init():$.data(this,fullName,new object(options,this))}),returnValue}},$.Widget=function(){},$.Widget._childConstructors=[],$.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(options,element){element=$(element||this.defaultElement||this)[0],this.element=$(element),this.uuid=uuid++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=$.widget.extend({},this.options,this._getCreateOptions(),options),this.bindings=$(),this.hoverable=$(),this.focusable=$(),element!==this&&($.data(element,this.widgetFullName,this),this._on(!0,this.element,{remove:function(event){event.target===element&&this.destroy()}}),this.document=$(element.style?element.ownerDocument:element.document||element),this.window=$(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:$.noop,_getCreateEventData:$.noop,_create:$.noop,_init:$.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData($.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:$.noop,widget:function(){return this.element},option:function(key,value){var parts,curOption,i,options=key;if(0===arguments.length)return $.widget.extend({},this.options);if("string"==typeof key)if(options={},parts=key.split("."),key=parts.shift(),parts.length){for(curOption=options[key]=$.widget.extend({},this.options[key]),i=0;i<parts.length-1;i++)curOption[parts[i]]=curOption[parts[i]]||{},curOption=curOption[parts[i]];if(key=parts.pop(),value===undefined)return curOption[key]===undefined?null:curOption[key];curOption[key]=value}else{if(value===undefined)return this.options[key]===undefined?null:this.options[key];options[key]=value}return this._setOptions(options),this},_setOptions:function(options){var key;for(key in options)this._setOption(key,options[key]);return this},_setOption:function(key,value){return this.options[key]=value,"disabled"===key&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!value).attr("aria-disabled",value),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(suppressDisabledCheck,element,handlers){var delegateElement,instance=this;"boolean"!=typeof suppressDisabledCheck&&(handlers=element,element=suppressDisabledCheck,suppressDisabledCheck=!1),handlers?(element=delegateElement=$(element),this.bindings=this.bindings.add(element)):(handlers=element,element=this.element,delegateElement=this.widget()),$.each(handlers,function(event,handler){function handlerProxy(){return suppressDisabledCheck||instance.options.disabled!==!0&&!$(this).hasClass("ui-state-disabled")?("string"==typeof handler?instance[handler]:handler).apply(instance,arguments):void 0}"string"!=typeof handler&&(handlerProxy.guid=handler.guid=handler.guid||handlerProxy.guid||$.guid++);var match=event.match(/^(\w+)\s*(.*)$/),eventName=match[1]+instance.eventNamespace,selector=match[2];selector?delegateElement.delegate(selector,eventName,handlerProxy):element.bind(eventName,handlerProxy)})},_off:function(element,eventName){eventName=(eventName||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,element.unbind(eventName).undelegate(eventName)},_delay:function(handler,delay){function handlerProxy(){return("string"==typeof handler?instance[handler]:handler).apply(instance,arguments)}var instance=this;return setTimeout(handlerProxy,delay||0)},_hoverable:function(element){this.hoverable=this.hoverable.add(element),this._on(element,{mouseenter:function(event){$(event.currentTarget).addClass("ui-state-hover")},mouseleave:function(event){$(event.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(element){this.focusable=this.focusable.add(element),this._on(element,{focusin:function(event){$(event.currentTarget).addClass("ui-state-focus")},focusout:function(event){$(event.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(type,event,data){var prop,orig,callback=this.options[type];if(data=data||{},event=$.Event(event),event.type=(type===this.widgetEventPrefix?type:this.widgetEventPrefix+type).toLowerCase(),event.target=this.element[0],orig=event.originalEvent)for(prop in orig)prop in event||(event[prop]=orig[prop]);return this.element.trigger(event,data),!($.isFunction(callback)&&callback.apply(this.element[0],[event].concat(data))===!1||event.isDefaultPrevented())}},$.each({show:"fadeIn",hide:"fadeOut"},function(method,defaultEffect){$.Widget.prototype["_"+method]=function(element,options,callback){"string"==typeof options&&(options={effect:options});var hasOptions,effectName=options?options===!0||"number"==typeof options?defaultEffect:options.effect||defaultEffect:method;options=options||{},"number"==typeof options&&(options={duration:options}),hasOptions=!$.isEmptyObject(options),options.complete=callback,options.delay&&element.delay(options.delay),hasOptions&&$.effects&&$.effects.effect[effectName]?element[method](options):effectName!==method&&element[effectName]?element[effectName](options.duration,options.easing,callback):element.queue(function(next){$(this)[method](),callback&&callback.call(element[0]),next()})}})}),function(window){function noop(){}function defineBridget($){function addOptionMethod(PluginClass){PluginClass.prototype.option||(PluginClass.prototype.option=function(opts){$.isPlainObject(opts)&&(this.options=$.extend(!0,this.options,opts))})}function bridge(namespace,PluginClass){$.fn[namespace]=function(options){if("string"==typeof options){for(var args=slice.call(arguments,1),i=0,len=this.length;len>i;i++){var elem=this[i],instance=$.data(elem,namespace);if(instance)if($.isFunction(instance[options])&&"_"!==options.charAt(0)){var returnValue=instance[options].apply(instance,args);if(void 0!==returnValue)return returnValue}else logError("no such method '"+options+"' for "+namespace+" instance");else logError("cannot call methods on "+namespace+" prior to initialization; attempted to call '"+options+"'")}return this}return this.each(function(){var instance=$.data(this,namespace);instance?(instance.option(options),instance._init()):(instance=new PluginClass(this,options),$.data(this,namespace,instance))})}}if($){var logError="undefined"==typeof console?noop:function(message){console.error(message)};return $.bridget=function(namespace,PluginClass){addOptionMethod(PluginClass),bridge(namespace,PluginClass)},$.bridget}}var slice=Array.prototype.slice;"function"==typeof define&&define.amd?define("jquery-bridget",["jquery"],defineBridget):defineBridget(window.jQuery)}(window),function($){"undefined"==typeof $.fn.each2&&$.extend($.fn,{each2:function(c){for(var j=$([0]),i=-1,l=this.length;++i<l&&(j.context=j[0]=this[i])&&c.call(j[0],i,j)!==!1;);return this}})}(jQuery),function($,undefined){function reinsertElement(element){var placeholder=$(document.createTextNode(""));element.before(placeholder),placeholder.before(element),placeholder.remove()}function stripDiacritics(str){function match(a){return DIACRITICS[a]||a}return str.replace(/[^\u0000-\u007E]/g,match)}function indexOf(value,array){for(var i=0,l=array.length;l>i;i+=1)if(equal(value,array[i]))return i;return-1}function measureScrollbar(){var $template=$(MEASURE_SCROLLBAR_TEMPLATE);$template.appendTo(document.body);var dim={width:$template.width()-$template[0].clientWidth,height:$template.height()-$template[0].clientHeight};return $template.remove(),dim}function equal(a,b){return a===b?!0:a===undefined||b===undefined?!1:null===a||null===b?!1:a.constructor===String?a+""==b+"":b.constructor===String?b+""==a+"":!1}function splitVal(string,separator,transform){var val,i,l;if(null===string||string.length<1)return[];for(val=string.split(separator),i=0,l=val.length;l>i;i+=1)val[i]=transform(val[i]);return val}function getSideBorderPadding(element){return element.outerWidth(!1)-element.width()}function installKeyUpChangeEvent(element){var key="keyup-change-value";element.on("keydown",function(){$.data(element,key)===undefined&&$.data(element,key,element.val())}),element.on("keyup",function(){var val=$.data(element,key);val!==undefined&&element.val()!==val&&($.removeData(element,key),element.trigger("keyup-change"))})}function installFilteredMouseMove(element){element.on("mousemove",function(e){var lastpos=lastMousePosition;(lastpos===undefined||lastpos.x!==e.pageX||lastpos.y!==e.pageY)&&$(e.target).trigger("mousemove-filtered",e)})}function debounce(quietMillis,fn,ctx){ctx=ctx||undefined;var timeout;return function(){var args=arguments;window.clearTimeout(timeout),timeout=window.setTimeout(function(){fn.apply(ctx,args)},quietMillis)}}function installDebouncedScroll(threshold,element){var notify=debounce(threshold,function(e){element.trigger("scroll-debounced",e)});element.on("scroll",function(e){indexOf(e.target,element.get())>=0&&notify(e)})}function focus($el){$el[0]!==document.activeElement&&window.setTimeout(function(){var range,el=$el[0],pos=$el.val().length;$el.focus();var isVisible=el.offsetWidth>0||el.offsetHeight>0;isVisible&&el===document.activeElement&&(el.setSelectionRange?el.setSelectionRange(pos,pos):el.createTextRange&&(range=el.createTextRange(),range.collapse(!1),range.select()))},0)}function getCursorInfo(el){el=$(el)[0];var offset=0,length=0;
if("selectionStart"in el)offset=el.selectionStart,length=el.selectionEnd-offset;else if("selection"in document){el.focus();var sel=document.selection.createRange();length=document.selection.createRange().text.length,sel.moveStart("character",-el.value.length),offset=sel.text.length-length}return{offset:offset,length:length}}function killEvent(event){event.preventDefault(),event.stopPropagation()}function killEventImmediately(event){event.preventDefault(),event.stopImmediatePropagation()}function measureTextWidth(e){if(!sizer){var style=e[0].currentStyle||window.getComputedStyle(e[0],null);sizer=$(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:style.fontSize,fontFamily:style.fontFamily,fontStyle:style.fontStyle,fontWeight:style.fontWeight,letterSpacing:style.letterSpacing,textTransform:style.textTransform,whiteSpace:"nowrap"}),sizer.attr("class","select2-sizer"),$(document.body).append(sizer)}return sizer.text(e.val()),sizer.width()}function syncCssClasses(dest,src,adapter){var classes,adapted,replacements=[];classes=$.trim(dest.attr("class")),classes&&(classes=""+classes,$(classes.split(/\s+/)).each2(function(){0===this.indexOf("select2-")&&replacements.push(this)})),classes=$.trim(src.attr("class")),classes&&(classes=""+classes,$(classes.split(/\s+/)).each2(function(){0!==this.indexOf("select2-")&&(adapted=adapter(this),adapted&&replacements.push(adapted))})),dest.attr("class",replacements.join(" "))}function markMatch(text,term,markup,escapeMarkup){var match=stripDiacritics(text.toUpperCase()).indexOf(stripDiacritics(term.toUpperCase())),tl=term.length;return 0>match?void markup.push(escapeMarkup(text)):(markup.push(escapeMarkup(text.substring(0,match))),markup.push("<span class='select2-match'>"),markup.push(escapeMarkup(text.substring(match,match+tl))),markup.push("</span>"),void markup.push(escapeMarkup(text.substring(match+tl,text.length))))}function defaultEscapeMarkup(markup){var replace_map={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(markup).replace(/[&<>"'\/\\]/g,function(match){return replace_map[match]})}function ajax(options){var timeout,handler=null,quietMillis=options.quietMillis||100,ajaxUrl=options.url,self=this;return function(query){window.clearTimeout(timeout),timeout=window.setTimeout(function(){var data=options.data,url=ajaxUrl,transport=options.transport||$.fn.select2.ajaxDefaults.transport,deprecated={type:options.type||"GET",cache:options.cache||!1,jsonpCallback:options.jsonpCallback||undefined,dataType:options.dataType||"json"},params=$.extend({},$.fn.select2.ajaxDefaults.params,deprecated);data=data?data.call(self,query.term,query.page,query.context):null,url="function"==typeof url?url.call(self,query.term,query.page,query.context):url,handler&&"function"==typeof handler.abort&&handler.abort(),options.params&&($.isFunction(options.params)?$.extend(params,options.params.call(self)):$.extend(params,options.params)),$.extend(params,{url:url,dataType:options.dataType,data:data,success:function(data){var results=options.results(data,query.page,query);query.callback(results)},error:function(jqXHR,textStatus,errorThrown){var results={hasError:!0,jqXHR:jqXHR,textStatus:textStatus,errorThrown:errorThrown};query.callback(results)}}),handler=transport.call(self,params)},quietMillis)}}function local(options){var dataText,tmp,data=options,text=function(item){return""+item.text};$.isArray(data)&&(tmp=data,data={results:tmp}),$.isFunction(data)===!1&&(tmp=data,data=function(){return tmp});var dataItem=data();return dataItem.text&&(text=dataItem.text,$.isFunction(text)||(dataText=dataItem.text,text=function(item){return item[dataText]})),function(query){var process,t=query.term,filtered={results:[]};return""===t?void query.callback(data()):(process=function(datum,collection){var group,attr;if(datum=datum[0],datum.children){group={};for(attr in datum)datum.hasOwnProperty(attr)&&(group[attr]=datum[attr]);group.children=[],$(datum.children).each2(function(i,childDatum){process(childDatum,group.children)}),(group.children.length||query.matcher(t,text(group),datum))&&collection.push(group)}else query.matcher(t,text(datum),datum)&&collection.push(datum)},$(data().results).each2(function(i,datum){process(datum,filtered.results)}),void query.callback(filtered))}}function tags(data){var isFunc=$.isFunction(data);return function(query){var t=query.term,filtered={results:[]},result=isFunc?data(query):data;$.isArray(result)&&($(result).each(function(){var isObject=this.text!==undefined,text=isObject?this.text:this;(""===t||query.matcher(t,text))&&filtered.results.push(isObject?this:{id:this,text:this})}),query.callback(filtered))}}function checkFormatter(formatter,formatterName){if($.isFunction(formatter))return!0;if(!formatter)return!1;if("string"==typeof formatter)return!0;throw new Error(formatterName+" must be a string, function, or falsy value")}function evaluate(val,context){if($.isFunction(val)){var args=Array.prototype.slice.call(arguments,2);return val.apply(context,args)}return val}function countResults(results){var count=0;return $.each(results,function(i,item){item.children?count+=countResults(item.children):count++}),count}function defaultTokenizer(input,selection,selectCallback,opts){var token,index,i,l,separator,original=input,dupe=!1;if(!opts.createSearchChoice||!opts.tokenSeparators||opts.tokenSeparators.length<1)return undefined;for(;;){for(index=-1,i=0,l=opts.tokenSeparators.length;l>i&&(separator=opts.tokenSeparators[i],index=input.indexOf(separator),!(index>=0));i++);if(0>index)break;if(token=input.substring(0,index),input=input.substring(index+separator.length),token.length>0&&(token=opts.createSearchChoice.call(this,token,selection),token!==undefined&&null!==token&&opts.id(token)!==undefined&&null!==opts.id(token))){for(dupe=!1,i=0,l=selection.length;l>i;i++)if(equal(opts.id(token),opts.id(selection[i]))){dupe=!0;break}dupe||selectCallback(token)}}return original!==input?input:void 0}function cleanupJQueryElements(){var self=this;$.each(arguments,function(i,element){self[element].remove(),self[element]=null})}function clazz(SuperClass,methods){var constructor=function(){};return constructor.prototype=new SuperClass,constructor.prototype.constructor=constructor,constructor.prototype.parent=SuperClass.prototype,constructor.prototype=$.extend(constructor.prototype,methods),constructor}if(window.Select2===undefined){var AbstractSelect2,SingleSelect2,MultiSelect2,nextUid,sizer,$document,scrollBarDimensions,lastMousePosition={x:0,y:0},KEY={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(k){switch(k=k.which?k.which:k){case KEY.LEFT:case KEY.RIGHT:case KEY.UP:case KEY.DOWN:return!0}return!1},isControl:function(e){var k=e.which;switch(k){case KEY.SHIFT:case KEY.CTRL:case KEY.ALT:return!0}return e.metaKey?!0:!1},isFunctionKey:function(k){return k=k.which?k.which:k,k>=112&&123>=k}},MEASURE_SCROLLBAR_TEMPLATE="<div class='select2-measure-scrollbar'></div>",DIACRITICS={"":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"AA","":"AE","":"AE","":"AE","":"AO","":"AU","":"AV","":"AV","":"AY","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"DZ","":"DZ","":"Dz","":"Dz","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"F","":"F","":"F","":"F","":"F","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"J","":"J","":"J","":"J","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"LJ","":"Lj","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"NJ","":"Nj","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"OI","":"OO","":"OU","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"Q","":"Q","":"Q","":"Q","":"Q","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"TZ","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"VY","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"X","":"X","":"X","":"X","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"aa","":"ae","":"ae","":"ae","":"ao","":"au","":"av","":"av","":"ay","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"dz","":"dz","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"f","":"f","":"f","":"f","":"f","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"hv","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"j","":"j","":"j","":"j","":"j","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"lj","":"m","":"m","":"m","":"m","":"m","":"m","":"m","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"nj","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"oi","":"ou","":"oo","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"q","":"q","":"q","":"q","":"q","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"tz","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"vy","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"x","":"x","":"x","":"x","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};$document=$(document),nextUid=function(){var counter=1;return function(){return counter++}}(),AbstractSelect2=clazz(Object,{bind:function(func){var self=this;return function(){func.apply(self,arguments)}},init:function(opts){var results,search,resultsSelector=".select2-results";this.opts=opts=this.prepareOpts(opts),this.id=opts.id,opts.element.data("select2")!==undefined&&null!==opts.element.data("select2")&&opts.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=$(".select2-hidden-accessible"),0==this.liveRegion.length&&(this.liveRegion=$("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body)),this.containerId="s2id_"+(opts.element.attr("id")||"autogen"+nextUid()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",opts.element.attr("title")),this.body=$(document.body),syncCssClasses(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",opts.element.attr("style")),this.container.css(evaluate(opts.containerCss,this.opts.element)),this.container.addClass(evaluate(opts.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",killEvent),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),syncCssClasses(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(evaluate(opts.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",killEvent),this.results=results=this.container.find(resultsSelector),this.search=search=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",killEvent),installFilteredMouseMove(this.results),this.dropdown.on("mousemove-filtered",resultsSelector,this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",resultsSelector,this.bind(function(event){this._touchEvent=!0,this.highlightUnderEvent(event)})),this.dropdown.on("touchmove",resultsSelector,this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",resultsSelector,this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind(function(){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())})),installDebouncedScroll(80,this.results),this.dropdown.on("scroll-debounced",resultsSelector,this.bind(this.loadMoreIfNeeded)),$(this.container).on("change",".select2-input",function(e){e.stopPropagation()}),$(this.dropdown).on("change",".select2-input",function(e){e.stopPropagation()}),$.fn.mousewheel&&results.mousewheel(function(e,delta,deltaX,deltaY){var top=results.scrollTop();deltaY>0&&0>=top-deltaY?(results.scrollTop(0),killEvent(e)):0>deltaY&&results.get(0).scrollHeight-results.scrollTop()+deltaY<=results.height()&&(results.scrollTop(results.get(0).scrollHeight-results.height()),killEvent(e))}),installKeyUpChangeEvent(search),search.on("keyup-change input paste",this.bind(this.updateResults)),search.on("focus",function(){search.addClass("select2-focused")}),search.on("blur",function(){search.removeClass("select2-focused")}),this.dropdown.on("mouseup",resultsSelector,this.bind(function(e){$(e.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(e),this.selectHighlighted(e))})),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",function(e){e.stopPropagation()}),this.nextSearchTerm=undefined,$.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==opts.maximumInputLength&&this.search.attr("maxlength",opts.maximumInputLength);var disabled=opts.element.prop("disabled");disabled===undefined&&(disabled=!1),this.enable(!disabled);var readonly=opts.element.prop("readonly");readonly===undefined&&(readonly=!1),this.readonly(readonly),scrollBarDimensions=scrollBarDimensions||measureScrollbar(),this.autofocus=opts.element.prop("autofocus"),opts.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",opts.searchInputPlaceholder)},destroy:function(){var element=this.opts.element,select2=element.data("select2"),self=this;this.close(),element.length&&element[0].detachEvent&&self._sync&&element.each(function(){self._sync&&this.detachEvent("onpropertychange",self._sync)}),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,select2!==undefined&&(select2.container.remove(),select2.liveRegion.remove(),select2.dropdown.remove(),element.show().removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?element.attr({tabindex:this.elementTabIndex}):element.removeAttr("tabindex"),element.show()),cleanupJQueryElements.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(element){return element.is("option")?{id:element.prop("value"),text:element.text(),element:element.get(),css:element.attr("class"),disabled:element.prop("disabled"),locked:equal(element.attr("locked"),"locked")||equal(element.data("locked"),!0)}:element.is("optgroup")?{text:element.attr("label"),children:[],element:element.get(),css:element.attr("class")}:void 0},prepareOpts:function(opts){var element,select,idKey,ajaxUrl,self=this;if(element=opts.element,"select"===element.get(0).tagName.toLowerCase()&&(this.select=select=opts.element),select&&$.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in opts)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),opts=$.extend({},{populateResults:function(container,results,query){var populate,id=this.opts.id,liveRegion=this.liveRegion;(populate=function(results,container,depth){var i,l,result,selectable,disabled,compound,node,label,innerContainer,formatted;results=opts.sortResults(results,container,query);var nodes=[];for(i=0,l=results.length;l>i;i+=1)result=results[i],disabled=result.disabled===!0,selectable=!disabled&&id(result)!==undefined,compound=result.children&&result.children.length>0,node=$("<li></li>"),node.addClass("select2-results-dept-"+depth),node.addClass("select2-result"),node.addClass(selectable?"select2-result-selectable":"select2-result-unselectable"),disabled&&node.addClass("select2-disabled"),compound&&node.addClass("select2-result-with-children"),node.addClass(self.opts.formatResultCssClass(result)),node.attr("role","presentation"),label=$(document.createElement("div")),label.addClass("select2-result-label"),label.attr("id","select2-result-label-"+nextUid()),label.attr("role","option"),formatted=opts.formatResult(result,label,query,self.opts.escapeMarkup),formatted!==undefined&&(label.html(formatted),node.append(label)),compound&&(innerContainer=$("<ul></ul>"),innerContainer.addClass("select2-result-sub"),populate(result.children,innerContainer,depth+1),node.append(innerContainer)),node.data("select2-data",result),nodes.push(node[0]);container.append(nodes),liveRegion.text(opts.formatMatches(results.length))})(results,container,0)}},$.fn.select2.defaults,opts),"function"!=typeof opts.id&&(idKey=opts.id,opts.id=function(e){return e[idKey]}),$.isArray(opts.element.data("select2Tags"))){if("tags"in opts)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+opts.element.attr("id");opts.tags=opts.element.data("select2Tags")}if(select?(opts.query=this.bind(function(query){var children,placeholderOption,process,data={results:[],more:!1},term=query.term;process=function(element,collection){var group;element.is("option")?query.matcher(term,element.text(),element)&&collection.push(self.optionToData(element)):element.is("optgroup")&&(group=self.optionToData(element),element.children().each2(function(i,elm){process(elm,group.children)}),group.children.length>0&&collection.push(group))},children=element.children(),this.getPlaceholder()!==undefined&&children.length>0&&(placeholderOption=this.getPlaceholderOption(),placeholderOption&&(children=children.not(placeholderOption))),children.each2(function(i,elm){process(elm,data.results)}),query.callback(data)}),opts.id=function(e){return e.id}):"query"in opts||("ajax"in opts?(ajaxUrl=opts.element.data("ajax-url"),ajaxUrl&&ajaxUrl.length>0&&(opts.ajax.url=ajaxUrl),opts.query=ajax.call(opts.element,opts.ajax)):"data"in opts?opts.query=local(opts.data):"tags"in opts&&(opts.query=tags(opts.tags),opts.createSearchChoice===undefined&&(opts.createSearchChoice=function(term){return{id:$.trim(term),text:$.trim(term)}}),opts.initSelection===undefined&&(opts.initSelection=function(element,callback){var data=[];$(splitVal(element.val(),opts.separator,opts.transformVal)).each(function(){var obj={id:this,text:this},tags=opts.tags;$.isFunction(tags)&&(tags=tags()),$(tags).each(function(){return equal(this.id,obj.id)?(obj=this,!1):void 0}),data.push(obj)}),callback(data)}))),"function"!=typeof opts.query)throw"query function not defined for Select2 "+opts.element.attr("id");if("top"===opts.createSearchChoicePosition)opts.createSearchChoicePosition=function(list,item){list.unshift(item)};else if("bottom"===opts.createSearchChoicePosition)opts.createSearchChoicePosition=function(list,item){list.push(item)};else if("function"!=typeof opts.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return opts},monitorSource:function(){var observer,el=this.opts.element,self=this;el.on("change.select2",this.bind(function(){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()})),this._sync=this.bind(function(){var disabled=el.prop("disabled");disabled===undefined&&(disabled=!1),this.enable(!disabled);var readonly=el.prop("readonly");readonly===undefined&&(readonly=!1),this.readonly(readonly),this.container&&(syncCssClasses(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(evaluate(this.opts.containerCssClass,this.opts.element))),this.dropdown&&(syncCssClasses(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(evaluate(this.opts.dropdownCssClass,this.opts.element)))}),el.length&&el[0].attachEvent&&el.each(function(){this.attachEvent("onpropertychange",self._sync)}),observer=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,observer!==undefined&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new observer(function(mutations){$.each(mutations,self._sync)}),this.propertyObserver.observe(el.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(data){var evt=$.Event("select2-selecting",{val:this.id(data),object:data,choice:data});return this.opts.element.trigger(evt),!evt.isDefaultPrevented()},triggerChange:function(details){details=details||{},details=$.extend({},details,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(details),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return this.enabledInterface===!0},enableInterface:function(){var enabled=this._enabled&&!this._readonly,disabled=!enabled;return enabled===this.enabledInterface?!1:(this.container.toggleClass("select2-container-disabled",disabled),this.close(),this.enabledInterface=enabled,!0)},enable:function(enabled){enabled===undefined&&(enabled=!0),this._enabled!==enabled&&(this._enabled=enabled,this.opts.element.prop("disabled",!enabled),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(enabled){enabled===undefined&&(enabled=!1),this._readonly!==enabled&&(this._readonly=enabled,this.opts.element.prop("readonly",enabled),this.enableInterface())},opened:function(){return this.container?this.container.hasClass("select2-dropdown-open"):!1},positionDropdown:function(){var bodyOffset,above,changeDirection,css,resultsListNode,$dropdown=this.dropdown,container=this.container,offset=container.offset(),height=container.outerHeight(!1),width=container.outerWidth(!1),dropHeight=$dropdown.outerHeight(!1),$window=$(window),windowWidth=$window.width(),windowHeight=$window.height(),viewPortRight=$window.scrollLeft()+windowWidth,viewportBottom=$window.scrollTop()+windowHeight,dropTop=offset.top+height,dropLeft=offset.left,enoughRoomBelow=viewportBottom>=dropTop+dropHeight,enoughRoomAbove=offset.top-dropHeight>=$window.scrollTop(),dropWidth=$dropdown.outerWidth(!1),enoughRoomOnRight=function(){return viewPortRight>=dropLeft+dropWidth},enoughRoomOnLeft=function(){return offset.left+viewPortRight+container.outerWidth(!1)>dropWidth},aboveNow=$dropdown.hasClass("select2-drop-above");aboveNow?(above=!0,!enoughRoomAbove&&enoughRoomBelow&&(changeDirection=!0,above=!1)):(above=!1,!enoughRoomBelow&&enoughRoomAbove&&(changeDirection=!0,above=!0)),changeDirection&&($dropdown.hide(),offset=this.container.offset(),height=this.container.outerHeight(!1),width=this.container.outerWidth(!1),dropHeight=$dropdown.outerHeight(!1),viewPortRight=$window.scrollLeft()+windowWidth,viewportBottom=$window.scrollTop()+windowHeight,dropTop=offset.top+height,dropLeft=offset.left,dropWidth=$dropdown.outerWidth(!1),$dropdown.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(resultsListNode=$(".select2-results",$dropdown)[0],$dropdown.addClass("select2-drop-auto-width"),$dropdown.css("width",""),dropWidth=$dropdown.outerWidth(!1)+(resultsListNode.scrollHeight===resultsListNode.clientHeight?0:scrollBarDimensions.width),dropWidth>width?width=dropWidth:dropWidth=width,dropHeight=$dropdown.outerHeight(!1)):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(bodyOffset=this.body.offset(),dropTop-=bodyOffset.top,dropLeft-=bodyOffset.left),!enoughRoomOnRight()&&enoughRoomOnLeft()&&(dropLeft=offset.left+this.container.outerWidth(!1)-dropWidth),css={left:dropLeft,width:width},above?(css.top=offset.top-dropHeight,css.bottom="auto",this.container.addClass("select2-drop-above"),$dropdown.addClass("select2-drop-above")):(css.top=dropTop,css.bottom="auto",this.container.removeClass("select2-drop-above"),$dropdown.removeClass("select2-drop-above")),css=$.extend(css,evaluate(this.opts.dropdownCss,this.opts.element)),$dropdown.css(css)},shouldOpen:function(){var event;return this.opened()?!1:this._enabled===!1||this._readonly===!0?!1:(event=$.Event("select2-opening"),this.opts.element.trigger(event),!event.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(this.opening(),$document.on("mousemove.select2Event",function(e){lastMousePosition.x=e.pageX,lastMousePosition.y=e.pageY}),!0):!1},opening:function(){var mask,cid=this.containerEventName,scroll="scroll."+cid,resize="resize."+cid,orient="orientationchange."+cid;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),mask=$("#select2-drop-mask"),0===mask.length&&(mask=$(document.createElement("div")),mask.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),mask.hide(),mask.appendTo(this.body),mask.on("mousedown touchstart click",function(e){reinsertElement(mask);var self,dropdown=$("#select2-drop");dropdown.length>0&&(self=dropdown.data("select2"),self.opts.selectOnBlur&&self.selectHighlighted({noFocus:!0}),self.close(),e.preventDefault(),e.stopPropagation())})),this.dropdown.prev()[0]!==mask[0]&&this.dropdown.before(mask),$("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),mask.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var that=this;this.container.parents().add(window).each(function(){$(this).on(resize+" "+scroll+" "+orient,function(){that.opened()&&that.positionDropdown()})})},close:function(){if(this.opened()){var cid=this.containerEventName,scroll="scroll."+cid,resize="resize."+cid,orient="orientationchange."+cid;this.container.parents().add(window).each(function(){$(this).off(scroll).off(resize).off(orient)}),this.clearDropdownAlignmentPreference(),$("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),$document.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger($.Event("select2-close"))}},externalSearch:function(term){this.open(),this.search.val(term),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return evaluate(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var children,index,child,hb,rb,y,more,topOffset,results=this.results;if(index=this.highlight(),!(0>index)){if(0==index)return void results.scrollTop(0);children=this.findHighlightableChoices().find(".select2-result-label"),child=$(children[index]),topOffset=(child.offset()||{}).top||0,hb=topOffset+child.outerHeight(!0),index===children.length-1&&(more=results.find("li.select2-more-results"),more.length>0&&(hb=more.offset().top+more.outerHeight(!0))),rb=results.offset().top+results.outerHeight(!1),hb>rb&&results.scrollTop(results.scrollTop()+(hb-rb)),y=topOffset-results.offset().top,0>y&&"none"!=child.css("display")&&results.scrollTop(results.scrollTop()+y)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(delta){for(var choices=this.findHighlightableChoices(),index=this.highlight();index>-1&&index<choices.length;){index+=delta;
var choice=$(choices[index]);if(choice.hasClass("select2-result-selectable")&&!choice.hasClass("select2-disabled")&&!choice.hasClass("select2-selected")){this.highlight(index);break}}},highlight:function(index){var choice,data,choices=this.findHighlightableChoices();return 0===arguments.length?indexOf(choices.filter(".select2-highlighted")[0],choices.get()):(index>=choices.length&&(index=choices.length-1),0>index&&(index=0),this.removeHighlight(),choice=$(choices[index]),choice.addClass("select2-highlighted"),this.search.attr("aria-activedescendant",choice.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(choice.text()),data=choice.data("select2-data"),void(data&&this.opts.element.trigger({type:"select2-highlight",val:this.id(data),choice:data})))},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(event){var el=$(event.target).closest(".select2-result-selectable");if(el.length>0&&!el.is(".select2-highlighted")){var choices=this.findHighlightableChoices();this.highlight(choices.index(el))}else 0==el.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var below,results=this.results,more=results.find("li.select2-more-results"),page=this.resultsPage+1,self=this,term=this.search.val(),context=this.context;0!==more.length&&(below=more.offset().top-results.offset().top-results.height(),below<=this.opts.loadMorePadding&&(more.addClass("select2-active"),this.opts.query({element:this.opts.element,term:term,page:page,context:context,matcher:this.opts.matcher,callback:this.bind(function(data){self.opened()&&(self.opts.populateResults.call(this,results,data.results,{term:term,page:page,context:context}),self.postprocessResults(data,!1,!1),data.more===!0?(more.detach().appendTo(results).html(self.opts.escapeMarkup(evaluate(self.opts.formatLoadMore,self.opts.element,page+1))),window.setTimeout(function(){self.loadMoreIfNeeded()},10)):more.remove(),self.positionDropdown(),self.resultsPage=page,self.context=data.context,this.opts.element.trigger({type:"select2-loaded",items:data}))})})))},tokenize:function(){},updateResults:function(initial){function postRender(){search.removeClass("select2-active"),self.positionDropdown(),self.liveRegion.text(results.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?results.text():self.opts.formatMatches(results.find('.select2-result-selectable:not(".select2-selected")').length))}function render(html){results.html(html),postRender()}var data,input,queryNumber,search=this.search,results=this.results,opts=this.opts,self=this,term=search.val(),lastTerm=$.data(this.container,"select2-last-term");if((initial===!0||!lastTerm||!equal(term,lastTerm))&&($.data(this.container,"select2-last-term",term),initial===!0||this.showSearchInput!==!1&&this.opened())){queryNumber=++this.queryCount;var maxSelSize=this.getMaximumSelectionSize();if(maxSelSize>=1&&(data=this.data(),$.isArray(data)&&data.length>=maxSelSize&&checkFormatter(opts.formatSelectionTooBig,"formatSelectionTooBig")))return void render("<li class='select2-selection-limit'>"+evaluate(opts.formatSelectionTooBig,opts.element,maxSelSize)+"</li>");if(search.val().length<opts.minimumInputLength)return render(checkFormatter(opts.formatInputTooShort,"formatInputTooShort")?"<li class='select2-no-results'>"+evaluate(opts.formatInputTooShort,opts.element,search.val(),opts.minimumInputLength)+"</li>":""),void(initial&&this.showSearch&&this.showSearch(!0));if(opts.maximumInputLength&&search.val().length>opts.maximumInputLength)return void render(checkFormatter(opts.formatInputTooLong,"formatInputTooLong")?"<li class='select2-no-results'>"+evaluate(opts.formatInputTooLong,opts.element,search.val(),opts.maximumInputLength)+"</li>":"");opts.formatSearching&&0===this.findHighlightableChoices().length&&render("<li class='select2-searching'>"+evaluate(opts.formatSearching,opts.element)+"</li>"),search.addClass("select2-active"),this.removeHighlight(),input=this.tokenize(),input!=undefined&&null!=input&&search.val(input),this.resultsPage=1,opts.query({element:opts.element,term:search.val(),page:this.resultsPage,context:null,matcher:opts.matcher,callback:this.bind(function(data){var def;if(queryNumber==this.queryCount){if(!this.opened())return void this.search.removeClass("select2-active");if(data.hasError!==undefined&&checkFormatter(opts.formatAjaxError,"formatAjaxError"))return void render("<li class='select2-ajax-error'>"+evaluate(opts.formatAjaxError,opts.element,data.jqXHR,data.textStatus,data.errorThrown)+"</li>");if(this.context=data.context===undefined?null:data.context,this.opts.createSearchChoice&&""!==search.val()&&(def=this.opts.createSearchChoice.call(self,search.val(),data.results),def!==undefined&&null!==def&&self.id(def)!==undefined&&null!==self.id(def)&&0===$(data.results).filter(function(){return equal(self.id(this),self.id(def))}).length&&this.opts.createSearchChoicePosition(data.results,def)),0===data.results.length&&checkFormatter(opts.formatNoMatches,"formatNoMatches"))return void render("<li class='select2-no-results'>"+evaluate(opts.formatNoMatches,opts.element,search.val())+"</li>");results.empty(),self.opts.populateResults.call(this,results,data.results,{term:search.val(),page:this.resultsPage,context:null}),data.more===!0&&checkFormatter(opts.formatLoadMore,"formatLoadMore")&&(results.append("<li class='select2-more-results'>"+opts.escapeMarkup(evaluate(opts.formatLoadMore,opts.element,this.resultsPage))+"</li>"),window.setTimeout(function(){self.loadMoreIfNeeded()},10)),this.postprocessResults(data,initial),postRender(),this.opts.element.trigger({type:"select2-loaded",items:data})}})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){focus(this.search)},selectHighlighted:function(options){if(this._touchMoved)return void this.clearTouchMoved();var index=this.highlight(),highlighted=this.results.find(".select2-highlighted"),data=highlighted.closest(".select2-result").data("select2-data");data?(this.highlight(index),this.onSelect(data,options)):options&&options.noFocus&&this.close()},getPlaceholder:function(){var placeholderOption;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((placeholderOption=this.getPlaceholderOption())!==undefined?placeholderOption.text():undefined)},getPlaceholderOption:function(){if(this.select){var firstOption=this.select.children("option").first();if(this.opts.placeholderOption!==undefined)return"first"===this.opts.placeholderOption&&firstOption||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===$.trim(firstOption.text())&&""===firstOption.val())return firstOption}},initContainerWidth:function(){function resolveContainerWidth(){var style,attrs,matches,i,l,attr;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if(style=this.opts.element.attr("style"),style!==undefined)for(attrs=style.split(";"),i=0,l=attrs.length;l>i;i+=1)if(attr=attrs[i].replace(/\s/g,""),matches=attr.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==matches&&matches.length>=1)return matches[1];return"resolve"===this.opts.width?(style=this.opts.element.css("width"),style.indexOf("%")>0?style:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return $.isFunction(this.opts.width)?this.opts.width():this.opts.width}var width=resolveContainerWidth.call(this);null!==width&&this.container.css("width",width)}}),SingleSelect2=clazz(AbstractSelect2,{createContainer:function(){var container=$(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""));return container},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var el,range,len;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),el=this.search.get(0),el.createTextRange?(range=el.createTextRange(),range.collapse(!1),range.select()):el.setSelectionRange&&(len=this.search.val().length,el.setSelectionRange(len,len))),""===this.search.val()&&this.nextSearchTerm!=undefined&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger($.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){$("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),cleanupJQueryElements.call(this,"selection","focusser")},initContainer:function(){var selection,elementLabel,container=this.container,dropdown=this.dropdown,idSuffix=nextUid();this.showSearch(this.opts.minimumResultsForSearch<0?!1:!0),this.selection=selection=container.find(".select2-choice"),this.focusser=container.find(".select2-focusser"),selection.find(".select2-chosen").attr("id","select2-chosen-"+idSuffix),this.focusser.attr("aria-labelledby","select2-chosen-"+idSuffix),this.results.attr("id","select2-results-"+idSuffix),this.search.attr("aria-owns","select2-results-"+idSuffix),this.focusser.attr("id","s2id_autogen"+idSuffix),elementLabel=$("label[for='"+this.opts.element.attr("id")+"']"),this.opts.element.focus(this.bind(function(){this.focus()})),this.focusser.prev().text(elementLabel.text()).attr("for",this.focusser.attr("id"));var originalTitle=this.opts.element.attr("title");this.opts.element.attr("title",originalTitle||elementLabel.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text($("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&229!=e.keyCode){if(e.which===KEY.PAGE_UP||e.which===KEY.PAGE_DOWN)return void killEvent(e);switch(e.which){case KEY.UP:case KEY.DOWN:return this.moveHighlight(e.which===KEY.UP?-1:1),void killEvent(e);case KEY.ENTER:return this.selectHighlighted(),void killEvent(e);case KEY.TAB:return void this.selectHighlighted({noFocus:!0});case KEY.ESC:return this.cancel(e),void killEvent(e)}}})),this.search.on("blur",this.bind(function(){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind(function(){this.opened()&&this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&e.which!==KEY.TAB&&!KEY.isControl(e)&&!KEY.isFunctionKey(e)&&e.which!==KEY.ESC){if(this.opts.openOnEnter===!1&&e.which===KEY.ENTER)return void killEvent(e);if(e.which==KEY.DOWN||e.which==KEY.UP||e.which==KEY.ENTER&&this.opts.openOnEnter){if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return;return this.open(),void killEvent(e)}return e.which==KEY.DELETE||e.which==KEY.BACKSPACE?(this.opts.allowClear&&this.clear(),void killEvent(e)):void 0}})),installKeyUpChangeEvent(this.focusser),this.focusser.on("keyup-change input",this.bind(function(e){if(this.opts.minimumResultsForSearch>=0){if(e.stopPropagation(),this.opened())return;this.open()}})),selection.on("mousedown touchstart","abbr",this.bind(function(e){this.isInterfaceEnabled()&&(this.clear(),killEventImmediately(e),this.close(),this.selection&&this.selection.focus())})),selection.on("mousedown touchstart",this.bind(function(e){reinsertElement(selection),this.container.hasClass("select2-container-active")||this.opts.element.trigger($.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),killEvent(e)})),dropdown.on("mousedown touchstart",this.bind(function(){this.opts.shouldFocusInput(this)&&this.search.focus()})),selection.on("focus",this.bind(function(e){killEvent(e)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger($.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger($.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger($.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.hide(),this.setPlaceholder()},clear:function(triggerChange){var data=this.selection.data("select2-data");if(data){var evt=$.Event("select2-clearing");if(this.opts.element.trigger(evt),evt.isDefaultPrevented())return;var placeholderOption=this.getPlaceholderOption();this.opts.element.val(placeholderOption?placeholderOption.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),triggerChange!==!1&&(this.opts.element.trigger({type:"select2-removed",val:this.id(data),choice:data}),this.triggerChange({removed:data}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var self=this;this.opts.initSelection.call(null,this.opts.element,function(selected){selected!==undefined&&null!==selected&&(self.updateSelection(selected),self.close(),self.setPlaceholder(),self.nextSearchTerm=self.opts.nextSearchTerm(selected,self.search.val()))})}},isPlaceholderOptionSelected:function(){var placeholderOption;return this.getPlaceholder()===undefined?!1:(placeholderOption=this.getPlaceholderOption())!==undefined&&placeholderOption.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===undefined||null===this.opts.element.val()},prepareOpts:function(){var opts=this.parent.prepareOpts.apply(this,arguments),self=this;return"select"===opts.element.get(0).tagName.toLowerCase()?opts.initSelection=function(element,callback){var selected=element.find("option").filter(function(){return this.selected&&!this.disabled});callback(self.optionToData(selected))}:"data"in opts&&(opts.initSelection=opts.initSelection||function(element,callback){var id=element.val(),match=null;opts.query({matcher:function(term,text,el){var is_match=equal(id,opts.id(el));return is_match&&(match=el),is_match},callback:$.isFunction(callback)?function(){callback(match)}:$.noop})}),opts},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===undefined?undefined:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var placeholder=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&placeholder!==undefined){if(this.select&&this.getPlaceholderOption()===undefined)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(placeholder)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(data,initial,noHighlightUpdate){var selected=0,self=this;if(this.findHighlightableChoices().each2(function(i,elm){return equal(self.id(elm.data("select2-data")),self.opts.element.val())?(selected=i,!1):void 0}),noHighlightUpdate!==!1&&this.highlight(initial===!0&&selected>=0?selected:0),initial===!0){var min=this.opts.minimumResultsForSearch;min>=0&&this.showSearch(countResults(data.results)>=min)}},showSearch:function(showSearchInput){this.showSearchInput!==showSearchInput&&(this.showSearchInput=showSearchInput,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!showSearchInput),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!showSearchInput),$(this.dropdown,this.container).toggleClass("select2-with-searchbox",showSearchInput))},onSelect:function(data,options){if(this.triggerSelect(data)){var old=this.opts.element.val(),oldData=this.data();this.opts.element.val(this.id(data)),this.updateSelection(data),this.opts.element.trigger({type:"select2-selected",val:this.id(data),choice:data}),this.nextSearchTerm=this.opts.nextSearchTerm(data,this.search.val()),this.close(),options&&options.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),equal(old,this.id(data))||this.triggerChange({added:data,removed:oldData})}},updateSelection:function(data){var formatted,cssClass,container=this.selection.find(".select2-chosen");this.selection.data("select2-data",data),container.empty(),null!==data&&(formatted=this.opts.formatSelection(data,container,this.opts.escapeMarkup)),formatted!==undefined&&container.append(formatted),cssClass=this.opts.formatSelectionCssClass(data,container),cssClass!==undefined&&container.addClass(cssClass),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==undefined&&this.container.addClass("select2-allowclear")},val:function(){var val,triggerChange=!1,data=null,self=this,oldData=this.data();if(0===arguments.length)return this.opts.element.val();if(val=arguments[0],arguments.length>1&&(triggerChange=arguments[1]),this.select)this.select.val(val).find("option").filter(function(){return this.selected}).each2(function(i,elm){return data=self.optionToData(elm),!1}),this.updateSelection(data),this.setPlaceholder(),triggerChange&&this.triggerChange({added:data,removed:oldData});else{if(!val&&0!==val)return void this.clear(triggerChange);if(this.opts.initSelection===undefined)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(val),this.opts.initSelection(this.opts.element,function(data){self.opts.element.val(data?self.id(data):""),self.updateSelection(data),self.setPlaceholder(),triggerChange&&self.triggerChange({added:data,removed:oldData})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(value){var data,triggerChange=!1;return 0===arguments.length?(data=this.selection.data("select2-data"),data==undefined&&(data=null),data):(arguments.length>1&&(triggerChange=arguments[1]),void(value?(data=this.data(),this.opts.element.val(value?this.id(value):""),this.updateSelection(value),triggerChange&&this.triggerChange({added:value,removed:data})):this.clear(triggerChange)))}}),MultiSelect2=clazz(AbstractSelect2,{createContainer:function(){var container=$(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return container},prepareOpts:function(){var opts=this.parent.prepareOpts.apply(this,arguments),self=this;return"select"===opts.element.get(0).tagName.toLowerCase()?opts.initSelection=function(element,callback){var data=[];element.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(i,elm){data.push(self.optionToData(elm))}),callback(data)}:"data"in opts&&(opts.initSelection=opts.initSelection||function(element,callback){var ids=splitVal(element.val(),opts.separator,opts.transformVal),matches=[];opts.query({matcher:function(term,text,el){var is_match=$.grep(ids,function(id){return equal(id,opts.id(el))}).length;return is_match&&matches.push(el),is_match},callback:$.isFunction(callback)?function(){for(var ordered=[],i=0;i<ids.length;i++)for(var id=ids[i],j=0;j<matches.length;j++){var match=matches[j];if(equal(id,opts.id(match))){ordered.push(match),matches.splice(j,1);break}}callback(ordered)}:$.noop})}),opts},selectChoice:function(choice){var selected=this.container.find(".select2-search-choice-focus");selected.length&&choice&&choice[0]==selected[0]||(selected.length&&this.opts.element.trigger("choice-deselected",selected),selected.removeClass("select2-search-choice-focus"),choice&&choice.length&&(this.close(),choice.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",choice)))},destroy:function(){$("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),cleanupJQueryElements.call(this,"searchContainer","selection")},initContainer:function(){var selection,selector=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=selection=this.container.find(selector);var _this=this;this.selection.on("click",".select2-container:not(.select2-container-disabled) .select2-search-choice:not(.select2-locked)",function(){_this.search[0].focus(),_this.selectChoice($(this))}),this.search.attr("id","s2id_autogen"+nextUid()),this.search.prev().text($("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.opts.element.focus(this.bind(function(){this.focus()})),this.search.on("input paste",this.bind(function(){this.search.attr("placeholder")&&0==this.search.val().length||this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()){++this.keydowns;var selected=selection.find(".select2-search-choice-focus"),prev=selected.prev(".select2-search-choice:not(.select2-locked)"),next=selected.next(".select2-search-choice:not(.select2-locked)"),pos=getCursorInfo(this.search);if(selected.length&&(e.which==KEY.LEFT||e.which==KEY.RIGHT||e.which==KEY.BACKSPACE||e.which==KEY.DELETE||e.which==KEY.ENTER)){var selectedChoice=selected;return e.which==KEY.LEFT&&prev.length?selectedChoice=prev:e.which==KEY.RIGHT?selectedChoice=next.length?next:null:e.which===KEY.BACKSPACE?this.unselect(selected.first())&&(this.search.width(10),selectedChoice=prev.length?prev:next):e.which==KEY.DELETE?this.unselect(selected.first())&&(this.search.width(10),selectedChoice=next.length?next:null):e.which==KEY.ENTER&&(selectedChoice=null),this.selectChoice(selectedChoice),killEvent(e),void(selectedChoice&&selectedChoice.length||this.open())}if((e.which===KEY.BACKSPACE&&1==this.keydowns||e.which==KEY.LEFT)&&0==pos.offset&&!pos.length)return this.selectChoice(selection.find(".select2-search-choice:not(.select2-locked)").last()),void killEvent(e);if(this.selectChoice(null),this.opened())switch(e.which){case KEY.UP:case KEY.DOWN:return this.moveHighlight(e.which===KEY.UP?-1:1),void killEvent(e);case KEY.ENTER:return this.selectHighlighted(),void killEvent(e);case KEY.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case KEY.ESC:return this.cancel(e),void killEvent(e)}if(e.which!==KEY.TAB&&!KEY.isControl(e)&&!KEY.isFunctionKey(e)&&e.which!==KEY.BACKSPACE&&e.which!==KEY.ESC){if(e.which===KEY.ENTER){if(this.opts.openOnEnter===!1)return;if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return}this.open(),(e.which===KEY.PAGE_UP||e.which===KEY.PAGE_DOWN)&&killEvent(e),e.which===KEY.ENTER&&killEvent(e)}}})),this.search.on("keyup",this.bind(function(){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(e){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),e.stopImmediatePropagation(),this.opts.element.trigger($.Event("select2-blur"))})),this.container.on("click",selector,this.bind(function(e){this.isInterfaceEnabled()&&($(e.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger($.Event("select2-focus")),this.open(),this.focusSearch(),e.preventDefault()))})),this.container.on("focus",selector,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger($.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.hide(),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var self=this;this.opts.initSelection.call(null,this.opts.element,function(data){data!==undefined&&null!==data&&(self.updateSelection(data),self.close(),self.clearSearch())})}},clearSearch:function(){var placeholder=this.getPlaceholder(),maxWidth=this.getMaxSearchWidth();placeholder!==undefined&&0===this.getVal().length&&this.search.hasClass("select2-focused")===!1?(this.search.val(placeholder).addClass("select2-default"),this.search.width(maxWidth>0?maxWidth:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),""===this.search.val()&&this.nextSearchTerm!=undefined&&(this.search.val(this.nextSearchTerm),this.search.select()),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger($.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(data){var ids=[],filtered=[],self=this;$(data).each(function(){indexOf(self.id(this),ids)<0&&(ids.push(self.id(this)),filtered.push(this))}),data=filtered,this.selection.find(".select2-search-choice").remove(),$(data).each(function(){self.addSelectedChoice(this)}),self.postprocessResults()},tokenize:function(){var input=this.search.val();input=this.opts.tokenizer.call(this,input,this.data(),this.bind(this.onSelect),this.opts),null!=input&&input!=undefined&&(this.search.val(input),input.length>0&&this.open())},onSelect:function(data,options){this.triggerSelect(data)&&""!==data.text&&(this.addSelectedChoice(data),this.opts.element.trigger({type:"selected",val:this.id(data),choice:data}),this.nextSearchTerm=this.opts.nextSearchTerm(data,this.search.val()),this.clearSearch(),this.updateResults(),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(data,!1,this.opts.closeOnSelect===!0),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.nextSearchTerm!=undefined&&(this.search.val(this.nextSearchTerm),this.updateResults(),this.search.select()),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:data}),options&&options.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(data){var formatted,cssClass,enableChoice=!data.locked,enabledItem=$("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),disabledItem=$("<li class='select2-search-choice select2-locked'><div></div></li>"),choice=enableChoice?enabledItem:disabledItem,id=this.id(data),val=this.getVal();formatted=this.opts.formatSelection(data,choice.find("div"),this.opts.escapeMarkup),formatted!=undefined&&choice.find("div").replaceWith($("<div></div>").html(formatted)),cssClass=this.opts.formatSelectionCssClass(data,choice.find("div")),cssClass!=undefined&&choice.addClass(cssClass),enableChoice&&choice.find(".select2-search-choice-close").on("mousedown",killEvent).on("click dblclick",this.bind(function(e){this.isInterfaceEnabled()&&(this.unselect($(e.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),killEvent(e),this.close(),this.focusSearch())})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),choice.data("select2-data",data),choice.insertBefore(this.searchContainer),val.push(id),this.setVal(val)},unselect:function(selected){var data,index,val=this.getVal();if(selected=selected.closest(".select2-search-choice"),0===selected.length)throw"Invalid argument: "+selected+". Must be .select2-search-choice";if(data=selected.data("select2-data")){var evt=$.Event("select2-removing");if(evt.val=this.id(data),evt.choice=data,this.opts.element.trigger(evt),evt.isDefaultPrevented())return!1;for(;(index=indexOf(this.id(data),val))>=0;)val.splice(index,1),this.setVal(val),this.select&&this.postprocessResults();return selected.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(data),choice:data}),this.triggerChange({removed:data}),!0}},postprocessResults:function(data,initial,noHighlightUpdate){var val=this.getVal(),choices=this.results.find(".select2-result"),compound=this.results.find(".select2-result-with-children"),self=this;choices.each2(function(i,choice){var id=self.id(choice.data("select2-data"));indexOf(id,val)>=0&&(choice.addClass("select2-selected"),choice.find(".select2-result-selectable").addClass("select2-selected"))}),compound.each2(function(i,choice){choice.is(".select2-result-selectable")||0!==choice.find(".select2-result-selectable:not(.select2-selected)").length||choice.addClass("select2-selected")}),-1==this.highlight()&&noHighlightUpdate!==!1&&this.opts.closeOnSelect===!0&&self.highlight(0),!this.opts.createSearchChoice&&!choices.filter(".select2-result:not(.select2-selected)").length>0&&(!data||data&&!data.more&&0===this.results.find(".select2-no-results").length)&&checkFormatter(self.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+evaluate(self.opts.formatNoMatches,self.opts.element,self.search.val())+"</li>")
},getMaxSearchWidth:function(){return this.selection.width()-getSideBorderPadding(this.search)},resizeSearch:function(){var minimumWidth,left,maxWidth,containerLeft,searchWidth,sideBorderPadding=getSideBorderPadding(this.search);minimumWidth=measureTextWidth(this.search)+10,left=this.search.offset().left,maxWidth=this.selection.width(),containerLeft=this.selection.offset().left,searchWidth=maxWidth-(left-containerLeft)-sideBorderPadding,minimumWidth>searchWidth&&(searchWidth=maxWidth-sideBorderPadding),40>searchWidth&&(searchWidth=maxWidth-sideBorderPadding),0>=searchWidth&&(searchWidth=minimumWidth),this.search.width(Math.floor(searchWidth))},getVal:function(){var val;return this.select?(val=this.select.val(),null===val?[]:val):(val=this.opts.element.val(),splitVal(val,this.opts.separator,this.opts.transformVal))},setVal:function(val){var unique;this.select?this.select.val(val):(unique=[],$(val).each(function(){indexOf(this,unique)<0&&unique.push(this)}),this.opts.element.val(0===unique.length?"":unique.join(this.opts.separator)))},buildChangeDetails:function(old,current){for(var current=current.slice(0),old=old.slice(0),i=0;i<current.length;i++)for(var j=0;j<old.length;j++)equal(this.opts.id(current[i]),this.opts.id(old[j]))&&(current.splice(i,1),i>0&&i--,old.splice(j,1),j--);return{added:current,removed:old}},val:function(val,triggerChange){var oldData,self=this;if(0===arguments.length)return this.getVal();if(oldData=this.data(),oldData.length||(oldData=[]),!val&&0!==val)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(triggerChange&&this.triggerChange({added:this.data(),removed:oldData}));if(this.setVal(val),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),triggerChange&&this.triggerChange(this.buildChangeDetails(oldData,this.data()));else{if(this.opts.initSelection===undefined)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(data){var ids=$.map(data,self.id);self.setVal(ids),self.updateSelection(data),self.clearSearch(),triggerChange&&self.triggerChange(self.buildChangeDetails(oldData,self.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var val=[],self=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){val.push(self.opts.id($(this).data("select2-data")))}),this.setVal(val),this.triggerChange()},data:function(values,triggerChange){var ids,old,self=this;return 0===arguments.length?this.selection.children(".select2-search-choice").map(function(){return $(this).data("select2-data")}).get():(old=this.data(),values||(values=[]),ids=$.map(values,function(e){return self.opts.id(e)}),this.setVal(ids),this.updateSelection(values),this.clearSearch(),triggerChange&&this.triggerChange(this.buildChangeDetails(old,this.data())),void 0)}}),$.fn.select2=function(){var opts,select2,method,value,multiple,args=Array.prototype.slice.call(arguments,0),allowedMethods=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],valueMethods=["opened","isFocused","container","dropdown"],propertyMethods=["val","data"],methodsMap={search:"externalSearch"};return this.each(function(){if(0===args.length||"object"==typeof args[0])opts=0===args.length?{}:$.extend({},args[0]),opts.element=$(this),"select"===opts.element.get(0).tagName.toLowerCase()?multiple=opts.element.prop("multiple"):(multiple=opts.multiple||!1,"tags"in opts&&(opts.multiple=multiple=!0)),select2=multiple?new window.Select2["class"].multi:new window.Select2["class"].single,select2.init(opts);else{if("string"!=typeof args[0])throw"Invalid arguments to select2 plugin: "+args;if(indexOf(args[0],allowedMethods)<0)throw"Unknown method: "+args[0];if(value=undefined,select2=$(this).data("select2"),select2===undefined)return;if(method=args[0],"container"===method?value=select2.container:"dropdown"===method?value=select2.dropdown:(methodsMap[method]&&(method=methodsMap[method]),value=select2[method].apply(select2,args.slice(1))),indexOf(args[0],valueMethods)>=0||indexOf(args[0],propertyMethods)>=0&&1==args.length)return!1}}),value===undefined?this:value},$.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(result,container,query,escapeMarkup){var markup=[];return markMatch(this.text(result),query.term,markup,escapeMarkup),markup.join("")},transformVal:function(val){return $.trim(val)},formatSelection:function(data,container,escapeMarkup){return data?escapeMarkup(this.text(data)):undefined},sortResults:function(results){return results},formatResultCssClass:function(data){return data.css},formatSelectionCssClass:function(){return undefined},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e==undefined?null:e.id},text:function(e){return e&&this.data&&this.data.text?$.isFunction(this.data.text)?this.data.text(e):e[this.data.text]:e.text},matcher:function(term,text){return stripDiacritics(""+text).toUpperCase().indexOf(stripDiacritics(""+term).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:defaultTokenizer,escapeMarkup:defaultEscapeMarkup,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(c){return c},adaptDropdownCssClass:function(){return null},nextSearchTerm:function(){return undefined},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(instance){var supportsTouchEvents="ontouchstart"in window||navigator.msMaxTouchPoints>0;return supportsTouchEvents&&instance.opts.minimumResultsForSearch<0?!1:!0}},$.fn.select2.locales=[],$.fn.select2.locales.en={formatMatches:function(matches){return 1===matches?"One result is available, press enter to select it.":matches+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(){return"Loading failed"},formatInputTooShort:function(input,min){var n=min-input.length;return"Please enter "+n+" or more character"+(1==n?"":"s")},formatInputTooLong:function(input,max){var n=input.length-max;return"Please delete "+n+" character"+(1==n?"":"s")},formatSelectionTooBig:function(limit){return"You can only select "+limit+" item"+(1==limit?"":"s")},formatLoadMore:function(){return"Loading more results"},formatSearching:function(){return"Searching"}},$.extend($.fn.select2.defaults,$.fn.select2.locales.en),$.fn.select2.ajaxDefaults={transport:$.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:ajax,local:local,tags:tags},util:{debounce:debounce,markMatch:markMatch,escapeMarkup:defaultEscapeMarkup,stripDiacritics:stripDiacritics},"class":{"abstract":AbstractSelect2,single:SingleSelect2,multi:MultiSelect2}}}}(jQuery),define("jquery/select2",["jquery"],function(){}),function(){function EventEmitter(){}function indexOfListener(listeners,listener){for(var i=listeners.length;i--;)if(listeners[i].listener===listener)return i;return-1}function alias(name){return function(){return this[name].apply(this,arguments)}}var proto=EventEmitter.prototype,exports=this,originalGlobalValue=exports.EventEmitter;proto.getListeners=function(evt){var response,key,events=this._getEvents();if(evt instanceof RegExp){response={};for(key in events)events.hasOwnProperty(key)&&evt.test(key)&&(response[key]=events[key])}else response=events[evt]||(events[evt]=[]);return response},proto.flattenListeners=function(listeners){var i,flatListeners=[];for(i=0;i<listeners.length;i+=1)flatListeners.push(listeners[i].listener);return flatListeners},proto.getListenersAsObject=function(evt){var response,listeners=this.getListeners(evt);return listeners instanceof Array&&(response={},response[evt]=listeners),response||listeners},proto.addListener=function(evt,listener){var key,listeners=this.getListenersAsObject(evt),listenerIsWrapped="object"==typeof listener;for(key in listeners)listeners.hasOwnProperty(key)&&-1===indexOfListener(listeners[key],listener)&&listeners[key].push(listenerIsWrapped?listener:{listener:listener,once:!1});return this},proto.on=alias("addListener"),proto.addOnceListener=function(evt,listener){return this.addListener(evt,{listener:listener,once:!0})},proto.once=alias("addOnceListener"),proto.defineEvent=function(evt){return this.getListeners(evt),this},proto.defineEvents=function(evts){for(var i=0;i<evts.length;i+=1)this.defineEvent(evts[i]);return this},proto.removeListener=function(evt,listener){var index,key,listeners=this.getListenersAsObject(evt);for(key in listeners)listeners.hasOwnProperty(key)&&(index=indexOfListener(listeners[key],listener),-1!==index&&listeners[key].splice(index,1));return this},proto.off=alias("removeListener"),proto.addListeners=function(evt,listeners){return this.manipulateListeners(!1,evt,listeners)},proto.removeListeners=function(evt,listeners){return this.manipulateListeners(!0,evt,listeners)},proto.manipulateListeners=function(remove,evt,listeners){var i,value,single=remove?this.removeListener:this.addListener,multiple=remove?this.removeListeners:this.addListeners;if("object"!=typeof evt||evt instanceof RegExp)for(i=listeners.length;i--;)single.call(this,evt,listeners[i]);else for(i in evt)evt.hasOwnProperty(i)&&(value=evt[i])&&("function"==typeof value?single.call(this,i,value):multiple.call(this,i,value));return this},proto.removeEvent=function(evt){var key,type=typeof evt,events=this._getEvents();if("string"===type)delete events[evt];else if(evt instanceof RegExp)for(key in events)events.hasOwnProperty(key)&&evt.test(key)&&delete events[key];else delete this._events;return this},proto.removeAllListeners=alias("removeEvent"),proto.emitEvent=function(evt,args){var listener,i,key,response,listeners=this.getListenersAsObject(evt);for(key in listeners)if(listeners.hasOwnProperty(key))for(i=listeners[key].length;i--;)listener=listeners[key][i],listener.once===!0&&this.removeListener(evt,listener.listener),response=listener.listener.apply(this,args||[]),response===this._getOnceReturnValue()&&this.removeListener(evt,listener.listener);return this},proto.trigger=alias("emitEvent"),proto.emit=function(evt){var args=Array.prototype.slice.call(arguments,1);return this.emitEvent(evt,args)},proto.setOnceReturnValue=function(value){return this._onceReturnValue=value,this},proto._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},proto._getEvents=function(){return this._events||(this._events={})},EventEmitter.noConflict=function(){return exports.EventEmitter=originalGlobalValue,EventEmitter},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return EventEmitter}):"object"==typeof module&&module.exports?module.exports=EventEmitter:this.EventEmitter=EventEmitter}.call(this),function(window){function getIEEvent(obj){var event=window.event;return event.target=event.target||event.srcElement||obj,event}var docElem=document.documentElement,bind=function(){};docElem.addEventListener?bind=function(obj,type,fn){obj.addEventListener(type,fn,!1)}:docElem.attachEvent&&(bind=function(obj,type,fn){obj[type+fn]=fn.handleEvent?function(){var event=getIEEvent(obj);fn.handleEvent.call(fn,event)}:function(){var event=getIEEvent(obj);fn.call(obj,event)},obj.attachEvent("on"+type,obj[type+fn])});var unbind=function(){};docElem.removeEventListener?unbind=function(obj,type,fn){obj.removeEventListener(type,fn,!1)}:docElem.detachEvent&&(unbind=function(obj,type,fn){obj.detachEvent("on"+type,obj[type+fn]);try{delete obj[type+fn]}catch(err){obj[type+fn]=void 0}});var eventie={bind:bind,unbind:unbind};"function"==typeof define&&define.amd?define("eventie/eventie",eventie):"object"==typeof exports?module.exports=eventie:window.eventie=eventie}(this),function(window){function extend(a,b){for(var prop in b)a[prop]=b[prop];return a}function isArray(obj){return"[object Array]"===objToString.call(obj)}function makeArray(obj){var ary=[];if(isArray(obj))ary=obj;else if("number"==typeof obj.length)for(var i=0,len=obj.length;len>i;i++)ary.push(obj[i]);else ary.push(obj);return ary}function defineImagesLoaded(EventEmitter,eventie){function ImagesLoaded(elem,options,onAlways){if(!(this instanceof ImagesLoaded))return new ImagesLoaded(elem,options);"string"==typeof elem&&(elem=document.querySelectorAll(elem)),this.elements=makeArray(elem),this.options=extend({},this.options),"function"==typeof options?onAlways=options:extend(this.options,options),onAlways&&this.on("always",onAlways),this.getImages(),$&&(this.jqDeferred=new $.Deferred);var _this=this;setTimeout(function(){_this.check()})}function LoadingImage(img){this.img=img}ImagesLoaded.prototype=new EventEmitter,ImagesLoaded.prototype.options={},ImagesLoaded.prototype.getImages=function(){this.images=[];for(var i=0,len=this.elements.length;len>i;i++){var elem=this.elements[i];"IMG"===elem.nodeName&&this.addImage(elem);for(var childElems=elem.querySelectorAll("img"),j=0,jLen=childElems.length;jLen>j;j++){var img=childElems[j];this.addImage(img)}}},ImagesLoaded.prototype.addImage=function(img){var loadingImage=new LoadingImage(img);this.images.push(loadingImage)},ImagesLoaded.prototype.check=function(){function onConfirm(image,message){return _this.options.debug&&hasConsole&&console.log("confirm",image,message),_this.progress(image),checkedCount++,checkedCount===length&&_this.complete(),!0}var _this=this,checkedCount=0,length=this.images.length;if(this.hasAnyBroken=!1,!length)return void this.complete();for(var i=0;length>i;i++){var loadingImage=this.images[i];loadingImage.on("confirm",onConfirm),loadingImage.check()}},ImagesLoaded.prototype.progress=function(image){this.hasAnyBroken=this.hasAnyBroken||!image.isLoaded;var _this=this;setTimeout(function(){_this.emit("progress",_this,image),_this.jqDeferred&&_this.jqDeferred.notify(_this,image)})},ImagesLoaded.prototype.complete=function(){var eventName=this.hasAnyBroken?"fail":"done";this.isComplete=!0;var _this=this;setTimeout(function(){if(_this.emit(eventName,_this),_this.emit("always",_this),_this.jqDeferred){var jqMethod=_this.hasAnyBroken?"reject":"resolve";_this.jqDeferred[jqMethod](_this)}})},$&&($.fn.imagesLoaded=function(options,callback){var instance=new ImagesLoaded(this,options,callback);return instance.jqDeferred.promise($(this))});var cache={};return LoadingImage.prototype=new EventEmitter,LoadingImage.prototype.check=function(){var cached=cache[this.img.src];if(cached)return void this.useCached(cached);if(cache[this.img.src]=this,this.img.complete&&void 0!==this.img.naturalWidth)return void this.confirm(0!==this.img.naturalWidth,"naturalWidth");var proxyImage=this.proxyImage=new Image;eventie.bind(proxyImage,"load",this),eventie.bind(proxyImage,"error",this),proxyImage.src=this.img.src},LoadingImage.prototype.useCached=function(cached){if(cached.isConfirmed)this.confirm(cached.isLoaded,"cached was confirmed");else{var _this=this;cached.on("confirm",function(image){return _this.confirm(image.isLoaded,"cache emitted confirmed"),!0})}},LoadingImage.prototype.confirm=function(isLoaded,message){this.isConfirmed=!0,this.isLoaded=isLoaded,this.emit("confirm",this,message)},LoadingImage.prototype.handleEvent=function(event){var method="on"+event.type;this[method]&&this[method](event)},LoadingImage.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindProxyEvents()},LoadingImage.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindProxyEvents()},LoadingImage.prototype.unbindProxyEvents=function(){eventie.unbind(this.proxyImage,"load",this),eventie.unbind(this.proxyImage,"error",this)},ImagesLoaded}var $=window.jQuery,console=window.console,hasConsole="undefined"!=typeof console,objToString=Object.prototype.toString;"function"==typeof define&&define.amd?define("imagesloaded",["eventEmitter/EventEmitter","eventie/eventie"],defineImagesLoaded):window.imagesLoaded=defineImagesLoaded(window.EventEmitter,window.eventie)}(window),function(window){function docReady(fn){"function"==typeof fn&&(docReady.isReady?fn():queue.push(fn))}function init(event){var isIE8NotReady="readystatechange"===event.type&&"complete"!==document.readyState;if(!docReady.isReady&&!isIE8NotReady){docReady.isReady=!0;for(var i=0,len=queue.length;len>i;i++){var fn=queue[i];fn()}}}function defineDocReady(eventie){return eventie.bind(document,"DOMContentLoaded",init),eventie.bind(document,"readystatechange",init),eventie.bind(window,"load",init),docReady}var document=window.document,queue=[];docReady.isReady=!1,"function"==typeof define&&define.amd?(docReady.isReady="function"==typeof requirejs,define("doc-ready/doc-ready",["eventie/eventie"],defineDocReady)):window.docReady=defineDocReady(window.eventie)}(this),function(window){function getStyleProperty(propName){if(propName){if("string"==typeof docElemStyle[propName])return propName;propName=propName.charAt(0).toUpperCase()+propName.slice(1);for(var prefixed,i=0,len=prefixes.length;len>i;i++)if(prefixed=prefixes[i]+propName,"string"==typeof docElemStyle[prefixed])return prefixed}}var prefixes="Webkit Moz ms Ms O".split(" "),docElemStyle=document.documentElement.style;"function"==typeof define&&define.amd?define("get-style-property/get-style-property",[],function(){return getStyleProperty}):"object"==typeof exports?module.exports=getStyleProperty:window.getStyleProperty=getStyleProperty}(window),function(window){function getStyleSize(value){var num=parseFloat(value),isValid=-1===value.indexOf("%")&&!isNaN(num);return isValid&&num}function getZeroSize(){for(var size={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},i=0,len=measurements.length;len>i;i++){var measurement=measurements[i];size[measurement]=0}return size}function defineGetSize(getStyleProperty){function getSize(elem){if("string"==typeof elem&&(elem=document.querySelector(elem)),elem&&"object"==typeof elem&&elem.nodeType){var style=getStyle(elem);if("none"===style.display)return getZeroSize();var size={};size.width=elem.offsetWidth,size.height=elem.offsetHeight;for(var isBorderBox=size.isBorderBox=!(!boxSizingProp||!style[boxSizingProp]||"border-box"!==style[boxSizingProp]),i=0,len=measurements.length;len>i;i++){var measurement=measurements[i],value=style[measurement];value=mungeNonPixel(elem,value);var num=parseFloat(value);size[measurement]=isNaN(num)?0:num}var paddingWidth=size.paddingLeft+size.paddingRight,paddingHeight=size.paddingTop+size.paddingBottom,marginWidth=size.marginLeft+size.marginRight,marginHeight=size.marginTop+size.marginBottom,borderWidth=size.borderLeftWidth+size.borderRightWidth,borderHeight=size.borderTopWidth+size.borderBottomWidth,isBorderBoxSizeOuter=isBorderBox&&isBoxSizeOuter,styleWidth=getStyleSize(style.width);styleWidth!==!1&&(size.width=styleWidth+(isBorderBoxSizeOuter?0:paddingWidth+borderWidth));var styleHeight=getStyleSize(style.height);return styleHeight!==!1&&(size.height=styleHeight+(isBorderBoxSizeOuter?0:paddingHeight+borderHeight)),size.innerWidth=size.width-(paddingWidth+borderWidth),size.innerHeight=size.height-(paddingHeight+borderHeight),size.outerWidth=size.width+marginWidth,size.outerHeight=size.height+marginHeight,size}}function mungeNonPixel(elem,value){if(getComputedStyle||-1===value.indexOf("%"))return value;var style=elem.style,left=style.left,rs=elem.runtimeStyle,rsLeft=rs&&rs.left;return rsLeft&&(rs.left=elem.currentStyle.left),style.left=value,value=style.pixelLeft,style.left=left,rsLeft&&(rs.left=rsLeft),value}var isBoxSizeOuter,boxSizingProp=getStyleProperty("boxSizing");return function(){if(boxSizingProp){var div=document.createElement("div");div.style.width="200px",div.style.padding="1px 2px 3px 4px",div.style.borderStyle="solid",div.style.borderWidth="1px 2px 3px 4px",div.style[boxSizingProp]="border-box";var body=document.body||document.documentElement;body.appendChild(div);var style=getStyle(div);isBoxSizeOuter=200===getStyleSize(style.width),body.removeChild(div)}}(),getSize}var getComputedStyle=window.getComputedStyle,getStyle=getComputedStyle?function(elem){return getComputedStyle(elem,null)}:function(elem){return elem.currentStyle},measurements=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];"function"==typeof define&&define.amd?define("get-size/get-size",["get-style-property/get-style-property"],defineGetSize):"object"==typeof exports?module.exports=defineGetSize(require("get-style-property")):window.getSize=defineGetSize(window.getStyleProperty)}(window),function(global,ElemProto){function match(elem,selector){return elem[matchesMethod](selector)}function checkParent(elem){if(!elem.parentNode){var fragment=document.createDocumentFragment();fragment.appendChild(elem)}}function query(elem,selector){checkParent(elem);for(var elems=elem.parentNode.querySelectorAll(selector),i=0,len=elems.length;len>i;i++)if(elems[i]===elem)return!0;return!1}function matchChild(elem,selector){return checkParent(elem),match(elem,selector)}var matchesSelector,matchesMethod=function(){if(ElemProto.matchesSelector)return"matchesSelector";for(var prefixes=["webkit","moz","ms","o"],i=0,len=prefixes.length;len>i;i++){var prefix=prefixes[i],method=prefix+"MatchesSelector";if(ElemProto[method])return method}}();if(matchesMethod){var div=document.createElement("div"),supportsOrphans=match(div,"div");matchesSelector=supportsOrphans?match:matchChild}else matchesSelector=query;"function"==typeof define&&define.amd?define("matches-selector/matches-selector",[],function(){return matchesSelector}):window.matchesSelector=matchesSelector}(this,Element.prototype),function(window){function extend(a,b){for(var prop in b)a[prop]=b[prop];return a}function isEmptyObj(obj){for(var prop in obj)return!1;return prop=null,!0}function toDash(str){return str.replace(/([A-Z])/g,function($1){return"-"+$1.toLowerCase()})}function outlayerItemDefinition(EventEmitter,getSize,getStyleProperty){function Item(element,layout){element&&(this.element=element,this.layout=layout,this.position={x:0,y:0},this._create())}var transitionProperty=getStyleProperty("transition"),transformProperty=getStyleProperty("transform"),supportsCSS3=transitionProperty&&transformProperty,is3d=!!getStyleProperty("perspective"),transitionEndEvent={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[transitionProperty],prefixableProperties=["transform","transition","transitionDuration","transitionProperty"],vendorProperties=function(){for(var cache={},i=0,len=prefixableProperties.length;len>i;i++){var prop=prefixableProperties[i],supportedProp=getStyleProperty(prop);supportedProp&&supportedProp!==prop&&(cache[prop]=supportedProp)}return cache}();extend(Item.prototype,EventEmitter.prototype),Item.prototype._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},Item.prototype.handleEvent=function(event){var method="on"+event.type;this[method]&&this[method](event)},Item.prototype.getSize=function(){this.size=getSize(this.element)},Item.prototype.css=function(style){var elemStyle=this.element.style;for(var prop in style){var supportedProp=vendorProperties[prop]||prop;elemStyle[supportedProp]=style[prop]}},Item.prototype.getPosition=function(){var style=getStyle(this.element),layoutOptions=this.layout.options,isOriginLeft=layoutOptions.isOriginLeft,isOriginTop=layoutOptions.isOriginTop,x=parseInt(style[isOriginLeft?"left":"right"],10),y=parseInt(style[isOriginTop?"top":"bottom"],10);x=isNaN(x)?0:x,y=isNaN(y)?0:y;var layoutSize=this.layout.size;x-=isOriginLeft?layoutSize.paddingLeft:layoutSize.paddingRight,y-=isOriginTop?layoutSize.paddingTop:layoutSize.paddingBottom,this.position.x=x,this.position.y=y},Item.prototype.layoutPosition=function(){var layoutSize=this.layout.size,layoutOptions=this.layout.options,style={};layoutOptions.isOriginLeft?(style.left=this.position.x+layoutSize.paddingLeft+"px",style.right=""):(style.right=this.position.x+layoutSize.paddingRight+"px",style.left=""),layoutOptions.isOriginTop?(style.top=this.position.y+layoutSize.paddingTop+"px",style.bottom=""):(style.bottom=this.position.y+layoutSize.paddingBottom+"px",style.top=""),this.css(style),this.emitEvent("layout",[this])};var translate=is3d?function(x,y){return"translate3d("+x+"px, "+y+"px, 0)"}:function(x,y){return"translate("+x+"px, "+y+"px)"};Item.prototype._transitionTo=function(x,y){this.getPosition();var curX=this.position.x,curY=this.position.y,compareX=parseInt(x,10),compareY=parseInt(y,10),didNotMove=compareX===this.position.x&&compareY===this.position.y;if(this.setPosition(x,y),didNotMove&&!this.isTransitioning)return void this.layoutPosition();var transX=x-curX,transY=y-curY,transitionStyle={},layoutOptions=this.layout.options;transX=layoutOptions.isOriginLeft?transX:-transX,transY=layoutOptions.isOriginTop?transY:-transY,transitionStyle.transform=translate(transX,transY),this.transition({to:transitionStyle,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},Item.prototype.goTo=function(x,y){this.setPosition(x,y),this.layoutPosition()},Item.prototype.moveTo=supportsCSS3?Item.prototype._transitionTo:Item.prototype.goTo,Item.prototype.setPosition=function(x,y){this.position.x=parseInt(x,10),this.position.y=parseInt(y,10)},Item.prototype._nonTransition=function(args){this.css(args.to),args.isCleaning&&this._removeStyles(args.to);for(var prop in args.onTransitionEnd)args.onTransitionEnd[prop].call(this)},Item.prototype._transition=function(args){if(!parseFloat(this.layout.options.transitionDuration))return void this._nonTransition(args);var _transition=this._transn;for(var prop in args.onTransitionEnd)_transition.onEnd[prop]=args.onTransitionEnd[prop];for(prop in args.to)_transition.ingProperties[prop]=!0,args.isCleaning&&(_transition.clean[prop]=!0);if(args.from){this.css(args.from);var h=this.element.offsetHeight;h=null}this.enableTransition(args.to),this.css(args.to),this.isTransitioning=!0};var itemTransitionProperties=transformProperty&&toDash(transformProperty)+",opacity";Item.prototype.enableTransition=function(){this.isTransitioning||(this.css({transitionProperty:itemTransitionProperties,transitionDuration:this.layout.options.transitionDuration}),this.element.addEventListener(transitionEndEvent,this,!1))},Item.prototype.transition=Item.prototype[transitionProperty?"_transition":"_nonTransition"],Item.prototype.onwebkitTransitionEnd=function(event){this.ontransitionend(event)},Item.prototype.onotransitionend=function(event){this.ontransitionend(event)};var dashedVendorProperties={"-webkit-transform":"transform","-moz-transform":"transform","-o-transform":"transform"};Item.prototype.ontransitionend=function(event){if(event.target===this.element){var _transition=this._transn,propertyName=dashedVendorProperties[event.propertyName]||event.propertyName;if(delete _transition.ingProperties[propertyName],isEmptyObj(_transition.ingProperties)&&this.disableTransition(),propertyName in _transition.clean&&(this.element.style[event.propertyName]="",delete _transition.clean[propertyName]),propertyName in _transition.onEnd){var onTransitionEnd=_transition.onEnd[propertyName];onTransitionEnd.call(this),delete _transition.onEnd[propertyName]}this.emitEvent("transitionEnd",[this])}},Item.prototype.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(transitionEndEvent,this,!1),this.isTransitioning=!1},Item.prototype._removeStyles=function(style){var cleanStyle={};for(var prop in style)cleanStyle[prop]="";this.css(cleanStyle)};var cleanTransitionStyle={transitionProperty:"",transitionDuration:""};return Item.prototype.removeTransitionStyles=function(){this.css(cleanTransitionStyle)},Item.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element),this.emitEvent("remove",[this])},Item.prototype.remove=function(){if(!transitionProperty||!parseFloat(this.layout.options.transitionDuration))return void this.removeElem();var _this=this;this.on("transitionEnd",function(){return _this.removeElem(),!0}),this.hide()},Item.prototype.reveal=function(){delete this.isHidden,this.css({display:""});var options=this.layout.options;this.transition({from:options.hiddenStyle,to:options.visibleStyle,isCleaning:!0})},Item.prototype.hide=function(){this.isHidden=!0,this.css({display:""});var options=this.layout.options;this.transition({from:options.visibleStyle,to:options.hiddenStyle,isCleaning:!0,onTransitionEnd:{opacity:function(){this.isHidden&&this.css({display:"none"})}}})},Item.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},Item}var getComputedStyle=window.getComputedStyle,getStyle=getComputedStyle?function(elem){return getComputedStyle(elem,null)}:function(elem){return elem.currentStyle};"function"==typeof define&&define.amd?define("outlayer/item",["eventEmitter/EventEmitter","get-size/get-size","get-style-property/get-style-property"],outlayerItemDefinition):(window.Outlayer={},window.Outlayer.Item=outlayerItemDefinition(window.EventEmitter,window.getSize,window.getStyleProperty))}(window),function(window){function extend(a,b){for(var prop in b)a[prop]=b[prop];return a}function isArray(obj){return"[object Array]"===objToString.call(obj)}function makeArray(obj){var ary=[];if(isArray(obj))ary=obj;else if(obj&&"number"==typeof obj.length)for(var i=0,len=obj.length;len>i;i++)ary.push(obj[i]);else ary.push(obj);return ary}function removeFrom(obj,ary){var index=indexOf(ary,obj);-1!==index&&ary.splice(index,1)}function toDashed(str){return str.replace(/(.)([A-Z])/g,function(match,$1,$2){return $1+"-"+$2}).toLowerCase()}function outlayerDefinition(eventie,docReady,EventEmitter,getSize,matchesSelector,Item){function Outlayer(element,options){if("string"==typeof element&&(element=document.querySelector(element)),!element||!isElement(element))return void(console&&console.error("Bad "+this.constructor.namespace+" element: "+element));this.element=element,this.options=extend({},this.constructor.defaults),this.option(options);var id=++GUID;this.element.outlayerGUID=id,instances[id]=this,this._create(),this.options.isInitLayout&&this.layout()}var GUID=0,instances={};return Outlayer.namespace="outlayer",Outlayer.Item=Item,Outlayer.defaults={containerStyle:{position:"relative"},isInitLayout:!0,isOriginLeft:!0,isOriginTop:!0,isResizeBound:!0,isResizingContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}},extend(Outlayer.prototype,EventEmitter.prototype),Outlayer.prototype.option=function(opts){extend(this.options,opts)},Outlayer.prototype._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),extend(this.element.style,this.options.containerStyle),this.options.isResizeBound&&this.bindResize()},Outlayer.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)},Outlayer.prototype._itemize=function(elems){for(var itemElems=this._filterFindItemElements(elems),Item=this.constructor.Item,items=[],i=0,len=itemElems.length;len>i;i++){var elem=itemElems[i],item=new Item(elem,this);items.push(item)}return items},Outlayer.prototype._filterFindItemElements=function(elems){elems=makeArray(elems);for(var itemSelector=this.options.itemSelector,itemElems=[],i=0,len=elems.length;len>i;i++){var elem=elems[i];if(isElement(elem))if(itemSelector){matchesSelector(elem,itemSelector)&&itemElems.push(elem);
for(var childElems=elem.querySelectorAll(itemSelector),j=0,jLen=childElems.length;jLen>j;j++)itemElems.push(childElems[j])}else itemElems.push(elem)}return itemElems},Outlayer.prototype.getItemElements=function(){for(var elems=[],i=0,len=this.items.length;len>i;i++)elems.push(this.items[i].element);return elems},Outlayer.prototype.layout=function(){this._resetLayout(),this._manageStamps();var isInstant=void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,isInstant),this._isLayoutInited=!0},Outlayer.prototype._init=Outlayer.prototype.layout,Outlayer.prototype._resetLayout=function(){this.getSize()},Outlayer.prototype.getSize=function(){this.size=getSize(this.element)},Outlayer.prototype._getMeasurement=function(measurement,size){var elem,option=this.options[measurement];option?("string"==typeof option?elem=this.element.querySelector(option):isElement(option)&&(elem=option),this[measurement]=elem?getSize(elem)[size]:option):this[measurement]=0},Outlayer.prototype.layoutItems=function(items,isInstant){items=this._getItemsForLayout(items),this._layoutItems(items,isInstant),this._postLayout()},Outlayer.prototype._getItemsForLayout=function(items){for(var layoutItems=[],i=0,len=items.length;len>i;i++){var item=items[i];item.isIgnored||layoutItems.push(item)}return layoutItems},Outlayer.prototype._layoutItems=function(items,isInstant){function onItemsLayout(){_this.emitEvent("layoutComplete",[_this,items])}var _this=this;if(!items||!items.length)return void onItemsLayout();this._itemsOn(items,"layout",onItemsLayout);for(var queue=[],i=0,len=items.length;len>i;i++){var item=items[i],position=this._getItemLayoutPosition(item);position.item=item,position.isInstant=isInstant||item.isLayoutInstant,queue.push(position)}this._processLayoutQueue(queue)},Outlayer.prototype._getItemLayoutPosition=function(){return{x:0,y:0}},Outlayer.prototype._processLayoutQueue=function(queue){for(var i=0,len=queue.length;len>i;i++){var obj=queue[i];this._positionItem(obj.item,obj.x,obj.y,obj.isInstant)}},Outlayer.prototype._positionItem=function(item,x,y,isInstant){isInstant?item.goTo(x,y):item.moveTo(x,y)},Outlayer.prototype._postLayout=function(){this.resizeContainer()},Outlayer.prototype.resizeContainer=function(){if(this.options.isResizingContainer){var size=this._getContainerSize();size&&(this._setContainerMeasure(size.width,!0),this._setContainerMeasure(size.height,!1))}},Outlayer.prototype._getContainerSize=noop,Outlayer.prototype._setContainerMeasure=function(measure,isWidth){if(void 0!==measure){var elemSize=this.size;elemSize.isBorderBox&&(measure+=isWidth?elemSize.paddingLeft+elemSize.paddingRight+elemSize.borderLeftWidth+elemSize.borderRightWidth:elemSize.paddingBottom+elemSize.paddingTop+elemSize.borderTopWidth+elemSize.borderBottomWidth),measure=Math.max(measure,0),this.element.style[isWidth?"width":"height"]=measure+"px"}},Outlayer.prototype._itemsOn=function(items,eventName,callback){function tick(){return doneCount++,doneCount===count&&callback.call(_this),!0}for(var doneCount=0,count=items.length,_this=this,i=0,len=items.length;len>i;i++){var item=items[i];item.on(eventName,tick)}},Outlayer.prototype.ignore=function(elem){var item=this.getItem(elem);item&&(item.isIgnored=!0)},Outlayer.prototype.unignore=function(elem){var item=this.getItem(elem);item&&delete item.isIgnored},Outlayer.prototype.stamp=function(elems){if(elems=this._find(elems)){this.stamps=this.stamps.concat(elems);for(var i=0,len=elems.length;len>i;i++){var elem=elems[i];this.ignore(elem)}}},Outlayer.prototype.unstamp=function(elems){if(elems=this._find(elems))for(var i=0,len=elems.length;len>i;i++){var elem=elems[i];removeFrom(elem,this.stamps),this.unignore(elem)}},Outlayer.prototype._find=function(elems){return elems?("string"==typeof elems&&(elems=this.element.querySelectorAll(elems)),elems=makeArray(elems)):void 0},Outlayer.prototype._manageStamps=function(){if(this.stamps&&this.stamps.length){this._getBoundingRect();for(var i=0,len=this.stamps.length;len>i;i++){var stamp=this.stamps[i];this._manageStamp(stamp)}}},Outlayer.prototype._getBoundingRect=function(){var boundingRect=this.element.getBoundingClientRect(),size=this.size;this._boundingRect={left:boundingRect.left+size.paddingLeft+size.borderLeftWidth,top:boundingRect.top+size.paddingTop+size.borderTopWidth,right:boundingRect.right-(size.paddingRight+size.borderRightWidth),bottom:boundingRect.bottom-(size.paddingBottom+size.borderBottomWidth)}},Outlayer.prototype._manageStamp=noop,Outlayer.prototype._getElementOffset=function(elem){var boundingRect=elem.getBoundingClientRect(),thisRect=this._boundingRect,size=getSize(elem),offset={left:boundingRect.left-thisRect.left-size.marginLeft,top:boundingRect.top-thisRect.top-size.marginTop,right:thisRect.right-boundingRect.right-size.marginRight,bottom:thisRect.bottom-boundingRect.bottom-size.marginBottom};return offset},Outlayer.prototype.handleEvent=function(event){var method="on"+event.type;this[method]&&this[method](event)},Outlayer.prototype.bindResize=function(){this.isResizeBound||(eventie.bind(window,"resize",this),this.isResizeBound=!0)},Outlayer.prototype.unbindResize=function(){this.isResizeBound&&eventie.unbind(window,"resize",this),this.isResizeBound=!1},Outlayer.prototype.onresize=function(){function delayed(){_this.resize(),delete _this.resizeTimeout}this.resizeTimeout&&clearTimeout(this.resizeTimeout);var _this=this;this.resizeTimeout=setTimeout(delayed,100)},Outlayer.prototype.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},Outlayer.prototype.needsResizeLayout=function(){var size=getSize(this.element),hasSizes=this.size&&size;return hasSizes&&size.innerWidth!==this.size.innerWidth},Outlayer.prototype.addItems=function(elems){var items=this._itemize(elems);return items.length&&(this.items=this.items.concat(items)),items},Outlayer.prototype.appended=function(elems){var items=this.addItems(elems);items.length&&(this.layoutItems(items,!0),this.reveal(items))},Outlayer.prototype.prepended=function(elems){var items=this._itemize(elems);if(items.length){var previousItems=this.items.slice(0);this.items=items.concat(previousItems),this._resetLayout(),this._manageStamps(),this.layoutItems(items,!0),this.reveal(items),this.layoutItems(previousItems)}},Outlayer.prototype.reveal=function(items){var len=items&&items.length;if(len)for(var i=0;len>i;i++){var item=items[i];item.reveal()}},Outlayer.prototype.hide=function(items){var len=items&&items.length;if(len)for(var i=0;len>i;i++){var item=items[i];item.hide()}},Outlayer.prototype.getItem=function(elem){for(var i=0,len=this.items.length;len>i;i++){var item=this.items[i];if(item.element===elem)return item}},Outlayer.prototype.getItems=function(elems){if(elems&&elems.length){for(var items=[],i=0,len=elems.length;len>i;i++){var elem=elems[i],item=this.getItem(elem);item&&items.push(item)}return items}},Outlayer.prototype.remove=function(elems){elems=makeArray(elems);var removeItems=this.getItems(elems);if(removeItems&&removeItems.length){this._itemsOn(removeItems,"remove",function(){this.emitEvent("removeComplete",[this,removeItems])});for(var i=0,len=removeItems.length;len>i;i++){var item=removeItems[i];item.remove(),removeFrom(item,this.items)}}},Outlayer.prototype.destroy=function(){var style=this.element.style;style.height="",style.position="",style.width="";for(var i=0,len=this.items.length;len>i;i++){var item=this.items[i];item.destroy()}this.unbindResize(),delete this.element.outlayerGUID,jQuery&&jQuery.removeData(this.element,this.constructor.namespace)},Outlayer.data=function(elem){var id=elem&&elem.outlayerGUID;return id&&instances[id]},Outlayer.create=function(namespace,options){function Layout(){Outlayer.apply(this,arguments)}return Object.create?Layout.prototype=Object.create(Outlayer.prototype):extend(Layout.prototype,Outlayer.prototype),Layout.prototype.constructor=Layout,Layout.defaults=extend({},Outlayer.defaults),extend(Layout.defaults,options),Layout.prototype.settings={},Layout.namespace=namespace,Layout.data=Outlayer.data,Layout.Item=function(){Item.apply(this,arguments)},Layout.Item.prototype=new Item,docReady(function(){for(var dashedNamespace=toDashed(namespace),elems=document.querySelectorAll(".js-"+dashedNamespace),dataAttr="data-"+dashedNamespace+"-options",i=0,len=elems.length;len>i;i++){var options,elem=elems[i],attr=elem.getAttribute(dataAttr);try{options=attr&&JSON.parse(attr)}catch(error){console&&console.error("Error parsing "+dataAttr+" on "+elem.nodeName.toLowerCase()+(elem.id?"#"+elem.id:"")+": "+error);continue}var instance=new Layout(elem,options);jQuery&&jQuery.data(elem,namespace,instance)}}),jQuery&&jQuery.bridget&&jQuery.bridget(namespace,Layout),Layout},Outlayer.Item=Item,Outlayer}var document=window.document,console=window.console,jQuery=window.jQuery,noop=function(){},objToString=Object.prototype.toString,isElement="object"==typeof HTMLElement?function(obj){return obj instanceof HTMLElement}:function(obj){return obj&&"object"==typeof obj&&1===obj.nodeType&&"string"==typeof obj.nodeName},indexOf=Array.prototype.indexOf?function(ary,obj){return ary.indexOf(obj)}:function(ary,obj){for(var i=0,len=ary.length;len>i;i++)if(ary[i]===obj)return i;return-1};"function"==typeof define&&define.amd?define("outlayer/outlayer",["eventie/eventie","doc-ready/doc-ready","eventEmitter/EventEmitter","get-size/get-size","matches-selector/matches-selector","./item"],outlayerDefinition):window.Outlayer=outlayerDefinition(window.eventie,window.docReady,window.EventEmitter,window.getSize,window.matchesSelector,window.Outlayer.Item)}(window),function(window){function masonryDefinition(Outlayer,getSize){var Masonry=Outlayer.create("masonry");return Masonry.prototype._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns();var i=this.cols;for(this.colYs=[];i--;)this.colYs.push(0);this.maxY=0},Masonry.prototype.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var firstItem=this.items[0],firstItemElem=firstItem&&firstItem.element;this.columnWidth=firstItemElem&&getSize(firstItemElem).outerWidth||this.containerWidth}this.columnWidth+=this.gutter,this.cols=Math.floor((this.containerWidth+this.gutter)/this.columnWidth),this.cols=Math.max(this.cols,1)},Masonry.prototype.getContainerWidth=function(){var container=this.options.isFitWidth?this.element.parentNode:this.element,size=getSize(container);this.containerWidth=size&&size.innerWidth},Masonry.prototype._getItemLayoutPosition=function(item){item.getSize();var remainder=item.size.outerWidth%this.columnWidth,mathMethod=remainder&&1>remainder?"round":"ceil",colSpan=Math[mathMethod](item.size.outerWidth/this.columnWidth);colSpan=Math.min(colSpan,this.cols);for(var colGroup=this._getColGroup(colSpan),minimumY=Math.min.apply(Math,colGroup),shortColIndex=indexOf(colGroup,minimumY),position={x:this.columnWidth*shortColIndex,y:minimumY},setHeight=minimumY+item.size.outerHeight,setSpan=this.cols+1-colGroup.length,i=0;setSpan>i;i++)this.colYs[shortColIndex+i]=setHeight;return position},Masonry.prototype._getColGroup=function(colSpan){if(2>colSpan)return this.colYs;for(var colGroup=[],groupCount=this.cols+1-colSpan,i=0;groupCount>i;i++){var groupColYs=this.colYs.slice(i,i+colSpan);colGroup[i]=Math.max.apply(Math,groupColYs)}return colGroup},Masonry.prototype._manageStamp=function(stamp){var stampSize=getSize(stamp),offset=this._getElementOffset(stamp),firstX=this.options.isOriginLeft?offset.left:offset.right,lastX=firstX+stampSize.outerWidth,firstCol=Math.floor(firstX/this.columnWidth);firstCol=Math.max(0,firstCol);var lastCol=Math.floor(lastX/this.columnWidth);lastCol-=lastX%this.columnWidth?0:1,lastCol=Math.min(this.cols-1,lastCol);for(var stampMaxY=(this.options.isOriginTop?offset.top:offset.bottom)+stampSize.outerHeight,i=firstCol;lastCol>=i;i++)this.colYs[i]=Math.max(stampMaxY,this.colYs[i])},Masonry.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var size={height:this.maxY};return this.options.isFitWidth&&(size.width=this._getContainerFitWidth()),size},Masonry.prototype._getContainerFitWidth=function(){for(var unusedCols=0,i=this.cols;--i&&0===this.colYs[i];)unusedCols++;return(this.cols-unusedCols)*this.columnWidth-this.gutter},Masonry.prototype.needsResizeLayout=function(){var previousWidth=this.containerWidth;return this.getContainerWidth(),previousWidth!==this.containerWidth},Masonry}var indexOf=Array.prototype.indexOf?function(items,value){return items.indexOf(value)}:function(items,value){for(var i=0,len=items.length;len>i;i++){var item=items[i];if(item===value)return i}return-1};"function"==typeof define&&define.amd?define("masonry",["outlayer/outlayer","get-size/get-size"],masonryDefinition):window.Masonry=masonryDefinition(window.Outlayer,window.getSize)}(window),function($){var loadImage=function(file,callback,options){var url,oUrl,img=document.createElement("img");if(img.onerror=callback,img.onload=function(){!oUrl||options&&options.noRevoke||loadImage.revokeObjectURL(oUrl),callback&&callback(loadImage.scale(img,options))},loadImage.isInstanceOf("Blob",file)||loadImage.isInstanceOf("File",file))url=oUrl=loadImage.createObjectURL(file),img._type=file.type;else{if("string"!=typeof file)return!1;url=file,options&&options.crossOrigin&&(img.crossOrigin=options.crossOrigin)}return url?(img.src=url,img):loadImage.readFile(file,function(e){var target=e.target;target&&target.result?img.src=target.result:callback&&callback(e)})},urlAPI=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&URL||window.webkitURL&&webkitURL;loadImage.isInstanceOf=function(type,obj){return Object.prototype.toString.call(obj)==="[object "+type+"]"},loadImage.transformCoordinates=function(){},loadImage.getTransformedOptions=function(options){return options},loadImage.renderImageToCanvas=function(canvas,img,sourceX,sourceY,sourceWidth,sourceHeight,destX,destY,destWidth,destHeight){return canvas.getContext("2d").drawImage(img,sourceX,sourceY,sourceWidth,sourceHeight,destX,destY,destWidth,destHeight),canvas},loadImage.hasCanvasOption=function(options){return options.canvas||options.crop},loadImage.scale=function(img,options){options=options||{};var maxWidth,maxHeight,minWidth,minHeight,sourceWidth,sourceHeight,sourceX,sourceY,tmp,canvas=document.createElement("canvas"),useCanvas=img.getContext||loadImage.hasCanvasOption(options)&&canvas.getContext,width=img.naturalWidth||img.width,height=img.naturalHeight||img.height,destWidth=width,destHeight=height,scaleUp=function(){var scale=Math.max((minWidth||destWidth)/destWidth,(minHeight||destHeight)/destHeight);scale>1&&(destWidth=Math.ceil(destWidth*scale),destHeight=Math.ceil(destHeight*scale))},scaleDown=function(){var scale=Math.min((maxWidth||destWidth)/destWidth,(maxHeight||destHeight)/destHeight);1>scale&&(destWidth=Math.ceil(destWidth*scale),destHeight=Math.ceil(destHeight*scale))};return useCanvas&&(options=loadImage.getTransformedOptions(options),sourceX=options.left||0,sourceY=options.top||0,options.sourceWidth?(sourceWidth=options.sourceWidth,void 0!==options.right&&void 0===options.left&&(sourceX=width-sourceWidth-options.right)):sourceWidth=width-sourceX-(options.right||0),options.sourceHeight?(sourceHeight=options.sourceHeight,void 0!==options.bottom&&void 0===options.top&&(sourceY=height-sourceHeight-options.bottom)):sourceHeight=height-sourceY-(options.bottom||0),destWidth=sourceWidth,destHeight=sourceHeight),maxWidth=options.maxWidth,maxHeight=options.maxHeight,minWidth=options.minWidth,minHeight=options.minHeight,useCanvas&&maxWidth&&maxHeight&&options.crop?(destWidth=maxWidth,destHeight=maxHeight,tmp=sourceWidth/sourceHeight-maxWidth/maxHeight,0>tmp?(sourceHeight=maxHeight*sourceWidth/maxWidth,void 0===options.top&&void 0===options.bottom&&(sourceY=(height-sourceHeight)/2)):tmp>0&&(sourceWidth=maxWidth*sourceHeight/maxHeight,void 0===options.left&&void 0===options.right&&(sourceX=(width-sourceWidth)/2))):((options.contain||options.cover)&&(minWidth=maxWidth=maxWidth||minWidth,minHeight=maxHeight=maxHeight||minHeight),options.cover?(scaleDown(),scaleUp()):(scaleUp(),scaleDown())),useCanvas?(canvas.width=destWidth,canvas.height=destHeight,loadImage.transformCoordinates(canvas,options),loadImage.renderImageToCanvas(canvas,img,sourceX,sourceY,sourceWidth,sourceHeight,0,0,destWidth,destHeight)):(img.width=destWidth,img.height=destHeight,img)},loadImage.createObjectURL=function(file){return urlAPI?urlAPI.createObjectURL(file):!1},loadImage.revokeObjectURL=function(url){return urlAPI?urlAPI.revokeObjectURL(url):!1},loadImage.readFile=function(file,callback,method){if(window.FileReader){var fileReader=new FileReader;if(fileReader.onload=fileReader.onerror=callback,method=method||"readAsDataURL",fileReader[method])return fileReader[method](file),fileReader}return!1},"function"==typeof define&&define.amd?define("load-image",[],function(){return loadImage}):$.loadImage=loadImage}(this),function(factory){"function"==typeof define&&define.amd?define("jquery.iframe-transport",["jquery"],factory):factory(window.jQuery)}(function($){var counter=0;$.ajaxTransport("iframe",function(options){if(options.async){var form,iframe,addParamChar,initialIframeSrc=options.initialIframeSrc||"javascript:false;";return{send:function(_,completeCallback){form=$('<form style="display:none;"></form>'),form.attr("accept-charset",options.formAcceptCharset),addParamChar=/\?/.test(options.url)?"&":"?","DELETE"===options.type?(options.url=options.url+addParamChar+"_method=DELETE",options.type="POST"):"PUT"===options.type?(options.url=options.url+addParamChar+"_method=PUT",options.type="POST"):"PATCH"===options.type&&(options.url=options.url+addParamChar+"_method=PATCH",options.type="POST"),counter+=1,iframe=$('<iframe src="'+initialIframeSrc+'" name="iframe-transport-'+counter+'"></iframe>').bind("load",function(){var fileInputClones,paramNames=$.isArray(options.paramName)?options.paramName:[options.paramName];iframe.unbind("load").bind("load",function(){var response;try{if(response=iframe.contents(),!response.length||!response[0].firstChild)throw new Error}catch(e){response=void 0}completeCallback(200,"success",{iframe:response}),$('<iframe src="'+initialIframeSrc+'"></iframe>').appendTo(form),window.setTimeout(function(){form.remove()},0)}),form.prop("target",iframe.prop("name")).prop("action",options.url).prop("method",options.type),options.formData&&$.each(options.formData,function(index,field){$('<input type="hidden"/>').prop("name",field.name).val(field.value).appendTo(form)}),options.fileInput&&options.fileInput.length&&"POST"===options.type&&(fileInputClones=options.fileInput.clone(),options.fileInput.after(function(index){return fileInputClones[index]}),options.paramName&&options.fileInput.each(function(index){$(this).prop("name",paramNames[index]||options.paramName)}),form.append(options.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data")),form.submit(),fileInputClones&&fileInputClones.length&&options.fileInput.each(function(index,input){var clone=$(fileInputClones[index]);$(input).prop("name",clone.prop("name")),clone.replaceWith(input)})}),form.append(iframe).appendTo(document.body)},abort:function(){iframe&&iframe.unbind("load").prop("src",initialIframeSrc),form&&form.remove()}}}}),$.ajaxSetup({converters:{"iframe text":function(iframe){return iframe&&$(iframe[0].body).text()},"iframe json":function(iframe){return iframe&&$.parseJSON($(iframe[0].body).text())},"iframe html":function(iframe){return iframe&&$(iframe[0].body).html()},"iframe xml":function(iframe){var xmlDoc=iframe&&iframe[0];return xmlDoc&&$.isXMLDoc(xmlDoc)?xmlDoc:$.parseXML(xmlDoc.XMLDocument&&xmlDoc.XMLDocument.xml||$(xmlDoc.body).html())},"iframe script":function(iframe){return iframe&&$.globalEval($(iframe[0].body).text())}}})}),function(factory){"function"==typeof define&&define.amd?define("jquery.fileupload",["jquery","jquery.ui.widget"],factory):factory(window.jQuery)}(function($){$.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||$('<input type="file">').prop("disabled")),$.support.xhrFileUpload=!(!window.ProgressEvent||!window.FileReader),$.support.xhrFormDataFileUpload=!!window.FormData,$.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),$.widget("blueimp.fileupload",{options:{dropZone:$(document),pasteZone:$(document),fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,limitMultiFileUploadSize:void 0,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(message,context){return message=this.messages[message]||message.toString(),context&&$.each(context,function(key,value){message=message.replace("{"+key+"}",value)}),message},formData:function(form){return form.serializeArray()},add:function(e,data){return e.isDefaultPrevented()?!1:void((data.autoUpload||data.autoUpload!==!1&&$(this).fileupload("option","autoUpload"))&&data.process().done(function(){data.submit()}))},processData:!1,contentType:!1,cache:!1},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:$.support.blobSlice&&function(){var slice=this.slice||this.webkitSlice||this.mozSlice;return slice.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(now,loaded,interval){var timeDiff=now-this.timestamp;return(!this.bitrate||!interval||timeDiff>interval)&&(this.bitrate=(loaded-this.loaded)*(1e3/timeDiff)*8,this.loaded=loaded,this.timestamp=now),this.bitrate}},_isXHRUpload:function(options){return!options.forceIframeTransport&&(!options.multipart&&$.support.xhrFileUpload||$.support.xhrFormDataFileUpload)},_getFormData:function(options){var formData;return"function"===$.type(options.formData)?options.formData(options.form):$.isArray(options.formData)?options.formData:"object"===$.type(options.formData)?(formData=[],$.each(options.formData,function(name,value){formData.push({name:name,value:value})}),formData):[]},_getTotal:function(files){var total=0;return $.each(files,function(index,file){total+=file.size||1}),total},_initProgressObject:function(obj){var progress={loaded:0,total:0,bitrate:0};obj._progress?$.extend(obj._progress,progress):obj._progress=progress},_initResponseObject:function(obj){var prop;if(obj._response)for(prop in obj._response)obj._response.hasOwnProperty(prop)&&delete obj._response[prop];else obj._response={}},_onProgress:function(e,data){if(e.lengthComputable){var loaded,now=Date.now?Date.now():(new Date).getTime();if(data._time&&data.progressInterval&&now-data._time<data.progressInterval&&e.loaded!==e.total)return;data._time=now,loaded=Math.floor(e.loaded/e.total*(data.chunkSize||data._progress.total))+(data.uploadedBytes||0),this._progress.loaded+=loaded-data._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(now,this._progress.loaded,data.bitrateInterval),data._progress.loaded=data.loaded=loaded,data._progress.bitrate=data.bitrate=data._bitrateTimer.getBitrate(now,loaded,data.bitrateInterval),this._trigger("progress",$.Event("progress",{delegatedEvent:e}),data),this._trigger("progressall",$.Event("progressall",{delegatedEvent:e}),this._progress)}},_initProgressListener:function(options){var that=this,xhr=options.xhr?options.xhr():$.ajaxSettings.xhr();xhr.upload&&($(xhr.upload).bind("progress",function(e){var oe=e.originalEvent;e.lengthComputable=oe.lengthComputable,e.loaded=oe.loaded,e.total=oe.total,that._onProgress(e,options)}),options.xhr=function(){return xhr})},_isInstanceOf:function(type,obj){return Object.prototype.toString.call(obj)==="[object "+type+"]"},_initXHRData:function(options){var formData,that=this,file=options.files[0],multipart=options.multipart||!$.support.xhrFileUpload,paramName=options.paramName[0];options.headers=$.extend({},options.headers),options.contentRange&&(options.headers["Content-Range"]=options.contentRange),multipart&&!options.blob&&this._isInstanceOf("File",file)||(options.headers["Content-Disposition"]='attachment; filename="'+encodeURI(file.name)+'"'),multipart?$.support.xhrFormDataFileUpload&&(options.postMessage?(formData=this._getFormData(options),options.blob?formData.push({name:paramName,value:options.blob}):$.each(options.files,function(index,file){formData.push({name:options.paramName[index]||paramName,value:file})})):(that._isInstanceOf("FormData",options.formData)?formData=options.formData:(formData=new FormData,$.each(this._getFormData(options),function(index,field){formData.append(field.name,field.value)})),options.blob?formData.append(paramName,options.blob,file.name):$.each(options.files,function(index,file){(that._isInstanceOf("File",file)||that._isInstanceOf("Blob",file))&&formData.append(options.paramName[index]||paramName,file,file.uploadName||file.name)})),options.data=formData):(options.contentType=file.type||"application/octet-stream",options.data=options.blob||file),options.blob=null},_initIframeSettings:function(options){var targetHost=$("<a></a>").prop("href",options.url).prop("host");options.dataType="iframe "+(options.dataType||""),options.formData=this._getFormData(options),options.redirect&&targetHost&&targetHost!==location.host&&options.formData.push({name:options.redirectParamName||"redirect",value:options.redirect})},_initDataSettings:function(options){this._isXHRUpload(options)?(this._chunkedUpload(options,!0)||(options.data||this._initXHRData(options),this._initProgressListener(options)),options.postMessage&&(options.dataType="postmessage "+(options.dataType||""))):this._initIframeSettings(options)},_getParamName:function(options){var fileInput=$(options.fileInput),paramName=options.paramName;return paramName?$.isArray(paramName)||(paramName=[paramName]):(paramName=[],fileInput.each(function(){for(var input=$(this),name=input.prop("name")||"files[]",i=(input.prop("files")||[1]).length;i;)paramName.push(name),i-=1}),paramName.length||(paramName=[fileInput.prop("name")||"files[]"])),paramName},_initFormSettings:function(options){options.form&&options.form.length||(options.form=$(options.fileInput.prop("form")),options.form.length||(options.form=$(this.options.fileInput.prop("form")))),options.paramName=this._getParamName(options),options.url||(options.url=options.form.prop("action")||location.href),options.type=(options.type||"string"===$.type(options.form.prop("method"))&&options.form.prop("method")||"").toUpperCase(),"POST"!==options.type&&"PUT"!==options.type&&"PATCH"!==options.type&&(options.type="POST"),options.formAcceptCharset||(options.formAcceptCharset=options.form.attr("accept-charset"))},_getAJAXSettings:function(data){var options=$.extend({},this.options,data);return this._initFormSettings(options),this._initDataSettings(options),options},_getDeferredState:function(deferred){return deferred.state?deferred.state():deferred.isResolved()?"resolved":deferred.isRejected()?"rejected":"pending"},_enhancePromise:function(promise){return promise.success=promise.done,promise.error=promise.fail,promise.complete=promise.always,promise},_getXHRPromise:function(resolveOrReject,context,args){var dfd=$.Deferred(),promise=dfd.promise();return context=context||this.options.context||promise,resolveOrReject===!0?dfd.resolveWith(context,args):resolveOrReject===!1&&dfd.rejectWith(context,args),promise.abort=dfd.promise,this._enhancePromise(promise)},_addConvenienceMethods:function(e,data){var that=this,getPromise=function(args){return $.Deferred().resolveWith(that,args).promise()};data.process=function(resolveFunc,rejectFunc){return(resolveFunc||rejectFunc)&&(data._processQueue=this._processQueue=(this._processQueue||getPromise([this])).pipe(function(){return data.errorThrown?$.Deferred().rejectWith(that,[data]).promise():getPromise(arguments)}).pipe(resolveFunc,rejectFunc)),this._processQueue||getPromise([this])},data.submit=function(){return"pending"!==this.state()&&(data.jqXHR=this.jqXHR=that._trigger("submit",$.Event("submit",{delegatedEvent:e}),this)!==!1&&that._onSend(e,this)),this.jqXHR||that._getXHRPromise()},data.abort=function(){return this.jqXHR?this.jqXHR.abort():(this.errorThrown="abort",that._trigger("fail",null,this),that._getXHRPromise(!1))},data.state=function(){return this.jqXHR?that._getDeferredState(this.jqXHR):this._processQueue?that._getDeferredState(this._processQueue):void 0},data.processing=function(){return!this.jqXHR&&this._processQueue&&"pending"===that._getDeferredState(this._processQueue)},data.progress=function(){return this._progress},data.response=function(){return this._response}},_getUploadedBytes:function(jqXHR){var range=jqXHR.getResponseHeader("Range"),parts=range&&range.split("-"),upperBytesPos=parts&&parts.length>1&&parseInt(parts[1],10);return upperBytesPos&&upperBytesPos+1},_chunkedUpload:function(options,testOnly){options.uploadedBytes=options.uploadedBytes||0;var jqXHR,upload,that=this,file=options.files[0],fs=file.size,ub=options.uploadedBytes,mcs=options.maxChunkSize||fs,slice=this._blobSlice,dfd=$.Deferred(),promise=dfd.promise();return this._isXHRUpload(options)&&slice&&(ub||fs>mcs)&&!options.data?testOnly?!0:ub>=fs?(file.error=options.i18n("uploadedBytes"),this._getXHRPromise(!1,options.context,[null,"error",file.error])):(upload=function(){var o=$.extend({},options),currentLoaded=o._progress.loaded;o.blob=slice.call(file,ub,ub+mcs,file.type),o.chunkSize=o.blob.size,o.contentRange="bytes "+ub+"-"+(ub+o.chunkSize-1)+"/"+fs,that._initXHRData(o),that._initProgressListener(o),jqXHR=(that._trigger("chunksend",null,o)!==!1&&$.ajax(o)||that._getXHRPromise(!1,o.context)).done(function(result,textStatus,jqXHR){ub=that._getUploadedBytes(jqXHR)||ub+o.chunkSize,currentLoaded+o.chunkSize-o._progress.loaded&&that._onProgress($.Event("progress",{lengthComputable:!0,loaded:ub-o.uploadedBytes,total:ub-o.uploadedBytes}),o),options.uploadedBytes=o.uploadedBytes=ub,o.result=result,o.textStatus=textStatus,o.jqXHR=jqXHR,that._trigger("chunkdone",null,o),that._trigger("chunkalways",null,o),fs>ub?upload():dfd.resolveWith(o.context,[result,textStatus,jqXHR])}).fail(function(jqXHR,textStatus,errorThrown){o.jqXHR=jqXHR,o.textStatus=textStatus,o.errorThrown=errorThrown,that._trigger("chunkfail",null,o),that._trigger("chunkalways",null,o),dfd.rejectWith(o.context,[jqXHR,textStatus,errorThrown])})},this._enhancePromise(promise),promise.abort=function(){return jqXHR.abort()},upload(),promise):!1},_beforeSend:function(e,data){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(data),this._initProgressObject(data),data._progress.loaded=data.loaded=data.uploadedBytes||0,data._progress.total=data.total=this._getTotal(data.files)||1,data._progress.bitrate=data.bitrate=0,this._active+=1,this._progress.loaded+=data.loaded,this._progress.total+=data.total},_onDone:function(result,textStatus,jqXHR,options){var total=options._progress.total,response=options._response;options._progress.loaded<total&&this._onProgress($.Event("progress",{lengthComputable:!0,loaded:total,total:total}),options),response.result=options.result=result,response.textStatus=options.textStatus=textStatus,response.jqXHR=options.jqXHR=jqXHR,this._trigger("done",null,options)},_onFail:function(jqXHR,textStatus,errorThrown,options){var response=options._response;
options.recalculateProgress&&(this._progress.loaded-=options._progress.loaded,this._progress.total-=options._progress.total),response.jqXHR=options.jqXHR=jqXHR,response.textStatus=options.textStatus=textStatus,response.errorThrown=options.errorThrown=errorThrown,this._trigger("fail",null,options)},_onAlways:function(jqXHRorResult,textStatus,jqXHRorError,options){this._trigger("always",null,options)},_onSend:function(e,data){data.submit||this._addConvenienceMethods(e,data);var jqXHR,aborted,slot,pipe,that=this,options=that._getAJAXSettings(data),send=function(){return that._sending+=1,options._bitrateTimer=new that._BitrateTimer,jqXHR=jqXHR||((aborted||that._trigger("send",$.Event("send",{delegatedEvent:e}),options)===!1)&&that._getXHRPromise(!1,options.context,aborted)||that._chunkedUpload(options)||$.ajax(options)).done(function(result,textStatus,jqXHR){that._onDone(result,textStatus,jqXHR,options)}).fail(function(jqXHR,textStatus,errorThrown){that._onFail(jqXHR,textStatus,errorThrown,options)}).always(function(jqXHRorResult,textStatus,jqXHRorError){if(that._onAlways(jqXHRorResult,textStatus,jqXHRorError,options),that._sending-=1,that._active-=1,options.limitConcurrentUploads&&options.limitConcurrentUploads>that._sending)for(var nextSlot=that._slots.shift();nextSlot;){if("pending"===that._getDeferredState(nextSlot)){nextSlot.resolve();break}nextSlot=that._slots.shift()}0===that._active&&that._trigger("stop")})};return this._beforeSend(e,options),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(slot=$.Deferred(),this._slots.push(slot),pipe=slot.pipe(send)):(this._sequence=this._sequence.pipe(send,send),pipe=this._sequence),pipe.abort=function(){return aborted=[void 0,"abort","abort"],jqXHR?jqXHR.abort():(slot&&slot.rejectWith(options.context,aborted),send())},this._enhancePromise(pipe)):send()},_onAdd:function(e,data){var paramNameSet,paramNameSlice,fileSet,i,that=this,result=!0,options=$.extend({},this.options,data),files=data.files,filesLength=files.length,limit=options.limitMultiFileUploads,limitSize=options.limitMultiFileUploadSize,overhead=options.limitMultiFileUploadSizeOverhead,batchSize=0,paramName=this._getParamName(options),j=0;if(!limitSize||filesLength&&void 0!==files[0].size||(limitSize=void 0),(options.singleFileUploads||limit||limitSize)&&this._isXHRUpload(options))if(options.singleFileUploads||limitSize||!limit)if(!options.singleFileUploads&&limitSize)for(fileSet=[],paramNameSet=[],i=0;filesLength>i;i+=1)batchSize+=files[i].size+overhead,(i+1===filesLength||batchSize+files[i+1].size+overhead>limitSize)&&(fileSet.push(files.slice(j,i+1)),paramNameSlice=paramName.slice(j,i+1),paramNameSlice.length||(paramNameSlice=paramName),paramNameSet.push(paramNameSlice),j=i+1,batchSize=0);else paramNameSet=paramName;else for(fileSet=[],paramNameSet=[],i=0;filesLength>i;i+=limit)fileSet.push(files.slice(i,i+limit)),paramNameSlice=paramName.slice(i,i+limit),paramNameSlice.length||(paramNameSlice=paramName),paramNameSet.push(paramNameSlice);else fileSet=[files],paramNameSet=[paramName];return data.originalFiles=files,$.each(fileSet||files,function(index,element){var newData=$.extend({},data);return newData.files=fileSet?element:[element],newData.paramName=paramNameSet[index],that._initResponseObject(newData),that._initProgressObject(newData),that._addConvenienceMethods(e,newData),result=that._trigger("add",$.Event("add",{delegatedEvent:e}),newData)}),result},_replaceFileInput:function(input){var inputClone=input.clone(!0);$("<form></form>").append(inputClone)[0].reset(),input.after(inputClone).detach(),$.cleanData(input.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(i,el){return el===input[0]?inputClone[0]:el}),input[0]===this.element[0]&&(this.element=inputClone)},_handleFileTreeEntry:function(entry,path){var dirReader,that=this,dfd=$.Deferred(),errorHandler=function(e){e&&!e.entry&&(e.entry=entry),dfd.resolve([e])};return path=path||"",entry.isFile?entry._file?(entry._file.relativePath=path,dfd.resolve(entry._file)):entry.file(function(file){file.relativePath=path,dfd.resolve(file)},errorHandler):entry.isDirectory?(dirReader=entry.createReader(),dirReader.readEntries(function(entries){that._handleFileTreeEntries(entries,path+entry.name+"/").done(function(files){dfd.resolve(files)}).fail(errorHandler)},errorHandler)):dfd.resolve([]),dfd.promise()},_handleFileTreeEntries:function(entries,path){var that=this;return $.when.apply($,$.map(entries,function(entry){return that._handleFileTreeEntry(entry,path)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(dataTransfer){dataTransfer=dataTransfer||{};var items=dataTransfer.items;return items&&items.length&&(items[0].webkitGetAsEntry||items[0].getAsEntry)?this._handleFileTreeEntries($.map(items,function(item){var entry;return item.webkitGetAsEntry?(entry=item.webkitGetAsEntry(),entry&&(entry._file=item.getAsFile()),entry):item.getAsEntry()})):$.Deferred().resolve($.makeArray(dataTransfer.files)).promise()},_getSingleFileInputFiles:function(fileInput){fileInput=$(fileInput);var files,value,entries=fileInput.prop("webkitEntries")||fileInput.prop("entries");if(entries&&entries.length)return this._handleFileTreeEntries(entries);if(files=$.makeArray(fileInput.prop("files")),files.length)void 0===files[0].name&&files[0].fileName&&$.each(files,function(index,file){file.name=file.fileName,file.size=file.fileSize});else{if(value=fileInput.prop("value"),!value)return $.Deferred().resolve([]).promise();files=[{name:value.replace(/^.*\\/,"")}]}return $.Deferred().resolve(files).promise()},_getFileInputFiles:function(fileInput){return fileInput instanceof $&&1!==fileInput.length?$.when.apply($,$.map(fileInput,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(fileInput)},_onChange:function(e){var that=this,data={fileInput:$(e.target),form:$(e.target.form)};this._getFileInputFiles(data.fileInput).always(function(files){data.files=files,that.options.replaceFileInput&&that._replaceFileInput(data.fileInput),that._trigger("change",$.Event("change",{delegatedEvent:e}),data)!==!1&&that._onAdd(e,data)})},_onPaste:function(e){var items=e.originalEvent&&e.originalEvent.clipboardData&&e.originalEvent.clipboardData.items,data={files:[]};items&&items.length&&($.each(items,function(index,item){var file=item.getAsFile&&item.getAsFile();file&&data.files.push(file)}),this._trigger("paste",$.Event("paste",{delegatedEvent:e}),data)!==!1&&this._onAdd(e,data))},_onDrop:function(e){e.dataTransfer=e.originalEvent&&e.originalEvent.dataTransfer;var that=this,dataTransfer=e.dataTransfer,data={};dataTransfer&&dataTransfer.files&&dataTransfer.files.length&&(e.preventDefault(),this._getDroppedFiles(dataTransfer).always(function(files){data.files=files,that._trigger("drop",$.Event("drop",{delegatedEvent:e}),data)!==!1&&that._onAdd(e,data)}))},_onDragOver:function(e){e.dataTransfer=e.originalEvent&&e.originalEvent.dataTransfer;var dataTransfer=e.dataTransfer;dataTransfer&&-1!==$.inArray("Files",dataTransfer.types)&&this._trigger("dragover",$.Event("dragover",{delegatedEvent:e}))!==!1&&(e.preventDefault(),dataTransfer.dropEffect="copy")},_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop}),this._on(this.options.pasteZone,{paste:this._onPaste})),$.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(key,value){var reinit=-1!==$.inArray(key,this._specialOptions);reinit&&this._destroyEventHandlers(),this._super(key,value),reinit&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var options=this.options;void 0===options.fileInput?options.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):options.fileInput instanceof $||(options.fileInput=$(options.fileInput)),options.dropZone instanceof $||(options.dropZone=$(options.dropZone)),options.pasteZone instanceof $||(options.pasteZone=$(options.pasteZone))},_getRegExp:function(str){var parts=str.split("/"),modifiers=parts.pop();return parts.shift(),new RegExp(parts.join("/"),modifiers)},_isRegExpOption:function(key,value){return"url"!==key&&"string"===$.type(value)&&/^\/.*\/[igm]{0,3}$/.test(value)},_initDataAttributes:function(){var that=this,options=this.options;$.each($(this.element[0].cloneNode(!1)).data(),function(key,value){that._isRegExpOption(key,value)&&(value=that._getRegExp(value)),options[key]=value})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(data){var that=this;data&&!this.options.disabled&&(data.fileInput&&!data.files?this._getFileInputFiles(data.fileInput).always(function(files){data.files=files,that._onAdd(null,data)}):(data.files=$.makeArray(data.files),this._onAdd(null,data)))},send:function(data){if(data&&!this.options.disabled){if(data.fileInput&&!data.files){var jqXHR,aborted,that=this,dfd=$.Deferred(),promise=dfd.promise();return promise.abort=function(){return aborted=!0,jqXHR?jqXHR.abort():(dfd.reject(null,"abort","abort"),promise)},this._getFileInputFiles(data.fileInput).always(function(files){if(!aborted){if(!files.length)return void dfd.reject();data.files=files,jqXHR=that._onSend(null,data).then(function(result,textStatus,jqXHR){dfd.resolve(result,textStatus,jqXHR)},function(jqXHR,textStatus,errorThrown){dfd.reject(jqXHR,textStatus,errorThrown)})}}),this._enhancePromise(promise)}if(data.files=$.makeArray(data.files),data.files.length)return this._onSend(null,data)}return this._getXHRPromise(!1,data&&data.context)}})}),function(factory){"function"==typeof define&&define.amd?define("load-image-meta",["load-image"],factory):factory(window.loadImage)}(function(loadImage){var hasblobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);loadImage.blobSlice=hasblobSlice&&function(){var slice=this.slice||this.webkitSlice||this.mozSlice;return slice.apply(this,arguments)},loadImage.metaDataParsers={jpeg:{65505:[]}},loadImage.parseMetaData=function(file,callback,options){options=options||{};var that=this,maxMetaDataSize=options.maxMetaDataSize||262144,data={},noMetaData=!(window.DataView&&file&&file.size>=12&&"image/jpeg"===file.type&&loadImage.blobSlice);(noMetaData||!loadImage.readFile(loadImage.blobSlice.call(file,0,maxMetaDataSize),function(e){if(e.target.error)return console.log(e.target.error),void callback(data);var markerBytes,markerLength,parsers,i,buffer=e.target.result,dataView=new DataView(buffer),offset=2,maxOffset=dataView.byteLength-4,headLength=offset;if(65496===dataView.getUint16(0)){for(;maxOffset>offset&&(markerBytes=dataView.getUint16(offset),markerBytes>=65504&&65519>=markerBytes||65534===markerBytes);){if(markerLength=dataView.getUint16(offset+2)+2,offset+markerLength>dataView.byteLength){console.log("Invalid meta data: Invalid segment size.");break}if(parsers=loadImage.metaDataParsers.jpeg[markerBytes])for(i=0;i<parsers.length;i+=1)parsers[i].call(that,dataView,offset,markerLength,data,options);offset+=markerLength,headLength=offset}!options.disableImageHead&&headLength>6&&(data.imageHead=buffer.slice?buffer.slice(0,headLength):new Uint8Array(buffer).subarray(0,headLength))}else console.log("Invalid JPEG file: Missing JPEG marker.");callback(data)},"readAsArrayBuffer"))&&callback(data)}}),function(factory){"function"==typeof define&&define.amd?define("load-image-exif",["load-image","load-image-meta"],factory):factory(window.loadImage)}(function(loadImage){loadImage.ExifMap=function(){return this},loadImage.ExifMap.prototype.map={Orientation:274},loadImage.ExifMap.prototype.get=function(id){return this[id]||this[this.map[id]]},loadImage.getExifThumbnail=function(dataView,offset,length){var hexData,i,b;if(!length||offset+length>dataView.byteLength)return void console.log("Invalid Exif data: Invalid thumbnail data.");for(hexData=[],i=0;length>i;i+=1)b=dataView.getUint8(offset+i),hexData.push((16>b?"0":"")+b.toString(16));return"data:image/jpeg,%"+hexData.join("%")},loadImage.exifTagTypes={1:{getValue:function(dataView,dataOffset){return dataView.getUint8(dataOffset)},size:1},2:{getValue:function(dataView,dataOffset){return String.fromCharCode(dataView.getUint8(dataOffset))},size:1,ascii:!0},3:{getValue:function(dataView,dataOffset,littleEndian){return dataView.getUint16(dataOffset,littleEndian)},size:2},4:{getValue:function(dataView,dataOffset,littleEndian){return dataView.getUint32(dataOffset,littleEndian)},size:4},5:{getValue:function(dataView,dataOffset,littleEndian){return dataView.getUint32(dataOffset,littleEndian)/dataView.getUint32(dataOffset+4,littleEndian)},size:8},9:{getValue:function(dataView,dataOffset,littleEndian){return dataView.getInt32(dataOffset,littleEndian)},size:4},10:{getValue:function(dataView,dataOffset,littleEndian){return dataView.getInt32(dataOffset,littleEndian)/dataView.getInt32(dataOffset+4,littleEndian)},size:8}},loadImage.exifTagTypes[7]=loadImage.exifTagTypes[1],loadImage.getExifValue=function(dataView,tiffOffset,offset,type,length,littleEndian){var tagSize,dataOffset,values,i,str,c,tagType=loadImage.exifTagTypes[type];if(!tagType)return void console.log("Invalid Exif data: Invalid tag type.");if(tagSize=tagType.size*length,dataOffset=tagSize>4?tiffOffset+dataView.getUint32(offset+8,littleEndian):offset+8,dataOffset+tagSize>dataView.byteLength)return void console.log("Invalid Exif data: Invalid data offset.");if(1===length)return tagType.getValue(dataView,dataOffset,littleEndian);for(values=[],i=0;length>i;i+=1)values[i]=tagType.getValue(dataView,dataOffset+i*tagType.size,littleEndian);if(tagType.ascii){for(str="",i=0;i<values.length&&(c=values[i],"\x00"!==c);i+=1)str+=c;return str}return values},loadImage.parseExifTag=function(dataView,tiffOffset,offset,littleEndian,data){var tag=dataView.getUint16(offset,littleEndian);data.exif[tag]=loadImage.getExifValue(dataView,tiffOffset,offset,dataView.getUint16(offset+2,littleEndian),dataView.getUint32(offset+4,littleEndian),littleEndian)},loadImage.parseExifTags=function(dataView,tiffOffset,dirOffset,littleEndian,data){var tagsNumber,dirEndOffset,i;if(dirOffset+6>dataView.byteLength)return void console.log("Invalid Exif data: Invalid directory offset.");if(tagsNumber=dataView.getUint16(dirOffset,littleEndian),dirEndOffset=dirOffset+2+12*tagsNumber,dirEndOffset+4>dataView.byteLength)return void console.log("Invalid Exif data: Invalid directory size.");for(i=0;tagsNumber>i;i+=1)this.parseExifTag(dataView,tiffOffset,dirOffset+2+12*i,littleEndian,data);return dataView.getUint32(dirEndOffset,littleEndian)},loadImage.parseExifData=function(dataView,offset,length,data,options){if(!options.disableExif){var littleEndian,dirOffset,thumbnailData,tiffOffset=offset+10;if(1165519206===dataView.getUint32(offset+4)){if(tiffOffset+8>dataView.byteLength)return void console.log("Invalid Exif data: Invalid segment size.");if(0!==dataView.getUint16(offset+8))return void console.log("Invalid Exif data: Missing byte alignment offset.");switch(dataView.getUint16(tiffOffset)){case 18761:littleEndian=!0;break;case 19789:littleEndian=!1;break;default:return void console.log("Invalid Exif data: Invalid byte alignment marker.")}if(42!==dataView.getUint16(tiffOffset+2,littleEndian))return void console.log("Invalid Exif data: Missing TIFF marker.");dirOffset=dataView.getUint32(tiffOffset+4,littleEndian),data.exif=new loadImage.ExifMap,dirOffset=loadImage.parseExifTags(dataView,tiffOffset,tiffOffset+dirOffset,littleEndian,data),dirOffset&&!options.disableExifThumbnail&&(thumbnailData={exif:{}},dirOffset=loadImage.parseExifTags(dataView,tiffOffset,tiffOffset+dirOffset,littleEndian,thumbnailData),thumbnailData.exif[513]&&(data.exif.Thumbnail=loadImage.getExifThumbnail(dataView,tiffOffset+thumbnailData.exif[513],thumbnailData.exif[514]))),data.exif[34665]&&!options.disableExifSub&&loadImage.parseExifTags(dataView,tiffOffset,tiffOffset+data.exif[34665],littleEndian,data),data.exif[34853]&&!options.disableExifGps&&loadImage.parseExifTags(dataView,tiffOffset,tiffOffset+data.exif[34853],littleEndian,data)}}},loadImage.metaDataParsers.jpeg[65505].push(loadImage.parseExifData)}),function(factory){"function"==typeof define&&define.amd?define("load-image-ios",["load-image"],factory):factory(window.loadImage)}(function(loadImage){if(window.navigator&&window.navigator.platform&&/iP(hone|od|ad)/.test(window.navigator.platform)){var originalRenderMethod=loadImage.renderImageToCanvas;loadImage.detectSubsampling=function(img){var canvas,context;return img.width*img.height>1048576?(canvas=document.createElement("canvas"),canvas.width=canvas.height=1,context=canvas.getContext("2d"),context.drawImage(img,-img.width+1,0),0===context.getImageData(0,0,1,1).data[3]):!1},loadImage.detectVerticalSquash=function(img,subsampled){var data,sy,ey,py,alpha,naturalHeight=img.naturalHeight||img.height,canvas=document.createElement("canvas"),context=canvas.getContext("2d");for(subsampled&&(naturalHeight/=2),canvas.width=1,canvas.height=naturalHeight,context.drawImage(img,0,0),data=context.getImageData(0,0,1,naturalHeight).data,sy=0,ey=naturalHeight,py=naturalHeight;py>sy;)alpha=data[4*(py-1)+3],0===alpha?ey=py:sy=py,py=ey+sy>>1;return py/naturalHeight||1},loadImage.renderImageToCanvas=function(canvas,img,sourceX,sourceY,sourceWidth,sourceHeight,destX,destY,destWidth,destHeight){if("image/jpeg"===img._type){var subsampled,vertSquashRatio,tileX,tileY,context=canvas.getContext("2d"),tmpCanvas=document.createElement("canvas"),tileSize=1024,tmpContext=tmpCanvas.getContext("2d");if(tmpCanvas.width=tileSize,tmpCanvas.height=tileSize,context.save(),subsampled=loadImage.detectSubsampling(img),subsampled&&(sourceX/=2,sourceY/=2,sourceWidth/=2,sourceHeight/=2),vertSquashRatio=loadImage.detectVerticalSquash(img,subsampled),subsampled||1!==vertSquashRatio){for(sourceY*=vertSquashRatio,destWidth=Math.ceil(tileSize*destWidth/sourceWidth),destHeight=Math.ceil(tileSize*destHeight/sourceHeight/vertSquashRatio),destY=0,tileY=0;sourceHeight>tileY;){for(destX=0,tileX=0;sourceWidth>tileX;)tmpContext.clearRect(0,0,tileSize,tileSize),tmpContext.drawImage(img,sourceX,sourceY,sourceWidth,sourceHeight,-tileX,-tileY,sourceWidth,sourceHeight),context.drawImage(tmpCanvas,0,0,tileSize,tileSize,destX,destY,destWidth,destHeight),tileX+=tileSize,destX+=destWidth;tileY+=tileSize,destY+=destHeight}return context.restore(),canvas}}return originalRenderMethod(canvas,img,sourceX,sourceY,sourceWidth,sourceHeight,destX,destY,destWidth,destHeight)}}}),function(window){var CanvasPrototype=window.HTMLCanvasElement&&window.HTMLCanvasElement.prototype,hasBlobConstructor=window.Blob&&function(){try{return Boolean(new Blob)}catch(e){return!1}}(),hasArrayBufferViewSupport=hasBlobConstructor&&window.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(e){return!1}}(),BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,dataURLtoBlob=(hasBlobConstructor||BlobBuilder)&&window.atob&&window.ArrayBuffer&&window.Uint8Array&&function(dataURI){var byteString,arrayBuffer,intArray,i,mimeString,bb;for(byteString=dataURI.split(",")[0].indexOf("base64")>=0?atob(dataURI.split(",")[1]):decodeURIComponent(dataURI.split(",")[1]),arrayBuffer=new ArrayBuffer(byteString.length),intArray=new Uint8Array(arrayBuffer),i=0;i<byteString.length;i+=1)intArray[i]=byteString.charCodeAt(i);return mimeString=dataURI.split(",")[0].split(":")[1].split(";")[0],hasBlobConstructor?new Blob([hasArrayBufferViewSupport?intArray:arrayBuffer],{type:mimeString}):(bb=new BlobBuilder,bb.append(arrayBuffer),bb.getBlob(mimeString))};window.HTMLCanvasElement&&!CanvasPrototype.toBlob&&(CanvasPrototype.mozGetAsFile?CanvasPrototype.toBlob=function(callback,type,quality){callback(quality&&CanvasPrototype.toDataURL&&dataURLtoBlob?dataURLtoBlob(this.toDataURL(type,quality)):this.mozGetAsFile("blob",type))}:CanvasPrototype.toDataURL&&dataURLtoBlob&&(CanvasPrototype.toBlob=function(callback,type,quality){callback(dataURLtoBlob(this.toDataURL(type,quality)))})),"function"==typeof define&&define.amd?define("canvas-to-blob",[],function(){return dataURLtoBlob}):window.dataURLtoBlob=dataURLtoBlob}(this),function(factory){"function"==typeof define&&define.amd?define("jquery.fileupload-process",["jquery","./jquery.fileupload"],factory):factory(window.jQuery)}(function($){var originalAdd=$.blueimp.fileupload.prototype.options.add;$.widget("blueimp.fileupload",$.blueimp.fileupload,{options:{processQueue:[],add:function(e,data){var $this=$(this);data.process(function(){return $this.fileupload("process",data)}),originalAdd.call(this,e,data)}},processActions:{},_processFile:function(data,originalData){var that=this,dfd=$.Deferred().resolveWith(that,[data]),chain=dfd.promise();return this._trigger("process",null,data),$.each(data.processQueue,function(i,settings){var func=function(data){return originalData.errorThrown?$.Deferred().rejectWith(that,[originalData]).promise():that.processActions[settings.action].call(that,data,settings)};chain=chain.pipe(func,settings.always&&func)}),chain.done(function(){that._trigger("processdone",null,data),that._trigger("processalways",null,data)}).fail(function(){that._trigger("processfail",null,data),that._trigger("processalways",null,data)}),chain},_transformProcessQueue:function(options){var processQueue=[];$.each(options.processQueue,function(){var settings={},action=this.action,prefix=this.prefix===!0?action:this.prefix;$.each(this,function(key,value){settings[key]="string"===$.type(value)&&"@"===value.charAt(0)?options[value.slice(1)||(prefix?prefix+key.charAt(0).toUpperCase()+key.slice(1):key)]:value}),processQueue.push(settings)}),options.processQueue=processQueue},processing:function(){return this._processing},process:function(data){var that=this,options=$.extend({},this.options,data);return options.processQueue&&options.processQueue.length&&(this._transformProcessQueue(options),0===this._processing&&this._trigger("processstart"),$.each(data.files,function(index){var opts=index?$.extend({},options):options,func=function(){return data.errorThrown?$.Deferred().rejectWith(that,[data]).promise():that._processFile(opts,data)};opts.index=index,that._processing+=1,that._processingQueue=that._processingQueue.pipe(func,func).always(function(){that._processing-=1,0===that._processing&&that._trigger("processstop")})})),this._processingQueue},_create:function(){this._super(),this._processing=0,this._processingQueue=$.Deferred().resolveWith(this).promise()}})}),function(factory){"function"==typeof define&&define.amd?define("jquery.fileupload-image",["jquery","load-image","load-image-meta","load-image-exif","load-image-ios","canvas-to-blob","./jquery.fileupload-process"],factory):factory(window.jQuery,window.loadImage)}(function($,loadImage){$.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadImageMetaData",disableImageHead:"@",disableExif:"@",disableExifThumbnail:"@",disableExifSub:"@",disableExifGps:"@",disabled:"@disableImageMetaDataLoad"},{action:"loadImage",prefix:!0,fileTypes:"@",maxFileSize:"@",noRevoke:"@",disabled:"@disableImageLoad"},{action:"resizeImage",prefix:"image",maxWidth:"@",maxHeight:"@",minWidth:"@",minHeight:"@",crop:"@",orientation:"@",forceResize:"@",disabled:"@disableImageResize"},{action:"saveImage",quality:"@imageQuality",type:"@imageType",disabled:"@disableImageResize"},{action:"saveImageMetaData",disabled:"@disableImageMetaDataSave"},{action:"resizeImage",prefix:"preview",maxWidth:"@",maxHeight:"@",minWidth:"@",minHeight:"@",crop:"@",orientation:"@",thumbnail:"@",canvas:"@",disabled:"@disableImagePreview"},{action:"setImage",name:"@imagePreviewName",disabled:"@disableImagePreview"},{action:"deleteImageReferences",disabled:"@disableImageReferencesDeletion"}),$.widget("blueimp.fileupload",$.blueimp.fileupload,{options:{loadImageFileTypes:/^image\/(gif|jpeg|png)$/,loadImageMaxFileSize:1e7,imageMaxWidth:1920,imageMaxHeight:1080,imageOrientation:!1,imageCrop:!1,disableImageResize:!0,previewMaxWidth:80,previewMaxHeight:80,previewOrientation:!0,previewThumbnail:!0,previewCrop:!1,previewCanvas:!0},processActions:{loadImage:function(data,options){if(options.disabled)return data;var that=this,file=data.files[data.index],dfd=$.Deferred();return"number"===$.type(options.maxFileSize)&&file.size>options.maxFileSize||options.fileTypes&&!options.fileTypes.test(file.type)||!loadImage(file,function(img){img.src&&(data.img=img),dfd.resolveWith(that,[data])},options)?data:dfd.promise()},resizeImage:function(data,options){if(options.disabled||!data.canvas&&!data.img)return data;options=$.extend({canvas:!0},options);var thumbnail,that=this,dfd=$.Deferred(),img=options.canvas&&data.canvas||data.img,resolve=function(newImg){newImg&&(newImg.width!==img.width||newImg.height!==img.height||options.forceResize)&&(data[newImg.getContext?"canvas":"img"]=newImg),data.preview=newImg,dfd.resolveWith(that,[data])};return data.exif&&(options.orientation===!0&&(options.orientation=data.exif.get("Orientation")),options.thumbnail&&(thumbnail=data.exif.get("Thumbnail")))?(loadImage(thumbnail,resolve,options),dfd.promise()):img?(resolve(loadImage.scale(img,options)),dfd.promise()):data},saveImage:function(data,options){if(!data.canvas||options.disabled)return data;var that=this,file=data.files[data.index],dfd=$.Deferred();return data.canvas.toBlob?(data.canvas.toBlob(function(blob){blob.name||(file.type===blob.type?blob.name=file.name:file.name&&(blob.name=file.name.replace(/\..+$/,"."+blob.type.substr(6)))),file.type!==blob.type&&delete data.imageHead,data.files[data.index]=blob,dfd.resolveWith(that,[data])},options.type||file.type,options.quality),dfd.promise()):data},loadImageMetaData:function(data,options){if(options.disabled)return data;var that=this,dfd=$.Deferred();return loadImage.parseMetaData(data.files[data.index],function(result){$.extend(data,result),dfd.resolveWith(that,[data])},options),dfd.promise()},saveImageMetaData:function(data,options){if(!(data.imageHead&&data.canvas&&data.canvas.toBlob)||options.disabled)return data;var file=data.files[data.index],blob=new Blob([data.imageHead,this._blobSlice.call(file,20)],{type:file.type});return blob.name=file.name,data.files[data.index]=blob,data},setImage:function(data,options){return data.preview&&!options.disabled&&(data.files[data.index][options.name||"preview"]=data.preview),data},deleteImageReferences:function(data,options){return options.disabled||(delete data.img,delete data.canvas,delete data.preview,delete data.imageHead),data}}})}),function(factory){"function"==typeof define&&define.amd?define("jquery.fileupload-audio",["jquery","load-image","./jquery.fileupload-process"],factory):factory(window.jQuery,window.loadImage)}(function($,loadImage){$.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadAudio",prefix:!0,fileTypes:"@",maxFileSize:"@",disabled:"@disableAudioPreview"},{action:"setAudio",name:"@audioPreviewName",disabled:"@disableAudioPreview"}),$.widget("blueimp.fileupload",$.blueimp.fileupload,{options:{loadAudioFileTypes:/^audio\/.*$/},_audioElement:document.createElement("audio"),processActions:{loadAudio:function(data,options){if(options.disabled)return data;var url,audio,file=data.files[data.index];return this._audioElement.canPlayType&&this._audioElement.canPlayType(file.type)&&("number"!==$.type(options.maxFileSize)||file.size<=options.maxFileSize)&&(!options.fileTypes||options.fileTypes.test(file.type))&&(url=loadImage.createObjectURL(file))?(audio=this._audioElement.cloneNode(!1),audio.src=url,audio.controls=!0,data.audio=audio,data):data},setAudio:function(data,options){return data.audio&&!options.disabled&&(data.files[data.index][options.name||"preview"]=data.audio),data}}})}),function(factory){"function"==typeof define&&define.amd?define("jquery.fileupload-video",["jquery","load-image","./jquery.fileupload-process"],factory):factory(window.jQuery,window.loadImage)}(function($,loadImage){$.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadVideo",prefix:!0,fileTypes:"@",maxFileSize:"@",disabled:"@disableVideoPreview"},{action:"setVideo",name:"@videoPreviewName",disabled:"@disableVideoPreview"}),$.widget("blueimp.fileupload",$.blueimp.fileupload,{options:{loadVideoFileTypes:/^video\/.*$/},_videoElement:document.createElement("video"),processActions:{loadVideo:function(data,options){if(options.disabled)return data;var url,video,file=data.files[data.index];return this._videoElement.canPlayType&&this._videoElement.canPlayType(file.type)&&("number"!==$.type(options.maxFileSize)||file.size<=options.maxFileSize)&&(!options.fileTypes||options.fileTypes.test(file.type))&&(url=loadImage.createObjectURL(file))?(video=this._videoElement.cloneNode(!1),video.src=url,video.controls=!0,data.video=video,data):data},setVideo:function(data,options){return data.video&&!options.disabled&&(data.files[data.index][options.name||"preview"]=data.video),data}}})}),function(factory){"function"==typeof define&&define.amd?define("jquery.fileupload-validate",["jquery","./jquery.fileupload-process"],factory):factory(window.jQuery)}(function($){$.blueimp.fileupload.prototype.options.processQueue.push({action:"validate",always:!0,acceptFileTypes:"@",maxFileSize:"@",minFileSize:"@",maxNumberOfFiles:"@",disabled:"@disableValidation"}),$.widget("blueimp.fileupload",$.blueimp.fileupload,{options:{getNumberOfFiles:$.noop,messages:{maxNumberOfFiles:"Maximum number of files exceeded",acceptFileTypes:"File type not allowed",maxFileSize:"File is too large",minFileSize:"File is too small"}},processActions:{validate:function(data,options){if(options.disabled)return data;var fileSize,dfd=$.Deferred(),settings=this.options,file=data.files[data.index];return(options.minFileSize||options.maxFileSize)&&(fileSize=file.size),"number"===$.type(options.maxNumberOfFiles)&&(settings.getNumberOfFiles()||0)+data.files.length>options.maxNumberOfFiles?file.error=settings.i18n("maxNumberOfFiles"):!options.acceptFileTypes||options.acceptFileTypes.test(file.type)||options.acceptFileTypes.test(file.name)?fileSize>options.maxFileSize?file.error=settings.i18n("maxFileSize"):"number"===$.type(fileSize)&&fileSize<options.minFileSize?file.error=settings.i18n("minFileSize"):delete file.error:file.error=settings.i18n("acceptFileTypes"),file.error||data.files.error?(data.files.error=!0,dfd.rejectWith(this,[data])):dfd.resolveWith(this,[data]),dfd.promise()}}})}),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function($){function transitionEnd(){var el=document.createElement("bootstrap"),transEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var name in transEndEventNames)if(void 0!==el.style[name])return{end:transEndEventNames[name]};return!1}$.fn.emulateTransitionEnd=function(duration){var called=!1,$el=this;$(this).one($.support.transition.end,function(){called=!0});var callback=function(){called||$($el).trigger($.support.transition.end)};return setTimeout(callback,duration),this},$(function(){$.support.transition=transitionEnd()})}(jQuery),+function($){var dismiss='[data-dismiss="alert"]',Alert=function(el){$(el).on("click",dismiss,this.close)};Alert.prototype.close=function(e){function removeElement(){$parent.trigger("closed.bs.alert").remove()}var $this=$(this),selector=$this.attr("data-target");
selector||(selector=$this.attr("href"),selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,""));var $parent=$(selector);e&&e.preventDefault(),$parent.length||($parent=$this.hasClass("alert")?$this:$this.parent()),$parent.trigger(e=$.Event("close.bs.alert")),e.isDefaultPrevented()||($parent.removeClass("in"),$.support.transition&&$parent.hasClass("fade")?$parent.one($.support.transition.end,removeElement).emulateTransitionEnd(150):removeElement())};var old=$.fn.alert;$.fn.alert=function(option){return this.each(function(){var $this=$(this),data=$this.data("bs.alert");data||$this.data("bs.alert",data=new Alert(this)),"string"==typeof option&&data[option].call($this)})},$.fn.alert.Constructor=Alert,$.fn.alert.noConflict=function(){return $.fn.alert=old,this},$(document).on("click.bs.alert.data-api",dismiss,Alert.prototype.close)}(jQuery),+function($){var Button=function(element,options){this.$element=$(element),this.options=$.extend({},Button.DEFAULTS,options),this.isLoading=!1};Button.DEFAULTS={loadingText:"loading..."},Button.prototype.setState=function(state){var d="disabled",$el=this.$element,val=$el.is("input")?"val":"html",data=$el.data();state+="Text",data.resetText||$el.data("resetText",$el[val]()),$el[val](data[state]||this.options[state]),setTimeout($.proxy(function(){"loadingText"==state?(this.isLoading=!0,$el.addClass(d).attr(d,d)):this.isLoading&&(this.isLoading=!1,$el.removeClass(d).removeAttr(d))},this),0)},Button.prototype.toggle=function(){var changed=!0,$parent=this.$element.closest('[data-toggle="buttons"]');if($parent.length){var $input=this.$element.find("input");"radio"==$input.prop("type")&&($input.prop("checked")&&this.$element.hasClass("active")?changed=!1:$parent.find(".active").removeClass("active")),changed&&$input.prop("checked",!this.$element.hasClass("active")).trigger("change")}changed&&this.$element.toggleClass("active")};var old=$.fn.button;$.fn.button=function(option){return this.each(function(){var $this=$(this),data=$this.data("bs.button"),options="object"==typeof option&&option;data||$this.data("bs.button",data=new Button(this,options)),"toggle"==option?data.toggle():option&&data.setState(option)})},$.fn.button.Constructor=Button,$.fn.button.noConflict=function(){return $.fn.button=old,this},$(document).on("click.bs.button.data-api","[data-toggle^=button]",function(e){var $btn=$(e.target);$btn.hasClass("btn")||($btn=$btn.closest(".btn")),$btn.button("toggle"),e.preventDefault()})}(jQuery),+function($){var Carousel=function(element,options){this.$element=$(element),this.$indicators=this.$element.find(".carousel-indicators"),this.options=options,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter",$.proxy(this.pause,this)).on("mouseleave",$.proxy(this.cycle,this))};Carousel.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},Carousel.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval($.proxy(this.next,this),this.options.interval)),this},Carousel.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},Carousel.prototype.to=function(pos){var that=this,activeIndex=this.getActiveIndex();return pos>this.$items.length-1||0>pos?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){that.to(pos)}):activeIndex==pos?this.pause().cycle():this.slide(pos>activeIndex?"next":"prev",$(this.$items[pos]))},Carousel.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&$.support.transition&&(this.$element.trigger($.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},Carousel.prototype.next=function(){return this.sliding?void 0:this.slide("next")},Carousel.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},Carousel.prototype.slide=function(type,next){var $active=this.$element.find(".item.active"),$next=next||$active[type](),isCycling=this.interval,direction="next"==type?"left":"right",fallback="next"==type?"first":"last",that=this;if(!$next.length){if(!this.options.wrap)return;$next=this.$element.find(".item")[fallback]()}if($next.hasClass("active"))return this.sliding=!1;var e=$.Event("slide.bs.carousel",{relatedTarget:$next[0],direction:direction});return this.$element.trigger(e),e.isDefaultPrevented()?void 0:(this.sliding=!0,isCycling&&this.pause(),this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid.bs.carousel",function(){var $nextIndicator=$(that.$indicators.children()[that.getActiveIndex()]);$nextIndicator&&$nextIndicator.addClass("active")})),$.support.transition&&this.$element.hasClass("slide")?($next.addClass(type),$next[0].offsetWidth,$active.addClass(direction),$next.addClass(direction),$active.one($.support.transition.end,function(){$next.removeClass([type,direction].join(" ")).addClass("active"),$active.removeClass(["active",direction].join(" ")),that.sliding=!1,setTimeout(function(){that.$element.trigger("slid.bs.carousel")},0)}).emulateTransitionEnd(1e3*$active.css("transition-duration").slice(0,-1))):($active.removeClass("active"),$next.addClass("active"),this.sliding=!1,this.$element.trigger("slid.bs.carousel")),isCycling&&this.cycle(),this)};var old=$.fn.carousel;$.fn.carousel=function(option){return this.each(function(){var $this=$(this),data=$this.data("bs.carousel"),options=$.extend({},Carousel.DEFAULTS,$this.data(),"object"==typeof option&&option),action="string"==typeof option?option:options.slide;data||$this.data("bs.carousel",data=new Carousel(this,options)),"number"==typeof option?data.to(option):action?data[action]():options.interval&&data.pause().cycle()})},$.fn.carousel.Constructor=Carousel,$.fn.carousel.noConflict=function(){return $.fn.carousel=old,this},$(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(e){var href,$this=$(this),$target=$($this.attr("data-target")||(href=$this.attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,"")),options=$.extend({},$target.data(),$this.data()),slideIndex=$this.attr("data-slide-to");slideIndex&&(options.interval=!1),$target.carousel(options),(slideIndex=$this.attr("data-slide-to"))&&$target.data("bs.carousel").to(slideIndex),e.preventDefault()}),$(window).on("load",function(){$('[data-ride="carousel"]').each(function(){var $carousel=$(this);$carousel.carousel($carousel.data())})})}(jQuery),+function($){var Collapse=function(element,options){this.$element=$(element),this.options=$.extend({},Collapse.DEFAULTS,options),this.transitioning=null,this.options.parent&&(this.$parent=$(this.options.parent)),this.options.toggle&&this.toggle()};Collapse.DEFAULTS={toggle:!0},Collapse.prototype.dimension=function(){var hasWidth=this.$element.hasClass("width");return hasWidth?"width":"height"},Collapse.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var startEvent=$.Event("show.bs.collapse");if(this.$element.trigger(startEvent),!startEvent.isDefaultPrevented()){var actives=this.$parent&&this.$parent.find("> .panel > .in");if(actives&&actives.length){var hasData=actives.data("bs.collapse");if(hasData&&hasData.transitioning)return;actives.collapse("hide"),hasData||actives.data("bs.collapse",null)}var dimension=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[dimension](0),this.transitioning=1;var complete=function(){this.$element.removeClass("collapsing").addClass("collapse in")[dimension]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!$.support.transition)return complete.call(this);var scrollSize=$.camelCase(["scroll",dimension].join("-"));this.$element.one($.support.transition.end,$.proxy(complete,this)).emulateTransitionEnd(350)[dimension](this.$element[0][scrollSize])}}},Collapse.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var startEvent=$.Event("hide.bs.collapse");if(this.$element.trigger(startEvent),!startEvent.isDefaultPrevented()){var dimension=this.dimension();this.$element[dimension](this.$element[dimension]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var complete=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return $.support.transition?void this.$element[dimension](0).one($.support.transition.end,$.proxy(complete,this)).emulateTransitionEnd(350):complete.call(this)}}},Collapse.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var old=$.fn.collapse;$.fn.collapse=function(option){return this.each(function(){var $this=$(this),data=$this.data("bs.collapse"),options=$.extend({},Collapse.DEFAULTS,$this.data(),"object"==typeof option&&option);!data&&options.toggle&&"show"==option&&(option=!option),data||$this.data("bs.collapse",data=new Collapse(this,options)),"string"==typeof option&&data[option]()})},$.fn.collapse.Constructor=Collapse,$.fn.collapse.noConflict=function(){return $.fn.collapse=old,this},$(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(e){var href,$this=$(this),target=$this.attr("data-target")||e.preventDefault()||(href=$this.attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,""),$target=$(target),data=$target.data("bs.collapse"),option=data?"toggle":$this.data(),parent=$this.attr("data-parent"),$parent=parent&&$(parent);data&&data.transitioning||($parent&&$parent.find('[data-toggle=collapse][data-parent="'+parent+'"]').not($this).addClass("collapsed"),$this[$target.hasClass("in")?"addClass":"removeClass"]("collapsed")),$target.collapse(option)})}(jQuery),+function($){function clearMenus(e){$(backdrop).remove(),$(toggle).each(function(){var $parent=getParent($(this)),relatedTarget={relatedTarget:this};$parent.hasClass("open")&&($parent.trigger(e=$.Event("hide.bs.dropdown",relatedTarget)),e.isDefaultPrevented()||$parent.removeClass("open").trigger("hidden.bs.dropdown",relatedTarget))})}function getParent($this){var selector=$this.attr("data-target");selector||(selector=$this.attr("href"),selector=selector&&/#[A-Za-z]/.test(selector)&&selector.replace(/.*(?=#[^\s]*$)/,""));var $parent=selector&&$(selector);return $parent&&$parent.length?$parent:$this.parent()}var backdrop=".dropdown-backdrop",toggle="[data-toggle=dropdown]",Dropdown=function(element){$(element).on("click.bs.dropdown",this.toggle)};Dropdown.prototype.toggle=function(e){var $this=$(this);if(!$this.is(".disabled, :disabled")){var $parent=getParent($this),isActive=$parent.hasClass("open");if(clearMenus(),!isActive){"ontouchstart"in document.documentElement&&!$parent.closest(".navbar-nav").length&&$('<div class="dropdown-backdrop"/>').insertAfter($(this)).on("click",clearMenus);var relatedTarget={relatedTarget:this};if($parent.trigger(e=$.Event("show.bs.dropdown",relatedTarget)),e.isDefaultPrevented())return;$parent.toggleClass("open").trigger("shown.bs.dropdown",relatedTarget),$this.focus()}return!1}},Dropdown.prototype.keydown=function(e){if(/(38|40|27)/.test(e.keyCode)){var $this=$(this);if(e.preventDefault(),e.stopPropagation(),!$this.is(".disabled, :disabled")){var $parent=getParent($this),isActive=$parent.hasClass("open");if(!isActive||isActive&&27==e.keyCode)return 27==e.which&&$parent.find(toggle).focus(),$this.click();var desc=" li:not(.divider):visible a",$items=$parent.find("[role=menu]"+desc+", [role=listbox]"+desc);if($items.length){var index=$items.index($items.filter(":focus"));38==e.keyCode&&index>0&&index--,40==e.keyCode&&index<$items.length-1&&index++,~index||(index=0),$items.eq(index).focus()}}}};var old=$.fn.dropdown;$.fn.dropdown=function(option){return this.each(function(){var $this=$(this),data=$this.data("bs.dropdown");data||$this.data("bs.dropdown",data=new Dropdown(this)),"string"==typeof option&&data[option].call($this)})},$.fn.dropdown.Constructor=Dropdown,$.fn.dropdown.noConflict=function(){return $.fn.dropdown=old,this},$(document).on("click.bs.dropdown.data-api",clearMenus).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",toggle,Dropdown.prototype.toggle).on("keydown.bs.dropdown.data-api",toggle+", [role=menu], [role=listbox]",Dropdown.prototype.keydown)}(jQuery),+function($){var Modal=function(element,options){this.options=options,this.$element=$(element),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,$.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};Modal.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},Modal.prototype.toggle=function(_relatedTarget){return this[this.isShown?"hide":"show"](_relatedTarget)},Modal.prototype.show=function(_relatedTarget){var that=this,e=$.Event("show.bs.modal",{relatedTarget:_relatedTarget});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',$.proxy(this.hide,this)),this.backdrop(function(){var transition=$.support.transition&&that.$element.hasClass("fade");that.$element.parent().length||that.$element.appendTo(document.body),that.$element.show().scrollTop(0),transition&&that.$element[0].offsetWidth,that.$element.addClass("in").attr("aria-hidden",!1),that.enforceFocus();var e=$.Event("shown.bs.modal",{relatedTarget:_relatedTarget});transition?that.$element.find(".modal-dialog").one($.support.transition.end,function(){that.$element.focus().trigger(e)}).emulateTransitionEnd(300):that.$element.focus().trigger(e)}))},Modal.prototype.hide=function(e){e&&e.preventDefault(),e=$.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),$(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),$.support.transition&&this.$element.hasClass("fade")?this.$element.one($.support.transition.end,$.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},Modal.prototype.enforceFocus=function(){$(document).off("focusin.bs.modal").on("focusin.bs.modal",$.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.focus()},this))},Modal.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",$.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},Modal.prototype.hideModal=function(){var that=this;this.$element.hide(),this.backdrop(function(){that.removeBackdrop(),that.$element.trigger("hidden.bs.modal")})},Modal.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},Modal.prototype.backdrop=function(callback){var animate=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var doAnimate=$.support.transition&&animate;if(this.$backdrop=$('<div class="modal-backdrop '+animate+'" />').appendTo(document.body),this.$element.on("click.dismiss.bs.modal",$.proxy(function(e){e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),doAnimate&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!callback)return;doAnimate?this.$backdrop.one($.support.transition.end,callback).emulateTransitionEnd(150):callback()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),$.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one($.support.transition.end,callback).emulateTransitionEnd(150):callback()):callback&&callback()};var old=$.fn.modal;$.fn.modal=function(option,_relatedTarget){return this.each(function(){var $this=$(this),data=$this.data("bs.modal"),options=$.extend({},Modal.DEFAULTS,$this.data(),"object"==typeof option&&option);data||$this.data("bs.modal",data=new Modal(this,options)),"string"==typeof option?data[option](_relatedTarget):options.show&&data.show(_relatedTarget)})},$.fn.modal.Constructor=Modal,$.fn.modal.noConflict=function(){return $.fn.modal=old,this},$(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(e){var $this=$(this),href=$this.attr("href"),$target=$($this.attr("data-target")||href&&href.replace(/.*(?=#[^\s]+$)/,"")),option=$target.data("bs.modal")?"toggle":$.extend({remote:!/#/.test(href)&&href},$target.data(),$this.data());$this.is("a")&&e.preventDefault(),$target.modal(option,this).one("hide",function(){$this.is(":visible")&&$this.focus()})}),$(document).on("show.bs.modal",".modal",function(){$(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){$(document.body).removeClass("modal-open")})}(jQuery),+function($){var Tooltip=function(element,options){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",element,options)};Tooltip.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},Tooltip.prototype.init=function(type,element,options){this.enabled=!0,this.type=type,this.$element=$(element),this.options=this.getOptions(options);for(var triggers=this.options.trigger.split(" "),i=triggers.length;i--;){var trigger=triggers[i];if("click"==trigger)this.$element.on("click."+this.type,this.options.selector,$.proxy(this.toggle,this));else if("manual"!=trigger){var eventIn="hover"==trigger?"mouseenter":"focusin",eventOut="hover"==trigger?"mouseleave":"focusout";this.$element.on(eventIn+"."+this.type,this.options.selector,$.proxy(this.enter,this)),this.$element.on(eventOut+"."+this.type,this.options.selector,$.proxy(this.leave,this))}}this.options.selector?this._options=$.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},Tooltip.prototype.getDefaults=function(){return Tooltip.DEFAULTS},Tooltip.prototype.getOptions=function(options){return options=$.extend({},this.getDefaults(),this.$element.data(),options),options.delay&&"number"==typeof options.delay&&(options.delay={show:options.delay,hide:options.delay}),options},Tooltip.prototype.getDelegateOptions=function(){var options={},defaults=this.getDefaults();return this._options&&$.each(this._options,function(key,value){defaults[key]!=value&&(options[key]=value)}),options},Tooltip.prototype.enter=function(obj){var self=obj instanceof this.constructor?obj:$(obj.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(self.timeout),self.hoverState="in",self.options.delay&&self.options.delay.show?void(self.timeout=setTimeout(function(){"in"==self.hoverState&&self.show()},self.options.delay.show)):self.show()},Tooltip.prototype.leave=function(obj){var self=obj instanceof this.constructor?obj:$(obj.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(self.timeout),self.hoverState="out",self.options.delay&&self.options.delay.hide?void(self.timeout=setTimeout(function(){"out"==self.hoverState&&self.hide()},self.options.delay.hide)):self.hide()},Tooltip.prototype.show=function(){var e=$.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(e),e.isDefaultPrevented())return;var that=this,$tip=this.tip();this.setContent(),this.options.animation&&$tip.addClass("fade");var placement="function"==typeof this.options.placement?this.options.placement.call(this,$tip[0],this.$element[0]):this.options.placement,autoToken=/\s?auto?\s?/i,autoPlace=autoToken.test(placement);autoPlace&&(placement=placement.replace(autoToken,"")||"top"),$tip.detach().css({top:0,left:0,display:"block"}).addClass(placement),this.options.container?$tip.appendTo(this.options.container):$tip.insertAfter(this.$element);var pos=this.getPosition(),actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight;if(autoPlace){var $parent=this.$element.parent(),orgPlacement=placement,docScroll=document.documentElement.scrollTop||document.body.scrollTop,parentWidth="body"==this.options.container?window.innerWidth:$parent.outerWidth(),parentHeight="body"==this.options.container?window.innerHeight:$parent.outerHeight(),parentLeft="body"==this.options.container?0:$parent.offset().left;placement="bottom"==placement&&pos.top+pos.height+actualHeight-docScroll>parentHeight?"top":"top"==placement&&pos.top-docScroll-actualHeight<0?"bottom":"right"==placement&&pos.right+actualWidth>parentWidth?"left":"left"==placement&&pos.left-actualWidth<parentLeft?"right":placement,$tip.removeClass(orgPlacement).addClass(placement)}var calculatedOffset=this.getCalculatedOffset(placement,pos,actualWidth,actualHeight);this.applyPlacement(calculatedOffset,placement),this.hoverState=null;var complete=function(){that.$element.trigger("shown.bs."+that.type)};$.support.transition&&this.$tip.hasClass("fade")?$tip.one($.support.transition.end,complete).emulateTransitionEnd(150):complete()}},Tooltip.prototype.applyPlacement=function(offset,placement){var replace,$tip=this.tip(),width=$tip[0].offsetWidth,height=$tip[0].offsetHeight,marginTop=parseInt($tip.css("margin-top"),10),marginLeft=parseInt($tip.css("margin-left"),10);isNaN(marginTop)&&(marginTop=0),isNaN(marginLeft)&&(marginLeft=0),offset.top=offset.top+marginTop,offset.left=offset.left+marginLeft,$.offset.setOffset($tip[0],$.extend({using:function(props){$tip.css({top:Math.round(props.top),left:Math.round(props.left)})}},offset),0),$tip.addClass("in");var actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight;if("top"==placement&&actualHeight!=height&&(replace=!0,offset.top=offset.top+height-actualHeight),/bottom|top/.test(placement)){var delta=0;offset.left<0&&(delta=-2*offset.left,offset.left=0,$tip.offset(offset),actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight),this.replaceArrow(delta-width+actualWidth,actualWidth,"left")}else this.replaceArrow(actualHeight-height,actualHeight,"top");replace&&$tip.offset(offset)},Tooltip.prototype.replaceArrow=function(delta,dimension,position){this.arrow().css(position,delta?50*(1-delta/dimension)+"%":"")},Tooltip.prototype.setContent=function(){var $tip=this.tip(),title=this.getTitle();$tip.find(".tooltip-inner")[this.options.html?"html":"text"](title),$tip.removeClass("fade in top bottom left right")},Tooltip.prototype.hide=function(){function complete(){"in"!=that.hoverState&&$tip.detach(),that.$element.trigger("hidden.bs."+that.type)}var that=this,$tip=this.tip(),e=$.Event("hide.bs."+this.type);return this.$element.trigger(e),e.isDefaultPrevented()?void 0:($tip.removeClass("in"),$.support.transition&&this.$tip.hasClass("fade")?$tip.one($.support.transition.end,complete).emulateTransitionEnd(150):complete(),this.hoverState=null,this)},Tooltip.prototype.fixTitle=function(){var $e=this.$element;($e.attr("title")||"string"!=typeof $e.attr("data-original-title"))&&$e.attr("data-original-title",$e.attr("title")||"").attr("title","")},Tooltip.prototype.hasContent=function(){return this.getTitle()},Tooltip.prototype.getPosition=function(){var el=this.$element[0];return $.extend({},"function"==typeof el.getBoundingClientRect?el.getBoundingClientRect():{width:el.offsetWidth,height:el.offsetHeight},this.$element.offset())},Tooltip.prototype.getCalculatedOffset=function(placement,pos,actualWidth,actualHeight){return"bottom"==placement?{top:pos.top+pos.height,left:pos.left+pos.width/2-actualWidth/2}:"top"==placement?{top:pos.top-actualHeight,left:pos.left+pos.width/2-actualWidth/2}:"left"==placement?{top:pos.top+pos.height/2-actualHeight/2,left:pos.left-actualWidth}:{top:pos.top+pos.height/2-actualHeight/2,left:pos.left+pos.width}},Tooltip.prototype.getTitle=function(){var title,$e=this.$element,o=this.options;return title=$e.attr("data-original-title")||("function"==typeof o.title?o.title.call($e[0]):o.title)},Tooltip.prototype.tip=function(){return this.$tip=this.$tip||$(this.options.template)},Tooltip.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},Tooltip.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},Tooltip.prototype.enable=function(){this.enabled=!0},Tooltip.prototype.disable=function(){this.enabled=!1},Tooltip.prototype.toggleEnabled=function(){this.enabled=!this.enabled},Tooltip.prototype.toggle=function(e){var self=e?$(e.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;self.tip().hasClass("in")?self.leave(self):self.enter(self)},Tooltip.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var old=$.fn.tooltip;$.fn.tooltip=function(option){return this.each(function(){var $this=$(this),data=$this.data("bs.tooltip"),options="object"==typeof option&&option;(data||"destroy"!=option)&&(data||$this.data("bs.tooltip",data=new Tooltip(this,options)),"string"==typeof option&&data[option]())})},$.fn.tooltip.Constructor=Tooltip,$.fn.tooltip.noConflict=function(){return $.fn.tooltip=old,this}}(jQuery),+function($){var Popover=function(element,options){this.init("popover",element,options)};if(!$.fn.tooltip)throw new Error("Popover requires tooltip.js");Popover.DEFAULTS=$.extend({},$.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),Popover.prototype=$.extend({},$.fn.tooltip.Constructor.prototype),Popover.prototype.constructor=Popover,Popover.prototype.getDefaults=function(){return Popover.DEFAULTS},Popover.prototype.setContent=function(){var $tip=this.tip(),title=this.getTitle(),content=this.getContent();$tip.find(".popover-title")[this.options.html?"html":"text"](title),$tip.find(".popover-content")[this.options.html?"string"==typeof content?"html":"append":"text"](content),$tip.removeClass("fade top bottom left right in"),$tip.find(".popover-title").html()||$tip.find(".popover-title").hide()},Popover.prototype.hasContent=function(){return this.getTitle()||this.getContent()},Popover.prototype.getContent=function(){var $e=this.$element,o=this.options;return $e.attr("data-content")||("function"==typeof o.content?o.content.call($e[0]):o.content)},Popover.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},Popover.prototype.tip=function(){return this.$tip||(this.$tip=$(this.options.template)),this.$tip};var old=$.fn.popover;$.fn.popover=function(option){return this.each(function(){var $this=$(this),data=$this.data("bs.popover"),options="object"==typeof option&&option;(data||"destroy"!=option)&&(data||$this.data("bs.popover",data=new Popover(this,options)),"string"==typeof option&&data[option]())})},$.fn.popover.Constructor=Popover,$.fn.popover.noConflict=function(){return $.fn.popover=old,this}}(jQuery),+function($){function ScrollSpy(element,options){var href,process=$.proxy(this.process,this);this.$element=$($(element).is("body")?window:element),this.$body=$("body"),this.$scrollElement=this.$element.on("scroll.bs.scroll-spy.data-api",process),this.options=$.extend({},ScrollSpy.DEFAULTS,options),this.selector=(this.options.target||(href=$(element).attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.offsets=$([]),this.targets=$([]),this.activeTarget=null,this.refresh(),this.process()}ScrollSpy.DEFAULTS={offset:10},ScrollSpy.prototype.refresh=function(){var offsetMethod=this.$element[0]==window?"offset":"position";this.offsets=$([]),this.targets=$([]);{var self=this;this.$body.find(this.selector).map(function(){var $el=$(this),href=$el.data("target")||$el.attr("href"),$href=/^#./.test(href)&&$(href);return $href&&$href.length&&$href.is(":visible")&&[[$href[offsetMethod]().top+(!$.isWindow(self.$scrollElement.get(0))&&self.$scrollElement.scrollTop()),href]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){self.offsets.push(this[0]),self.targets.push(this[1])})}},ScrollSpy.prototype.process=function(){var i,scrollTop=this.$scrollElement.scrollTop()+this.options.offset,scrollHeight=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,maxScroll=scrollHeight-this.$scrollElement.height(),offsets=this.offsets,targets=this.targets,activeTarget=this.activeTarget;if(scrollTop>=maxScroll)return activeTarget!=(i=targets.last()[0])&&this.activate(i);if(activeTarget&&scrollTop<=offsets[0])return activeTarget!=(i=targets[0])&&this.activate(i);for(i=offsets.length;i--;)activeTarget!=targets[i]&&scrollTop>=offsets[i]&&(!offsets[i+1]||scrollTop<=offsets[i+1])&&this.activate(targets[i])},ScrollSpy.prototype.activate=function(target){this.activeTarget=target,$(this.selector).parentsUntil(this.options.target,".active").removeClass("active");var selector=this.selector+'[data-target="'+target+'"],'+this.selector+'[href="'+target+'"]',active=$(selector).parents("li").addClass("active");active.parent(".dropdown-menu").length&&(active=active.closest("li.dropdown").addClass("active")),active.trigger("activate.bs.scrollspy")};var old=$.fn.scrollspy;$.fn.scrollspy=function(option){return this.each(function(){var $this=$(this),data=$this.data("bs.scrollspy"),options="object"==typeof option&&option;data||$this.data("bs.scrollspy",data=new ScrollSpy(this,options)),"string"==typeof option&&data[option]()})},$.fn.scrollspy.Constructor=ScrollSpy,$.fn.scrollspy.noConflict=function(){return $.fn.scrollspy=old,this},$(window).on("load",function(){$('[data-spy="scroll"]').each(function(){var $spy=$(this);$spy.scrollspy($spy.data())})})}(jQuery),+function($){var Tab=function(element){this.element=$(element)};Tab.prototype.show=function(){var $this=this.element,$ul=$this.closest("ul:not(.dropdown-menu)"),selector=$this.data("target");if(selector||(selector=$this.attr("href"),selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,"")),!$this.parent("li").hasClass("active")){var previous=$ul.find(".active:last a")[0],e=$.Event("show.bs.tab",{relatedTarget:previous});if($this.trigger(e),!e.isDefaultPrevented()){var $target=$(selector);this.activate($this.parent("li"),$ul),this.activate($target,$target.parent(),function(){$this.trigger({type:"shown.bs.tab",relatedTarget:previous})})}}},Tab.prototype.activate=function(element,container,callback){function next(){$active.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),element.addClass("active"),transition?(element[0].offsetWidth,element.addClass("in")):element.removeClass("fade"),element.parent(".dropdown-menu")&&element.closest("li.dropdown").addClass("active"),callback&&callback()}var $active=container.find("> .active"),transition=callback&&$.support.transition&&$active.hasClass("fade");transition?$active.one($.support.transition.end,next).emulateTransitionEnd(150):next(),$active.removeClass("in")};var old=$.fn.tab;$.fn.tab=function(option){return this.each(function(){var $this=$(this),data=$this.data("bs.tab");data||$this.data("bs.tab",data=new Tab(this)),"string"==typeof option&&data[option]()})},$.fn.tab.Constructor=Tab,$.fn.tab.noConflict=function(){return $.fn.tab=old,this},$(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(e){e.preventDefault(),$(this).tab("show")})}(jQuery),+function($){var Affix=function(element,options){this.options=$.extend({},Affix.DEFAULTS,options),this.$window=$(window).on("scroll.bs.affix.data-api",$.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",$.proxy(this.checkPositionWithEventLoop,this)),this.$element=$(element),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};Affix.RESET="affix affix-top affix-bottom",Affix.DEFAULTS={offset:0},Affix.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(Affix.RESET).addClass("affix");
var scrollTop=this.$window.scrollTop(),position=this.$element.offset();return this.pinnedOffset=position.top-scrollTop},Affix.prototype.checkPositionWithEventLoop=function(){setTimeout($.proxy(this.checkPosition,this),1)},Affix.prototype.checkPosition=function(){if(this.$element.is(":visible")){var scrollHeight=$(document).height(),scrollTop=this.$window.scrollTop(),position=this.$element.offset(),offset=this.options.offset,offsetTop=offset.top,offsetBottom=offset.bottom;"top"==this.affixed&&(position.top+=scrollTop),"object"!=typeof offset&&(offsetBottom=offsetTop=offset),"function"==typeof offsetTop&&(offsetTop=offset.top(this.$element)),"function"==typeof offsetBottom&&(offsetBottom=offset.bottom(this.$element));var affix=null!=this.unpin&&scrollTop+this.unpin<=position.top?!1:null!=offsetBottom&&position.top+this.$element.height()>=scrollHeight-offsetBottom?"bottom":null!=offsetTop&&offsetTop>=scrollTop?"top":!1;if(this.affixed!==affix){this.unpin&&this.$element.css("top","");var affixType="affix"+(affix?"-"+affix:""),e=$.Event(affixType+".bs.affix");this.$element.trigger(e),e.isDefaultPrevented()||(this.affixed=affix,this.unpin="bottom"==affix?this.getPinnedOffset():null,this.$element.removeClass(Affix.RESET).addClass(affixType).trigger($.Event(affixType.replace("affix","affixed"))),"bottom"==affix&&this.$element.offset({top:scrollHeight-offsetBottom-this.$element.height()}))}}};var old=$.fn.affix;$.fn.affix=function(option){return this.each(function(){var $this=$(this),data=$this.data("bs.affix"),options="object"==typeof option&&option;data||$this.data("bs.affix",data=new Affix(this,options)),"string"==typeof option&&data[option]()})},$.fn.affix.Constructor=Affix,$.fn.affix.noConflict=function(){return $.fn.affix=old,this},$(window).on("load",function(){$('[data-spy="affix"]').each(function(){var $spy=$(this),data=$spy.data();data.offset=data.offset||{},data.offsetBottom&&(data.offset.bottom=data.offsetBottom),data.offsetTop&&(data.offset.top=data.offsetTop),$spy.affix(data)})})}(jQuery),define("bootstrap",["jquery"],function(){}),function(window,document,undefined){function minErr(module){return function(){var message,i,code=arguments[0],prefix="["+(module?module+":":"")+code+"] ",template=arguments[1],templateArgs=arguments,stringify=function(obj){return"function"==typeof obj?obj.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof obj?"undefined":"string"!=typeof obj?JSON.stringify(obj):obj};for(message=prefix+template.replace(/\{\d+\}/g,function(match){var arg,index=+match.slice(1,-1);return index+2<templateArgs.length?(arg=templateArgs[index+2],"function"==typeof arg?arg.toString().replace(/ ?\{[\s\S]*$/,""):"undefined"==typeof arg?"undefined":"string"!=typeof arg?toJson(arg):arg):match}),message=message+"\nhttp://errors.angularjs.org/1.2.16/"+(module?module+"/":"")+code,i=2;i<arguments.length;i++)message=message+(2==i?"?":"&")+"p"+(i-2)+"="+encodeURIComponent(stringify(arguments[i]));return new Error(message)}}function isArrayLike(obj){if(null==obj||isWindow(obj))return!1;var length=obj.length;return 1===obj.nodeType&&length?!0:isString(obj)||isArray(obj)||0===length||"number"==typeof length&&length>0&&length-1 in obj}function forEach(obj,iterator,context){var key;if(obj)if(isFunction(obj))for(key in obj)"prototype"==key||"length"==key||"name"==key||obj.hasOwnProperty&&!obj.hasOwnProperty(key)||iterator.call(context,obj[key],key);else if(obj.forEach&&obj.forEach!==forEach)obj.forEach(iterator,context);else if(isArrayLike(obj))for(key=0;key<obj.length;key++)iterator.call(context,obj[key],key);else for(key in obj)obj.hasOwnProperty(key)&&iterator.call(context,obj[key],key);return obj}function sortedKeys(obj){var keys=[];for(var key in obj)obj.hasOwnProperty(key)&&keys.push(key);return keys.sort()}function forEachSorted(obj,iterator,context){for(var keys=sortedKeys(obj),i=0;i<keys.length;i++)iterator.call(context,obj[keys[i]],keys[i]);return keys}function reverseParams(iteratorFn){return function(value,key){iteratorFn(key,value)}}function nextUid(){for(var digit,index=uid.length;index;){if(index--,digit=uid[index].charCodeAt(0),57==digit)return uid[index]="A",uid.join("");if(90!=digit)return uid[index]=String.fromCharCode(digit+1),uid.join("");uid[index]="0"}return uid.unshift("0"),uid.join("")}function setHashKey(obj,h){h?obj.$$hashKey=h:delete obj.$$hashKey}function extend(dst){var h=dst.$$hashKey;return forEach(arguments,function(obj){obj!==dst&&forEach(obj,function(value,key){dst[key]=value})}),setHashKey(dst,h),dst}function int(str){return parseInt(str,10)}function inherit(parent,extra){return extend(new(extend(function(){},{prototype:parent})),extra)}function noop(){}function identity($){return $}function valueFn(value){return function(){return value}}function isUndefined(value){return"undefined"==typeof value}function isDefined(value){return"undefined"!=typeof value}function isObject(value){return null!=value&&"object"==typeof value}function isString(value){return"string"==typeof value}function isNumber(value){return"number"==typeof value}function isDate(value){return"[object Date]"===toString.call(value)}function isArray(value){return"[object Array]"===toString.call(value)}function isFunction(value){return"function"==typeof value}function isRegExp(value){return"[object RegExp]"===toString.call(value)}function isWindow(obj){return obj&&obj.document&&obj.location&&obj.alert&&obj.setInterval}function isScope(obj){return obj&&obj.$evalAsync&&obj.$watch}function isFile(obj){return"[object File]"===toString.call(obj)}function isBlob(obj){return"[object Blob]"===toString.call(obj)}function isElement(node){return!(!node||!(node.nodeName||node.prop&&node.attr&&node.find))}function map(obj,iterator,context){var results=[];return forEach(obj,function(value,index,list){results.push(iterator.call(context,value,index,list))}),results}function includes(array,obj){return-1!=indexOf(array,obj)}function indexOf(array,obj){if(array.indexOf)return array.indexOf(obj);for(var i=0;i<array.length;i++)if(obj===array[i])return i;return-1}function arrayRemove(array,value){var index=indexOf(array,value);return index>=0&&array.splice(index,1),value}function copy(source,destination){if(isWindow(source)||isScope(source))throw ngMinErr("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");if(destination){if(source===destination)throw ngMinErr("cpi","Can't copy! Source and destination are identical.");if(isArray(source)){destination.length=0;for(var i=0;i<source.length;i++)destination.push(copy(source[i]))}else{var h=destination.$$hashKey;forEach(destination,function(value,key){delete destination[key]});for(var key in source)destination[key]=copy(source[key]);setHashKey(destination,h)}}else destination=source,source&&(isArray(source)?destination=copy(source,[]):isDate(source)?destination=new Date(source.getTime()):isRegExp(source)?destination=new RegExp(source.source):isObject(source)&&(destination=copy(source,{})));return destination}function shallowCopy(src,dst){dst=dst||{};for(var key in src)!src.hasOwnProperty(key)||"$"===key.charAt(0)&&"$"===key.charAt(1)||(dst[key]=src[key]);return dst}function equals(o1,o2){if(o1===o2)return!0;if(null===o1||null===o2)return!1;if(o1!==o1&&o2!==o2)return!0;var length,key,keySet,t1=typeof o1,t2=typeof o2;if(t1==t2&&"object"==t1){if(!isArray(o1)){if(isDate(o1))return isDate(o2)&&o1.getTime()==o2.getTime();if(isRegExp(o1)&&isRegExp(o2))return o1.toString()==o2.toString();if(isScope(o1)||isScope(o2)||isWindow(o1)||isWindow(o2)||isArray(o2))return!1;keySet={};for(key in o1)if("$"!==key.charAt(0)&&!isFunction(o1[key])){if(!equals(o1[key],o2[key]))return!1;keySet[key]=!0}for(key in o2)if(!keySet.hasOwnProperty(key)&&"$"!==key.charAt(0)&&o2[key]!==undefined&&!isFunction(o2[key]))return!1;return!0}if(!isArray(o2))return!1;if((length=o1.length)==o2.length){for(key=0;length>key;key++)if(!equals(o1[key],o2[key]))return!1;return!0}}return!1}function csp(){return document.securityPolicy&&document.securityPolicy.isActive||document.querySelector&&!(!document.querySelector("[ng-csp]")&&!document.querySelector("[data-ng-csp]"))}function concat(array1,array2,index){return array1.concat(slice.call(array2,index))}function sliceArgs(args,startIndex){return slice.call(args,startIndex||0)}function bind(self,fn){var curryArgs=arguments.length>2?sliceArgs(arguments,2):[];return!isFunction(fn)||fn instanceof RegExp?fn:curryArgs.length?function(){return arguments.length?fn.apply(self,curryArgs.concat(slice.call(arguments,0))):fn.apply(self,curryArgs)}:function(){return arguments.length?fn.apply(self,arguments):fn.call(self)}}function toJsonReplacer(key,value){var val=value;return"string"==typeof key&&"$"===key.charAt(0)?val=undefined:isWindow(value)?val="$WINDOW":value&&document===value?val="$DOCUMENT":isScope(value)&&(val="$SCOPE"),val}function toJson(obj,pretty){return"undefined"==typeof obj?undefined:JSON.stringify(obj,toJsonReplacer,pretty?"  ":null)}function fromJson(json){return isString(json)?JSON.parse(json):json}function toBoolean(value){if("function"==typeof value)value=!0;else if(value&&0!==value.length){var v=lowercase(""+value);value=!("f"==v||"0"==v||"false"==v||"no"==v||"n"==v||"[]"==v)}else value=!1;return value}function startingTag(element){element=jqLite(element).clone();try{element.empty()}catch(e){}var TEXT_NODE=3,elemHtml=jqLite("<div>").append(element).html();try{return element[0].nodeType===TEXT_NODE?lowercase(elemHtml):elemHtml.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(match,nodeName){return"<"+lowercase(nodeName)})}catch(e){return lowercase(elemHtml)}}function tryDecodeURIComponent(value){try{return decodeURIComponent(value)}catch(e){}}function parseKeyValue(keyValue){var key_value,key,obj={};return forEach((keyValue||"").split("&"),function(keyValue){if(keyValue&&(key_value=keyValue.split("="),key=tryDecodeURIComponent(key_value[0]),isDefined(key))){var val=isDefined(key_value[1])?tryDecodeURIComponent(key_value[1]):!0;obj[key]?isArray(obj[key])?obj[key].push(val):obj[key]=[obj[key],val]:obj[key]=val}}),obj}function toKeyValue(obj){var parts=[];return forEach(obj,function(value,key){isArray(value)?forEach(value,function(arrayValue){parts.push(encodeUriQuery(key,!0)+(arrayValue===!0?"":"="+encodeUriQuery(arrayValue,!0)))}):parts.push(encodeUriQuery(key,!0)+(value===!0?"":"="+encodeUriQuery(value,!0)))}),parts.length?parts.join("&"):""}function encodeUriSegment(val){return encodeUriQuery(val,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function encodeUriQuery(val,pctEncodeSpaces){return encodeURIComponent(val).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,pctEncodeSpaces?"%20":"+")}function angularInit(element,bootstrap){function append(element){element&&elements.push(element)}var appElement,module,elements=[element],names=["ng:app","ng-app","x-ng-app","data-ng-app"],NG_APP_CLASS_REGEXP=/\sng[:\-]app(:\s*([\w\d_]+);?)?\s/;forEach(names,function(name){names[name]=!0,append(document.getElementById(name)),name=name.replace(":","\\:"),element.querySelectorAll&&(forEach(element.querySelectorAll("."+name),append),forEach(element.querySelectorAll("."+name+"\\:"),append),forEach(element.querySelectorAll("["+name+"]"),append))}),forEach(elements,function(element){if(!appElement){var className=" "+element.className+" ",match=NG_APP_CLASS_REGEXP.exec(className);match?(appElement=element,module=(match[2]||"").replace(/\s+/g,",")):forEach(element.attributes,function(attr){!appElement&&names[attr.name]&&(appElement=element,module=attr.value)})}}),appElement&&bootstrap(appElement,module?[module]:[])}function bootstrap(element,modules){var doBootstrap=function(){if(element=jqLite(element),element.injector()){var tag=element[0]===document?"document":startingTag(element);throw ngMinErr("btstrpd","App Already Bootstrapped with this Element '{0}'",tag)}modules=modules||[],modules.unshift(["$provide",function($provide){$provide.value("$rootElement",element)}]),modules.unshift("ng");var injector=createInjector(modules);return injector.invoke(["$rootScope","$rootElement","$compile","$injector","$animate",function(scope,element,compile,injector){scope.$apply(function(){element.data("$injector",injector),compile(element)(scope)})}]),injector},NG_DEFER_BOOTSTRAP=/^NG_DEFER_BOOTSTRAP!/;return window&&!NG_DEFER_BOOTSTRAP.test(window.name)?doBootstrap():(window.name=window.name.replace(NG_DEFER_BOOTSTRAP,""),void(angular.resumeBootstrap=function(extraModules){forEach(extraModules,function(module){modules.push(module)}),doBootstrap()}))}function snake_case(name,separator){return separator=separator||"_",name.replace(SNAKE_CASE_REGEXP,function(letter,pos){return(pos?separator:"")+letter.toLowerCase()})}function bindJQuery(){jQuery=window.jQuery,jQuery?(jqLite=jQuery,extend(jQuery.fn,{scope:JQLitePrototype.scope,isolateScope:JQLitePrototype.isolateScope,controller:JQLitePrototype.controller,injector:JQLitePrototype.injector,inheritedData:JQLitePrototype.inheritedData}),jqLitePatchJQueryRemove("remove",!0,!0,!1),jqLitePatchJQueryRemove("empty",!1,!1,!1),jqLitePatchJQueryRemove("html",!1,!1,!0)):jqLite=JQLite,angular.element=jqLite}function assertArg(arg,name,reason){if(!arg)throw ngMinErr("areq","Argument '{0}' is {1}",name||"?",reason||"required");return arg}function assertArgFn(arg,name,acceptArrayAnnotation){return acceptArrayAnnotation&&isArray(arg)&&(arg=arg[arg.length-1]),assertArg(isFunction(arg),name,"not a function, got "+(arg&&"object"==typeof arg?arg.constructor.name||"Object":typeof arg)),arg}function assertNotHasOwnProperty(name,context){if("hasOwnProperty"===name)throw ngMinErr("badname","hasOwnProperty is not a valid {0} name",context)}function getter(obj,path,bindFnToScope){if(!path)return obj;for(var key,keys=path.split("."),lastInstance=obj,len=keys.length,i=0;len>i;i++)key=keys[i],obj&&(obj=(lastInstance=obj)[key]);return!bindFnToScope&&isFunction(obj)?bind(lastInstance,obj):obj}function getBlockElements(nodes){var startNode=nodes[0],endNode=nodes[nodes.length-1];if(startNode===endNode)return jqLite(startNode);var element=startNode,elements=[element];do{if(element=element.nextSibling,!element)break;elements.push(element)}while(element!==endNode);return jqLite(elements)}function setupModuleLoader(window){function ensure(obj,name,factory){return obj[name]||(obj[name]=factory())}var $injectorMinErr=minErr("$injector"),ngMinErr=minErr("ng"),angular=ensure(window,"angular",Object);return angular.$$minErr=angular.$$minErr||minErr,ensure(angular,"module",function(){var modules={};return function(name,requires,configFn){var assertNotHasOwnProperty=function(name,context){if("hasOwnProperty"===name)throw ngMinErr("badname","hasOwnProperty is not a valid {0} name",context)};return assertNotHasOwnProperty(name,"module"),requires&&modules.hasOwnProperty(name)&&(modules[name]=null),ensure(modules,name,function(){function invokeLater(provider,method,insertMethod){return function(){return invokeQueue[insertMethod||"push"]([provider,method,arguments]),moduleInstance}}if(!requires)throw $injectorMinErr("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",name);var invokeQueue=[],runBlocks=[],config=invokeLater("$injector","invoke"),moduleInstance={_invokeQueue:invokeQueue,_runBlocks:runBlocks,requires:requires,name:name,provider:invokeLater("$provide","provider"),factory:invokeLater("$provide","factory"),service:invokeLater("$provide","service"),value:invokeLater("$provide","value"),constant:invokeLater("$provide","constant","unshift"),animation:invokeLater("$animateProvider","register"),filter:invokeLater("$filterProvider","register"),controller:invokeLater("$controllerProvider","register"),directive:invokeLater("$compileProvider","directive"),config:config,run:function(block){return runBlocks.push(block),this}};return configFn&&config(configFn),moduleInstance})}})}function publishExternalAPI(angular){extend(angular,{bootstrap:bootstrap,copy:copy,extend:extend,equals:equals,element:jqLite,forEach:forEach,injector:createInjector,noop:noop,bind:bind,toJson:toJson,fromJson:fromJson,identity:identity,isUndefined:isUndefined,isDefined:isDefined,isString:isString,isFunction:isFunction,isObject:isObject,isNumber:isNumber,isElement:isElement,isArray:isArray,version:version,isDate:isDate,lowercase:lowercase,uppercase:uppercase,callbacks:{counter:0},$$minErr:minErr,$$csp:csp}),angularModule=setupModuleLoader(window);try{angularModule("ngLocale")}catch(e){angularModule("ngLocale",[]).provider("$locale",$LocaleProvider)}angularModule("ng",["ngLocale"],["$provide",function($provide){$provide.provider({$$sanitizeUri:$$SanitizeUriProvider}),$provide.provider("$compile",$CompileProvider).directive({a:htmlAnchorDirective,input:inputDirective,textarea:inputDirective,form:formDirective,script:scriptDirective,select:selectDirective,style:styleDirective,option:optionDirective,ngBind:ngBindDirective,ngBindHtml:ngBindHtmlDirective,ngBindTemplate:ngBindTemplateDirective,ngClass:ngClassDirective,ngClassEven:ngClassEvenDirective,ngClassOdd:ngClassOddDirective,ngCloak:ngCloakDirective,ngController:ngControllerDirective,ngForm:ngFormDirective,ngHide:ngHideDirective,ngIf:ngIfDirective,ngInclude:ngIncludeDirective,ngInit:ngInitDirective,ngNonBindable:ngNonBindableDirective,ngPluralize:ngPluralizeDirective,ngRepeat:ngRepeatDirective,ngShow:ngShowDirective,ngStyle:ngStyleDirective,ngSwitch:ngSwitchDirective,ngSwitchWhen:ngSwitchWhenDirective,ngSwitchDefault:ngSwitchDefaultDirective,ngOptions:ngOptionsDirective,ngTransclude:ngTranscludeDirective,ngModel:ngModelDirective,ngList:ngListDirective,ngChange:ngChangeDirective,required:requiredDirective,ngRequired:requiredDirective,ngValue:ngValueDirective}).directive({ngInclude:ngIncludeFillContentDirective}).directive(ngAttributeAliasDirectives).directive(ngEventDirectives),$provide.provider({$anchorScroll:$AnchorScrollProvider,$animate:$AnimateProvider,$browser:$BrowserProvider,$cacheFactory:$CacheFactoryProvider,$controller:$ControllerProvider,$document:$DocumentProvider,$exceptionHandler:$ExceptionHandlerProvider,$filter:$FilterProvider,$interpolate:$InterpolateProvider,$interval:$IntervalProvider,$http:$HttpProvider,$httpBackend:$HttpBackendProvider,$location:$LocationProvider,$log:$LogProvider,$parse:$ParseProvider,$rootScope:$RootScopeProvider,$q:$QProvider,$sce:$SceProvider,$sceDelegate:$SceDelegateProvider,$sniffer:$SnifferProvider,$templateCache:$TemplateCacheProvider,$timeout:$TimeoutProvider,$window:$WindowProvider,$$rAF:$$RAFProvider,$$asyncCallback:$$AsyncCallbackProvider})}])}function jqNextId(){return++jqId}function camelCase(name){return name.replace(SPECIAL_CHARS_REGEXP,function(_,separator,letter,offset){return offset?letter.toUpperCase():letter}).replace(MOZ_HACK_REGEXP,"Moz$1")}function jqLitePatchJQueryRemove(name,dispatchThis,filterElems,getterIfNoArguments){function removePatch(param){var set,setIndex,setLength,element,childIndex,childLength,children,list=filterElems&&param?[this.filter(param)]:[this],fireEvent=dispatchThis;if(!getterIfNoArguments||null!=param)for(;list.length;)for(set=list.shift(),setIndex=0,setLength=set.length;setLength>setIndex;setIndex++)for(element=jqLite(set[setIndex]),fireEvent?element.triggerHandler("$destroy"):fireEvent=!fireEvent,childIndex=0,childLength=(children=element.children()).length;childLength>childIndex;childIndex++)list.push(jQuery(children[childIndex]));return originalJqFn.apply(this,arguments)}var originalJqFn=jQuery.fn[name];originalJqFn=originalJqFn.$original||originalJqFn,removePatch.$original=originalJqFn,jQuery.fn[name]=removePatch}function jqLiteIsTextNode(html){return!HTML_REGEXP.test(html)}function jqLiteBuildFragment(html,context){var tmp,tag,wrap,i,j,jj,fragment=context.createDocumentFragment(),nodes=[];if(jqLiteIsTextNode(html))nodes.push(context.createTextNode(html));else{for(tmp=fragment.appendChild(context.createElement("div")),tag=(TAG_NAME_REGEXP.exec(html)||["",""])[1].toLowerCase(),wrap=wrapMap[tag]||wrapMap._default,tmp.innerHTML="<div>&#160;</div>"+wrap[1]+html.replace(XHTML_TAG_REGEXP,"<$1></$2>")+wrap[2],tmp.removeChild(tmp.firstChild),i=wrap[0];i--;)tmp=tmp.lastChild;for(j=0,jj=tmp.childNodes.length;jj>j;++j)nodes.push(tmp.childNodes[j]);tmp=fragment.firstChild,tmp.textContent=""}return fragment.textContent="",fragment.innerHTML="",nodes}function jqLiteParseHTML(html,context){context=context||document;var parsed;return(parsed=SINGLE_TAG_REGEXP.exec(html))?[context.createElement(parsed[1])]:jqLiteBuildFragment(html,context)}function JQLite(element){if(element instanceof JQLite)return element;if(isString(element)&&(element=trim(element)),!(this instanceof JQLite)){if(isString(element)&&"<"!=element.charAt(0))throw jqLiteMinErr("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new JQLite(element)}if(isString(element)){jqLiteAddNodes(this,jqLiteParseHTML(element));var fragment=jqLite(document.createDocumentFragment());fragment.append(this)}else jqLiteAddNodes(this,element)}function jqLiteClone(element){return element.cloneNode(!0)}function jqLiteDealoc(element){jqLiteRemoveData(element);for(var i=0,children=element.childNodes||[];i<children.length;i++)jqLiteDealoc(children[i])}function jqLiteOff(element,type,fn,unsupported){if(isDefined(unsupported))throw jqLiteMinErr("offargs","jqLite#off() does not support the `selector` argument");var events=jqLiteExpandoStore(element,"events"),handle=jqLiteExpandoStore(element,"handle");handle&&(isUndefined(type)?forEach(events,function(eventHandler,type){removeEventListenerFn(element,type,eventHandler),delete events[type]}):forEach(type.split(" "),function(type){isUndefined(fn)?(removeEventListenerFn(element,type,events[type]),delete events[type]):arrayRemove(events[type]||[],fn)}))}function jqLiteRemoveData(element,name){var expandoId=element[jqName],expandoStore=jqCache[expandoId];if(expandoStore){if(name)return void delete jqCache[expandoId].data[name];expandoStore.handle&&(expandoStore.events.$destroy&&expandoStore.handle({},"$destroy"),jqLiteOff(element)),delete jqCache[expandoId],element[jqName]=undefined}}function jqLiteExpandoStore(element,key,value){var expandoId=element[jqName],expandoStore=jqCache[expandoId||-1];return isDefined(value)?(expandoStore||(element[jqName]=expandoId=jqNextId(),expandoStore=jqCache[expandoId]={}),void(expandoStore[key]=value)):expandoStore&&expandoStore[key]}function jqLiteData(element,key,value){var data=jqLiteExpandoStore(element,"data"),isSetter=isDefined(value),keyDefined=!isSetter&&isDefined(key),isSimpleGetter=keyDefined&&!isObject(key);if(data||isSimpleGetter||jqLiteExpandoStore(element,"data",data={}),isSetter)data[key]=value;else{if(!keyDefined)return data;if(isSimpleGetter)return data&&data[key];extend(data,key)}}function jqLiteHasClass(element,selector){return element.getAttribute?(" "+(element.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+selector+" ")>-1:!1}function jqLiteRemoveClass(element,cssClasses){cssClasses&&element.setAttribute&&forEach(cssClasses.split(" "),function(cssClass){element.setAttribute("class",trim((" "+(element.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+trim(cssClass)+" "," ")))})}function jqLiteAddClass(element,cssClasses){if(cssClasses&&element.setAttribute){var existingClasses=(" "+(element.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");forEach(cssClasses.split(" "),function(cssClass){cssClass=trim(cssClass),-1===existingClasses.indexOf(" "+cssClass+" ")&&(existingClasses+=cssClass+" ")}),element.setAttribute("class",trim(existingClasses))}}function jqLiteAddNodes(root,elements){if(elements){elements=elements.nodeName||!isDefined(elements.length)||isWindow(elements)?[elements]:elements;for(var i=0;i<elements.length;i++)root.push(elements[i])}}function jqLiteController(element,name){return jqLiteInheritedData(element,"$"+(name||"ngController")+"Controller")}function jqLiteInheritedData(element,name,value){element=jqLite(element),9==element[0].nodeType&&(element=element.find("html"));for(var names=isArray(name)?name:[name];element.length;){for(var node=element[0],i=0,ii=names.length;ii>i;i++)if((value=element.data(names[i]))!==undefined)return value;element=jqLite(node.parentNode||11===node.nodeType&&node.host)}}function jqLiteEmpty(element){for(var i=0,childNodes=element.childNodes;i<childNodes.length;i++)jqLiteDealoc(childNodes[i]);for(;element.firstChild;)element.removeChild(element.firstChild)}function getBooleanAttrName(element,name){var booleanAttr=BOOLEAN_ATTR[name.toLowerCase()];return booleanAttr&&BOOLEAN_ELEMENTS[element.nodeName]&&booleanAttr}function createEventHandler(element,events){var eventHandler=function(event,type){if(event.preventDefault||(event.preventDefault=function(){event.returnValue=!1}),event.stopPropagation||(event.stopPropagation=function(){event.cancelBubble=!0}),event.target||(event.target=event.srcElement||document),isUndefined(event.defaultPrevented)){var prevent=event.preventDefault;event.preventDefault=function(){event.defaultPrevented=!0,prevent.call(event)},event.defaultPrevented=!1}event.isDefaultPrevented=function(){return event.defaultPrevented||event.returnValue===!1};var eventHandlersCopy=shallowCopy(events[type||event.type]||[]);forEach(eventHandlersCopy,function(fn){fn.call(element,event)}),8>=msie?(event.preventDefault=null,event.stopPropagation=null,event.isDefaultPrevented=null):(delete event.preventDefault,delete event.stopPropagation,delete event.isDefaultPrevented)};return eventHandler.elem=element,eventHandler}function hashKey(obj){var key,objType=typeof obj;return"object"==objType&&null!==obj?"function"==typeof(key=obj.$$hashKey)?key=obj.$$hashKey():key===undefined&&(key=obj.$$hashKey=nextUid()):key=obj,objType+":"+key}function HashMap(array){forEach(array,this.put,this)}function annotate(fn){var $inject,fnText,argDecl,last;return"function"==typeof fn?($inject=fn.$inject)||($inject=[],fn.length&&(fnText=fn.toString().replace(STRIP_COMMENTS,""),argDecl=fnText.match(FN_ARGS),forEach(argDecl[1].split(FN_ARG_SPLIT),function(arg){arg.replace(FN_ARG,function(all,underscore,name){$inject.push(name)})})),fn.$inject=$inject):isArray(fn)?(last=fn.length-1,assertArgFn(fn[last],"fn"),$inject=fn.slice(0,last)):assertArgFn(fn,"fn",!0),$inject}function createInjector(modulesToLoad){function supportObject(delegate){return function(key,value){return isObject(key)?void forEach(key,reverseParams(delegate)):delegate(key,value)}}function provider(name,provider_){if(assertNotHasOwnProperty(name,"service"),(isFunction(provider_)||isArray(provider_))&&(provider_=providerInjector.instantiate(provider_)),!provider_.$get)throw $injectorMinErr("pget","Provider '{0}' must define $get factory method.",name);return providerCache[name+providerSuffix]=provider_}function factory(name,factoryFn){return provider(name,{$get:factoryFn})}function service(name,constructor){return factory(name,["$injector",function($injector){return $injector.instantiate(constructor)}])}function value(name,val){return factory(name,valueFn(val))}function constant(name,value){assertNotHasOwnProperty(name,"constant"),providerCache[name]=value,instanceCache[name]=value}function decorator(serviceName,decorFn){var origProvider=providerInjector.get(serviceName+providerSuffix),orig$get=origProvider.$get;origProvider.$get=function(){var origInstance=instanceInjector.invoke(orig$get,origProvider);return instanceInjector.invoke(decorFn,null,{$delegate:origInstance})}}function loadModules(modulesToLoad){var moduleFn,invokeQueue,i,ii,runBlocks=[];return forEach(modulesToLoad,function(module){if(!loadedModules.get(module)){loadedModules.put(module,!0);try{if(isString(module))for(moduleFn=angularModule(module),runBlocks=runBlocks.concat(loadModules(moduleFn.requires)).concat(moduleFn._runBlocks),invokeQueue=moduleFn._invokeQueue,i=0,ii=invokeQueue.length;ii>i;i++){var invokeArgs=invokeQueue[i],provider=providerInjector.get(invokeArgs[0]);provider[invokeArgs[1]].apply(provider,invokeArgs[2])}else isFunction(module)?runBlocks.push(providerInjector.invoke(module)):isArray(module)?runBlocks.push(providerInjector.invoke(module)):assertArgFn(module,"module")}catch(e){throw isArray(module)&&(module=module[module.length-1]),e.message&&e.stack&&-1==e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),$injectorMinErr("modulerr","Failed to instantiate module {0} due to:\n{1}",module,e.stack||e.message||e)}}}),runBlocks}function createInternalInjector(cache,factory){function getService(serviceName){if(cache.hasOwnProperty(serviceName)){if(cache[serviceName]===INSTANTIATING)throw $injectorMinErr("cdep","Circular dependency found: {0}",path.join(" <- "));return cache[serviceName]}try{return path.unshift(serviceName),cache[serviceName]=INSTANTIATING,cache[serviceName]=factory(serviceName)}catch(err){throw cache[serviceName]===INSTANTIATING&&delete cache[serviceName],err}finally{path.shift()}}function invoke(fn,self,locals){var length,i,key,args=[],$inject=annotate(fn);for(i=0,length=$inject.length;length>i;i++){if(key=$inject[i],"string"!=typeof key)throw $injectorMinErr("itkn","Incorrect injection token! Expected service name as string, got {0}",key);args.push(locals&&locals.hasOwnProperty(key)?locals[key]:getService(key))}return fn.$inject||(fn=fn[length]),fn.apply(self,args)}function instantiate(Type,locals){var instance,returnedValue,Constructor=function(){};return Constructor.prototype=(isArray(Type)?Type[Type.length-1]:Type).prototype,instance=new Constructor,returnedValue=invoke(Type,instance,locals),isObject(returnedValue)||isFunction(returnedValue)?returnedValue:instance}return{invoke:invoke,instantiate:instantiate,get:getService,annotate:annotate,has:function(name){return providerCache.hasOwnProperty(name+providerSuffix)||cache.hasOwnProperty(name)}}}var INSTANTIATING={},providerSuffix="Provider",path=[],loadedModules=new HashMap,providerCache={$provide:{provider:supportObject(provider),factory:supportObject(factory),service:supportObject(service),value:supportObject(value),constant:supportObject(constant),decorator:decorator}},providerInjector=providerCache.$injector=createInternalInjector(providerCache,function(){throw $injectorMinErr("unpr","Unknown provider: {0}",path.join(" <- "))}),instanceCache={},instanceInjector=instanceCache.$injector=createInternalInjector(instanceCache,function(servicename){var provider=providerInjector.get(servicename+providerSuffix);return instanceInjector.invoke(provider.$get,provider)});return forEach(loadModules(modulesToLoad),function(fn){instanceInjector.invoke(fn||noop)}),instanceInjector}function $AnchorScrollProvider(){var autoScrollingEnabled=!0;this.disableAutoScrolling=function(){autoScrollingEnabled=!1},this.$get=["$window","$location","$rootScope",function($window,$location,$rootScope){function getFirstAnchor(list){var result=null;return forEach(list,function(element){result||"a"!==lowercase(element.nodeName)||(result=element)}),result}function scroll(){var elm,hash=$location.hash();hash?(elm=document.getElementById(hash))?elm.scrollIntoView():(elm=getFirstAnchor(document.getElementsByName(hash)))?elm.scrollIntoView():"top"===hash&&$window.scrollTo(0,0):$window.scrollTo(0,0)}var document=$window.document;return autoScrollingEnabled&&$rootScope.$watch(function(){return $location.hash()},function(){$rootScope.$evalAsync(scroll)}),scroll}]}function $$AsyncCallbackProvider(){this.$get=["$$rAF","$timeout",function($$rAF,$timeout){return $$rAF.supported?function(fn){return $$rAF(fn)}:function(fn){return $timeout(fn,0,!1)}}]}function Browser(window,document,$log,$sniffer){function completeOutstandingRequest(fn){try{fn.apply(null,sliceArgs(arguments,1))}finally{if(outstandingRequestCount--,0===outstandingRequestCount)for(;outstandingRequestCallbacks.length;)try{outstandingRequestCallbacks.pop()()
}catch(e){$log.error(e)}}}function startPoller(interval,setTimeout){!function check(){forEach(pollFns,function(pollFn){pollFn()}),pollTimeout=setTimeout(check,interval)}()}function fireUrlChange(){newLocation=null,lastBrowserUrl!=self.url()&&(lastBrowserUrl=self.url(),forEach(urlChangeListeners,function(listener){listener(self.url())}))}var self=this,rawDocument=document[0],location=window.location,history=window.history,setTimeout=window.setTimeout,clearTimeout=window.clearTimeout,pendingDeferIds={};self.isMock=!1;var outstandingRequestCount=0,outstandingRequestCallbacks=[];self.$$completeOutstandingRequest=completeOutstandingRequest,self.$$incOutstandingRequestCount=function(){outstandingRequestCount++},self.notifyWhenNoOutstandingRequests=function(callback){forEach(pollFns,function(pollFn){pollFn()}),0===outstandingRequestCount?callback():outstandingRequestCallbacks.push(callback)};var pollTimeout,pollFns=[];self.addPollFn=function(fn){return isUndefined(pollTimeout)&&startPoller(100,setTimeout),pollFns.push(fn),fn};var lastBrowserUrl=location.href,baseElement=document.find("base"),newLocation=null;self.url=function(url,replace){if(location!==window.location&&(location=window.location),history!==window.history&&(history=window.history),url){if(lastBrowserUrl==url)return;return lastBrowserUrl=url,$sniffer.history?replace?history.replaceState(null,"",url):(history.pushState(null,"",url),baseElement.attr("href",baseElement.attr("href"))):(newLocation=url,replace?location.replace(url):location.href=url),self}return newLocation||location.href.replace(/%27/g,"'")};var urlChangeListeners=[],urlChangeInit=!1;self.onUrlChange=function(callback){return urlChangeInit||($sniffer.history&&jqLite(window).on("popstate",fireUrlChange),$sniffer.hashchange?jqLite(window).on("hashchange",fireUrlChange):self.addPollFn(fireUrlChange),urlChangeInit=!0),urlChangeListeners.push(callback),callback},self.baseHref=function(){var href=baseElement.attr("href");return href?href.replace(/^(https?\:)?\/\/[^\/]*/,""):""};var lastCookies={},lastCookieString="",cookiePath=self.baseHref();self.cookies=function(name,value){var cookieLength,cookieArray,cookie,i,index;if(!name){if(rawDocument.cookie!==lastCookieString)for(lastCookieString=rawDocument.cookie,cookieArray=lastCookieString.split("; "),lastCookies={},i=0;i<cookieArray.length;i++)cookie=cookieArray[i],index=cookie.indexOf("="),index>0&&(name=unescape(cookie.substring(0,index)),lastCookies[name]===undefined&&(lastCookies[name]=unescape(cookie.substring(index+1))));return lastCookies}value===undefined?rawDocument.cookie=escape(name)+"=;path="+cookiePath+";expires=Thu, 01 Jan 1970 00:00:00 GMT":isString(value)&&(cookieLength=(rawDocument.cookie=escape(name)+"="+escape(value)+";path="+cookiePath).length+1,cookieLength>4096&&$log.warn("Cookie '"+name+"' possibly not set or overflowed because it was too large ("+cookieLength+" > 4096 bytes)!"))},self.defer=function(fn,delay){var timeoutId;return outstandingRequestCount++,timeoutId=setTimeout(function(){delete pendingDeferIds[timeoutId],completeOutstandingRequest(fn)},delay||0),pendingDeferIds[timeoutId]=!0,timeoutId},self.defer.cancel=function(deferId){return pendingDeferIds[deferId]?(delete pendingDeferIds[deferId],clearTimeout(deferId),completeOutstandingRequest(noop),!0):!1}}function $BrowserProvider(){this.$get=["$window","$log","$sniffer","$document",function($window,$log,$sniffer,$document){return new Browser($window,$document,$log,$sniffer)}]}function $CacheFactoryProvider(){this.$get=function(){function cacheFactory(cacheId,options){function refresh(entry){entry!=freshEnd&&(staleEnd?staleEnd==entry&&(staleEnd=entry.n):staleEnd=entry,link(entry.n,entry.p),link(entry,freshEnd),freshEnd=entry,freshEnd.n=null)}function link(nextEntry,prevEntry){nextEntry!=prevEntry&&(nextEntry&&(nextEntry.p=prevEntry),prevEntry&&(prevEntry.n=nextEntry))}if(cacheId in caches)throw minErr("$cacheFactory")("iid","CacheId '{0}' is already taken!",cacheId);var size=0,stats=extend({},options,{id:cacheId}),data={},capacity=options&&options.capacity||Number.MAX_VALUE,lruHash={},freshEnd=null,staleEnd=null;return caches[cacheId]={put:function(key,value){if(capacity<Number.MAX_VALUE){var lruEntry=lruHash[key]||(lruHash[key]={key:key});refresh(lruEntry)}if(!isUndefined(value))return key in data||size++,data[key]=value,size>capacity&&this.remove(staleEnd.key),value},get:function(key){if(capacity<Number.MAX_VALUE){var lruEntry=lruHash[key];if(!lruEntry)return;refresh(lruEntry)}return data[key]},remove:function(key){if(capacity<Number.MAX_VALUE){var lruEntry=lruHash[key];if(!lruEntry)return;lruEntry==freshEnd&&(freshEnd=lruEntry.p),lruEntry==staleEnd&&(staleEnd=lruEntry.n),link(lruEntry.n,lruEntry.p),delete lruHash[key]}delete data[key],size--},removeAll:function(){data={},size=0,lruHash={},freshEnd=staleEnd=null},destroy:function(){data=null,stats=null,lruHash=null,delete caches[cacheId]},info:function(){return extend({},stats,{size:size})}}}var caches={};return cacheFactory.info=function(){var info={};return forEach(caches,function(cache,cacheId){info[cacheId]=cache.info()}),info},cacheFactory.get=function(cacheId){return caches[cacheId]},cacheFactory}}function $TemplateCacheProvider(){this.$get=["$cacheFactory",function($cacheFactory){return $cacheFactory("templates")}]}function $CompileProvider($provide,$$sanitizeUriProvider){var hasDirectives={},Suffix="Directive",COMMENT_DIRECTIVE_REGEXP=/^\s*directive\:\s*([\d\w\-_]+)\s+(.*)$/,CLASS_DIRECTIVE_REGEXP=/(([\d\w\-_]+)(?:\:([^;]+))?;?)/,EVENT_HANDLER_ATTR_REGEXP=/^(on[a-z]+|formaction)$/;this.directive=function registerDirective(name,directiveFactory){return assertNotHasOwnProperty(name,"directive"),isString(name)?(assertArg(directiveFactory,"directiveFactory"),hasDirectives.hasOwnProperty(name)||(hasDirectives[name]=[],$provide.factory(name+Suffix,["$injector","$exceptionHandler",function($injector,$exceptionHandler){var directives=[];return forEach(hasDirectives[name],function(directiveFactory,index){try{var directive=$injector.invoke(directiveFactory);isFunction(directive)?directive={compile:valueFn(directive)}:!directive.compile&&directive.link&&(directive.compile=valueFn(directive.link)),directive.priority=directive.priority||0,directive.index=index,directive.name=directive.name||name,directive.require=directive.require||directive.controller&&directive.name,directive.restrict=directive.restrict||"A",directives.push(directive)}catch(e){$exceptionHandler(e)}}),directives}])),hasDirectives[name].push(directiveFactory)):forEach(name,reverseParams(registerDirective)),this},this.aHrefSanitizationWhitelist=function(regexp){return isDefined(regexp)?($$sanitizeUriProvider.aHrefSanitizationWhitelist(regexp),this):$$sanitizeUriProvider.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(regexp){return isDefined(regexp)?($$sanitizeUriProvider.imgSrcSanitizationWhitelist(regexp),this):$$sanitizeUriProvider.imgSrcSanitizationWhitelist()},this.$get=["$injector","$interpolate","$exceptionHandler","$http","$templateCache","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function($injector,$interpolate,$exceptionHandler,$http,$templateCache,$parse,$controller,$rootScope,$document,$sce,$animate,$$sanitizeUri){function compile($compileNodes,transcludeFn,maxPriority,ignoreDirective,previousCompileContext){$compileNodes instanceof jqLite||($compileNodes=jqLite($compileNodes)),forEach($compileNodes,function(node,index){3==node.nodeType&&node.nodeValue.match(/\S+/)&&($compileNodes[index]=node=jqLite(node).wrap("<span></span>").parent()[0])});var compositeLinkFn=compileNodes($compileNodes,transcludeFn,$compileNodes,maxPriority,ignoreDirective,previousCompileContext);return safeAddClass($compileNodes,"ng-scope"),function(scope,cloneConnectFn,transcludeControllers){assertArg(scope,"scope");var $linkNode=cloneConnectFn?JQLitePrototype.clone.call($compileNodes):$compileNodes;forEach(transcludeControllers,function(instance,name){$linkNode.data("$"+name+"Controller",instance)});for(var i=0,ii=$linkNode.length;ii>i;i++){var node=$linkNode[i],nodeType=node.nodeType;(1===nodeType||9===nodeType)&&$linkNode.eq(i).data("$scope",scope)}return cloneConnectFn&&cloneConnectFn($linkNode,scope),compositeLinkFn&&compositeLinkFn(scope,$linkNode,$linkNode),$linkNode}}function safeAddClass($element,className){try{$element.addClass(className)}catch(e){}}function compileNodes(nodeList,transcludeFn,$rootElement,maxPriority,ignoreDirective,previousCompileContext){function compositeLinkFn(scope,nodeList,$rootElement,boundTranscludeFn){var nodeLinkFn,childLinkFn,node,$node,childScope,childTranscludeFn,i,ii,n,nodeListLength=nodeList.length,stableNodeList=new Array(nodeListLength);for(i=0;nodeListLength>i;i++)stableNodeList[i]=nodeList[i];for(i=0,n=0,ii=linkFns.length;ii>i;n++)node=stableNodeList[n],nodeLinkFn=linkFns[i++],childLinkFn=linkFns[i++],$node=jqLite(node),nodeLinkFn?(nodeLinkFn.scope?(childScope=scope.$new(),$node.data("$scope",childScope)):childScope=scope,childTranscludeFn=nodeLinkFn.transclude,childTranscludeFn||!boundTranscludeFn&&transcludeFn?nodeLinkFn(childLinkFn,childScope,node,$rootElement,createBoundTranscludeFn(scope,childTranscludeFn||transcludeFn)):nodeLinkFn(childLinkFn,childScope,node,$rootElement,boundTranscludeFn)):childLinkFn&&childLinkFn(scope,node.childNodes,undefined,boundTranscludeFn)}for(var attrs,directives,nodeLinkFn,childNodes,childLinkFn,linkFnFound,linkFns=[],i=0;i<nodeList.length;i++)attrs=new Attributes,directives=collectDirectives(nodeList[i],[],attrs,0===i?maxPriority:undefined,ignoreDirective),nodeLinkFn=directives.length?applyDirectivesToNode(directives,nodeList[i],attrs,transcludeFn,$rootElement,null,[],[],previousCompileContext):null,nodeLinkFn&&nodeLinkFn.scope&&safeAddClass(jqLite(nodeList[i]),"ng-scope"),childLinkFn=nodeLinkFn&&nodeLinkFn.terminal||!(childNodes=nodeList[i].childNodes)||!childNodes.length?null:compileNodes(childNodes,nodeLinkFn?nodeLinkFn.transclude:transcludeFn),linkFns.push(nodeLinkFn,childLinkFn),linkFnFound=linkFnFound||nodeLinkFn||childLinkFn,previousCompileContext=null;return linkFnFound?compositeLinkFn:null}function createBoundTranscludeFn(scope,transcludeFn){return function(transcludedScope,cloneFn,controllers){var scopeCreated=!1;transcludedScope||(transcludedScope=scope.$new(),transcludedScope.$$transcluded=!0,scopeCreated=!0);var clone=transcludeFn(transcludedScope,cloneFn,controllers);return scopeCreated&&clone.on("$destroy",bind(transcludedScope,transcludedScope.$destroy)),clone}}function collectDirectives(node,directives,attrs,maxPriority,ignoreDirective){var match,className,nodeType=node.nodeType,attrsMap=attrs.$attr;switch(nodeType){case 1:addDirective(directives,directiveNormalize(nodeName_(node).toLowerCase()),"E",maxPriority,ignoreDirective);for(var attr,name,nName,ngAttrName,value,nAttrs=node.attributes,j=0,jj=nAttrs&&nAttrs.length;jj>j;j++){var attrStartName=!1,attrEndName=!1;if(attr=nAttrs[j],!msie||msie>=8||attr.specified){name=attr.name,ngAttrName=directiveNormalize(name),NG_ATTR_BINDING.test(ngAttrName)&&(name=snake_case(ngAttrName.substr(6),"-"));var directiveNName=ngAttrName.replace(/(Start|End)$/,"");ngAttrName===directiveNName+"Start"&&(attrStartName=name,attrEndName=name.substr(0,name.length-5)+"end",name=name.substr(0,name.length-6)),nName=directiveNormalize(name.toLowerCase()),attrsMap[nName]=name,attrs[nName]=value=trim(attr.value),getBooleanAttrName(node,nName)&&(attrs[nName]=!0),addAttrInterpolateDirective(node,directives,value,nName),addDirective(directives,nName,"A",maxPriority,ignoreDirective,attrStartName,attrEndName)}}if(className=node.className,isString(className)&&""!==className)for(;match=CLASS_DIRECTIVE_REGEXP.exec(className);)nName=directiveNormalize(match[2]),addDirective(directives,nName,"C",maxPriority,ignoreDirective)&&(attrs[nName]=trim(match[3])),className=className.substr(match.index+match[0].length);break;case 3:addTextInterpolateDirective(directives,node.nodeValue);break;case 8:try{match=COMMENT_DIRECTIVE_REGEXP.exec(node.nodeValue),match&&(nName=directiveNormalize(match[1]),addDirective(directives,nName,"M",maxPriority,ignoreDirective)&&(attrs[nName]=trim(match[2])))}catch(e){}}return directives.sort(byPriority),directives}function groupScan(node,attrStart,attrEnd){var nodes=[],depth=0;if(attrStart&&node.hasAttribute&&node.hasAttribute(attrStart)){do{if(!node)throw $compileMinErr("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",attrStart,attrEnd);1==node.nodeType&&(node.hasAttribute(attrStart)&&depth++,node.hasAttribute(attrEnd)&&depth--),nodes.push(node),node=node.nextSibling}while(depth>0)}else nodes.push(node);return jqLite(nodes)}function groupElementsLinkFnWrapper(linkFn,attrStart,attrEnd){return function(scope,element,attrs,controllers,transcludeFn){return element=groupScan(element[0],attrStart,attrEnd),linkFn(scope,element,attrs,controllers,transcludeFn)}}function applyDirectivesToNode(directives,compileNode,templateAttrs,transcludeFn,jqCollection,originalReplaceDirective,preLinkFns,postLinkFns,previousCompileContext){function addLinkFns(pre,post,attrStart,attrEnd){pre&&(attrStart&&(pre=groupElementsLinkFnWrapper(pre,attrStart,attrEnd)),pre.require=directive.require,(newIsolateScopeDirective===directive||directive.$$isolateScope)&&(pre=cloneAndAnnotateFn(pre,{isolateScope:!0})),preLinkFns.push(pre)),post&&(attrStart&&(post=groupElementsLinkFnWrapper(post,attrStart,attrEnd)),post.require=directive.require,(newIsolateScopeDirective===directive||directive.$$isolateScope)&&(post=cloneAndAnnotateFn(post,{isolateScope:!0})),postLinkFns.push(post))}function getControllers(require,$element,elementControllers){var value,retrievalMethod="data",optional=!1;if(isString(require)){for(;"^"==(value=require.charAt(0))||"?"==value;)require=require.substr(1),"^"==value&&(retrievalMethod="inheritedData"),optional=optional||"?"==value;if(value=null,elementControllers&&"data"===retrievalMethod&&(value=elementControllers[require]),value=value||$element[retrievalMethod]("$"+require+"Controller"),!value&&!optional)throw $compileMinErr("ctreq","Controller '{0}', required by directive '{1}', can't be found!",require,directiveName);return value}return isArray(require)&&(value=[],forEach(require,function(require){value.push(getControllers(require,$element,elementControllers))})),value}function nodeLinkFn(childLinkFn,scope,linkNode,$rootElement,boundTranscludeFn){function controllersBoundTransclude(scope,cloneAttachFn){var transcludeControllers;return arguments.length<2&&(cloneAttachFn=scope,scope=undefined),hasElementTranscludeDirective&&(transcludeControllers=elementControllers),boundTranscludeFn(scope,cloneAttachFn,transcludeControllers)}var attrs,$element,i,ii,linkFn,controller,isolateScope,transcludeFn,elementControllers={};if(attrs=compileNode===linkNode?templateAttrs:shallowCopy(templateAttrs,new Attributes(jqLite(linkNode),templateAttrs.$attr)),$element=attrs.$$element,newIsolateScopeDirective){var LOCAL_REGEXP=/^\s*([@=&])(\??)\s*(\w*)\s*$/,$linkNode=jqLite(linkNode);isolateScope=scope.$new(!0),templateDirective&&templateDirective===newIsolateScopeDirective.$$originalDirective?$linkNode.data("$isolateScope",isolateScope):$linkNode.data("$isolateScopeNoTemplate",isolateScope),safeAddClass($linkNode,"ng-isolate-scope"),forEach(newIsolateScopeDirective.scope,function(definition,scopeName){var lastValue,parentGet,parentSet,compare,match=definition.match(LOCAL_REGEXP)||[],attrName=match[3]||scopeName,optional="?"==match[2],mode=match[1];switch(isolateScope.$$isolateBindings[scopeName]=mode+attrName,mode){case"@":attrs.$observe(attrName,function(value){isolateScope[scopeName]=value}),attrs.$$observers[attrName].$$scope=scope,attrs[attrName]&&(isolateScope[scopeName]=$interpolate(attrs[attrName])(scope));break;case"=":if(optional&&!attrs[attrName])return;parentGet=$parse(attrs[attrName]),compare=parentGet.literal?equals:function(a,b){return a===b},parentSet=parentGet.assign||function(){throw lastValue=isolateScope[scopeName]=parentGet(scope),$compileMinErr("nonassign","Expression '{0}' used with directive '{1}' is non-assignable!",attrs[attrName],newIsolateScopeDirective.name)},lastValue=isolateScope[scopeName]=parentGet(scope),isolateScope.$watch(function(){var parentValue=parentGet(scope);return compare(parentValue,isolateScope[scopeName])||(compare(parentValue,lastValue)?parentSet(scope,parentValue=isolateScope[scopeName]):isolateScope[scopeName]=parentValue),lastValue=parentValue},null,parentGet.literal);break;case"&":parentGet=$parse(attrs[attrName]),isolateScope[scopeName]=function(locals){return parentGet(scope,locals)};break;default:throw $compileMinErr("iscp","Invalid isolate scope definition for directive '{0}'. Definition: {... {1}: '{2}' ...}",newIsolateScopeDirective.name,scopeName,definition)}})}for(transcludeFn=boundTranscludeFn&&controllersBoundTransclude,controllerDirectives&&forEach(controllerDirectives,function(directive){var controllerInstance,locals={$scope:directive===newIsolateScopeDirective||directive.$$isolateScope?isolateScope:scope,$element:$element,$attrs:attrs,$transclude:transcludeFn};controller=directive.controller,"@"==controller&&(controller=attrs[directive.name]),controllerInstance=$controller(controller,locals),elementControllers[directive.name]=controllerInstance,hasElementTranscludeDirective||$element.data("$"+directive.name+"Controller",controllerInstance),directive.controllerAs&&(locals.$scope[directive.controllerAs]=controllerInstance)}),i=0,ii=preLinkFns.length;ii>i;i++)try{linkFn=preLinkFns[i],linkFn(linkFn.isolateScope?isolateScope:scope,$element,attrs,linkFn.require&&getControllers(linkFn.require,$element,elementControllers),transcludeFn)}catch(e){$exceptionHandler(e,startingTag($element))}var scopeToChild=scope;for(newIsolateScopeDirective&&(newIsolateScopeDirective.template||null===newIsolateScopeDirective.templateUrl)&&(scopeToChild=isolateScope),childLinkFn&&childLinkFn(scopeToChild,linkNode.childNodes,undefined,boundTranscludeFn),i=postLinkFns.length-1;i>=0;i--)try{linkFn=postLinkFns[i],linkFn(linkFn.isolateScope?isolateScope:scope,$element,attrs,linkFn.require&&getControllers(linkFn.require,$element,elementControllers),transcludeFn)}catch(e){$exceptionHandler(e,startingTag($element))}}previousCompileContext=previousCompileContext||{};for(var newScopeDirective,directive,directiveName,$template,linkFn,directiveValue,terminalPriority=-Number.MAX_VALUE,controllerDirectives=previousCompileContext.controllerDirectives,newIsolateScopeDirective=previousCompileContext.newIsolateScopeDirective,templateDirective=previousCompileContext.templateDirective,nonTlbTranscludeDirective=previousCompileContext.nonTlbTranscludeDirective,hasTranscludeDirective=!1,hasElementTranscludeDirective=previousCompileContext.hasElementTranscludeDirective,$compileNode=templateAttrs.$$element=jqLite(compileNode),replaceDirective=originalReplaceDirective,childTranscludeFn=transcludeFn,i=0,ii=directives.length;ii>i;i++){directive=directives[i];var attrStart=directive.$$start,attrEnd=directive.$$end;if(attrStart&&($compileNode=groupScan(compileNode,attrStart,attrEnd)),$template=undefined,terminalPriority>directive.priority)break;if((directiveValue=directive.scope)&&(newScopeDirective=newScopeDirective||directive,directive.templateUrl||(assertNoDuplicate("new/isolated scope",newIsolateScopeDirective,directive,$compileNode),isObject(directiveValue)&&(newIsolateScopeDirective=directive))),directiveName=directive.name,!directive.templateUrl&&directive.controller&&(directiveValue=directive.controller,controllerDirectives=controllerDirectives||{},assertNoDuplicate("'"+directiveName+"' controller",controllerDirectives[directiveName],directive,$compileNode),controllerDirectives[directiveName]=directive),(directiveValue=directive.transclude)&&(hasTranscludeDirective=!0,directive.$$tlb||(assertNoDuplicate("transclusion",nonTlbTranscludeDirective,directive,$compileNode),nonTlbTranscludeDirective=directive),"element"==directiveValue?(hasElementTranscludeDirective=!0,terminalPriority=directive.priority,$template=groupScan(compileNode,attrStart,attrEnd),$compileNode=templateAttrs.$$element=jqLite(document.createComment(" "+directiveName+": "+templateAttrs[directiveName]+" ")),compileNode=$compileNode[0],replaceWith(jqCollection,jqLite(sliceArgs($template)),compileNode),childTranscludeFn=compile($template,transcludeFn,terminalPriority,replaceDirective&&replaceDirective.name,{nonTlbTranscludeDirective:nonTlbTranscludeDirective})):($template=jqLite(jqLiteClone(compileNode)).contents(),$compileNode.empty(),childTranscludeFn=compile($template,transcludeFn))),directive.template)if(assertNoDuplicate("template",templateDirective,directive,$compileNode),templateDirective=directive,directiveValue=isFunction(directive.template)?directive.template($compileNode,templateAttrs):directive.template,directiveValue=denormalizeTemplate(directiveValue),directive.replace){if(replaceDirective=directive,$template=jqLiteIsTextNode(directiveValue)?[]:jqLite(directiveValue),compileNode=$template[0],1!=$template.length||1!==compileNode.nodeType)throw $compileMinErr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",directiveName,"");replaceWith(jqCollection,$compileNode,compileNode);var newTemplateAttrs={$attr:{}},templateDirectives=collectDirectives(compileNode,[],newTemplateAttrs),unprocessedDirectives=directives.splice(i+1,directives.length-(i+1));newIsolateScopeDirective&&markDirectivesAsIsolate(templateDirectives),directives=directives.concat(templateDirectives).concat(unprocessedDirectives),mergeTemplateAttributes(templateAttrs,newTemplateAttrs),ii=directives.length}else $compileNode.html(directiveValue);if(directive.templateUrl)assertNoDuplicate("template",templateDirective,directive,$compileNode),templateDirective=directive,directive.replace&&(replaceDirective=directive),nodeLinkFn=compileTemplateUrl(directives.splice(i,directives.length-i),$compileNode,templateAttrs,jqCollection,childTranscludeFn,preLinkFns,postLinkFns,{controllerDirectives:controllerDirectives,newIsolateScopeDirective:newIsolateScopeDirective,templateDirective:templateDirective,nonTlbTranscludeDirective:nonTlbTranscludeDirective}),ii=directives.length;else if(directive.compile)try{linkFn=directive.compile($compileNode,templateAttrs,childTranscludeFn),isFunction(linkFn)?addLinkFns(null,linkFn,attrStart,attrEnd):linkFn&&addLinkFns(linkFn.pre,linkFn.post,attrStart,attrEnd)}catch(e){$exceptionHandler(e,startingTag($compileNode))}directive.terminal&&(nodeLinkFn.terminal=!0,terminalPriority=Math.max(terminalPriority,directive.priority))}return nodeLinkFn.scope=newScopeDirective&&newScopeDirective.scope===!0,nodeLinkFn.transclude=hasTranscludeDirective&&childTranscludeFn,previousCompileContext.hasElementTranscludeDirective=hasElementTranscludeDirective,nodeLinkFn}function markDirectivesAsIsolate(directives){for(var j=0,jj=directives.length;jj>j;j++)directives[j]=inherit(directives[j],{$$isolateScope:!0})}function addDirective(tDirectives,name,location,maxPriority,ignoreDirective,startAttrName,endAttrName){if(name===ignoreDirective)return null;var match=null;if(hasDirectives.hasOwnProperty(name))for(var directive,directives=$injector.get(name+Suffix),i=0,ii=directives.length;ii>i;i++)try{directive=directives[i],(maxPriority===undefined||maxPriority>directive.priority)&&-1!=directive.restrict.indexOf(location)&&(startAttrName&&(directive=inherit(directive,{$$start:startAttrName,$$end:endAttrName})),tDirectives.push(directive),match=directive)}catch(e){$exceptionHandler(e)}return match}function mergeTemplateAttributes(dst,src){var srcAttr=src.$attr,dstAttr=dst.$attr,$element=dst.$$element;forEach(dst,function(value,key){"$"!=key.charAt(0)&&(src[key]&&(value+=("style"===key?";":" ")+src[key]),dst.$set(key,value,!0,srcAttr[key]))}),forEach(src,function(value,key){"class"==key?(safeAddClass($element,value),dst["class"]=(dst["class"]?dst["class"]+" ":"")+value):"style"==key?($element.attr("style",$element.attr("style")+";"+value),dst.style=(dst.style?dst.style+";":"")+value):"$"==key.charAt(0)||dst.hasOwnProperty(key)||(dst[key]=value,dstAttr[key]=srcAttr[key])})}function compileTemplateUrl(directives,$compileNode,tAttrs,$rootElement,childTranscludeFn,preLinkFns,postLinkFns,previousCompileContext){var afterTemplateNodeLinkFn,afterTemplateChildLinkFn,linkQueue=[],beforeTemplateCompileNode=$compileNode[0],origAsyncDirective=directives.shift(),derivedSyncDirective=extend({},origAsyncDirective,{templateUrl:null,transclude:null,replace:null,$$originalDirective:origAsyncDirective}),templateUrl=isFunction(origAsyncDirective.templateUrl)?origAsyncDirective.templateUrl($compileNode,tAttrs):origAsyncDirective.templateUrl;return $compileNode.empty(),$http.get($sce.getTrustedResourceUrl(templateUrl),{cache:$templateCache}).success(function(content){var compileNode,tempTemplateAttrs,$template,childBoundTranscludeFn;if(content=denormalizeTemplate(content),origAsyncDirective.replace){if($template=jqLiteIsTextNode(content)?[]:jqLite(content),compileNode=$template[0],1!=$template.length||1!==compileNode.nodeType)throw $compileMinErr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",origAsyncDirective.name,templateUrl);tempTemplateAttrs={$attr:{}},replaceWith($rootElement,$compileNode,compileNode);var templateDirectives=collectDirectives(compileNode,[],tempTemplateAttrs);isObject(origAsyncDirective.scope)&&markDirectivesAsIsolate(templateDirectives),directives=templateDirectives.concat(directives),mergeTemplateAttributes(tAttrs,tempTemplateAttrs)}else compileNode=beforeTemplateCompileNode,$compileNode.html(content);for(directives.unshift(derivedSyncDirective),afterTemplateNodeLinkFn=applyDirectivesToNode(directives,compileNode,tAttrs,childTranscludeFn,$compileNode,origAsyncDirective,preLinkFns,postLinkFns,previousCompileContext),forEach($rootElement,function(node,i){node==compileNode&&($rootElement[i]=$compileNode[0])}),afterTemplateChildLinkFn=compileNodes($compileNode[0].childNodes,childTranscludeFn);linkQueue.length;){var scope=linkQueue.shift(),beforeTemplateLinkNode=linkQueue.shift(),linkRootElement=linkQueue.shift(),boundTranscludeFn=linkQueue.shift(),linkNode=$compileNode[0];if(beforeTemplateLinkNode!==beforeTemplateCompileNode){var oldClasses=beforeTemplateLinkNode.className;previousCompileContext.hasElementTranscludeDirective&&origAsyncDirective.replace||(linkNode=jqLiteClone(compileNode)),replaceWith(linkRootElement,jqLite(beforeTemplateLinkNode),linkNode),safeAddClass(jqLite(linkNode),oldClasses)}childBoundTranscludeFn=afterTemplateNodeLinkFn.transclude?createBoundTranscludeFn(scope,afterTemplateNodeLinkFn.transclude):boundTranscludeFn,afterTemplateNodeLinkFn(afterTemplateChildLinkFn,scope,linkNode,$rootElement,childBoundTranscludeFn)}linkQueue=null}).error(function(response,code,headers,config){throw $compileMinErr("tpload","Failed to load template: {0}",config.url)}),function(ignoreChildLinkFn,scope,node,rootElement,boundTranscludeFn){linkQueue?(linkQueue.push(scope),linkQueue.push(node),linkQueue.push(rootElement),linkQueue.push(boundTranscludeFn)):afterTemplateNodeLinkFn(afterTemplateChildLinkFn,scope,node,rootElement,boundTranscludeFn)}}function byPriority(a,b){var diff=b.priority-a.priority;return 0!==diff?diff:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function assertNoDuplicate(what,previousDirective,directive,element){if(previousDirective)throw $compileMinErr("multidir","Multiple directives [{0}, {1}] asking for {2} on: {3}",previousDirective.name,directive.name,what,startingTag(element))}function addTextInterpolateDirective(directives,text){var interpolateFn=$interpolate(text,!0);interpolateFn&&directives.push({priority:0,compile:valueFn(function(scope,node){var parent=node.parent(),bindings=parent.data("$binding")||[];bindings.push(interpolateFn),safeAddClass(parent.data("$binding",bindings),"ng-binding"),scope.$watch(interpolateFn,function(value){node[0].nodeValue=value})})})}function getTrustedContext(node,attrNormalizedName){if("srcdoc"==attrNormalizedName)return $sce.HTML;var tag=nodeName_(node);return"xlinkHref"==attrNormalizedName||"FORM"==tag&&"action"==attrNormalizedName||"IMG"!=tag&&("src"==attrNormalizedName||"ngSrc"==attrNormalizedName)?$sce.RESOURCE_URL:void 0}function addAttrInterpolateDirective(node,directives,value,name){var interpolateFn=$interpolate(value,!0);if(interpolateFn){if("multiple"===name&&"SELECT"===nodeName_(node))throw $compileMinErr("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",startingTag(node));directives.push({priority:100,compile:function(){return{pre:function(scope,element,attr){var $$observers=attr.$$observers||(attr.$$observers={});if(EVENT_HANDLER_ATTR_REGEXP.test(name))throw $compileMinErr("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");interpolateFn=$interpolate(attr[name],!0,getTrustedContext(node,name)),interpolateFn&&(attr[name]=interpolateFn(scope),($$observers[name]||($$observers[name]=[])).$$inter=!0,(attr.$$observers&&attr.$$observers[name].$$scope||scope).$watch(interpolateFn,function(newValue,oldValue){"class"===name&&newValue!=oldValue?attr.$updateClass(newValue,oldValue):attr.$set(name,newValue)}))}}}})}}function replaceWith($rootElement,elementsToRemove,newNode){var i,ii,firstElementToRemove=elementsToRemove[0],removeCount=elementsToRemove.length,parent=firstElementToRemove.parentNode;if($rootElement)for(i=0,ii=$rootElement.length;ii>i;i++)if($rootElement[i]==firstElementToRemove){$rootElement[i++]=newNode;for(var j=i,j2=j+removeCount-1,jj=$rootElement.length;jj>j;j++,j2++)jj>j2?$rootElement[j]=$rootElement[j2]:delete $rootElement[j];$rootElement.length-=removeCount-1;break}parent&&parent.replaceChild(newNode,firstElementToRemove);var fragment=document.createDocumentFragment();fragment.appendChild(firstElementToRemove),newNode[jqLite.expando]=firstElementToRemove[jqLite.expando];for(var k=1,kk=elementsToRemove.length;kk>k;k++){var element=elementsToRemove[k];jqLite(element).remove(),fragment.appendChild(element),delete elementsToRemove[k]}elementsToRemove[0]=newNode,elementsToRemove.length=1}function cloneAndAnnotateFn(fn,annotation){return extend(function(){return fn.apply(null,arguments)},fn,annotation)}var Attributes=function(element,attr){this.$$element=element,this.$attr=attr||{}};Attributes.prototype={$normalize:directiveNormalize,$addClass:function(classVal){classVal&&classVal.length>0&&$animate.addClass(this.$$element,classVal)},$removeClass:function(classVal){classVal&&classVal.length>0&&$animate.removeClass(this.$$element,classVal)},$updateClass:function(newClasses,oldClasses){var toAdd=tokenDifference(newClasses,oldClasses),toRemove=tokenDifference(oldClasses,newClasses);0===toAdd.length?$animate.removeClass(this.$$element,toRemove):0===toRemove.length?$animate.addClass(this.$$element,toAdd):$animate.setClass(this.$$element,toAdd,toRemove)},$set:function(key,value,writeAttr,attrName){var nodeName,booleanKey=getBooleanAttrName(this.$$element[0],key);booleanKey&&(this.$$element.prop(key,value),attrName=booleanKey),this[key]=value,attrName?this.$attr[key]=attrName:(attrName=this.$attr[key],attrName||(this.$attr[key]=attrName=snake_case(key,"-"))),nodeName=nodeName_(this.$$element),("A"===nodeName&&"href"===key||"IMG"===nodeName&&"src"===key)&&(this[key]=value=$$sanitizeUri(value,"src"===key)),writeAttr!==!1&&(null===value||value===undefined?this.$$element.removeAttr(attrName):this.$$element.attr(attrName,value));var $$observers=this.$$observers;$$observers&&forEach($$observers[key],function(fn){try{fn(value)}catch(e){$exceptionHandler(e)}})},$observe:function(key,fn){var attrs=this,$$observers=attrs.$$observers||(attrs.$$observers={}),listeners=$$observers[key]||($$observers[key]=[]);return listeners.push(fn),$rootScope.$evalAsync(function(){listeners.$$inter||fn(attrs[key])
}),fn}};var startSymbol=$interpolate.startSymbol(),endSymbol=$interpolate.endSymbol(),denormalizeTemplate="{{"==startSymbol||"}}"==endSymbol?identity:function(template){return template.replace(/\{\{/g,startSymbol).replace(/}}/g,endSymbol)},NG_ATTR_BINDING=/^ngAttr[A-Z]/;return compile}]}function directiveNormalize(name){return camelCase(name.replace(PREFIX_REGEXP,""))}function tokenDifference(str1,str2){var values="",tokens1=str1.split(/\s+/),tokens2=str2.split(/\s+/);outer:for(var i=0;i<tokens1.length;i++){for(var token=tokens1[i],j=0;j<tokens2.length;j++)if(token==tokens2[j])continue outer;values+=(values.length>0?" ":"")+token}return values}function $ControllerProvider(){var controllers={},CNTRL_REG=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(name,constructor){assertNotHasOwnProperty(name,"controller"),isObject(name)?extend(controllers,name):controllers[name]=constructor},this.$get=["$injector","$window",function($injector,$window){return function(expression,locals){var instance,match,constructor,identifier;if(isString(expression)&&(match=expression.match(CNTRL_REG),constructor=match[1],identifier=match[3],expression=controllers.hasOwnProperty(constructor)?controllers[constructor]:getter(locals.$scope,constructor,!0)||getter($window,constructor,!0),assertArgFn(expression,constructor,!0)),instance=$injector.instantiate(expression,locals),identifier){if(!locals||"object"!=typeof locals.$scope)throw minErr("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",constructor||expression.name,identifier);locals.$scope[identifier]=instance}return instance}}]}function $DocumentProvider(){this.$get=["$window",function(window){return jqLite(window.document)}]}function $ExceptionHandlerProvider(){this.$get=["$log",function($log){return function(){$log.error.apply($log,arguments)}}]}function parseHeaders(headers){var key,val,i,parsed={};return headers?(forEach(headers.split("\n"),function(line){i=line.indexOf(":"),key=lowercase(trim(line.substr(0,i))),val=trim(line.substr(i+1)),key&&(parsed[key]?parsed[key]+=", "+val:parsed[key]=val)}),parsed):parsed}function headersGetter(headers){var headersObj=isObject(headers)?headers:undefined;return function(name){return headersObj||(headersObj=parseHeaders(headers)),name?headersObj[lowercase(name)]||null:headersObj}}function transformData(data,headers,fns){return isFunction(fns)?fns(data,headers):(forEach(fns,function(fn){data=fn(data,headers)}),data)}function isSuccess(status){return status>=200&&300>status}function $HttpProvider(){var JSON_START=/^\s*(\[|\{[^\{])/,JSON_END=/[\}\]]\s*$/,PROTECTION_PREFIX=/^\)\]\}',?\n/,CONTENT_TYPE_APPLICATION_JSON={"Content-Type":"application/json;charset=utf-8"},defaults=this.defaults={transformResponse:[function(data){return isString(data)&&(data=data.replace(PROTECTION_PREFIX,""),JSON_START.test(data)&&JSON_END.test(data)&&(data=fromJson(data))),data}],transformRequest:[function(d){return!isObject(d)||isFile(d)||isBlob(d)?d:toJson(d)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:copy(CONTENT_TYPE_APPLICATION_JSON),put:copy(CONTENT_TYPE_APPLICATION_JSON),patch:copy(CONTENT_TYPE_APPLICATION_JSON)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},interceptorFactories=this.interceptors=[],responseInterceptorFactories=this.responseInterceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function($httpBackend,$browser,$cacheFactory,$rootScope,$q,$injector){function $http(requestConfig){function transformResponse(response){var resp=extend({},response,{data:transformData(response.data,response.headers,config.transformResponse)});return isSuccess(response.status)?resp:$q.reject(resp)}function mergeHeaders(config){function execHeaders(headers){var headerContent;forEach(headers,function(headerFn,header){isFunction(headerFn)&&(headerContent=headerFn(),null!=headerContent?headers[header]=headerContent:delete headers[header])})}var defHeaderName,lowercaseDefHeaderName,reqHeaderName,defHeaders=defaults.headers,reqHeaders=extend({},config.headers);defHeaders=extend({},defHeaders.common,defHeaders[lowercase(config.method)]),execHeaders(defHeaders),execHeaders(reqHeaders);defaultHeadersIteration:for(defHeaderName in defHeaders){lowercaseDefHeaderName=lowercase(defHeaderName);for(reqHeaderName in reqHeaders)if(lowercase(reqHeaderName)===lowercaseDefHeaderName)continue defaultHeadersIteration;reqHeaders[defHeaderName]=defHeaders[defHeaderName]}return reqHeaders}var config={method:"get",transformRequest:defaults.transformRequest,transformResponse:defaults.transformResponse},headers=mergeHeaders(requestConfig);extend(config,requestConfig),config.headers=headers,config.method=uppercase(config.method);var xsrfValue=urlIsSameOrigin(config.url)?$browser.cookies()[config.xsrfCookieName||defaults.xsrfCookieName]:undefined;xsrfValue&&(headers[config.xsrfHeaderName||defaults.xsrfHeaderName]=xsrfValue);var serverRequest=function(config){headers=config.headers;var reqData=transformData(config.data,headersGetter(headers),config.transformRequest);return isUndefined(config.data)&&forEach(headers,function(value,header){"content-type"===lowercase(header)&&delete headers[header]}),isUndefined(config.withCredentials)&&!isUndefined(defaults.withCredentials)&&(config.withCredentials=defaults.withCredentials),sendReq(config,reqData,headers).then(transformResponse,transformResponse)},chain=[serverRequest,undefined],promise=$q.when(config);for(forEach(reversedInterceptors,function(interceptor){(interceptor.request||interceptor.requestError)&&chain.unshift(interceptor.request,interceptor.requestError),(interceptor.response||interceptor.responseError)&&chain.push(interceptor.response,interceptor.responseError)});chain.length;){var thenFn=chain.shift(),rejectFn=chain.shift();promise=promise.then(thenFn,rejectFn)}return promise.success=function(fn){return promise.then(function(response){fn(response.data,response.status,response.headers,config)}),promise},promise.error=function(fn){return promise.then(null,function(response){fn(response.data,response.status,response.headers,config)}),promise},promise}function createShortMethods(){forEach(arguments,function(name){$http[name]=function(url,config){return $http(extend(config||{},{method:name,url:url}))}})}function createShortMethodsWithData(){forEach(arguments,function(name){$http[name]=function(url,data,config){return $http(extend(config||{},{method:name,url:url,data:data}))}})}function sendReq(config,reqData,reqHeaders){function done(status,response,headersString,statusText){cache&&(isSuccess(status)?cache.put(url,[status,response,parseHeaders(headersString),statusText]):cache.remove(url)),resolvePromise(response,status,headersString,statusText),$rootScope.$$phase||$rootScope.$apply()}function resolvePromise(response,status,headers,statusText){status=Math.max(status,0),(isSuccess(status)?deferred.resolve:deferred.reject)({data:response,status:status,headers:headersGetter(headers),config:config,statusText:statusText})}function removePendingReq(){var idx=indexOf($http.pendingRequests,config);-1!==idx&&$http.pendingRequests.splice(idx,1)}var cache,cachedResp,deferred=$q.defer(),promise=deferred.promise,url=buildUrl(config.url,config.params);if($http.pendingRequests.push(config),promise.then(removePendingReq,removePendingReq),(config.cache||defaults.cache)&&config.cache!==!1&&"GET"==config.method&&(cache=isObject(config.cache)?config.cache:isObject(defaults.cache)?defaults.cache:defaultCache),cache)if(cachedResp=cache.get(url),isDefined(cachedResp)){if(cachedResp.then)return cachedResp.then(removePendingReq,removePendingReq),cachedResp;isArray(cachedResp)?resolvePromise(cachedResp[1],cachedResp[0],copy(cachedResp[2]),cachedResp[3]):resolvePromise(cachedResp,200,{},"OK")}else cache.put(url,promise);return isUndefined(cachedResp)&&$httpBackend(config.method,url,reqData,done,reqHeaders,config.timeout,config.withCredentials,config.responseType),promise}function buildUrl(url,params){if(!params)return url;var parts=[];return forEachSorted(params,function(value,key){null===value||isUndefined(value)||(isArray(value)||(value=[value]),forEach(value,function(v){isObject(v)&&(v=toJson(v)),parts.push(encodeUriQuery(key)+"="+encodeUriQuery(v))}))}),parts.length>0&&(url+=(-1==url.indexOf("?")?"?":"&")+parts.join("&")),url}var defaultCache=$cacheFactory("$http"),reversedInterceptors=[];return forEach(interceptorFactories,function(interceptorFactory){reversedInterceptors.unshift(isString(interceptorFactory)?$injector.get(interceptorFactory):$injector.invoke(interceptorFactory))}),forEach(responseInterceptorFactories,function(interceptorFactory,index){var responseFn=isString(interceptorFactory)?$injector.get(interceptorFactory):$injector.invoke(interceptorFactory);reversedInterceptors.splice(index,0,{response:function(response){return responseFn($q.when(response))},responseError:function(response){return responseFn($q.reject(response))}})}),$http.pendingRequests=[],createShortMethods("get","delete","head","jsonp"),createShortMethodsWithData("post","put"),$http.defaults=defaults,$http}]}function createXhr(method){if(8>=msie&&(!method.match(/^(get|post|head|put|delete|options)$/i)||!window.XMLHttpRequest))return new window.ActiveXObject("Microsoft.XMLHTTP");if(window.XMLHttpRequest)return new window.XMLHttpRequest;throw minErr("$httpBackend")("noxhr","This browser does not support XMLHttpRequest.")}function $HttpBackendProvider(){this.$get=["$browser","$window","$document",function($browser,$window,$document){return createHttpBackend($browser,createXhr,$browser.defer,$window.angular.callbacks,$document[0])}]}function createHttpBackend($browser,createXhr,$browserDefer,callbacks,rawDocument){function jsonpReq(url,done){var script=rawDocument.createElement("script"),doneWrapper=function(){script.onreadystatechange=script.onload=script.onerror=null,rawDocument.body.removeChild(script),done&&done()};return script.type="text/javascript",script.src=url,msie&&8>=msie?script.onreadystatechange=function(){/loaded|complete/.test(script.readyState)&&doneWrapper()}:script.onload=script.onerror=function(){doneWrapper()},rawDocument.body.appendChild(script),doneWrapper}var ABORTED=-1;return function(method,url,post,callback,headers,timeout,withCredentials,responseType){function timeoutRequest(){status=ABORTED,jsonpDone&&jsonpDone(),xhr&&xhr.abort()}function completeRequest(callback,status,response,headersString,statusText){timeoutId&&$browserDefer.cancel(timeoutId),jsonpDone=xhr=null,0===status&&(status=response?200:"file"==urlResolve(url).protocol?404:0),status=1223===status?204:status,statusText=statusText||"",callback(status,response,headersString,statusText),$browser.$$completeOutstandingRequest(noop)}var status;if($browser.$$incOutstandingRequestCount(),url=url||$browser.url(),"jsonp"==lowercase(method)){var callbackId="_"+(callbacks.counter++).toString(36);callbacks[callbackId]=function(data){callbacks[callbackId].data=data};var jsonpDone=jsonpReq(url.replace("JSON_CALLBACK","angular.callbacks."+callbackId),function(){callbacks[callbackId].data?completeRequest(callback,200,callbacks[callbackId].data):completeRequest(callback,status||-2),callbacks[callbackId]=angular.noop})}else{var xhr=createXhr(method);if(xhr.open(method,url,!0),forEach(headers,function(value,key){isDefined(value)&&xhr.setRequestHeader(key,value)}),xhr.onreadystatechange=function(){if(xhr&&4==xhr.readyState){var responseHeaders=null,response=null;status!==ABORTED&&(responseHeaders=xhr.getAllResponseHeaders(),response="response"in xhr?xhr.response:xhr.responseText),completeRequest(callback,status||xhr.status,response,responseHeaders,xhr.statusText||"")}},withCredentials&&(xhr.withCredentials=!0),responseType)try{xhr.responseType=responseType}catch(e){if("json"!==responseType)throw e}xhr.send(post||null)}if(timeout>0)var timeoutId=$browserDefer(timeoutRequest,timeout);else timeout&&timeout.then&&timeout.then(timeoutRequest)}}function $InterpolateProvider(){var startSymbol="{{",endSymbol="}}";this.startSymbol=function(value){return value?(startSymbol=value,this):startSymbol},this.endSymbol=function(value){return value?(endSymbol=value,this):endSymbol},this.$get=["$parse","$exceptionHandler","$sce",function($parse,$exceptionHandler,$sce){function $interpolate(text,mustHaveExpression,trustedContext){for(var startIndex,endIndex,fn,exp,index=0,parts=[],length=text.length,hasInterpolation=!1,concat=[];length>index;)-1!=(startIndex=text.indexOf(startSymbol,index))&&-1!=(endIndex=text.indexOf(endSymbol,startIndex+startSymbolLength))?(index!=startIndex&&parts.push(text.substring(index,startIndex)),parts.push(fn=$parse(exp=text.substring(startIndex+startSymbolLength,endIndex))),fn.exp=exp,index=endIndex+endSymbolLength,hasInterpolation=!0):(index!=length&&parts.push(text.substring(index)),index=length);if((length=parts.length)||(parts.push(""),length=1),trustedContext&&parts.length>1)throw $interpolateMinErr("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",text);return!mustHaveExpression||hasInterpolation?(concat.length=length,fn=function(context){try{for(var part,i=0,ii=length;ii>i;i++)"function"==typeof(part=parts[i])&&(part=part(context),part=trustedContext?$sce.getTrusted(trustedContext,part):$sce.valueOf(part),null===part||isUndefined(part)?part="":"string"!=typeof part&&(part=toJson(part))),concat[i]=part;return concat.join("")}catch(err){var newErr=$interpolateMinErr("interr","Can't interpolate: {0}\n{1}",text,err.toString());$exceptionHandler(newErr)}},fn.exp=text,fn.parts=parts,fn):void 0}var startSymbolLength=startSymbol.length,endSymbolLength=endSymbol.length;return $interpolate.startSymbol=function(){return startSymbol},$interpolate.endSymbol=function(){return endSymbol},$interpolate}]}function $IntervalProvider(){this.$get=["$rootScope","$window","$q",function($rootScope,$window,$q){function interval(fn,delay,count,invokeApply){var setInterval=$window.setInterval,clearInterval=$window.clearInterval,deferred=$q.defer(),promise=deferred.promise,iteration=0,skipApply=isDefined(invokeApply)&&!invokeApply;return count=isDefined(count)?count:0,promise.then(null,null,fn),promise.$$intervalId=setInterval(function(){deferred.notify(iteration++),count>0&&iteration>=count&&(deferred.resolve(iteration),clearInterval(promise.$$intervalId),delete intervals[promise.$$intervalId]),skipApply||$rootScope.$apply()},delay),intervals[promise.$$intervalId]=deferred,promise}var intervals={};return interval.cancel=function(promise){return promise&&promise.$$intervalId in intervals?(intervals[promise.$$intervalId].reject("canceled"),clearInterval(promise.$$intervalId),delete intervals[promise.$$intervalId],!0):!1},interval}]}function $LocaleProvider(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"",posSuf:"",negPre:"(",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),SHORTMONTH:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),DAY:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),SHORTDAY:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},pluralCat:function(num){return 1===num?"one":"other"}}}}function encodePath(path){for(var segments=path.split("/"),i=segments.length;i--;)segments[i]=encodeUriSegment(segments[i]);return segments.join("/")}function parseAbsoluteUrl(absoluteUrl,locationObj,appBase){var parsedUrl=urlResolve(absoluteUrl,appBase);locationObj.$$protocol=parsedUrl.protocol,locationObj.$$host=parsedUrl.hostname,locationObj.$$port=int(parsedUrl.port)||DEFAULT_PORTS[parsedUrl.protocol]||null}function parseAppUrl(relativeUrl,locationObj,appBase){var prefixed="/"!==relativeUrl.charAt(0);prefixed&&(relativeUrl="/"+relativeUrl);var match=urlResolve(relativeUrl,appBase);locationObj.$$path=decodeURIComponent(prefixed&&"/"===match.pathname.charAt(0)?match.pathname.substring(1):match.pathname),locationObj.$$search=parseKeyValue(match.search),locationObj.$$hash=decodeURIComponent(match.hash),locationObj.$$path&&"/"!=locationObj.$$path.charAt(0)&&(locationObj.$$path="/"+locationObj.$$path)}function beginsWith(begin,whole){return 0===whole.indexOf(begin)?whole.substr(begin.length):void 0}function stripHash(url){var index=url.indexOf("#");return-1==index?url:url.substr(0,index)}function stripFile(url){return url.substr(0,stripHash(url).lastIndexOf("/")+1)}function serverBase(url){return url.substring(0,url.indexOf("/",url.indexOf("//")+2))}function LocationHtml5Url(appBase,basePrefix){this.$$html5=!0,basePrefix=basePrefix||"";var appBaseNoFile=stripFile(appBase);parseAbsoluteUrl(appBase,this,appBase),this.$$parse=function(url){var pathUrl=beginsWith(appBaseNoFile,url);if(!isString(pathUrl))throw $locationMinErr("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',url,appBaseNoFile);parseAppUrl(pathUrl,this,appBase),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var search=toKeyValue(this.$$search),hash=this.$$hash?"#"+encodeUriSegment(this.$$hash):"";this.$$url=encodePath(this.$$path)+(search?"?"+search:"")+hash,this.$$absUrl=appBaseNoFile+this.$$url.substr(1)},this.$$rewrite=function(url){var appUrl,prevAppUrl;return(appUrl=beginsWith(appBase,url))!==undefined?(prevAppUrl=appUrl,(appUrl=beginsWith(basePrefix,appUrl))!==undefined?appBaseNoFile+(beginsWith("/",appUrl)||appUrl):appBase+prevAppUrl):(appUrl=beginsWith(appBaseNoFile,url))!==undefined?appBaseNoFile+appUrl:appBaseNoFile==url+"/"?appBaseNoFile:void 0}}function LocationHashbangUrl(appBase,hashPrefix){var appBaseNoFile=stripFile(appBase);parseAbsoluteUrl(appBase,this,appBase),this.$$parse=function(url){function removeWindowsDriveName(path,url,base){var firstPathSegmentMatch,windowsFilePathExp=/^\/?.*?:(\/.*)/;return 0===url.indexOf(base)&&(url=url.replace(base,"")),windowsFilePathExp.exec(url)?path:(firstPathSegmentMatch=windowsFilePathExp.exec(path),firstPathSegmentMatch?firstPathSegmentMatch[1]:path)}var withoutBaseUrl=beginsWith(appBase,url)||beginsWith(appBaseNoFile,url),withoutHashUrl="#"==withoutBaseUrl.charAt(0)?beginsWith(hashPrefix,withoutBaseUrl):this.$$html5?withoutBaseUrl:"";if(!isString(withoutHashUrl))throw $locationMinErr("ihshprfx",'Invalid url "{0}", missing hash prefix "{1}".',url,hashPrefix);parseAppUrl(withoutHashUrl,this,appBase),this.$$path=removeWindowsDriveName(this.$$path,withoutHashUrl,appBase),this.$$compose()},this.$$compose=function(){var search=toKeyValue(this.$$search),hash=this.$$hash?"#"+encodeUriSegment(this.$$hash):"";this.$$url=encodePath(this.$$path)+(search?"?"+search:"")+hash,this.$$absUrl=appBase+(this.$$url?hashPrefix+this.$$url:"")},this.$$rewrite=function(url){return stripHash(appBase)==stripHash(url)?url:void 0}}function LocationHashbangInHtml5Url(appBase,hashPrefix){this.$$html5=!0,LocationHashbangUrl.apply(this,arguments);var appBaseNoFile=stripFile(appBase);this.$$rewrite=function(url){var appUrl;return appBase==stripHash(url)?url:(appUrl=beginsWith(appBaseNoFile,url))?appBase+hashPrefix+appUrl:appBaseNoFile===url+"/"?appBaseNoFile:void 0}}function locationGetter(property){return function(){return this[property]}}function locationGetterSetter(property,preprocess){return function(value){return isUndefined(value)?this[property]:(this[property]=preprocess(value),this.$$compose(),this)}}function $LocationProvider(){var hashPrefix="",html5Mode=!1;this.hashPrefix=function(prefix){return isDefined(prefix)?(hashPrefix=prefix,this):hashPrefix},this.html5Mode=function(mode){return isDefined(mode)?(html5Mode=mode,this):html5Mode},this.$get=["$rootScope","$browser","$sniffer","$rootElement",function($rootScope,$browser,$sniffer,$rootElement){function afterLocationChange(oldUrl){$rootScope.$broadcast("$locationChangeSuccess",$location.absUrl(),oldUrl)}var $location,LocationMode,appBase,baseHref=$browser.baseHref(),initialUrl=$browser.url();html5Mode?(appBase=serverBase(initialUrl)+(baseHref||"/"),LocationMode=$sniffer.history?LocationHtml5Url:LocationHashbangInHtml5Url):(appBase=stripHash(initialUrl),LocationMode=LocationHashbangUrl),$location=new LocationMode(appBase,"#"+hashPrefix),$location.$$parse($location.$$rewrite(initialUrl)),$rootElement.on("click",function(event){if(!event.ctrlKey&&!event.metaKey&&2!=event.which){for(var elm=jqLite(event.target);"a"!==lowercase(elm[0].nodeName);)if(elm[0]===$rootElement[0]||!(elm=elm.parent())[0])return;var absHref=elm.prop("href");isObject(absHref)&&"[object SVGAnimatedString]"===absHref.toString()&&(absHref=urlResolve(absHref.animVal).href);var rewrittenUrl=$location.$$rewrite(absHref);absHref&&!elm.attr("target")&&rewrittenUrl&&!event.isDefaultPrevented()&&(event.preventDefault(),rewrittenUrl!=$browser.url()&&($location.$$parse(rewrittenUrl),$rootScope.$apply(),window.angular["ff-684208-preventDefault"]=!0))}}),$location.absUrl()!=initialUrl&&$browser.url($location.absUrl(),!0),$browser.onUrlChange(function(newUrl){$location.absUrl()!=newUrl&&($rootScope.$evalAsync(function(){var oldUrl=$location.absUrl();$location.$$parse(newUrl),$rootScope.$broadcast("$locationChangeStart",newUrl,oldUrl).defaultPrevented?($location.$$parse(oldUrl),$browser.url(oldUrl)):afterLocationChange(oldUrl)}),$rootScope.$$phase||$rootScope.$digest())});var changeCounter=0;return $rootScope.$watch(function(){var oldUrl=$browser.url(),currentReplace=$location.$$replace;return changeCounter&&oldUrl==$location.absUrl()||(changeCounter++,$rootScope.$evalAsync(function(){$rootScope.$broadcast("$locationChangeStart",$location.absUrl(),oldUrl).defaultPrevented?$location.$$parse(oldUrl):($browser.url($location.absUrl(),currentReplace),afterLocationChange(oldUrl))})),$location.$$replace=!1,changeCounter}),$location}]}function $LogProvider(){var debug=!0,self=this;this.debugEnabled=function(flag){return isDefined(flag)?(debug=flag,this):debug},this.$get=["$window",function($window){function formatError(arg){return arg instanceof Error&&(arg.stack?arg=arg.message&&-1===arg.stack.indexOf(arg.message)?"Error: "+arg.message+"\n"+arg.stack:arg.stack:arg.sourceURL&&(arg=arg.message+"\n"+arg.sourceURL+":"+arg.line)),arg}function consoleLog(type){var console=$window.console||{},logFn=console[type]||console.log||noop,hasApply=!1;try{hasApply=!!logFn.apply}catch(e){}return hasApply?function(){var args=[];return forEach(arguments,function(arg){args.push(formatError(arg))}),logFn.apply(console,args)}:function(arg1,arg2){logFn(arg1,null==arg2?"":arg2)}}return{log:consoleLog("log"),info:consoleLog("info"),warn:consoleLog("warn"),error:consoleLog("error"),debug:function(){var fn=consoleLog("debug");return function(){debug&&fn.apply(self,arguments)}}()}}]}function ensureSafeMemberName(name,fullExpression){if("constructor"===name)throw $parseMinErr("isecfld",'Referencing "constructor" field in Angular expressions is disallowed! Expression: {0}',fullExpression);return name}function ensureSafeObject(obj,fullExpression){if(obj){if(obj.constructor===obj)throw $parseMinErr("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",fullExpression);if(obj.document&&obj.location&&obj.alert&&obj.setInterval)throw $parseMinErr("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",fullExpression);if(obj.children&&(obj.nodeName||obj.prop&&obj.attr&&obj.find))throw $parseMinErr("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",fullExpression)}return obj}function setter(obj,path,setValue,fullExp,options){options=options||{};for(var key,element=path.split("."),i=0;element.length>1;i++){key=ensureSafeMemberName(element.shift(),fullExp);var propertyObj=obj[key];propertyObj||(propertyObj={},obj[key]=propertyObj),obj=propertyObj,obj.then&&options.unwrapPromises&&(promiseWarning(fullExp),"$$v"in obj||!function(promise){promise.then(function(val){promise.$$v=val})}(obj),obj.$$v===undefined&&(obj.$$v={}),obj=obj.$$v)}return key=ensureSafeMemberName(element.shift(),fullExp),obj[key]=setValue,setValue}function cspSafeGetterFn(key0,key1,key2,key3,key4,fullExp,options){return ensureSafeMemberName(key0,fullExp),ensureSafeMemberName(key1,fullExp),ensureSafeMemberName(key2,fullExp),ensureSafeMemberName(key3,fullExp),ensureSafeMemberName(key4,fullExp),options.unwrapPromises?function(scope,locals){var promise,pathVal=locals&&locals.hasOwnProperty(key0)?locals:scope;return null==pathVal?pathVal:(pathVal=pathVal[key0],pathVal&&pathVal.then&&(promiseWarning(fullExp),"$$v"in pathVal||(promise=pathVal,promise.$$v=undefined,promise.then(function(val){promise.$$v=val})),pathVal=pathVal.$$v),key1?null==pathVal?undefined:(pathVal=pathVal[key1],pathVal&&pathVal.then&&(promiseWarning(fullExp),"$$v"in pathVal||(promise=pathVal,promise.$$v=undefined,promise.then(function(val){promise.$$v=val})),pathVal=pathVal.$$v),key2?null==pathVal?undefined:(pathVal=pathVal[key2],pathVal&&pathVal.then&&(promiseWarning(fullExp),"$$v"in pathVal||(promise=pathVal,promise.$$v=undefined,promise.then(function(val){promise.$$v=val})),pathVal=pathVal.$$v),key3?null==pathVal?undefined:(pathVal=pathVal[key3],pathVal&&pathVal.then&&(promiseWarning(fullExp),"$$v"in pathVal||(promise=pathVal,promise.$$v=undefined,promise.then(function(val){promise.$$v=val})),pathVal=pathVal.$$v),key4?null==pathVal?undefined:(pathVal=pathVal[key4],pathVal&&pathVal.then&&(promiseWarning(fullExp),"$$v"in pathVal||(promise=pathVal,promise.$$v=undefined,promise.then(function(val){promise.$$v=val})),pathVal=pathVal.$$v),pathVal):pathVal):pathVal):pathVal):pathVal)}:function(scope,locals){var pathVal=locals&&locals.hasOwnProperty(key0)?locals:scope;return null==pathVal?pathVal:(pathVal=pathVal[key0],key1?null==pathVal?undefined:(pathVal=pathVal[key1],key2?null==pathVal?undefined:(pathVal=pathVal[key2],key3?null==pathVal?undefined:(pathVal=pathVal[key3],key4?null==pathVal?undefined:pathVal=pathVal[key4]:pathVal):pathVal):pathVal):pathVal)}}function simpleGetterFn1(key0,fullExp){return ensureSafeMemberName(key0,fullExp),function(scope,locals){return null==scope?undefined:(locals&&locals.hasOwnProperty(key0)?locals:scope)[key0]}}function simpleGetterFn2(key0,key1,fullExp){return ensureSafeMemberName(key0,fullExp),ensureSafeMemberName(key1,fullExp),function(scope,locals){return null==scope?undefined:(scope=(locals&&locals.hasOwnProperty(key0)?locals:scope)[key0],null==scope?undefined:scope[key1])}}function getterFn(path,options,fullExp){if(getterFnCache.hasOwnProperty(path))return getterFnCache[path];var fn,pathKeys=path.split("."),pathKeysLength=pathKeys.length;if(options.unwrapPromises||1!==pathKeysLength)if(options.unwrapPromises||2!==pathKeysLength)if(options.csp)fn=6>pathKeysLength?cspSafeGetterFn(pathKeys[0],pathKeys[1],pathKeys[2],pathKeys[3],pathKeys[4],fullExp,options):function(scope,locals){var val,i=0;do val=cspSafeGetterFn(pathKeys[i++],pathKeys[i++],pathKeys[i++],pathKeys[i++],pathKeys[i++],fullExp,options)(scope,locals),locals=undefined,scope=val;while(pathKeysLength>i);return val};else{var code="var p;\n";forEach(pathKeys,function(key,index){ensureSafeMemberName(key,fullExp),code+="if(s == null) return undefined;\ns="+(index?"s":'((k&&k.hasOwnProperty("'+key+'"))?k:s)')+'["'+key+'"];\n'+(options.unwrapPromises?'if (s && s.then) {\n pw("'+fullExp.replace(/(["\r\n])/g,"\\$1")+'");\n if (!("$$v" in s)) {\n p=s;\n p.$$v = undefined;\n p.then(function(v) {p.$$v=v;});\n}\n s=s.$$v\n}\n':"")}),code+="return s;";var evaledFnGetter=new Function("s","k","pw",code);evaledFnGetter.toString=valueFn(code),fn=options.unwrapPromises?function(scope,locals){return evaledFnGetter(scope,locals,promiseWarning)}:evaledFnGetter}else fn=simpleGetterFn2(pathKeys[0],pathKeys[1],fullExp);else fn=simpleGetterFn1(pathKeys[0],fullExp);return"hasOwnProperty"!==path&&(getterFnCache[path]=fn),fn}function $ParseProvider(){var cache={},$parseOptions={csp:!1,unwrapPromises:!1,logPromiseWarnings:!0};this.unwrapPromises=function(value){return isDefined(value)?($parseOptions.unwrapPromises=!!value,this):$parseOptions.unwrapPromises},this.logPromiseWarnings=function(value){return isDefined(value)?($parseOptions.logPromiseWarnings=value,this):$parseOptions.logPromiseWarnings},this.$get=["$filter","$sniffer","$log",function($filter,$sniffer,$log){return $parseOptions.csp=$sniffer.csp,promiseWarning=function(fullExp){$parseOptions.logPromiseWarnings&&!promiseWarningCache.hasOwnProperty(fullExp)&&(promiseWarningCache[fullExp]=!0,$log.warn("[$parse] Promise found in the expression `"+fullExp+"`. Automatic unwrapping of promises in Angular expressions is deprecated."))},function(exp){var parsedExpression;switch(typeof exp){case"string":if(cache.hasOwnProperty(exp))return cache[exp];var lexer=new Lexer($parseOptions),parser=new Parser(lexer,$filter,$parseOptions);return parsedExpression=parser.parse(exp,!1),"hasOwnProperty"!==exp&&(cache[exp]=parsedExpression),parsedExpression;case"function":return exp;default:return noop}}}]}function $QProvider(){this.$get=["$rootScope","$exceptionHandler",function($rootScope,$exceptionHandler){return qFactory(function(callback){$rootScope.$evalAsync(callback)},$exceptionHandler)}]}function qFactory(nextTick,exceptionHandler){function defaultCallback(value){return value}function defaultErrback(reason){return reject(reason)}function all(promises){var deferred=defer(),counter=0,results=isArray(promises)?[]:{};return forEach(promises,function(promise,key){counter++,ref(promise).then(function(value){results.hasOwnProperty(key)||(results[key]=value,--counter||deferred.resolve(results))},function(reason){results.hasOwnProperty(key)||deferred.reject(reason)})}),0===counter&&deferred.resolve(results),deferred.promise}var defer=function(){var value,deferred,pending=[];return deferred={resolve:function(val){if(pending){var callbacks=pending;pending=undefined,value=ref(val),callbacks.length&&nextTick(function(){for(var callback,i=0,ii=callbacks.length;ii>i;i++)callback=callbacks[i],value.then(callback[0],callback[1],callback[2])})}},reject:function(reason){deferred.resolve(createInternalRejectedPromise(reason))},notify:function(progress){if(pending){var callbacks=pending;pending.length&&nextTick(function(){for(var callback,i=0,ii=callbacks.length;ii>i;i++)callback=callbacks[i],callback[2](progress)})}},promise:{then:function(callback,errback,progressback){var result=defer(),wrappedCallback=function(value){try{result.resolve((isFunction(callback)?callback:defaultCallback)(value))}catch(e){result.reject(e),exceptionHandler(e)}},wrappedErrback=function(reason){try{result.resolve((isFunction(errback)?errback:defaultErrback)(reason))}catch(e){result.reject(e),exceptionHandler(e)}},wrappedProgressback=function(progress){try{result.notify((isFunction(progressback)?progressback:defaultCallback)(progress))}catch(e){exceptionHandler(e)}};return pending?pending.push([wrappedCallback,wrappedErrback,wrappedProgressback]):value.then(wrappedCallback,wrappedErrback,wrappedProgressback),result.promise},"catch":function(callback){return this.then(null,callback)},"finally":function(callback){function makePromise(value,resolved){var result=defer();return resolved?result.resolve(value):result.reject(value),result.promise}function handleCallback(value,isResolved){var callbackOutput=null;try{callbackOutput=(callback||defaultCallback)()}catch(e){return makePromise(e,!1)}return callbackOutput&&isFunction(callbackOutput.then)?callbackOutput.then(function(){return makePromise(value,isResolved)},function(error){return makePromise(error,!1)
}):makePromise(value,isResolved)}return this.then(function(value){return handleCallback(value,!0)},function(error){return handleCallback(error,!1)})}}}},ref=function(value){return value&&isFunction(value.then)?value:{then:function(callback){var result=defer();return nextTick(function(){result.resolve(callback(value))}),result.promise}}},reject=function(reason){var result=defer();return result.reject(reason),result.promise},createInternalRejectedPromise=function(reason){return{then:function(callback,errback){var result=defer();return nextTick(function(){try{result.resolve((isFunction(errback)?errback:defaultErrback)(reason))}catch(e){result.reject(e),exceptionHandler(e)}}),result.promise}}},when=function(value,callback,errback,progressback){var done,result=defer(),wrappedCallback=function(value){try{return(isFunction(callback)?callback:defaultCallback)(value)}catch(e){return exceptionHandler(e),reject(e)}},wrappedErrback=function(reason){try{return(isFunction(errback)?errback:defaultErrback)(reason)}catch(e){return exceptionHandler(e),reject(e)}},wrappedProgressback=function(progress){try{return(isFunction(progressback)?progressback:defaultCallback)(progress)}catch(e){exceptionHandler(e)}};return nextTick(function(){ref(value).then(function(value){done||(done=!0,result.resolve(ref(value).then(wrappedCallback,wrappedErrback,wrappedProgressback)))},function(reason){done||(done=!0,result.resolve(wrappedErrback(reason)))},function(progress){done||result.notify(wrappedProgressback(progress))})}),result.promise};return{defer:defer,reject:reject,when:when,all:all}}function $$RAFProvider(){this.$get=["$window","$timeout",function($window,$timeout){var requestAnimationFrame=$window.requestAnimationFrame||$window.webkitRequestAnimationFrame||$window.mozRequestAnimationFrame,cancelAnimationFrame=$window.cancelAnimationFrame||$window.webkitCancelAnimationFrame||$window.mozCancelAnimationFrame||$window.webkitCancelRequestAnimationFrame,rafSupported=!!requestAnimationFrame,raf=rafSupported?function(fn){var id=requestAnimationFrame(fn);return function(){cancelAnimationFrame(id)}}:function(fn){var timer=$timeout(fn,16.66,!1);return function(){$timeout.cancel(timer)}};return raf.supported=rafSupported,raf}]}function $RootScopeProvider(){var TTL=10,$rootScopeMinErr=minErr("$rootScope"),lastDirtyWatch=null;this.digestTtl=function(value){return arguments.length&&(TTL=value),TTL},this.$get=["$injector","$exceptionHandler","$parse","$browser",function($injector,$exceptionHandler,$parse,$browser){function Scope(){this.$id=nextUid(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this["this"]=this.$root=this,this.$$destroyed=!1,this.$$asyncQueue=[],this.$$postDigestQueue=[],this.$$listeners={},this.$$listenerCount={},this.$$isolateBindings={}}function beginPhase(phase){if($rootScope.$$phase)throw $rootScopeMinErr("inprog","{0} already in progress",$rootScope.$$phase);$rootScope.$$phase=phase}function clearPhase(){$rootScope.$$phase=null}function compileToFn(exp,name){var fn=$parse(exp);return assertArgFn(fn,name),fn}function decrementListenerCount(current,count,name){do current.$$listenerCount[name]-=count,0===current.$$listenerCount[name]&&delete current.$$listenerCount[name];while(current=current.$parent)}function initWatchVal(){}Scope.prototype={constructor:Scope,$new:function(isolate){var ChildScope,child;return isolate?(child=new Scope,child.$root=this.$root,child.$$asyncQueue=this.$$asyncQueue,child.$$postDigestQueue=this.$$postDigestQueue):(ChildScope=function(){},ChildScope.prototype=this,child=new ChildScope,child.$id=nextUid()),child["this"]=child,child.$$listeners={},child.$$listenerCount={},child.$parent=this,child.$$watchers=child.$$nextSibling=child.$$childHead=child.$$childTail=null,child.$$prevSibling=this.$$childTail,this.$$childHead?(this.$$childTail.$$nextSibling=child,this.$$childTail=child):this.$$childHead=this.$$childTail=child,child},$watch:function(watchExp,listener,objectEquality){var scope=this,get=compileToFn(watchExp,"watch"),array=scope.$$watchers,watcher={fn:listener,last:initWatchVal,get:get,exp:watchExp,eq:!!objectEquality};if(lastDirtyWatch=null,!isFunction(listener)){var listenFn=compileToFn(listener||noop,"listener");watcher.fn=function(newVal,oldVal,scope){listenFn(scope)}}if("string"==typeof watchExp&&get.constant){var originalFn=watcher.fn;watcher.fn=function(newVal,oldVal,scope){originalFn.call(this,newVal,oldVal,scope),arrayRemove(array,watcher)}}return array||(array=scope.$$watchers=[]),array.unshift(watcher),function(){arrayRemove(array,watcher),lastDirtyWatch=null}},$watchCollection:function(obj,listener){function $watchCollectionWatch(){newValue=objGetter(self);var newLength,key;if(isObject(newValue))if(isArrayLike(newValue)){oldValue!==internalArray&&(oldValue=internalArray,oldLength=oldValue.length=0,changeDetected++),newLength=newValue.length,oldLength!==newLength&&(changeDetected++,oldValue.length=oldLength=newLength);for(var i=0;newLength>i;i++){var bothNaN=oldValue[i]!==oldValue[i]&&newValue[i]!==newValue[i];bothNaN||oldValue[i]===newValue[i]||(changeDetected++,oldValue[i]=newValue[i])}}else{oldValue!==internalObject&&(oldValue=internalObject={},oldLength=0,changeDetected++),newLength=0;for(key in newValue)newValue.hasOwnProperty(key)&&(newLength++,oldValue.hasOwnProperty(key)?oldValue[key]!==newValue[key]&&(changeDetected++,oldValue[key]=newValue[key]):(oldLength++,oldValue[key]=newValue[key],changeDetected++));if(oldLength>newLength){changeDetected++;for(key in oldValue)oldValue.hasOwnProperty(key)&&!newValue.hasOwnProperty(key)&&(oldLength--,delete oldValue[key])}}else oldValue!==newValue&&(oldValue=newValue,changeDetected++);return changeDetected}function $watchCollectionAction(){if(initRun?(initRun=!1,listener(newValue,newValue,self)):listener(newValue,veryOldValue,self),trackVeryOldValue)if(isObject(newValue))if(isArrayLike(newValue)){veryOldValue=new Array(newValue.length);for(var i=0;i<newValue.length;i++)veryOldValue[i]=newValue[i]}else{veryOldValue={};for(var key in newValue)hasOwnProperty.call(newValue,key)&&(veryOldValue[key]=newValue[key])}else veryOldValue=newValue}var newValue,oldValue,veryOldValue,self=this,trackVeryOldValue=listener.length>1,changeDetected=0,objGetter=$parse(obj),internalArray=[],internalObject={},initRun=!0,oldLength=0;return this.$watch($watchCollectionWatch,$watchCollectionAction)},$digest:function(){var watch,value,last,watchers,length,dirty,next,current,logIdx,logMsg,asyncTask,asyncQueue=this.$$asyncQueue,postDigestQueue=this.$$postDigestQueue,ttl=TTL,target=this,watchLog=[];beginPhase("$digest"),lastDirtyWatch=null;do{for(dirty=!1,current=target;asyncQueue.length;){try{asyncTask=asyncQueue.shift(),asyncTask.scope.$eval(asyncTask.expression)}catch(e){clearPhase(),$exceptionHandler(e)}lastDirtyWatch=null}traverseScopesLoop:do{if(watchers=current.$$watchers)for(length=watchers.length;length--;)try{if(watch=watchers[length])if((value=watch.get(current))===(last=watch.last)||(watch.eq?equals(value,last):"number"==typeof value&&"number"==typeof last&&isNaN(value)&&isNaN(last))){if(watch===lastDirtyWatch){dirty=!1;break traverseScopesLoop}}else dirty=!0,lastDirtyWatch=watch,watch.last=watch.eq?copy(value):value,watch.fn(value,last===initWatchVal?value:last,current),5>ttl&&(logIdx=4-ttl,watchLog[logIdx]||(watchLog[logIdx]=[]),logMsg=isFunction(watch.exp)?"fn: "+(watch.exp.name||watch.exp.toString()):watch.exp,logMsg+="; newVal: "+toJson(value)+"; oldVal: "+toJson(last),watchLog[logIdx].push(logMsg))}catch(e){clearPhase(),$exceptionHandler(e)}if(!(next=current.$$childHead||current!==target&&current.$$nextSibling))for(;current!==target&&!(next=current.$$nextSibling);)current=current.$parent}while(current=next);if((dirty||asyncQueue.length)&&!ttl--)throw clearPhase(),$rootScopeMinErr("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",TTL,toJson(watchLog))}while(dirty||asyncQueue.length);for(clearPhase();postDigestQueue.length;)try{postDigestQueue.shift()()}catch(e){$exceptionHandler(e)}},$destroy:function(){if(!this.$$destroyed){var parent=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,this!==$rootScope&&(forEach(this.$$listenerCount,bind(null,decrementListenerCount,this)),parent.$$childHead==this&&(parent.$$childHead=this.$$nextSibling),parent.$$childTail==this&&(parent.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=null,this.$$listeners={},this.$$watchers=this.$$asyncQueue=this.$$postDigestQueue=[],this.$destroy=this.$digest=this.$apply=noop,this.$on=this.$watch=function(){return noop})}},$eval:function(expr,locals){return $parse(expr)(this,locals)},$evalAsync:function(expr){$rootScope.$$phase||$rootScope.$$asyncQueue.length||$browser.defer(function(){$rootScope.$$asyncQueue.length&&$rootScope.$digest()}),this.$$asyncQueue.push({scope:this,expression:expr})},$$postDigest:function(fn){this.$$postDigestQueue.push(fn)},$apply:function(expr){try{return beginPhase("$apply"),this.$eval(expr)}catch(e){$exceptionHandler(e)}finally{clearPhase();try{$rootScope.$digest()}catch(e){throw $exceptionHandler(e),e}}},$on:function(name,listener){var namedListeners=this.$$listeners[name];namedListeners||(this.$$listeners[name]=namedListeners=[]),namedListeners.push(listener);var current=this;do current.$$listenerCount[name]||(current.$$listenerCount[name]=0),current.$$listenerCount[name]++;while(current=current.$parent);var self=this;return function(){namedListeners[indexOf(namedListeners,listener)]=null,decrementListenerCount(self,1,name)}},$emit:function(name){var namedListeners,i,length,empty=[],scope=this,stopPropagation=!1,event={name:name,targetScope:scope,stopPropagation:function(){stopPropagation=!0},preventDefault:function(){event.defaultPrevented=!0},defaultPrevented:!1},listenerArgs=concat([event],arguments,1);do{for(namedListeners=scope.$$listeners[name]||empty,event.currentScope=scope,i=0,length=namedListeners.length;length>i;i++)if(namedListeners[i])try{namedListeners[i].apply(null,listenerArgs)}catch(e){$exceptionHandler(e)}else namedListeners.splice(i,1),i--,length--;if(stopPropagation)return event;scope=scope.$parent}while(scope);return event},$broadcast:function(name){for(var listeners,i,length,target=this,current=target,next=target,event={name:name,targetScope:target,preventDefault:function(){event.defaultPrevented=!0},defaultPrevented:!1},listenerArgs=concat([event],arguments,1);current=next;){for(event.currentScope=current,listeners=current.$$listeners[name]||[],i=0,length=listeners.length;length>i;i++)if(listeners[i])try{listeners[i].apply(null,listenerArgs)}catch(e){$exceptionHandler(e)}else listeners.splice(i,1),i--,length--;if(!(next=current.$$listenerCount[name]&&current.$$childHead||current!==target&&current.$$nextSibling))for(;current!==target&&!(next=current.$$nextSibling);)current=current.$parent}return event}};var $rootScope=new Scope;return $rootScope}]}function $$SanitizeUriProvider(){var aHrefSanitizationWhitelist=/^\s*(https?|ftp|mailto|tel|file):/,imgSrcSanitizationWhitelist=/^\s*(https?|ftp|file):|data:image\//;this.aHrefSanitizationWhitelist=function(regexp){return isDefined(regexp)?(aHrefSanitizationWhitelist=regexp,this):aHrefSanitizationWhitelist},this.imgSrcSanitizationWhitelist=function(regexp){return isDefined(regexp)?(imgSrcSanitizationWhitelist=regexp,this):imgSrcSanitizationWhitelist},this.$get=function(){return function(uri,isImage){var normalizedVal,regex=isImage?imgSrcSanitizationWhitelist:aHrefSanitizationWhitelist;return msie&&!(msie>=8)||(normalizedVal=urlResolve(uri).href,""===normalizedVal||normalizedVal.match(regex))?uri:"unsafe:"+normalizedVal}}}function escapeForRegexp(s){return s.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")}function adjustMatcher(matcher){if("self"===matcher)return matcher;if(isString(matcher)){if(matcher.indexOf("***")>-1)throw $sceMinErr("iwcard","Illegal sequence *** in string matcher.  String: {0}",matcher);return matcher=escapeForRegexp(matcher).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+matcher+"$")}if(isRegExp(matcher))return new RegExp("^"+matcher.source+"$");throw $sceMinErr("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function adjustMatchers(matchers){var adjustedMatchers=[];return isDefined(matchers)&&forEach(matchers,function(matcher){adjustedMatchers.push(adjustMatcher(matcher))}),adjustedMatchers}function $SceDelegateProvider(){this.SCE_CONTEXTS=SCE_CONTEXTS;var resourceUrlWhitelist=["self"],resourceUrlBlacklist=[];this.resourceUrlWhitelist=function(value){return arguments.length&&(resourceUrlWhitelist=adjustMatchers(value)),resourceUrlWhitelist},this.resourceUrlBlacklist=function(value){return arguments.length&&(resourceUrlBlacklist=adjustMatchers(value)),resourceUrlBlacklist},this.$get=["$injector",function($injector){function matchUrl(matcher,parsedUrl){return"self"===matcher?urlIsSameOrigin(parsedUrl):!!matcher.exec(parsedUrl.href)}function isResourceUrlAllowedByPolicy(url){var i,n,parsedUrl=urlResolve(url.toString()),allowed=!1;for(i=0,n=resourceUrlWhitelist.length;n>i;i++)if(matchUrl(resourceUrlWhitelist[i],parsedUrl)){allowed=!0;break}if(allowed)for(i=0,n=resourceUrlBlacklist.length;n>i;i++)if(matchUrl(resourceUrlBlacklist[i],parsedUrl)){allowed=!1;break}return allowed}function generateHolderType(Base){var holderType=function(trustedValue){this.$$unwrapTrustedValue=function(){return trustedValue}};return Base&&(holderType.prototype=new Base),holderType.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},holderType.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},holderType}function trustAs(type,trustedValue){var Constructor=byType.hasOwnProperty(type)?byType[type]:null;if(!Constructor)throw $sceMinErr("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",type,trustedValue);if(null===trustedValue||trustedValue===undefined||""===trustedValue)return trustedValue;if("string"!=typeof trustedValue)throw $sceMinErr("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",type);return new Constructor(trustedValue)}function valueOf(maybeTrusted){return maybeTrusted instanceof trustedValueHolderBase?maybeTrusted.$$unwrapTrustedValue():maybeTrusted}function getTrusted(type,maybeTrusted){if(null===maybeTrusted||maybeTrusted===undefined||""===maybeTrusted)return maybeTrusted;var constructor=byType.hasOwnProperty(type)?byType[type]:null;if(constructor&&maybeTrusted instanceof constructor)return maybeTrusted.$$unwrapTrustedValue();if(type===SCE_CONTEXTS.RESOURCE_URL){if(isResourceUrlAllowedByPolicy(maybeTrusted))return maybeTrusted;throw $sceMinErr("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",maybeTrusted.toString())}if(type===SCE_CONTEXTS.HTML)return htmlSanitizer(maybeTrusted);throw $sceMinErr("unsafe","Attempting to use an unsafe value in a safe context.")}var htmlSanitizer=function(){throw $sceMinErr("unsafe","Attempting to use an unsafe value in a safe context.")};$injector.has("$sanitize")&&(htmlSanitizer=$injector.get("$sanitize"));var trustedValueHolderBase=generateHolderType(),byType={};return byType[SCE_CONTEXTS.HTML]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.CSS]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.URL]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.JS]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.RESOURCE_URL]=generateHolderType(byType[SCE_CONTEXTS.URL]),{trustAs:trustAs,getTrusted:getTrusted,valueOf:valueOf}}]}function $SceProvider(){var enabled=!0;this.enabled=function(value){return arguments.length&&(enabled=!!value),enabled},this.$get=["$parse","$sniffer","$sceDelegate",function($parse,$sniffer,$sceDelegate){if(enabled&&$sniffer.msie&&$sniffer.msieDocumentMode<8)throw $sceMinErr("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 9 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var sce=copy(SCE_CONTEXTS);sce.isEnabled=function(){return enabled},sce.trustAs=$sceDelegate.trustAs,sce.getTrusted=$sceDelegate.getTrusted,sce.valueOf=$sceDelegate.valueOf,enabled||(sce.trustAs=sce.getTrusted=function(type,value){return value},sce.valueOf=identity),sce.parseAs=function(type,expr){var parsed=$parse(expr);return parsed.literal&&parsed.constant?parsed:function(self,locals){return sce.getTrusted(type,parsed(self,locals))}};var parse=sce.parseAs,getTrusted=sce.getTrusted,trustAs=sce.trustAs;return forEach(SCE_CONTEXTS,function(enumValue,name){var lName=lowercase(name);sce[camelCase("parse_as_"+lName)]=function(expr){return parse(enumValue,expr)},sce[camelCase("get_trusted_"+lName)]=function(value){return getTrusted(enumValue,value)},sce[camelCase("trust_as_"+lName)]=function(value){return trustAs(enumValue,value)}}),sce}]}function $SnifferProvider(){this.$get=["$window","$document",function($window,$document){var vendorPrefix,match,eventSupport={},android=int((/android (\d+)/.exec(lowercase(($window.navigator||{}).userAgent))||[])[1]),boxee=/Boxee/i.test(($window.navigator||{}).userAgent),document=$document[0]||{},documentMode=document.documentMode,vendorRegex=/^(Moz|webkit|O|ms)(?=[A-Z])/,bodyStyle=document.body&&document.body.style,transitions=!1,animations=!1;if(bodyStyle){for(var prop in bodyStyle)if(match=vendorRegex.exec(prop)){vendorPrefix=match[0],vendorPrefix=vendorPrefix.substr(0,1).toUpperCase()+vendorPrefix.substr(1);break}vendorPrefix||(vendorPrefix="WebkitOpacity"in bodyStyle&&"webkit"),transitions=!!("transition"in bodyStyle||vendorPrefix+"Transition"in bodyStyle),animations=!!("animation"in bodyStyle||vendorPrefix+"Animation"in bodyStyle),!android||transitions&&animations||(transitions=isString(document.body.style.webkitTransition),animations=isString(document.body.style.webkitAnimation))}return{history:!(!$window.history||!$window.history.pushState||4>android||boxee),hashchange:"onhashchange"in $window&&(!documentMode||documentMode>7),hasEvent:function(event){if("input"==event&&9==msie)return!1;if(isUndefined(eventSupport[event])){var divElm=document.createElement("div");eventSupport[event]="on"+event in divElm}return eventSupport[event]},csp:csp(),vendorPrefix:vendorPrefix,transitions:transitions,animations:animations,android:android,msie:msie,msieDocumentMode:documentMode}}]}function $TimeoutProvider(){this.$get=["$rootScope","$browser","$q","$exceptionHandler",function($rootScope,$browser,$q,$exceptionHandler){function timeout(fn,delay,invokeApply){var timeoutId,deferred=$q.defer(),promise=deferred.promise,skipApply=isDefined(invokeApply)&&!invokeApply;return timeoutId=$browser.defer(function(){try{deferred.resolve(fn())}catch(e){deferred.reject(e),$exceptionHandler(e)}finally{delete deferreds[promise.$$timeoutId]}skipApply||$rootScope.$apply()},delay),promise.$$timeoutId=timeoutId,deferreds[timeoutId]=deferred,promise}var deferreds={};return timeout.cancel=function(promise){return promise&&promise.$$timeoutId in deferreds?(deferreds[promise.$$timeoutId].reject("canceled"),delete deferreds[promise.$$timeoutId],$browser.defer.cancel(promise.$$timeoutId)):!1},timeout}]}function urlResolve(url){var href=url;return msie&&(urlParsingNode.setAttribute("href",href),href=urlParsingNode.href),urlParsingNode.setAttribute("href",href),{href:urlParsingNode.href,protocol:urlParsingNode.protocol?urlParsingNode.protocol.replace(/:$/,""):"",host:urlParsingNode.host,search:urlParsingNode.search?urlParsingNode.search.replace(/^\?/,""):"",hash:urlParsingNode.hash?urlParsingNode.hash.replace(/^#/,""):"",hostname:urlParsingNode.hostname,port:urlParsingNode.port,pathname:"/"===urlParsingNode.pathname.charAt(0)?urlParsingNode.pathname:"/"+urlParsingNode.pathname}}function urlIsSameOrigin(requestUrl){var parsed=isString(requestUrl)?urlResolve(requestUrl):requestUrl;return parsed.protocol===originUrl.protocol&&parsed.host===originUrl.host}function $WindowProvider(){this.$get=valueFn(window)}function $FilterProvider($provide){function register(name,factory){if(isObject(name)){var filters={};return forEach(name,function(filter,key){filters[key]=register(key,filter)}),filters}return $provide.factory(name+suffix,factory)}var suffix="Filter";this.register=register,this.$get=["$injector",function($injector){return function(name){return $injector.get(name+suffix)}}],register("currency",currencyFilter),register("date",dateFilter),register("filter",filterFilter),register("json",jsonFilter),register("limitTo",limitToFilter),register("lowercase",lowercaseFilter),register("number",numberFilter),register("orderBy",orderByFilter),register("uppercase",uppercaseFilter)}function filterFilter(){return function(array,expression,comparator){if(!isArray(array))return array;var comparatorType=typeof comparator,predicates=[];predicates.check=function(value){for(var j=0;j<predicates.length;j++)if(!predicates[j](value))return!1;return!0},"function"!==comparatorType&&(comparator="boolean"===comparatorType&&comparator?function(obj,text){return angular.equals(obj,text)}:function(obj,text){if(obj&&text&&"object"==typeof obj&&"object"==typeof text){for(var objKey in obj)if("$"!==objKey.charAt(0)&&hasOwnProperty.call(obj,objKey)&&comparator(obj[objKey],text[objKey]))return!0;return!1}return text=(""+text).toLowerCase(),(""+obj).toLowerCase().indexOf(text)>-1});var search=function(obj,text){if("string"==typeof text&&"!"===text.charAt(0))return!search(obj,text.substr(1));switch(typeof obj){case"boolean":case"number":case"string":return comparator(obj,text);case"object":switch(typeof text){case"object":return comparator(obj,text);default:for(var objKey in obj)if("$"!==objKey.charAt(0)&&search(obj[objKey],text))return!0}return!1;case"array":for(var i=0;i<obj.length;i++)if(search(obj[i],text))return!0;return!1;default:return!1}};switch(typeof expression){case"boolean":case"number":case"string":expression={$:expression};case"object":for(var key in expression)!function(path){"undefined"!=typeof expression[path]&&predicates.push(function(value){return search("$"==path?value:value&&value[path],expression[path])})}(key);break;case"function":predicates.push(expression);break;default:return array}for(var filtered=[],j=0;j<array.length;j++){var value=array[j];predicates.check(value)&&filtered.push(value)}return filtered}}function currencyFilter($locale){var formats=$locale.NUMBER_FORMATS;return function(amount,currencySymbol){return isUndefined(currencySymbol)&&(currencySymbol=formats.CURRENCY_SYM),formatNumber(amount,formats.PATTERNS[1],formats.GROUP_SEP,formats.DECIMAL_SEP,2).replace(/\u00A4/g,currencySymbol)}}function numberFilter($locale){var formats=$locale.NUMBER_FORMATS;return function(number,fractionSize){return formatNumber(number,formats.PATTERNS[0],formats.GROUP_SEP,formats.DECIMAL_SEP,fractionSize)}}function formatNumber(number,pattern,groupSep,decimalSep,fractionSize){if(null==number||!isFinite(number)||isObject(number))return"";var isNegative=0>number;number=Math.abs(number);var numStr=number+"",formatedText="",parts=[],hasExponent=!1;if(-1!==numStr.indexOf("e")){var match=numStr.match(/([\d\.]+)e(-?)(\d+)/);match&&"-"==match[2]&&match[3]>fractionSize+1?numStr="0":(formatedText=numStr,hasExponent=!0)}if(hasExponent)fractionSize>0&&number>-1&&1>number&&(formatedText=number.toFixed(fractionSize));else{var fractionLen=(numStr.split(DECIMAL_SEP)[1]||"").length;isUndefined(fractionSize)&&(fractionSize=Math.min(Math.max(pattern.minFrac,fractionLen),pattern.maxFrac));var pow=Math.pow(10,fractionSize);number=Math.round(number*pow)/pow;var fraction=(""+number).split(DECIMAL_SEP),whole=fraction[0];fraction=fraction[1]||"";var i,pos=0,lgroup=pattern.lgSize,group=pattern.gSize;if(whole.length>=lgroup+group)for(pos=whole.length-lgroup,i=0;pos>i;i++)(pos-i)%group===0&&0!==i&&(formatedText+=groupSep),formatedText+=whole.charAt(i);for(i=pos;i<whole.length;i++)(whole.length-i)%lgroup===0&&0!==i&&(formatedText+=groupSep),formatedText+=whole.charAt(i);for(;fraction.length<fractionSize;)fraction+="0";fractionSize&&"0"!==fractionSize&&(formatedText+=decimalSep+fraction.substr(0,fractionSize))}return parts.push(isNegative?pattern.negPre:pattern.posPre),parts.push(formatedText),parts.push(isNegative?pattern.negSuf:pattern.posSuf),parts.join("")}function padNumber(num,digits,trim){var neg="";for(0>num&&(neg="-",num=-num),num=""+num;num.length<digits;)num="0"+num;return trim&&(num=num.substr(num.length-digits)),neg+num}function dateGetter(name,size,offset,trim){return offset=offset||0,function(date){var value=date["get"+name]();return(offset>0||value>-offset)&&(value+=offset),0===value&&-12==offset&&(value=12),padNumber(value,size,trim)}}function dateStrGetter(name,shortForm){return function(date,formats){var value=date["get"+name](),get=uppercase(shortForm?"SHORT"+name:name);return formats[get][value]}}function timeZoneGetter(date){var zone=-1*date.getTimezoneOffset(),paddedZone=zone>=0?"+":"";return paddedZone+=padNumber(Math[zone>0?"floor":"ceil"](zone/60),2)+padNumber(Math.abs(zone%60),2)}function ampmGetter(date,formats){return date.getHours()<12?formats.AMPMS[0]:formats.AMPMS[1]}function dateFilter($locale){function jsonStringToDate(string){var match;if(match=string.match(R_ISO8601_STR)){var date=new Date(0),tzHour=0,tzMin=0,dateSetter=match[8]?date.setUTCFullYear:date.setFullYear,timeSetter=match[8]?date.setUTCHours:date.setHours;match[9]&&(tzHour=int(match[9]+match[10]),tzMin=int(match[9]+match[11])),dateSetter.call(date,int(match[1]),int(match[2])-1,int(match[3]));var h=int(match[4]||0)-tzHour,m=int(match[5]||0)-tzMin,s=int(match[6]||0),ms=Math.round(1e3*parseFloat("0."+(match[7]||0)));return timeSetter.call(date,h,m,s,ms),date}return string}var R_ISO8601_STR=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(date,format){var fn,match,text="",parts=[];if(format=format||"mediumDate",format=$locale.DATETIME_FORMATS[format]||format,isString(date)&&(date=NUMBER_STRING.test(date)?int(date):jsonStringToDate(date)),isNumber(date)&&(date=new Date(date)),!isDate(date))return date;for(;format;)match=DATE_FORMATS_SPLIT.exec(format),match?(parts=concat(parts,match,1),format=parts.pop()):(parts.push(format),format=null);return forEach(parts,function(value){fn=DATE_FORMATS[value],text+=fn?fn(date,$locale.DATETIME_FORMATS):value.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),text}}function jsonFilter(){return function(object){return toJson(object,!0)}}function limitToFilter(){return function(input,limit){if(!isArray(input)&&!isString(input))return input;if(limit=int(limit),isString(input))return limit?limit>=0?input.slice(0,limit):input.slice(limit,input.length):"";var i,n,out=[];for(limit>input.length?limit=input.length:limit<-input.length&&(limit=-input.length),limit>0?(i=0,n=limit):(i=input.length+limit,n=input.length);n>i;i++)out.push(input[i]);return out}}function orderByFilter($parse){return function(array,sortPredicate,reverseOrder){function comparator(o1,o2){for(var i=0;i<sortPredicate.length;i++){var comp=sortPredicate[i](o1,o2);if(0!==comp)return comp}return 0}function reverseComparator(comp,descending){return toBoolean(descending)?function(a,b){return comp(b,a)}:comp}function compare(v1,v2){var t1=typeof v1,t2=typeof v2;return t1==t2?("string"==t1&&(v1=v1.toLowerCase(),v2=v2.toLowerCase()),v1===v2?0:v2>v1?-1:1):t2>t1?-1:1}if(!isArray(array))return array;if(!sortPredicate)return array;sortPredicate=isArray(sortPredicate)?sortPredicate:[sortPredicate],sortPredicate=map(sortPredicate,function(predicate){var descending=!1,get=predicate||identity;if(isString(predicate)&&(("+"==predicate.charAt(0)||"-"==predicate.charAt(0))&&(descending="-"==predicate.charAt(0),predicate=predicate.substring(1)),get=$parse(predicate),get.constant)){var key=get();return reverseComparator(function(a,b){return compare(a[key],b[key])},descending)}return reverseComparator(function(a,b){return compare(get(a),get(b))},descending)});for(var arrayCopy=[],i=0;i<array.length;i++)arrayCopy.push(array[i]);return arrayCopy.sort(reverseComparator(comparator,reverseOrder))}}function ngDirective(directive){return isFunction(directive)&&(directive={link:directive}),directive.restrict=directive.restrict||"AC",valueFn(directive)}function FormController(element,attrs,$scope,$animate){function toggleValidCss(isValid,validationErrorKey){validationErrorKey=validationErrorKey?"-"+snake_case(validationErrorKey,"-"):"",$animate.removeClass(element,(isValid?INVALID_CLASS:VALID_CLASS)+validationErrorKey),$animate.addClass(element,(isValid?VALID_CLASS:INVALID_CLASS)+validationErrorKey)}var form=this,parentForm=element.parent().controller("form")||nullFormCtrl,invalidCount=0,errors=form.$error={},controls=[];form.$name=attrs.name||attrs.ngForm,form.$dirty=!1,form.$pristine=!0,form.$valid=!0,form.$invalid=!1,parentForm.$addControl(form),element.addClass(PRISTINE_CLASS),toggleValidCss(!0),form.$addControl=function(control){assertNotHasOwnProperty(control.$name,"input"),controls.push(control),control.$name&&(form[control.$name]=control)},form.$removeControl=function(control){control.$name&&form[control.$name]===control&&delete form[control.$name],forEach(errors,function(queue,validationToken){form.$setValidity(validationToken,!0,control)}),arrayRemove(controls,control)},form.$setValidity=function(validationToken,isValid,control){var queue=errors[validationToken];if(isValid)queue&&(arrayRemove(queue,control),queue.length||(invalidCount--,invalidCount||(toggleValidCss(isValid),form.$valid=!0,form.$invalid=!1),errors[validationToken]=!1,toggleValidCss(!0,validationToken),parentForm.$setValidity(validationToken,!0,form)));else{if(invalidCount||toggleValidCss(isValid),queue){if(includes(queue,control))return}else errors[validationToken]=queue=[],invalidCount++,toggleValidCss(!1,validationToken),parentForm.$setValidity(validationToken,!1,form);queue.push(control),form.$valid=!1,form.$invalid=!0}},form.$setDirty=function(){$animate.removeClass(element,PRISTINE_CLASS),$animate.addClass(element,DIRTY_CLASS),form.$dirty=!0,form.$pristine=!1,parentForm.$setDirty()},form.$setPristine=function(){$animate.removeClass(element,DIRTY_CLASS),$animate.addClass(element,PRISTINE_CLASS),form.$dirty=!1,form.$pristine=!0,forEach(controls,function(control){control.$setPristine()})}}function validate(ctrl,validatorName,validity,value){return ctrl.$setValidity(validatorName,validity),validity?value:undefined}function addNativeHtml5Validators(ctrl,validatorName,element){var validity=element.prop("validity");if(isObject(validity)){var validator=function(value){return ctrl.$error[validatorName]||!(validity.badInput||validity.customError||validity.typeMismatch)||validity.valueMissing?value:void ctrl.$setValidity(validatorName,!1)};ctrl.$parsers.push(validator)}}function textInputType(scope,element,attr,ctrl,$sniffer,$browser){var validity=element.prop("validity");if(!$sniffer.android){var composing=!1;element.on("compositionstart",function(){composing=!0}),element.on("compositionend",function(){composing=!1,listener()})}var listener=function(){if(!composing){var value=element.val();toBoolean(attr.ngTrim||"T")&&(value=trim(value)),(ctrl.$viewValue!==value||validity&&""===value&&!validity.valueMissing)&&(scope.$$phase?ctrl.$setViewValue(value):scope.$apply(function(){ctrl.$setViewValue(value)}))}};if($sniffer.hasEvent("input"))element.on("input",listener);else{var timeout,deferListener=function(){timeout||(timeout=$browser.defer(function(){listener(),timeout=null}))};element.on("keydown",function(event){var key=event.keyCode;
91===key||key>15&&19>key||key>=37&&40>=key||deferListener()}),$sniffer.hasEvent("paste")&&element.on("paste cut",deferListener)}element.on("change",listener),ctrl.$render=function(){element.val(ctrl.$isEmpty(ctrl.$viewValue)?"":ctrl.$viewValue)};var patternValidator,match,pattern=attr.ngPattern;if(pattern){var validateRegex=function(regexp,value){return validate(ctrl,"pattern",ctrl.$isEmpty(value)||regexp.test(value),value)};match=pattern.match(/^\/(.*)\/([gim]*)$/),match?(pattern=new RegExp(match[1],match[2]),patternValidator=function(value){return validateRegex(pattern,value)}):patternValidator=function(value){var patternObj=scope.$eval(pattern);if(!patternObj||!patternObj.test)throw minErr("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",pattern,patternObj,startingTag(element));return validateRegex(patternObj,value)},ctrl.$formatters.push(patternValidator),ctrl.$parsers.push(patternValidator)}if(attr.ngMinlength){var minlength=int(attr.ngMinlength),minLengthValidator=function(value){return validate(ctrl,"minlength",ctrl.$isEmpty(value)||value.length>=minlength,value)};ctrl.$parsers.push(minLengthValidator),ctrl.$formatters.push(minLengthValidator)}if(attr.ngMaxlength){var maxlength=int(attr.ngMaxlength),maxLengthValidator=function(value){return validate(ctrl,"maxlength",ctrl.$isEmpty(value)||value.length<=maxlength,value)};ctrl.$parsers.push(maxLengthValidator),ctrl.$formatters.push(maxLengthValidator)}}function numberInputType(scope,element,attr,ctrl,$sniffer,$browser){if(textInputType(scope,element,attr,ctrl,$sniffer,$browser),ctrl.$parsers.push(function(value){var empty=ctrl.$isEmpty(value);return empty||NUMBER_REGEXP.test(value)?(ctrl.$setValidity("number",!0),""===value?null:empty?value:parseFloat(value)):(ctrl.$setValidity("number",!1),undefined)}),addNativeHtml5Validators(ctrl,"number",element),ctrl.$formatters.push(function(value){return ctrl.$isEmpty(value)?"":""+value}),attr.min){var minValidator=function(value){var min=parseFloat(attr.min);return validate(ctrl,"min",ctrl.$isEmpty(value)||value>=min,value)};ctrl.$parsers.push(minValidator),ctrl.$formatters.push(minValidator)}if(attr.max){var maxValidator=function(value){var max=parseFloat(attr.max);return validate(ctrl,"max",ctrl.$isEmpty(value)||max>=value,value)};ctrl.$parsers.push(maxValidator),ctrl.$formatters.push(maxValidator)}ctrl.$formatters.push(function(value){return validate(ctrl,"number",ctrl.$isEmpty(value)||isNumber(value),value)})}function urlInputType(scope,element,attr,ctrl,$sniffer,$browser){textInputType(scope,element,attr,ctrl,$sniffer,$browser);var urlValidator=function(value){return validate(ctrl,"url",ctrl.$isEmpty(value)||URL_REGEXP.test(value),value)};ctrl.$formatters.push(urlValidator),ctrl.$parsers.push(urlValidator)}function emailInputType(scope,element,attr,ctrl,$sniffer,$browser){textInputType(scope,element,attr,ctrl,$sniffer,$browser);var emailValidator=function(value){return validate(ctrl,"email",ctrl.$isEmpty(value)||EMAIL_REGEXP.test(value),value)};ctrl.$formatters.push(emailValidator),ctrl.$parsers.push(emailValidator)}function radioInputType(scope,element,attr,ctrl){isUndefined(attr.name)&&element.attr("name",nextUid()),element.on("click",function(){element[0].checked&&scope.$apply(function(){ctrl.$setViewValue(attr.value)})}),ctrl.$render=function(){var value=attr.value;element[0].checked=value==ctrl.$viewValue},attr.$observe("value",ctrl.$render)}function checkboxInputType(scope,element,attr,ctrl){var trueValue=attr.ngTrueValue,falseValue=attr.ngFalseValue;isString(trueValue)||(trueValue=!0),isString(falseValue)||(falseValue=!1),element.on("click",function(){scope.$apply(function(){ctrl.$setViewValue(element[0].checked)})}),ctrl.$render=function(){element[0].checked=ctrl.$viewValue},ctrl.$isEmpty=function(value){return value!==trueValue},ctrl.$formatters.push(function(value){return value===trueValue}),ctrl.$parsers.push(function(value){return value?trueValue:falseValue})}function classDirective(name,selector){return name="ngClass"+name,["$animate",function($animate){function arrayDifference(tokens1,tokens2){var values=[];outer:for(var i=0;i<tokens1.length;i++){for(var token=tokens1[i],j=0;j<tokens2.length;j++)if(token==tokens2[j])continue outer;values.push(token)}return values}function arrayClasses(classVal){if(isArray(classVal))return classVal;if(isString(classVal))return classVal.split(" ");if(isObject(classVal)){var classes=[];return forEach(classVal,function(v,k){v&&classes.push(k)}),classes}return classVal}return{restrict:"AC",link:function(scope,element,attr){function addClasses(classes){var newClasses=digestClassCounts(classes,1);attr.$addClass(newClasses)}function removeClasses(classes){var newClasses=digestClassCounts(classes,-1);attr.$removeClass(newClasses)}function digestClassCounts(classes,count){var classCounts=element.data("$classCounts")||{},classesToUpdate=[];return forEach(classes,function(className){(count>0||classCounts[className])&&(classCounts[className]=(classCounts[className]||0)+count,classCounts[className]===+(count>0)&&classesToUpdate.push(className))}),element.data("$classCounts",classCounts),classesToUpdate.join(" ")}function updateClasses(oldClasses,newClasses){var toAdd=arrayDifference(newClasses,oldClasses),toRemove=arrayDifference(oldClasses,newClasses);toRemove=digestClassCounts(toRemove,-1),toAdd=digestClassCounts(toAdd,1),0===toAdd.length?$animate.removeClass(element,toRemove):0===toRemove.length?$animate.addClass(element,toAdd):$animate.setClass(element,toAdd,toRemove)}function ngClassWatchAction(newVal){if(selector===!0||scope.$index%2===selector){var newClasses=arrayClasses(newVal||[]);if(oldVal){if(!equals(newVal,oldVal)){var oldClasses=arrayClasses(oldVal);updateClasses(oldClasses,newClasses)}}else addClasses(newClasses)}oldVal=copy(newVal)}var oldVal;scope.$watch(attr[name],ngClassWatchAction,!0),attr.$observe("class",function(){ngClassWatchAction(scope.$eval(attr[name]))}),"ngClass"!==name&&scope.$watch("$index",function($index,old$index){var mod=1&$index;if(mod!==old$index&1){var classes=arrayClasses(scope.$eval(attr[name]));mod===selector?addClasses(classes):removeClasses(classes)}})}}}]}var lowercase=function(string){return isString(string)?string.toLowerCase():string},hasOwnProperty=Object.prototype.hasOwnProperty,uppercase=function(string){return isString(string)?string.toUpperCase():string},manualLowercase=function(s){return isString(s)?s.replace(/[A-Z]/g,function(ch){return String.fromCharCode(32|ch.charCodeAt(0))}):s},manualUppercase=function(s){return isString(s)?s.replace(/[a-z]/g,function(ch){return String.fromCharCode(-33&ch.charCodeAt(0))}):s};"i"!=="I".toLowerCase()&&(lowercase=manualLowercase,uppercase=manualUppercase);var msie,jqLite,jQuery,angularModule,nodeName_,slice=[].slice,push=[].push,toString=Object.prototype.toString,ngMinErr=minErr("ng"),angular=(window.angular,window.angular||(window.angular={})),uid=["0","0","0"];msie=int((/msie (\d+)/.exec(lowercase(navigator.userAgent))||[])[1]),isNaN(msie)&&(msie=int((/trident\/.*; rv:(\d+)/.exec(lowercase(navigator.userAgent))||[])[1])),noop.$inject=[],identity.$inject=[];var trim=function(){return String.prototype.trim?function(value){return isString(value)?value.trim():value}:function(value){return isString(value)?value.replace(/^\s\s*/,"").replace(/\s\s*$/,""):value}}();nodeName_=9>msie?function(element){return element=element.nodeName?element:element[0],element.scopeName&&"HTML"!=element.scopeName?uppercase(element.scopeName+":"+element.nodeName):element.nodeName}:function(element){return element.nodeName?element.nodeName:element[0].nodeName};var SNAKE_CASE_REGEXP=/[A-Z]/g,version={full:"1.2.16",major:1,minor:2,dot:16,codeName:"badger-enumeration"},jqCache=JQLite.cache={},jqName=JQLite.expando="ng-"+(new Date).getTime(),jqId=1,addEventListenerFn=window.document.addEventListener?function(element,type,fn){element.addEventListener(type,fn,!1)}:function(element,type,fn){element.attachEvent("on"+type,fn)},removeEventListenerFn=window.document.removeEventListener?function(element,type,fn){element.removeEventListener(type,fn,!1)}:function(element,type,fn){element.detachEvent("on"+type,fn)},SPECIAL_CHARS_REGEXP=(JQLite._data=function(node){return this.cache[node[this.expando]]||{}},/([\:\-\_]+(.))/g),MOZ_HACK_REGEXP=/^moz([A-Z])/,jqLiteMinErr=minErr("jqLite"),SINGLE_TAG_REGEXP=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,HTML_REGEXP=/<|&#?\w+;/,TAG_NAME_REGEXP=/<([\w:]+)/,XHTML_TAG_REGEXP=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,wrapMap={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};wrapMap.optgroup=wrapMap.option,wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead,wrapMap.th=wrapMap.td;var JQLitePrototype=JQLite.prototype={ready:function(fn){function trigger(){fired||(fired=!0,fn())}var fired=!1;"complete"===document.readyState?setTimeout(trigger):(this.on("DOMContentLoaded",trigger),JQLite(window).on("load",trigger))},toString:function(){var value=[];return forEach(this,function(e){value.push(""+e)}),"["+value.join(", ")+"]"},eq:function(index){return jqLite(index>=0?this[index]:this[this.length+index])},length:0,push:push,sort:[].sort,splice:[].splice},BOOLEAN_ATTR={};forEach("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(value){BOOLEAN_ATTR[lowercase(value)]=value});var BOOLEAN_ELEMENTS={};forEach("input,select,option,textarea,button,form,details".split(","),function(value){BOOLEAN_ELEMENTS[uppercase(value)]=!0}),forEach({data:jqLiteData,inheritedData:jqLiteInheritedData,scope:function(element){return jqLite(element).data("$scope")||jqLiteInheritedData(element.parentNode||element,["$isolateScope","$scope"])},isolateScope:function(element){return jqLite(element).data("$isolateScope")||jqLite(element).data("$isolateScopeNoTemplate")},controller:jqLiteController,injector:function(element){return jqLiteInheritedData(element,"$injector")},removeAttr:function(element,name){element.removeAttribute(name)},hasClass:jqLiteHasClass,css:function(element,name,value){if(name=camelCase(name),!isDefined(value)){var val;return 8>=msie&&(val=element.currentStyle&&element.currentStyle[name],""===val&&(val="auto")),val=val||element.style[name],8>=msie&&(val=""===val?undefined:val),val}element.style[name]=value},attr:function(element,name,value){var lowercasedName=lowercase(name);if(BOOLEAN_ATTR[lowercasedName]){if(!isDefined(value))return element[name]||(element.attributes.getNamedItem(name)||noop).specified?lowercasedName:undefined;value?(element[name]=!0,element.setAttribute(name,lowercasedName)):(element[name]=!1,element.removeAttribute(lowercasedName))}else if(isDefined(value))element.setAttribute(name,value);else if(element.getAttribute){var ret=element.getAttribute(name,2);return null===ret?undefined:ret}},prop:function(element,name,value){return isDefined(value)?void(element[name]=value):element[name]},text:function(){function getText(element,value){var textProp=NODE_TYPE_TEXT_PROPERTY[element.nodeType];return isUndefined(value)?textProp?element[textProp]:"":void(element[textProp]=value)}var NODE_TYPE_TEXT_PROPERTY=[];return 9>msie?(NODE_TYPE_TEXT_PROPERTY[1]="innerText",NODE_TYPE_TEXT_PROPERTY[3]="nodeValue"):NODE_TYPE_TEXT_PROPERTY[1]=NODE_TYPE_TEXT_PROPERTY[3]="textContent",getText.$dv="",getText}(),val:function(element,value){if(isUndefined(value)){if("SELECT"===nodeName_(element)&&element.multiple){var result=[];return forEach(element.options,function(option){option.selected&&result.push(option.value||option.text)}),0===result.length?null:result}return element.value}element.value=value},html:function(element,value){if(isUndefined(value))return element.innerHTML;for(var i=0,childNodes=element.childNodes;i<childNodes.length;i++)jqLiteDealoc(childNodes[i]);element.innerHTML=value},empty:jqLiteEmpty},function(fn,name){JQLite.prototype[name]=function(arg1,arg2){var i,key;if(fn!==jqLiteEmpty&&(2==fn.length&&fn!==jqLiteHasClass&&fn!==jqLiteController?arg1:arg2)===undefined){if(isObject(arg1)){for(i=0;i<this.length;i++)if(fn===jqLiteData)fn(this[i],arg1);else for(key in arg1)fn(this[i],key,arg1[key]);return this}for(var value=fn.$dv,jj=value===undefined?Math.min(this.length,1):this.length,j=0;jj>j;j++){var nodeValue=fn(this[j],arg1,arg2);value=value?value+nodeValue:nodeValue}return value}for(i=0;i<this.length;i++)fn(this[i],arg1,arg2);return this}}),forEach({removeData:jqLiteRemoveData,dealoc:jqLiteDealoc,on:function onFn(element,type,fn,unsupported){if(isDefined(unsupported))throw jqLiteMinErr("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");var events=jqLiteExpandoStore(element,"events"),handle=jqLiteExpandoStore(element,"handle");events||jqLiteExpandoStore(element,"events",events={}),handle||jqLiteExpandoStore(element,"handle",handle=createEventHandler(element,events)),forEach(type.split(" "),function(type){var eventFns=events[type];if(!eventFns){if("mouseenter"==type||"mouseleave"==type){var contains=document.body.contains||document.body.compareDocumentPosition?function(a,b){var adown=9===a.nodeType?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!(!bup||1!==bup.nodeType||!(adown.contains?adown.contains(bup):a.compareDocumentPosition&&16&a.compareDocumentPosition(bup)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1};events[type]=[];var eventmap={mouseleave:"mouseout",mouseenter:"mouseover"};onFn(element,eventmap[type],function(event){var target=this,related=event.relatedTarget;(!related||related!==target&&!contains(target,related))&&handle(event,type)})}else addEventListenerFn(element,type,handle),events[type]=[];eventFns=events[type]}eventFns.push(fn)})},off:jqLiteOff,one:function(element,type,fn){element=jqLite(element),element.on(type,function onFn(){element.off(type,fn),element.off(type,onFn)}),element.on(type,fn)},replaceWith:function(element,replaceNode){var index,parent=element.parentNode;jqLiteDealoc(element),forEach(new JQLite(replaceNode),function(node){index?parent.insertBefore(node,index.nextSibling):parent.replaceChild(node,element),index=node})},children:function(element){var children=[];return forEach(element.childNodes,function(element){1===element.nodeType&&children.push(element)}),children},contents:function(element){return element.contentDocument||element.childNodes||[]},append:function(element,node){forEach(new JQLite(node),function(child){(1===element.nodeType||11===element.nodeType)&&element.appendChild(child)})},prepend:function(element,node){if(1===element.nodeType){var index=element.firstChild;forEach(new JQLite(node),function(child){element.insertBefore(child,index)})}},wrap:function(element,wrapNode){wrapNode=jqLite(wrapNode)[0];var parent=element.parentNode;parent&&parent.replaceChild(wrapNode,element),wrapNode.appendChild(element)},remove:function(element){jqLiteDealoc(element);var parent=element.parentNode;parent&&parent.removeChild(element)},after:function(element,newElement){var index=element,parent=element.parentNode;forEach(new JQLite(newElement),function(node){parent.insertBefore(node,index.nextSibling),index=node})},addClass:jqLiteAddClass,removeClass:jqLiteRemoveClass,toggleClass:function(element,selector,condition){selector&&forEach(selector.split(" "),function(className){var classCondition=condition;isUndefined(classCondition)&&(classCondition=!jqLiteHasClass(element,className)),(classCondition?jqLiteAddClass:jqLiteRemoveClass)(element,className)})},parent:function(element){var parent=element.parentNode;return parent&&11!==parent.nodeType?parent:null},next:function(element){if(element.nextElementSibling)return element.nextElementSibling;for(var elm=element.nextSibling;null!=elm&&1!==elm.nodeType;)elm=elm.nextSibling;return elm},find:function(element,selector){return element.getElementsByTagName?element.getElementsByTagName(selector):[]},clone:jqLiteClone,triggerHandler:function(element,eventName,eventData){var eventFns=(jqLiteExpandoStore(element,"events")||{})[eventName];eventData=eventData||[];var event=[{preventDefault:noop,stopPropagation:noop}];forEach(eventFns,function(fn){fn.apply(element,event.concat(eventData))})}},function(fn,name){JQLite.prototype[name]=function(arg1,arg2,arg3){for(var value,i=0;i<this.length;i++)isUndefined(value)?(value=fn(this[i],arg1,arg2,arg3),isDefined(value)&&(value=jqLite(value))):jqLiteAddNodes(value,fn(this[i],arg1,arg2,arg3));return isDefined(value)?value:this},JQLite.prototype.bind=JQLite.prototype.on,JQLite.prototype.unbind=JQLite.prototype.off}),HashMap.prototype={put:function(key,value){this[hashKey(key)]=value},get:function(key){return this[hashKey(key)]},remove:function(key){var value=this[key=hashKey(key)];return delete this[key],value}};var FN_ARGS=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,FN_ARG_SPLIT=/,/,FN_ARG=/^\s*(_?)(\S+?)\1\s*$/,STRIP_COMMENTS=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,$injectorMinErr=minErr("$injector"),$animateMinErr=minErr("$animate"),$AnimateProvider=["$provide",function($provide){this.$$selectors={},this.register=function(name,factory){var key=name+"-animation";if(name&&"."!=name.charAt(0))throw $animateMinErr("notcsel","Expecting class selector starting with '.' got '{0}'.",name);this.$$selectors[name.substr(1)]=key,$provide.factory(key,factory)},this.classNameFilter=function(expression){return 1===arguments.length&&(this.$$classNameFilter=expression instanceof RegExp?expression:null),this.$$classNameFilter},this.$get=["$timeout","$$asyncCallback",function($timeout,$$asyncCallback){function async(fn){fn&&$$asyncCallback(fn)}return{enter:function(element,parent,after,done){after?after.after(element):(parent&&parent[0]||(parent=after.parent()),parent.append(element)),async(done)},leave:function(element,done){element.remove(),async(done)},move:function(element,parent,after,done){this.enter(element,parent,after,done)},addClass:function(element,className,done){className=isString(className)?className:isArray(className)?className.join(" "):"",forEach(element,function(element){jqLiteAddClass(element,className)}),async(done)},removeClass:function(element,className,done){className=isString(className)?className:isArray(className)?className.join(" "):"",forEach(element,function(element){jqLiteRemoveClass(element,className)}),async(done)},setClass:function(element,add,remove,done){forEach(element,function(element){jqLiteAddClass(element,add),jqLiteRemoveClass(element,remove)}),async(done)},enabled:noop}}]}],$compileMinErr=minErr("$compile");$CompileProvider.$inject=["$provide","$$sanitizeUriProvider"];var PREFIX_REGEXP=/^(x[\:\-_]|data[\:\-_])/i,$interpolateMinErr=minErr("$interpolate"),PATH_MATCH=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,DEFAULT_PORTS={http:80,https:443,ftp:21},$locationMinErr=minErr("$location");LocationHashbangInHtml5Url.prototype=LocationHashbangUrl.prototype=LocationHtml5Url.prototype={$$html5:!1,$$replace:!1,absUrl:locationGetter("$$absUrl"),url:function(url,replace){if(isUndefined(url))return this.$$url;var match=PATH_MATCH.exec(url);return match[1]&&this.path(decodeURIComponent(match[1])),(match[2]||match[1])&&this.search(match[3]||""),this.hash(match[5]||"",replace),this},protocol:locationGetter("$$protocol"),host:locationGetter("$$host"),port:locationGetter("$$port"),path:locationGetterSetter("$$path",function(path){return"/"==path.charAt(0)?path:"/"+path}),search:function(search,paramValue){switch(arguments.length){case 0:return this.$$search;case 1:if(isString(search))this.$$search=parseKeyValue(search);else{if(!isObject(search))throw $locationMinErr("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");this.$$search=search}break;default:isUndefined(paramValue)||null===paramValue?delete this.$$search[search]:this.$$search[search]=paramValue}return this.$$compose(),this},hash:locationGetterSetter("$$hash",identity),replace:function(){return this.$$replace=!0,this}};var promiseWarning,$parseMinErr=minErr("$parse"),promiseWarningCache={},OPERATORS={"null":function(){return null},"true":function(){return!0},"false":function(){return!1},undefined:noop,"+":function(self,locals,a,b){return a=a(self,locals),b=b(self,locals),isDefined(a)?isDefined(b)?a+b:a:isDefined(b)?b:undefined},"-":function(self,locals,a,b){return a=a(self,locals),b=b(self,locals),(isDefined(a)?a:0)-(isDefined(b)?b:0)},"*":function(self,locals,a,b){return a(self,locals)*b(self,locals)},"/":function(self,locals,a,b){return a(self,locals)/b(self,locals)},"%":function(self,locals,a,b){return a(self,locals)%b(self,locals)},"^":function(self,locals,a,b){return a(self,locals)^b(self,locals)},"=":noop,"===":function(self,locals,a,b){return a(self,locals)===b(self,locals)},"!==":function(self,locals,a,b){return a(self,locals)!==b(self,locals)},"==":function(self,locals,a,b){return a(self,locals)==b(self,locals)},"!=":function(self,locals,a,b){return a(self,locals)!=b(self,locals)},"<":function(self,locals,a,b){return a(self,locals)<b(self,locals)},">":function(self,locals,a,b){return a(self,locals)>b(self,locals)},"<=":function(self,locals,a,b){return a(self,locals)<=b(self,locals)},">=":function(self,locals,a,b){return a(self,locals)>=b(self,locals)},"&&":function(self,locals,a,b){return a(self,locals)&&b(self,locals)},"||":function(self,locals,a,b){return a(self,locals)||b(self,locals)},"&":function(self,locals,a,b){return a(self,locals)&b(self,locals)},"|":function(self,locals,a,b){return b(self,locals)(self,locals,a(self,locals))},"!":function(self,locals,a){return!a(self,locals)}},ESCAPE={n:"\n",f:"\f",r:"\r",t:"	",v:"","'":"'",'"':'"'},Lexer=function(options){this.options=options};Lexer.prototype={constructor:Lexer,lex:function(text){this.text=text,this.index=0,this.ch=undefined,this.lastCh=":",this.tokens=[];for(var token,json=[];this.index<this.text.length;){if(this.ch=this.text.charAt(this.index),this.is("\"'"))this.readString(this.ch);else if(this.isNumber(this.ch)||this.is(".")&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(this.ch))this.readIdent(),this.was("{,")&&"{"===json[0]&&(token=this.tokens[this.tokens.length-1])&&(token.json=-1===token.text.indexOf("."));else if(this.is("(){}[].,;:?"))this.tokens.push({index:this.index,text:this.ch,json:this.was(":[,")&&this.is("{[")||this.is("}]:,")}),this.is("{[")&&json.unshift(this.ch),this.is("}]")&&json.shift(),this.index++;else{if(this.isWhitespace(this.ch)){this.index++;continue}var ch2=this.ch+this.peek(),ch3=ch2+this.peek(2),fn=OPERATORS[this.ch],fn2=OPERATORS[ch2],fn3=OPERATORS[ch3];fn3?(this.tokens.push({index:this.index,text:ch3,fn:fn3}),this.index+=3):fn2?(this.tokens.push({index:this.index,text:ch2,fn:fn2}),this.index+=2):fn?(this.tokens.push({index:this.index,text:this.ch,fn:fn,json:this.was("[,:")&&this.is("+-")}),this.index+=1):this.throwError("Unexpected next character ",this.index,this.index+1)}this.lastCh=this.ch}return this.tokens},is:function(chars){return-1!==chars.indexOf(this.ch)},was:function(chars){return-1!==chars.indexOf(this.lastCh)},peek:function(i){var num=i||1;return this.index+num<this.text.length?this.text.charAt(this.index+num):!1},isNumber:function(ch){return ch>="0"&&"9">=ch},isWhitespace:function(ch){return" "===ch||"\r"===ch||"	"===ch||"\n"===ch||""===ch||""===ch},isIdent:function(ch){return ch>="a"&&"z">=ch||ch>="A"&&"Z">=ch||"_"===ch||"$"===ch},isExpOperator:function(ch){return"-"===ch||"+"===ch||this.isNumber(ch)},throwError:function(error,start,end){end=end||this.index;var colStr=isDefined(start)?"s "+start+"-"+this.index+" ["+this.text.substring(start,end)+"]":" "+end;throw $parseMinErr("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",error,colStr,this.text)},readNumber:function(){for(var number="",start=this.index;this.index<this.text.length;){var ch=lowercase(this.text.charAt(this.index));if("."==ch||this.isNumber(ch))number+=ch;else{var peekCh=this.peek();if("e"==ch&&this.isExpOperator(peekCh))number+=ch;else if(this.isExpOperator(ch)&&peekCh&&this.isNumber(peekCh)&&"e"==number.charAt(number.length-1))number+=ch;else{if(!this.isExpOperator(ch)||peekCh&&this.isNumber(peekCh)||"e"!=number.charAt(number.length-1))break;this.throwError("Invalid exponent")}}this.index++}number=1*number,this.tokens.push({index:start,text:number,json:!0,fn:function(){return number}})},readIdent:function(){for(var lastDot,peekIndex,methodName,ch,parser=this,ident="",start=this.index;this.index<this.text.length&&(ch=this.text.charAt(this.index),"."===ch||this.isIdent(ch)||this.isNumber(ch));)"."===ch&&(lastDot=this.index),ident+=ch,this.index++;if(lastDot)for(peekIndex=this.index;peekIndex<this.text.length;){if(ch=this.text.charAt(peekIndex),"("===ch){methodName=ident.substr(lastDot-start+1),ident=ident.substr(0,lastDot-start),this.index=peekIndex;break}if(!this.isWhitespace(ch))break;peekIndex++}var token={index:start,text:ident};if(OPERATORS.hasOwnProperty(ident))token.fn=OPERATORS[ident],token.json=OPERATORS[ident];else{var getter=getterFn(ident,this.options,this.text);token.fn=extend(function(self,locals){return getter(self,locals)},{assign:function(self,value){return setter(self,ident,value,parser.text,parser.options)}})}this.tokens.push(token),methodName&&(this.tokens.push({index:lastDot,text:".",json:!1}),this.tokens.push({index:lastDot+1,text:methodName,json:!1}))},readString:function(quote){var start=this.index;this.index++;for(var string="",rawString=quote,escape=!1;this.index<this.text.length;){var ch=this.text.charAt(this.index);if(rawString+=ch,escape){if("u"===ch){var hex=this.text.substring(this.index+1,this.index+5);hex.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+hex+"]"),this.index+=4,string+=String.fromCharCode(parseInt(hex,16))}else{var rep=ESCAPE[ch];string+=rep?rep:ch}escape=!1}else if("\\"===ch)escape=!0;else{if(ch===quote)return this.index++,void this.tokens.push({index:start,text:rawString,string:string,json:!0,fn:function(){return string}});string+=ch}this.index++}this.throwError("Unterminated quote",start)}};var Parser=function(lexer,$filter,options){this.lexer=lexer,this.$filter=$filter,this.options=options};Parser.ZERO=extend(function(){return 0},{constant:!0}),Parser.prototype={constructor:Parser,parse:function(text,json){this.text=text,this.json=json,this.tokens=this.lexer.lex(text),json&&(this.assignment=this.logicalOR,this.functionCall=this.fieldAccess=this.objectIndex=this.filterChain=function(){this.throwError("is not valid json",{text:text,index:0})});var value=json?this.primary():this.statements();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),value.literal=!!value.literal,value.constant=!!value.constant,value},primary:function(){var primary;if(this.expect("("))primary=this.filterChain(),this.consume(")");else if(this.expect("["))primary=this.arrayDeclaration();else if(this.expect("{"))primary=this.object();else{var token=this.expect();primary=token.fn,primary||this.throwError("not a primary expression",token),token.json&&(primary.constant=!0,primary.literal=!0)}for(var next,context;next=this.expect("(","[",".");)"("===next.text?(primary=this.functionCall(primary,context),context=null):"["===next.text?(context=primary,primary=this.objectIndex(primary)):"."===next.text?(context=primary,primary=this.fieldAccess(primary)):this.throwError("IMPOSSIBLE");return primary},throwError:function(msg,token){throw $parseMinErr("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",token.text,msg,token.index+1,this.text,this.text.substring(token.index))},peekToken:function(){if(0===this.tokens.length)throw $parseMinErr("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e1,e2,e3,e4){if(this.tokens.length>0){var token=this.tokens[0],t=token.text;if(t===e1||t===e2||t===e3||t===e4||!e1&&!e2&&!e3&&!e4)return token}return!1},expect:function(e1,e2,e3,e4){var token=this.peek(e1,e2,e3,e4);return token?(this.json&&!token.json&&this.throwError("is not valid json",token),this.tokens.shift(),token):!1},consume:function(e1){this.expect(e1)||this.throwError("is unexpected, expecting ["+e1+"]",this.peek())},unaryFn:function(fn,right){return extend(function(self,locals){return fn(self,locals,right)},{constant:right.constant})},ternaryFn:function(left,middle,right){return extend(function(self,locals){return left(self,locals)?middle(self,locals):right(self,locals)},{constant:left.constant&&middle.constant&&right.constant})},binaryFn:function(left,fn,right){return extend(function(self,locals){return fn(self,locals,left,right)},{constant:left.constant&&right.constant})},statements:function(){for(var statements=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&statements.push(this.filterChain()),!this.expect(";"))return 1===statements.length?statements[0]:function(self,locals){for(var value,i=0;i<statements.length;i++){var statement=statements[i];statement&&(value=statement(self,locals))}return value}},filterChain:function(){for(var token,left=this.expression();;){if(!(token=this.expect("|")))return left;left=this.binaryFn(left,token.fn,this.filter())}},filter:function(){for(var token=this.expect(),fn=this.$filter(token.text),argsFn=[];;){if(!(token=this.expect(":"))){var fnInvoke=function(self,locals,input){for(var args=[input],i=0;i<argsFn.length;i++)args.push(argsFn[i](self,locals));return fn.apply(self,args)};return function(){return fnInvoke}}argsFn.push(this.expression())}},expression:function(){return this.assignment()},assignment:function(){var right,token,left=this.ternary();return(token=this.expect("="))?(left.assign||this.throwError("implies assignment but ["+this.text.substring(0,token.index)+"] can not be assigned to",token),right=this.ternary(),function(scope,locals){return left.assign(scope,right(scope,locals),locals)}):left},ternary:function(){var middle,token,left=this.logicalOR();return(token=this.expect("?"))?(middle=this.ternary(),(token=this.expect(":"))?this.ternaryFn(left,middle,this.ternary()):void this.throwError("expected :",token)):left},logicalOR:function(){for(var token,left=this.logicalAND();;){if(!(token=this.expect("||")))return left;left=this.binaryFn(left,token.fn,this.logicalAND())}},logicalAND:function(){var token,left=this.equality();return(token=this.expect("&&"))&&(left=this.binaryFn(left,token.fn,this.logicalAND())),left},equality:function(){var token,left=this.relational();return(token=this.expect("==","!=","===","!=="))&&(left=this.binaryFn(left,token.fn,this.equality())),left},relational:function(){var token,left=this.additive();return(token=this.expect("<",">","<=",">="))&&(left=this.binaryFn(left,token.fn,this.relational())),left},additive:function(){for(var token,left=this.multiplicative();token=this.expect("+","-");)left=this.binaryFn(left,token.fn,this.multiplicative());return left},multiplicative:function(){for(var token,left=this.unary();token=this.expect("*","/","%");)left=this.binaryFn(left,token.fn,this.unary());return left},unary:function(){var token;return this.expect("+")?this.primary():(token=this.expect("-"))?this.binaryFn(Parser.ZERO,token.fn,this.unary()):(token=this.expect("!"))?this.unaryFn(token.fn,this.unary()):this.primary()},fieldAccess:function(object){var parser=this,field=this.expect().text,getter=getterFn(field,this.options,this.text);return extend(function(scope,locals,self){return getter(self||object(scope,locals))},{assign:function(scope,value,locals){return setter(object(scope,locals),field,value,parser.text,parser.options)}})},objectIndex:function(obj){var parser=this,indexFn=this.expression();return this.consume("]"),extend(function(self,locals){var v,p,o=obj(self,locals),i=indexFn(self,locals);return o?(v=ensureSafeObject(o[i],parser.text),v&&v.then&&parser.options.unwrapPromises&&(p=v,"$$v"in v||(p.$$v=undefined,p.then(function(val){p.$$v=val})),v=v.$$v),v):undefined},{assign:function(self,value,locals){var key=indexFn(self,locals),safe=ensureSafeObject(obj(self,locals),parser.text);
return safe[key]=value}})},functionCall:function(fn,contextGetter){var argsFn=[];if(")"!==this.peekToken().text)do argsFn.push(this.expression());while(this.expect(","));this.consume(")");var parser=this;return function(scope,locals){for(var args=[],context=contextGetter?contextGetter(scope,locals):scope,i=0;i<argsFn.length;i++)args.push(argsFn[i](scope,locals));var fnPtr=fn(scope,locals,context)||noop;ensureSafeObject(context,parser.text),ensureSafeObject(fnPtr,parser.text);var v=fnPtr.apply?fnPtr.apply(context,args):fnPtr(args[0],args[1],args[2],args[3],args[4]);return ensureSafeObject(v,parser.text)}},arrayDeclaration:function(){var elementFns=[],allConstant=!0;if("]"!==this.peekToken().text)do{if(this.peek("]"))break;var elementFn=this.expression();elementFns.push(elementFn),elementFn.constant||(allConstant=!1)}while(this.expect(","));return this.consume("]"),extend(function(self,locals){for(var array=[],i=0;i<elementFns.length;i++)array.push(elementFns[i](self,locals));return array},{literal:!0,constant:allConstant})},object:function(){var keyValues=[],allConstant=!0;if("}"!==this.peekToken().text)do{if(this.peek("}"))break;var token=this.expect(),key=token.string||token.text;this.consume(":");var value=this.expression();keyValues.push({key:key,value:value}),value.constant||(allConstant=!1)}while(this.expect(","));return this.consume("}"),extend(function(self,locals){for(var object={},i=0;i<keyValues.length;i++){var keyValue=keyValues[i];object[keyValue.key]=keyValue.value(self,locals)}return object},{literal:!0,constant:allConstant})}};var getterFnCache={},$sceMinErr=minErr("$sce"),SCE_CONTEXTS={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},urlParsingNode=document.createElement("a"),originUrl=urlResolve(window.location.href,!0);$FilterProvider.$inject=["$provide"],currencyFilter.$inject=["$locale"],numberFilter.$inject=["$locale"];var DECIMAL_SEP=".",DATE_FORMATS={yyyy:dateGetter("FullYear",4),yy:dateGetter("FullYear",2,0,!0),y:dateGetter("FullYear",1),MMMM:dateStrGetter("Month"),MMM:dateStrGetter("Month",!0),MM:dateGetter("Month",2,1),M:dateGetter("Month",1,1),dd:dateGetter("Date",2),d:dateGetter("Date",1),HH:dateGetter("Hours",2),H:dateGetter("Hours",1),hh:dateGetter("Hours",2,-12),h:dateGetter("Hours",1,-12),mm:dateGetter("Minutes",2),m:dateGetter("Minutes",1),ss:dateGetter("Seconds",2),s:dateGetter("Seconds",1),sss:dateGetter("Milliseconds",3),EEEE:dateStrGetter("Day"),EEE:dateStrGetter("Day",!0),a:ampmGetter,Z:timeZoneGetter},DATE_FORMATS_SPLIT=/((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/,NUMBER_STRING=/^\-?\d+$/;dateFilter.$inject=["$locale"];var lowercaseFilter=valueFn(lowercase),uppercaseFilter=valueFn(uppercase);orderByFilter.$inject=["$parse"];var htmlAnchorDirective=valueFn({restrict:"E",compile:function(element,attr){return 8>=msie&&(attr.href||attr.name||attr.$set("href",""),element.append(document.createComment("IE fix"))),attr.href||attr.xlinkHref||attr.name?void 0:function(scope,element){var href="[object SVGAnimatedString]"===toString.call(element.prop("href"))?"xlink:href":"href";element.on("click",function(event){element.attr(href)||event.preventDefault()})}}}),ngAttributeAliasDirectives={};forEach(BOOLEAN_ATTR,function(propName,attrName){if("multiple"!=propName){var normalized=directiveNormalize("ng-"+attrName);ngAttributeAliasDirectives[normalized]=function(){return{priority:100,link:function(scope,element,attr){scope.$watch(attr[normalized],function(value){attr.$set(attrName,!!value)})}}}}}),forEach(["src","srcset","href"],function(attrName){var normalized=directiveNormalize("ng-"+attrName);ngAttributeAliasDirectives[normalized]=function(){return{priority:99,link:function(scope,element,attr){var propName=attrName,name=attrName;"href"===attrName&&"[object SVGAnimatedString]"===toString.call(element.prop("href"))&&(name="xlinkHref",attr.$attr[name]="xlink:href",propName=null),attr.$observe(normalized,function(value){value&&(attr.$set(name,value),msie&&propName&&element.prop(propName,attr[name]))})}}}});var nullFormCtrl={$addControl:noop,$removeControl:noop,$setValidity:noop,$setDirty:noop,$setPristine:noop};FormController.$inject=["$element","$attrs","$scope","$animate"];var formDirectiveFactory=function(isNgForm){return["$timeout",function($timeout){var formDirective={name:"form",restrict:isNgForm?"EAC":"E",controller:FormController,compile:function(){return{pre:function(scope,formElement,attr,controller){if(!attr.action){var preventDefaultListener=function(event){event.preventDefault?event.preventDefault():event.returnValue=!1};addEventListenerFn(formElement[0],"submit",preventDefaultListener),formElement.on("$destroy",function(){$timeout(function(){removeEventListenerFn(formElement[0],"submit",preventDefaultListener)},0,!1)})}var parentFormCtrl=formElement.parent().controller("form"),alias=attr.name||attr.ngForm;alias&&setter(scope,alias,controller,alias),parentFormCtrl&&formElement.on("$destroy",function(){parentFormCtrl.$removeControl(controller),alias&&setter(scope,alias,undefined,alias),extend(controller,nullFormCtrl)})}}}};return formDirective}]},formDirective=formDirectiveFactory(),ngFormDirective=formDirectiveFactory(!0),URL_REGEXP=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,EMAIL_REGEXP=/^[a-z0-9!#$%&'*+/=?^_`{|}~.-]+@[a-z0-9-]+(\.[a-z0-9-]+)*$/i,NUMBER_REGEXP=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,inputType={text:textInputType,number:numberInputType,url:urlInputType,email:emailInputType,radio:radioInputType,checkbox:checkboxInputType,hidden:noop,button:noop,submit:noop,reset:noop,file:noop},inputDirective=["$browser","$sniffer",function($browser,$sniffer){return{restrict:"E",require:"?ngModel",link:function(scope,element,attr,ctrl){ctrl&&(inputType[lowercase(attr.type)]||inputType.text)(scope,element,attr,ctrl,$sniffer,$browser)}}}],VALID_CLASS="ng-valid",INVALID_CLASS="ng-invalid",PRISTINE_CLASS="ng-pristine",DIRTY_CLASS="ng-dirty",NgModelController=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate",function($scope,$exceptionHandler,$attr,$element,$parse,$animate){function toggleValidCss(isValid,validationErrorKey){validationErrorKey=validationErrorKey?"-"+snake_case(validationErrorKey,"-"):"",$animate.removeClass($element,(isValid?INVALID_CLASS:VALID_CLASS)+validationErrorKey),$animate.addClass($element,(isValid?VALID_CLASS:INVALID_CLASS)+validationErrorKey)}this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$name=$attr.name;var ngModelGet=$parse($attr.ngModel),ngModelSet=ngModelGet.assign;if(!ngModelSet)throw minErr("ngModel")("nonassign","Expression '{0}' is non-assignable. Element: {1}",$attr.ngModel,startingTag($element));this.$render=noop,this.$isEmpty=function(value){return isUndefined(value)||""===value||null===value||value!==value};var parentForm=$element.inheritedData("$formController")||nullFormCtrl,invalidCount=0,$error=this.$error={};$element.addClass(PRISTINE_CLASS),toggleValidCss(!0),this.$setValidity=function(validationErrorKey,isValid){$error[validationErrorKey]!==!isValid&&(isValid?($error[validationErrorKey]&&invalidCount--,invalidCount||(toggleValidCss(!0),this.$valid=!0,this.$invalid=!1)):(toggleValidCss(!1),this.$invalid=!0,this.$valid=!1,invalidCount++),$error[validationErrorKey]=!isValid,toggleValidCss(isValid,validationErrorKey),parentForm.$setValidity(validationErrorKey,isValid,this))},this.$setPristine=function(){this.$dirty=!1,this.$pristine=!0,$animate.removeClass($element,DIRTY_CLASS),$animate.addClass($element,PRISTINE_CLASS)},this.$setViewValue=function(value){this.$viewValue=value,this.$pristine&&(this.$dirty=!0,this.$pristine=!1,$animate.removeClass($element,PRISTINE_CLASS),$animate.addClass($element,DIRTY_CLASS),parentForm.$setDirty()),forEach(this.$parsers,function(fn){value=fn(value)}),this.$modelValue!==value&&(this.$modelValue=value,ngModelSet($scope,value),forEach(this.$viewChangeListeners,function(listener){try{listener()}catch(e){$exceptionHandler(e)}}))};var ctrl=this;$scope.$watch(function(){var value=ngModelGet($scope);if(ctrl.$modelValue!==value){var formatters=ctrl.$formatters,idx=formatters.length;for(ctrl.$modelValue=value;idx--;)value=formatters[idx](value);ctrl.$viewValue!==value&&(ctrl.$viewValue=value,ctrl.$render())}return value})}],ngModelDirective=function(){return{require:["ngModel","^?form"],controller:NgModelController,link:function(scope,element,attr,ctrls){var modelCtrl=ctrls[0],formCtrl=ctrls[1]||nullFormCtrl;formCtrl.$addControl(modelCtrl),scope.$on("$destroy",function(){formCtrl.$removeControl(modelCtrl)})}}},ngChangeDirective=valueFn({require:"ngModel",link:function(scope,element,attr,ctrl){ctrl.$viewChangeListeners.push(function(){scope.$eval(attr.ngChange)})}}),requiredDirective=function(){return{require:"?ngModel",link:function(scope,elm,attr,ctrl){if(ctrl){attr.required=!0;var validator=function(value){return attr.required&&ctrl.$isEmpty(value)?void ctrl.$setValidity("required",!1):(ctrl.$setValidity("required",!0),value)};ctrl.$formatters.push(validator),ctrl.$parsers.unshift(validator),attr.$observe("required",function(){validator(ctrl.$viewValue)})}}}},ngListDirective=function(){return{require:"ngModel",link:function(scope,element,attr,ctrl){var match=/\/(.*)\//.exec(attr.ngList),separator=match&&new RegExp(match[1])||attr.ngList||",",parse=function(viewValue){if(!isUndefined(viewValue)){var list=[];return viewValue&&forEach(viewValue.split(separator),function(value){value&&list.push(trim(value))}),list}};ctrl.$parsers.push(parse),ctrl.$formatters.push(function(value){return isArray(value)?value.join(", "):undefined}),ctrl.$isEmpty=function(value){return!value||!value.length}}}},CONSTANT_VALUE_REGEXP=/^(true|false|\d+)$/,ngValueDirective=function(){return{priority:100,compile:function(tpl,tplAttr){return CONSTANT_VALUE_REGEXP.test(tplAttr.ngValue)?function(scope,elm,attr){attr.$set("value",scope.$eval(attr.ngValue))}:function(scope,elm,attr){scope.$watch(attr.ngValue,function(value){attr.$set("value",value)})}}}},ngBindDirective=ngDirective(function(scope,element,attr){element.addClass("ng-binding").data("$binding",attr.ngBind),scope.$watch(attr.ngBind,function(value){element.text(value==undefined?"":value)})}),ngBindTemplateDirective=["$interpolate",function($interpolate){return function(scope,element,attr){var interpolateFn=$interpolate(element.attr(attr.$attr.ngBindTemplate));element.addClass("ng-binding").data("$binding",interpolateFn),attr.$observe("ngBindTemplate",function(value){element.text(value)})}}],ngBindHtmlDirective=["$sce","$parse",function($sce,$parse){return function(scope,element,attr){function getStringValue(){return(parsed(scope)||"").toString()}element.addClass("ng-binding").data("$binding",attr.ngBindHtml);var parsed=$parse(attr.ngBindHtml);scope.$watch(getStringValue,function(){element.html($sce.getTrustedHtml(parsed(scope))||"")})}}],ngClassDirective=classDirective("",!0),ngClassOddDirective=classDirective("Odd",0),ngClassEvenDirective=classDirective("Even",1),ngCloakDirective=ngDirective({compile:function(element,attr){attr.$set("ngCloak",undefined),element.removeClass("ng-cloak")}}),ngControllerDirective=[function(){return{scope:!0,controller:"@",priority:500}}],ngEventDirectives={};forEach("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(name){var directiveName=directiveNormalize("ng-"+name);ngEventDirectives[directiveName]=["$parse",function($parse){return{compile:function($element,attr){var fn=$parse(attr[directiveName]);return function(scope,element){element.on(lowercase(name),function(event){scope.$apply(function(){fn(scope,{$event:event})})})}}}}]});var ngIfDirective=["$animate",function($animate){return{transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function($scope,$element,$attr,ctrl,$transclude){var block,childScope,previousElements;$scope.$watch($attr.ngIf,function(value){toBoolean(value)?childScope||(childScope=$scope.$new(),$transclude(childScope,function(clone){clone[clone.length++]=document.createComment(" end ngIf: "+$attr.ngIf+" "),block={clone:clone},$animate.enter(clone,$element.parent(),$element)})):(previousElements&&(previousElements.remove(),previousElements=null),childScope&&(childScope.$destroy(),childScope=null),block&&(previousElements=getBlockElements(block.clone),$animate.leave(previousElements,function(){previousElements=null}),block=null))})}}}],ngIncludeDirective=["$http","$templateCache","$anchorScroll","$animate","$sce",function($http,$templateCache,$anchorScroll,$animate,$sce){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:angular.noop,compile:function(element,attr){var srcExp=attr.ngInclude||attr.src,onloadExp=attr.onload||"",autoScrollExp=attr.autoscroll;return function(scope,$element,$attr,ctrl,$transclude){var currentScope,previousElement,currentElement,changeCounter=0,cleanupLastIncludeContent=function(){previousElement&&(previousElement.remove(),previousElement=null),currentScope&&(currentScope.$destroy(),currentScope=null),currentElement&&($animate.leave(currentElement,function(){previousElement=null}),previousElement=currentElement,currentElement=null)};scope.$watch($sce.parseAsResourceUrl(srcExp),function(src){var afterAnimation=function(){!isDefined(autoScrollExp)||autoScrollExp&&!scope.$eval(autoScrollExp)||$anchorScroll()},thisChangeId=++changeCounter;src?($http.get(src,{cache:$templateCache}).success(function(response){if(thisChangeId===changeCounter){var newScope=scope.$new();ctrl.template=response;var clone=$transclude(newScope,function(clone){cleanupLastIncludeContent(),$animate.enter(clone,null,$element,afterAnimation)});currentScope=newScope,currentElement=clone,currentScope.$emit("$includeContentLoaded"),scope.$eval(onloadExp)}}).error(function(){thisChangeId===changeCounter&&cleanupLastIncludeContent()}),scope.$emit("$includeContentRequested")):(cleanupLastIncludeContent(),ctrl.template=null)})}}}}],ngIncludeFillContentDirective=["$compile",function($compile){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(scope,$element,$attr,ctrl){$element.html(ctrl.template),$compile($element.contents())(scope)}}}],ngInitDirective=ngDirective({priority:450,compile:function(){return{pre:function(scope,element,attrs){scope.$eval(attrs.ngInit)}}}}),ngNonBindableDirective=ngDirective({terminal:!0,priority:1e3}),ngPluralizeDirective=["$locale","$interpolate",function($locale,$interpolate){var BRACE=/{}/g;return{restrict:"EA",link:function(scope,element,attr){var numberExp=attr.count,whenExp=attr.$attr.when&&element.attr(attr.$attr.when),offset=attr.offset||0,whens=scope.$eval(whenExp)||{},whensExpFns={},startSymbol=$interpolate.startSymbol(),endSymbol=$interpolate.endSymbol(),isWhen=/^when(Minus)?(.+)$/;forEach(attr,function(expression,attributeName){isWhen.test(attributeName)&&(whens[lowercase(attributeName.replace("when","").replace("Minus","-"))]=element.attr(attr.$attr[attributeName]))}),forEach(whens,function(expression,key){whensExpFns[key]=$interpolate(expression.replace(BRACE,startSymbol+numberExp+"-"+offset+endSymbol))}),scope.$watch(function(){var value=parseFloat(scope.$eval(numberExp));return isNaN(value)?"":(value in whens||(value=$locale.pluralCat(value-offset)),whensExpFns[value](scope,element,!0))},function(newVal){element.text(newVal)})}}}],ngRepeatDirective=["$parse","$animate",function($parse,$animate){function getBlockStart(block){return block.clone[0]}function getBlockEnd(block){return block.clone[block.clone.length-1]}var NG_REMOVED="$$NG_REMOVED",ngRepeatMinErr=minErr("ngRepeat");return{transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,link:function($scope,$element,$attr,ctrl,$transclude){var trackByExp,trackByExpGetter,trackByIdExpFn,trackByIdArrayFn,trackByIdObjFn,lhs,rhs,valueIdentifier,keyIdentifier,expression=$attr.ngRepeat,match=expression.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),hashFnLocals={$id:hashKey};if(!match)throw ngRepeatMinErr("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",expression);if(lhs=match[1],rhs=match[2],trackByExp=match[3],trackByExp?(trackByExpGetter=$parse(trackByExp),trackByIdExpFn=function(key,value,index){return keyIdentifier&&(hashFnLocals[keyIdentifier]=key),hashFnLocals[valueIdentifier]=value,hashFnLocals.$index=index,trackByExpGetter($scope,hashFnLocals)}):(trackByIdArrayFn=function(key,value){return hashKey(value)},trackByIdObjFn=function(key){return key}),match=lhs.match(/^(?:([\$\w]+)|\(([\$\w]+)\s*,\s*([\$\w]+)\))$/),!match)throw ngRepeatMinErr("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",lhs);valueIdentifier=match[3]||match[1],keyIdentifier=match[2];var lastBlockMap={};$scope.$watchCollection(rhs,function(collection){var index,length,nextNode,arrayLength,childScope,key,value,trackById,trackByIdFn,collectionKeys,block,elementsToRemove,previousNode=$element[0],nextBlockMap={},nextBlockOrder=[];if(isArrayLike(collection))collectionKeys=collection,trackByIdFn=trackByIdExpFn||trackByIdArrayFn;else{trackByIdFn=trackByIdExpFn||trackByIdObjFn,collectionKeys=[];for(key in collection)collection.hasOwnProperty(key)&&"$"!=key.charAt(0)&&collectionKeys.push(key);collectionKeys.sort()}for(arrayLength=collectionKeys.length,length=nextBlockOrder.length=collectionKeys.length,index=0;length>index;index++)if(key=collection===collectionKeys?index:collectionKeys[index],value=collection[key],trackById=trackByIdFn(key,value,index),assertNotHasOwnProperty(trackById,"`track by` id"),lastBlockMap.hasOwnProperty(trackById))block=lastBlockMap[trackById],delete lastBlockMap[trackById],nextBlockMap[trackById]=block,nextBlockOrder[index]=block;else{if(nextBlockMap.hasOwnProperty(trackById))throw forEach(nextBlockOrder,function(block){block&&block.scope&&(lastBlockMap[block.id]=block)}),ngRepeatMinErr("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}",expression,trackById);nextBlockOrder[index]={id:trackById},nextBlockMap[trackById]=!1}for(key in lastBlockMap)lastBlockMap.hasOwnProperty(key)&&(block=lastBlockMap[key],elementsToRemove=getBlockElements(block.clone),$animate.leave(elementsToRemove),forEach(elementsToRemove,function(element){element[NG_REMOVED]=!0}),block.scope.$destroy());for(index=0,length=collectionKeys.length;length>index;index++){if(key=collection===collectionKeys?index:collectionKeys[index],value=collection[key],block=nextBlockOrder[index],nextBlockOrder[index-1]&&(previousNode=getBlockEnd(nextBlockOrder[index-1])),block.scope){childScope=block.scope,nextNode=previousNode;do nextNode=nextNode.nextSibling;while(nextNode&&nextNode[NG_REMOVED]);getBlockStart(block)!=nextNode&&$animate.move(getBlockElements(block.clone),null,jqLite(previousNode)),previousNode=getBlockEnd(block)}else childScope=$scope.$new();childScope[valueIdentifier]=value,keyIdentifier&&(childScope[keyIdentifier]=key),childScope.$index=index,childScope.$first=0===index,childScope.$last=index===arrayLength-1,childScope.$middle=!(childScope.$first||childScope.$last),childScope.$odd=!(childScope.$even=0===(1&index)),block.scope||$transclude(childScope,function(clone){clone[clone.length++]=document.createComment(" end ngRepeat: "+expression+" "),$animate.enter(clone,null,jqLite(previousNode)),previousNode=clone,block.scope=childScope,block.clone=clone,nextBlockMap[block.id]=block})}lastBlockMap=nextBlockMap})}}}],ngShowDirective=["$animate",function($animate){return function(scope,element,attr){scope.$watch(attr.ngShow,function(value){$animate[toBoolean(value)?"removeClass":"addClass"](element,"ng-hide")})}}],ngHideDirective=["$animate",function($animate){return function(scope,element,attr){scope.$watch(attr.ngHide,function(value){$animate[toBoolean(value)?"addClass":"removeClass"](element,"ng-hide")})}}],ngStyleDirective=ngDirective(function(scope,element,attr){scope.$watch(attr.ngStyle,function(newStyles,oldStyles){oldStyles&&newStyles!==oldStyles&&forEach(oldStyles,function(val,style){element.css(style,"")}),newStyles&&element.css(newStyles)},!0)}),ngSwitchDirective=["$animate",function($animate){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(scope,element,attr,ngSwitchController){var selectedTranscludes,selectedElements,previousElements,watchExpr=attr.ngSwitch||attr.on,selectedScopes=[];scope.$watch(watchExpr,function(value){var i,ii=selectedScopes.length;if(ii>0){if(previousElements){for(i=0;ii>i;i++)previousElements[i].remove();previousElements=null}for(previousElements=[],i=0;ii>i;i++){var selected=selectedElements[i];selectedScopes[i].$destroy(),previousElements[i]=selected,$animate.leave(selected,function(){previousElements.splice(i,1),0===previousElements.length&&(previousElements=null)})}}selectedElements=[],selectedScopes=[],(selectedTranscludes=ngSwitchController.cases["!"+value]||ngSwitchController.cases["?"])&&(scope.$eval(attr.change),forEach(selectedTranscludes,function(selectedTransclude){var selectedScope=scope.$new();selectedScopes.push(selectedScope),selectedTransclude.transclude(selectedScope,function(caseElement){var anchor=selectedTransclude.element;selectedElements.push(caseElement),$animate.enter(caseElement,anchor.parent(),anchor)})}))})}}}],ngSwitchWhenDirective=ngDirective({transclude:"element",priority:800,require:"^ngSwitch",link:function(scope,element,attrs,ctrl,$transclude){ctrl.cases["!"+attrs.ngSwitchWhen]=ctrl.cases["!"+attrs.ngSwitchWhen]||[],ctrl.cases["!"+attrs.ngSwitchWhen].push({transclude:$transclude,element:element})}}),ngSwitchDefaultDirective=ngDirective({transclude:"element",priority:800,require:"^ngSwitch",link:function(scope,element,attr,ctrl,$transclude){ctrl.cases["?"]=ctrl.cases["?"]||[],ctrl.cases["?"].push({transclude:$transclude,element:element})}}),ngTranscludeDirective=ngDirective({link:function($scope,$element,$attrs,controller,$transclude){if(!$transclude)throw minErr("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",startingTag($element));$transclude(function(clone){$element.empty(),$element.append(clone)})}}),scriptDirective=["$templateCache",function($templateCache){return{restrict:"E",terminal:!0,compile:function(element,attr){if("text/ng-template"==attr.type){var templateUrl=attr.id,text=element[0].text;$templateCache.put(templateUrl,text)}}}}],ngOptionsMinErr=minErr("ngOptions"),ngOptionsDirective=valueFn({terminal:!0}),selectDirective=["$compile","$parse",function($compile,$parse){var NG_OPTIONS_REGEXP=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,nullModelCtrl={$setViewValue:noop};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function($element,$scope,$attrs){var nullOption,unknownOption,self=this,optionsMap={},ngModelCtrl=nullModelCtrl;self.databound=$attrs.ngModel,self.init=function(ngModelCtrl_,nullOption_,unknownOption_){ngModelCtrl=ngModelCtrl_,nullOption=nullOption_,unknownOption=unknownOption_},self.addOption=function(value){assertNotHasOwnProperty(value,'"option value"'),optionsMap[value]=!0,ngModelCtrl.$viewValue==value&&($element.val(value),unknownOption.parent()&&unknownOption.remove())},self.removeOption=function(value){this.hasOption(value)&&(delete optionsMap[value],ngModelCtrl.$viewValue==value&&this.renderUnknownOption(value))},self.renderUnknownOption=function(val){var unknownVal="? "+hashKey(val)+" ?";unknownOption.val(unknownVal),$element.prepend(unknownOption),$element.val(unknownVal),unknownOption.prop("selected",!0)},self.hasOption=function(value){return optionsMap.hasOwnProperty(value)},$scope.$on("$destroy",function(){self.renderUnknownOption=noop})}],link:function(scope,element,attr,ctrls){function setupAsSingle(scope,selectElement,ngModelCtrl,selectCtrl){ngModelCtrl.$render=function(){var viewValue=ngModelCtrl.$viewValue;selectCtrl.hasOption(viewValue)?(unknownOption.parent()&&unknownOption.remove(),selectElement.val(viewValue),""===viewValue&&emptyOption.prop("selected",!0)):isUndefined(viewValue)&&emptyOption?selectElement.val(""):selectCtrl.renderUnknownOption(viewValue)},selectElement.on("change",function(){scope.$apply(function(){unknownOption.parent()&&unknownOption.remove(),ngModelCtrl.$setViewValue(selectElement.val())})})}function setupAsMultiple(scope,selectElement,ctrl){var lastView;ctrl.$render=function(){var items=new HashMap(ctrl.$viewValue);forEach(selectElement.find("option"),function(option){option.selected=isDefined(items.get(option.value))})},scope.$watch(function(){equals(lastView,ctrl.$viewValue)||(lastView=copy(ctrl.$viewValue),ctrl.$render())}),selectElement.on("change",function(){scope.$apply(function(){var array=[];forEach(selectElement.find("option"),function(option){option.selected&&array.push(option.value)}),ctrl.$setViewValue(array)})})}function setupAsOptions(scope,selectElement,ctrl){function render(){var optionGroupName,optionGroup,option,existingParent,existingOptions,existingOption,key,groupLength,length,groupIndex,index,selected,lastElement,element,label,optionGroups={"":[]},optionGroupNames=[""],modelValue=ctrl.$modelValue,values=valuesFn(scope)||[],keys=keyName?sortedKeys(values):values,locals={},selectedSet=!1;if(multiple)if(trackFn&&isArray(modelValue)){selectedSet=new HashMap([]);for(var trackIndex=0;trackIndex<modelValue.length;trackIndex++)locals[valueName]=modelValue[trackIndex],selectedSet.put(trackFn(scope,locals),modelValue[trackIndex])}else selectedSet=new HashMap(modelValue);for(index=0;length=keys.length,length>index;index++){if(key=index,keyName){if(key=keys[index],"$"===key.charAt(0))continue;locals[keyName]=key}if(locals[valueName]=values[key],optionGroupName=groupByFn(scope,locals)||"",(optionGroup=optionGroups[optionGroupName])||(optionGroup=optionGroups[optionGroupName]=[],optionGroupNames.push(optionGroupName)),multiple)selected=isDefined(selectedSet.remove(trackFn?trackFn(scope,locals):valueFn(scope,locals)));else{if(trackFn){var modelCast={};modelCast[valueName]=modelValue,selected=trackFn(scope,modelCast)===trackFn(scope,locals)}else selected=modelValue===valueFn(scope,locals);selectedSet=selectedSet||selected}label=displayFn(scope,locals),label=isDefined(label)?label:"",optionGroup.push({id:trackFn?trackFn(scope,locals):keyName?keys[index]:index,label:label,selected:selected})}for(multiple||(nullOption||null===modelValue?optionGroups[""].unshift({id:"",label:"",selected:!selectedSet}):selectedSet||optionGroups[""].unshift({id:"?",label:"",selected:!0})),groupIndex=0,groupLength=optionGroupNames.length;groupLength>groupIndex;groupIndex++){for(optionGroupName=optionGroupNames[groupIndex],optionGroup=optionGroups[optionGroupName],optionGroupsCache.length<=groupIndex?(existingParent={element:optGroupTemplate.clone().attr("label",optionGroupName),label:optionGroup.label},existingOptions=[existingParent],optionGroupsCache.push(existingOptions),selectElement.append(existingParent.element)):(existingOptions=optionGroupsCache[groupIndex],existingParent=existingOptions[0],existingParent.label!=optionGroupName&&existingParent.element.attr("label",existingParent.label=optionGroupName)),lastElement=null,index=0,length=optionGroup.length;length>index;index++)option=optionGroup[index],(existingOption=existingOptions[index+1])?(lastElement=existingOption.element,existingOption.label!==option.label&&lastElement.text(existingOption.label=option.label),existingOption.id!==option.id&&lastElement.val(existingOption.id=option.id),existingOption.selected!==option.selected&&lastElement.prop("selected",existingOption.selected=option.selected)):(""===option.id&&nullOption?element=nullOption:(element=optionTemplate.clone()).val(option.id).attr("selected",option.selected).text(option.label),existingOptions.push(existingOption={element:element,label:option.label,id:option.id,selected:option.selected}),lastElement?lastElement.after(element):existingParent.element.append(element),lastElement=element);for(index++;existingOptions.length>index;)existingOptions.pop().element.remove()}for(;optionGroupsCache.length>groupIndex;)optionGroupsCache.pop()[0].element.remove()}var match;if(!(match=optionsExp.match(NG_OPTIONS_REGEXP)))throw ngOptionsMinErr("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",optionsExp,startingTag(selectElement));var displayFn=$parse(match[2]||match[1]),valueName=match[4]||match[6],keyName=match[5],groupByFn=$parse(match[3]||""),valueFn=$parse(match[2]?match[1]:valueName),valuesFn=$parse(match[7]),track=match[8],trackFn=track?$parse(match[8]):null,optionGroupsCache=[[{element:selectElement,label:""}]];nullOption&&($compile(nullOption)(scope),nullOption.removeClass("ng-scope"),nullOption.remove()),selectElement.empty(),selectElement.on("change",function(){scope.$apply(function(){var optionGroup,key,value,optionElement,index,groupIndex,length,groupLength,trackIndex,collection=valuesFn(scope)||[],locals={};if(multiple){for(value=[],groupIndex=0,groupLength=optionGroupsCache.length;groupLength>groupIndex;groupIndex++)for(optionGroup=optionGroupsCache[groupIndex],index=1,length=optionGroup.length;length>index;index++)if((optionElement=optionGroup[index].element)[0].selected){if(key=optionElement.val(),keyName&&(locals[keyName]=key),trackFn)for(trackIndex=0;trackIndex<collection.length&&(locals[valueName]=collection[trackIndex],trackFn(scope,locals)!=key);trackIndex++);else locals[valueName]=collection[key];value.push(valueFn(scope,locals))}}else{if(key=selectElement.val(),"?"==key)value=undefined;else if(""===key)value=null;else if(trackFn){for(trackIndex=0;trackIndex<collection.length;trackIndex++)if(locals[valueName]=collection[trackIndex],trackFn(scope,locals)==key){value=valueFn(scope,locals);break}}else locals[valueName]=collection[key],keyName&&(locals[keyName]=key),value=valueFn(scope,locals);optionGroupsCache[0].length>1&&optionGroupsCache[0][1].id!==key&&(optionGroupsCache[0][1].selected=!1)}ctrl.$setViewValue(value)})}),ctrl.$render=render,scope.$watch(render)}if(ctrls[1]){for(var emptyOption,selectCtrl=ctrls[0],ngModelCtrl=ctrls[1],multiple=attr.multiple,optionsExp=attr.ngOptions,nullOption=!1,optionTemplate=jqLite(document.createElement("option")),optGroupTemplate=jqLite(document.createElement("optgroup")),unknownOption=optionTemplate.clone(),i=0,children=element.children(),ii=children.length;ii>i;i++)if(""===children[i].value){emptyOption=nullOption=children.eq(i);break}selectCtrl.init(ngModelCtrl,nullOption,unknownOption),multiple&&(ngModelCtrl.$isEmpty=function(value){return!value||0===value.length}),optionsExp?setupAsOptions(scope,element,ngModelCtrl):multiple?setupAsMultiple(scope,element,ngModelCtrl):setupAsSingle(scope,element,ngModelCtrl,selectCtrl)}}}}],optionDirective=["$interpolate",function($interpolate){var nullSelectCtrl={addOption:noop,removeOption:noop};return{restrict:"E",priority:100,compile:function(element,attr){if(isUndefined(attr.value)){var interpolateFn=$interpolate(element.text(),!0);interpolateFn||attr.$set("value",element.text())}return function(scope,element,attr){var selectCtrlName="$selectController",parent=element.parent(),selectCtrl=parent.data(selectCtrlName)||parent.parent().data(selectCtrlName);selectCtrl&&selectCtrl.databound?element.prop("selected",!1):selectCtrl=nullSelectCtrl,interpolateFn?scope.$watch(interpolateFn,function(newVal,oldVal){attr.$set("value",newVal),newVal!==oldVal&&selectCtrl.removeOption(oldVal),selectCtrl.addOption(newVal)
}):selectCtrl.addOption(attr.value),element.on("$destroy",function(){selectCtrl.removeOption(attr.value)})}}}}],styleDirective=valueFn({restrict:"E",terminal:!0});return window.angular.bootstrap?void console.log("WARNING: Tried to load angular more than once."):(bindJQuery(),publishExternalAPI(angular),void jqLite(document).ready(function(){angularInit(document,bootstrap)}))}(window,document),!angular.$$csp()&&angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide{display:none !important;}ng\\:form{display:block;}.ng-animate-block-transitions{transition:0s all!important;-webkit-transition:0s all!important;}</style>'),define("angular",["jquery","jquery-ui","jquery.ui.widget","jquery-bridget","jquery/select2","imagesloaded","masonry","load-image","jquery.iframe-transport","jquery.fileupload","jquery.fileupload-image","jquery.fileupload-audio","jquery.fileupload-video","jquery.fileupload-validate","jquery.fileupload-process","bootstrap"],function(global){return function(){var ret,fn;return fn=function(){return this.angular},ret=fn.apply(global,arguments),ret||global.angular}}(this)),function(window,angular,undefined){function isValidDottedPath(path){return null!=path&&""!==path&&"hasOwnProperty"!==path&&MEMBER_NAME_REGEX.test("."+path)}function lookupDottedPath(obj,path){if(!isValidDottedPath(path))throw $resourceMinErr("badmember",'Dotted member path "@{0}" is invalid.',path);for(var keys=path.split("."),i=0,ii=keys.length;ii>i&&obj!==undefined;i++){var key=keys[i];obj=null!==obj?obj[key]:undefined}return obj}function shallowClearAndCopy(src,dst){dst=dst||{},angular.forEach(dst,function(value,key){delete dst[key]});for(var key in src)!src.hasOwnProperty(key)||"$"===key.charAt(0)&&"$"===key.charAt(1)||(dst[key]=src[key]);return dst}var $resourceMinErr=angular.$$minErr("$resource"),MEMBER_NAME_REGEX=/^(\.[a-zA-Z_$][0-9a-zA-Z_$]*)+$/;angular.module("ngResource",["ng"]).factory("$resource",["$http","$q",function($http,$q){function encodeUriSegment(val){return encodeUriQuery(val,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function encodeUriQuery(val,pctEncodeSpaces){return encodeURIComponent(val).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,pctEncodeSpaces?"%20":"+")}function Route(template,defaults){this.template=template,this.defaults=defaults||{},this.urlParams={}}function resourceFactory(url,paramDefaults,actions){function extractParams(data,actionParams){var ids={};return actionParams=extend({},paramDefaults,actionParams),forEach(actionParams,function(value,key){isFunction(value)&&(value=value()),ids[key]=value&&value.charAt&&"@"==value.charAt(0)?lookupDottedPath(data,value.substr(1)):value}),ids}function defaultResponseInterceptor(response){return response.resource}function Resource(value){shallowClearAndCopy(value||{},this)}var route=new Route(url);return actions=extend({},DEFAULT_ACTIONS,actions),forEach(actions,function(action,name){var hasBody=/^(POST|PUT|PATCH)$/i.test(action.method);Resource[name]=function(a1,a2,a3,a4){var data,success,error,params={};switch(arguments.length){case 4:error=a4,success=a3;case 3:case 2:if(!isFunction(a2)){params=a1,data=a2,success=a3;break}if(isFunction(a1)){success=a1,error=a2;break}success=a2,error=a3;case 1:isFunction(a1)?success=a1:hasBody?data=a1:params=a1;break;case 0:break;default:throw $resourceMinErr("badargs","Expected up to 4 arguments [params, data, success, error], got {0} arguments",arguments.length)}var isInstanceCall=this instanceof Resource,value=isInstanceCall?data:action.isArray?[]:new Resource(data),httpConfig={},responseInterceptor=action.interceptor&&action.interceptor.response||defaultResponseInterceptor,responseErrorInterceptor=action.interceptor&&action.interceptor.responseError||undefined;forEach(action,function(value,key){"params"!=key&&"isArray"!=key&&"interceptor"!=key&&(httpConfig[key]=copy(value))}),hasBody&&(httpConfig.data=data),route.setUrlParams(httpConfig,extend({},extractParams(data,action.params||{}),params),action.url);var promise=$http(httpConfig).then(function(response){var data=response.data,promise=value.$promise;if(data){if(angular.isArray(data)!==!!action.isArray)throw $resourceMinErr("badcfg","Error in resource configuration. Expected response to contain an {0} but got an {1}",action.isArray?"array":"object",angular.isArray(data)?"array":"object");action.isArray?(value.length=0,forEach(data,function(item){value.push(new Resource(item))})):(shallowClearAndCopy(data,value),value.$promise=promise)}return value.$resolved=!0,response.resource=value,response},function(response){return value.$resolved=!0,(error||noop)(response),$q.reject(response)});return promise=promise.then(function(response){var value=responseInterceptor(response);return(success||noop)(value,response.headers),value},responseErrorInterceptor),isInstanceCall?promise:(value.$promise=promise,value.$resolved=!1,value)},Resource.prototype["$"+name]=function(params,success,error){isFunction(params)&&(error=success,success=params,params={});var result=Resource[name].call(this,params,this,success,error);return result.$promise||result}}),Resource.bind=function(additionalParamDefaults){return resourceFactory(url,extend({},paramDefaults,additionalParamDefaults),actions)},Resource}var DEFAULT_ACTIONS={get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},"delete":{method:"DELETE"}},noop=angular.noop,forEach=angular.forEach,extend=angular.extend,copy=angular.copy,isFunction=angular.isFunction;return Route.prototype={setUrlParams:function(config,params,actionUrl){var val,encodedVal,self=this,url=actionUrl||self.template,urlParams=self.urlParams={};forEach(url.split(/\W/),function(param){if("hasOwnProperty"===param)throw $resourceMinErr("badname","hasOwnProperty is not a valid parameter name.");!new RegExp("^\\d+$").test(param)&&param&&new RegExp("(^|[^\\\\]):"+param+"(\\W|$)").test(url)&&(urlParams[param]=!0)}),url=url.replace(/\\:/g,":"),params=params||{},forEach(self.urlParams,function(_,urlParam){val=params.hasOwnProperty(urlParam)?params[urlParam]:self.defaults[urlParam],angular.isDefined(val)&&null!==val?(encodedVal=encodeUriSegment(val),url=url.replace(new RegExp(":"+urlParam+"(\\W|$)","g"),function(match,p1){return encodedVal+p1})):url=url.replace(new RegExp("(/?):"+urlParam+"(\\W|$)","g"),function(match,leadingSlashes,tail){return"/"==tail.charAt(0)?tail:leadingSlashes+tail})}),url=url.replace(/\/+$/,"")||"/",url=url.replace(/\/\.(?=\w+($|\?))/,"."),config.url=url.replace(/\/\\\./,"/."),forEach(params,function(value,key){self.urlParams[key]||(config.params=config.params||{},config.params[key]=value)})}},resourceFactory}])}(window,window.angular),define("angular-resource",["jquery","angular"],function(global){return function(){var ret,fn;return fn=function(){return this.angular.module("ngResource")},ret=fn.apply(global,arguments)}}(this)),"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ui.router"),function(window,angular,undefined){function inherit(parent,extra){return extend(new(extend(function(){},{prototype:parent})),extra)}function merge(dst){return forEach(arguments,function(obj){obj!==dst&&forEach(obj,function(value,key){dst.hasOwnProperty(key)||(dst[key]=value)})}),dst}function ancestors(first,second){var path=[];for(var n in first.path){if(first.path[n]!==second.path[n])break;path.push(first.path[n])}return path}function arraySearch(array,value){if(Array.prototype.indexOf)return array.indexOf(value,Number(arguments[2])||0);var len=array.length>>>0,from=Number(arguments[2])||0;for(from=0>from?Math.ceil(from):Math.floor(from),0>from&&(from+=len);len>from;from++)if(from in array&&array[from]===value)return from;return-1}function inheritParams(currentParams,newParams,$current,$to){var parentParams,parents=ancestors($current,$to),inherited={},inheritList=[];for(var i in parents)if(parents[i].params&&parents[i].params.length){parentParams=parents[i].params;for(var j in parentParams)arraySearch(inheritList,parentParams[j])>=0||(inheritList.push(parentParams[j]),inherited[parentParams[j]]=currentParams[parentParams[j]])}return extend({},inherited,newParams)}function normalize(keys,values){var normalized={};return forEach(keys,function(name){var value=values[name];normalized[name]=null!=value?String(value):null}),normalized}function equalForKeys(a,b,keys){if(!keys){keys=[];for(var n in a)keys.push(n)}for(var i=0;i<keys.length;i++){var k=keys[i];if(a[k]!=b[k])return!1}return!0}function filterByKeys(keys,values){var filtered={};return forEach(keys,function(name){filtered[name]=values[name]}),filtered}function $Resolve($q,$injector){var VISIT_IN_PROGRESS=1,VISIT_DONE=2,NOTHING={},NO_DEPENDENCIES=[],NO_LOCALS=NOTHING,NO_PARENT=extend($q.when(NOTHING),{$$promises:NOTHING,$$values:NOTHING});this.study=function(invocables){function visit(value,key){if(visited[key]!==VISIT_DONE){if(cycle.push(key),visited[key]===VISIT_IN_PROGRESS)throw cycle.splice(0,cycle.indexOf(key)),new Error("Cyclic dependency: "+cycle.join(" -> "));if(visited[key]=VISIT_IN_PROGRESS,isString(value))plan.push(key,[function(){return $injector.get(value)}],NO_DEPENDENCIES);else{var params=$injector.annotate(value);forEach(params,function(param){param!==key&&invocables.hasOwnProperty(param)&&visit(invocables[param],param)}),plan.push(key,value,params)}cycle.pop(),visited[key]=VISIT_DONE}}function isResolve(value){return isObject(value)&&value.then&&value.$$promises}if(!isObject(invocables))throw new Error("'invocables' must be an object");var plan=[],cycle=[],visited={};return forEach(invocables,visit),invocables=cycle=visited=null,function(locals,parent,self){function done(){--wait||(merged||merge(values,parent.$$values),result.$$values=values,result.$$promises=!0,resolution.resolve(values))}function fail(reason){result.$$failure=reason,resolution.reject(reason)}function invoke(key,invocable,params){function onfailure(reason){invocation.reject(reason),fail(reason)}function proceed(){if(!isDefined(result.$$failure))try{invocation.resolve($injector.invoke(invocable,self,values)),invocation.promise.then(function(result){values[key]=result,done()},onfailure)}catch(e){onfailure(e)}}var invocation=$q.defer(),waitParams=0;forEach(params,function(dep){promises.hasOwnProperty(dep)&&!locals.hasOwnProperty(dep)&&(waitParams++,promises[dep].then(function(result){values[dep]=result,--waitParams||proceed()},onfailure))}),waitParams||proceed(),promises[key]=invocation.promise}if(isResolve(locals)&&self===undefined&&(self=parent,parent=locals,locals=null),locals){if(!isObject(locals))throw new Error("'locals' must be an object")}else locals=NO_LOCALS;if(parent){if(!isResolve(parent))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else parent=NO_PARENT;var resolution=$q.defer(),result=resolution.promise,promises=result.$$promises={},values=extend({},locals),wait=1+plan.length/3,merged=!1;if(isDefined(parent.$$failure))return fail(parent.$$failure),result;parent.$$values?(merged=merge(values,parent.$$values),done()):(extend(promises,parent.$$promises),parent.then(done,fail));for(var i=0,ii=plan.length;ii>i;i+=3)locals.hasOwnProperty(plan[i])?done():invoke(plan[i],plan[i+1],plan[i+2]);return result}},this.resolve=function(invocables,locals,parent,self){return this.study(invocables)(locals,parent,self)}}function $TemplateFactory($http,$templateCache,$injector){this.fromConfig=function(config,params,locals){return isDefined(config.template)?this.fromString(config.template,params):isDefined(config.templateUrl)?this.fromUrl(config.templateUrl,params):isDefined(config.templateProvider)?this.fromProvider(config.templateProvider,params,locals):null},this.fromString=function(template,params){return isFunction(template)?template(params):template},this.fromUrl=function(url,params){return isFunction(url)&&(url=url(params)),null==url?null:$http.get(url,{cache:$templateCache}).then(function(response){return response.data})},this.fromProvider=function(provider,params,locals){return $injector.invoke(provider,null,locals||{params:params})}}function UrlMatcher(pattern){function addParameter(id){if(!/^\w+(-+\w+)*$/.test(id))throw new Error("Invalid parameter name '"+id+"' in pattern '"+pattern+"'");if(names[id])throw new Error("Duplicate parameter name '"+id+"' in pattern '"+pattern+"'");names[id]=!0,params.push(id)}function quoteRegExp(string){return string.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&")}var m,placeholder=/([:*])(\w+)|\{(\w+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,names={},compiled="^",last=0,segments=this.segments=[],params=this.params=[];this.source=pattern;for(var id,regexp,segment;(m=placeholder.exec(pattern))&&(id=m[2]||m[3],regexp=m[4]||("*"==m[1]?".*":"[^/]*"),segment=pattern.substring(last,m.index),!(segment.indexOf("?")>=0));)compiled+=quoteRegExp(segment)+"("+regexp+")",addParameter(id),segments.push(segment),last=placeholder.lastIndex;segment=pattern.substring(last);var i=segment.indexOf("?");if(i>=0){var search=this.sourceSearch=segment.substring(i);segment=segment.substring(0,i),this.sourcePath=pattern.substring(0,last+i),forEach(search.substring(1).split(/[&?]/),addParameter)}else this.sourcePath=pattern,this.sourceSearch="";compiled+=quoteRegExp(segment)+"$",segments.push(segment),this.regexp=new RegExp(compiled),this.prefix=segments[0]}function $UrlMatcherFactory(){this.compile=function(pattern){return new UrlMatcher(pattern)},this.isMatcher=function(o){return isObject(o)&&isFunction(o.exec)&&isFunction(o.format)&&isFunction(o.concat)},this.$get=function(){return this}}function $UrlRouterProvider($urlMatcherFactory){function regExpPrefix(re){var prefix=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(re.source);return null!=prefix?prefix[1].replace(/\\(.)/g,"$1"):""}function interpolate(pattern,match){return pattern.replace(/\$(\$|\d{1,2})/,function(m,what){return match["$"===what?0:Number(what)]})}function handleIfMatch($injector,handler,match){if(!match)return!1;var result=$injector.invoke(handler,handler,{$match:match});return isDefined(result)?result:!0}var rules=[],otherwise=null;this.rule=function(rule){if(!isFunction(rule))throw new Error("'rule' must be a function");return rules.push(rule),this},this.otherwise=function(rule){if(isString(rule)){var redirect=rule;rule=function(){return redirect}}else if(!isFunction(rule))throw new Error("'rule' must be a function");return otherwise=rule,this},this.when=function(what,handler){var redirect,handlerIsString=isString(handler);if(isString(what)&&(what=$urlMatcherFactory.compile(what)),!handlerIsString&&!isFunction(handler)&&!isArray(handler))throw new Error("invalid 'handler' in when()");var strategies={matcher:function(what,handler){return handlerIsString&&(redirect=$urlMatcherFactory.compile(handler),handler=["$match",function($match){return redirect.format($match)}]),extend(function($injector,$location){return handleIfMatch($injector,handler,what.exec($location.path(),$location.search()))},{prefix:isString(what.prefix)?what.prefix:""})},regex:function(what,handler){if(what.global||what.sticky)throw new Error("when() RegExp must not be global or sticky");return handlerIsString&&(redirect=handler,handler=["$match",function($match){return interpolate(redirect,$match)}]),extend(function($injector,$location){return handleIfMatch($injector,handler,what.exec($location.path()))},{prefix:regExpPrefix(what)})}},check={matcher:$urlMatcherFactory.isMatcher(what),regex:what instanceof RegExp};for(var n in check)if(check[n])return this.rule(strategies[n](what,handler));throw new Error("invalid 'what' in when()")},this.$get=["$location","$rootScope","$injector",function($location,$rootScope,$injector){function update(evt){function check(rule){var handled=rule($injector,$location);return handled?(isString(handled)&&$location.replace().url(handled),!0):!1}if(!evt||!evt.defaultPrevented){var i,n=rules.length;for(i=0;n>i;i++)if(check(rules[i]))return;otherwise&&check(otherwise)}}return $rootScope.$on("$locationChangeSuccess",update),{sync:function(){update()}}}]}function $StateProvider($urlRouterProvider,$urlMatcherFactory,$locationProvider){function isRelative(stateName){return 0===stateName.indexOf(".")||0===stateName.indexOf("^")}function findState(stateOrName,base){var isStr=isString(stateOrName),name=isStr?stateOrName:stateOrName.name,path=isRelative(name);if(path){if(!base)throw new Error("No reference point given for path '"+name+"'");for(var rel=name.split("."),i=0,pathLength=rel.length,current=base;pathLength>i;i++)if(""!==rel[i]||0!==i){if("^"!==rel[i])break;if(!current.parent)throw new Error("Path '"+name+"' not valid for state '"+base.name+"'");current=current.parent}else current=base;rel=rel.slice(i).join("."),name=current.name+(current.name&&rel?".":"")+rel}var state=states[name];return!state||!isStr&&(isStr||state!==stateOrName&&state.self!==stateOrName)?undefined:state}function queueState(parentName,state){queue[parentName]||(queue[parentName]=[]),queue[parentName].push(state)}function registerState(state){state=inherit(state,{self:state,resolve:state.resolve||{},toString:function(){return this.name}});var name=state.name;if(!isString(name)||name.indexOf("@")>=0)throw new Error("State must have a valid name");if(states.hasOwnProperty(name))throw new Error("State '"+name+"'' is already defined");var parentName=-1!==name.indexOf(".")?name.substring(0,name.lastIndexOf(".")):isString(state.parent)?state.parent:"";if(parentName&&!states[parentName])return queueState(parentName,state.self);for(var key in stateBuilder)isFunction(stateBuilder[key])&&(state[key]=stateBuilder[key](state,stateBuilder.$delegates[key]));if(states[name]=state,!state[abstractKey]&&state.url&&$urlRouterProvider.when(state.url,["$match","$stateParams",function($match,$stateParams){$state.$current.navigable==state&&equalForKeys($match,$stateParams)||$state.transitionTo(state,$match,{location:!1})}]),queue[name])for(var i=0;i<queue[name].length;i++)registerState(queue[name][i]);return state}function isGlob(text){return text.indexOf("*")>-1}function doesStateMatchGlob(glob){var globSegments=glob.split("."),segments=$state.$current.name.split(".");if("**"===globSegments[0]&&(segments=segments.slice(segments.indexOf(globSegments[1])),segments.unshift("**")),"**"===globSegments[globSegments.length-1]&&(segments.splice(segments.indexOf(globSegments[globSegments.length-2])+1,Number.MAX_VALUE),segments.push("**")),globSegments.length!=segments.length)return!1;for(var i=0,l=globSegments.length;l>i;i++)"*"===globSegments[i]&&(segments[i]="*");return segments.join("")===globSegments.join("")}function decorator(name,func){return isString(name)&&!isDefined(func)?stateBuilder[name]:isFunction(func)&&isString(name)?(stateBuilder[name]&&!stateBuilder.$delegates[name]&&(stateBuilder.$delegates[name]=stateBuilder[name]),stateBuilder[name]=func,this):this}function state(name,definition){return isObject(name)?definition=name:definition.name=name,registerState(definition),this}function $get($rootScope,$q,$view,$injector,$resolve,$stateParams,$location,$urlRouter,$browser){function syncUrl(){$location.url()!==currentLocation&&($location.url(currentLocation),$location.replace())}function resolveState(state,params,paramsAreFiltered,inherited,dst){var $stateParams=paramsAreFiltered?params:filterByKeys(state.params,params),locals={$stateParams:$stateParams};dst.resolve=$resolve.resolve(state.resolve,locals,dst.resolve,state);var promises=[dst.resolve.then(function(globals){dst.globals=globals})];return inherited&&promises.push(inherited),forEach(state.views,function(view,name){var injectables=view.resolve&&view.resolve!==state.resolve?view.resolve:{};injectables.$template=[function(){return $view.load(name,{view:view,locals:locals,params:$stateParams,notify:!1})||""}],promises.push($resolve.resolve(injectables,locals,dst.resolve,state).then(function(result){if(isFunction(view.controllerProvider)||isArray(view.controllerProvider)){var injectLocals=angular.extend({},injectables,locals);result.$$controller=$injector.invoke(view.controllerProvider,null,injectLocals)}else result.$$controller=view.controller;result.$$state=state,result.$$controllerAs=view.controllerAs,dst[name]=result}))}),$q.all(promises).then(function(){return dst})}var TransitionSuperseded=$q.reject(new Error("transition superseded")),TransitionPrevented=$q.reject(new Error("transition prevented")),TransitionAborted=$q.reject(new Error("transition aborted")),TransitionFailed=$q.reject(new Error("transition failed")),currentLocation=$location.url(),baseHref=$browser.baseHref();return root.locals={resolve:null,globals:{$stateParams:{}}},$state={params:{},current:root.self,$current:root,transition:null},$state.reload=function(){$state.transitionTo($state.current,$stateParams,{reload:!0,inherit:!1,notify:!1})},$state.go=function(to,params,options){return this.transitionTo(to,params,extend({inherit:!0,relative:$state.$current},options))},$state.transitionTo=function(to,toParams,options){toParams=toParams||{},options=extend({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},options||{});var evt,from=$state.$current,fromParams=$state.params,fromPath=from.path,toState=findState(to,options.relative);if(!isDefined(toState)){var redirect={to:to,toParams:toParams,options:options};if(evt=$rootScope.$broadcast("$stateNotFound",redirect,from.self,fromParams),evt.defaultPrevented)return syncUrl(),TransitionAborted;if(evt.retry){if(options.$retry)return syncUrl(),TransitionFailed;var retryTransition=$state.transition=$q.when(evt.retry);return retryTransition.then(function(){return retryTransition!==$state.transition?TransitionSuperseded:(redirect.options.$retry=!0,$state.transitionTo(redirect.to,redirect.toParams,redirect.options))},function(){return TransitionAborted}),syncUrl(),retryTransition}if(to=redirect.to,toParams=redirect.toParams,options=redirect.options,toState=findState(to,options.relative),!isDefined(toState)){if(options.relative)throw new Error("Could not resolve '"+to+"' from state '"+options.relative+"'");throw new Error("No such state '"+to+"'")}}if(toState[abstractKey])throw new Error("Cannot transition to abstract state '"+to+"'");options.inherit&&(toParams=inheritParams($stateParams,toParams||{},$state.$current,toState)),to=toState;var keep,state,toPath=to.path,locals=root.locals,toLocals=[];for(keep=0,state=toPath[keep];state&&state===fromPath[keep]&&equalForKeys(toParams,fromParams,state.ownParams)&&!options.reload;keep++,state=toPath[keep])locals=toLocals[keep]=state.locals;if(shouldTriggerReload(to,from,locals,options))return to.self.reloadOnSearch!==!1&&syncUrl(),$state.transition=null,$q.when($state.current);if(toParams=normalize(to.params,toParams||{}),options.notify&&(evt=$rootScope.$broadcast("$stateChangeStart",to.self,toParams,from.self,fromParams),evt.defaultPrevented))return syncUrl(),TransitionPrevented;for(var resolved=$q.when(locals),l=keep;l<toPath.length;l++,state=toPath[l])locals=toLocals[l]=inherit(locals),resolved=resolveState(state,toParams,state===to,resolved,locals);var transition=$state.transition=resolved.then(function(){var l,entering,exiting;if($state.transition!==transition)return TransitionSuperseded;for(l=fromPath.length-1;l>=keep;l--)exiting=fromPath[l],exiting.self.onExit&&$injector.invoke(exiting.self.onExit,exiting.self,exiting.locals.globals),exiting.locals=null;for(l=keep;l<toPath.length;l++)entering=toPath[l],entering.locals=toLocals[l],entering.self.onEnter&&$injector.invoke(entering.self.onEnter,entering.self,entering.locals.globals);if($state.transition!==transition)return TransitionSuperseded;$state.$current=to,$state.current=to.self,$state.params=toParams,copy($state.params,$stateParams),$state.transition=null;var toNav=to.navigable;return options.location&&toNav&&($location.url(toNav.url.format(toNav.locals.globals.$stateParams)),"replace"===options.location&&$location.replace()),options.notify&&$rootScope.$broadcast("$stateChangeSuccess",to.self,toParams,from.self,fromParams),currentLocation=$location.url(),$state.current},function(error){return $state.transition!==transition?TransitionSuperseded:($state.transition=null,$rootScope.$broadcast("$stateChangeError",to.self,toParams,from.self,fromParams,error),syncUrl(),$q.reject(error))});return transition},$state.is=function(stateOrName,params){var state=findState(stateOrName);return isDefined(state)?$state.$current!==state?!1:isDefined(params)&&null!==params?angular.equals($stateParams,params):!0:undefined},$state.includes=function(stateOrName,params){if(isString(stateOrName)&&isGlob(stateOrName)){if(!doesStateMatchGlob(stateOrName))return!1;stateOrName=$state.$current.name}var state=findState(stateOrName);if(!isDefined(state))return undefined;if(!isDefined($state.$current.includes[state.name]))return!1;var validParams=!0;return angular.forEach(params,function(value,key){isDefined($stateParams[key])&&$stateParams[key]===value||(validParams=!1)}),validParams},$state.href=function(stateOrName,params,options){options=extend({lossy:!0,inherit:!1,absolute:!1,relative:$state.$current},options||{});var state=findState(stateOrName,options.relative);if(!isDefined(state))return null;params=inheritParams($stateParams,params||{},$state.$current,state);var nav=state&&options.lossy?state.navigable:state,url=nav&&nav.url?nav.url.format(normalize(state.params,params||{})):null;return!$locationProvider.html5Mode()&&url&&(url="#"+$locationProvider.hashPrefix()+url),"/"!==baseHref&&($locationProvider.html5Mode()?url=baseHref.slice(0,-1)+url:options.absolute&&(url=baseHref.slice(1)+url)),options.absolute&&url&&(url=$location.protocol()+"://"+$location.host()+(80==$location.port()||443==$location.port()?"":":"+$location.port())+(!$locationProvider.html5Mode()&&url?"/":"")+url),url},$state.get=function(stateOrName,context){if(!isDefined(stateOrName)){var list=[];return forEach(states,function(state){list.push(state.self)}),list}var state=findState(stateOrName,context);return state&&state.self?state.self:null},$state}function shouldTriggerReload(to,from,locals,options){return to!==from||(locals!==from.locals||options.reload)&&to.self.reloadOnSearch!==!1?void 0:!0}var root,$state,states={},queue={},abstractKey="abstract",stateBuilder={parent:function(state){if(isDefined(state.parent)&&state.parent)return findState(state.parent);var compositeName=/^(.+)\.[^.]+$/.exec(state.name);return compositeName?findState(compositeName[1]):root},data:function(state){return state.parent&&state.parent.data&&(state.data=state.self.data=extend({},state.parent.data,state.data)),state.data},url:function(state){var url=state.url;if(isString(url))return"^"==url.charAt(0)?$urlMatcherFactory.compile(url.substring(1)):(state.parent.navigable||root).url.concat(url);if($urlMatcherFactory.isMatcher(url)||null==url)return url;throw new Error("Invalid url '"+url+"' in state '"+state+"'")},navigable:function(state){return state.url?state:state.parent?state.parent.navigable:null},params:function(state){if(!state.params)return state.url?state.url.parameters():state.parent.params;if(!isArray(state.params))throw new Error("Invalid params in state '"+state+"'");if(state.url)throw new Error("Both params and url specicified in state '"+state+"'");return state.params},views:function(state){var views={};return forEach(isDefined(state.views)?state.views:{"":state},function(view,name){name.indexOf("@")<0&&(name+="@"+state.parent.name),views[name]=view}),views},ownParams:function(state){if(!state.parent)return state.params;var paramNames={};forEach(state.params,function(p){paramNames[p]=!0}),forEach(state.parent.params,function(p){if(!paramNames[p])throw new Error("Missing required parameter '"+p+"' in state '"+state.name+"'");paramNames[p]=!1});var ownParams=[];return forEach(paramNames,function(own,p){own&&ownParams.push(p)}),ownParams},path:function(state){return state.parent?state.parent.path.concat(state):[]},includes:function(state){var includes=state.parent?extend({},state.parent.includes):{};return includes[state.name]=!0,includes},$delegates:{}};root=registerState({name:"",url:"^",views:null,"abstract":!0}),root.navigable=null,this.decorator=decorator,this.state=state,this.$get=$get,$get.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$location","$urlRouter","$browser"]}function $ViewProvider(){function $get($rootScope,$templateFactory){return{load:function(name,options){var result,defaults={template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}};return options=extend(defaults,options),options.view&&(result=$templateFactory.fromConfig(options.view,options.params,options.locals)),result&&options.notify&&$rootScope.$broadcast("$viewContentLoading",options),result}}}this.$get=$get,$get.$inject=["$rootScope","$templateFactory"]}function $ViewScrollProvider(){var useAnchorScroll=!1;this.useAnchorScroll=function(){useAnchorScroll=!0},this.$get=["$anchorScroll","$timeout",function($anchorScroll,$timeout){return useAnchorScroll?$anchorScroll:function($element){$timeout(function(){$element[0].scrollIntoView()},0,!1)}}]}function $ViewDirective($state,$injector,$uiViewScroll){function getService(){return $injector.has?function(service){return $injector.has(service)?$injector.get(service):null}:function(service){try{return $injector.get(service)}catch(e){return null}}}function getRenderer(attrs,scope){var statics=function(){return{enter:function(element,target,cb){target.after(element),cb()},leave:function(element,cb){element.remove(),cb()}}};if($animate)return{enter:function(element,target,cb){$animate.enter(element,null,target,cb)},leave:function(element,cb){$animate.leave(element,cb)}};if($animator){var animate=$animator&&$animator(scope,attrs);return{enter:function(element,target,cb){animate.enter(element,null,target),cb()},leave:function(element,cb){animate.leave(element),cb()}}}return statics()}var service=getService(),$animator=service("$animator"),$animate=service("$animate"),directive={restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(tElement,tAttrs,$transclude){return function(scope,$element,attrs){function cleanupLastView(){previousEl&&(previousEl.remove(),previousEl=null),currentScope&&(currentScope.$destroy(),currentScope=null),currentEl&&(renderer.leave(currentEl,function(){previousEl=null}),previousEl=currentEl,currentEl=null)}function updateView(firstTime){var newScope=scope.$new(),name=currentEl&&currentEl.data("$uiViewName"),previousLocals=name&&$state.$current&&$state.$current.locals[name];if(firstTime||previousLocals!==latestLocals){var clone=$transclude(newScope,function(clone){renderer.enter(clone,$element,function(){(angular.isDefined(autoScrollExp)&&!autoScrollExp||scope.$eval(autoScrollExp))&&$uiViewScroll(clone)}),cleanupLastView()});latestLocals=$state.$current.locals[clone.data("$uiViewName")],currentEl=clone,currentScope=newScope,currentScope.$emit("$viewContentLoaded"),currentScope.$eval(onloadExp)}}var previousEl,currentEl,currentScope,latestLocals,onloadExp=attrs.onload||"",autoScrollExp=attrs.autoscroll,renderer=getRenderer(attrs,scope);scope.$on("$stateChangeSuccess",function(){updateView(!1)}),scope.$on("$viewContentLoading",function(){updateView(!1)}),updateView(!0)}}};return directive}function $ViewDirectiveFill($compile,$controller,$state){return{restrict:"ECA",priority:-400,compile:function(tElement){var initial=tElement.html();return function(scope,$element,attrs){var name=attrs.uiView||attrs.name||"",inherited=$element.inheritedData("$uiView");name.indexOf("@")<0&&(name=name+"@"+(inherited?inherited.state.name:"")),$element.data("$uiViewName",name);var current=$state.$current,locals=current&&current.locals[name];if(locals){$element.data("$uiView",{name:name,state:locals.$$state}),$element.html(locals.$template?locals.$template:initial);var link=$compile($element.contents());
if(locals.$$controller){locals.$scope=scope;var controller=$controller(locals.$$controller,locals);locals.$$controllerAs&&(scope[locals.$$controllerAs]=controller),$element.data("$ngControllerController",controller),$element.children().data("$ngControllerController",controller)}link(scope)}}}}}function parseStateRef(ref){var parsed=ref.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/);if(!parsed||4!==parsed.length)throw new Error("Invalid state ref '"+ref+"'");return{state:parsed[1],paramExpr:parsed[3]||null}}function stateContext(el){var stateData=el.parent().inheritedData("$uiView");return stateData&&stateData.state&&stateData.state.name?stateData.state:void 0}function $StateRefDirective($state,$timeout){var allowedOptions=["location","inherit","reload"];return{restrict:"A",require:"?^uiSrefActive",link:function(scope,element,attrs,uiSrefActive){var ref=parseStateRef(attrs.uiSref),params=null,base=stateContext(element)||$state.$current,isForm="FORM"===element[0].nodeName,attr=isForm?"action":"href",nav=!0,options={relative:base},optionsOverride=scope.$eval(attrs.uiSrefOpts)||{};angular.forEach(allowedOptions,function(option){option in optionsOverride&&(options[option]=optionsOverride[option])});var update=function(newVal){if(newVal&&(params=newVal),nav){var newHref=$state.href(ref.state,params,options);return uiSrefActive&&uiSrefActive.$$setStateInfo(ref.state,params),newHref?void(element[0][attr]=newHref):(nav=!1,!1)}};ref.paramExpr&&(scope.$watch(ref.paramExpr,function(newVal){newVal!==params&&update(newVal)},!0),params=scope.$eval(ref.paramExpr)),update(),isForm||element.bind("click",function(e){var button=e.which||e.button;button>1||e.ctrlKey||e.metaKey||e.shiftKey||element.attr("target")||($timeout(function(){$state.go(ref.state,params,options)}),e.preventDefault())})}}}function $StateActiveDirective($state,$stateParams,$interpolate){return{restrict:"A",controller:["$scope","$element","$attrs",function($scope,$element,$attrs){function update(){$state.$current.self===state&&matchesParams()?$element.addClass(activeClass):$element.removeClass(activeClass)}function matchesParams(){return!params||equalForKeys(params,$stateParams)}var state,params,activeClass;activeClass=$interpolate($attrs.uiSrefActive||"",!1)($scope),this.$$setStateInfo=function(newState,newParams){state=$state.get(newState,stateContext($element)),params=newParams,update()},$scope.$on("$stateChangeSuccess",update)}]}}function $IsStateFilter($state){return function(state){return $state.is(state)}}function $IncludedByStateFilter($state){return function(state){return $state.includes(state)}}function $RouteProvider($stateProvider,$urlRouterProvider){function onEnterRoute($$state){this.locals=$$state.locals.globals,this.params=this.locals.$stateParams}function onExitRoute(){this.locals=null,this.params=null}function when(url,route){if(null!=route.redirectTo){var handler,redirect=route.redirectTo;if(isString(redirect))handler=redirect;else{if(!isFunction(redirect))throw new Error("Invalid 'redirectTo' in when()");handler=function(params,$location){return redirect(params,$location.path(),$location.search())}}$urlRouterProvider.when(url,handler)}else $stateProvider.state(inherit(route,{parent:null,name:"route:"+encodeURIComponent(url),url:url,onEnter:onEnterRoute,onExit:onExitRoute}));return routes.push(route),this}function $get($state,$rootScope,$routeParams){function stateAsRoute(state){return""!==state.name?state:undefined}var $route={routes:routes,params:$routeParams,current:undefined};return $rootScope.$on("$stateChangeStart",function(ev,to,toParams,from){$rootScope.$broadcast("$routeChangeStart",stateAsRoute(to),stateAsRoute(from))}),$rootScope.$on("$stateChangeSuccess",function(ev,to,toParams,from){$route.current=stateAsRoute(to),$rootScope.$broadcast("$routeChangeSuccess",stateAsRoute(to),stateAsRoute(from)),copy(toParams,$route.params)}),$rootScope.$on("$stateChangeError",function(ev,to,toParams,from,fromParams,error){$rootScope.$broadcast("$routeChangeError",stateAsRoute(to),stateAsRoute(from),error)}),$route}var routes=[];onEnterRoute.$inject=["$$state"],this.when=when,this.$get=$get,$get.$inject=["$state","$rootScope","$routeParams"]}var isDefined=angular.isDefined,isFunction=angular.isFunction,isString=angular.isString,isObject=angular.isObject,isArray=angular.isArray,forEach=angular.forEach,extend=angular.extend,copy=angular.copy;angular.module("ui.router.util",["ng"]),angular.module("ui.router.router",["ui.router.util"]),angular.module("ui.router.state",["ui.router.router","ui.router.util"]),angular.module("ui.router",["ui.router.state"]),angular.module("ui.router.compat",["ui.router"]),$Resolve.$inject=["$q","$injector"],angular.module("ui.router.util").service("$resolve",$Resolve),$TemplateFactory.$inject=["$http","$templateCache","$injector"],angular.module("ui.router.util").service("$templateFactory",$TemplateFactory),UrlMatcher.prototype.concat=function(pattern){return new UrlMatcher(this.sourcePath+pattern+this.sourceSearch)},UrlMatcher.prototype.toString=function(){return this.source},UrlMatcher.prototype.exec=function(path,searchParams){var m=this.regexp.exec(path);if(!m)return null;var i,params=this.params,nTotal=params.length,nPath=this.segments.length-1,values={};if(nPath!==m.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");for(i=0;nPath>i;i++)values[params[i]]=m[i+1];for(;nTotal>i;i++)values[params[i]]=searchParams[params[i]];return values},UrlMatcher.prototype.parameters=function(){return this.params},UrlMatcher.prototype.format=function(values){var segments=this.segments,params=this.params;if(!values)return segments.join("");var i,search,value,nPath=segments.length-1,nTotal=params.length,result=segments[0];for(i=0;nPath>i;i++)value=values[params[i]],null!=value&&(result+=encodeURIComponent(value)),result+=segments[i+1];for(;nTotal>i;i++)value=values[params[i]],null!=value&&(result+=(search?"&":"?")+params[i]+"="+encodeURIComponent(value),search=!0);return result},angular.module("ui.router.util").provider("$urlMatcherFactory",$UrlMatcherFactory),$UrlRouterProvider.$inject=["$urlMatcherFactoryProvider"],angular.module("ui.router.router").provider("$urlRouter",$UrlRouterProvider),$StateProvider.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider","$locationProvider"],angular.module("ui.router.state").value("$stateParams",{}).provider("$state",$StateProvider),$ViewProvider.$inject=[],angular.module("ui.router.state").provider("$view",$ViewProvider),angular.module("ui.router.state").provider("$uiViewScroll",$ViewScrollProvider),$ViewDirective.$inject=["$state","$injector","$uiViewScroll"],$ViewDirectiveFill.$inject=["$compile","$controller","$state"],angular.module("ui.router.state").directive("uiView",$ViewDirective),angular.module("ui.router.state").directive("uiView",$ViewDirectiveFill),$StateRefDirective.$inject=["$state","$timeout"],$StateActiveDirective.$inject=["$state","$stateParams","$interpolate"],angular.module("ui.router.state").directive("uiSref",$StateRefDirective).directive("uiSrefActive",$StateActiveDirective),$IsStateFilter.$inject=["$state"],$IncludedByStateFilter.$inject=["$state"],angular.module("ui.router.state").filter("isState",$IsStateFilter).filter("includedByState",$IncludedByStateFilter),$RouteProvider.$inject=["$stateProvider","$urlRouterProvider"],angular.module("ui.router.compat").provider("$route",$RouteProvider).directive("ngView",$ViewDirective)}(window,window.angular),define("angular-ui-router",["jquery","angular"],function(global){return function(){var ret,fn;return fn=function(){return this.angular.module("ui.router")},ret=fn.apply(global,arguments)}}(this)),angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.transition","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.bindHtml","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.position","ui.bootstrap.datepicker","ui.bootstrap.dropdownToggle","ui.bootstrap.modal","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["template/accordion/accordion-group.html","template/accordion/accordion.html","template/alert/alert.html","template/carousel/carousel.html","template/carousel/slide.html","template/datepicker/datepicker.html","template/datepicker/popup.html","template/modal/backdrop.html","template/modal/window.html","template/pagination/pager.html","template/pagination/pagination.html","template/tooltip/tooltip-html-unsafe-popup.html","template/tooltip/tooltip-popup.html","template/popover/popover.html","template/progressbar/bar.html","template/progressbar/progress.html","template/progressbar/progressbar.html","template/rating/rating.html","template/tabs/tab.html","template/tabs/tabset.html","template/timepicker/timepicker.html","template/typeahead/typeahead-match.html","template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function(a,b,c){function d(a){for(var b in a)if(void 0!==f.style[b])return a[b]}var e=function(d,f,g){g=g||{};var h=a.defer(),i=e[g.animation?"animationEndEventName":"transitionEndEventName"],j=function(){c.$apply(function(){d.unbind(i,j),h.resolve(d)})};return i&&d.bind(i,j),b(function(){angular.isString(f)?d.addClass(f):angular.isFunction(f)?f(d):angular.isObject(f)&&d.css(f),i||h.resolve(d)}),h.promise.cancel=function(){i&&d.unbind(i,j),h.reject("Transition cancelled")},h.promise},f=document.createElement("trans"),g={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},h={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return e.transitionEndEventName=d(g),e.animationEndEventName=d(h),e}]),angular.module("ui.bootstrap.collapse",["ui.bootstrap.transition"]).directive("collapse",["$transition",function(a){return{link:function(b,c,d){function e(b){function d(){j===e&&(j=void 0)}var e=a(c,b);return j&&j.cancel(),j=e,e.then(d,d),e}function f(){k?(k=!1,g()):(c.removeClass("collapse").addClass("collapsing"),e({height:c[0].scrollHeight+"px"}).then(g))}function g(){c.removeClass("collapsing"),c.addClass("collapse in"),c.css({height:"auto"})}function h(){k?(k=!1,i(),c.css({height:0})):(c.css({height:c[0].scrollHeight+"px"}),c[0].offsetWidth,c.removeClass("collapse in").addClass("collapsing"),e({height:0}).then(i))}function i(){c.removeClass("collapsing"),c.addClass("collapse")}var j,k=!0;b.$watch(d.collapse,function(a){a?h():f()})}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("accordionConfig",{closeOthers:!0}).controller("AccordionController",["$scope","$attrs","accordionConfig",function(a,b,c){this.groups=[],this.closeOthers=function(d){var e=angular.isDefined(b.closeOthers)?a.$eval(b.closeOthers):c.closeOthers;e&&angular.forEach(this.groups,function(a){a!==d&&(a.isOpen=!1)})},this.addGroup=function(a){var b=this;this.groups.push(a),a.$on("$destroy",function(){b.removeGroup(a)})},this.removeGroup=function(a){var b=this.groups.indexOf(a);-1!==b&&this.groups.splice(this.groups.indexOf(a),1)}}]).directive("accordion",function(){return{restrict:"EA",controller:"AccordionController",transclude:!0,replace:!1,templateUrl:"template/accordion/accordion.html"}}).directive("accordionGroup",["$parse",function(a){return{require:"^accordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/accordion/accordion-group.html",scope:{heading:"@"},controller:function(){this.setHeading=function(a){this.heading=a}},link:function(b,c,d,e){var f,g;e.addGroup(b),b.isOpen=!1,d.isOpen&&(f=a(d.isOpen),g=f.assign,b.$parent.$watch(f,function(a){b.isOpen=!!a})),b.$watch("isOpen",function(a){a&&e.closeOthers(b),g&&g(b.$parent,a)})}}}]).directive("accordionHeading",function(){return{restrict:"EA",transclude:!0,template:"",replace:!0,require:"^accordionGroup",compile:function(a,b,c){return function(a,b,d,e){e.setHeading(c(a,function(){}))}}}}).directive("accordionTransclude",function(){return{require:"^accordionGroup",link:function(a,b,c,d){a.$watch(function(){return d[c.accordionTransclude]},function(a){a&&(b.html(""),b.append(a))})}}}),angular.module("ui.bootstrap.alert",[]).controller("AlertController",["$scope","$attrs",function(a,b){a.closeable="close"in b}]).directive("alert",function(){return{restrict:"EA",controller:"AlertController",templateUrl:"template/alert/alert.html",transclude:!0,replace:!0,scope:{type:"=",close:"&"}}}),angular.module("ui.bootstrap.bindHtml",[]).directive("bindHtmlUnsafe",function(){return function(a,b,c){b.addClass("ng-binding").data("$binding",c.bindHtmlUnsafe),a.$watch(c.bindHtmlUnsafe,function(a){b.html(a||"")})}}),angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).controller("ButtonsController",["buttonConfig",function(a){this.activeClass=a.activeClass||"active",this.toggleEvent=a.toggleEvent||"click"}]).directive("btnRadio",function(){return{require:["btnRadio","ngModel"],controller:"ButtonsController",link:function(a,b,c,d){var e=d[0],f=d[1];f.$render=function(){b.toggleClass(e.activeClass,angular.equals(f.$modelValue,a.$eval(c.btnRadio)))},b.bind(e.toggleEvent,function(){b.hasClass(e.activeClass)||a.$apply(function(){f.$setViewValue(a.$eval(c.btnRadio)),f.$render()})})}}}).directive("btnCheckbox",function(){return{require:["btnCheckbox","ngModel"],controller:"ButtonsController",link:function(a,b,c,d){function e(){return g(c.btnCheckboxTrue,!0)}function f(){return g(c.btnCheckboxFalse,!1)}function g(b,c){var d=a.$eval(b);return angular.isDefined(d)?d:c}var h=d[0],i=d[1];i.$render=function(){b.toggleClass(h.activeClass,angular.equals(i.$modelValue,e()))},b.bind(h.toggleEvent,function(){a.$apply(function(){i.$setViewValue(b.hasClass(h.activeClass)?f():e()),i.$render()})})}}}),angular.module("ui.bootstrap.carousel",["ui.bootstrap.transition"]).controller("CarouselController",["$scope","$timeout","$transition","$q",function(a,b,c){function d(){e();var c=+a.interval;!isNaN(c)&&c>=0&&(g=b(f,c))}function e(){g&&(b.cancel(g),g=null)}function f(){h?(a.next(),d()):a.pause()}var g,h,i=this,j=i.slides=[],k=-1;i.currentSlide=null;var l=!1;i.select=function(e,f){function g(){l||(i.currentSlide&&angular.isString(f)&&!a.noTransition&&e.$element?(e.$element.addClass(f),e.$element[0].offsetWidth,angular.forEach(j,function(a){angular.extend(a,{direction:"",entering:!1,leaving:!1,active:!1})}),angular.extend(e,{direction:f,active:!0,entering:!0}),angular.extend(i.currentSlide||{},{direction:f,leaving:!0}),a.$currentTransition=c(e.$element,{}),function(b,c){a.$currentTransition.then(function(){h(b,c)},function(){h(b,c)})}(e,i.currentSlide)):h(e,i.currentSlide),i.currentSlide=e,k=m,d())}function h(b,c){angular.extend(b,{direction:"",active:!0,leaving:!1,entering:!1}),angular.extend(c||{},{direction:"",active:!1,leaving:!1,entering:!1}),a.$currentTransition=null}var m=j.indexOf(e);void 0===f&&(f=m>k?"next":"prev"),e&&e!==i.currentSlide&&(a.$currentTransition?(a.$currentTransition.cancel(),b(g)):g())},a.$on("$destroy",function(){l=!0}),i.indexOfSlide=function(a){return j.indexOf(a)},a.next=function(){var b=(k+1)%j.length;return a.$currentTransition?void 0:i.select(j[b],"next")},a.prev=function(){var b=0>k-1?j.length-1:k-1;return a.$currentTransition?void 0:i.select(j[b],"prev")},a.select=function(a){i.select(a)},a.isActive=function(a){return i.currentSlide===a},a.slides=function(){return j},a.$watch("interval",d),a.$on("$destroy",e),a.play=function(){h||(h=!0,d())},a.pause=function(){a.noPause||(h=!1,e())},i.addSlide=function(b,c){b.$element=c,j.push(b),1===j.length||b.active?(i.select(j[j.length-1]),1==j.length&&a.play()):b.active=!1},i.removeSlide=function(a){var b=j.indexOf(a);j.splice(b,1),j.length>0&&a.active?i.select(b>=j.length?j[b-1]:j[b]):k>b&&k--}}]).directive("carousel",[function(){return{restrict:"EA",transclude:!0,replace:!0,controller:"CarouselController",require:"carousel",templateUrl:"template/carousel/carousel.html",scope:{interval:"=",noTransition:"=",noPause:"="}}}]).directive("slide",["$parse",function(a){return{require:"^carousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/carousel/slide.html",scope:{},link:function(b,c,d,e){if(d.active){var f=a(d.active),g=f.assign,h=b.active=f(b.$parent);b.$watch(function(){var a=f(b.$parent);return a!==b.active&&(a!==h?h=b.active=a:g(b.$parent,a=h=b.active)),a})}e.addSlide(b,c),b.$on("$destroy",function(){e.removeSlide(b)}),b.$watch("active",function(a){a&&e.select(b)})}}}]),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(a,b){function c(a,c){return a.currentStyle?a.currentStyle[c]:b.getComputedStyle?b.getComputedStyle(a)[c]:a.style[c]}function d(a){return"static"===(c(a,"position")||"static")}var e=function(b){for(var c=a[0],e=b.offsetParent||c;e&&e!==c&&d(e);)e=e.offsetParent;return e||c};return{position:function(b){var c=this.offset(b),d={top:0,left:0},f=e(b[0]);f!=a[0]&&(d=this.offset(angular.element(f)),d.top+=f.clientTop-f.scrollTop,d.left+=f.clientLeft-f.scrollLeft);var g=b[0].getBoundingClientRect();return{width:g.width||b.prop("offsetWidth"),height:g.height||b.prop("offsetHeight"),top:c.top-d.top,left:c.left-d.left}},offset:function(c){var d=c[0].getBoundingClientRect();return{width:d.width||c.prop("offsetWidth"),height:d.height||c.prop("offsetHeight"),top:d.top+(b.pageYOffset||a[0].body.scrollTop||a[0].documentElement.scrollTop),left:d.left+(b.pageXOffset||a[0].body.scrollLeft||a[0].documentElement.scrollLeft)}}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.position"]).constant("datepickerConfig",{dayFormat:"dd",monthFormat:"MMMM",yearFormat:"yyyy",dayHeaderFormat:"EEE",dayTitleFormat:"MMMM yyyy",monthTitleFormat:"yyyy",showWeeks:!0,startingDay:0,yearRange:20,minDate:null,maxDate:null}).controller("DatepickerController",["$scope","$attrs","dateFilter","datepickerConfig",function(a,b,c,d){function e(b,c){return angular.isDefined(b)?a.$parent.$eval(b):c}function f(a,b){return new Date(a,b,0).getDate()}function g(a,b){for(var c=new Array(b),d=a,e=0;b>e;)c[e++]=new Date(d),d.setDate(d.getDate()+1);return c}function h(a,b,d,e){return{date:a,label:c(a,b),selected:!!d,secondary:!!e}}var i={day:e(b.dayFormat,d.dayFormat),month:e(b.monthFormat,d.monthFormat),year:e(b.yearFormat,d.yearFormat),dayHeader:e(b.dayHeaderFormat,d.dayHeaderFormat),dayTitle:e(b.dayTitleFormat,d.dayTitleFormat),monthTitle:e(b.monthTitleFormat,d.monthTitleFormat)},j=e(b.startingDay,d.startingDay),k=e(b.yearRange,d.yearRange);this.minDate=d.minDate?new Date(d.minDate):null,this.maxDate=d.maxDate?new Date(d.maxDate):null,this.modes=[{name:"day",getVisibleDates:function(a,b){var d=a.getFullYear(),e=a.getMonth(),k=new Date(d,e,1),l=j-k.getDay(),m=l>0?7-l:-l,n=new Date(k),o=0;m>0&&(n.setDate(-m+1),o+=m),o+=f(d,e+1),o+=(7-o%7)%7;for(var p=g(n,o),q=new Array(7),r=0;o>r;r++){var s=new Date(p[r]);p[r]=h(s,i.day,b&&b.getDate()===s.getDate()&&b.getMonth()===s.getMonth()&&b.getFullYear()===s.getFullYear(),s.getMonth()!==e)}for(var t=0;7>t;t++)q[t]=c(p[t].date,i.dayHeader);return{objects:p,title:c(a,i.dayTitle),labels:q}},compare:function(a,b){return new Date(a.getFullYear(),a.getMonth(),a.getDate())-new Date(b.getFullYear(),b.getMonth(),b.getDate())},split:7,step:{months:1}},{name:"month",getVisibleDates:function(a,b){for(var d=new Array(12),e=a.getFullYear(),f=0;12>f;f++){var g=new Date(e,f,1);d[f]=h(g,i.month,b&&b.getMonth()===f&&b.getFullYear()===e)}return{objects:d,title:c(a,i.monthTitle)}},compare:function(a,b){return new Date(a.getFullYear(),a.getMonth())-new Date(b.getFullYear(),b.getMonth())},split:3,step:{years:1}},{name:"year",getVisibleDates:function(a,b){for(var c=new Array(k),d=a.getFullYear(),e=parseInt((d-1)/k,10)*k+1,f=0;k>f;f++){var g=new Date(e+f,0,1);c[f]=h(g,i.year,b&&b.getFullYear()===g.getFullYear())}return{objects:c,title:[c[0].label,c[k-1].label].join(" - ")}},compare:function(a,b){return a.getFullYear()-b.getFullYear()},split:5,step:{years:k}}],this.isDisabled=function(b,c){var d=this.modes[c||0];return this.minDate&&d.compare(b,this.minDate)<0||this.maxDate&&d.compare(b,this.maxDate)>0||a.dateDisabled&&a.dateDisabled({date:b,mode:d.name})}}]).directive("datepicker",["dateFilter","$parse","datepickerConfig","$log",function(a,b,c,d){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/datepicker.html",scope:{dateDisabled:"&"},require:["datepicker","?^ngModel"],controller:"DatepickerController",link:function(a,e,f,g){function h(){a.showWeekNumbers=0===o&&q}function i(a,b){for(var c=[];a.length>0;)c.push(a.splice(0,b));return c}function j(b){var c=null,e=!0;n.$modelValue&&(c=new Date(n.$modelValue),isNaN(c)?(e=!1,d.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):b&&(p=c)),n.$setValidity("date",e);var f=m.modes[o],g=f.getVisibleDates(p,c);angular.forEach(g.objects,function(a){a.disabled=m.isDisabled(a.date,o)}),n.$setValidity("date-disabled",!c||!m.isDisabled(c)),a.rows=i(g.objects,f.split),a.labels=g.labels||[],a.title=g.title}function k(a){o=a,h(),j()}function l(a){var b=new Date(a);b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/864e5)/7)+1}var m=g[0],n=g[1];if(n){var o=0,p=new Date,q=c.showWeeks;f.showWeeks?a.$parent.$watch(b(f.showWeeks),function(a){q=!!a,h()}):h(),f.min&&a.$parent.$watch(b(f.min),function(a){m.minDate=a?new Date(a):null,j()}),f.max&&a.$parent.$watch(b(f.max),function(a){m.maxDate=a?new Date(a):null,j()}),n.$render=function(){j(!0)},a.select=function(a){if(0===o){var b=n.$modelValue?new Date(n.$modelValue):new Date(0,0,0,0,0,0,0);b.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),n.$setViewValue(b),j(!0)}else p=a,k(o-1)},a.move=function(a){var b=m.modes[o].step;p.setMonth(p.getMonth()+a*(b.months||0)),p.setFullYear(p.getFullYear()+a*(b.years||0)),j()},a.toggleMode=function(){k((o+1)%m.modes.length)},a.getWeekNumber=function(b){return 0===o&&a.showWeekNumbers&&7===b.length?l(b[0].date):null}}}}}]).constant("datepickerPopupConfig",{dateFormat:"yyyy-MM-dd",currentText:"Today",toggleWeeksText:"Weeks",clearText:"Clear",closeText:"Done",closeOnDateSelection:!0,appendToBody:!1,showButtonBar:!0}).directive("datepickerPopup",["$compile","$parse","$document","$position","dateFilter","datepickerPopupConfig","datepickerConfig",function(a,b,c,d,e,f,g){return{restrict:"EA",require:"ngModel",link:function(h,i,j,k){function l(a){u?u(h,!!a):q.isOpen=!!a}function m(a){if(a){if(angular.isDate(a))return k.$setValidity("date",!0),a;if(angular.isString(a)){var b=new Date(a);return isNaN(b)?void k.$setValidity("date",!1):(k.$setValidity("date",!0),b)}return void k.$setValidity("date",!1)}return k.$setValidity("date",!0),null}function n(a,c,d){a&&(h.$watch(b(a),function(a){q[c]=a}),y.attr(d||c,c))}function o(){q.position=s?d.offset(i):d.position(i),q.position.top=q.position.top+i.prop("offsetHeight")}var p,q=h.$new(),r=angular.isDefined(j.closeOnDateSelection)?h.$eval(j.closeOnDateSelection):f.closeOnDateSelection,s=angular.isDefined(j.datepickerAppendToBody)?h.$eval(j.datepickerAppendToBody):f.appendToBody;j.$observe("datepickerPopup",function(a){p=a||f.dateFormat,k.$render()}),q.showButtonBar=angular.isDefined(j.showButtonBar)?h.$eval(j.showButtonBar):f.showButtonBar,h.$on("$destroy",function(){C.remove(),q.$destroy()}),j.$observe("currentText",function(a){q.currentText=angular.isDefined(a)?a:f.currentText}),j.$observe("toggleWeeksText",function(a){q.toggleWeeksText=angular.isDefined(a)?a:f.toggleWeeksText}),j.$observe("clearText",function(a){q.clearText=angular.isDefined(a)?a:f.clearText}),j.$observe("closeText",function(a){q.closeText=angular.isDefined(a)?a:f.closeText});var t,u;j.isOpen&&(t=b(j.isOpen),u=t.assign,h.$watch(t,function(a){q.isOpen=!!a})),q.isOpen=t?t(h):!1;var v=function(a){q.isOpen&&a.target!==i[0]&&q.$apply(function(){l(!1)})},w=function(){q.$apply(function(){l(!0)})},x=angular.element("<div datepicker-popup-wrap><div datepicker></div></div>");x.attr({"ng-model":"date","ng-change":"dateSelection()"});var y=angular.element(x.children()[0]),z={};j.datepickerOptions&&(z=h.$eval(j.datepickerOptions),y.attr(angular.extend({},z))),k.$parsers.unshift(m),q.dateSelection=function(a){angular.isDefined(a)&&(q.date=a),k.$setViewValue(q.date),k.$render(),r&&l(!1)},i.bind("input change keyup",function(){q.$apply(function(){q.date=k.$modelValue})}),k.$render=function(){var a=k.$viewValue?e(k.$viewValue,p):"";i.val(a),q.date=k.$modelValue},n(j.min,"min"),n(j.max,"max"),j.showWeeks?n(j.showWeeks,"showWeeks","show-weeks"):(q.showWeeks="show-weeks"in z?z["show-weeks"]:g.showWeeks,y.attr("show-weeks","showWeeks")),j.dateDisabled&&y.attr("date-disabled",j.dateDisabled);var A=!1,B=!1;q.$watch("isOpen",function(a){a?(o(),c.bind("click",v),B&&i.unbind("focus",w),i[0].focus(),A=!0):(A&&c.unbind("click",v),i.bind("focus",w),B=!0),u&&u(h,a)}),q.today=function(){q.dateSelection(new Date)},q.clear=function(){q.dateSelection(null)};var C=a(x)(q);s?c.find("body").append(C):i.after(C)}}}]).directive("datepickerPopupWrap",function(){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:"template/datepicker/popup.html",link:function(a,b){b.bind("click",function(a){a.preventDefault(),a.stopPropagation()})}}}),angular.module("ui.bootstrap.dropdownToggle",[]).directive("dropdownToggle",["$document","$location",function(a){var b=null,c=angular.noop;return{restrict:"CA",link:function(d,e){d.$watch("$location.path",function(){c()}),e.parent().bind("click",function(){c()}),e.bind("click",function(d){var f=e===b;d.preventDefault(),d.stopPropagation(),b&&c(),f||e.hasClass("disabled")||e.prop("disabled")||(e.parent().addClass("open"),b=e,c=function(d){d&&(d.preventDefault(),d.stopPropagation()),a.unbind("click",c),e.parent().removeClass("open"),c=angular.noop,b=null},a.bind("click",c))})}}}]),angular.module("ui.bootstrap.modal",["ui.bootstrap.transition"]).factory("$$stackedMap",function(){return{createNew:function(){var a=[];return{add:function(b,c){a.push({key:b,value:c})},get:function(b){for(var c=0;c<a.length;c++)if(b==a[c].key)return a[c]},keys:function(){for(var b=[],c=0;c<a.length;c++)b.push(a[c].key);return b},top:function(){return a[a.length-1]},remove:function(b){for(var c=-1,d=0;d<a.length;d++)if(b==a[d].key){c=d;break}return a.splice(c,1)[0]},removeTop:function(){return a.splice(a.length-1,1)[0]},length:function(){return a.length}}}}}).directive("modalBackdrop",["$timeout",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/modal/backdrop.html",link:function(b){b.animate=!1,a(function(){b.animate=!0})}}}]).directive("modalWindow",["$modalStack","$timeout",function(a,b){return{restrict:"EA",scope:{index:"@",animate:"="},replace:!0,transclude:!0,templateUrl:"template/modal/window.html",link:function(c,d,e){c.windowClass=e.windowClass||"",b(function(){c.animate=!0,d[0].focus()}),c.close=function(b){var c=a.getTop();c&&c.value.backdrop&&"static"!=c.value.backdrop&&b.target===b.currentTarget&&(b.preventDefault(),b.stopPropagation(),a.dismiss(c.key,"backdrop click"))}}}}]).factory("$modalStack",["$transition","$timeout","$document","$compile","$rootScope","$$stackedMap",function(a,b,c,d,e,f){function g(){for(var a=-1,b=n.keys(),c=0;c<b.length;c++)n.get(b[c]).value.backdrop&&(a=c);return a}function h(a){var b=c.find("body").eq(0),d=n.get(a).value;n.remove(a),j(d.modalDomEl,d.modalScope,300,i),b.toggleClass(m,n.length()>0)}function i(){if(k&&-1==g()){var a=l;j(k,l,150,function(){a.$destroy(),a=null}),k=void 0,l=void 0}}function j(c,d,e,f){function g(){g.done||(g.done=!0,c.remove(),f&&f())}d.animate=!1;var h=a.transitionEndEventName;if(h){var i=b(g,e);c.bind(h,function(){b.cancel(i),g(),d.$apply()})}else b(g,0)}var k,l,m="modal-open",n=f.createNew(),o={};return e.$watch(g,function(a){l&&(l.index=a)}),c.bind("keydown",function(a){var b;27===a.which&&(b=n.top(),b&&b.value.keyboard&&e.$apply(function(){o.dismiss(b.key)}))}),o.open=function(a,b){n.add(a,{deferred:b.deferred,modalScope:b.scope,backdrop:b.backdrop,keyboard:b.keyboard});var f=c.find("body").eq(0),h=g();h>=0&&!k&&(l=e.$new(!0),l.index=h,k=d("<div modal-backdrop></div>")(l),f.append(k));var i=angular.element("<div modal-window></div>");i.attr("window-class",b.windowClass),i.attr("index",n.length()-1),i.attr("animate","animate"),i.html(b.content);var j=d(i)(b.scope);n.top().value.modalDomEl=j,f.append(j),f.addClass(m)},o.close=function(a,b){var c=n.get(a).value;c&&(c.deferred.resolve(b),h(a))},o.dismiss=function(a,b){var c=n.get(a).value;c&&(c.deferred.reject(b),h(a))},o.dismissAll=function(a){for(var b=this.getTop();b;)this.dismiss(b.key,a),b=this.getTop()},o.getTop=function(){return n.top()},o}]).provider("$modal",function(){var a={options:{backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$http","$templateCache","$controller","$modalStack",function(b,c,d,e,f,g,h){function i(a){return a.template?d.when(a.template):e.get(a.templateUrl,{cache:f}).then(function(a){return a.data})}function j(a){var c=[];return angular.forEach(a,function(a){(angular.isFunction(a)||angular.isArray(a))&&c.push(d.when(b.invoke(a)))}),c}var k={};return k.open=function(b){var e=d.defer(),f=d.defer(),k={result:e.promise,opened:f.promise,close:function(a){h.close(k,a)},dismiss:function(a){h.dismiss(k,a)}};if(b=angular.extend({},a.options,b),b.resolve=b.resolve||{},!b.template&&!b.templateUrl)throw new Error("One of template or templateUrl options is required.");var l=d.all([i(b)].concat(j(b.resolve)));return l.then(function(a){var d=(b.scope||c).$new();d.$close=k.close,d.$dismiss=k.dismiss;var f,i={},j=1;b.controller&&(i.$scope=d,i.$modalInstance=k,angular.forEach(b.resolve,function(b,c){i[c]=a[j++]}),f=g(b.controller,i)),h.open(k,{scope:d,deferred:e,content:a[0],backdrop:b.backdrop,keyboard:b.keyboard,windowClass:b.windowClass})},function(a){e.reject(a)}),l.then(function(){f.resolve(!0)},function(){f.reject(!1)}),k},k}]};return a}),angular.module("ui.bootstrap.pagination",[]).controller("PaginationController",["$scope","$attrs","$parse","$interpolate",function(a,b,c,d){var e=this,f=b.numPages?c(b.numPages).assign:angular.noop;this.init=function(d){b.itemsPerPage?a.$parent.$watch(c(b.itemsPerPage),function(b){e.itemsPerPage=parseInt(b,10),a.totalPages=e.calculateTotalPages()}):this.itemsPerPage=d},this.noPrevious=function(){return 1===this.page},this.noNext=function(){return this.page===a.totalPages},this.isActive=function(a){return this.page===a},this.calculateTotalPages=function(){var b=this.itemsPerPage<1?1:Math.ceil(a.totalItems/this.itemsPerPage);return Math.max(b||0,1)},this.getAttributeValue=function(b,c,e){return angular.isDefined(b)?e?d(b)(a.$parent):a.$parent.$eval(b):c},this.render=function(){this.page=parseInt(a.page,10)||1,this.page>0&&this.page<=a.totalPages&&(a.pages=this.getPages(this.page,a.totalPages))},a.selectPage=function(b){!e.isActive(b)&&b>0&&b<=a.totalPages&&(a.page=b,a.onSelectPage({page:b}))},a.$watch("page",function(){e.render()}),a.$watch("totalItems",function(){a.totalPages=e.calculateTotalPages()}),a.$watch("totalPages",function(b){f(a.$parent,b),e.page>b?a.selectPage(b):e.render()})}]).constant("paginationConfig",{itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("pagination",["$parse","paginationConfig",function(a,b){return{restrict:"EA",scope:{page:"=",totalItems:"=",onSelectPage:" &"},controller:"PaginationController",templateUrl:"template/pagination/pagination.html",replace:!0,link:function(c,d,e,f){function g(a,b,c,d){return{number:a,text:b,active:c,disabled:d}}var h,i=f.getAttributeValue(e.boundaryLinks,b.boundaryLinks),j=f.getAttributeValue(e.directionLinks,b.directionLinks),k=f.getAttributeValue(e.firstText,b.firstText,!0),l=f.getAttributeValue(e.previousText,b.previousText,!0),m=f.getAttributeValue(e.nextText,b.nextText,!0),n=f.getAttributeValue(e.lastText,b.lastText,!0),o=f.getAttributeValue(e.rotate,b.rotate);
f.init(b.itemsPerPage),e.maxSize&&c.$parent.$watch(a(e.maxSize),function(a){h=parseInt(a,10),f.render()}),f.getPages=function(a,b){var c=[],d=1,e=b,p=angular.isDefined(h)&&b>h;p&&(o?(d=Math.max(a-Math.floor(h/2),1),e=d+h-1,e>b&&(e=b,d=e-h+1)):(d=(Math.ceil(a/h)-1)*h+1,e=Math.min(d+h-1,b)));for(var q=d;e>=q;q++){var r=g(q,q,f.isActive(q),!1);c.push(r)}if(p&&!o){if(d>1){var s=g(d-1,"...",!1,!1);c.unshift(s)}if(b>e){var t=g(e+1,"...",!1,!1);c.push(t)}}if(j){var u=g(a-1,l,!1,f.noPrevious());c.unshift(u);var v=g(a+1,m,!1,f.noNext());c.push(v)}if(i){var w=g(1,k,!1,f.noPrevious());c.unshift(w);var x=g(b,n,!1,f.noNext());c.push(x)}return c}}}}]).constant("pagerConfig",{itemsPerPage:10,previousText:" Previous",nextText:"Next ",align:!0}).directive("pager",["pagerConfig",function(a){return{restrict:"EA",scope:{page:"=",totalItems:"=",onSelectPage:" &"},controller:"PaginationController",templateUrl:"template/pagination/pager.html",replace:!0,link:function(b,c,d,e){function f(a,b,c,d,e){return{number:a,text:b,disabled:c,previous:i&&d,next:i&&e}}var g=e.getAttributeValue(d.previousText,a.previousText,!0),h=e.getAttributeValue(d.nextText,a.nextText,!0),i=e.getAttributeValue(d.align,a.align);e.init(a.itemsPerPage),e.getPages=function(a){return[f(a-1,g,e.noPrevious(),!0,!1),f(a+1,h,e.noNext(),!1,!0)]}}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).provider("$tooltip",function(){function a(a){var b=/[A-Z]/g,c="-";return a.replace(b,function(a,b){return(b?c:"")+a.toLowerCase()})}var b={placement:"top",animation:!0,popupDelay:0},c={mouseenter:"mouseleave",click:"click",focus:"blur"},d={};this.options=function(a){angular.extend(d,a)},this.setTriggers=function(a){angular.extend(c,a)},this.$get=["$window","$compile","$timeout","$parse","$document","$position","$interpolate",function(e,f,g,h,i,j,k){return function(e,l,m){function n(a){var b=a||o.trigger||m,d=c[b]||b;return{show:b,hide:d}}var o=angular.extend({},b,d),p=a(e),q=k.startSymbol(),r=k.endSymbol(),s="<div "+p+'-popup title="'+q+"tt_title"+r+'" content="'+q+"tt_content"+r+'" placement="'+q+"tt_placement"+r+'" animation="tt_animation" is-open="tt_isOpen"></div>';return{restrict:"EA",scope:!0,compile:function(){var a=f(s);return function(b,c,d){function f(){b.tt_isOpen?m():k()}function k(){(!z||b.$eval(d[l+"Enable"]))&&(b.tt_popupDelay?(v=g(p,b.tt_popupDelay,!1),v.then(function(a){a()})):p()())}function m(){b.$apply(function(){q()})}function p(){return b.tt_content?(r(),u&&g.cancel(u),t.css({top:0,left:0,display:"block"}),w?i.find("body").append(t):c.after(t),A(),b.tt_isOpen=!0,b.$digest(),A):angular.noop}function q(){b.tt_isOpen=!1,g.cancel(v),b.tt_animation?u=g(s,500):s()}function r(){t&&s(),t=a(b,function(){}),b.$digest()}function s(){t&&(t.remove(),t=null)}var t,u,v,w=angular.isDefined(o.appendToBody)?o.appendToBody:!1,x=n(void 0),y=!1,z=angular.isDefined(d[l+"Enable"]),A=function(){var a,d,e,f;switch(a=w?j.offset(c):j.position(c),d=t.prop("offsetWidth"),e=t.prop("offsetHeight"),b.tt_placement){case"right":f={top:a.top+a.height/2-e/2,left:a.left+a.width};break;case"bottom":f={top:a.top+a.height,left:a.left+a.width/2-d/2};break;case"left":f={top:a.top+a.height/2-e/2,left:a.left-d};break;default:f={top:a.top-e,left:a.left+a.width/2-d/2}}f.top+="px",f.left+="px",t.css(f)};b.tt_isOpen=!1,d.$observe(e,function(a){b.tt_content=a,!a&&b.tt_isOpen&&q()}),d.$observe(l+"Title",function(a){b.tt_title=a}),d.$observe(l+"Placement",function(a){b.tt_placement=angular.isDefined(a)?a:o.placement}),d.$observe(l+"PopupDelay",function(a){var c=parseInt(a,10);b.tt_popupDelay=isNaN(c)?o.popupDelay:c});var B=function(){y&&(c.unbind(x.show,k),c.unbind(x.hide,m))};d.$observe(l+"Trigger",function(a){B(),x=n(a),x.show===x.hide?c.bind(x.show,f):(c.bind(x.show,k),c.bind(x.hide,m)),y=!0});var C=b.$eval(d[l+"Animation"]);b.tt_animation=angular.isDefined(C)?!!C:o.animation,d.$observe(l+"AppendToBody",function(a){w=angular.isDefined(a)?h(a)(b):w}),w&&b.$on("$locationChangeSuccess",function(){b.tt_isOpen&&q()}),b.$on("$destroy",function(){g.cancel(u),g.cancel(v),B(),s()})}}}}}]}).directive("tooltipPopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"}}).directive("tooltip",["$tooltip",function(a){return a("tooltip","tooltip","mouseenter")}]).directive("tooltipHtmlUnsafePopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-unsafe-popup.html"}}).directive("tooltipHtmlUnsafe",["$tooltip",function(a){return a("tooltipHtmlUnsafe","tooltip","mouseenter")}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("popoverPopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html"}}).directive("popover",["$tooltip",function(a){return a("popover","popover","click")}]),angular.module("ui.bootstrap.progressbar",["ui.bootstrap.transition"]).constant("progressConfig",{animate:!0,max:100}).controller("ProgressController",["$scope","$attrs","progressConfig","$transition",function(a,b,c,d){var e=this,f=[],g=angular.isDefined(b.max)?a.$parent.$eval(b.max):c.max,h=angular.isDefined(b.animate)?a.$parent.$eval(b.animate):c.animate;this.addBar=function(a,b){var c=0,d=a.$parent.$index;angular.isDefined(d)&&f[d]&&(c=f[d].value),f.push(a),this.update(b,a.value,c),a.$watch("value",function(a,c){a!==c&&e.update(b,a,c)}),a.$on("$destroy",function(){e.removeBar(a)})},this.update=function(a,b,c){var e=this.getPercentage(b);h?(a.css("width",this.getPercentage(c)+"%"),d(a,{width:e+"%"})):a.css({transition:"none",width:e+"%"})},this.removeBar=function(a){f.splice(f.indexOf(a),1)},this.getPercentage=function(a){return Math.round(100*a/g)}}]).directive("progress",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",require:"progress",scope:{},template:'<div class="progress" ng-transclude></div>'}}).directive("bar",function(){return{restrict:"EA",replace:!0,transclude:!0,require:"^progress",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/bar.html",link:function(a,b,c,d){d.addBar(a,b)}}}).directive("progressbar",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/progressbar.html",link:function(a,b,c,d){d.addBar(a,angular.element(b.children()[0]))}}}),angular.module("ui.bootstrap.rating",[]).constant("ratingConfig",{max:5,stateOn:null,stateOff:null}).controller("RatingController",["$scope","$attrs","$parse","ratingConfig",function(a,b,c,d){this.maxRange=angular.isDefined(b.max)?a.$parent.$eval(b.max):d.max,this.stateOn=angular.isDefined(b.stateOn)?a.$parent.$eval(b.stateOn):d.stateOn,this.stateOff=angular.isDefined(b.stateOff)?a.$parent.$eval(b.stateOff):d.stateOff,this.createRateObjects=function(a){for(var b={stateOn:this.stateOn,stateOff:this.stateOff},c=0,d=a.length;d>c;c++)a[c]=angular.extend({index:c},b,a[c]);return a},a.range=this.createRateObjects(angular.isDefined(b.ratingStates)?angular.copy(a.$parent.$eval(b.ratingStates)):new Array(this.maxRange)),a.rate=function(b){a.value===b||a.readonly||(a.value=b)},a.enter=function(b){a.readonly||(a.val=b),a.onHover({value:b})},a.reset=function(){a.val=angular.copy(a.value),a.onLeave()},a.$watch("value",function(b){a.val=b}),a.readonly=!1,b.readonly&&a.$parent.$watch(c(b.readonly),function(b){a.readonly=!!b})}]).directive("rating",function(){return{restrict:"EA",scope:{value:"=",onHover:"&",onLeave:"&"},controller:"RatingController",templateUrl:"template/rating/rating.html",replace:!0}}),angular.module("ui.bootstrap.tabs",[]).controller("TabsetController",["$scope",function(a){var b=this,c=b.tabs=a.tabs=[];b.select=function(a){angular.forEach(c,function(a){a.active=!1}),a.active=!0},b.addTab=function(a){c.push(a),(1===c.length||a.active)&&b.select(a)},b.removeTab=function(a){var d=c.indexOf(a);if(a.active&&c.length>1){var e=d==c.length-1?d-1:d+1;b.select(c[e])}c.splice(d,1)}}]).directive("tabset",function(){return{restrict:"EA",transclude:!0,replace:!0,scope:{},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",link:function(a,b,c){a.vertical=angular.isDefined(c.vertical)?a.$parent.$eval(c.vertical):!1,a.justified=angular.isDefined(c.justified)?a.$parent.$eval(c.justified):!1,a.type=angular.isDefined(c.type)?a.$parent.$eval(c.type):"tabs"}}}).directive("tab",["$parse",function(a){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},compile:function(b,c,d){return function(b,c,e,f){var g,h;e.active?(g=a(e.active),h=g.assign,b.$parent.$watch(g,function(a,c){a!==c&&(b.active=!!a)}),b.active=g(b.$parent)):h=g=angular.noop,b.$watch("active",function(a){h(b.$parent,a),a?(f.select(b),b.onSelect()):b.onDeselect()}),b.disabled=!1,e.disabled&&b.$parent.$watch(a(e.disabled),function(a){b.disabled=!!a}),b.select=function(){b.disabled||(b.active=!0)},f.addTab(b),b.$on("$destroy",function(){f.removeTab(b)}),b.$transcludeFn=d}}}}]).directive("tabHeadingTransclude",[function(){return{restrict:"A",require:"^tab",link:function(a,b){a.$watch("headingElement",function(a){a&&(b.html(""),b.append(a))})}}}]).directive("tabContentTransclude",function(){function a(a){return a.tagName&&(a.hasAttribute("tab-heading")||a.hasAttribute("data-tab-heading")||"tab-heading"===a.tagName.toLowerCase()||"data-tab-heading"===a.tagName.toLowerCase())}return{restrict:"A",require:"^tabset",link:function(b,c,d){var e=b.$eval(d.tabContentTransclude);e.$transcludeFn(e.$parent,function(b){angular.forEach(b,function(b){a(b)?e.headingElement=b:c.append(b)})})}}}),angular.module("ui.bootstrap.timepicker",[]).constant("timepickerConfig",{hourStep:1,minuteStep:1,showMeridian:!0,meridians:null,readonlyInput:!1,mousewheel:!0}).directive("timepicker",["$parse","$log","timepickerConfig","$locale",function(a,b,c,d){return{restrict:"EA",require:"?^ngModel",replace:!0,scope:{},templateUrl:"template/timepicker/timepicker.html",link:function(e,f,g,h){function i(){var a=parseInt(e.hours,10),b=e.showMeridian?a>0&&13>a:a>=0&&24>a;return b?(e.showMeridian&&(12===a&&(a=0),e.meridian===q[1]&&(a+=12)),a):void 0}function j(){var a=parseInt(e.minutes,10);return a>=0&&60>a?a:void 0}function k(a){return angular.isDefined(a)&&a.toString().length<2?"0"+a:a}function l(a){m(),h.$setViewValue(new Date(p)),n(a)}function m(){h.$setValidity("time",!0),e.invalidHours=!1,e.invalidMinutes=!1}function n(a){var b=p.getHours(),c=p.getMinutes();e.showMeridian&&(b=0===b||12===b?12:b%12),e.hours="h"===a?b:k(b),e.minutes="m"===a?c:k(c),e.meridian=p.getHours()<12?q[0]:q[1]}function o(a){var b=new Date(p.getTime()+6e4*a);p.setHours(b.getHours(),b.getMinutes()),l()}if(h){var p=new Date,q=angular.isDefined(g.meridians)?e.$parent.$eval(g.meridians):c.meridians||d.DATETIME_FORMATS.AMPMS,r=c.hourStep;g.hourStep&&e.$parent.$watch(a(g.hourStep),function(a){r=parseInt(a,10)});var s=c.minuteStep;g.minuteStep&&e.$parent.$watch(a(g.minuteStep),function(a){s=parseInt(a,10)}),e.showMeridian=c.showMeridian,g.showMeridian&&e.$parent.$watch(a(g.showMeridian),function(a){if(e.showMeridian=!!a,h.$error.time){var b=i(),c=j();angular.isDefined(b)&&angular.isDefined(c)&&(p.setHours(b),l())}else n()});var t=f.find("input"),u=t.eq(0),v=t.eq(1),w=angular.isDefined(g.mousewheel)?e.$eval(g.mousewheel):c.mousewheel;if(w){var x=function(a){a.originalEvent&&(a=a.originalEvent);var b=a.wheelDelta?a.wheelDelta:-a.deltaY;return a.detail||b>0};u.bind("mousewheel wheel",function(a){e.$apply(x(a)?e.incrementHours():e.decrementHours()),a.preventDefault()}),v.bind("mousewheel wheel",function(a){e.$apply(x(a)?e.incrementMinutes():e.decrementMinutes()),a.preventDefault()})}if(e.readonlyInput=angular.isDefined(g.readonlyInput)?e.$eval(g.readonlyInput):c.readonlyInput,e.readonlyInput)e.updateHours=angular.noop,e.updateMinutes=angular.noop;else{var y=function(a,b){h.$setViewValue(null),h.$setValidity("time",!1),angular.isDefined(a)&&(e.invalidHours=a),angular.isDefined(b)&&(e.invalidMinutes=b)};e.updateHours=function(){var a=i();angular.isDefined(a)?(p.setHours(a),l("h")):y(!0)},u.bind("blur",function(){!e.validHours&&e.hours<10&&e.$apply(function(){e.hours=k(e.hours)})}),e.updateMinutes=function(){var a=j();angular.isDefined(a)?(p.setMinutes(a),l("m")):y(void 0,!0)},v.bind("blur",function(){!e.invalidMinutes&&e.minutes<10&&e.$apply(function(){e.minutes=k(e.minutes)})})}h.$render=function(){var a=h.$modelValue?new Date(h.$modelValue):null;isNaN(a)?(h.$setValidity("time",!1),b.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(a&&(p=a),m(),n())},e.incrementHours=function(){o(60*r)},e.decrementHours=function(){o(60*-r)},e.incrementMinutes=function(){o(s)},e.decrementMinutes=function(){o(-s)},e.toggleMeridian=function(){o(720*(p.getHours()<12?1:-1))}}}}}]),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).factory("typeaheadParser",["$parse",function(a){var b=/^\s*(.*?)(?:\s+as\s+(.*?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+(.*)$/;return{parse:function(c){var d=c.match(b);if(!d)throw new Error("Expected typeahead specification in form of '_modelValue_ (as _label_)? for _item_ in _collection_' but got '"+c+"'.");return{itemName:d[3],source:a(d[4]),viewMapper:a(d[2]||d[1]),modelMapper:a(d[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$position","typeaheadParser",function(a,b,c,d,e,f,g){var h=[9,13,27,38,40];return{require:"ngModel",link:function(i,j,k,l){var m,n=i.$eval(k.typeaheadMinLength)||1,o=i.$eval(k.typeaheadWaitMs)||0,p=i.$eval(k.typeaheadEditable)!==!1,q=b(k.typeaheadLoading).assign||angular.noop,r=b(k.typeaheadOnSelect),s=k.typeaheadInputFormatter?b(k.typeaheadInputFormatter):void 0,t=k.typeaheadAppendToBody?b(k.typeaheadAppendToBody):!1,u=b(k.ngModel).assign,v=g.parse(k.typeahead),w=angular.element("<div typeahead-popup></div>");w.attr({matches:"matches",active:"activeIdx",select:"select(activeIdx)",query:"query",position:"position"}),angular.isDefined(k.typeaheadTemplateUrl)&&w.attr("template-url",k.typeaheadTemplateUrl);var x=i.$new();i.$on("$destroy",function(){x.$destroy()});var y=function(){x.matches=[],x.activeIdx=-1},z=function(a){var b={$viewValue:a};q(i,!0),c.when(v.source(i,b)).then(function(c){if(a===l.$viewValue&&m){if(c.length>0){x.activeIdx=0,x.matches.length=0;for(var d=0;d<c.length;d++)b[v.itemName]=c[d],x.matches.push({label:v.viewMapper(x,b),model:c[d]});x.query=a,x.position=t?f.offset(j):f.position(j),x.position.top=x.position.top+j.prop("offsetHeight")}else y();q(i,!1)}},function(){y(),q(i,!1)})};y(),x.query=void 0;var A;l.$parsers.unshift(function(a){return m=!0,a&&a.length>=n?o>0?(A&&d.cancel(A),A=d(function(){z(a)},o)):z(a):(q(i,!1),y()),p?a:a?void l.$setValidity("editable",!1):(l.$setValidity("editable",!0),a)}),l.$formatters.push(function(a){var b,c,d={};return s?(d.$model=a,s(i,d)):(d[v.itemName]=a,b=v.viewMapper(i,d),d[v.itemName]=void 0,c=v.viewMapper(i,d),b!==c?b:a)}),x.select=function(a){var b,c,d={};d[v.itemName]=c=x.matches[a].model,b=v.modelMapper(i,d),u(i,b),l.$setValidity("editable",!0),r(i,{$item:c,$model:b,$label:v.viewMapper(i,d)}),y(),j[0].focus()},j.bind("keydown",function(a){0!==x.matches.length&&-1!==h.indexOf(a.which)&&(a.preventDefault(),40===a.which?(x.activeIdx=(x.activeIdx+1)%x.matches.length,x.$digest()):38===a.which?(x.activeIdx=(x.activeIdx?x.activeIdx:x.matches.length)-1,x.$digest()):13===a.which||9===a.which?x.$apply(function(){x.select(x.activeIdx)}):27===a.which&&(a.stopPropagation(),y(),x.$digest()))}),j.bind("blur",function(){m=!1});var B=function(a){j[0]!==a.target&&(y(),x.$digest())};e.bind("click",B),i.$on("$destroy",function(){e.unbind("click",B)});var C=a(w)(x);t?e.find("body").append(C):j.after(C)}}}]).directive("typeaheadPopup",function(){return{restrict:"EA",scope:{matches:"=",query:"=",active:"=",position:"=",select:"&"},replace:!0,templateUrl:"template/typeahead/typeahead-popup.html",link:function(a,b,c){a.templateUrl=c.templateUrl,a.isOpen=function(){return a.matches.length>0},a.isActive=function(b){return a.active==b},a.selectActive=function(b){a.active=b},a.selectMatch=function(b){a.select({activeIdx:b})}}}}).directive("typeaheadMatch",["$http","$templateCache","$compile","$parse",function(a,b,c,d){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(e,f,g){var h=d(g.templateUrl)(e.$parent)||"template/typeahead/typeahead-match.html";a.get(h,{cache:b}).success(function(a){f.replaceWith(c(a.trim())(e))})}}}]).filter("typeaheadHighlight",function(){function a(a){return a.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(b,c){return c?b.replace(new RegExp(a(c),"gi"),"<strong>$&</strong>"):b}}),angular.module("template/accordion/accordion-group.html",[]).run(["$templateCache",function(a){a.put("template/accordion/accordion-group.html",'<div class="panel panel-default">\n  <div class="panel-heading">\n    <h4 class="panel-title">\n      <a class="accordion-toggle" ng-click="isOpen = !isOpen" accordion-transclude="heading">{{heading}}</a>\n    </h4>\n  </div>\n  <div class="panel-collapse" collapse="!isOpen">\n	  <div class="panel-body" ng-transclude></div>\n  </div>\n</div>')}]),angular.module("template/accordion/accordion.html",[]).run(["$templateCache",function(a){a.put("template/accordion/accordion.html",'<div class="panel-group" ng-transclude></div>')}]),angular.module("template/alert/alert.html",[]).run(["$templateCache",function(a){a.put("template/alert/alert.html","<div class='alert' ng-class='\"alert-\" + (type || \"warning\")'>\n    <button ng-show='closeable' type='button' class='close' ng-click='close()'>&times;</button>\n    <div ng-transclude></div>\n</div>\n")}]),angular.module("template/carousel/carousel.html",[]).run(["$templateCache",function(a){a.put("template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel">\n    <ol class="carousel-indicators" ng-show="slides().length > 1">\n        <li ng-repeat="slide in slides()" ng-class="{active: isActive(slide)}" ng-click="select(slide)"></li>\n    </ol>\n    <div class="carousel-inner" ng-transclude></div>\n    <a class="left carousel-control" ng-click="prev()" ng-show="slides().length > 1"><span class="icon-prev"></span></a>\n    <a class="right carousel-control" ng-click="next()" ng-show="slides().length > 1"><span class="icon-next"></span></a>\n</div>\n')}]),angular.module("template/carousel/slide.html",[]).run(["$templateCache",function(a){a.put("template/carousel/slide.html","<div ng-class=\"{\n    'active': leaving || (active && !entering),\n    'prev': (next || active) && direction=='prev',\n    'next': (next || active) && direction=='next',\n    'right': direction=='prev',\n    'left': direction=='next'\n  }\" class=\"item text-center\" ng-transclude></div>\n")}]),angular.module("template/datepicker/datepicker.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/datepicker.html",'<table>\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{rows[0].length - 2 + showWeekNumbers}}"><button type="button" class="btn btn-default btn-sm btn-block" ng-click="toggleMode()"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n    <tr ng-show="labels.length > 0" class="h6">\n      <th ng-show="showWeekNumbers" class="text-center">#</th>\n      <th ng-repeat="label in labels" class="text-center">{{label}}</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows">\n      <td ng-show="showWeekNumbers" class="text-center"><em>{{ getWeekNumber(row) }}</em></td>\n      <td ng-repeat="dt in row" class="text-center">\n        <button type="button" style="width:100%;" class="btn btn-default btn-sm" ng-class="{\'btn-info\': dt.selected}" ng-click="select(dt.date)" ng-disabled="dt.disabled"><span ng-class="{\'text-muted\': dt.secondary}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/popup.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/popup.html","<ul class=\"dropdown-menu\" ng-style=\"{display: (isOpen && 'block') || 'none', top: position.top+'px', left: position.left+'px'}\">\n	<li ng-transclude></li>\n"+'	<li ng-show="showButtonBar" style="padding:10px 9px 2px">\n		<span class="btn-group">\n			<button type="button" class="btn btn-sm btn-info" ng-click="today()">{{currentText}}</button>\n			<button type="button" class="btn btn-sm btn-default" ng-click="showWeeks = ! showWeeks" ng-class="{active: showWeeks}">{{toggleWeeksText}}</button>\n			<button type="button" class="btn btn-sm btn-danger" ng-click="clear()">{{clearText}}</button>\n		</span>\n		<button type="button" class="btn btn-sm btn-success pull-right" ng-click="isOpen = false">{{closeText}}</button>\n	</li>\n</ul>\n')}]),angular.module("template/modal/backdrop.html",[]).run(["$templateCache",function(a){a.put("template/modal/backdrop.html",'<div class="modal-backdrop fade" ng-class="{in: animate}" ng-style="{\'z-index\': 1040 + index*10}"></div>')}]),angular.module("template/modal/window.html",[]).run(["$templateCache",function(a){a.put("template/modal/window.html",'<div tabindex="-1" class="modal fade {{ windowClass }}" ng-class="{in: animate}" ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}" ng-click="close($event)">\n    <div class="modal-dialog"><div class="modal-content" ng-transclude></div></div>\n</div>')}]),angular.module("template/pagination/pager.html",[]).run(["$templateCache",function(a){a.put("template/pagination/pager.html",'<ul class="pager">\n  <li ng-repeat="page in pages" ng-class="{disabled: page.disabled, previous: page.previous, next: page.next}"><a ng-click="selectPage(page.number)">{{page.text}}</a></li>\n</ul>')}]),angular.module("template/pagination/pagination.html",[]).run(["$templateCache",function(a){a.put("template/pagination/pagination.html",'<ul class="pagination">\n  <li ng-repeat="page in pages" ng-class="{active: page.active, disabled: page.disabled}"><a ng-click="selectPage(page.number)">{{page.text}}</a></li>\n</ul>')}]),angular.module("template/tooltip/tooltip-html-unsafe-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-html-unsafe-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" bind-html-unsafe="content"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind="content"></div>\n</div>\n')}]),angular.module("template/popover/popover.html",[]).run(["$templateCache",function(a){a.put("template/popover/popover.html",'<div class="popover {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-show="title"></h3>\n      <div class="popover-content" ng-bind="content"></div>\n  </div>\n</div>\n')}]),angular.module("template/progressbar/bar.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" ng-transclude></div>')}]),angular.module("template/progressbar/progress.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/progress.html",'<div class="progress" ng-transclude></div>')}]),angular.module("template/progressbar/progressbar.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/progressbar.html",'<div class="progress"><div class="progress-bar" ng-class="type && \'progress-bar-\' + type" ng-transclude></div></div>')}]),angular.module("template/rating/rating.html",[]).run(["$templateCache",function(a){a.put("template/rating/rating.html",'<span ng-mouseleave="reset()">\n    <i ng-repeat="r in range" ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < val && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')"></i>\n</span>')}]),angular.module("template/tabs/tab.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tab.html",'<li ng-class="{active: active, disabled: disabled}">\n  <a ng-click="select()" tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("template/tabs/tabset-titles.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tabset-titles.html","<ul class=\"nav {{type && 'nav-' + type}}\" ng-class=\"{'nav-stacked': vertical}\">\n</ul>\n")}]),angular.module("template/tabs/tabset.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tabset.html",'\n<div class="tabbable">\n  <ul class="nav {{type && \'nav-\' + type}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane" \n         ng-repeat="tab in tabs" \n         ng-class="{active: tab.active}"\n         tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("template/timepicker/timepicker.html",[]).run(["$templateCache",function(a){a.put("template/timepicker/timepicker.html",'<table>\n	<tbody>\n		<tr class="text-center">\n			<td><a ng-click="incrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n			<td>&nbsp;</td>\n			<td><a ng-click="incrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n			<td ng-show="showMeridian"></td>\n		</tr>\n		<tr>\n			<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidHours}">\n				<input type="text" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-mousewheel="incrementHours()" ng-readonly="readonlyInput" maxlength="2">\n			</td>\n			<td>:</td>\n			<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidMinutes}">\n				<input type="text" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2">\n			</td>\n			<td ng-show="showMeridian"><button type="button" class="btn btn-default text-center" ng-click="toggleMeridian()">{{meridian}}</button></td>\n		</tr>\n		<tr class="text-center">\n			<td><a ng-click="decrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n			<td>&nbsp;</td>\n			<td><a ng-click="decrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n			<td ng-show="showMeridian"></td>\n		</tr>\n	</tbody>\n</table>\n')}]),angular.module("template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(a){a.put("template/typeahead/typeahead-match.html",'<a tabindex="-1" bind-html-unsafe="match.label | typeaheadHighlight:query"></a>')}]),angular.module("template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(a){a.put("template/typeahead/typeahead-popup.html","<ul class=\"dropdown-menu\" ng-style=\"{display: isOpen()&&'block' || 'none', top: position.top+'px', left: position.left+'px'}\">\n"+'    <li ng-repeat="match in matches" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)">\n        <div typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>')}]),define("angular-ui-bootstrap",["jquery","angular","bootstrap"],function(global){return function(){var ret,fn;return fn=function(){return this.angular.module("ui.bootstrap")},ret=fn.apply(global,arguments)}}(this)),function(){function TrackerResponseInterceptor($q,promiseTracker,$injector){var $http;return function(promise){$http||($http=$injector.get("$http"));var config=$http.pendingRequests[$http.pendingRequests.length-1];return config.tracker&&(angular.isArray(config.tracker)||(config.tracker=[config.tracker]),angular.forEach(config.tracker,function(trackerName){promiseTracker(trackerName).addPromise(promise,config)})),promise}}function TrackerHttpInterceptor($q,promiseTracker){return{request:function(config){return config.tracker&&(angular.isArray(config.tracker)||(config.tracker=[config.tracker]),config.$promiseTrackerDeferred=config.$promiseTrackerDeferred||[],angular.forEach(config.tracker,function(trackerName){var deferred=promiseTracker(trackerName).createPromise(config);config.$promiseTrackerDeferred.push(deferred)})),$q.when(config)},response:function(response){return response.config&&response.config.$promiseTrackerDeferred&&angular.forEach(response.config.$promiseTrackerDeferred,function(deferred){deferred.resolve(response)}),$q.when(response)},responseError:function(response){return response.config&&response.config.$promiseTrackerDeferred&&angular.forEach(response.config.$promiseTrackerDeferred,function(deferred){deferred.reject(response)}),$q.reject(response)}}}angular.module("ajoslin.promise-tracker",[]),angular.module("ajoslin.promise-tracker").config(["$httpProvider",function($httpProvider){$httpProvider.interceptors?$httpProvider.interceptors.push(TrackerHttpInterceptor):$httpProvider.responseInterceptors.push(TrackerResponseInterceptor)}]),TrackerResponseInterceptor.$inject=["$q","promiseTracker","$injector"],TrackerHttpInterceptor.$inject=["$q","promiseTracker"],angular.module("ajoslin.promise-tracker").provider("promiseTracker",function(){function nextUid(){for(var digit,index=uid.length;index;){if(index--,digit=uid[index].charCodeAt(0),57===digit)return uid[index]="A",uid.join("");if(90!==digit)return uid[index]=String.fromCharCode(digit+1),uid.join("");uid[index]="0"}return uid.unshift("0"),uid.join("")}var uid=["0","0","0"],trackers={};this.$get=["$q","$timeout",function($q,$timeout){function Tracker(options){function fireEvent(options){angular.forEach(callbacks[options.event],function(cb){cb.call(self,options.value,options.id)})}function createPromise(startArg){function onDone(isError){return function(value){self.minPromise.then(function(){var index=trackedPromises.indexOf(deferred);trackedPromises.splice(index,1),0===trackedPromises.length&&self.maxPromise&&$timeout.cancel(self.maxPromise),fireEvent({event:isError?"error":"success",id:promiseId,value:value}),fireEvent({event:"done",id:promiseId,value:value})})}}var deferred=$q.defer(),promiseId=nextUid();return trackedPromises.push(deferred),1===trackedPromises.length&&(self.minPromise=self._minDuration?$timeout(angular.noop,self._minDuration):$q.when(!0),self._maxDuration&&(self.maxPromise=$timeout(deferred.resolve,self._maxDuration))),fireEvent({event:"start",id:promiseId,value:startArg}),deferred.promise.then(onDone(!1),onDone(!0)),deferred}var self=this,callbacks={start:[],done:[],error:[],success:[]},trackedPromises=[];options=options||{},self.setMinDuration=function(minimum){self._minDuration=minimum},self.setMinDuration(options.minDuration),self.setMaxDuration=function(maximum){self._maxDuration=maximum},self.setMaxDuration(options.maxDuration),self.active=function(){return trackedPromises.length>0},self.cancel=function(){angular.forEach(trackedPromises,function(deferred){deferred.resolve()})},self.addPromise=function(promise,startArg){var then=promise&&(promise.$then||promise.then);
if(!then)throw new Error("promiseTracker#addPromise expects a promise object!");var deferred=createPromise(startArg);return then(function(value){return deferred.resolve(value),value},function(value){return deferred.reject(value),$q.reject(value)}),deferred},self.createPromise=function(startArg){return createPromise(startArg)},self.on=self.bind=function(event,cb){if(!callbacks[event])throw new Error("Cannot bind callback for event '"+event+"'. Allowed types: 'start', 'done', 'error', 'success'");return callbacks[event].push(cb),self},self.off=self.unbind=function(event,cb){if(!callbacks[event])throw new Error("Cannot unbind callback for event '"+event+"'. Allowed types: 'start', 'done', 'error', 'success'");if(cb){var index=callbacks[event].indexOf(cb);callbacks[event].splice(index,1)}else callbacks[event].length=0;return self}}return function(trackerName,options){return trackers[trackerName]||(trackers[trackerName]=new Tracker(options)),trackers[trackerName]}}]})}(),define("angular-promise-tracker",["jquery","jquery-bridget","imagesloaded","masonry","angular"],function(global){return function(){var ret,fn;return fn=function(){return this.angular.module("ajoslin.promise-tracker")},ret=fn.apply(global,arguments)}}(this)),define("core/directives/angular-masonry/angular-masonry",["../../moduleDef","angular"],function(module,angular){angular.module("ago.wu.masonry",[]).controller("AgoMasonryCtrl",["$scope","$element","$timeout",function($scope,$element,$timeout){function defaultLoaded($element){$element.addClass("loaded")}var bricks={},schedule=[],destroyed=!1,self=this,timeout=null;this.preserveOrder=!1,this.loadImages=!0,this.scheduleMasonryOnce=function(){var args=arguments,found=schedule.filter(function(item){return item[0]===args[0]}).length>0;found||this.scheduleMasonry.apply(null,arguments)},this.scheduleMasonry=function(){timeout&&$timeout.cancel(timeout),schedule.push([].slice.call(arguments)),timeout=$timeout(function(){destroyed||(schedule.forEach(function(args){$element.masonry.apply($element,args)}),schedule=[])},30)},this.appendBrick=function(element,id){function _append(){0===Object.keys(bricks).length&&$element.masonry("resize"),void 0===bricks[id]&&(bricks[id]=!0,defaultLoaded(element),$element.masonry("appended",element,!0))}function _layout(){self.scheduleMasonryOnce("layout")}destroyed||(self.loadImages?self.preserveOrder?(_append(),element.imagesLoaded(_layout)):element.imagesLoaded(function(){_append(),_layout()}):(_append(),_layout()))},this.removeBrick=function(id,element){destroyed||(delete bricks[id],$element.masonry("remove",element),this.scheduleMasonryOnce("layout"))},this.destroy=function(){destroyed=!0,$element.data("masonry")&&$element.masonry("destroy"),$scope.$emit("masonry.destroyed"),bricks=[]},this.reload=function(){$element.masonry(),$scope.$emit("masonry.reloaded")}}]).directive("agoMasonry",function(){return{restrict:"AE",controller:"AgoMasonryCtrl",link:{pre:function(scope,element,attrs,ctrl){var attrOptions=scope.$eval(attrs.masonry||attrs.masonryOptions),options=angular.extend({itemSelector:attrs.itemSelector||".ago-masonry-brick",columnWidth:parseInt(attrs.columnWidth,10)||attrs.columnWidth},attrOptions||{});element.masonry(options);var loadImages=scope.$eval(attrs.loadImages);ctrl.loadImages=loadImages!==!1;var preserveOrder=scope.$eval(attrs.preserveOrder);ctrl.preserveOrder=preserveOrder!==!1&&void 0!==attrs.preserveOrder,scope.$emit("masonry.created",element),scope.$on("$destroy",ctrl.destroy),scope.$on("masonry.reloadItemsAndLayout",function(){element.masonry("reloadItems"),element.masonry("layout")})}}}}).directive("agoMasonryBrick",function(){return{restrict:"AC",require:"^agoMasonry",scope:!0,link:{pre:function(scope,element,attrs,ctrl){var index,id=scope.$id;ctrl.appendBrick(element,id),element.on("$destroy",function(){ctrl.removeBrick(id,element)}),scope.$on("masonry.reload",function(){ctrl.scheduleMasonryOnce("reloadItems"),ctrl.scheduleMasonryOnce("layout")});var track,trackBy=angular.isDefined(attrs.masonryBrickTrackBy)?attrs.masonryBrickTrackBy:"$index";scope.$watch(trackBy,function(){void 0!==track&&track!==scope.$eval(trackBy)&&(ctrl.scheduleMasonryOnce("reloadItems"),ctrl.scheduleMasonryOnce("layout")),track=scope.$eval(trackBy)}),scope.$watch("$index",function(){void 0!==index&&index!==scope.$index&&(ctrl.scheduleMasonryOnce("reloadItems"),ctrl.scheduleMasonryOnce("layout")),index=scope.$index})}}}})}),define("lvl-dragdrop",["angular","jquery"],function(angular,jQuery){jQuery.event.props.push("dataTransfer");var module=angular.module("lvl.directives.dragdrop",[]);return module.factory("uuid",function(){return{"new":function(){function _p8(s){var p=(Math.random().toString(16)+"000000000").substr(2,8);return s?"-"+p.substr(0,4)+"-"+p.substr(4,4):p}return _p8()+_p8(!0)+_p8(!0)+_p8()},empty:function(){return"00000000-0000-0000-0000-000000000000"}}}),module.directive("lvlDraggable",["$rootScope","uuid",function($rootScope,uuid){return{restrict:"A",link:function(scope,el){angular.element(el).attr("draggable","true");var id=angular.element(el).attr("id");id||(id=uuid.new(),angular.element(el).attr("id",id)),el.bind("dragstart",function(e){e.dataTransfer.setData("text",id),$rootScope.$emit("LVL-DRAG-START")}),el.bind("dragend",function(){$rootScope.$emit("LVL-DRAG-END")})}}}]),module.directive("lvlDropTarget",["$rootScope","uuid",function($rootScope,uuid){return{restrict:"A",scope:{onDrop:"&"},link:function(scope,el){var id=angular.element(el).attr("id");id||(id=uuid.new(),angular.element(el).attr("id",id)),el.bind("dragover",function(e){return e.preventDefault&&e.preventDefault(),e.dataTransfer.dropEffect="move",!1}),el.bind("dragenter",function(e){angular.element(e.target).addClass("lvl-over")}),el.bind("dragleave",function(e){angular.element(e.target).removeClass("lvl-over")}),el.bind("drop",function(e){e.preventDefault&&e.preventDefault(),e.stopPropogation&&e.stopPropogation();var data=e.dataTransfer.getData("text"),dest=document.getElementById(id),src=document.getElementById(data);scope.onDrop({dragEl:src,dropEl:dest})}),$rootScope.$on("LVL-DRAG-START",function(){var el=document.getElementById(id);angular.element(el).addClass("lvl-target")}),$rootScope.$on("LVL-DRAG-END",function(){var el=document.getElementById(id);angular.element(el).removeClass("lvl-target"),angular.element(el).removeClass("lvl-over")})}}}]),module}),define("blueimp-fileupload",["jquery","angular","jquery.fileupload-image","jquery.fileupload-audio","jquery.fileupload-video","jquery.fileupload-validate"],function($,angular){angular.module("blueimp.fileupload",[]).provider("fileUpload",function(){var $config,scopeEvalAsync=function(expression){var scope=$(this).fileupload("option","scope")();scope.$evalAsync(expression)},addFileMethods=function(scope,data){var files=data.files,file=files[0];angular.forEach(files,function(file,index){file._index=index,file.$state=function(){return data.state()},file.$processing=function(){return data.processing()},file.$progress=function(){return data.progress()},file.$response=function(){return data.response()}}),file.$submit=function(){return file.error?void 0:data.submit()},file.$cancel=function(){return data.abort()}};$config=this.defaults={handleResponse:function(e,data){var files=data.result&&data.result.files;files?data.scope().replace(data.files,files):(data.errorThrown||"error"===data.textStatus)&&(data.files[0].error=data.errorThrown||data.textStatus)},add:function(e,data){if(e.isDefaultPrevented())return!1;var scope=data.scope(),filesCopy=[];angular.forEach(data.files,function(file){filesCopy.push(file)}),scope.$apply(function(){addFileMethods(scope,data);var method=scope.option("prependFiles")?"unshift":"push";Array.prototype[method].apply(scope.queue,data.files)}),data.process(function(){return scope.process(data)}).always(function(){scope.$apply(function(){addFileMethods(scope,data),scope.replace(filesCopy,data.files)})}).then(function(){(scope.option("autoUpload")||data.autoUpload)&&data.autoUpload!==!1&&data.submit()})},progress:function(e,data){return e.isDefaultPrevented()?!1:void data.scope().$apply()},done:function(e,data){if(e.isDefaultPrevented())return!1;var that=this;data.scope().$apply(function(){data.handleResponse.call(that,e,data)})},fail:function(e,data){if(e.isDefaultPrevented())return!1;var that=this,scope=data.scope();return"abort"===data.errorThrown?void scope.clear(data.files):void scope.$apply(function(){data.handleResponse.call(that,e,data)})},stop:scopeEvalAsync,processstart:scopeEvalAsync,processstop:scopeEvalAsync,getNumberOfFiles:function(){var scope=this.scope();return scope.queue.length-scope.processing()},dataType:"json",autoUpload:!1},this.$get=[function(){return{defaults:$config}}]}).provider("formatFileSizeFilter",function(){var $config={units:[{size:1e9,suffix:" GB"},{size:1e6,suffix:" MB"},{size:1e3,suffix:" KB"}]};this.defaults=$config,this.$get=function(){return function(bytes){if(!angular.isNumber(bytes))return"";for(var prefix,suffix,unit=!0,i=0;unit;){if(unit=$config.units[i],prefix=unit.prefix||"",suffix=unit.suffix||"",i===$config.units.length-1||bytes>=unit.size)return prefix+(bytes/unit.size).toFixed(2)+suffix;i+=1}}}}).controller("FileUploadController",["$scope","$element","$attrs","$window","fileUpload",function($scope,$element,$attrs,$window,fileUpload){$element=$($element);var uploadMethods={progress:function(){return $element.fileupload("progress")},active:function(){return $element.fileupload("active")},option:function(option,data){return $element.fileupload("option",option,data)},add:function(data){return $element.fileupload("add",data)},send:function(data){return $element.fileupload("send",data)},process:function(data){return $element.fileupload("process",data)},processing:function(data){return $element.fileupload("processing",data)}};$scope.disabled=!$.support.fileInput,$scope.queue=$scope.queue||[],$scope.clear=function(files){var queue=this.queue,i=queue.length,file=files,length=1;for(angular.isArray(files)&&(file=files[0],length=files.length);i;)if(i-=1,queue[i]===file)return queue.splice(i,length)},$scope.replace=function(oldFiles,newFiles){var i,j,queue=this.queue,file=oldFiles[0];for(i=0;i<queue.length;i+=1)if(queue[i]===file){for(j=0;j<newFiles.length;j+=1)queue[i+j]=newFiles[j];return}},$scope.applyOnQueue=function(method){var i,file,list=this.queue.slice(0);for(i=0;i<list.length;i+=1)file=list[i],file[method]&&file[method]()},$scope.submit=function(){this.applyOnQueue("$submit")},$scope.cancel=function(){this.applyOnQueue("$cancel")},angular.extend($scope,uploadMethods),$element.fileupload(angular.extend({scope:function(){return $scope}},fileUpload.defaults)).on("fileuploadadd",function(e,data){data.scope=$scope.option("scope")}).on("fileuploadfail",function(e,data){if("abort"!==data.errorThrown&&data.dataType&&data.dataType.indexOf("json")===data.dataType.length-4)try{data.result=angular.fromJson(data.jqXHR.responseText)}catch(ignore){}}).on(["fileuploadadd","fileuploadsubmit","fileuploadsend","fileuploaddone","fileuploadfail","fileuploadalways","fileuploadprogress","fileuploadprogressall","fileuploadstart","fileuploadstop","fileuploadchange","fileuploadpaste","fileuploaddrop","fileuploaddragover","fileuploadchunksend","fileuploadchunkdone","fileuploadchunkfail","fileuploadchunkalways","fileuploadprocessstart","fileuploadprocess","fileuploadprocessdone","fileuploadprocessfail","fileuploadprocessalways","fileuploadprocessstop"].join(" "),function(e,data){$scope.$emit(e.type,data).defaultPrevented&&e.preventDefault()}).on("remove",function(){var method;for(method in uploadMethods)uploadMethods.hasOwnProperty(method)&&delete $scope[method]}),$scope.$watch($attrs.fileUpload,function(newOptions){newOptions&&$element.fileupload("option",newOptions)})}]).controller("FileUploadProgressController",["$scope","$attrs","$parse",function($scope,$attrs,$parse){var fn=$parse($attrs.fileUploadProgress),update=function(){var progress=fn($scope);progress&&progress.total&&($scope.num=Math.floor(progress.loaded/progress.total*100))};update(),$scope.$watch($attrs.fileUploadProgress+".loaded",function(newValue,oldValue){newValue!==oldValue&&update()})}]).controller("FileUploadPreviewController",["$scope","$element","$attrs",function($scope,$element,$attrs){$element=$($element),$scope.$watch($attrs.fileUploadPreview+".preview",function(preview){preview&&$element.empty().append(preview)})}]).directive("fileUpload",function(){return{controller:"FileUploadController",scope:!0}}).directive("fileUploadProgress",function(){return{controller:"FileUploadProgressController",scope:!0}}).directive("fileUploadPreview",function(){return{controller:"FileUploadPreviewController"}}).directive("download",function(){return function(scope,elm){elm.on("dragstart",function(e){try{e.originalEvent.dataTransfer.setData("DownloadURL",["application/octet-stream",elm.prop("download"),elm.prop("href")].join(":"))}catch(ignore){}})}})}),define("core/security/moduleDef",["angular"],function(angular){return angular.module("core.security.module",[])}),define("core/security/authorization",["./moduleDef"],function(module){module.provider("securityAuthorization",function(){this.$get=["security","securityRetryQueue","$stateParams",function(security,queue){var service={requireAuthenticatedUser:function(){return security.requestCurrentUser().then(function(userInfo){return security.isAuthenticated()?userInfo:queue.pushRetryFn("unauthenticated-client",service.requireAuthenticatedUser)})},requireAdminUser:function(){return security.requestCurrentUser().then(function(userInfo){return security.isAdmin()?userInfo:queue.pushRetryFn("unauthorized-client",service.requireAdminUser)})}};return service}]})}),define("core/security/interceptor",["./moduleDef","angular"],function(module,angular){module.factory("securityInterceptor",["$injector","securityRetryQueue",function($injector,queue){return function(promise){return promise.then(null,function(originalResponse){if(401===originalResponse.status)promise=queue.pushRetryFn("unauthorized-server",function(){return originalResponse.config?$injector.get("$http")(originalResponse.config):$injector.get("apinetService").performRequest(originalResponse.corsConfig)});else if(403===originalResponse.status){var data=originalResponse.data?angular.fromJson(originalResponse.data):null;if(data){var $state=$injector.get("$state"),errorPageService=$injector.get("errorPageService"),reason=null,reasonTitle=null;data.accessDenied?(reasonTitle="core.errors.accessDeniedTitle",reason="core.errors.accessDenied"):data.invalidProject&&(reasonTitle="core.errors.invalidProjectTitle",reason="core.errors.invalidProject"),errorPageService.setError(reason,reasonTitle),$state.go("page.projects.accessDenied")}}else 0===originalResponse.status&&(promise=queue.pushRetryFn("no-connection",function(){return originalResponse.config?$injector.get("$http")(originalResponse.config):$injector.get("apinetService").performRequest(originalResponse.corsConfig)}));return promise})}}]).config(["$httpProvider",function($httpProvider){$httpProvider.defaults.useXDomain=!0,$httpProvider.defaults.withCredentials=!0,delete $httpProvider.defaults.headers.common["X-Requested-With"],$httpProvider.responseInterceptors.push("securityInterceptor")}])}),define("core/security/retryQueue",["./moduleDef","angular"],function(module,angular){module.factory("securityRetryQueue",["$q","$log",function($q,$log){var retryQueue=[],service={onItemAddedCallbacks:[],hasMore:function(){return retryQueue.length>0},push:function(retryItem){retryQueue.push(retryItem),angular.forEach(service.onItemAddedCallbacks,function(cb){try{cb(retryItem)}catch(e){$log.error("securityRetryQueue.push(retryItem): callback threw an error"+e)}})},pushRetryFn:function(reason,retryFn){1===arguments.length&&(retryFn=reason,reason=void 0);var deferred=$q.defer(),retryItem={reason:reason,retry:function(){$q.when(retryFn()).then(function(value){deferred.resolve(value)},function(value){deferred.reject(value)})},cancel:function(){deferred.reject()}};return service.push(retryItem),deferred.promise},retryReason:function(){return service.hasMore()&&retryQueue[0].reason},cancelAll:function(){for(;service.hasMore();)retryQueue.shift().cancel()},retryAll:function(){for(;service.hasMore();)retryQueue.shift().retry()}};return service}])}),define("text",["module"],function(module){var text,fs,Cc,Ci,xpcIsWindows,progIds=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],xmlRegExp=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,bodyRegExp=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,hasLocation="undefined"!=typeof location&&location.href,defaultProtocol=hasLocation&&location.protocol&&location.protocol.replace(/\:/,""),defaultHostName=hasLocation&&location.hostname,defaultPort=hasLocation&&(location.port||void 0),buildMap={},masterConfig=module.config&&module.config()||{};return text={version:"2.0.10",strip:function(content){if(content){content=content.replace(xmlRegExp,"");var matches=content.match(bodyRegExp);matches&&(content=matches[1])}else content="";return content},jsEscape:function(content){return content.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:masterConfig.createXhr||function(){var xhr,i,progId;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(i=0;3>i;i+=1){progId=progIds[i];try{xhr=new ActiveXObject(progId)}catch(e){}if(xhr){progIds=[progId];break}}return xhr},parseName:function(name){var modName,ext,temp,strip=!1,index=name.indexOf("."),isRelative=0===name.indexOf("./")||0===name.indexOf("../");return-1!==index&&(!isRelative||index>1)?(modName=name.substring(0,index),ext=name.substring(index+1,name.length)):modName=name,temp=ext||modName,index=temp.indexOf("!"),-1!==index&&(strip="strip"===temp.substring(index+1),temp=temp.substring(0,index),ext?ext=temp:modName=temp),{moduleName:modName,ext:ext,strip:strip}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(url,protocol,hostname,port){var uProtocol,uHostName,uPort,match=text.xdRegExp.exec(url);return match?(uProtocol=match[2],uHostName=match[3],uHostName=uHostName.split(":"),uPort=uHostName[1],uHostName=uHostName[0],!(uProtocol&&uProtocol!==protocol||uHostName&&uHostName.toLowerCase()!==hostname.toLowerCase()||(uPort||uHostName)&&uPort!==port)):!0},finishLoad:function(name,strip,content,onLoad){content=strip?text.strip(content):content,masterConfig.isBuild&&(buildMap[name]=content),onLoad(content)},load:function(name,req,onLoad,config){if(config.isBuild&&!config.inlineText)return void onLoad();masterConfig.isBuild=config.isBuild;var parsed=text.parseName(name),nonStripName=parsed.moduleName+(parsed.ext?"."+parsed.ext:""),url=req.toUrl(nonStripName),useXhr=masterConfig.useXhr||text.useXhr;return 0===url.indexOf("empty:")?void onLoad():void(!hasLocation||useXhr(url,defaultProtocol,defaultHostName,defaultPort)?text.get(url,function(content){text.finishLoad(name,parsed.strip,content,onLoad)},function(err){onLoad.error&&onLoad.error(err)}):req([nonStripName],function(content){text.finishLoad(parsed.moduleName+"."+parsed.ext,parsed.strip,content,onLoad)}))},write:function(pluginName,moduleName,write){if(buildMap.hasOwnProperty(moduleName)){var content=text.jsEscape(buildMap[moduleName]);write.asModule(pluginName+"!"+moduleName,"define(function () { return '"+content+"';});\n")}},writeFile:function(pluginName,moduleName,req,write,config){var parsed=text.parseName(moduleName),extPart=parsed.ext?"."+parsed.ext:"",nonStripName=parsed.moduleName+extPart,fileName=req.toUrl(parsed.moduleName+extPart)+".js";text.load(nonStripName,req,function(){var textWrite=function(contents){return write(fileName,contents)};textWrite.asModule=function(moduleName,contents){return write.asModule(moduleName,fileName,contents)},text.write(pluginName,nonStripName,textWrite,config)},config)}},"node"===masterConfig.env||!masterConfig.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(fs=require.nodeRequire("fs"),text.get=function(url,callback,errback){try{var file=fs.readFileSync(url,"utf8");0===file.indexOf("")&&(file=file.substring(1)),callback(file)}catch(e){errback(e)}}):"xhr"===masterConfig.env||!masterConfig.env&&text.createXhr()?text.get=function(url,callback,errback,headers){var header,xhr=text.createXhr();if(xhr.open("GET",url,!0),headers)for(header in headers)headers.hasOwnProperty(header)&&xhr.setRequestHeader(header.toLowerCase(),headers[header]);masterConfig.onXhr&&masterConfig.onXhr(xhr,url),xhr.onreadystatechange=function(){var status,err;4===xhr.readyState&&(status=xhr.status,status>399&&600>status?(err=new Error(url+" HTTP status: "+status),err.xhr=xhr,errback(err)):callback(xhr.responseText),masterConfig.onXhrComplete&&masterConfig.onXhrComplete(xhr,url))},xhr.send(null)}:"rhino"===masterConfig.env||!masterConfig.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?text.get=function(url,callback){var stringBuffer,line,encoding="utf-8",file=new java.io.File(url),lineSeparator=java.lang.System.getProperty("line.separator"),input=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(file),encoding)),content="";try{for(stringBuffer=new java.lang.StringBuffer,line=input.readLine(),line&&line.length()&&65279===line.charAt(0)&&(line=line.substring(1)),null!==line&&stringBuffer.append(line);null!==(line=input.readLine());)stringBuffer.append(lineSeparator),stringBuffer.append(line);content=String(stringBuffer.toString())}finally{input.close()}callback(content)}:("xpconnect"===masterConfig.env||!masterConfig.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(Cc=Components.classes,Ci=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),xpcIsWindows="@mozilla.org/windows-registry-key;1"in Cc,text.get=function(url,callback){var inStream,convertStream,fileObj,readData={};xpcIsWindows&&(url=url.replace(/\//g,"\\")),fileObj=new FileUtils.File(url);try{inStream=Cc["@mozilla.org/network/file-input-stream;1"].createInstance(Ci.nsIFileInputStream),inStream.init(fileObj,1,0,!1),convertStream=Cc["@mozilla.org/intl/converter-input-stream;1"].createInstance(Ci.nsIConverterInputStream),convertStream.init(inStream,"utf-8",inStream.available(),Ci.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),convertStream.readString(inStream.available(),readData),convertStream.close(),inStream.close(),callback(readData.value)}catch(e){throw new Error((fileObj&&fileObj.path||"")+": "+e)}}),text}),define("text!core/security/loginForm.tpl.html",[],function(){return'<form name="form" novalidate class="form-horizontal login-form" role="form">\r\n	<div class="modal-header">\r\n		<h4>{{ mode !== modes.reload ? (i18n.core.auth.signInTitle || \'Sign in\') : (i18n.core.auth.reconnectTitle || \'Reconnect\') }}</h4>\r\n	</div>\r\n	<div class="modal-body">\r\n		<div class="alert alert-warning" ng-show="authReason">\r\n			{{ i18n[authReason] || \'No connection to server\' }}\r\n		</div>\r\n		<div class="alert alert-error" ng-show="authError">\r\n			{{ authError }}\r\n		</div>\r\n		<div ng-if="mode === modes.signin">\r\n			<button type="button" class="btn auth-container google-auth" ng-click="loginGoogle()" title="{{ i18n.core.auth.buttons.google }}">\r\n				<div class="google-img oauthimg"></div>\r\n			</button>\r\n			<button type="button" class="btn auth-container facebook-auth" ng-click="loginFacebook()" title="{{ i18n.core.auth.buttons.signInFacebook }}">\r\n					<div class="facebook-img oauthimg"></div>\r\n			</button>\r\n			<button type="button" class="btn auth-container twitter-auth" ng-click="loginTwitter()" title="{{ i18n.core.auth.buttons.signInTwitter }}">\r\n				<div class="twitter-img oauthimg"></div>\r\n			</button>\r\n            <button type="button" class="btn auth-container sw-auth" ng-click="loginStructuredWay()" title="{{ i18n.core.auth.buttons.signInStructuredWay }}">\r\n                <div class="sw-img oauthimg"></div>\r\n            </button>\r\n			<button type="button" class="btn auth-container sw-auth" ng-click="loginDemoUser()" title="{{ i18n.core.auth.buttons.demo }}">\r\n				<div class="sw-demo oauthimg">DEMO<br/>USER</div>\r\n			</button>\r\n		</div>\r\n        <div ng-if="mode === modes.reload">\r\n            <button type="button" class="btn pull-right" ng-click="retry()">\r\n                {{ (i18n.core.auth.buttons.reconnect || \'Retry\') }}\r\n            </button>\r\n            <div class="clearfix"></div>\r\n        </div>\r\n\r\n        <div ng-if="mode === modes.autosignin">\r\n            <div class="alert alert-info">\r\n                {{ i18n.core.auth.autoSignIn }}\r\n            </div>\r\n        </div>\r\n	</div>\r\n</form>\r\n'}),define("core/security/service",["./moduleDef","text!./loginForm.tpl.html"],function(module,loginFormTpl){var AUTH_EVENTS={LOGIN:"auth:login",LOGOUT:"auth:logout"};module.constant("AUTH_EVENTS",AUTH_EVENTS).factory("security",["$q","$location","securityRetryQueue","$modal","moduleConfig","apinetService","$rootScope","$window","startupPath","$state",function($q,$location,queue,$modal,moduleConfig,apinetService,$rootScope,$window,startupPath,$state){function redirectToHome(){$state.go("page.projects.projectsList",null,{reload:!0})}function openLoginDialog(){loginDialog||(loginDialog=$modal.open({template:loginFormTpl,controller:"LoginFormController",keyboard:!1,backdrop:"static"}),loginDialog.result.then(onLoginDialogClose))}function closeLoginDialog(success){loginDialog&&loginDialog.close(success)}function onLoginDialogClose(success){loginDialog=null,success?queue.retryAll():(queue.cancelAll(),redirectToHome())}function oauthLoginUrl(provider){var returnUrl=startupPath.url||$location.absUrl();return apinetService.oauthUrl(provider)+"?url="+$window.encodeURIComponent(returnUrl)}var loginDialog=null;queue.onItemAddedCallbacks.push(function(){queue.hasMore()&&service.showLogin()});var LAST_USED_OAUTH_KEY="ago.last_used_oauth",service={getLoginReason:function(){return queue.retryReason()},showLogin:function(){openLoginDialog()},loginAsDemo:function(){$rootScope.$emit(AUTH_EVENTS.LOGOUT),service.currentUser=null;var deferred=$q.defer();return apinetService.action({method:"core/auth/loginAsDemo"}).then(function(result){("undefined"==typeof result.success||result.success)&&(service.currentUser=result,service.isAuthenticated()&&closeLoginDialog(!0),$rootScope.$emit(AUTH_EVENTS.LOGIN,{user:service.currentUser})),deferred.resolve(result)},function(error){deferred.reject(error)}),deferred.promise},setLoggedInUser:function(user){$rootScope.$emit(AUTH_EVENTS.LOGOUT),service.currentUser=null,service.currentUser=user,service.isAuthenticated()&&closeLoginDialog(!0),service.rememberLastUsedOAuthProvider(user.Provider),$rootScope.$emit(AUTH_EVENTS.LOGIN,{user:service.currentUser})},updateLoggedInInUser:function(user){service.currentUser=user,$rootScope.currentUser=user},reconnect:function(){closeLoginDialog(!0)},oauthRoot:function(){return apinetService.oauthRoot()},facebookLoginUrl:function(){return oauthLoginUrl("fb")},twitterLoginUrl:function(){return oauthLoginUrl("twi")},swLoginUrl:function(){return oauthLoginUrl("sw")},googleLoginUrl:function(){return oauthLoginUrl("gl")},isOAuthFinalUrl:function(url){return url.indexOf("oauth/fb")>=0||url.indexOf("oauth/twi")>=0||url.indexOf("oauth/sw")>=0||url.indexOf("oauth/gl")>=0},rememberLastUsedOAuthProvider:function(oauthProvider){$window.localStorage&&oauthProvider&&$window.localStorage.setItem(LAST_USED_OAUTH_KEY,oauthProvider)},clearLastUserOAuthProvider:function(){$window.localStorage&&$window.localStorage.removeItem(LAST_USED_OAUTH_KEY)},getLastUsedOAuthProvider:function(){return $window.localStorage?$window.localStorage.getItem(LAST_USED_OAUTH_KEY):null},cancelLogin:function(){closeLoginDialog(!1),redirectToHome()},logout:function(){$window.localStorage&&$window.localStorage.removeItem(LAST_USED_OAUTH_KEY),apinetService.action({method:"core/auth/logout"}).then(function(){$rootScope.$emit(AUTH_EVENTS.LOGOUT),service.currentUser=null,redirectToHome()})},requestCurrentUser:function(){return service.isAuthenticated()?$q.when(service.currentUser):apinetService.action({method:"core/auth/currentUserDto"}).then(function(result){return("undefined"==typeof result.success||result.success)&&(service.currentUser=result,$rootScope.$emit(AUTH_EVENTS.LOGIN,{user:service.currentUser}),service.currentUser&&(service.currentUser.admin="Administrator"===service.currentUser.SystemRole,service.rememberLastUsedOAuthProvider(service.currentUser.Provider))),service.currentUser})},currentUser:null,isAuthenticated:function(){return!!service.currentUser},isAdmin:function(){return!(!service.currentUser||!service.currentUser.admin)},switchCurrent:function(project,ouId,role){return apinetService.action({method:$rootScope.module+"/project/switchRole",project:project,ouId:ouId,role:role})}};return service}])}),define("core/security/LoginFormController",["./moduleDef","jquery","angular"],function(module,$,angular){module.controller("LoginFormController",["$scope","security","i18n","$window","$q","$timeout","$location",function($scope,security,i18n,$window,$q,$timeout){$scope.modes={reload:"Reload",signin:"SignIn",autosignin:"AutoSignIn"},$scope.authError=null,$scope.mode=$scope.modes.signin,$scope.authReason=null;var lr=security.getLoginReason();lr&&("no-connection"===lr?($scope.authReason="core.auth.reason.notConnected",$scope.mode=$scope.modes.reload):$scope.authReason=security.isAuthenticated()?"core.auth.reason.notAuthorized":"core.auth.reason.notAuthenticated"),$scope.loginFacebook=function(){oauthLogin(security.facebookLoginUrl(),"fb")},$scope.loginTwitter=function(){oauthLogin(security.twitterLoginUrl(),"twi")},$scope.loginStructuredWay=function(){oauthLogin(security.swLoginUrl(),"sw")},$scope.loginGoogle=function(){oauthLogin(security.googleLoginUrl(),"gl")};var oauthLogin=function(baseUrl){if($window.isCordova){{var oauthRootUrl=security.oauthRoot(),deffered=$q.defer(),defferedResolved=!1,onloadHandler=function(stateId){var iframe=$window.document.createElement("iframe");iframe.src=oauthRootUrl+"?state="+stateId,$(iframe).appendTo("body").on("load",function(){if(angular.isDefined(iframe.contentWindow.apinetAuthData)){var auth=angular.copy(iframe.contentWindow.apinetAuthData);auth.success?(auth.user=angular.fromJson(auth.user_json),delete auth.user_json,deffered.resolve(auth.user)):deffered.reject("core.auth.errors.canceled")}else deffered.reject("core.auth.errors.noUserInfo");defferedResolved=!0,$timeout(function(){$(iframe).remove(),delete $window.agoAuthorize},0)})};$window.open(baseUrl,"_system","location=yes,transitionstyle=fliphorizontal")}$window.agoAuthorize=function(stateId){onloadHandler(stateId)},$timeout(function(){defferedResolved||deffered.reject("core.auth.errors.timedout")},12e4),deffered.promise.then(function(res){security.setLoggedInUser(res)},function(err){$scope.authError=i18n.msg(err)})}else $window.location.href=baseUrl};if($scope.loginDemoUser=function(){$scope.authError=null,security.loginAsDemo().then(function(result){"undefined"==typeof result.success||result.success||($scope.validation=result,$scope.authError=i18n.msg("core.auth.errors.invalidCredentials"))},function(error){$scope.authError=i18n.msg("core.auth.errors.serverError",{exception:error})})},$scope.retry=function(){security.reconnect()},!security.isAuthenticated()){var lastUsedOAuth=security.getLastUsedOAuthProvider();if(lastUsedOAuth)switch($scope.mode=$scope.modes.autosignin,security.clearLastUserOAuthProvider(),lastUsedOAuth){case"fb":$scope.loginFacebook();break;case"twi":$scope.loginTwitter();break;case"sw":$scope.loginStructuredWay();break;case"gl":$scope.loginGoogle()}}}])}),define("text!core/security/userMenu.tpl.html",[],function(){return'<li class="dark user-menu" ng-class="{dropdown: isAuthenticated()}">\r\n    <a class="dropdown-toggle" ng-show="!isAuthenticated()" ng-click="login()" href="">\r\n        <i class="icon-key"></i>\r\n        <span class="hidden-xs inline-block">{{ i18n.core.menu.user.login }}</span>\r\n    </a>\r\n\r\n    <a ng-show="isAuthenticated()" href="#" class="dropdown-toggle" data-toggle="dropdown">\r\n        <img width="23" height="23" ng-show="currentUser.AvatarUrl"\r\n            ng-src="{{currentUser.AvatarUrl}}" />\r\n	    <span class="user-name">{{ currentUser.FullName }}</span>\r\n	    <b class="caret"></b>\r\n    </a>\r\n    <ul ng-show="isAuthenticated()" class="dropdown-menu">\r\n        <li>\r\n            <a ui-sref="page.projects.calendar">\r\n                <i class="icon-calendar"></i>\r\n                {{ i18n.core.calendar.title }}\r\n            </a>\r\n        </li>\r\n        <li>\r\n            <a ui-sref="page.projects.reports">\r\n                <i class=\'icon-print\'></i>\r\n                {{ i18n.core.menu.user.reports }}\r\n            </a>\r\n        </li>\r\n        <li>\r\n            <a ui-sref="page.userProfile">\r\n                <i class=\'icon-user\'></i>\r\n                {{ i18n.core.menu.user.profile }}\r\n            </a>\r\n        </li>\r\n        <li class="divider"></li>\r\n        <li>\r\n        	<a href="" ng-click="logout()">\r\n        		<i class=\'icon-signout\'></i>\r\n        		{{ i18n.core.auth.buttons.signOut }}\r\n        	</a>\r\n        </li>\r\n    </ul>\r\n</li>\r\n'
}),define("core/security/userMenu",["./moduleDef","angular","text!./userMenu.tpl.html"],function(module,angular,tpl){module.directive("userMenu",["security",function(security){return{template:tpl,restrict:"EA",replace:!0,scope:!0,controller:function($scope,$rootScope){angular.extend($scope,{i18n:$rootScope.i18n,isAuthenticated:security.isAuthenticated,login:security.showLogin,logout:security.logout}),$scope.$watch(function(){return security.currentUser},function(currentUser){$scope.currentUser=currentUser})}}}])}),define("core/security/userRoleCtrl",["./moduleDef"],function(module){module.controller("userRoleCtrl",["$scope","moduleConfig","$stateParams","$exceptionHandler","security","$window",function($scope,moduleConfig,$stateParams,$exceptionHandler,security,$window){$scope.current;var onError=function(error){$exceptionHandler(error)};moduleConfig.getConfig($stateParams.project).then(function(cfg){$scope.current={memberId:cfg.memberId,ou:cfg.currentOU,role:cfg.currentRole}},onError),$scope.filled=function(){return $scope.current&&$scope.current.ou&&$scope.current.role},$scope.switch=function(){$scope.filled()&&security.switchCurrent($stateParams.project,$scope.current.ou.id,$scope.current.role.id).then(function(response){response===!0?(moduleConfig.setCurrent($stateParams.project,$scope.current.ou,$scope.current.role).then(null,onError),$window.location.reload()):onError("Switching role was unsuccessful")},onError)}}])}),define("core/security/module",["./moduleDef","./authorization","./interceptor","./retryQueue","./service","./LoginFormController","./userMenu","./userRoleCtrl"],function(module){return module}),define("core/common/tasks/moduleDef",["angular"],function(angular){return angular.module("common.tasks",["core.module"])}),define("core/common/tasks/nls/en",["../moduleDef"],function(module){module.service("common.tasks/nls/en",["i18n",function(i18n){var data={priority:{normal:"Normal"},canClose:{allowed:"Allowed",restricted:"Forbidden"},expiration:{already:"Expired {{days}} {{daysText}}",will:"Will be expired {{days}} {{daysText}}"},duration:{days:{one:"day",few:"days",many:"days",other:"days"},hours:{one:"hour",few:"hours",many:"hours",other:"hours"},minutes:"min"},fields:{seqNumber:"Task number",type:"Task type",managers:"Managers",executors:"Executors",dueDate:"Finish date",content:"Content",status:"Status",priority:"Priority",note:"Note",agreements:"Agreements",topFiles:"Files (top {{count}})",tags:"Tags",estimatedTime:"Estimated time",spentTime:"Spent time",executorCanCloseTask:"Executor can close task",executorCanAssignTask:"Executor can assign task",primary:"Primary task",startDate:"Start date",predecessors:"Predecessors",predecessorsByStart:"Start with",predecessorsByEnd:"Start after",percentCompleted:"Percent completed",executorsCanCreateSubtask:"Create subtasks"},confirm:{"delete":{task:"Are you really want to delete this task?",tasks:"Are you really want to delete this tasks?"}},agreements:{title:"Agreements",fields:{agreemer:"Agreemer",dueDate:"Due date",done:"Agreed",comment:"Comment"},placeholders:{agreemer:"Select agreemer",dueDate:"Select due date",comment:"Type your comment here"},buttons:{dropdown:"Actions",add:"Add agreemer",agree:"Agree",toggleAgree:"Agree with comment",revoke:"Revoke agreement"},confirm:"Are you really want to delete this agreemer?"},taskType:{title:"Task types"},view:{tabs:{overview:"Overview",subtasks:"Subtasks",comments:"Comments",files:"Files"},general:{title:"General properties",assignAll:"Assign all"},files:{title:"Files",fields:{size:"File size"}},timelog:{title:"Timelog",empty:"No timelog entries",placeholders:{time:"Spent time (hours)",comment:"Comment (optional)"},fields:{time:"Time",comment:"Comment"},closed:"Timelog closed"},comments:{title:"Comments",placeholder:"Type new comment...",fields:{text:"Comment"}}},filters:{role:{title:"Role",any:"Any",meManager:"I am a manager",meExecutor:"I am an executor",meAgreemer:"I am an agreemer",meAuthor:"I am an author"},state:{title:"State",any:"Any",overdue:"Overdue tasks",notClosed:"Not closed",completedAndNotAgreed:"Need an agreement",dayLeft:"1 day to deadline",weekLeft:"1 week to deadline",closedToday:"Closed today",closedYesterday:"Closed yesterday",running:"Running",createdToday:"Created today"}},list:{title:"Tasks",buttons:{add:"Create task",reportDefault:"Task list",detailedTaskList:"Detailed task list",addSubtask:"Create subtask",addNextSubtask:"Create next"},placeholders:{"delete":"Delete task",deleteSelected:"Delete selected tasks"},expiration:{already:"Expired {{days}} {{daysText}}",will:"Will be expired {{days}} {{daysText}}"}},create:{title:"Create new task",primaryTask:"Primary task",useTask:"Use this task as primary",linkedCard:"Source object",useCard:"Use this object as source for task",constraints:"Constraints",action:"Action",placeholders:{type:"Select task type",executors:"Select executors",priority:"Select priority",predecessors:"Select tasks"},labels:{afterCreation:"After task created",afterCreationGoToTask:"Navagate to new task",afterCreationGoToPrimary:"Navagate to primary task",afterCreationGoToCard:"Navagate to object tasks",afterCreationGoToList:"Navagate to tasks list",afterCreationStayHere:"Create another task",byStart:"Start now and finish at",byEnd:"Start at and finish at",byEndDependencies:"Start after",byStartDependencies:"Start with",modePlanning:"Planning",modeSelfAssignment:"Self-assignment",modeAssignment:"Assignment"},buttons:{save:"Create task"}},subtasks:{title:"Subtasks",create:"New subtask",moreItems:"(+{{num}} more)"},links:{input:"Input",output:"Output",moreItems:"(+{{num}} more)",buttons:{dropdown:"Action",addCard:"Add object",addFile:"Add file",newCard:"Create new object",remove:"Unlink selected items"},placeholder:"Select item...",files:"Files"},types:{title:"Task types",placeholders:{name:"Task type name",replacementType:"With replacement for ..."},buttons:{"delete":"Delete task type"}}};return function(){i18n.addMessages("common",{tasks:data})}}])}),define("core/common/tasks/nls/ru",["../moduleDef"],function(module){module.service("common.tasks/nls/ru",["i18n",function(i18n){var data={priority:{normal:""},canClose:{allowed:"",restricted:""},expiration:{already:" {{days}} {{daysText}}",will:"   {{days}} {{daysText}}"},duration:{days:{one:"",few:"",many:"",other:""},hours:{one:"",few:"",many:"",other:""},minutes:""},fields:{seqNumber:" ",type:" ",managers:"",executors:"",dueDate:" ",content:"",status:"",priority:"",note:"",agreements:"",topFiles:" ( {{count}})",tags:"",estimatedTime:" ",spentTime:" ",executorCanCloseTask:"   ",executorCanAssignTask:"   ",primary:" ",startDate:" ",predecessors:"",predecessorsByStart:"  ",predecessorsByEnd:" ",percentCompleted:"% ",executorsCanCreateSubtask:" "},confirm:{"delete":{task:"    ?",tasks:"    ?"}},agreements:{title:"",fields:{agreemer:"",dueDate:"",done:"",comment:""},placeholders:{agreemer:" ",dueDate:"",comment:"  "},buttons:{dropdown:"",add:" ",agree:"",toggleAgree:"  ",revoke:" "},confirm:"    ?"},taskType:{title:" "},view:{tabs:{overview:"",subtasks:"",comments:"",files:""},general:{title:" ",assignAll:" "},files:{title:"",fields:{size:" "}},timelog:{title:" ",empty:" ",placeholders:{time:"  ()",comment:" ()"},fields:{time:"",comment:""},closed:"  "},comments:{title:"",placeholder:"   ...",fields:{text:""}}},filters:{role:{title:"",any:"",meManager:" - ",meExecutor:" - ",meAgreemer:" - ",meAuthor:" - "},state:{title:"",any:"",overdue:"",notClosed:"",completedAndNotAgreed:" ",dayLeft:" 1 ",weekLeft:" 7 ",closedToday:" ",closedYesterday:" ",running:"",createdToday:" "}},list:{title:"",buttons:{add:" ",reportDefault:" ",detailedTaskList:"  ",addSubtask:" ",addNextSubtask:" "},placeholders:{"delete":" ",deleteSelected:"  "},expiration:{already:" {{days}} {{daysText}}",will:"   {{days}} {{daysText}}"}},create:{title:" ",primaryTask:" ",useTask:"   ",linkedCard:" ()",useCard:"    ",constraints:"",action:"",placeholders:{type:"  ",executors:" ",priority:" ",predecessors:" "},labels:{afterCreation:"  ",afterCreationGoToTask:"  ",afterCreationGoToPrimary:"  ",afterCreationGoToCard:"   ",afterCreationGoToList:"   ",afterCreationStayHere:"  ",byStart:"    ",byEnd:"    ",byEndDependencies:" ",byStartDependencies:"  ",modePlanning:"",modeSelfAssignment:"",modeAssignment:""},buttons:{save:" "}},subtasks:{title:"",create:" ",moreItems:"(+{{num}} )"},links:{input:"",output:"",moreItems:"(+{{num}} )",buttons:{dropdown:"",addCard:" ",addFile:" ",newCard:"  ",remove:"    "},placeholder:" ...",files:""},types:{title:" ",placeholders:{name:"  ",replacementType:"   ..."},buttons:{"delete":"  "}}};return function(){i18n.addMessages("common",{tasks:data})}}])}),define("text!core/common/tasks/agreements/agreementsView.tpl.html",[],function(){return'<div>\r\n<ago-box color="blue" title-click-collapse collapsible="true" large="true" collapsed="collapsed">\r\n	<ago-box-title>\r\n		<i class="icon-table"></i>\r\n		<span bindonce="i18n.common.tasks" bo-text="i18n.common.tasks.agreements.title"></span>\r\n	</ago-box-title>\r\n	<ago-box-actions>\r\n		<a class="btn btn-xs btn-link">\r\n			<i class="fa" ng-class="{ \'icon-chevron-up\': !collapsed, \'icon-chevron-down\': collapsed }"></i>\r\n		</a>\r\n	</ago-box-actions>\r\n\r\n	<ago-box-content>\r\n		<div class="box-toolbox box-toolbox-top" ng-show="isAgreementsEditable()" bindonce="i18n.common.tasks">\r\n			<ago-error-msg></ago-error-msg>\r\n\r\n			<div class="dropdown pull-right" ng-hide="editables.state">\r\n				<a class="btn dropdown-toggle" data-toggle="dropdown" href="">\r\n                    <span bo-text="i18n.common.tasks.agreements.buttons.dropdown"></span>\r\n					<span class="caret"></span>\r\n				</a>\r\n				<ul class="dropdown-menu">\r\n					<li><a ng-click="goToState(\'add\')" href="" bo-text="i18n.common.tasks.agreements.buttons.add"></a></li>\r\n					<li><a ng-click="agree()" href="" bo-text="i18n.common.tasks.agreements.buttons.agree"></a></li>\r\n					<li><a ng-click="goToState(\'agree\')" href="" bo-text="i18n.common.tasks.agreements.buttons.toggleAgree"></a></li>\r\n					<li class="divider"></li>\r\n					<li><a ng-click="revoke()" href="" bo-text="i18n.common.tasks.agreements.buttons.revoke"></a></li>\r\n				</ul>\r\n			</div>\r\n			<div class="clearfix"></div>\r\n\r\n			<div class="row" ng-show="editables.state === \'add\'">\r\n				<div class="col-xs-12">\r\n					<form class="form-inline" novalidate>\r\n						<div class="col-sm-6" style="padding-left: 0px; padding-right: 0px">\r\n							<input type="text" name="agreemer" lookup="core/projects/lookupParticipant"\r\n                                   ng-model="editables.newAgreemer" class="form-control"\r\n                                   bo-attr bo-attr-placeholder="i18n.common.tasks.agreements.placeholders.agreemer" />\r\n						</div>\r\n						<div class="col-sm-4" style="padding-left: 0px; padding-right: 0px">\r\n							<input type="text" class="form-control" ng-model="editables.dueDate" bs-datepicker\r\n                                   bo-attr bo-attr-placeholder="i18n.common.tasks.agreements.placeholders.dueDate" />\r\n						</div>\r\n						<div class="col-sm-2 btn-group" style="padding-left: 0px">\r\n							<button type="button" class="btn" ng-click="goToState(null)" bindonce="i18n.core" bo-title="i18n.core.buttons.cancel">\r\n								<i class="icon-reply"></i>\r\n							</button>\r\n							<button type="button" class="btn" ng-click="addAgreemer()" ng-disabled="!addAgreementAvailable()">\r\n								<i class="icon-plus"></i>\r\n							</button>\r\n						</div>\r\n					</form>\r\n				</div>\r\n			</div>\r\n\r\n			<div class="row" ng-show="editables.state === \'agree\'">\r\n				<div class="col-xs-12">\r\n					<div class="input-group">\r\n						<input type="text" ng-model="editables.comment" class="form-control"\r\n                               bo-attr bo-attr-placeholder="i18n.common.tasks.agreements.placeholders.comment">\r\n						<span class="input-group-btn">\r\n							<button type="button" class="btn" ng-click="goToState(null)"\r\n                                    bindonce="i18n.core" bo-title="i18n.core.buttons.cancel">\r\n								<i class="icon-reply"></i>\r\n							</button>\r\n							<button type="button" class="btn" ng-click="agree()" bo-title="i18n.common.tasks.agreements.buttons.agree">\r\n								<i class="icon-ok"></i>\r\n							</button>\r\n						</span>\r\n					</div>\r\n				</div>\r\n			</div>\r\n\r\n		</div>\r\n\r\n		<div class="responsive-table">\r\n			<div class="scrollable-area">\r\n				<table class="table table-bordered">\r\n					<thead>\r\n						<tr bindonce="i18n.common.tasks">\r\n							<th class="col-xs-7 col-sm-4" bo-text="i18n.common.tasks.agreements.fields.agreemer"></th>\r\n							<th class="col-sm-3 hidden-xs" bo-text="i18n.common.tasks.agreements.fields.dueDate"></th>\r\n							<th class="col-xs-5 col-sm-3" bo-text="i18n.common.tasks.agreements.fields.done"></th>\r\n							<th class="col-sm-2 hidden-xs" bo-text="i18n.common.tasks.agreements.fields.comment"></th>\r\n							<th class="onepct">&nbsp;</th>\r\n						</tr>\r\n					</thead>\r\n					<tbody>\r\n						<tr bindonce ng-repeat="a in model.Agreements">\r\n							<td class="col-xs-9 col-sm-4" bo-text="a.Agreemer"></td>\r\n							<td class="col-sm-3 hidden-xs" bo-text="a.DueDate | date:\'ago_date\'"></td>\r\n							<td class="col-xs-3">\r\n								<i ng-class="{\'icon-check\': a.Done, \'icon-check-empty\': !a.Done}"></i>\r\n								{{ a.AgreedAt | date:\'ago_datetime\' }}\r\n							</td>\r\n							<td class="col-sm-2 hidden-xs">{{ a.Comment }}</td>\r\n							<td class="onepct">\r\n                                <ago-btn-delete ng-click="removeAgreement(a)" ng-show="isAgreementsEditable()"\r\n                                                bindonce="i18n.core" bo-title="i18n.core.buttons.delete"></ago-btn-delete>\r\n							</td>\r\n						</tr>\r\n					</tbody>\r\n				</table>\r\n			</div>\r\n		</div>\r\n	</ago-box-content>\r\n</ago-box>\r\n</div>\r\n'}),define("core/common/tasks/agreements/agreementsView",["../moduleDef","angular","text!./agreementsView.tpl.html"],function(module,angular,tpl){module.directive("commonTasksAgreementsView",["apinetService","dialogService","i18n","taskStatuses","$stateParams","$controller",function(apinetService,dialogService,i18n,taskStatuses,$stateParams,$controller){return{restrict:"E",template:tpl,controller:["$scope","$rootScope",function($scope,$rootScope){$scope.i18n=$rootScope.i18n}],scope:{model:"=",collapsed:"=",apiPrefix:"@"},link:function($scope){angular.extend(this,$controller("ErrorHandlingCtrl",{$scope:$scope})),$scope.editables={newAgreemer:null,dueDate:null,comment:null,state:null},$scope.addAgreemer=function(){apinetService.action({method:$scope.apiPrefix+"/tasks/addAgreemer",project:$stateParams.project,taskId:$scope.model.Id,participantId:$scope.editables.newAgreemer.id,dueDate:$scope.editables.dueDate}).then(function(response){$scope.model.Agreements.push(response),$scope.editables.newAgreemer=null,$scope.editables.dueDate=null,$scope.goToState(null)},$scope.handleException)},$scope.removeAgreement=function(agreement){dialogService.confirm(i18n.msg("core.confirm.delete.title"),i18n.msg("common.tasks.agreements.confirm")).then(function(){apinetService.action({method:$scope.apiPrefix+"/tasks/removeAgreement",project:$stateParams.project,taskId:$scope.model.Id,agreementId:agreement.Id}).then(function(response){if(response===!0){var index=$scope.model.Agreements.indexOf(agreement);index>=0&&$scope.model.Agreements.splice(index,1)}else $scope.handleException(i18n.msg("core.errors.nothingToDelete"))},$scope.handleException)})};var doChange=function(params){apinetService.action(params).then(function(response){var agr=null;angular.forEach($scope.model.Agreements,function(v){v.Id===response.Id&&(agr=v)}),agr&&angular.extend(agr,response),$scope.goToState(null)},$scope.handleException)};$scope.agree=function(){doChange({method:$scope.apiPrefix+"/tasks/agreeTask",project:$stateParams.project,taskId:$scope.model.Id,comment:$scope.editables.comment})},$scope.revoke=function(){doChange({method:$scope.apiPrefix+"/tasks/revokeAgreement",project:$stateParams.project,taskId:$scope.model.Id})},$scope.goToState=function(state){$scope.editables.state=state,"agree"===$scope.editables.state&&($scope.editables.comment=null)},$scope.isAgreementsEditable=function(){return $scope.model&&$scope.model.Status&&$scope.model.Status.id!==taskStatuses.Closed},$scope.addAgreementAvailable=function(){return $scope.isAgreementsEditable()&&null!==$scope.editables.newAgreemer}}}}])}),define("text!core/common/tasks/task-type/taskTypeView.tpl.html",[],function(){return'<div class="container"\r\n     filtered-list="filteredList"\r\n     initial-sorters="{ FullName: \'asc\'}">\r\n    <div class="row" id="content-wrapper">\r\n        <div class="col-xs-12">\r\n\r\n            <div filters-box="filter" sorters="sorters" meta="{{metaUrl}}"\r\n                 group="PAS.TaskType"\r\n                 apply-enabled="applyEnabled" apply-filter="applyFilter" reset-filter="resetFilter"\r\n                 filter-applied="filterApplied" style="padding-top: 5px">\r\n                <ago-box-content>\r\n                    <form class="form form-horizontal">\r\n                        <div class="form-group" bindonce="i18n.core">\r\n                            <label class="col-md-3 control-label" bo-text="i18n.core.fields.name"></label>\r\n\r\n                            <div class="col-md-9">\r\n                                <input ng-model="filter.simple.FullName" filter-node="{path: \'FullName\', op:\'like\'}"\r\n                                       class="form-control"/>\r\n                            </div>\r\n                        </div>\r\n                    </form>\r\n                </ago-box-content>\r\n            </div>\r\n\r\n            <ago-box color="purple" large="true" header-class="{\'hidden-md\': true, \'hidden-lg\': true}">\r\n                <ago-box-title>\r\n                    <i class="icon-cog"></i>\r\n                    <span bindonce="i18n.common.tasks.taskType" bo-text="i18n.common.tasks.taskType.title"></span>\r\n                </ago-box-title>\r\n                <ago-box-content>\r\n                    <ago-hdict-view counter-url="{{counterUrl}}">\r\n                        <ago-hdict-add-form>\r\n                            <ago-hdict-default-add-form model="newModel" vld="validation"\r\n                                parent-url="" bindable-parent-url="lookupUrl"\r\n                                ng-show="createFormVisible" on-update="create()" on-cancel="toggleCreateForm(false)">\r\n                            </ago-hdict-default-add-form>\r\n                        </ago-hdict-add-form>\r\n                        <ago-hdict-header>\r\n                            <ago-hdict-fullname-header></ago-hdict-fullname-header>\r\n                        </ago-hdict-header>\r\n                        <ago-hdict-column>\r\n                            <ago-hdict-fullname-column></ago-hdict-fullname-column>\r\n                        </ago-hdict-column>\r\n                    </ago-hdict-view>\r\n                </ago-box-content>\r\n            </ago-box>\r\n        </div>\r\n    </div>\r\n</div>\r\n'}),define("core/common/tasks/task-type/taskType",["../moduleDef","angular","text!./taskTypeView.tpl.html"],function(module,angular,template){module.config(["$stateProvider",function($stateProvider){$stateProvider.state({name:"page.project.common-taskType","abstract":!0,views:{"":{template:template,controller:"taskTypeCtrl"}},onExit:["$rootScope",function($rootScope){$rootScope.breadcrumbs.splice($rootScope.breadcrumbs.length-1,1)}]})}]).controller("commonTaskTypeCtrl",["$scope","apiPrefix","$controller",function($scope,apiPrefix,$controller){angular.extend($scope,{filteredList:{method:apiPrefix+"/getTaskTypes"},metaUrl:apiPrefix+"/TaskTypeMetadata",counterUrl:apiPrefix+"/getTaskTypesCount",lookupUrl:apiPrefix+"/lookupTaskTypes"}),angular.extend(this,$controller("BaseHDictFullNameCtrl",{$scope:$scope,actionPrefix:apiPrefix,entityType:"TaskType"}))}])}),define("text!core/common/tasks/create/taskCreate.tpl.html",[],function(){return'<div class="box" bindonce="i18n.common.tasks">\r\n    <div class="box-header purple-background">\r\n        <div class="title">\r\n            <i class="icon-plus"></i>\r\n            <span bo-text="i18n.common.tasks.create.title"></span>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="box-content">\r\n        <ago-error-msg></ago-error-msg>\r\n\r\n        <form name="form" class="form form-horizontal" novalidate>\r\n            <!-- Action -->\r\n            <ago-new-form-static-item label="i18n.common.tasks.create.action" visible="true">\r\n                <label class="radio radio-inline">\r\n                    <input type="radio" ng-model="editables.action" ng-value="actions.assignment">\r\n                    {{ i18n.common.tasks.create.labels.modeAssignment }}\r\n                </label>\r\n                <label class="radio radio-inline">\r\n                    <input type="radio" ng-model="editables.action" ng-value="actions.planning">\r\n                    {{ i18n.common.tasks.create.labels.modePlanning }}\r\n                </label>\r\n                <label class="radio radio-inline">\r\n                    <input type="radio" ng-model="editables.action" ng-value="actions.selfAssignment">\r\n                    {{ i18n.common.tasks.create.labels.modeSelfAssignment }}\r\n                </label>\r\n            </ago-new-form-static-item>\r\n\r\n            <!-- Task type -->\r\n            <ago-new-form-item label="i18n.common.tasks.fields.type" field="TaskType" control="form.taskType"\r\n                               vld="validation">\r\n                <input type="text" name="taskType" lookup=""\r\n                       ng-model="model.taskType" placeholder="{{ i18n.common.tasks.create.placeholders.type }}"\r\n                       required class="form-control" />\r\n            </ago-new-form-item>\r\n\r\n            <!-- Content -->\r\n            <ago-new-form-item label="i18n.common.tasks.fields.content" field="Content" control="form.content"\r\n                               vld="validation">\r\n                <textarea name="content" ng-model="model.content" rows="3" class="form-control" required></textarea>\r\n            </ago-new-form-item>\r\n\r\n            <!-- Executors -->\r\n            <ago-new-form-item label="i18n.common.tasks.fields.executors" field="Executors" control="form.executors"\r\n                               vld="validation">\r\n                <input type="text" name="executors" lookup="core/projects/lookupParticipant"\r\n                       ng-model="model.executors" multiple required-multiple class="form-control"\r\n                       placeholder="{{ i18n.common.tasks.create.placeholders.executors }}"\r\n                       ng-required="editables.required.executors" />\r\n            </ago-new-form-item>\r\n\r\n            <!-- Constraint type -->\r\n            <ago-new-form-static-item label="i18n.common.tasks.create.constraints" visible="true">\r\n                <label class="radio radio-inline">\r\n                    <input type="radio" ng-model="editables.crType" ng-value="crTypes.nowToFinish">\r\n                    {{ i18n.common.tasks.create.labels.byStart }}\r\n                </label>\r\n                <label class="radio radio-inline">\r\n                    <input type="radio" ng-model="editables.crType" ng-value="crTypes.startToFinish">\r\n                    {{ i18n.common.tasks.create.labels.byEnd }}\r\n                </label>\r\n                <label class="radio radio-inline">\r\n                    <input type="radio" ng-model="editables.crType" ng-value="crTypes.depByStart">\r\n                    {{ i18n.common.tasks.create.labels.byStartDependencies }}\r\n                </label>\r\n                <label class="radio radio-inline">\r\n                    <input type="radio" ng-model="editables.crType" ng-value="crTypes.depByFinish">\r\n                    {{ i18n.common.tasks.create.labels.byEndDependencies }}\r\n                </label>\r\n            </ago-new-form-static-item>\r\n\r\n            <!-- Start date -->\r\n            <ago-new-form-item label="i18n.common.tasks.fields.startDate" field="StartDate" control="form.startDate"\r\n                               vld="validation" ng-show="editables.visible.start">\r\n                <datetimepicker name="startDate" ng-model="model.startDate"\r\n                                ng-required="editables.required.start"></datetimepicker>\r\n            </ago-new-form-item>\r\n\r\n            <!-- Estimated time -->\r\n            <ago-new-form-item label="i18n.common.tasks.fields.estimatedTime" field="EstimatedTime"\r\n                               control="form.estimatedTime" vld="validation"\r\n                               ng-show="editables.visible.duration">\r\n                <input name="estimatedTime" ng-model="model.estimatedTime" class="form-control"\r\n                       ng-required="editables.required.duration" ago-timespan\r\n                       placeholder="{{ i18n.core.timespan.placeholder }}" />\r\n            </ago-new-form-item>\r\n            <!-- Due date -->\r\n            <ago-new-form-item label="i18n.common.tasks.fields.dueDate" field="DueDate" control="form.dueDate"\r\n                               vld="validation" ng-show="editables.visible.finish">\r\n                <datetimepicker name="dueDate" ng-model="model.dueDate"\r\n                                ng-required="editables.required.finish"></datetimepicker>\r\n            </ago-new-form-item>\r\n\r\n            <!-- Predecessors -->\r\n            <ago-new-form-item label="i18n.common.tasks.fields.predecessors" field="Predecessors"\r\n                               control="form.predecessors" vld="validation" ng-show="editables.visible.predecessors">\r\n                <input type="text" name="predecessors" lookup=""\r\n                       ng-model="model.predecessors" multiple required-multiple class="form-control"\r\n                       placeholder="{{ i18n.common.tasks.create.placeholders.predecessors }}"\r\n                       ng-required="editables.required.predecessors" />\r\n            </ago-new-form-item>\r\n\r\n            <!-- Priority -->\r\n            <ago-new-form-item label="i18n.common.tasks.fields.priority" field="Priority" control="form.priority"\r\n                               vld="validation">\r\n                <input type="text" name="priority" lookup=""\r\n                       lookup-options="{allowClear: true}" ng-model="model.priority"\r\n                       placeholder="{{ i18n.common.tasks.create.placeholders.priority }}" class="form-control" />\r\n            </ago-new-form-item>\r\n\r\n            <!-- Can executor close task -->\r\n            <ago-new-form-item label="i18n.common.tasks.fields.executorCanCloseTask" field="ExecutorCanCloseTask"\r\n                               control="form.canClose" vld="validation">\r\n                <div class="checkbox">\r\n                    <input type="checkbox" name="canClose" ng-model="model.canClose">\r\n                </div>\r\n            </ago-new-form-item>\r\n\r\n            <!-- Primary task (if present) -->\r\n            <ago-new-form-static-item label="i18n.common.tasks.create.primaryTask" visible="primary">\r\n                <div class="checkbox">\r\n                    <label>\r\n                        <input type="checkbox" ng-model="model.useTask">\r\n                        {{ i18n.common.tasks.create.useTask }}\r\n                    </label>\r\n                </div>\r\n                <common-tasks-task-short-info num="primary" api-prefix="" sref=""></common-tasks-task-short-info>\r\n            </ago-new-form-static-item>\r\n\r\n            <div ng-transclude></div>\r\n\r\n            <!-- Goto section -->\r\n            <div class="form-group">\r\n                <label class="col-md-2 control-label" bo-text="i18n.common.tasks.create.labels.afterCreation"></label>\r\n                <div class="col-md-10">\r\n                    <label class="radio radio-inline" ng-repeat="a in nextActions">\r\n                        <input type="radio" ng-model="editables.nextAction" value="{{ a.action }}" name="nextAction">{{ a.title | i18n }}\r\n                    </label>\r\n                </div>\r\n            </div>\r\n            <!-- Action section -->\r\n            <div class="form-actions form-actions-padding-sm">\r\n                <div class="row">\r\n                    <div class="col-md-10 col-md-offset-2">\r\n                        <button type="button" class="btn" ng-click="cancel()" bo-text="i18n.core.buttons.cancel"></button>\r\n                        <button type="button" class="btn btn-success" ng-click="create()" ng-disabled="form.$invalid"\r\n                                bo-text="i18n.common.tasks.create.buttons.save"></button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </form>\r\n    </div>\r\n</div>\r\n'}),define("core/common/tasks/create/taskCreate",["../moduleDef","angular","jquery","text!./taskCreate.tpl.html"],function(module,angular,$,tpl){module.directive("commonTasksCreateTask",[function(){return{restrict:"E",template:tpl,transclude:!0,scope:!1,compile:function(elm,attrs){$('input[name="taskType"]',elm).attr("lookup",attrs.dictionaryApi+"/lookupTaskTypes"),$('input[name="predecessors"]',elm).attr("lookup",attrs.tasksApi+"/lookupTasks"),$('input[name="priority"]',elm).attr("lookup",attrs.dictionaryApi+"/lookupTaskPriorities"),$("common-tasks-task-short-info",elm).attr("api-prefix",attrs.tasksApi),$("common-tasks-task-short-info",elm).attr("sref",attrs.taskSref)}}}]);var ctrl=function($scope,settings,$stateParams,$state,apinetService,i18n,taskPriorities,$controller){angular.extend(this,$controller("ErrorHandlingCtrl",{$scope:$scope})),$scope.cancel=function(){$state.go("page.project.tasks")};var commonActions=[{action:"goToTask",title:"common.tasks.create.labels.afterCreationGoToTask"},{action:"goToPrimary",title:"common.tasks.create.labels.afterCreationGoToPrimary"},{action:"goToList",title:"common.tasks.create.labels.afterCreationGoToList"},{action:"stayHere",title:"common.tasks.create.labels.afterCreationStayHere"}];
settings.actions&&settings.actions.length&&settings.actions.length>0&&(commonActions=commonActions.concat(settings.actions)),$scope.nextActions=commonActions,$scope.create=function(){var req=modelToRequest();apinetService.action({method:settings.apiPrefix+"/createTask",project:$stateParams.project,model:req}).then(function(response){response.validation.success?($scope.model=initModel(),"stayHere"===$scope.editables.nextAction?$scope.form.$setPristine():settings.moveTo($scope.editables.nextAction,response.model)):($scope.resetValidation(),$scope.validation=response.validation)},$scope.handleException)};var initModel=function(){var model={assigned:!1,taskType:null,executors:[],startDate:null,dueDate:null,estimatedTime:null,predecessors:null,type:null,content:null,priority:{id:taskPriorities.Normal,text:i18n.msg("common.tasks.priority.normal")},canClose:!0,useTask:!0};return angular.isFunction(settings.initModel)?settings.initModel(model):model};$scope.model=initModel(),$scope.actions={planning:"Planning",selfAssignment:"SelfAssignment",assignment:"Assignment"},$scope.crTypes={nowToFinish:"NowToFinish",startToFinish:"StartToFinish",depByFinish:"DependentByFinish",depByStart:"DependentByStart"},$scope.editables={crType:$scope.crTypes.nowToFinish,action:$scope.actions.assignment,nextAction:"goToTask",visible:{start:!1,duration:!1,finish:!1,predecessors:!1},required:{executors:!1,start:!1,duration:!1,finish:!1,predecessors:!1},modeChanged:function(){var isAssignment=this.action===$scope.actions.assignment,isStartToFinish=this.crType===$scope.crTypes.startToFinish,isNowToFinish=this.crType===$scope.crTypes.nowToFinish,isDep=this.crType===$scope.crTypes.depByFinish||this.crType===$scope.crTypes.depByStart;this.visible.start=isStartToFinish,this.visible.finish=isNowToFinish||isStartToFinish,this.visible.duration=this.visible.predecessors=isDep,this.required.executors=isAssignment,this.required.start=this.visible.start&&isAssignment,this.required.duration=this.visible.duration&&isAssignment,this.required.finish=this.visible.finish&&isAssignment,this.required.predecessors=this.visible.predecessors&&isAssignment}},$scope.$watch("editables.action",function(val){val&&$scope.editables.modeChanged()}),$scope.$watch("editables.crType",function(val){if(val)if($scope.editables.modeChanged(),val===$scope.crTypes.nowToFinish)$scope.model.startDate=null,$scope.model.estimatedTime=null,$scope.model.dueDate=new Date,$scope.model.predecessors=null;else if(val===$scope.crTypes.startToFinish)$scope.model.startDate=new Date,$scope.model.estimatedTime=null,$scope.model.dueDate=new Date,$scope.model.predecessors=null;else{if(val!==$scope.crTypes.depByStart&&val!==$scope.crTypes.depByFinish)throw new Error("Invalid constraint type: "+val);$scope.model.startDate=null,$scope.model.dueDate=null}}),$scope.primary=$stateParams.primary,$scope.startWith=$stateParams.startWith,$scope.startAfter=$stateParams.startAfter,$scope.validation={},($scope.startWith||$scope.startAfter)&&apinetService.action({method:settings.apiPrefix+"/lookupTasks",project:$stateParams.project,term:$scope.startWith||$scope.startAfter,page:0,single:!0}).then(function(response){response&&response.length&&1===response.length&&($scope.editables.crType=$scope.startWith?$scope.crTypes.depByStart:$scope.crTypes.depByFinish,$scope.model.predecessors=response)},$scope.handleException);var modelToRequest=function(){var m=$scope.model,e=[],p=[],type=$scope.editables.crType===$scope.crTypes.depByStart?"StartToStart":$scope.editables.crType===$scope.crTypes.depByFinish?"EndToStart":null;angular.forEach(m.executors,function(v){this.push(v.id)},e),angular.forEach(m.predecessors,function(v){this.push(v.id)},p);var req={Assigned:$scope.editables.action===$scope.actions.assignment,ExecutorCanAssignTask:$scope.editables.action===$scope.actions.selfAssignment,TaskType:m.taskType.id,Executors:e,StartDate:$scope.editables.crType===$scope.crTypes.nowToFinish?new Date:m.startDate,DueDate:$scope.editables.crType===$scope.crTypes.nowToFinish||$scope.editables.crType===$scope.crTypes.startToFinish?m.dueDate:null,EstimatedTime:$scope.editables.crType===$scope.crTypes.depByStart||$scope.editables.crType===$scope.crTypes.depByFinish?m.estimatedTime:null,Predecessors:p,DependencyType:type,Content:m.content,Priority:m.priority?m.priority.id:null,ExecutorCanCloseTask:m.canClose};return $scope.primary&&m.useTask&&(req.Primary=$scope.primary),angular.isFunction(settings.modelToRequest)&&settings.modelToRequest(m,req),req}};module.controller("commonTaskCreateCtrl",["$scope","settings","$stateParams","$state","apinetService","i18n","taskPriorities","$controller",ctrl])}),define("text!core/common/tasks/task-info/taskInfo.tpl.html",[],function(){return'<div class="row">\r\n    <div class="col-xs-12">\r\n        <a href="" class="btn btn-sm" ng-click="go()">\r\n            <strong>{{ model.SeqNumber || \'\' }}</strong>\r\n        </a>\r\n        <span>{{ model.Type }}</span>\r\n\r\n        <ago-status-btn status="model.Status" class="disabled pull-right" view-settins="vs"></ago-status-btn>\r\n\r\n         <span class="clip-content">{{ model.Content }}</span>\r\n    </div>\r\n\r\n    <div class="clearfix"></div>\r\n\r\n    <div class="col-xs-12">\r\n        <ago-lookup-items items="model.Executors"></ago-lookup-items>\r\n        <span style="margin-left: 5px" ng-if="model.StartDate || model.DueDate">\r\n            [\r\n                <em bo-if="model.StartDate" bo-text="model.StartDate | date:\'ago_datetime\'"></em>\r\n                <inline-none ng-ig="model.StartDate"></inline-none>\r\n            &ndash;\r\n                <em bo-if="model.DueDate" bo-text="model.DueDate | date:\'ago_datetime\'"></em>\r\n                <inline-none ng-ig="model.DueDate"></inline-none>\r\n            ]\r\n        </span>\r\n    </div>\r\n</div>\r\n'}),define("core/common/tasks/task-info/taskInfo",["../moduleDef","text!./taskInfo.tpl.html"],function(module,template){module.directive("commonTasksTaskShortInfo",[function(){var ctrl=function($scope,$rootScope,viewSettings,apinetService,$stateParams,$state){$scope.i18n=$rootScope.i18n,$scope.vs=viewSettings,$scope.$watch("num",function(){$scope.num&&($scope.loading&&($scope.loading=!0),apinetService.action({method:$scope.apiPrefix+"/getTaskInfo",project:$stateParams.project,num:$scope.num}).then(function(response){$scope.model=response,$scope.loading&&($scope.loading=!1)},function(error){if($scope.loading&&($scope.loading=!1),!angular.isFunction($scope.onError))throw error;$scope.onError({error:error})}))}),$scope.go=function(){$scope.sref&&$scope.num&&$state.go($scope.sref,{num:$scope.num})}};return{restrict:"E",replace:!0,template:template,scope:{num:"=",sref:"@",apiPrefix:"@",loading:"=",onError:"&"},controller:["$scope","$rootScope","taskStatusViewSettings","apinetService","$stateParams","$state",ctrl]}}])}),define("text!core/common/tasks/props/authorPart.tpl.html",[],function(){return'<div class="row" bindonce="model">\r\n    <ago-form-static-item label="i18n.core.fields.creator">\r\n        {{ model.Author }}\r\n    </ago-form-static-item>\r\n    <ago-form-static-item label="i18n.core.fields.creationTime">\r\n        {{ model.CreationTime | date:\'ago_datetime\' }}\r\n    </ago-form-static-item>\r\n</div>\r\n'}),define("core/common/tasks/props/authorPart",["../moduleDef","angular","text!./authorPart.tpl.html"],function(module,angular,tpl){module.directive("commonTasksPropsAuthorPart",function(){return{restrict:"E",replace:!0,template:tpl,scope:!1}})}),define("text!core/common/tasks/props/numTypePart.tpl.html",[],function(){return'<div class="row">\r\n    <ago-form-static-item label="i18n.common.tasks.fields.seqNumber">\r\n        {{ model.SeqNumber }}\r\n    </ago-form-static-item>\r\n    <ago-form-item label="i18n.common.tasks.fields.type" field="Type" vld="validation">\r\n        <inline-lookup model="model.TaskType" input-col="col-xs-12" required\r\n                       on-update="onUpdateProp(model, \'Type\', val)"\r\n                       on-cancel="onCancelProp()"\r\n                       input-lookup="$lookup$">\r\n        </inline-lookup>\r\n    </ago-form-item>\r\n</div>\r\n'}),define("core/common/tasks/props/numTypePart",["../moduleDef","angular","text!./numTypePart.tpl.html"],function(module,angular,tpl){module.directive("commonTasksPropsNumTypePart",function(){return{restrict:"E",replace:!0,template:function(elm,attrs){var url=attrs.typeLookupUrl;return attrs.$set("typeLookupUrl",null),tpl.replace("$lookup$",url)},scope:!1}})}),define("text!core/common/tasks/props/participantsPart.tpl.html",[],function(){return'<div class="row">\r\n    <ago-form-item label="i18n.common.tasks.fields.managers" field="Managers" vld="validation">\r\n        <inline-lookup model="model.Managers"\r\n                       on-update="onUpdateProp(model, \'Managers\', val)"\r\n                       on-cancel="onCancelProp()"\r\n                       input-lookup="core/projects/lookupParticipant"\r\n                       input-col="col-xs-12" multiple required>\r\n            <ago-lookup-items items="model.Managers"></ago-lookup-items>\r\n        </inline-lookup>\r\n    </ago-form-item>\r\n    <ago-form-item label="i18n.common.tasks.fields.executors" field="Executors" vld="validation">\r\n        <inline-lookup model="model.Executors" input-col="col-xs-12" multiple\r\n                       on-update="onUpdateProp(model, \'Executors\', val)"\r\n                       on-cancel="onCancelProp()"\r\n                       input-lookup="core/projects/lookupParticipant"\r\n                       ng-required="model.Status.id !== \'Plan\'">\r\n            <ago-lookup-items items="model.Executors"></ago-lookup-items>\r\n        </inline-lookup>\r\n    </ago-form-item>\r\n</div>\r\n'}),define("core/common/tasks/props/participantsPart",["../moduleDef","angular","text!./participantsPart.tpl.html"],function(module,angular,tpl){module.directive("commonTasksPropsParticipantsPart",function(){return{restrict:"E",replace:!0,template:tpl,scope:!1}})}),define("text!core/common/tasks/props/contentPart.tpl.html",[],function(){return'<div>\r\n<div class="row">\r\n    <ago-form-item label="i18n.common.tasks.fields.content" field="Content"\r\n                   vld="validation" large="true">\r\n        <inline-text-area model="model.Content" input-col="col-xs-12" input-rows="5"\r\n                          on-update="onUpdateProp(model, \'Content\', val)"\r\n                          on-cancel="onCancelProp()" required>\r\n        </inline-text-area>\r\n    </ago-form-item>\r\n</div>\r\n\r\n<div class="row">\r\n    <ago-form-item label="i18n.common.tasks.fields.note" field="Note" vld="validation"\r\n                   large="true">\r\n        <inline-text-area model="model.Note" input-col="col-xs-12" input-rows="5"\r\n                          on-update="onUpdateProp(model, \'Note\', val)"\r\n                          on-cancel="onCancelProp()"></inline-text-area>\r\n    </ago-form-item>\r\n</div>\r\n</div>\r\n'}),define("core/common/tasks/props/contentPart",["../moduleDef","angular","text!./contentPart.tpl.html"],function(module,angular,tpl){module.directive("commonTasksPropsContentPart",function(){return{restrict:"E",replace:!0,template:tpl,scope:!1}})}),define("text!core/common/tasks/props/timelinePart.tpl.html",[],function(){return'<div>\r\n    <div class="row">\r\n        <ago-form-item label="i18n.common.tasks.fields.startDate" field="StartDate" vld="validation">\r\n            <inline-datetime model="model.StartDate" input-col="col-xs-12"\r\n                             on-update="onUpdateProp(model, \'StartDate\', val)"\r\n                             on-cancel="onCancelProp()"\r\n                             ng-required="model.Status.id !== taskStatuses.Plan"></inline-datetime>\r\n        </ago-form-item>\r\n        <ago-form-item label="i18n.common.tasks.fields.dueDate" field="DueDate" vld="validation">\r\n            <inline-datetime model="model.DueDate" input-col="col-xs-12"\r\n                             on-update="onUpdateProp(model, \'DueDate\', val)"\r\n                             on-cancel="onCancelProp()"\r\n                             ng-required="model.Status.id !== taskStatuses.Plan"></inline-datetime>\r\n        </ago-form-item>\r\n    </div>\r\n\r\n    <div class="row">\r\n        <ago-form-item label="i18n.common.tasks.fields.estimatedTime" field="EstimatedTime" vld="validation">\r\n            <inline-timespan model="model.EstimatedTime" input-col="col-xs-12"\r\n                         placeholder="{{ i18n.core.timespan.placeholder }}"\r\n                         on-update="onUpdateProp(model, \'EstimatedTime\', val)"\r\n                         on-cancel="onCancelProp()"\r\n                         ng-required="model.Status.id !== taskStatuses.Plan"></inline-timespan>\r\n        </ago-form-item>\r\n        <ago-form-item label="i18n.common.tasks.fields.percentCompleted"\r\n                       field="PercentCompleted" vld="validation">\r\n            <inline-number model="model.PercentCompleted" num-min="0" num-max="100"\r\n                           input-col="col-xs-12"\r\n                           on-update="onUpdateProp(model, \'PercentCompleted\', val)"\r\n                           on-cancel="onCancelProp()">\r\n            </inline-number>\r\n        </ago-form-item>\r\n    </div>\r\n\r\n    <div class="row">\r\n        <ago-form-item label="i18n.common.tasks.fields.predecessorsByStart"\r\n                       field="PredecessorsByStart" vld="validation">\r\n            <inline-lookup model="model.PredecessorsByStart"\r\n                           on-update="onUpdateProp(model, \'PredecessorsByStart\', val)"\r\n                           on-cancel="onCancelProp()"\r\n                           input-lookup="$lookup$"\r\n                           input-col="col-xs-12" multiple>\r\n                <button class="btn btn-sm" ng-click="edit()">\r\n                    <i class="icon-pencil"></i>\r\n                </button>\r\n                <ul class="lookup-items">\r\n                    <li  ng-repeat="p in model.PredecessorsByStart">\r\n                        <a class="badge" ui-sref="$sref$({num: p.SeqNumber})"\r\n                           ng-click="$event.stopPropagation();">\r\n                            {{p.text}}\r\n                        </a>\r\n                    </li>\r\n                </ul>\r\n            </inline-lookup>\r\n        </ago-form-item>\r\n        <ago-form-item label="i18n.common.tasks.fields.predecessorsByEnd"\r\n                       field="PredecessorsByEnd" vld="validation">\r\n            <inline-lookup model="model.PredecessorsByEnd"\r\n                           on-update="onUpdateProp(model, \'PredecessorsByEnd\', val)"\r\n                           on-cancel="onCancelProp()"\r\n                           input-lookup="$lookup$"\r\n                           input-col="col-xs-12" multiple>\r\n                <button class="btn btn-sm" ng-click="edit()">\r\n                    <i class="icon-pencil"></i>\r\n                </button>\r\n                <ul class="lookup-items">\r\n                    <li  ng-repeat="p in model.PredecessorsByEnd">\r\n                        <a class="badge" ui-sref="$sref$({num: p.SeqNumber})"\r\n                           ng-click="$event.stopPropagation();">\r\n                            {{p.text}}\r\n                        </a>\r\n                    </li>\r\n                </ul>\r\n            </inline-lookup>\r\n        </ago-form-item>\r\n    </div>\r\n\r\n</div>\r\n'}),define("core/common/tasks/props/timelinePart",["../moduleDef","angular","text!./timelinePart.tpl.html"],function(module,angular,tpl){module.directive("commonTasksPropsTimelinePart",function(){return{restrict:"E",replace:!0,template:function(elm,attrs){var url=attrs.taskLookupUrl,sref=attrs.taskPropsState;return attrs.$set("taskLookupUrl",null),attrs.$set("taskPropsState",null),tpl.replace("$lookup$",url).replace("$lookup$",url).replace("$sref$",sref).replace("$sref$",sref)},scope:!1}})}),define("text!core/common/tasks/props/statusPriorityPart.tpl.html",[],function(){return'<div class="row">\r\n    <ago-form-item label="i18n.common.tasks.fields.status" field="Status" vld="validation">\r\n        <inline-lookup model="model.Status" input-col="col-xs-12" required\r\n                       on-update="onUpdateProp(model, \'Status\', val)"\r\n                       on-cancel="onCancelProp()"\r\n                       input-lookup="$slookup$"></inline-lookup>\r\n    </ago-form-item>\r\n    <ago-form-item label="i18n.common.tasks.fields.priority" field="Priority" vld="validation">\r\n        <inline-lookup model="model.Priority" input-col="col-xs-12" required\r\n                       on-update="onUpdateProp(model, \'Priority\', val)"\r\n                       on-cancel="onCancelProp()"\r\n                       input-lookup="$plookup$"></inline-lookup>\r\n    </ago-form-item>\r\n</div>\r\n'}),define("core/common/tasks/props/statusPriorityPart",["../moduleDef","angular","text!./statusPriorityPart.tpl.html"],function(module,angular,tpl){module.directive("commonTasksPropsStatusPriorityPart",function(){return{restrict:"E",replace:!0,template:function(elm,attrs){var surl=attrs.statusLookupUrl,purl=attrs.priorityLookupUrl;return attrs.$set("statusLookupUrl",null),attrs.$set("priorityLookupUrl",null),tpl.replace("$slookup$",surl).replace("$plookup$",purl)},scope:!1}})}),define("text!core/common/tasks/props/primarySecurityPart.tpl.html",[],function(){return'<div>\r\n    <div class="row">\r\n        <ago-form-item label="i18n.common.tasks.fields.primary" field="Primary" vld="validation">\r\n            <inline-lookup model="model.Primary" input-col="col-xs-12"\r\n                           custom-view="true"\r\n                           on-update="onUpdateProp(model, \'Primary\', val)"\r\n                           on-cancel="onCancelProp()"\r\n                           input-lookup="$tlookup$"\r\n                           input-lookup-options="allowClear: true"\r\n                           placeholder="{{ i18n.common.tasks.fields.primary }}">\r\n                <button class="btn btn-sm" ng-click="edit()">\r\n                    <i class="icon-pencil"></i>\r\n                </button>\r\n                <a ng-if="model.Primary" class="badge"\r\n                   ui-sref="$sref$({num: model.Primary.SeqNumber})"\r\n                   ng-click="$event.stopPropagation();">\r\n                    {{model.Primary.text}}\r\n                </a>\r\n            </inline-lookup>\r\n        </ago-form-item>\r\n        <ago-form-item label="i18n.common.tasks.fields.executorsCanCreateSubtask" field="SubtaskCreators" vld="validation">\r\n            <inline-lookup model="model.SubtaskCreators" input-col="col-xs-12" multiple\r\n                           on-update="onUpdateProp(model, \'SubtaskCreators\', val)"\r\n                           on-cancel="onCancelProp()"\r\n                           input-lookup="$elookup$"\r\n                           request-params="{taskId: model.Id}">\r\n                <ago-lookup-items items="model.SubtaskCreators"></ago-lookup-items>\r\n            </inline-lookup>\r\n        </ago-form-item>\r\n    </div>\r\n\r\n    <div class="row">\r\n        <ago-form-item label="i18n.common.tasks.fields.executorCanCloseTask"\r\n                       field="ExecutorCanCloseTask" vld="validation">\r\n            <inline-checkbox model="model.ExecutorCanCloseTask" required\r\n                             true-exp="i18n.common.tasks.canClose.allowed"\r\n                             false-exp="i18n.common.tasks.canClose.restricted"\r\n                             on-update="onUpdateProp(model, \'ExecutorCanCloseTask\', val)"\r\n                             on-cancel="onCancelProp()">\r\n            </inline-checkbox>\r\n        </ago-form-item>\r\n        <ago-form-static-item label="i18n.common.tasks.fields.executorCanAssignTask">\r\n            {{ model.ExecutorCanAssignTask | yesNo:{yes:\'common.tasks.canClose.allowed\',no:\'common.tasks.canClose.restricted\'} }}\r\n        </ago-form-static-item>\r\n    </div>\r\n</div>\r\n'}),define("core/common/tasks/props/primarySecurityPart",["../moduleDef","angular","text!./primarySecurityPart.tpl.html"],function(module,angular,tpl){module.directive("commonTasksPropsPrimarySecurityPart",function(){return{restrict:"E",replace:!0,template:function(elm,attrs){var turl=attrs.taskLookupUrl,eurl=attrs.executorLookupUrl,sref=attrs.taskPropsState;return attrs.$set("taskLookupUrl",null),attrs.$set("executorLookupUrl",null),attrs.$set("taskPropsState",null),tpl.replace("$tlookup$",turl).replace("$elookup$",eurl).replace("$sref$",sref)},scope:!1}})}),define("text!core/common/tasks/props/assignAllBtn.tpl.html",[],function(){return'<button class="btn" ng-click="assignAll()" ng-if="model.Status.id !== taskStatuses.Closed">\r\n    <i class="icon-sort-by-attributes"></i>\r\n    <span class="inline-block hidden-xs" bindonce="i18n.common.tasks"\r\n          bo-text="i18n.common.tasks.view.general.assignAll">\r\n        \r\n    </span>\r\n</button>\r\n'}),define("core/common/tasks/props/assignAllBtn",["../moduleDef","angular","text!./assignAllBtn.tpl.html"],function(module,angular,tpl){module.directive("commonTasksAssignAllBtn",function(){return{restrict:"E",replace:!0,template:tpl,scope:!1}})}),define("text!core/common/tasks/props/statusActions.tpl.html",[],function(){return'<div class="btn-group">\r\n    <ago-status-btn class="dropdown-toggle" status="model.Status"\r\n                    cut-sm="10" cut-xs="0" view-settings="taskStatusViewSettings" data-toggle="dropdown">\r\n    </ago-status-btn>\r\n    <ul class="dropdown-menu" role="menu">\r\n        <li ng-repeat="s in model.StatusHistory.Next">\r\n            <a href="" ng-click="changeStatus(s)">\r\n                <i ng-class="taskStatusViewSettings[s.id].icon"></i>\r\n                {{ s.text }}\r\n            </a>\r\n        </li>\r\n        <li class="divider" ng-if="model.StatusHistory.Next.length > 1 && model.StatusHistory.History.length > 1"></li>\r\n        <li ng-if="model.StatusHistory.History.length > 1">\r\n            <a ng-click="rollbackStatus()">\r\n                <i class="icon-reply"></i>\r\n                <span bindonce="i18n.core" bo-text="i18n.core.buttons.rollback"></span>\r\n            </a>\r\n        </li>\r\n    </ul>\r\n</div>\r\n'}),define("core/common/tasks/props/statusActions",["../moduleDef","angular","text!./statusActions.tpl.html"],function(module,angular,tpl){module.directive("commonTasksStatusActions",function(){return{restrict:"E",replace:!0,template:tpl,scope:!1}})}),define("core/common/tasks/props/taskProps",["../moduleDef","angular","./authorPart","./numTypePart","./participantsPart","./contentPart","./timelinePart","./statusPriorityPart","./primarySecurityPart","./assignAllBtn","./statusActions"],function(module,angular){var ctrl=function($scope,$stateParams,taskTabs,$controller,stateCacheService,taskStatuses,taskStatusViewSettings,apinetService,apiPrefix,listRouteName,saveStateFn){var stateCacheKey=function(){return apiPrefix+"/getTask_"+$stateParams.num};$scope.saveState=function(){var state={model:angular.copy($scope.model),customPropsCollapsed:$scope.customPropsCollapsed,agreementsCollapsed:$scope.agreementsCollapsed,inputCollapsed:$scope.inputCollapsed,outputCollapsed:$scope.outputCollapsed,subtasksCollapsed:$scope.subtasksCollapsed,statusHistoryCollapsed:$scope.statusHistoryCollapsed};angular.isFunction(saveStateFn)&&(state=saveStateFn(state)),stateCacheService.cacheState(stateCacheKey(),state)},angular.extend(this,$controller("ErrorHandlingCtrl",{$scope:$scope})),angular.extend(this,$controller("TabbedViewCtrl",{$scope:$scope,num:$stateParams.num,tabs:taskTabs})),angular.extend(this,$controller("InlineEditCtrl",{$scope:$scope,project:$stateParams.project,method:apiPrefix+"/updateTask",afterUpdate:$scope.saveState})),angular.extend(this,$controller("BaseCardCtrl",{$scope:$scope,project:$stateParams.project,params:function(){return{method:apiPrefix+"/getTask",project:$stateParams.project,num:$stateParams.num}},afterLoad:$scope.saveState,deleteParams:function(){return{method:apiPrefix+"/deleteTask",project:$stateParams.project,id:$scope.model.Id}},afterDeleteRoute:listRouteName})),$scope.changeStatus=function(newStatus){$scope.onUpdateProp($scope.model,"Status",newStatus)},$scope.rollbackStatus=function(){apinetService.action({method:apiPrefix+"/rollbackStatus",project:$stateParams.project,taskId:$scope.model.Id}).then(function(response){$scope.resetValidation(),angular.extend($scope.validation,response.validation),angular.extend($scope.model,response.model),$scope.saveState()},$scope.handleException)},$scope.onTagError=function(error){$scope.resetValidation(),angular.extend($scope.validation,{fieldsError:{Tags:[error]}})},$scope.assignAll=function(){$scope.loading=!0,apinetService.action({method:apiPrefix+"/assignAllTasks",project:$stateParams.project,taskId:$scope.model.Id}).then(function(response){$scope.resetValidation(),angular.extend($scope.validation,response.validation),angular.extend($scope.model,response.model),$scope.saveState()},$scope.handleException)["finally"](function(){$scope.loading=!1})},$scope.taskStatusViewSettings=taskStatusViewSettings,$scope.taskStatuses=taskStatuses,$scope.customPropsCollapsed=!1,$scope.agreementsCollapsed=!1,$scope.inputCollapsed=!1,$scope.outputCollapsed=!1,$scope.statusHistoryCollapsed=!1,$scope.$watch("customPropsCollapsed",$scope.saveState),$scope.$watch("agreementsCollapsed",$scope.saveState),$scope.$watch("inputCollapsed",$scope.saveState),$scope.$watch("outputCollapsed",$scope.saveState),$scope.$watch("statusHistoryCollapsed",$scope.saveState),stateCacheService.restoreState(stateCacheKey(),$scope),$scope.load(),$scope.resetValidation()};module.controller("commonTasksTaskProps",["$scope","$stateParams","tabs","$controller","stateCacheService","taskStatuses","taskStatusViewSettings","apinetService","apiPrefix","listRouteName","saveStateFn",ctrl])}),define("text!core/common/tasks/create/createBtn.tpl.html",[],function(){return'<div class="btn-group" bindonce="i18n.common.tasks.list.buttons">\r\n    <a href="" ng-click="go()" class="btn btn-primary">\r\n        <i class="icon-plus icon-white"></i>\r\n        <span class="inline-block hidden-xs" bo-text="i18n.common.tasks.list.buttons.add"></span>\r\n    </a>\r\n    <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" ng-if="current">\r\n        <span class="caret"></span>\r\n    </button>\r\n    <ul class="dropdown-menu" role="menu" ng-if="current">\r\n        <li>\r\n            <a href="" ng-click="go(modes.subtask)" bo-text="i18n.common.tasks.list.buttons.addSubtask"></a>\r\n        </li>\r\n        <li>\r\n            <a href="" ng-click="go(modes.next)" bo-text="i18n.common.tasks.list.buttons.addNextSubtask"></a>\r\n        </li>\r\n    </ul>\r\n</div>\r\n'}),define("core/common/tasks/create/createBtn",["../moduleDef","angular","jquery","text!./createBtn.tpl.html"],function(module,angular,$,tpl){var createModes={subtask:"subtask",next:"next"};module.directive("commonTasksCreateTaskBtn",[function(){return{restrict:"E",replace:!0,template:tpl,scope:{sref:"@",primary:"=",current:"=",link:"&"},controller:["$scope","$rootScope","$state",function($scope,$rootScope,$state){$scope.i18n=$rootScope.i18n,$scope.modes=createModes,$scope.go=function(mode){var stateParams={};switch(mode){case createModes.subtask:stateParams=angular.extend(stateParams,{primary:$scope.current.num,startWith:$scope.current.num});break;case createModes.next:stateParams=angular.extend(stateParams,{primary:$scope.current.primaryNum,startAfter:$scope.current.num});break;default:$scope.primary&&(stateParams=angular.extend(stateParams,{primary:$scope.primary}))}$scope.link({params:stateParams}),$state.go($scope.sref,stateParams)}}]}}])}),define("core/common/tasks/list/taskList",["../moduleDef","angular"],function(module,angular){var ctrl=function($scope,$stateParams,$controller,$timeout,apinetService,taskListViewMode,taskViewModes,taskViewModeSettings,$filter,apiPrefix,reportTypes){$scope.viewModes=taskViewModes,$scope.viewModeSettings=taskViewModeSettings,$scope.editables={selectedTask:null},$scope.$watch("filter.simple.roleFilter",function(value){$scope.requestParams.roleFilter=value||"any"},!0),$scope.$watch("filter.simple.stateFilter",function(value){$scope.requestParams.stateFilter=value||"any"},!0),$scope.fillReportParameters=function(settings,p){p.parameters.roleFilter=$scope.requestParams.roleFilter||"any",p.parameters.stateFilter=$scope.requestParams.stateFilter||"any"},angular.extend(this,$controller("BaseCardsListCtrl",{$scope:$scope,project:$stateParams.project,detailsUrl:apiPrefix+"/getTaskDetails"})),angular.extend(this,$controller("ReportableListCtrl",{$scope:$scope,project:$stateParams.project,reportTypes:reportTypes})),angular.extend(this,$controller("PrefilteredListCtrl",{$scope:$scope,defaultFilter:function(){return $scope.requestParams.roleFilter="any",$scope.requestParams.stateFilter="any",{simple:{roleFilter:"any",stateFilter:"any",lDate:{path:"DueDate",op:">=",value:null},rDate:{path:"DueDate",op:"<=",value:null}}}}})),$scope.changeStatus=function(model,status){apinetService.action({method:apiPrefix+"/updateTask",project:$stateParams.project,data:{Id:model.Id,ModelVersion:model.ModelVersion,Prop:"Status",Value:status.id}}).then(function(response){response.validation.success?(model.Status=response.model.Status,model.NextStatuses=response.model.StatusHistory.Next,model.LastChangeTime=response.model.LastChangeTime,model.IsOverdue=response.model.IsOverdue,$scope.resetValidation()):($scope.validation=response.validation,response.validation.generalErrors.length<=0&&($scope.validation.generalErrors=response.validation.fieldErrors.Status))},$scope.handleException)},$timeout(function(){$scope.viewMode=taskListViewMode.mode}),$scope.$watch("viewMode",function(val){if(val&&taskListViewMode.mode!==val){if(taskListViewMode.mode=val,val!=taskViewModes.list&&($scope.models=$filter("unique")($scope.models,"Id",function(prev,next){return angular.isDefined(prev.level)?angular.isDefined(next.level)?prev.level>next.level?next:prev:next:prev})),val===taskViewModes.list){var hasSubs=function(m){var has=!1;return angular.forEach($scope.models,function(v){has=has||v.PrimaryId===m.Id&&angular.isDefined(v.level)&&v.level>0}),has};angular.forEach($scope.models,function(v){angular.isDefined(v.expanded)&&(v.expanded=v.Subtasks.length>0&&hasSubs(v))})}val!==taskViewModes.gantt&&$scope.selectTask(null)}}),$scope.selectTask=function(task){$timeout(function(){$scope.editables.selectedTask=task?{num:task.SeqNumber,primaryNum:task.PrimaryTask?task.PrimaryTask.SeqNumber:null}:null})}};module.controller("commonTasksTaskListCtrl",["$scope","$stateParams","$controller","$timeout","apinetService","tasksListViewMode","taskViewModes","taskViewModeSettings","$filter","apiPrefix","reportTypes",ctrl])}),define("text!core/common/tasks/list/taskGoMenu.tpl.html",[],function(){return'<div class="btn-group">\r\n    <a ui-sref="$view$({ num: num })" class="btn btn-sm"\r\n       ng-class="{\'btn-danger\': overdue}">\r\n        <strong>{{num}}</strong>\r\n    </a>\r\n    <button type="button" class="btn btn-sm dropdown-toggle" data-toggle="dropdown">\r\n        <span class="caret"></span>\r\n    </button>\r\n    <ul class="dropdown-menu" role="menu" bindonce="i18n.common.tasks.list.buttons">\r\n        <li>\r\n            <a href="" bo-text="i18n.common.tasks.list.buttons.addSubtask" ng-click="go(modes.subtask)"></a>\r\n        </li>\r\n        <li>\r\n            <a href="" bo-text="i18n.common.tasks.list.buttons.addNextSubtask" ng-click="go(modes.next)"></a>\r\n        </li>\r\n    </ul>\r\n</div>\r\n'}),define("core/common/tasks/list/taskGoMenu",["../moduleDef","angular","text!./taskGoMenu.tpl.html"],function(module,angular,tpl){var createModes={subtask:"subtask",next:"next"};
module.directive("commonTasksTaskGoMenu",[function(){return{restrict:"E",replace:!0,template:function(elm,attrs){return tpl.replace("$view$",attrs.viewState)},scope:{sref:"@",num:"=",overdue:"=",primary:"=",link:"&"},controller:["$scope","$rootScope","$state",function($scope,$rootScope,$state){$scope.i18n=$rootScope.i18n,$scope.modes=createModes,$scope.go=function(mode){var stateParams={};switch(mode){case createModes.subtask:stateParams=angular.extend(stateParams,{primary:$scope.num,startWith:$scope.num});break;case createModes.next:stateParams=angular.extend(stateParams,{primary:$scope.primary,startAfter:$scope.num});break;default:throw new Error("Unknown mode: "+mode)}$scope.link({params:stateParams}),$state.go($scope.sref,stateParams)}}],transclude:!0,link:function($scope,elm,attr,ctrl,transclude){transclude($scope.$parent,function(clone){$("ul",elm).append(clone)})}}}])}),define("text!core/common/tasks/list/taskOneline.tpl.html",[],function(){return'<div class="col-xs-12 ago-oneline">\r\n    <!--bindonce required by expiration directive, when loaded from cache. has no idea why bindonce not found-->\r\n    <!--in directive itself in cache load case-->\r\n    <div class="ago-oneline-task" ng-repeat="m in models" ng-style="{\'margin-left\': (m.level * 15) + px}" bindonce\r\n         common-tasks-task-oneline-sizes="m.level * 15">\r\n        <common-tasks-task-go-menu view-state="$view$" sref="$create$"\r\n                num="m.SeqNumber" primary="m.PrimaryTask.SeqNumber" overdue="m.IsOverdue"\r\n                class="ago-oneline-actions clearfix">\r\n            <li class="divider" ng-if="m.NextStatuses"></li>\r\n            <li ng-repeat="n in m.NextStatuses" ng-if="m.NextStatuses">\r\n                <a href="" ng-click="change(m, n)">\r\n                    <i class="{{ viewSettings[n.id].icon }}"></i>\r\n                    <span>{{ n.text }}</span>\r\n                </a>\r\n            </li>\r\n        </common-tasks-task-go-menu>\r\n\r\n        <div class="data">\r\n            <button class="btn btn-sm btn-default ago-oneline-toggle" type="button" ng-click="toggle(m)" ng-show="m.Subtasks.length > 0">\r\n                <i ng-class="{\'icon-plus\': !m.expanded, \'icon-minus\': m.expanded}"></i>\r\n            </button>\r\n            <div class="ago-oneline-content">\r\n                <span>{{m.Content}}</span>\r\n            </div>\r\n            <div class="ago-counters-wrapper">\r\n                <div class="ago-counters">\r\n                    <i class="{{ viewSettings[m.Status.id].icon }}" ng-style="{color: viewSettings[m.Status.id].color }"></i>\r\n\r\n                    <a class="ago-counter" ui-sref="$view$({num: m.SeqNumber})">\r\n                        &percnt;\r\n                        <span class="label ch3" ng-class="{\'label-primary\': m.PercentCompleted > 0 && m.PercentCompleted < 100,\r\n                                \'label-default\': !m.PercentCompleted || m.PercentCompleted === 100 }">\r\n                            {{m.PercentCompleted}}\r\n                        </span>\r\n                    </a>\r\n\r\n                    <a class="ago-counter" ui-sref="$comments$({num: m.SeqNumber})" style="margin-left: 5px">\r\n                        <i class="icon-comment-alt"></i>\r\n                        <span class="label" ng-class="{\'label-primary\': m.CommentsCount > 0, \'label-default\': !m.CommentsCount}">\r\n                            {{m.CommentsCount | numCut}}\r\n                        </span>\r\n                    </a>\r\n\r\n                    <a class="ago-counter" ui-sref="$files$({num: m.SeqNumber})" style="margin-left: 5px">\r\n                        <i class="icon-paper-clip"></i>\r\n                        <span class="label" ng-class="{\'label-primary\': m.FilesCount > 0, \'label-default\': !m.FilesCount}">\r\n                            {{m.FilesCount | numCut}}\r\n                        </span>\r\n                    </a>\r\n\r\n                    <a class="ago-counter" ui-sref="$view$({num: m.SeqNumber})" style="margin-left: 5px">\r\n                        <i class="icon-time"></i>\r\n                        <expiration class="ch3" visible="true" expired="m.IsOverdue" days="m.DaysToOverdue">\r\n                        </expiration>\r\n                    </a>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="clearfix"></div>\r\n    </div>\r\n</div>\r\n'}),define("normalize",["require","module"],function(){function convertURIBase(uri,fromBase,toBase){if(0===uri.indexOf("data:"))return uri;if(uri=removeDoubleSlashes(uri),uri.match(/^\//)||uri.match(protocolRegEx))return uri;var toBaseProtocol=toBase.match(protocolRegEx),fromBaseProtocol=fromBase.match(protocolRegEx);return!fromBaseProtocol||toBaseProtocol&&toBaseProtocol[1]==fromBaseProtocol[1]&&toBaseProtocol[2]==fromBaseProtocol[2]?relativeURI(absoluteURI(uri,fromBase),toBase):absoluteURI(uri,fromBase)}function absoluteURI(uri,base){"./"==uri.substr(0,2)&&(uri=uri.substr(2));var baseParts=base.split("/"),uriParts=uri.split("/");for(baseParts.pop();curPart=uriParts.shift();)".."==curPart?baseParts.pop():baseParts.push(curPart);return baseParts.join("/")}function relativeURI(uri,base){var baseParts=base.split("/");for(baseParts.pop(),base=baseParts.join("/")+"/",i=0;base.substr(i,1)==uri.substr(i,1);)i++;for(;"/"!=base.substr(i,1);)i--;base=base.substr(i+1),uri=uri.substr(i+1),baseParts=base.split("/");var uriParts=uri.split("/");for(out="";baseParts.shift();)out+="../";for(;curPart=uriParts.shift();)out+=curPart+"/";return out.substr(0,out.length-1)}var slashes=/([^:])\/+/g,removeDoubleSlashes=function(uri){return uri.replace(slashes,"$1/")},protocolRegEx=/[^\:\/]*:\/\/([^\/])*/,normalizeCSS=function(source,fromBase,toBase,cssBase){fromBase=removeDoubleSlashes(fromBase),toBase=removeDoubleSlashes(toBase);for(var result,url,source,urlRegEx=/@import\s*("([^"]*)"|'([^']*)')|url\s*\(\s*(\s*"([^"]*)"|'([^']*)'|[^\)]*\s*)\s*\)/gi;result=urlRegEx.exec(source);){url=result[3]||result[2]||result[5]||result[6]||result[4];var newUrl;newUrl=cssBase&&"/"==url.substr(0,1)?cssBase+url:convertURIBase(url,fromBase,toBase);var quoteLen=result[5]||result[6]?1:0;source=source.substr(0,urlRegEx.lastIndex-url.length-quoteLen-1)+newUrl+source.substr(urlRegEx.lastIndex-quoteLen-1),urlRegEx.lastIndex=urlRegEx.lastIndex+(newUrl.length-url.length)}return source};return normalizeCSS.convertURIBase=convertURIBase,normalizeCSS}),define("css",["./normalize"],function(normalize){function indexOf(a,e){for(var i=0,l=a.length;l>i;i++)if(a[i]===e)return i;return-1}if("undefined"==typeof window)return{load:function(n,r,load){load()}};var testing=!1,head=document.getElementsByTagName("head")[0],engine=window.navigator.userAgent.match(/Trident\/([^ ;]*)|AppleWebKit\/([^ ;]*)|Opera\/([^ ;]*)|rv\:([^ ;]*)(.*?)Gecko\/([^ ;]*)|MSIE\s([^ ;]*)/),hackLinks=!1;engine&&(engine[1]||engine[7]?(hackLinks=parseInt(engine[1])<6||parseInt(engine[7])<=9,engine="trident"):engine[2]?(hackLinks=!0,engine="webkit"):engine[3]||(engine[4]?(hackLinks=parseInt(engine[4])<18,engine="gecko"):testing&&alert("Engine detection failed")));var cssAPI={},absUrlRegEx=/^\/|([^\:\/]*:)/;cssAPI.pluginBuilder="./css-builder";var curBuffer=[],onBufferLoad={},bufferResources=[];cssAPI.addBuffer=function(resourceId){-1==indexOf(curBuffer,resourceId)&&-1==indexOf(bufferResources,resourceId)&&(curBuffer.push(resourceId),bufferResources.push(resourceId))},cssAPI.setBuffer=function(css,isLess){var pathname=window.location.pathname.split("/");pathname.pop(),pathname=pathname.join("/")+"/";var baseParts=require.toUrl("base_url").split("/");baseParts.pop();var baseUrl=baseParts.join("/")+"/";baseUrl=normalize.convertURIBase(baseUrl,pathname,"/"),baseUrl.match(absUrlRegEx)||(baseUrl="/"+baseUrl),"/"!=baseUrl.substr(baseUrl.length-1,1)&&(baseUrl+="/"),cssAPI.inject(normalize(css,baseUrl,pathname));for(var i=0;i<curBuffer.length;i++)(isLess&&".less"==curBuffer[i].substr(curBuffer[i].length-5,5)||!isLess&&".css"==curBuffer[i].substr(curBuffer[i].length-4,4))&&(!function(resourceId){onBufferLoad[resourceId]=onBufferLoad[resourceId]||!0,setTimeout(function(){"function"==typeof onBufferLoad[resourceId]&&onBufferLoad[resourceId](),delete onBufferLoad[resourceId]},7)}(curBuffer[i]),curBuffer.splice(i--,1))},cssAPI.attachBuffer=function(resourceId,load){for(var i=0;i<curBuffer.length;i++)if(curBuffer[i]==resourceId)return onBufferLoad[resourceId]=load,!0;return onBufferLoad[resourceId]===!0?(onBufferLoad[resourceId]=load,!0):-1!=indexOf(bufferResources,resourceId)?(load(),!0):void 0};var webkitLoadCheck=function(link,callback){setTimeout(function(){for(var i=0;i<document.styleSheets.length;i++){var sheet=document.styleSheets[i];if(sheet.href==link.href)return callback()}webkitLoadCheck(link,callback)},10)},mozillaLoadCheck=function(style,callback){setTimeout(function(){try{return style.sheet.cssRules,callback()}catch(e){}mozillaLoadCheck(style,callback)},10)};if("trident"==engine&&hackLinks)var ieStyles=[],ieQueue=[],ieStyleCnt=0,ieLoad=function(url,callback){var style;ieQueue.push({url:url,cb:callback}),style=ieStyles.shift(),!style&&ieStyleCnt++<31&&(style=document.createElement("style"),head.appendChild(style)),style&&ieLoadNextImport(style)},ieLoadNextImport=function(style){var curImport=ieQueue.shift();if(!curImport)return style.onload=noop,void ieStyles.push(style);style.onload=function(){curImport.cb(curImport.ss),ieLoadNextImport(style)};var curSheet=style.styleSheet;curImport.ss=curSheet.imports[curSheet.addImport(curImport.url)]};var createLink=function(url){var link=document.createElement("link");return link.type="text/css",link.rel="stylesheet",link.href=url,link},noop=function(){};cssAPI.linkLoad=function(url,callback){var timeout=setTimeout(function(){testing&&alert("timeout"),callback()},1e3*waitSeconds-100),_callback=function(){clearTimeout(timeout),link&&(link.onload=noop),setTimeout(callback,7)};if(hackLinks)if("webkit"==engine){var link=createLink(url);webkitLoadCheck(link,_callback),head.appendChild(link)}else if("gecko"==engine){var style=document.createElement("style");style.textContent='@import "'+url+'"',mozillaLoadCheck(style,_callback),head.appendChild(style)}else"trident"==engine&&ieLoad(url,_callback);else{var link=createLink(url);link.onload=_callback,head.appendChild(link)}};var curStyle,progIds=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],fileCache={},get=function(url,callback,errback){if(fileCache[url])return void callback(fileCache[url]);var xhr,i,progId;if("undefined"!=typeof XMLHttpRequest)xhr=new XMLHttpRequest;else if("undefined"!=typeof ActiveXObject)for(i=0;3>i;i+=1){progId=progIds[i];try{xhr=new ActiveXObject(progId)}catch(e){}if(xhr){progIds=[progId];break}}xhr.open("GET",url,requirejs.inlineRequire?!1:!0),xhr.onreadystatechange=function(){var status,err;4===xhr.readyState&&(status=xhr.status,status>399&&600>status?(err=new Error(url+" HTTP status: "+status),err.xhr=xhr,errback(err)):(fileCache[url]=xhr.responseText,callback(xhr.responseText)))},xhr.send(null)},styleCnt=0;cssAPI.inject=function(css){31>styleCnt&&(curStyle=document.createElement("style"),curStyle.type="text/css",head.appendChild(curStyle),styleCnt++),curStyle.styleSheet?curStyle.styleSheet.cssText+=css:curStyle.appendChild(document.createTextNode(css))};var importRegEx=/@import\s*(url)?\s*(('([^']*)'|"([^"]*)")|\(('([^']*)'|"([^"]*)"|([^\)]*))\))\s*;?/g,pathname=window.location.pathname.split("/");pathname.pop(),pathname=pathname.join("/")+"/";var loadCSS=function(fileUrl,callback,errback){fileUrl.match(absUrlRegEx)||(fileUrl="/"+normalize.convertURIBase(fileUrl,pathname,"/")),get(fileUrl,function(css){css=normalize(css,fileUrl,pathname);for(var match,importUrls=[],importIndex=[],importLength=[];match=importRegEx.exec(css);){var importUrl=match[4]||match[5]||match[7]||match[8]||match[9];importUrls.push(importUrl),importIndex.push(importRegEx.lastIndex-match[0].length),importLength.push(match[0].length)}for(var completeCnt=0,i=0;i<importUrls.length;i++)(function(i){loadCSS(importUrls[i],function(importCSS){css=css.substr(0,importIndex[i])+importCSS+css.substr(importIndex[i]+importLength[i]);for(var lenDiff=importCSS.length-importLength[i],j=i+1;j<importUrls.length;j++)importIndex[j]+=lenDiff;completeCnt++,completeCnt==importUrls.length&&callback(css)},errback)})(i);0==importUrls.length&&callback(css)},errback)};cssAPI.normalize=function(name,normalize){return".css"==name.substr(name.length-4,4)&&(name=name.substr(0,name.length-4)),normalize(name)};var waitSeconds,alerted=!1;return cssAPI.load=function(cssId,req,load,config,parse){waitSeconds=waitSeconds||config.waitSeconds||7;var resourceId=cssId+(parse?".less":".css");if(!cssAPI.attachBuffer(resourceId,load)){var fileUrl=req.toUrl(resourceId);!alerted&&testing&&(alert(hackLinks?"hacking links":"not hacking"),alerted=!0),parse?loadCSS(fileUrl,function(css){parse&&(css=parse(css,function(css){cssAPI.inject(css),setTimeout(load,7)}))}):cssAPI.linkLoad(fileUrl,load)}},testing&&(cssAPI.inspect=function(){return stylesheet.styleSheet?stylesheet.styleSheet.cssText:stylesheet.innerHTML?stylesheet.innerHTML:void 0}),cssAPI}),requirejs.s.contexts._.nextTick=function(f){f()},require(["css"],function(css){css.addBuffer("core/common/tasks/list/taskOneline.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,define("core/common/tasks/list/taskOneline",["../moduleDef","angular","jquery","text!./taskOneline.tpl.html","css!./taskOneline.css"],function(module,angular,$,tpl){var ctrl=function($scope,$rootScope,$stateParams,apinetService,viewSettings,$controller){angular.extend(this,$controller("ErrorHandlingCtrl",{$scope:$scope})),$scope.i18n=$rootScope.i18n,$scope.moment=$rootScope.moment,$scope.viewSettings=viewSettings,$scope.toggle=function(m){if(m.expanded){var subs=[];angular.forEach($scope.models,function(v){v.PrimaryId===m.Id&&subs.push(v)});for(var s in subs){var sm=subs[s];if(angular.isDefined(sm.level)&&!(sm.level<=0)){var index=$scope.models.indexOf(sm);$scope.models.splice(index,1)}}m.expanded=!1}else angular.isDefined(m.level)||(m.level=0),apinetService.action({method:$scope.apiPrefix+"/getTaskSubtasks",project:$stateParams.project,taskId:m.Id,sorters:$scope.sorters}).then(function(subs){var index=$scope.models.indexOf(m);for(var s in subs){var sm=subs[s];sm.level=m.level+1,$scope.models.splice(index+1,0,sm),index++}m.expanded=!0},$scope.handleException)},$scope.change=function(task,newStatus){$scope.changeStatus({model:task,status:newStatus})}};module.directive("commonTasksTaskOneline",[function(){return{restrict:"E",replace:!0,template:function(elm,attr){return tpl.replace("$view$",attr.viewState).replace("$view$",attr.viewState).replace("$view$",attr.viewState).replace("$create$",attr.createState).replace("$comments$",attr.commentsState).replace("$files$",attr.filesState)},controller:["$scope","$rootScope","$stateParams","apinetService","taskStatusViewSettings","$controller",ctrl],scope:{models:"=",sorters:"=",apiPrefix:"@",changeStatus:"&"}}}]),module.directive("commonTasksTaskOnelineSizes",["$window","$rootScope",function($window,$rootScope){return{restrict:"A",link:function($scope,elm,attr){var $elm=$(elm),$container=$elm.parent(),$actions=$(".ago-oneline-actions",$elm),$data=$(".data",$elm),$plus=$(".ago-oneline-toggle",$elm),$content=$(".ago-oneline-content",$elm),$counters=$(".ago-counters-wrapper",$elm),resize=function(){var level=attr.commonTasksTaskOnelineSizes?$scope.$eval(attr.commonTasksTaskOnelineSizes):0;isNaN(level)&&(level=0),$data.width($container.width()-$actions.outerWidth()-level);var contentWidth=$data.width()-5;"none"!==$counters.css("float")&&(contentWidth-=$counters.outerWidth()+3),$plus.is(":visible")&&(contentWidth-=$plus.outerWidth()+3),$content.width(contentWidth)},unwatch=$scope.$watch(function(){return $container.width()},resize);attr.$observe("commonTasksTaskOnelineSizes",resize);var offOpen=$rootScope.$on("sidebar:opened",resize),offClose=$rootScope.$on("sidebar:closed",resize);$($window).on("resize",resize),$scope.$on("$destroy",function(){unwatch(),delete attr.$$observers.commonTasksTaskOnelineSizes,offOpen(),offClose(),$($window).off("resize",resize)})}}}])}),define("text!core/common/tasks/list/taskGantt.tpl.html",[],function(){return'<div>\r\n    <ago-error-msg></ago-error-msg>\r\n    <ago-gantt-view class="col-xs-12" data="models" convertor="convertToGanttModels(data)"\r\n                    update="moveTask(task)" percent="percentTask(task)"\r\n                    link="linkTasks(link)" unlink="unlinkTasks(link)"\r\n                    select="selectTask(id)">\r\n        <div ago-gantt-column module="$module$" label="i18n.core.fields.name">\r\n            <a class="btn btn-default" href="$url$">\r\n                {{task.SeqNumber}}\r\n            </a>\r\n            <span style="margin-left: 5px">{{task.Content}}</span>\r\n        </div>\r\n        <div ago-gantt-template="task_text">\r\n            <span class="pull-left">{{task.TaskType}}&nbsp;|&nbsp;{{task.Status.text}}</span>\r\n        </div>\r\n        <div ago-gantt-template="tooltip_text">\r\n            <div class="gantt_tooltip_content"><strong>{{task.SeqNumber}}</strong>&nbsp;{{task.Content}}</div>\r\n            <div>Type: {{task.TaskType}}</div>\r\n            <div>Status: {{task.Status.text}}</div>\r\n            <div>Start: {{task.start_date | date:\'ago_datetime\'}}</div>\r\n            <div>Finish: {{task.end_date | date:\'ago_datetime\'}}</div>\r\n            <div>{{task.Executors | joinBy:\', \':\'text\'}}</div>\r\n        </div>\r\n    </ago-gantt-view>\r\n</div>\r\n'}),define("core/common/tasks/list/taskGantt",["../moduleDef","angular","text!./taskGantt.tpl.html"],function(module,angular,tpl){var ctrl=function($scope,$rootScope,apinetService,$stateParams,statuses,viewSettings,$controller){angular.extend(this,$controller("ErrorHandlingCtrl",{$scope:$scope})),$scope.convertToGanttModels=function(data){for(var result={data:[],links:[]},i=0;i<data.length;i++){var task=data[i],desc=task.Content||"";if((task.DependFromCount>0||task.DependentsCount>0)&&(desc=""+task.DependFromCount+"/"+task.DependentsCount+" "+desc),task.StartDate&&task.DueDate){var gi={id:task.Id,text:task.SeqNumber,start_date:new Date(task.StartDate),end_date:new Date(task.DueDate),parent:task.PrimaryId&&null!=modelFromId(task.PrimaryId)?task.PrimaryId:null,color:viewSettings[task.Status.id].color,readonly:task.Status.id===statuses.Closed,open:!0,progress:task.Status.id===statuses.InProgress?task.PercentCompleted/100:void 0,ProjectCode:task.ProjectCode,SeqNumber:task.SeqNumber,Content:desc,TaskType:task.TaskType,Status:task.Status,Executors:task.Executors};result.data.push(gi);for(var j=0;j<task.Dependencies.length;j++){var dep=task.Dependencies[j];result.links.push({id:dep.Id,source:dep.TaskId,target:task.Id,type:"EndToStart"===dep.Type?"0":"StartToStart"===dep.Type?"1":null})}}}return result};var modelFromId=function(id){var model=null;return angular.forEach($scope.models,function(m){m.Id===id&&(model=m)}),model},doGanttAction=function(method,params){params.method=$scope.apiPrefix+"/"+method,params.project=$stateParams.project,apinetService.action(params).then(function(response){if(response.validation.success){$scope.resetValidation();for(var i=0;i<response.model.length;i++){var newModel=response.model[i],oldModel=modelFromId(newModel.Id);if(oldModel){var oldModelIndex=$scope.models.indexOf(oldModel);0>oldModelIndex||($scope.models[oldModelIndex]=newModel)}}}else $scope.validation=response.validation},$scope.handleException)};$scope.moveTask=function(task){doGanttAction("moveTask",task)},$scope.percentTask=function(task){doGanttAction("percentTask",task)},$scope.linkTasks=function(link){doGanttAction("linkTasks",link)},$scope.unlinkTasks=function(link){doGanttAction("unlinkTasks",link)},$scope.selectTask=function(id){$scope.select({task:modelFromId(id)})}};module.directive("commonTasksTaskGantt",[function(){return{restrict:"E",replace:!0,template:function(elm,attr){return tpl.replace("$module$",attr.module).replace("$url$",attr.taskLinkTemplate)},scope:!1,controller:["$scope","$rootScope","apinetService","$stateParams","taskStatuses","taskStatusViewSettings","$controller",ctrl],scope:{models:"=",select:"&",apiPrefix:"@"}}}])}),define("text!core/common/tasks/list/taskCalendar.tpl.html",[],function(){return'<div>\r\n    <div id="calendar" ui-calendar="calendarOptions()" ng-model="eventSources"></div>\r\n</div>\r\n'}),requirejs.s.contexts._.nextTick=function(f){f()},require(["css"],function(css){css.addBuffer("core/common/tasks/list/taskCalendar.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,define("core/common/tasks/list/taskCalendar",["../moduleDef","angular","jquery","text!./taskCalendar.tpl.html","css!./taskCalendar"],function(module,angular,$,tpl){var ctrl=function($scope,$rootScope,$locale,i18n,viewSettings,$controller,$interpolate,stateCacheService,$location){$scope.i18n=$rootScope.i18n,angular.extend(this,$controller("ErrorHandlingCtrl",{$scope:$scope})),$scope.cfg=null,$scope.calendarOptions=function(){if($scope.cfg)return $scope.cfg;var tValues=function(data){var r,k;r=[];for(k in data)r[k]=data[k];return r},dtf=$locale.DATETIME_FORMATS,cfg={height:450,editable:!1,header:{left:"",center:"title",right:"today prev,next"},monthNames:tValues(dtf.MONTH),monthNamesShort:tValues(dtf.SHORTMONTH),dayNames:tValues(dtf.DAY),dayNamesShort:tValues(dtf.SHORTDAY),axisFormat:"H:mm",buttonText:{today:i18n.msg("core.calendar.buttons.today"),month:i18n.msg("core.calendar.buttons.month"),day:i18n.msg("core.calendar.buttons.day"),week:i18n.msg("core.calendar.buttons.week"),agendaWeek:i18n.msg("core.calendar.buttons.agendaWeek"),agendaDay:i18n.msg("core.calendar.buttons.agendaDay")},timeFormat:"",viewRender:function(view){stateCacheService.cacheState($location.url(),{name:view.name,start:view.start,end:view.end}),$rootScope.$emit("agoCalendar:modeChanged",{mode:view.name})}};return stateCacheService.restoreState($location.url(),null,function(_,state){cfg.defaultView=state.name,cfg.year=state.start.getFullYear(),cfg.month=state.start.getMonth(),cfg.date=state.start.getDate()}),$scope.cfg=cfg,$scope.cfg},$scope.eventSources=[[]],$scope.$watchCollection("models",function(){$scope.models&&($scope.eventSources[0].splice(0),angular.forEach($scope.models,function(m){angular.isDefined(m.id)||angular.isDefined(m.StartDate)&&angular.isDefined(m.DueDate)&&(m.id=m.SeqNumber,m.title=m.SeqNumber+" | "+m.TaskType+(m.Content?" | "+m.Content:""),m.start=new Date(m.StartDate),m.end=new Date(m.DueDate),m.url=$interpolate($scope.taskUrlFormat)({project:m.ProjectCode,num:m.SeqNumber}),m.allDay=!1,m.className=viewSettings[m.Status.id].eventClass,$scope.eventSources[0].push(m))}))})};module.directive("commonTasksTaskCalendar",["$rootScope",function($rootScope){return{restrict:"E",replace:!0,template:tpl,controller:["$scope","$rootScope","$locale","i18n","taskStatusViewSettings","$controller","$interpolate","stateCacheService","$location",ctrl],scope:{models:"=",taskUrlFormat:"="},link:function($scope,elm){var off=$rootScope.$on("agoCalendar:changeMode",function(e,arg){"#calendar"===arg.calendar&&$("#calendar",elm).fullCalendar("changeView",arg.mode)});$scope.$on("$destroy",function(){off()})}}}])}),define("text!core/common/tasks/list/cards/taskDetails.tpl.html",[],function(){return'<div ng-show="item.details.expanded">\r\n    <span ng-hide="item.details.loaded" bindonce="i18n.core" bo-text="i18n.core.labels.loading + \'...\'"></span>\r\n    <form class="form-horizontal" ng-show="item.details.loaded" bindonce="item">\r\n        <div class="row">\r\n            <ago-details-item label="i18n.core.customProps.title" large="true" ng-show="item.details.Parameters">\r\n                <ago-custom-props-list items="item.details.Parameters"></ago-custom-props-list>\r\n            </ago-details-item>\r\n\r\n            <ago-details-item label="i18n.common.tasks.fields.priority" ng-show="item.details.Priority">\r\n                <p class="form-control-static" bindonce="item.details.Priority" bo-text="item.details.Priority"></p>\r\n            </ago-details-item>\r\n\r\n            <ago-details-item label="i18n.common.tasks.fields.estimatedTime" ng-show="item.details.EstimatedTime">\r\n                <p class="form-control-static" bindonce="item.details.EstimatedTime"\r\n                   bo-text="item.details.EstimatedTime | agoTimespan"></p>\r\n            </ago-details-item>\r\n\r\n            <ago-details-item label="i18n.tasks.fields.agreements" ng-show="item.details.Agreements">\r\n                <span ng-repeat="a in item.details.Agreements" bindonce>\r\n                    <i bo-class="{\'icon-check\': a.Done, \'icon-check-empty\': !a.Done}"></i>\r\n                    <span bo-text="a.Agreemer"></span>\r\n                </span>&nbsp; &nbsp;\r\n            </ago-details-item>\r\n\r\n            <ago-details-item label="\'common.tasks.fields.topFiles\' | i18n:{ count: 5 }" ng-show="item.details.Files">\r\n                <span bindonce ng-repeat="f in item.details.Files" bindonce>\r\n                    <i class="icon-paper-clip"></i>\r\n                    <ago-file-link  name="f.text" download-url="downloadUrl(f)"></ago-file-link>\r\n                </span>&nbsp;&nbsp;\r\n            </ago-details-item>\r\n        </div>\r\n    </form>\r\n</div>\r\n'}),define("core/common/tasks/list/cards/taskDetails",["../../moduleDef","text!./taskDetails.tpl.html"],function(module,tpl){module.directive("commonTasksTaskDetails",["$timeout","apinetService","$stateParams",function($timeout,apinetService,$stateParams){return{restrict:"E",replace:!0,template:tpl,controller:["$scope","$rootScope",function($scope,$rootScope){$scope.i18n=$rootScope.i18n}],scope:{item:"="},link:function($scope){$scope.downloadUrl=function(file){return apinetService.downloadUrl("file/"+$stateParams.project+"/"+file.id,$stateParams.project)}}}}])}),define("text!core/common/tasks/list/cards/header.tpl.html",[],function(){return'<div>\r\n    <div class="col-xs-12">\r\n        <input type="checkbox" class="selector checkbox" ng-model="model.selected">\r\n        <common-tasks-task-go-menu view-state="$view$" sref="$create$"\r\n                                   num="model.SeqNumber" primary="model.PrimaryTask.SeqNumber"\r\n                                   overdue="model.IsOverdue">\r\n        </common-tasks-task-go-menu>\r\n\r\n        <div class="btn-group pull-right">\r\n            <ago-status-btn class="btn-sm dropdown-toggle" status="model.Status"\r\n                            view-settings="viewSettings" data-toggle="dropdown">\r\n            </ago-status-btn>\r\n            <ul class="dropdown-menu" role="menu">\r\n                <li ng-repeat="n in model.NextStatuses" ng-show="model.NextStatuses">\r\n                    <a href="" ng-click="change(model, n)">\r\n                        {{ n.text }}\r\n                    </a>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n\r\n        <span bo-text="model.TaskType"></span>\r\n        <span bo-if="model.Content">\r\n            <span class="clip-content" bo-text="model.Content"></span>\r\n        </span>\r\n    </div>\r\n\r\n    <div class="clearfix" ng-if="model.Note"></div>\r\n    <div class="col-xs-12" ng-if="model.Note">\r\n        <i class="icon-exclamation" style="color: #f00"></i>\r\n        <span class="preformatted" bo-text="model.Note" style="display: inline"></span>\r\n    </div>\r\n\r\n    <div class="clearfix" ng-if="model.Parameters.length > 0"></div>\r\n    <div class="col-xs-12" ng-if="model.Parameters.length > 0">\r\n        <strong bo-text="i18n.core.customProps.title"></strong>\r\n        <ago-custom-props-list items="model.Parameters"></ago-custom-props-list>\r\n    </div>\r\n\r\n    <div class="clearfix" ng-if="model.PrimaryTask || model.Subtasks.length > 0"></div>\r\n    <div class="col-xs-12" ng-if="model.PrimaryTask || model.Subtasks.length > 0" style="margin-top: 5px">\r\n        <common-tasks-task-subtasks view-state="$view$" num="model.SeqNumber" parent="model.PrimaryTask"\r\n                             items="model.Subtasks" more="model.MoreSubtasks">\r\n        </common-tasks-task-subtasks>\r\n    </div>\r\n</div>\r\n'}),define("text!core/common/tasks/list/cards/taskSubtasks.tpl.html",[],function(){return'<ul class="links">\r\n    <li>\r\n        <a ui-sref="$view$({ num: num })">\r\n            <i class="icon-sitemap"></i>\r\n        </a>\r\n    </li>\r\n    <li ng-if="parent">\r\n        <a class="badge {{viewSettings[parent.Status.id].badgeClass}}" ui-sref="$view$({ num: parent.SeqNumber })">\r\n            <i class="icon-long-arrow-up"></i>&nbsp;\r\n            <span bo-text="parent.SeqNumber"></span>&nbsp;\r\n            <i class="{{viewSettings[parent.Status.id].icon}}"></i>\r\n            <span bo-text="parent.Content | textCut:15"></span>\r\n        </a>\r\n    </li>\r\n    <li ng-repeat="i in items" bindonce>\r\n        <a class="badge {{viewSettings[i.Status.id].badgeClass}}" ui-sref="$view$({ num: i.SeqNumber })">\r\n            <i class="icon-long-arrow-down"></i>&nbsp;\r\n            <span bo-text="i.SeqNumber"></span>&nbsp;\r\n            <i class="{{viewSettings[i.Status.id].icon}}"></i>\r\n            <span bo-text="i.Content | textCut:15"></span>\r\n        </a>\r\n    </li>\r\n    <li>\r\n        <a ui-sref="$view$({ num: num })"\r\n           ng-if="more > 0"\r\n           bo-text="\'common.tasks.subtasks.moreItems\' | i18n:{num: more}"></a>\r\n    </li>\r\n</ul>\r\n'}),define("core/common/tasks/list/cards/taskSubtasks",["../../moduleDef","angular","text!./taskSubtasks.tpl.html"],function(module,angular,tpl){var ctrl=function($scope,$rootScope,viewSettings){$scope.i18n=$rootScope.i18n,$scope.viewSettings=viewSettings};module.directive("commonTasksTaskSubtasks",function(){return{restrict:"E",replace:!0,template:function(elm,attr){return tpl.replace("$view$",attr.viewState).replace("$view$",attr.viewState).replace("$view$",attr.viewState).replace("$view$",attr.viewState)},scope:{num:"=",parent:"=",items:"=",more:"="},controller:["$scope","$rootScope","taskStatusViewSettings",ctrl]}})}),define("core/common/tasks/list/cards/header",["../../moduleDef","text!./header.tpl.html","./taskSubtasks"],function(module,tpl){module.directive("commonTasksTaskCardHeader",function(){return{restrict:"E",replace:!0,template:function(elm,attr){return tpl.replace("$view$",attr.viewState).replace("$view$",attr.viewState).replace("$create$",attr.createState)},scope:!1}})}),define("text!core/common/tasks/list/cards/footer.tpl.html",[],function(){return'<div>\r\n    <div class="clearfix"></div>\r\n    <div class="col-xs-12" style="margin-top: 5px">\r\n        <details-btn open="model.details.expanded" toggle="toggle(model)"></details-btn>\r\n\r\n        <ago-lookup-items items="model.Managers" class="pull-left" style="font-weight: bold"></ago-lookup-items>\r\n\r\n        <ago-lookup-items items="model.Executors" class="pull-left" style="margin-left: 5px"></ago-lookup-items>\r\n\r\n        <span style="margin-left: 5px" ng-if="model.StartDate || model.DueDate">\r\n            [\r\n                <em bo-if="model.StartDate" bo-text="model.StartDate | date:\'ago_datetime\'"></em>\r\n                <inline-none ng-ig="model.StartDate"></inline-none>\r\n            &ndash;\r\n            <em bo-if="model.DueDate" bo-text="model.DueDate | date:\'ago_datetime\'"></em>\r\n                <inline-none ng-ig="model.DueDate"></inline-none>\r\n            ]\r\n        </span>\r\n\r\n        <div class="clearfix"></div>\r\n    </div>\r\n\r\n    <div class="clearfix"></div>\r\n    <div class="col-xs-12" style="margin-top: 5px">\r\n        <a class="ago-counter" ui-sref="$view$({num: model.SeqNumber})">\r\n            <span>%</span>\r\n            <span class="label" bo-text="model.PercentCompleted"\r\n                  bo-class="{\'label-primary\': model.PercentCompleted > 0 && model.PercentCompleted < 100,\r\n                    \'label-default\': !model.PercentCompleted || model.PercentCompleted === 100 }">\r\n            </span>\r\n        </a>\r\n\r\n        <a class="ago-counter" ui-sref="$view$({num: model.SeqNumber})" style="margin-left: 5px">\r\n            <i class="icon-table"></i>\r\n            <span class="label label-default" bo-text="model.ParametersCount"></span>\r\n        </a>\r\n\r\n        <a class="ago-counter" ui-sref="$comments$({num: model.SeqNumber})" style="margin-left: 5px">\r\n            <i class="icon-comment-alt"></i>\r\n            <span class="label" bo-text="model.CommentsCount"\r\n                  bo-class="{\'label-primary\': model.CommentsCount > 0, \'label-default\': !model.CommentsCount}">\r\n            </span>\r\n        </a>\r\n\r\n        <a class="ago-counter" ui-sref="$files$({num: model.SeqNumber})" style="margin-left: 5px">\r\n            <i class="icon-paper-clip"></i>\r\n            <span class="label" bo-text="model.FilesCount"\r\n                  bo-class="{\'label-primary\': model.FilesCount > 0, \'label-default\': !model.FilesCount}">\r\n            </span>\r\n        </a>\r\n\r\n        <a class="ago-counter" ui-sref="$view$({num: model.SeqNumber})" style="margin-left: 5px">\r\n            <i class="icon-time"></i>\r\n            <expiration visible="true" expired="model.IsOverdue" days="model.DaysToOverdue">\r\n            </expiration>\r\n        </a>\r\n\r\n        <a class="ago-counter" ui-sref="$activity$({num: model.SeqNumber })" bo-if="model.LastChangeTime">\r\n            <ago-time-moment time="model.LastChangeTime"></ago-time-moment>\r\n        </a>\r\n    </div>\r\n\r\n    <!-- Add the extra clearfix for only the required viewport -->\r\n    <div class="clearfix"></div>\r\n\r\n    <common-tasks-task-details class="col-xs-12" item="model"></common-tasks-task-details>\r\n</div>\r\n'
}),define("core/common/tasks/list/cards/footer",["../../moduleDef","text!./footer.tpl.html"],function(module,tpl){module.directive("commonTasksTaskCardFooter",function(){return{restrict:"E",replace:!0,template:function(elm,attr){return tpl.replace("$view$",attr.viewState).replace("$view$",attr.viewState).replace("$view$",attr.viewState).replace("$comments$",attr.commentsState).replace("$files$",attr.filesState).replace("$activity$",attr.activityState)},scope:!1}})}),define("core/common/tasks/list/cards/taskCards",["../../moduleDef","angular","jquery","./header","./footer"],function(module,angular,$){module.controller("commonTasksTaskCardsCtrl",["$scope","$timeout","$rootScope","apinetService","$stateParams","$exceptionHandler","taskStatusViewSettings","apiPrefix",function($scope,$timeout,$rootScope,apinetService,$stateParams,$exceptionHandler,viewSettings){$scope.i18n=$rootScope.i18n,$scope.moment=$rootScope.moment,$scope.viewSettings=viewSettings,$scope.doLayout=function(){$timeout(function(){$(".items-wall").masonry("layout")},0,!0)},$scope.toggle=function(model){if($scope.toggleDetails({model:model}),$scope.doLayout(),!model.details.loaded)var unwatch=$scope.$watch(function(){return model.details.loaded},function(newVal){newVal&&(unwatch(),$scope.doLayout())})};var offOpen=$rootScope.$on("sidebar:opened",$scope.doLayout),offClose=$rootScope.$on("sidebar:closed",$scope.doLayout),offChanged=$scope.$parent.$on("modelsChanged",function(){$timeout(function(){$scope.$broadcast("masonry.reloadItemsAndLayout")},0,!1)}),offViewModeChanged=$scope.$parent.$on("viewModeChanged",$scope.doLayout);$scope.$on("$destroy",function(){offOpen(),offClose(),offChanged(),offViewModeChanged()}),$scope.change=function(task,newStatus){$scope.changeStatus({model:task,status:newStatus})}}])}),define("core/common/tasks/module",["./moduleDef","./nls/en","./nls/ru","./agreements/agreementsView","./task-type/taskType","./create/taskCreate","./task-info/taskInfo","./props/taskProps","./create/createBtn","./list/taskList","./list/taskGoMenu","./list/taskOneline","./list/taskGantt","./list/taskCalendar","./list/cards/taskDetails","./list/cards/taskCards"],function(module){var taskViewModes={list:"list",cards:"cards",gantt:"gantt",calendar:"calendar"},taskViewModeSettings={list:{mode:taskViewModes.list,icon:"icon-list",title:"core.viewMode.list"},cards:{mode:taskViewModes.cards,icon:"icon-list-alt",title:"core.viewMode.cards"},gantt:{mode:taskViewModes.gantt,icon:"icon-bar-chart",title:"core.viewMode.gantt"},calendar:{mode:taskViewModes.calendar,icon:"icon-calendar",title:"core.viewMode.calendar"}};return module.constant("taskStatuses",{Plan:"Plan",Assigned:"Assigned",ReadyToStart:"ReadyToStart",InProgress:"InProgress",Completed:"Completed",Rejected:"Rejected",Closed:"Closed",Paused:"Paused"}).constant("taskStatusViewSettings",{Plan:{"class":"btn-default",badgeClass:"badge-default",eventClass:"label-default",icon:"icon-circle-blank",color:"#999999"},Assigned:{"class":"btn-info",badgeClass:"badge-info",eventClass:"label-info",icon:"icon-time",color:"#9564e2"},ReadyToStart:{"class":"btn-warning",badgeClass:"badge-warning",eventClass:"label-warning",icon:"icon-play",color:"#f8a326"},InProgress:{"class":"btn-primary",badgeClass:"badge-primary",eventClass:"label-primary",icon:"icon-cogs",color:"#00acec"},Completed:{"class":"btn-success",badgeClass:"badge-success",eventClass:"label-success",icon:"icon-ok",color:"#49bf67"},Rejected:{"class":"btn-inverse",badgeClass:"badge-inverse",eventClass:"label-inverse",icon:"icon-ban-circle",color:"#363636"},Closed:{"class":"btn-default",badgeClass:"badge-default",eventClass:"label-default",icon:"icon-beer",color:"#999999"},Paused:{"class":"btn-default",badgeClass:"badge-default",eventClass:"label-default",icon:"icon-pause",color:"#999999"}}).constant("taskPriorities",{Low:"Low",Normal:"Normal",High:"High"}).constant("taskViewModes",taskViewModes).constant("taskViewModeSettings",taskViewModeSettings).value("tasksListViewMode",{mode:taskViewModes.list}).run(["i18n",function(i18n){i18n.registerLocalizationModule("common.tasks/nls"),i18n.sync()}])}),define("core/common/calendar/moduleDef",["angular","core/common/tasks/module"],function(angular){return angular.module("common.calendar",["core.module","common.tasks"])}),define("text!core/common/calendar/userCalendar.tpl.html",[],function(){return'<div class="container"\r\n     ng-controller="calendarCtrl"\r\n     filtered-list="{method: \'userRecords/userCalendar/getCalendarData\'}"\r\n     initial-sorters="{ LastChangeTime: \'desc\'}">\r\n    <div class="row" id="content-wrapper">\r\n        <div class="col-xs-12">\r\n\r\n            <div filters-box="filter" sorters="sorters" meta="userRecords/userCalendar/taskMetadata" group="Core.Calendar"\r\n                 apply-enabled="applyEnabled" apply-filter="applyFilter" reset-filter="resetFilter"\r\n                 search-model="filter.simple.search" search-node="{op: \'||\', items: [{path: \'SeqNumber\', op: \'like\'}, {path: \'Content\', op: \'like\'}]}"\r\n                 filter-applied="filterApplied" style="padding-top: 5px">\r\n                <ago-box-content>\r\n                    <form class="form form-horizontal">\r\n                        <div class="form-group">\r\n                            <label class="col-md-3 control-label">{{ i18n.core.calendar.fields.start }}</label>\r\n                            <div class="col-md-9">\r\n                                <datetimepicker ng-model="filter.simple.slDate.value"></datetimepicker>\r\n                                <datetimepicker ng-model="filter.simple.srDate.value"></datetimepicker>\r\n                            </div>\r\n                        </div>\r\n                        <div class="form-group">\r\n                            <label class="col-md-3 control-label">{{ i18n.core.calendar.fields.finish }}</label>\r\n                            <div class="col-md-9">\r\n                                <datetimepicker ng-model="filter.simple.flDate.value"></datetimepicker>\r\n                                <datetimepicker ng-model="filter.simple.frDate.value"></datetimepicker>\r\n                            </div>\r\n                        </div>\r\n                        <div class="form-group">\r\n                            <label class="col-md-3 control-label">{{ i18n.core.events.fields.project }}</label>\r\n                            <div class="col-md-9">\r\n                                <input lookup="core/projects/lookupProjects" ng-model="filter.simple.project"\r\n                                       filter-node="{path: \'ProjectCode\', op: \'=\'}" class="form-control" multiple />\r\n                            </div>\r\n                        </div>\r\n                    </form>\r\n                </ago-box-content>\r\n            </div>\r\n\r\n            <ago-box color="purple" large="true" header-class="{\'hidden-md\': true, \'hidden-lg\': true}">\r\n                <ago-box-title>\r\n                    <i class="fa icon-calendar"></i>\r\n                    {{ i18n.core.calendar.title }}\r\n                </ago-box-title>\r\n                <ago-box-content>\r\n                    <div class="box-toolbox box-toolbox-top">\r\n                        <ago-error-msg></ago-error-msg>\r\n\r\n                        <ago-calendar-list-toggle view-mode="viewMode"></ago-calendar-list-toggle>\r\n\r\n                        <ago-calendar-view-toggle calendar="#calendar" ng-show="viewMode === \'calendar\'">\r\n                        </ago-calendar-view-toggle>\r\n\r\n                        <refresher active="indication.loading" on-refresh="refreshList()"></refresher>\r\n                        <div class="clearfix"></div>\r\n                    </div>\r\n\r\n                    <div ng-if="viewMode === \'list\'">\r\n                        <div class="task" ng-repeat="m in models" bindonce>\r\n                            <div>\r\n                                <a bo-href="m.TaskUrl" class="btn pull-left" bo-text="m.SeqNumber"></a>\r\n                                <ago-status-btn class="pull-right" status="m.Status" view-settings="viewSettings"></ago-status-btn>\r\n                                <span class="lgap" bo-text="m.Content" bo-if="m.Content"></span>\r\n                                <span class="lgap">\r\n                                    <span  bo-text="m.StartDate | date:\'ago_datetime\'"></span>&ndash;<span bo-text="m.FinishDate | date:\'ago_datetime\'"></span>\r\n                                </span>\r\n\r\n                                <a bo-href="m.ProjectUrl" class="text-muted lgap" bo-text="m.ProjectName"></a>\r\n                                <strong class="lgap" bo-text="m.Type"></strong>\r\n\r\n                                <ago-time-moment class="lgap tgap" time="m.LastChangeTime"></ago-time-moment>\r\n                                <div class="clearfix"></div>\r\n\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div ng-if="viewMode === \'calendar\'">\r\n                        <div id="calendar" ui-calendar="calendarOptions()" ng-model="eventSources"></div>\r\n                    </div>\r\n\r\n                    <div class="clearfix"></div>\r\n\r\n                    <div class="box-toolbox box-toolbox-bottom">\r\n                        <button type="button" class="btn btn-primary" ng-click="paging.page = paging.page + 1">{{ i18n.core.buttons.more }}</button>\r\n\r\n                        <refresher active="indication.loading" on-refresh="refreshList()"></refresher>\r\n                        <counter action="userRecords/userCalendar/getCalendarCount"></counter>\r\n                    </div>\r\n                </ago-box-content>\r\n            </ago-box>\r\n        </div>\r\n    </div>\r\n</div>\r\n'}),requirejs.s.contexts._.nextTick=function(f){f()},require(["css"],function(css){css.addBuffer("core/common/calendar/userCalendar.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,requirejs.s.contexts._.nextTick=function(f){f()},require(["css"],function(css){css.addBuffer("fullcalendar/css.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,define("core/common/calendar/userCalendar",["./moduleDef","angular","text!./userCalendar.tpl.html","css!./userCalendar.css","css!fullcalendar/css"],function(module,angular,template){var ctrl=function($scope,apinetService,$window,i18n,reportService,$locale,$rootScope,$timeout,viewSettings,statuses){$scope.viewSettings=viewSettings,$scope.$on("resetFilter",function(){$scope.filter={simple:{slDate:{path:"StartDate",op:">=",value:null},srDate:{path:"StartDate",op:"<=",value:null},flDate:{path:"FinishDate",op:">=",value:null},frDate:{path:"FinishDate",op:"<=",value:null}}},"list"===$scope.viewMode&&($scope.filter.simple.notClosed={path:"Status",op:"=",not:!0,value:statuses.Closed})}),$scope.cfg=null,$scope.calendarOptions=function(){if($scope.cfg)return $scope.cfg;var tValues=function(data){var r,k;r=[];for(k in data)r[k]=data[k];return r},dtf=$locale.DATETIME_FORMATS,cfg={height:450,editable:!1,header:{left:"",center:"title",right:"today prev,next"},monthNames:tValues(dtf.MONTH),monthNamesShort:tValues(dtf.SHORTMONTH),dayNames:tValues(dtf.DAY),dayNamesShort:tValues(dtf.SHORTDAY),axisFormat:"H:mm",buttonText:{today:i18n.msg("core.calendar.buttons.today"),month:i18n.msg("core.calendar.buttons.month"),day:i18n.msg("core.calendar.buttons.day"),week:i18n.msg("core.calendar.buttons.week"),agendaWeek:i18n.msg("core.calendar.buttons.agendaWeek"),agendaDay:i18n.msg("core.calendar.buttons.agendaDay")},timeFormat:"",viewRender:function(view){$scope.calendarFromDate=view.visStart,$scope.calendarToDate=view.visEnd,$rootScope.$emit("agoCalendar:modeChanged",{mode:view.name})}};return $scope.cfg=cfg,$scope.cfg},$scope.eventSources=[[]],$scope.$watchCollection("models",function(){$scope.models&&($scope.eventSources[0].splice(0),angular.forEach($scope.models,function(m){angular.isDefined(m.id)||(m.id=m.SeqNumber,m.title=m.SeqNumber+" | "+m.Type+(m.Content?" | "+m.Content:""),m.start=new Date(m.StartDate),m.end=new Date(m.FinishDate),m.url=m.TaskUrl,m.allDay=!1,m.className=$scope.viewSettings[m.Status.id].eventClass,$scope.eventSources[0].push(m))}))}),$scope.calendarFromDate=null,$scope.calendarToDate=null;var reloadCalendar=function(){$scope.requestParams.from=$scope.calendarFromDate,$scope.requestParams.to=$scope.calendarToDate,$scope.refreshList(!1)};$timeout(function(){$scope.viewMode="calendar"}),$scope.$watch("viewMode",function(val){"list"===val?($scope.calendarFromDate=null,$scope.calendarToDate=null,$scope.filter.simple.notClosed={path:"Status",op:"=",not:!0,value:statuses.Closed},$scope.models=[]):"calendar"===val&&(delete $scope.filter.simple.notClosed,$scope.models=[])}),$scope.$watchCollection("[calendarFromDate, calendarToDate]",reloadCalendar);var off=$rootScope.$on("agoCalendar:changeMode",function(e,arg){"#calendar"===arg.calendar&&$("#calendar").fullCalendar("changeView",arg.mode)});$scope.$on("$destroy",function(){off()})};module.config(["$stateProvider",function($stateProvider){$stateProvider.state({name:"page.projects.calendar",url:"/projects/calendar",template:template,onEnter:["$rootScope",function($rootScope){$rootScope.breadcrumbs.push({name:"core.calendar.title",url:"page.projects.calendar"})}],onExit:["$rootScope",function($rootScope){$rootScope.breadcrumbs.splice($rootScope.breadcrumbs.length-1,1)}]})}]).controller("calendarCtrl",["$scope","apinetService","$window","i18n","reportService","$locale","$rootScope","$timeout","taskStatusViewSettings","taskStatuses",ctrl])}),define("core/common/calendar/module",["./moduleDef","angular","./userCalendar"],function(module){return module}),function(p,h,q){function E(a){var e=[];return s(e,h.noop).chars(a),e.join("")}function k(a){var e={};a=a.split(",");var d;for(d=0;d<a.length;d++)e[a[d]]=!0;return e}function F(a,e){function d(a,b,d,g){if(b=h.lowercase(b),t[b])for(;f.last()&&u[f.last()];)c("",f.last());v[b]&&f.last()==b&&c("",b),(g=w[b]||!!g)||f.push(b);var l={};d.replace(G,function(a,b,e,c,d){l[b]=r(e||c||d||"")}),e.start&&e.start(b,l,g)}function c(a,b){var d,c=0;if(b=h.lowercase(b))for(c=f.length-1;c>=0&&f[c]!=b;c--);if(c>=0){for(d=f.length-1;d>=c;d--)e.end&&e.end(f[d]);f.length=c}}var b,g,f=[],l=a;for(f.last=function(){return f[f.length-1]};a;){if(g=!0,f.last()&&x[f.last()]?(a=a.replace(RegExp("(.*)<\\s*\\/\\s*"+f.last()+"[^>]*>","i"),function(b,a){return a=a.replace(H,"$1").replace(I,"$1"),e.chars&&e.chars(r(a)),""}),c("",f.last())):(0===a.indexOf("<!--")?(b=a.indexOf("--",4),b>=0&&a.lastIndexOf("-->",b)===b&&(e.comment&&e.comment(a.substring(4,b)),a=a.substring(b+3),g=!1)):y.test(a)?(b=a.match(y))&&(a=a.replace(b[0],""),g=!1):J.test(a)?(b=a.match(z))&&(a=a.substring(b[0].length),b[0].replace(z,c),g=!1):K.test(a)&&(b=a.match(A))&&(a=a.substring(b[0].length),b[0].replace(A,d),g=!1),g&&(b=a.indexOf("<"),g=0>b?a:a.substring(0,b),a=0>b?"":a.substring(b),e.chars&&e.chars(r(g)))),a==l)throw L("badparse",a);l=a}c()}function r(a){if(!a)return"";var e=M.exec(a);a=e[1];var d=e[3];return(e=e[2])&&(n.innerHTML=e.replace(/</g,"&lt;"),e="textContent"in n?n.textContent:n.innerText),a+e+d}function B(a){return a.replace(/&/g,"&amp;").replace(N,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function s(a,e){var d=!1,c=h.bind(a,a.push);return{start:function(a,g,f){a=h.lowercase(a),!d&&x[a]&&(d=a),d||!0!==C[a]||(c("<"),c(a),h.forEach(g,function(d,f){var g=h.lowercase(f),k="img"===a&&"src"===g||"background"===g;!0!==O[g]||!0===D[g]&&!e(d,k)||(c(" "),c(f),c('="'),c(B(d)),c('"'))}),c(f?"/>":">"))},end:function(a){a=h.lowercase(a),d||!0!==C[a]||(c("</"),c(a),c(">")),a==d&&(d=!1)},chars:function(a){d||c(B(a))}}}var L=h.$$minErr("$sanitize"),A=/^<\s*([\w:-]+)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*>/,z=/^<\s*\/\s*([\w:-]+)[^>]*>/,G=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,K=/^</,J=/^<\s*\//,H=/\x3c!--(.*?)--\x3e/g,y=/<!DOCTYPE([^>]*?)>/i,I=/<!\[CDATA\[(.*?)]]\x3e/g,N=/([^\#-~| |!])/g,w=k("area,br,col,hr,img,wbr");p=k("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),q=k("rp,rt");var v=h.extend({},q,p),t=h.extend({},p,k("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),u=h.extend({},q,k("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),x=k("script,style"),C=h.extend({},w,t,u,v),D=k("background,cite,href,longdesc,src,usemap"),O=h.extend({},D,k("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width")),n=document.createElement("pre"),M=/^(\s*)([\s\S]*?)(\s*)$/;h.module("ngSanitize",[]).provider("$sanitize",function(){this.$get=["$$sanitizeUri",function(a){return function(e){var d=[];return F(e,s(d,function(c,b){return!/^unsafe/.test(a(c,b))})),d.join("")}}]}),h.module("ngSanitize").filter("linky",["$sanitize",function(a){var e=/((ftp|https?):\/\/|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>]/,d=/^mailto:/;return function(c,b){function g(a){a&&m.push(E(a))}function f(a,c){m.push("<a "),h.isDefined(b)&&(m.push('target="'),m.push(b),m.push('" ')),m.push('href="'),m.push(a),m.push('">'),g(c),m.push("</a>")}if(!c)return c;for(var l,n,p,k=c,m=[];l=k.match(e);)n=l[0],l[2]==l[3]&&(n="mailto:"+n),p=l.index,g(k.substr(0,p)),f(n,l[0].replace(d,"")),k=k.substring(p+l[0].length);return g(k),a(m.join(""))}}])}(window,window.angular),define("angular-sanitize",["angular"],function(global){return function(){var ret,fn;return fn=function(){return this.angular.module("ngSanitize")},ret=fn.apply(global,arguments)}}(this)),!function(a,b,c){function d(){this.$get=function(){function a(a,b,c){for(var d=a[c],e=b(d);c>0;){var f=Math.floor((c+1)/2)-1,g=a[f];if(e>=b(g))break;a[f]=d,a[c]=g,c=f}}function c(a,b,c){for(var d=a.length,e=a[c],f=b(e);;){var g=2*(c+1),h=g-1,i=null;if(d>h){var j=a[h],k=b(j);f>k&&(i=h)}if(d>g){var l=a[g],m=b(l);m<(null===i?f:b(a[h]))&&(i=g)}if(null===i)break;a[c]=a[i],a[i]=e,c=i}}function d(a){if(a&&!b.isFunction(a))throw new Error("BinaryHeap(weightFunc): weightFunc: must be a function!");a=a||function(a){return a},this.weightFunc=a,this.heap=[]}return d.prototype.push=function(b){this.heap.push(b),a(this.heap,this.weightFunc,this.heap.length-1)},d.prototype.peek=function(){return this.heap[0]},d.prototype.pop=function(){var a=this.heap[0],b=this.heap.pop();return this.heap.length>0&&(this.heap[0]=b,c(this.heap,this.weightFunc,0)),a},d.prototype.remove=function(d){for(var e=this.heap.length,f=0;e>f;f++)if(b.equals(this.heap[f],d)){var g=this.heap[f],h=this.heap.pop();return f!==e-1&&(this.heap[f]=h,a(this.heap,this.weightFunc,f),c(this.heap,this.weightFunc,f)),g}return null},d.prototype.removeAll=function(){this.heap=[]},d.prototype.size=function(){return this.heap.length},d}}function e(){function a(a,c){c(b.isNumber(a)?0>a?"must be greater than zero!":null:"must be a number!")}var d,e=function(){return{capacity:Number.MAX_VALUE,maxAge:null,deleteOnExpire:"none",onExpire:null,cacheFlushInterval:null,recycleFreq:1e3,storageMode:"none",storageImpl:null,verifyIntegrity:!0}};this.setCacheDefaults=function(c){var f="$angularCacheFactoryProvider.setCacheDefaults(options): ";if(c=c||{},!b.isObject(c))throw new Error(f+"options: must be an object!");if("capacity"in c&&a(c.capacity,function(a){if(a)throw new Error(f+"capacity: "+a)}),"deleteOnExpire"in c){if(!b.isString(c.deleteOnExpire))throw new Error(f+"deleteOnExpire: must be a string!");if("none"!==c.deleteOnExpire&&"passive"!==c.deleteOnExpire&&"aggressive"!==c.deleteOnExpire)throw new Error(f+'deleteOnExpire: accepted values are "none", "passive" or "aggressive"!')}if("maxAge"in c&&a(c.maxAge,function(a){if(a)throw new Error(f+"maxAge: "+a)}),"recycleFreq"in c&&a(c.recycleFreq,function(a){if(a)throw new Error(f+"recycleFreq: "+a)}),"cacheFlushInterval"in c&&a(c.cacheFlushInterval,function(a){if(a)throw new Error(f+"cacheFlushInterval: "+a)}),"storageMode"in c){if(!b.isString(c.storageMode))throw new Error(f+"storageMode: must be a string!");if("none"!==c.storageMode&&"localStorage"!==c.storageMode&&"sessionStorage"!==c.storageMode)throw new Error(f+'storageMode: accepted values are "none", "localStorage" or "sessionStorage"!');if("storageImpl"in c){if(!b.isObject(c.storageImpl))throw new Error(f+"storageImpl: must be an object!");if(!("setItem"in c.storageImpl&&"function"==typeof c.storageImpl.setItem))throw new Error(f+'storageImpl: must implement "setItem(key, value)"!');if(!("getItem"in c.storageImpl&&"function"==typeof c.storageImpl.getItem))throw new Error(f+'storageImpl: must implement "getItem(key)"!');if(!("removeItem"in c.storageImpl)||"function"!=typeof c.storageImpl.removeItem)throw new Error(f+'storageImpl: must implement "removeItem(key)"!')}}if("onExpire"in c&&"function"!=typeof c.onExpire)throw new Error(f+"onExpire: must be a function!");d=b.extend({},e(),c)},this.setCacheDefaults({}),this.$get=["$window","BinaryHeap",function(e,f){function g(a){return a&&b.isNumber(a)?a.toString():a}function h(a){var b,c={};for(b in a)a.hasOwnProperty(b)&&(c[b]=b);return c}function i(a){var b,c=[];for(b in a)a.hasOwnProperty(b)&&c.push(b);return c}function j(j,k){function m(b){a(b,function(a){if(a)throw new Error("capacity: "+a);for(z.capacity=b;C.size()>z.capacity;)F.remove(C.peek().key,{verifyIntegrity:!1})})}function n(a){if(!b.isString(a))throw new Error("deleteOnExpire: must be a string!");if("none"!==a&&"passive"!==a&&"aggressive"!==a)throw new Error('deleteOnExpire: accepted values are "none", "passive" or "aggressive"!');z.deleteOnExpire=a}function o(b){var c=i(A);if(null===b){if(z.maxAge)for(var d=0;d<c.length;d++){var e=c[d];"maxAge"in A[e]||(delete A[e].expires,B.remove(A[e]))}z.maxAge=b}else a(b,function(a){if(a)throw new Error("maxAge: "+a);if(b!==z.maxAge){z.maxAge=b;for(var d=(new Date).getTime(),e=0;e<c.length;e++){var f=c[e];"maxAge"in A[f]||(B.remove(A[f]),A[f].expires=A[f].created+z.maxAge,B.push(A[f]),A[f].expires<d&&F.remove(f,{verifyIntegrity:!1}))}}})}function p(b){null===b?(z.recycleFreqId&&(clearInterval(z.recycleFreqId),delete z.recycleFreqId),z.recycleFreq=d.recycleFreq,z.recycleFreqId=setInterval(F.removeExpired,z.recycleFreq)):a(b,function(a){if(a)throw new Error("recycleFreq: "+a);z.recycleFreq=b,z.recycleFreqId&&clearInterval(z.recycleFreqId),z.recycleFreqId=setInterval(F.removeExpired,z.recycleFreq)})}function q(b){null===b?(z.cacheFlushIntervalId&&(clearInterval(z.cacheFlushIntervalId),delete z.cacheFlushIntervalId),z.cacheFlushInterval=b):a(b,function(a){if(a)throw new Error("cacheFlushInterval: "+a);b!==z.cacheFlushInterval&&(z.cacheFlushIntervalId&&clearInterval(z.cacheFlushIntervalId),z.cacheFlushInterval=b,z.cacheFlushIntervalId=setInterval(F.removeAll,z.cacheFlushInterval))})}function r(a,c){var d,f;if(!b.isString(a))throw new Error("storageMode: must be a string!");if("none"!==a&&"localStorage"!==a&&"sessionStorage"!==a)throw new Error('storageMode: accepted values are "none", "localStorage" or "sessionStorage"!');if(("localStorage"===z.storageMode||"sessionStorage"===z.storageMode)&&a!==z.storageMode){for(d=i(A),f=0;f<d.length;f++)G.removeItem(D+".data."+d[f]);G.removeItem(D+".keys")}if(z.storageMode=a,c){if(!b.isObject(c))throw new Error("storageImpl: must be an object!");if(!("setItem"in c&&"function"==typeof c.setItem))throw new Error('storageImpl: must implement "setItem(key, value)"!');if(!("getItem"in c&&"function"==typeof c.getItem))throw new Error('storageImpl: must implement "getItem(key)"!');if(!("removeItem"in c)||"function"!=typeof c.removeItem)throw new Error('storageImpl: must implement "removeItem(key)"!');G=c}else"localStorage"===z.storageMode?G=e.localStorage:"sessionStorage"===z.storageMode&&(G=e.sessionStorage);if("none"!==z.storageMode&&G)if(E)for(d=i(A),f=0;f<d.length;f++)u(d[f]);else t()}function s(a,c,e){if(a=a||{},e=e||{},c=!!c,!b.isObject(a))throw new Error("AngularCache.setOptions(cacheOptions, strict, options): cacheOptions: must be an object!");if(v(e.verifyIntegrity),c&&(a=b.extend({},d,a)),"verifyIntegrity"in a&&(z.verifyIntegrity=a.verifyIntegrity===!0),"capacity"in a&&m(a.capacity),"deleteOnExpire"in a&&n(a.deleteOnExpire),"maxAge"in a&&o(a.maxAge),"recycleFreq"in a&&p(a.recycleFreq),"cacheFlushInterval"in a&&q(a.cacheFlushInterval),"storageMode"in a&&r(a.storageMode,a.storageImpl),"onExpire"in a){if(null!==a.onExpire&&"function"!=typeof a.onExpire)throw new Error("onExpire: must be a function!");z.onExpire=a.onExpire}E=!0}function t(){var a=b.fromJson(G.getItem(D+".keys"));if(G.removeItem(D+".keys"),a&&a.length){for(var c=0;c<a.length;c++){var d=b.fromJson(G.getItem(D+".data."+a[c]))||{},e=d.maxAge||z.maxAge,f=d.deleteOnExpire||z.deleteOnExpire;if(e&&(new Date).getTime()-d.created>e&&"aggressive"===f)G.removeItem(D+".data."+a[c]);else{var g={created:d.created};d.expires&&(g.expires=d.expires),d.accessed&&(g.accessed=d.accessed),d.maxAge&&(g.maxAge=d.maxAge),d.deleteOnExpire&&(g.deleteOnExpire=d.deleteOnExpire),F.put(a[c],d.value,g)}}u(null)}}function u(a){"none"!==z.storageMode&&G&&(G.setItem(D+".keys",b.toJson(i(A))),a&&G.setItem(D+".data."+a,b.toJson(A[a])))}function v(a){if((a||a!==!1&&z.verifyIntegrity)&&"none"!==z.storageMode&&G){var c=i(A);G.setItem(D+".keys",b.toJson(c));for(var d=0;d<c.length;d++)G.setItem(D+".data."+c[d],b.toJson(A[c[d]]))}}function w(a){if("none"!==z.storageMode&&G){var c=a||i(A);G.setItem(D+".keys",b.toJson(c))}}function x(a){"none"!==z.storageMode&&G&&G.setItem(D+".data."+a,b.toJson(A[a]))}function y(){if("none"!==z.storageMode&&G){for(var a=i(A),c=0;c<a.length;c++)G.removeItem(D+".data."+a[c]);G.setItem(D+".keys",b.toJson([]))}}var z=b.extend({},{id:j}),A={},B=new f(function(a){return a.expires}),C=new f(function(a){return a.accessed}),D="angular-cache.caches."+j,E=!1,F=this,G=null;k=k||{},this.put=function(c,d,e){if(e=e||{},c=g(c),!b.isString(c))throw new Error("AngularCache.put(key, value, options): key: must be a string!");if(e&&!b.isObject(e))throw new Error("AngularCache.put(key, value, options): options: must be an object!");if(e.maxAge&&null!==e.maxAge)a(e.maxAge,function(a){if(a)throw new Error("AngularCache.put(key, value, options): maxAge: "+a)});else{if(e.deleteOnExpire&&!b.isString(e.deleteOnExpire))throw new Error("AngularCache.put(key, value, options): deleteOnExpire: must be a string!");if(e.deleteOnExpire&&"none"!==e.deleteOnExpire&&"passive"!==f&&"aggressive"!==f)throw new Error('AngularCache.put(key, value, options): deleteOnExpire: accepted values are "none", "passive" or "aggressive"!');if(b.isUndefined(d))return}var f,h,i=(new Date).getTime();return v(e.verifyIntegrity),A[c]?(B.remove(A[c]),C.remove(A[c])):A[c]={key:c},h=A[c],h.value=d,h.created=parseInt(e.created,10)||h.created||i,h.accessed=parseInt(e.accessed,10)||i,e.deleteOnExpire&&(h.deleteOnExpire=e.deleteOnExpire),e.maxAge&&(h.maxAge=e.maxAge),(h.maxAge||z.maxAge)&&(h.expires=h.created+(h.maxAge||z.maxAge)),f=h.deleteOnExpire||z.deleteOnExpire,h.expires&&"aggressive"===f&&B.push(h),w(),x(c),C.push(h),C.size()>z.capacity&&this.remove(C.peek().key,{verifyIntegrity:!1}),d},this.get=function(a,d){if(b.isArray(a)){var e=a,f=[];return b.forEach(e,function(a){var c=F.get(a,d);b.isDefined(c)&&f.push(c)}),f}if(a=g(a),d=d||{},!b.isString(a))throw new Error("AngularCache.get(key, options): key: must be a string!");if(d&&!b.isObject(d))throw new Error("AngularCache.get(key, options): options: must be an object!");if(d.onExpire&&!b.isFunction(d.onExpire))throw new Error("AngularCache.get(key, options): onExpire: must be a function!");if(a in A){v(d.verifyIntegrity);var h=A[a],i=h.value,j=(new Date).getTime(),k=h.deleteOnExpire||z.deleteOnExpire;return C.remove(h),h.accessed=j,C.push(h),"passive"===k&&"expires"in h&&h.expires<j&&(this.remove(a,{verifyIntegrity:!1}),z.onExpire?z.onExpire(a,h.value,d.onExpire):d.onExpire&&d.onExpire(a,h.value),i=c),x(a),i}},this.remove=function(a,b){b=b||{},v(b.verifyIntegrity),C.remove(A[a]),B.remove(A[a]),"none"!==z.storageMode&&G&&G.removeItem(D+".data."+a),delete A[a],w()},this.removeAll=function(){y(),C.removeAll(),B.removeAll(),A={}},this.removeExpired=function(a){a=a||{},v(a.verifyIntegrity);for(var b=(new Date).getTime(),c=B.peek();c&&c.expires&&c.expires<b;)F.remove(c.key,{verifyIntegrity:!1}),z.onExpire&&z.onExpire(c.key,c.value),c=B.peek()},this.destroy=function(){z.cacheFlushIntervalId&&clearInterval(z.cacheFlushIntervalId),z.recycleFreqId&&clearInterval(z.recycleFreqId),this.removeAll(),"none"!==z.storageMode&&G&&(G.removeItem(D+".keys"),G.removeItem(D)),G=null,A=null,C=null,B=null,z=null,D=null,F=null;for(var a=i(this),b=0;b<a.length;b++)this.hasOwnProperty(a[b])&&delete this[a[b]];l[j]=null,delete l[j]},this.info=function(a){if(a){if(A[a]){var c={created:A[a].created,accessed:A[a].accessed,expires:A[a].expires,maxAge:A[a].maxAge||z.maxAge,deleteOnExpire:A[a].deleteOnExpire||z.deleteOnExpire,isExpired:!1};return c.maxAge&&(c.isExpired=(new Date).getTime()-c.created>c.maxAge),c}return A[a]}return b.extend({},z,{size:C&&C.size()||0})},this.keySet=function(){return h(A)},this.keys=function(){return i(A)},this.setOptions=s,s(k,!0,{verifyIntegrity:!1})}function k(a,c){if(a in l)throw new Error("cacheId "+a+" taken!");if(!b.isString(a))throw new Error("cacheId must be a string!");return l[a]=new j(a,c),l[a]}var l={};return k.info=function(){for(var a=i(l),c={size:a.length,caches:{}},e=0;e<a.length;e++){var f=a[e];c.caches[f]=l[f].info()}return c.cacheDefaults=b.extend({},d),c},k.get=function(a){if(!b.isString(a))throw new Error("$angularCacheFactory.get(cacheId): cacheId: must be a string!");return l[a]},k.keySet=function(){return h(l)},k.keys=function(){return i(l)},k.removeAll=function(){for(var a=i(l),b=0;b<a.length;b++)l[a[b]].destroy()},k.clearAll=function(){for(var a=i(l),b=0;b<a.length;b++)l[a[b]].removeAll()},k}]}b.module("jmdobry.binary-heap",[]),b.module("jmdobry.binary-heap").provider("BinaryHeap",d),b.module("jmdobry.angular-cache",["ng","jmdobry.binary-heap"]),b.module("jmdobry.angular-cache").provider("$angularCacheFactory",e)}(window,window.angular),define("angular-cache",["angular"],function(global){return function(){var ret,fn;return fn=function(){return this.angular.module("jmdobry.angular-cache")},ret=fn.apply(global,arguments)}}(this)),function(){var bindonceModule=angular.module("pasvaz.bindonce",[]);bindonceModule.directive("bindonce",function(){var toBoolean=function(value){if(value&&0!==value.length){var v=angular.lowercase(""+value);value=!("f"===v||"0"===v||"false"===v||"no"===v||"n"===v||"[]"===v)}else value=!1;return value},msie=parseInt((/msie (\d+)/.exec(angular.lowercase(navigator.userAgent))||[])[1],10);isNaN(msie)&&(msie=parseInt((/trident\/.*; rv:(\d+)/.exec(angular.lowercase(navigator.userAgent))||[])[1],10));var bindonceDirective={restrict:"AM",controller:["$scope","$element","$attrs","$interpolate",function($scope,$element,$attrs,$interpolate){var showHideBinder=function(elm,attr,value){var show="show"===attr?"":"none",hide="hide"===attr?"":"none";elm.css("display",toBoolean(value)?show:hide)},classBinder=function(elm,value){if(angular.isObject(value)&&!angular.isArray(value)){var results=[];angular.forEach(value,function(value,index){value&&results.push(index)}),value=results}value&&elm.addClass(angular.isArray(value)?value.join(" "):value)},ctrl={watcherRemover:void 0,binders:[],group:$attrs.boName,element:$element,ran:!1,addBinder:function(binder){this.binders.push(binder),this.ran&&this.runBinders()},setupWatcher:function(bindonceValue){var that=this;
this.watcherRemover=$scope.$watch(bindonceValue,function(newValue){void 0!==newValue&&(that.removeWatcher(),that.runBinders())},!0)},removeWatcher:function(){void 0!==this.watcherRemover&&(this.watcherRemover(),this.watcherRemover=void 0)},runBinders:function(){for(;this.binders.length>0;){var binder=this.binders.shift();if(!this.group||this.group==binder.group){var value=binder.scope.$eval(binder.interpolate?$interpolate(binder.value):binder.value);switch(binder.attr){case"boIf":toBoolean(value)&&binder.transclude(binder.scope.$new(),function(clone){var parent=binder.element.parent(),afterNode=binder.element&&binder.element[binder.element.length-1],parentNode=parent&&parent[0]||afterNode&&afterNode.parentNode,afterNextSibling=afterNode&&afterNode.nextSibling||null;angular.forEach(clone,function(node){parentNode.insertBefore(node,afterNextSibling)})});break;case"boSwitch":var selectedTranscludes,switchCtrl=binder.controller[0];(selectedTranscludes=switchCtrl.cases["!"+value]||switchCtrl.cases["?"])&&(binder.scope.$eval(binder.attrs.change),angular.forEach(selectedTranscludes,function(selectedTransclude){selectedTransclude.transclude(binder.scope.$new(),function(clone){var parent=selectedTransclude.element.parent(),afterNode=selectedTransclude.element&&selectedTransclude.element[selectedTransclude.element.length-1],parentNode=parent&&parent[0]||afterNode&&afterNode.parentNode,afterNextSibling=afterNode&&afterNode.nextSibling||null;angular.forEach(clone,function(node){parentNode.insertBefore(node,afterNextSibling)})})}));break;case"boSwitchWhen":var ctrl=binder.controller[0];ctrl.cases["!"+binder.attrs.boSwitchWhen]=ctrl.cases["!"+binder.attrs.boSwitchWhen]||[],ctrl.cases["!"+binder.attrs.boSwitchWhen].push({transclude:binder.transclude,element:binder.element});break;case"boSwitchDefault":var ctrl=binder.controller[0];ctrl.cases["?"]=ctrl.cases["?"]||[],ctrl.cases["?"].push({transclude:binder.transclude,element:binder.element});break;case"hide":case"show":showHideBinder(binder.element,binder.attr,value);break;case"class":classBinder(binder.element,value);break;case"text":binder.element.text(value);break;case"html":binder.element.html(value);break;case"style":binder.element.css(value);break;case"src":binder.element.attr(binder.attr,value),msie&&binder.element.prop("src",value);break;case"attr":angular.forEach(binder.attrs,function(attrValue,attrKey){var newAttr,newValue;attrKey.match(/^boAttr./)&&binder.attrs[attrKey]&&(newAttr=attrKey.replace(/^boAttr/,"").replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),newValue=binder.scope.$eval(binder.attrs[attrKey]),binder.element.attr(newAttr,newValue))});break;case"href":case"alt":case"title":case"id":case"value":binder.element.attr(binder.attr,value)}}}this.ran=!0}};return ctrl}],link:function(scope,elm,attrs,bindonceController){var value=attrs.bindonce?scope.$eval(attrs.bindonce):!0;void 0!==value?value.then&&"function"==typeof value.then?value.then(function(){bindonceController.runBinders()}):bindonceController.runBinders():(bindonceController.setupWatcher(attrs.bindonce),elm.bind("$destroy",bindonceController.removeWatcher))}};return bindonceDirective}),angular.forEach([{directiveName:"boShow",attribute:"show"},{directiveName:"boHide",attribute:"hide"},{directiveName:"boClass",attribute:"class"},{directiveName:"boText",attribute:"text"},{directiveName:"boBind",attribute:"text"},{directiveName:"boHtml",attribute:"html"},{directiveName:"boSrcI",attribute:"src",interpolate:!0},{directiveName:"boSrc",attribute:"src"},{directiveName:"boHrefI",attribute:"href",interpolate:!0},{directiveName:"boHref",attribute:"href"},{directiveName:"boAlt",attribute:"alt"},{directiveName:"boTitle",attribute:"title"},{directiveName:"boId",attribute:"id"},{directiveName:"boStyle",attribute:"style"},{directiveName:"boValue",attribute:"value"},{directiveName:"boAttr",attribute:"attr"},{directiveName:"boIf",transclude:"element",terminal:!0,priority:1e3},{directiveName:"boSwitch",require:"boSwitch",controller:function(){this.cases={}}},{directiveName:"boSwitchWhen",transclude:"element",priority:800,require:"^boSwitch"},{directiveName:"boSwitchDefault",transclude:"element",priority:800,require:"^boSwitch"}],function(boDirective){var childPriority=200;return bindonceModule.directive(boDirective.directiveName,function(){var bindonceDirective={priority:boDirective.priority||childPriority,transclude:boDirective.transclude||!1,terminal:boDirective.terminal||!1,require:["^bindonce"].concat(boDirective.require||[]),controller:boDirective.controller,compile:function(tElement,tAttrs,transclude){return function(scope,elm,attrs,controllers){var bindonceController=controllers[0],name=attrs.boParent;if(name&&bindonceController.group!==name){var element=bindonceController.element.parent();bindonceController=void 0;for(var parentValue;9!==element[0].nodeType&&element.length;){if((parentValue=element.data("$bindonceController"))&&parentValue.group===name){bindonceController=parentValue;break}element=element.parent()}if(!bindonceController)throw new Error("No bindonce controller: "+name)}bindonceController.addBinder({element:elm,attr:boDirective.attribute||boDirective.directiveName,attrs:attrs,value:attrs[boDirective.directiveName],interpolate:boDirective.interpolate,group:name,transclude:transclude,controller:controllers.slice(1),scope:scope})}}};return bindonceDirective})})}(),define("angular-bindonce",["angular"],function(global){return function(){var ret,fn;return fn=function(){return this.angular.module("pasvaz.bindonce")},ret=fn.apply(global,arguments)}}(this)),window.Modernizr=function(window,document,undefined){function setCss(str){mStyle.cssText=str}function setCssAll(str1,str2){return setCss(prefixes.join(str1+";")+(str2||""))}function is(obj,type){return typeof obj===type}function contains(str,substr){return!!~(""+str).indexOf(substr)}function testProps(props,prefixed){for(var i in props){var prop=props[i];if(!contains(prop,"-")&&mStyle[prop]!==undefined)return"pfx"==prefixed?prop:!0}return!1}function testDOMProps(props,obj,elem){for(var i in props){var item=obj[props[i]];if(item!==undefined)return elem===!1?props[i]:is(item,"function")?item.bind(elem||obj):item}return!1}function testPropsAll(prop,prefixed,elem){var ucProp=prop.charAt(0).toUpperCase()+prop.slice(1),props=(prop+" "+cssomPrefixes.join(ucProp+" ")+ucProp).split(" ");return is(prefixed,"string")||is(prefixed,"undefined")?testProps(props,prefixed):(props=(prop+" "+domPrefixes.join(ucProp+" ")+ucProp).split(" "),testDOMProps(props,prefixed,elem))}function webforms(){Modernizr.input=function(props){for(var i=0,len=props.length;len>i;i++)attrs[props[i]]=!!(props[i]in inputElem);return attrs.list&&(attrs.list=!(!document.createElement("datalist")||!window.HTMLDataListElement)),attrs}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),Modernizr.inputtypes=function(props){for(var bool,inputElemType,defaultView,i=0,len=props.length;len>i;i++)inputElem.setAttribute("type",inputElemType=props[i]),bool="text"!==inputElem.type,bool&&(inputElem.value=smile,inputElem.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(inputElemType)&&inputElem.style.WebkitAppearance!==undefined?(docElement.appendChild(inputElem),defaultView=document.defaultView,bool=defaultView.getComputedStyle&&"textfield"!==defaultView.getComputedStyle(inputElem,null).WebkitAppearance&&0!==inputElem.offsetHeight,docElement.removeChild(inputElem)):/^(search|tel)$/.test(inputElemType)||(bool=/^(url|email)$/.test(inputElemType)?inputElem.checkValidity&&inputElem.checkValidity()===!1:inputElem.value!=smile)),inputs[props[i]]=!!bool;return inputs}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var featureName,hasOwnProp,version="2.7.2",Modernizr={},enableClasses=!0,docElement=document.documentElement,mod="modernizr",modElem=document.createElement(mod),mStyle=modElem.style,inputElem=document.createElement("input"),smile=":)",toString={}.toString,prefixes=" -webkit- -moz- -o- -ms- ".split(" "),omPrefixes="Webkit Moz O ms",cssomPrefixes=omPrefixes.split(" "),domPrefixes=omPrefixes.toLowerCase().split(" "),ns={svg:"http://www.w3.org/2000/svg"},tests={},inputs={},attrs={},classes=[],slice=classes.slice,injectElementWithStyles=function(rule,callback,nodes,testnames){var style,ret,node,docOverflow,div=document.createElement("div"),body=document.body,fakeBody=body||document.createElement("body");if(parseInt(nodes,10))for(;nodes--;)node=document.createElement("div"),node.id=testnames?testnames[nodes]:mod+(nodes+1),div.appendChild(node);return style=["&#173;",'<style id="s',mod,'">',rule,"</style>"].join(""),div.id=mod,(body?div:fakeBody).innerHTML+=style,fakeBody.appendChild(div),body||(fakeBody.style.background="",fakeBody.style.overflow="hidden",docOverflow=docElement.style.overflow,docElement.style.overflow="hidden",docElement.appendChild(fakeBody)),ret=callback(div,rule),body?div.parentNode.removeChild(div):(fakeBody.parentNode.removeChild(fakeBody),docElement.style.overflow=docOverflow),!!ret},testMediaQuery=function(mq){var matchMedia=window.matchMedia||window.msMatchMedia;if(matchMedia)return matchMedia(mq).matches;var bool;return injectElementWithStyles("@media "+mq+" { #"+mod+" { position: absolute; } }",function(node){bool="absolute"==(window.getComputedStyle?getComputedStyle(node,null):node.currentStyle).position}),bool},isEventSupported=function(){function isEventSupported(eventName,element){element=element||document.createElement(TAGNAMES[eventName]||"div"),eventName="on"+eventName;var isSupported=eventName in element;return isSupported||(element.setAttribute||(element=document.createElement("div")),element.setAttribute&&element.removeAttribute&&(element.setAttribute(eventName,""),isSupported=is(element[eventName],"function"),is(element[eventName],"undefined")||(element[eventName]=undefined),element.removeAttribute(eventName))),element=null,isSupported}var TAGNAMES={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return isEventSupported}(),_hasOwnProperty={}.hasOwnProperty;hasOwnProp=is(_hasOwnProperty,"undefined")||is(_hasOwnProperty.call,"undefined")?function(object,property){return property in object&&is(object.constructor.prototype[property],"undefined")}:function(object,property){return _hasOwnProperty.call(object,property)},Function.prototype.bind||(Function.prototype.bind=function(that){var target=this;if("function"!=typeof target)throw new TypeError;var args=slice.call(arguments,1),bound=function(){if(this instanceof bound){var F=function(){};F.prototype=target.prototype;var self=new F,result=target.apply(self,args.concat(slice.call(arguments)));return Object(result)===result?result:self}return target.apply(that,args.concat(slice.call(arguments)))};return bound}),tests.flexbox=function(){return testPropsAll("flexWrap")},tests.flexboxlegacy=function(){return testPropsAll("boxDirection")},tests.canvas=function(){var elem=document.createElement("canvas");return!(!elem.getContext||!elem.getContext("2d"))},tests.canvastext=function(){return!(!Modernizr.canvas||!is(document.createElement("canvas").getContext("2d").fillText,"function"))},tests.webgl=function(){return!!window.WebGLRenderingContext},tests.touch=function(){var bool;return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch?bool=!0:injectElementWithStyles(["@media (",prefixes.join("touch-enabled),("),mod,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(node){bool=9===node.offsetTop}),bool},tests.geolocation=function(){return"geolocation"in navigator},tests.postmessage=function(){return!!window.postMessage},tests.websqldatabase=function(){return!!window.openDatabase},tests.indexedDB=function(){return!!testPropsAll("indexedDB",window)},tests.hashchange=function(){return isEventSupported("hashchange",window)&&(document.documentMode===undefined||document.documentMode>7)},tests.history=function(){return!(!window.history||!history.pushState)},tests.draganddrop=function(){var div=document.createElement("div");return"draggable"in div||"ondragstart"in div&&"ondrop"in div},tests.websockets=function(){return"WebSocket"in window||"MozWebSocket"in window},tests.rgba=function(){return setCss("background-color:rgba(150,255,150,.5)"),contains(mStyle.backgroundColor,"rgba")},tests.hsla=function(){return setCss("background-color:hsla(120,40%,100%,.5)"),contains(mStyle.backgroundColor,"rgba")||contains(mStyle.backgroundColor,"hsla")},tests.multiplebgs=function(){return setCss("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(mStyle.background)},tests.backgroundsize=function(){return testPropsAll("backgroundSize")},tests.borderimage=function(){return testPropsAll("borderImage")},tests.borderradius=function(){return testPropsAll("borderRadius")},tests.boxshadow=function(){return testPropsAll("boxShadow")},tests.textshadow=function(){return""===document.createElement("div").style.textShadow},tests.opacity=function(){return setCssAll("opacity:.55"),/^0.55$/.test(mStyle.opacity)},tests.cssanimations=function(){return testPropsAll("animationName")},tests.csscolumns=function(){return testPropsAll("columnCount")},tests.cssgradients=function(){var str1="background-image:",str2="gradient(linear,left top,right bottom,from(#9f9),to(white));",str3="linear-gradient(left top,#9f9, white);";return setCss((str1+"-webkit- ".split(" ").join(str2+str1)+prefixes.join(str3+str1)).slice(0,-str1.length)),contains(mStyle.backgroundImage,"gradient")},tests.cssreflections=function(){return testPropsAll("boxReflect")},tests.csstransforms=function(){return!!testPropsAll("transform")},tests.csstransforms3d=function(){var ret=!!testPropsAll("perspective");return ret&&"webkitPerspective"in docElement.style&&injectElementWithStyles("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(node){ret=9===node.offsetLeft&&3===node.offsetHeight}),ret},tests.csstransitions=function(){return testPropsAll("transition")},tests.fontface=function(){var bool;return injectElementWithStyles('@font-face {font-family:"font";src:url("https://")}',function(node,rule){var style=document.getElementById("smodernizr"),sheet=style.sheet||style.styleSheet,cssText=sheet?sheet.cssRules&&sheet.cssRules[0]?sheet.cssRules[0].cssText:sheet.cssText||"":"";bool=/src/i.test(cssText)&&0===cssText.indexOf(rule.split(" ")[0])}),bool},tests.generatedcontent=function(){var bool;return injectElementWithStyles(["#",mod,"{font:0/0 a}#",mod,':after{content:"',smile,'";visibility:hidden;font:3px/1 a}'].join(""),function(node){bool=node.offsetHeight>=3}),bool},tests.video=function(){var elem=document.createElement("video"),bool=!1;try{(bool=!!elem.canPlayType)&&(bool=new Boolean(bool),bool.ogg=elem.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),bool.h264=elem.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),bool.webm=elem.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""))}catch(e){}return bool},tests.audio=function(){var elem=document.createElement("audio"),bool=!1;try{(bool=!!elem.canPlayType)&&(bool=new Boolean(bool),bool.ogg=elem.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),bool.mp3=elem.canPlayType("audio/mpeg;").replace(/^no$/,""),bool.wav=elem.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),bool.m4a=(elem.canPlayType("audio/x-m4a;")||elem.canPlayType("audio/aac;")).replace(/^no$/,""))}catch(e){}return bool},tests.localstorage=function(){try{return localStorage.setItem(mod,mod),localStorage.removeItem(mod),!0}catch(e){return!1}},tests.sessionstorage=function(){try{return sessionStorage.setItem(mod,mod),sessionStorage.removeItem(mod),!0}catch(e){return!1}},tests.webworkers=function(){return!!window.Worker},tests.applicationcache=function(){return!!window.applicationCache},tests.svg=function(){return!!document.createElementNS&&!!document.createElementNS(ns.svg,"svg").createSVGRect},tests.inlinesvg=function(){var div=document.createElement("div");return div.innerHTML="<svg/>",(div.firstChild&&div.firstChild.namespaceURI)==ns.svg},tests.smil=function(){return!!document.createElementNS&&/SVGAnimate/.test(toString.call(document.createElementNS(ns.svg,"animate")))},tests.svgclippaths=function(){return!!document.createElementNS&&/SVGClipPath/.test(toString.call(document.createElementNS(ns.svg,"clipPath")))};for(var feature in tests)hasOwnProp(tests,feature)&&(featureName=feature.toLowerCase(),Modernizr[featureName]=tests[feature](),classes.push((Modernizr[featureName]?"":"no-")+featureName));return Modernizr.input||webforms(),Modernizr.addTest=function(feature,test){if("object"==typeof feature)for(var key in feature)hasOwnProp(feature,key)&&Modernizr.addTest(key,feature[key]);else{if(feature=feature.toLowerCase(),Modernizr[feature]!==undefined)return Modernizr;test="function"==typeof test?test():test,"undefined"!=typeof enableClasses&&enableClasses&&(docElement.className+=" "+(test?"":"no-")+feature),Modernizr[feature]=test}return Modernizr},setCss(""),modElem=inputElem=null,function(window,document){function addStyleSheet(ownerDocument,cssText){var p=ownerDocument.createElement("p"),parent=ownerDocument.getElementsByTagName("head")[0]||ownerDocument.documentElement;return p.innerHTML="x<style>"+cssText+"</style>",parent.insertBefore(p.lastChild,parent.firstChild)}function getElements(){var elements=html5.elements;return"string"==typeof elements?elements.split(" "):elements}function getExpandoData(ownerDocument){var data=expandoData[ownerDocument[expando]];return data||(data={},expanID++,ownerDocument[expando]=expanID,expandoData[expanID]=data),data}function createElement(nodeName,ownerDocument,data){if(ownerDocument||(ownerDocument=document),supportsUnknownElements)return ownerDocument.createElement(nodeName);data||(data=getExpandoData(ownerDocument));var node;return node=data.cache[nodeName]?data.cache[nodeName].cloneNode():saveClones.test(nodeName)?(data.cache[nodeName]=data.createElem(nodeName)).cloneNode():data.createElem(nodeName),!node.canHaveChildren||reSkip.test(nodeName)||node.tagUrn?node:data.frag.appendChild(node)}function createDocumentFragment(ownerDocument,data){if(ownerDocument||(ownerDocument=document),supportsUnknownElements)return ownerDocument.createDocumentFragment();data=data||getExpandoData(ownerDocument);for(var clone=data.frag.cloneNode(),i=0,elems=getElements(),l=elems.length;l>i;i++)clone.createElement(elems[i]);return clone}function shivMethods(ownerDocument,data){data.cache||(data.cache={},data.createElem=ownerDocument.createElement,data.createFrag=ownerDocument.createDocumentFragment,data.frag=data.createFrag()),ownerDocument.createElement=function(nodeName){return html5.shivMethods?createElement(nodeName,ownerDocument,data):data.createElem(nodeName)},ownerDocument.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+getElements().join().replace(/[\w\-]+/g,function(nodeName){return data.createElem(nodeName),data.frag.createElement(nodeName),'c("'+nodeName+'")'})+");return n}")(html5,data.frag)}function shivDocument(ownerDocument){ownerDocument||(ownerDocument=document);var data=getExpandoData(ownerDocument);return!html5.shivCSS||supportsHtml5Styles||data.hasCSS||(data.hasCSS=!!addStyleSheet(ownerDocument,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),supportsUnknownElements||shivMethods(ownerDocument,data),ownerDocument}var supportsHtml5Styles,supportsUnknownElements,version="3.7.0",options=window.html5||{},reSkip=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,saveClones=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,expando="_html5shiv",expanID=0,expandoData={};!function(){try{var a=document.createElement("a");a.innerHTML="<xyz></xyz>",supportsHtml5Styles="hidden"in a,supportsUnknownElements=1==a.childNodes.length||function(){document.createElement("a");var frag=document.createDocumentFragment();return"undefined"==typeof frag.cloneNode||"undefined"==typeof frag.createDocumentFragment||"undefined"==typeof frag.createElement}()}catch(e){supportsHtml5Styles=!0,supportsUnknownElements=!0}}();var html5={elements:options.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:version,shivCSS:options.shivCSS!==!1,supportsUnknownElements:supportsUnknownElements,shivMethods:options.shivMethods!==!1,type:"default",shivDocument:shivDocument,createElement:createElement,createDocumentFragment:createDocumentFragment};window.html5=html5,shivDocument(document)}(this,document),Modernizr._version=version,Modernizr._prefixes=prefixes,Modernizr._domPrefixes=domPrefixes,Modernizr._cssomPrefixes=cssomPrefixes,Modernizr.mq=testMediaQuery,Modernizr.hasEvent=isEventSupported,Modernizr.testProp=function(prop){return testProps([prop])},Modernizr.testAllProps=testPropsAll,Modernizr.testStyles=injectElementWithStyles,Modernizr.prefixed=function(prop,obj,elem){return obj?testPropsAll(prop,obj,elem):testPropsAll(prop,"pfx")},docElement.className=docElement.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(enableClasses?" js "+classes.join(" "):""),Modernizr}(this,this.document),define("modernizr",function(global){return function(){var ret,fn;return fn=function(){return window.Modernizr},ret=fn.apply(global,arguments)}}(this)),function(){function Retina(){}function RetinaImagePath(path,at_2x_path){this.path=path,"undefined"!=typeof at_2x_path&&null!==at_2x_path?(this.at_2x_path=at_2x_path,this.perform_check=!1):(this.at_2x_path=path.replace(/\.\w+$/,function(match){return"@2x"+match}),this.perform_check=!0)}function RetinaImage(el){this.el=el,this.path=new RetinaImagePath(this.el.getAttribute("src"),this.el.getAttribute("data-at2x"));var that=this;this.path.check_2x_variant(function(hasVariant){hasVariant&&that.swap()})}var root="undefined"==typeof exports?window:exports,config={check_mime_type:!0,force_original_dimensions:!0};root.Retina=Retina,Retina.configure=function(options){null==options&&(options={});for(var prop in options)config[prop]=options[prop]},Retina.init=function(context){null==context&&(context=root);var existing_onload=context.onload||new Function;context.onload=function(){var i,image,images=document.getElementsByTagName("img"),retinaImages=[];for(i=0;i<images.length;i++)image=images[i],retinaImages.push(new RetinaImage(image));existing_onload()}},Retina.isRetina=function(){var mediaQuery="(-webkit-min-device-pixel-ratio: 1.5),                      (min--moz-device-pixel-ratio: 1.5),                      (-o-min-device-pixel-ratio: 3/2),                      (min-resolution: 1.5dppx)";return root.devicePixelRatio>1?!0:root.matchMedia&&root.matchMedia(mediaQuery).matches?!0:!1},root.RetinaImagePath=RetinaImagePath,RetinaImagePath.confirmed_paths=[],RetinaImagePath.prototype.is_external=function(){return!(!this.path.match(/^https?\:/i)||this.path.match("//"+document.domain))},RetinaImagePath.prototype.check_2x_variant=function(callback){var http,that=this;return this.is_external()?callback(!1):this.perform_check||"undefined"==typeof this.at_2x_path||null===this.at_2x_path?this.at_2x_path in RetinaImagePath.confirmed_paths?callback(!0):(http=new XMLHttpRequest,http.open("HEAD",this.at_2x_path),http.onreadystatechange=function(){if(4!=http.readyState)return callback(!1);if(http.status>=200&&http.status<=399){if(config.check_mime_type){var type=http.getResponseHeader("Content-Type");if(null==type||!type.match(/^image/i))return callback(!1)}return RetinaImagePath.confirmed_paths.push(that.at_2x_path),callback(!0)}return callback(!1)},http.send(),void 0):callback(!0)},root.RetinaImage=RetinaImage,RetinaImage.prototype.swap=function(path){function load(){that.el.complete?(config.force_original_dimensions&&(that.el.setAttribute("width",that.el.offsetWidth),that.el.setAttribute("height",that.el.offsetHeight)),that.el.setAttribute("src",path)):setTimeout(load,5)}"undefined"==typeof path&&(path=this.path.at_2x_path);var that=this;load()},Retina.isRetina()&&Retina.init(root)}(),define("retina",function(global){return function(){var ret,fn;return fn=function(){return window.Retina},ret=fn.apply(global,arguments)}}(this)),function(undefined){function defaultParsingFlags(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function padToken(func,count){return function(a){return leftZeroFill(func.call(this,a),count)}}function ordinalizeToken(func,period){return function(a){return this.lang().ordinal(func.call(this,a),period)}}function Language(){}function Moment(config){checkOverflow(config),extend(this,config)}function Duration(duration){var normalizedInput=normalizeObjectUnits(duration),years=normalizedInput.year||0,months=normalizedInput.month||0,weeks=normalizedInput.week||0,days=normalizedInput.day||0,hours=normalizedInput.hour||0,minutes=normalizedInput.minute||0,seconds=normalizedInput.second||0,milliseconds=normalizedInput.millisecond||0;this._milliseconds=+milliseconds+1e3*seconds+6e4*minutes+36e5*hours,this._days=+days+7*weeks,this._months=+months+12*years,this._data={},this._bubble()}function extend(a,b){for(var i in b)b.hasOwnProperty(i)&&(a[i]=b[i]);return b.hasOwnProperty("toString")&&(a.toString=b.toString),b.hasOwnProperty("valueOf")&&(a.valueOf=b.valueOf),a}function cloneMoment(m){var i,result={};for(i in m)m.hasOwnProperty(i)&&momentProperties.hasOwnProperty(i)&&(result[i]=m[i]);return result}function absRound(number){return 0>number?Math.ceil(number):Math.floor(number)}function leftZeroFill(number,targetLength,forceSign){for(var output=""+Math.abs(number),sign=number>=0;output.length<targetLength;)output="0"+output;return(sign?forceSign?"+":"":"-")+output}function addOrSubtractDurationFromMoment(mom,duration,isAdding,ignoreUpdateOffset){var minutes,hours,milliseconds=duration._milliseconds,days=duration._days,months=duration._months;milliseconds&&mom._d.setTime(+mom._d+milliseconds*isAdding),(days||months)&&(minutes=mom.minute(),hours=mom.hour()),days&&mom.date(mom.date()+days*isAdding),months&&mom.month(mom.month()+months*isAdding),milliseconds&&!ignoreUpdateOffset&&moment.updateOffset(mom),(days||months)&&(mom.minute(minutes),mom.hour(hours))}function isArray(input){return"[object Array]"===Object.prototype.toString.call(input)}function isDate(input){return"[object Date]"===Object.prototype.toString.call(input)||input instanceof Date}function compareArrays(array1,array2,dontConvert){var i,len=Math.min(array1.length,array2.length),lengthDiff=Math.abs(array1.length-array2.length),diffs=0;for(i=0;len>i;i++)(dontConvert&&array1[i]!==array2[i]||!dontConvert&&toInt(array1[i])!==toInt(array2[i]))&&diffs++;return diffs+lengthDiff}function normalizeUnits(units){if(units){var lowered=units.toLowerCase().replace(/(.)s$/,"$1");units=unitAliases[units]||camelFunctions[lowered]||lowered}return units}function normalizeObjectUnits(inputObject){var normalizedProp,prop,normalizedInput={};for(prop in inputObject)inputObject.hasOwnProperty(prop)&&(normalizedProp=normalizeUnits(prop),normalizedProp&&(normalizedInput[normalizedProp]=inputObject[prop]));return normalizedInput}function makeList(field){var count,setter;if(0===field.indexOf("week"))count=7,setter="day";else{if(0!==field.indexOf("month"))return;count=12,setter="month"}moment[field]=function(format,index){var i,getter,method=moment.fn._lang[field],results=[];if("number"==typeof format&&(index=format,format=undefined),getter=function(i){var m=moment().utc().set(setter,i);return method.call(moment.fn._lang,m,format||"")},null!=index)return getter(index);for(i=0;count>i;i++)results.push(getter(i));return results}}function toInt(argumentForCoercion){var coercedNumber=+argumentForCoercion,value=0;return 0!==coercedNumber&&isFinite(coercedNumber)&&(value=coercedNumber>=0?Math.floor(coercedNumber):Math.ceil(coercedNumber)),value}function daysInMonth(year,month){return new Date(Date.UTC(year,month+1,0)).getUTCDate()}function daysInYear(year){return isLeapYear(year)?366:365}function isLeapYear(year){return year%4===0&&year%100!==0||year%400===0}function checkOverflow(m){var overflow;m._a&&-2===m._pf.overflow&&(overflow=m._a[MONTH]<0||m._a[MONTH]>11?MONTH:m._a[DATE]<1||m._a[DATE]>daysInMonth(m._a[YEAR],m._a[MONTH])?DATE:m._a[HOUR]<0||m._a[HOUR]>23?HOUR:m._a[MINUTE]<0||m._a[MINUTE]>59?MINUTE:m._a[SECOND]<0||m._a[SECOND]>59?SECOND:m._a[MILLISECOND]<0||m._a[MILLISECOND]>999?MILLISECOND:-1,m._pf._overflowDayOfYear&&(YEAR>overflow||overflow>DATE)&&(overflow=DATE),m._pf.overflow=overflow)}function isValid(m){return null==m._isValid&&(m._isValid=!isNaN(m._d.getTime())&&m._pf.overflow<0&&!m._pf.empty&&!m._pf.invalidMonth&&!m._pf.nullInput&&!m._pf.invalidFormat&&!m._pf.userInvalidated,m._strict&&(m._isValid=m._isValid&&0===m._pf.charsLeftOver&&0===m._pf.unusedTokens.length)),m._isValid}function normalizeLanguage(key){return key?key.toLowerCase().replace("_","-"):key}function makeAs(input,model){return model._isUTC?moment(input).zone(model._offset||0):moment(input).local()}function loadLang(key,values){return values.abbr=key,languages[key]||(languages[key]=new Language),languages[key].set(values),languages[key]}function unloadLang(key){delete languages[key]}function getLangDefinition(key){var j,lang,next,split,i=0,get=function(k){if(!languages[k]&&hasModule)try{require("./lang/"+k)}catch(e){}return languages[k]};if(!key)return moment.fn._lang;if(!isArray(key)){if(lang=get(key))return lang;key=[key]}for(;i<key.length;){for(split=normalizeLanguage(key[i]).split("-"),j=split.length,next=normalizeLanguage(key[i+1]),next=next?next.split("-"):null;j>0;){if(lang=get(split.slice(0,j).join("-")))return lang;if(next&&next.length>=j&&compareArrays(split,next,!0)>=j-1)break;j--}i++}return moment.fn._lang}function removeFormattingTokens(input){return input.match(/\[[\s\S]/)?input.replace(/^\[|\]$/g,""):input.replace(/\\/g,"")}function makeFormatFunction(format){var i,length,array=format.match(formattingTokens);for(i=0,length=array.length;length>i;i++)array[i]=formatTokenFunctions[array[i]]?formatTokenFunctions[array[i]]:removeFormattingTokens(array[i]);return function(mom){var output="";for(i=0;length>i;i++)output+=array[i]instanceof Function?array[i].call(mom,format):array[i];return output}}function formatMoment(m,format){return m.isValid()?(format=expandFormat(format,m.lang()),formatFunctions[format]||(formatFunctions[format]=makeFormatFunction(format)),formatFunctions[format](m)):m.lang().invalidDate()}function expandFormat(format,lang){function replaceLongDateFormatTokens(input){return lang.longDateFormat(input)||input}var i=5;for(localFormattingTokens.lastIndex=0;i>=0&&localFormattingTokens.test(format);)format=format.replace(localFormattingTokens,replaceLongDateFormatTokens),localFormattingTokens.lastIndex=0,i-=1;return format}function getParseRegexForToken(token,config){var a,strict=config._strict;switch(token){case"DDDD":return parseTokenThreeDigits;case"YYYY":case"GGGG":case"gggg":return strict?parseTokenFourDigits:parseTokenOneToFourDigits;case"Y":case"G":case"g":return parseTokenSignedNumber;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return strict?parseTokenSixDigits:parseTokenOneToSixDigits;case"S":if(strict)return parseTokenOneDigit;case"SS":if(strict)return parseTokenTwoDigits;case"SSS":if(strict)return parseTokenThreeDigits;case"DDD":return parseTokenOneToThreeDigits;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return parseTokenWord;case"a":case"A":return getLangDefinition(config._l)._meridiemParse;case"X":return parseTokenTimestampMs;case"Z":case"ZZ":return parseTokenTimezone;case"T":return parseTokenT;case"SSSS":return parseTokenDigits;
case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return strict?parseTokenTwoDigits:parseTokenOneOrTwoDigits;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return parseTokenOneOrTwoDigits;default:return a=new RegExp(regexpEscape(unescapeFormat(token.replace("\\","")),"i"))}}function timezoneMinutesFromString(string){string=string||"";var possibleTzMatches=string.match(parseTokenTimezone)||[],tzChunk=possibleTzMatches[possibleTzMatches.length-1]||[],parts=(tzChunk+"").match(parseTimezoneChunker)||["-",0,0],minutes=+(60*parts[1])+toInt(parts[2]);return"+"===parts[0]?-minutes:minutes}function addTimeToArrayFromToken(token,input,config){var a,datePartArray=config._a;switch(token){case"M":case"MM":null!=input&&(datePartArray[MONTH]=toInt(input)-1);break;case"MMM":case"MMMM":a=getLangDefinition(config._l).monthsParse(input),null!=a?datePartArray[MONTH]=a:config._pf.invalidMonth=input;break;case"D":case"DD":null!=input&&(datePartArray[DATE]=toInt(input));break;case"DDD":case"DDDD":null!=input&&(config._dayOfYear=toInt(input));break;case"YY":datePartArray[YEAR]=toInt(input)+(toInt(input)>68?1900:2e3);break;case"YYYY":case"YYYYY":case"YYYYYY":datePartArray[YEAR]=toInt(input);break;case"a":case"A":config._isPm=getLangDefinition(config._l).isPM(input);break;case"H":case"HH":case"h":case"hh":datePartArray[HOUR]=toInt(input);break;case"m":case"mm":datePartArray[MINUTE]=toInt(input);break;case"s":case"ss":datePartArray[SECOND]=toInt(input);break;case"S":case"SS":case"SSS":case"SSSS":datePartArray[MILLISECOND]=toInt(1e3*("0."+input));break;case"X":config._d=new Date(1e3*parseFloat(input));break;case"Z":case"ZZ":config._useUTC=!0,config._tzm=timezoneMinutesFromString(input);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":token=token.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":token=token.substr(0,2),input&&(config._w=config._w||{},config._w[token]=input)}}function dateFromConfig(config){var i,date,currentDate,yearToUse,fixYear,w,temp,lang,weekday,week,input=[];if(!config._d){for(currentDate=currentDateArray(config),config._w&&null==config._a[DATE]&&null==config._a[MONTH]&&(fixYear=function(val){var int_val=parseInt(val,10);return val?val.length<3?int_val>68?1900+int_val:2e3+int_val:int_val:null==config._a[YEAR]?moment().weekYear():config._a[YEAR]},w=config._w,null!=w.GG||null!=w.W||null!=w.E?temp=dayOfYearFromWeeks(fixYear(w.GG),w.W||1,w.E,4,1):(lang=getLangDefinition(config._l),weekday=null!=w.d?parseWeekday(w.d,lang):null!=w.e?parseInt(w.e,10)+lang._week.dow:0,week=parseInt(w.w,10)||1,null!=w.d&&weekday<lang._week.dow&&week++,temp=dayOfYearFromWeeks(fixYear(w.gg),week,weekday,lang._week.doy,lang._week.dow)),config._a[YEAR]=temp.year,config._dayOfYear=temp.dayOfYear),config._dayOfYear&&(yearToUse=null==config._a[YEAR]?currentDate[YEAR]:config._a[YEAR],config._dayOfYear>daysInYear(yearToUse)&&(config._pf._overflowDayOfYear=!0),date=makeUTCDate(yearToUse,0,config._dayOfYear),config._a[MONTH]=date.getUTCMonth(),config._a[DATE]=date.getUTCDate()),i=0;3>i&&null==config._a[i];++i)config._a[i]=input[i]=currentDate[i];for(;7>i;i++)config._a[i]=input[i]=null==config._a[i]?2===i?1:0:config._a[i];input[HOUR]+=toInt((config._tzm||0)/60),input[MINUTE]+=toInt((config._tzm||0)%60),config._d=(config._useUTC?makeUTCDate:makeDate).apply(null,input)}}function dateFromObject(config){var normalizedInput;config._d||(normalizedInput=normalizeObjectUnits(config._i),config._a=[normalizedInput.year,normalizedInput.month,normalizedInput.day,normalizedInput.hour,normalizedInput.minute,normalizedInput.second,normalizedInput.millisecond],dateFromConfig(config))}function currentDateArray(config){var now=new Date;return config._useUTC?[now.getUTCFullYear(),now.getUTCMonth(),now.getUTCDate()]:[now.getFullYear(),now.getMonth(),now.getDate()]}function makeDateFromStringAndFormat(config){config._a=[],config._pf.empty=!0;var i,parsedInput,tokens,token,skipped,lang=getLangDefinition(config._l),string=""+config._i,stringLength=string.length,totalParsedInputLength=0;for(tokens=expandFormat(config._f,lang).match(formattingTokens)||[],i=0;i<tokens.length;i++)token=tokens[i],parsedInput=(string.match(getParseRegexForToken(token,config))||[])[0],parsedInput&&(skipped=string.substr(0,string.indexOf(parsedInput)),skipped.length>0&&config._pf.unusedInput.push(skipped),string=string.slice(string.indexOf(parsedInput)+parsedInput.length),totalParsedInputLength+=parsedInput.length),formatTokenFunctions[token]?(parsedInput?config._pf.empty=!1:config._pf.unusedTokens.push(token),addTimeToArrayFromToken(token,parsedInput,config)):config._strict&&!parsedInput&&config._pf.unusedTokens.push(token);config._pf.charsLeftOver=stringLength-totalParsedInputLength,string.length>0&&config._pf.unusedInput.push(string),config._isPm&&config._a[HOUR]<12&&(config._a[HOUR]+=12),config._isPm===!1&&12===config._a[HOUR]&&(config._a[HOUR]=0),dateFromConfig(config),checkOverflow(config)}function unescapeFormat(s){return s.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(matched,p1,p2,p3,p4){return p1||p2||p3||p4})}function regexpEscape(s){return s.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function makeDateFromStringAndArray(config){var tempConfig,bestMoment,scoreToBeat,i,currentScore;if(0===config._f.length)return config._pf.invalidFormat=!0,void(config._d=new Date(0/0));for(i=0;i<config._f.length;i++)currentScore=0,tempConfig=extend({},config),tempConfig._pf=defaultParsingFlags(),tempConfig._f=config._f[i],makeDateFromStringAndFormat(tempConfig),isValid(tempConfig)&&(currentScore+=tempConfig._pf.charsLeftOver,currentScore+=10*tempConfig._pf.unusedTokens.length,tempConfig._pf.score=currentScore,(null==scoreToBeat||scoreToBeat>currentScore)&&(scoreToBeat=currentScore,bestMoment=tempConfig));extend(config,bestMoment||tempConfig)}function makeDateFromString(config){var i,l,string=config._i,match=isoRegex.exec(string);if(match){for(config._pf.iso=!0,i=0,l=isoDates.length;l>i;i++)if(isoDates[i][1].exec(string)){config._f=isoDates[i][0]+(match[6]||" ");break}for(i=0,l=isoTimes.length;l>i;i++)if(isoTimes[i][1].exec(string)){config._f+=isoTimes[i][0];break}string.match(parseTokenTimezone)&&(config._f+="Z"),makeDateFromStringAndFormat(config)}else config._d=new Date(string)}function makeDateFromInput(config){var input=config._i,matched=aspNetJsonRegex.exec(input);input===undefined?config._d=new Date:matched?config._d=new Date(+matched[1]):"string"==typeof input?makeDateFromString(config):isArray(input)?(config._a=input.slice(0),dateFromConfig(config)):isDate(input)?config._d=new Date(+input):"object"==typeof input?dateFromObject(config):config._d=new Date(input)}function makeDate(y,m,d,h,M,s,ms){var date=new Date(y,m,d,h,M,s,ms);return 1970>y&&date.setFullYear(y),date}function makeUTCDate(y){var date=new Date(Date.UTC.apply(null,arguments));return 1970>y&&date.setUTCFullYear(y),date}function parseWeekday(input,language){if("string"==typeof input)if(isNaN(input)){if(input=language.weekdaysParse(input),"number"!=typeof input)return null}else input=parseInt(input,10);return input}function substituteTimeAgo(string,number,withoutSuffix,isFuture,lang){return lang.relativeTime(number||1,!!withoutSuffix,string,isFuture)}function relativeTime(milliseconds,withoutSuffix,lang){var seconds=round(Math.abs(milliseconds)/1e3),minutes=round(seconds/60),hours=round(minutes/60),days=round(hours/24),years=round(days/365),args=45>seconds&&["s",seconds]||1===minutes&&["m"]||45>minutes&&["mm",minutes]||1===hours&&["h"]||22>hours&&["hh",hours]||1===days&&["d"]||25>=days&&["dd",days]||45>=days&&["M"]||345>days&&["MM",round(days/30)]||1===years&&["y"]||["yy",years];return args[2]=withoutSuffix,args[3]=milliseconds>0,args[4]=lang,substituteTimeAgo.apply({},args)}function weekOfYear(mom,firstDayOfWeek,firstDayOfWeekOfYear){var adjustedMoment,end=firstDayOfWeekOfYear-firstDayOfWeek,daysToDayOfWeek=firstDayOfWeekOfYear-mom.day();return daysToDayOfWeek>end&&(daysToDayOfWeek-=7),end-7>daysToDayOfWeek&&(daysToDayOfWeek+=7),adjustedMoment=moment(mom).add("d",daysToDayOfWeek),{week:Math.ceil(adjustedMoment.dayOfYear()/7),year:adjustedMoment.year()}}function dayOfYearFromWeeks(year,week,weekday,firstDayOfWeekOfYear,firstDayOfWeek){var daysToAdd,dayOfYear,d=makeUTCDate(year,0,1).getUTCDay();return weekday=null!=weekday?weekday:firstDayOfWeek,daysToAdd=firstDayOfWeek-d+(d>firstDayOfWeekOfYear?7:0)-(firstDayOfWeek>d?7:0),dayOfYear=7*(week-1)+(weekday-firstDayOfWeek)+daysToAdd+1,{year:dayOfYear>0?year:year-1,dayOfYear:dayOfYear>0?dayOfYear:daysInYear(year-1)+dayOfYear}}function makeMoment(config){var input=config._i,format=config._f;return null===input?moment.invalid({nullInput:!0}):("string"==typeof input&&(config._i=input=getLangDefinition().preparse(input)),moment.isMoment(input)?(config=cloneMoment(input),config._d=new Date(+input._d)):format?isArray(format)?makeDateFromStringAndArray(config):makeDateFromStringAndFormat(config):makeDateFromInput(config),new Moment(config))}function makeGetterAndSetter(name,key){moment.fn[name]=moment.fn[name+"s"]=function(input){var utc=this._isUTC?"UTC":"";return null!=input?(this._d["set"+utc+key](input),moment.updateOffset(this),this):this._d["get"+utc+key]()}}function makeDurationGetter(name){moment.duration.fn[name]=function(){return this._data[name]}}function makeDurationAsGetter(name,factor){moment.duration.fn["as"+name]=function(){return+this/factor}}function makeGlobal(deprecate){var warned=!1,local_moment=moment;"undefined"==typeof ender&&(deprecate?(global.moment=function(){return!warned&&console&&console.warn&&(warned=!0,console.warn("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.")),local_moment.apply(null,arguments)},extend(global.moment,local_moment)):global.moment=moment)}for(var moment,i,VERSION="2.5.1",global=this,round=Math.round,YEAR=0,MONTH=1,DATE=2,HOUR=3,MINUTE=4,SECOND=5,MILLISECOND=6,languages={},momentProperties={_isAMomentObject:null,_i:null,_f:null,_l:null,_strict:null,_isUTC:null,_offset:null,_pf:null,_lang:null},hasModule="undefined"!=typeof module&&module.exports&&"undefined"!=typeof require,aspNetJsonRegex=/^\/?Date\((\-?\d+)/i,aspNetTimeSpanJsonRegex=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,isoDurationRegex=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,formattingTokens=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,localFormattingTokens=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,parseTokenOneOrTwoDigits=/\d\d?/,parseTokenOneToThreeDigits=/\d{1,3}/,parseTokenOneToFourDigits=/\d{1,4}/,parseTokenOneToSixDigits=/[+\-]?\d{1,6}/,parseTokenDigits=/\d+/,parseTokenWord=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,parseTokenTimezone=/Z|[\+\-]\d\d:?\d\d/gi,parseTokenT=/T/i,parseTokenTimestampMs=/[\+\-]?\d+(\.\d{1,3})?/,parseTokenOneDigit=/\d/,parseTokenTwoDigits=/\d\d/,parseTokenThreeDigits=/\d{3}/,parseTokenFourDigits=/\d{4}/,parseTokenSixDigits=/[+-]?\d{6}/,parseTokenSignedNumber=/[+-]?\d+/,isoRegex=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,isoFormat="YYYY-MM-DDTHH:mm:ssZ",isoDates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],isoTimes=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],parseTimezoneChunker=/([\+\-]|\d\d)/gi,proxyGettersAndSetters="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),unitMillisecondFactors={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},unitAliases={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},camelFunctions={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},formatFunctions={},ordinalizeTokens="DDD w W M D d".split(" "),paddedTokens="M D H h m s w W".split(" "),formatTokenFunctions={M:function(){return this.month()+1},MMM:function(format){return this.lang().monthsShort(this,format)},MMMM:function(format){return this.lang().months(this,format)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(format){return this.lang().weekdaysMin(this,format)},ddd:function(format){return this.lang().weekdaysShort(this,format)},dddd:function(format){return this.lang().weekdays(this,format)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return leftZeroFill(this.year()%100,2)},YYYY:function(){return leftZeroFill(this.year(),4)},YYYYY:function(){return leftZeroFill(this.year(),5)},YYYYYY:function(){var y=this.year(),sign=y>=0?"+":"-";return sign+leftZeroFill(Math.abs(y),6)},gg:function(){return leftZeroFill(this.weekYear()%100,2)},gggg:function(){return leftZeroFill(this.weekYear(),4)},ggggg:function(){return leftZeroFill(this.weekYear(),5)},GG:function(){return leftZeroFill(this.isoWeekYear()%100,2)},GGGG:function(){return leftZeroFill(this.isoWeekYear(),4)},GGGGG:function(){return leftZeroFill(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return toInt(this.milliseconds()/100)},SS:function(){return leftZeroFill(toInt(this.milliseconds()/10),2)},SSS:function(){return leftZeroFill(this.milliseconds(),3)},SSSS:function(){return leftZeroFill(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+leftZeroFill(toInt(a/60),2)+":"+leftZeroFill(toInt(a)%60,2)},ZZ:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+leftZeroFill(toInt(a/60),2)+leftZeroFill(toInt(a)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},lists=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];ordinalizeTokens.length;)i=ordinalizeTokens.pop(),formatTokenFunctions[i+"o"]=ordinalizeToken(formatTokenFunctions[i],i);for(;paddedTokens.length;)i=paddedTokens.pop(),formatTokenFunctions[i+i]=padToken(formatTokenFunctions[i],2);for(formatTokenFunctions.DDDD=padToken(formatTokenFunctions.DDD,3),extend(Language.prototype,{set:function(config){var prop,i;for(i in config)prop=config[i],"function"==typeof prop?this[i]=prop:this["_"+i]=prop},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(m){return this._months[m.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(m){return this._monthsShort[m.month()]},monthsParse:function(monthName){var i,mom,regex;for(this._monthsParse||(this._monthsParse=[]),i=0;12>i;i++)if(this._monthsParse[i]||(mom=moment.utc([2e3,i]),regex="^"+this.months(mom,"")+"|^"+this.monthsShort(mom,""),this._monthsParse[i]=new RegExp(regex.replace(".",""),"i")),this._monthsParse[i].test(monthName))return i},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(m){return this._weekdays[m.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(m){return this._weekdaysShort[m.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(m){return this._weekdaysMin[m.day()]},weekdaysParse:function(weekdayName){var i,mom,regex;for(this._weekdaysParse||(this._weekdaysParse=[]),i=0;7>i;i++)if(this._weekdaysParse[i]||(mom=moment([2e3,1]).day(i),regex="^"+this.weekdays(mom,"")+"|^"+this.weekdaysShort(mom,"")+"|^"+this.weekdaysMin(mom,""),this._weekdaysParse[i]=new RegExp(regex.replace(".",""),"i")),this._weekdaysParse[i].test(weekdayName))return i},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(key){var output=this._longDateFormat[key];return!output&&this._longDateFormat[key.toUpperCase()]&&(output=this._longDateFormat[key.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(val){return val.slice(1)}),this._longDateFormat[key]=output),output},isPM:function(input){return"p"===(input+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(hours,minutes,isLower){return hours>11?isLower?"pm":"PM":isLower?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(key,mom){var output=this._calendar[key];return"function"==typeof output?output.apply(mom):output},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(number,withoutSuffix,string,isFuture){var output=this._relativeTime[string];return"function"==typeof output?output(number,withoutSuffix,string,isFuture):output.replace(/%d/i,number)},pastFuture:function(diff,output){var format=this._relativeTime[diff>0?"future":"past"];return"function"==typeof format?format(output):format.replace(/%s/i,output)},ordinal:function(number){return this._ordinal.replace("%d",number)},_ordinal:"%d",preparse:function(string){return string},postformat:function(string){return string},week:function(mom){return weekOfYear(mom,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),moment=function(input,format,lang,strict){var c;return"boolean"==typeof lang&&(strict=lang,lang=undefined),c={},c._isAMomentObject=!0,c._i=input,c._f=format,c._l=lang,c._strict=strict,c._isUTC=!1,c._pf=defaultParsingFlags(),makeMoment(c)},moment.utc=function(input,format,lang,strict){var c;return"boolean"==typeof lang&&(strict=lang,lang=undefined),c={},c._isAMomentObject=!0,c._useUTC=!0,c._isUTC=!0,c._l=lang,c._i=input,c._f=format,c._strict=strict,c._pf=defaultParsingFlags(),makeMoment(c).utc()},moment.unix=function(input){return moment(1e3*input)},moment.duration=function(input,key){var sign,ret,parseIso,duration=input,match=null;return moment.isDuration(input)?duration={ms:input._milliseconds,d:input._days,M:input._months}:"number"==typeof input?(duration={},key?duration[key]=input:duration.milliseconds=input):(match=aspNetTimeSpanJsonRegex.exec(input))?(sign="-"===match[1]?-1:1,duration={y:0,d:toInt(match[DATE])*sign,h:toInt(match[HOUR])*sign,m:toInt(match[MINUTE])*sign,s:toInt(match[SECOND])*sign,ms:toInt(match[MILLISECOND])*sign}):(match=isoDurationRegex.exec(input))&&(sign="-"===match[1]?-1:1,parseIso=function(inp){var res=inp&&parseFloat(inp.replace(",","."));return(isNaN(res)?0:res)*sign},duration={y:parseIso(match[2]),M:parseIso(match[3]),d:parseIso(match[4]),h:parseIso(match[5]),m:parseIso(match[6]),s:parseIso(match[7]),w:parseIso(match[8])}),ret=new Duration(duration),moment.isDuration(input)&&input.hasOwnProperty("_lang")&&(ret._lang=input._lang),ret},moment.version=VERSION,moment.defaultFormat=isoFormat,moment.updateOffset=function(){},moment.lang=function(key,values){var r;return key?(values?loadLang(normalizeLanguage(key),values):null===values?(unloadLang(key),key="en"):languages[key]||getLangDefinition(key),r=moment.duration.fn._lang=moment.fn._lang=getLangDefinition(key),r._abbr):moment.fn._lang._abbr},moment.langData=function(key){return key&&key._lang&&key._lang._abbr&&(key=key._lang._abbr),getLangDefinition(key)},moment.isMoment=function(obj){return obj instanceof Moment||null!=obj&&obj.hasOwnProperty("_isAMomentObject")},moment.isDuration=function(obj){return obj instanceof Duration},i=lists.length-1;i>=0;--i)makeList(lists[i]);for(moment.normalizeUnits=function(units){return normalizeUnits(units)},moment.invalid=function(flags){var m=moment.utc(0/0);return null!=flags?extend(m._pf,flags):m._pf.userInvalidated=!0,m},moment.parseZone=function(input){return moment(input).parseZone()},extend(moment.fn=Moment.prototype,{clone:function(){return moment(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var m=moment(this).utc();return 0<m.year()&&m.year()<=9999?formatMoment(m,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):formatMoment(m,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var m=this;return[m.year(),m.month(),m.date(),m.hours(),m.minutes(),m.seconds(),m.milliseconds()]},isValid:function(){return isValid(this)},isDSTShifted:function(){return this._a?this.isValid()&&compareArrays(this._a,(this._isUTC?moment.utc(this._a):moment(this._a)).toArray())>0:!1},parsingFlags:function(){return extend({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(inputString){var output=formatMoment(this,inputString||moment.defaultFormat);return this.lang().postformat(output)},add:function(input,val){var dur;return dur="string"==typeof input?moment.duration(+val,input):moment.duration(input,val),addOrSubtractDurationFromMoment(this,dur,1),this},subtract:function(input,val){var dur;return dur="string"==typeof input?moment.duration(+val,input):moment.duration(input,val),addOrSubtractDurationFromMoment(this,dur,-1),this},diff:function(input,units,asFloat){var diff,output,that=makeAs(input,this),zoneDiff=6e4*(this.zone()-that.zone());return units=normalizeUnits(units),"year"===units||"month"===units?(diff=432e5*(this.daysInMonth()+that.daysInMonth()),output=12*(this.year()-that.year())+(this.month()-that.month()),output+=(this-moment(this).startOf("month")-(that-moment(that).startOf("month")))/diff,output-=6e4*(this.zone()-moment(this).startOf("month").zone()-(that.zone()-moment(that).startOf("month").zone()))/diff,"year"===units&&(output/=12)):(diff=this-that,output="second"===units?diff/1e3:"minute"===units?diff/6e4:"hour"===units?diff/36e5:"day"===units?(diff-zoneDiff)/864e5:"week"===units?(diff-zoneDiff)/6048e5:diff),asFloat?output:absRound(output)},from:function(time,withoutSuffix){return moment.duration(this.diff(time)).lang(this.lang()._abbr).humanize(!withoutSuffix)},fromNow:function(withoutSuffix){return this.from(moment(),withoutSuffix)},calendar:function(){var sod=makeAs(moment(),this).startOf("day"),diff=this.diff(sod,"days",!0),format=-6>diff?"sameElse":-1>diff?"lastWeek":0>diff?"lastDay":1>diff?"sameDay":2>diff?"nextDay":7>diff?"nextWeek":"sameElse";return this.format(this.lang().calendar(format,this))},isLeapYear:function(){return isLeapYear(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(input){var day=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=input?(input=parseWeekday(input,this.lang()),this.add({d:input-day})):day},month:function(input){var dayOfMonth,utc=this._isUTC?"UTC":"";return null!=input?"string"==typeof input&&(input=this.lang().monthsParse(input),"number"!=typeof input)?this:(dayOfMonth=this.date(),this.date(1),this._d["set"+utc+"Month"](input),this.date(Math.min(dayOfMonth,this.daysInMonth())),moment.updateOffset(this),this):this._d["get"+utc+"Month"]()},startOf:function(units){switch(units=normalizeUnits(units)){case"year":this.month(0);case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===units?this.weekday(0):"isoWeek"===units&&this.isoWeekday(1),this},endOf:function(units){return units=normalizeUnits(units),this.startOf(units).add("isoWeek"===units?"week":units,1).subtract("ms",1)},isAfter:function(input,units){return units="undefined"!=typeof units?units:"millisecond",+this.clone().startOf(units)>+moment(input).startOf(units)},isBefore:function(input,units){return units="undefined"!=typeof units?units:"millisecond",+this.clone().startOf(units)<+moment(input).startOf(units)},isSame:function(input,units){return units=units||"ms",+this.clone().startOf(units)===+makeAs(input,this).startOf(units)},min:function(other){return other=moment.apply(null,arguments),this>other?this:other},max:function(other){return other=moment.apply(null,arguments),other>this?this:other},zone:function(input){var offset=this._offset||0;return null==input?this._isUTC?offset:this._d.getTimezoneOffset():("string"==typeof input&&(input=timezoneMinutesFromString(input)),Math.abs(input)<16&&(input=60*input),this._offset=input,this._isUTC=!0,offset!==input&&addOrSubtractDurationFromMoment(this,moment.duration(offset-input,"m"),1,!0),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(input){return input=input?moment(input).zone():0,(this.zone()-input)%60===0},daysInMonth:function(){return daysInMonth(this.year(),this.month())},dayOfYear:function(input){var dayOfYear=round((moment(this).startOf("day")-moment(this).startOf("year"))/864e5)+1;return null==input?dayOfYear:this.add("d",input-dayOfYear)},quarter:function(){return Math.ceil((this.month()+1)/3)},weekYear:function(input){var year=weekOfYear(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==input?year:this.add("y",input-year)},isoWeekYear:function(input){var year=weekOfYear(this,1,4).year;return null==input?year:this.add("y",input-year)},week:function(input){var week=this.lang().week(this);return null==input?week:this.add("d",7*(input-week))},isoWeek:function(input){var week=weekOfYear(this,1,4).week;return null==input?week:this.add("d",7*(input-week))},weekday:function(input){var weekday=(this.day()+7-this.lang()._week.dow)%7;return null==input?weekday:this.add("d",input-weekday)},isoWeekday:function(input){return null==input?this.day()||7:this.day(this.day()%7?input:input-7)},get:function(units){return units=normalizeUnits(units),this[units]()},set:function(units,value){return units=normalizeUnits(units),"function"==typeof this[units]&&this[units](value),this},lang:function(key){return key===undefined?this._lang:(this._lang=getLangDefinition(key),this)}}),i=0;i<proxyGettersAndSetters.length;i++)makeGetterAndSetter(proxyGettersAndSetters[i].toLowerCase().replace(/s$/,""),proxyGettersAndSetters[i]);makeGetterAndSetter("year","FullYear"),moment.fn.days=moment.fn.day,moment.fn.months=moment.fn.month,moment.fn.weeks=moment.fn.week,moment.fn.isoWeeks=moment.fn.isoWeek,moment.fn.toJSON=moment.fn.toISOString,extend(moment.duration.fn=Duration.prototype,{_bubble:function(){var seconds,minutes,hours,years,milliseconds=this._milliseconds,days=this._days,months=this._months,data=this._data;data.milliseconds=milliseconds%1e3,seconds=absRound(milliseconds/1e3),data.seconds=seconds%60,minutes=absRound(seconds/60),data.minutes=minutes%60,hours=absRound(minutes/60),data.hours=hours%24,days+=absRound(hours/24),data.days=days%30,months+=absRound(days/30),data.months=months%12,years=absRound(months/12),data.years=years},weeks:function(){return absRound(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*toInt(this._months/12)},humanize:function(withSuffix){var difference=+this,output=relativeTime(difference,!withSuffix,this.lang());return withSuffix&&(output=this.lang().pastFuture(difference,output)),this.lang().postformat(output)},add:function(input,val){var dur=moment.duration(input,val);return this._milliseconds+=dur._milliseconds,this._days+=dur._days,this._months+=dur._months,this._bubble(),this},subtract:function(input,val){var dur=moment.duration(input,val);return this._milliseconds-=dur._milliseconds,this._days-=dur._days,this._months-=dur._months,this._bubble(),this},get:function(units){return units=normalizeUnits(units),this[units.toLowerCase()+"s"]()},as:function(units){return units=normalizeUnits(units),this["as"+units.charAt(0).toUpperCase()+units.slice(1)+"s"]()},lang:moment.fn.lang,toIsoString:function(){var years=Math.abs(this.years()),months=Math.abs(this.months()),days=Math.abs(this.days()),hours=Math.abs(this.hours()),minutes=Math.abs(this.minutes()),seconds=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(years?years+"Y":"")+(months?months+"M":"")+(days?days+"D":"")+(hours||minutes||seconds?"T":"")+(hours?hours+"H":"")+(minutes?minutes+"M":"")+(seconds?seconds+"S":""):"P0D"}});for(i in unitMillisecondFactors)unitMillisecondFactors.hasOwnProperty(i)&&(makeDurationAsGetter(i,unitMillisecondFactors[i]),makeDurationGetter(i.toLowerCase()));makeDurationAsGetter("Weeks",6048e5),moment.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},moment.lang("en",{ordinal:function(number){var b=number%10,output=1===toInt(number%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return number+output}}),hasModule?(module.exports=moment,makeGlobal(!0)):"function"==typeof define&&define.amd?define("moment",["require","exports","module"],function(require,exports,module){return module.config&&module.config()&&module.config().noGlobal!==!0&&makeGlobal(module.config().noGlobal===undefined),moment}):makeGlobal()}.call(this),function($,undefined){function setDefaults(d){$.extend(!0,defaults,d)}function Calendar(element,options,eventSources){function render(inc){content?elementVisible()&&(calcSize(),_renderView(inc)):initialRender()}function initialRender(){tm=options.theme?"ui":"fc",element.addClass("fc"),element.addClass(options.isRTL?"fc-rtl":"fc-ltr"),options.theme&&element.addClass("ui-widget"),content=$("<div class='fc-content' style='position:relative'/>").prependTo(element),header=new Header(t,options),headerElement=header.render(),headerElement&&element.prepend(headerElement),changeView(options.defaultView),options.handleWindowResize&&$(window).resize(windowResize),bodyVisible()||lateRender()}function lateRender(){setTimeout(function(){!currentView.start&&bodyVisible()&&renderView()},0)}function destroy(){currentView&&(trigger("viewDestroy",currentView,currentView,currentView.element),currentView.triggerEventDestroy()),$(window).unbind("resize",windowResize),header.destroy(),content.remove(),element.removeClass("fc fc-rtl ui-widget")}function elementVisible(){return element.is(":visible")}function bodyVisible(){return $("body").is(":visible")}function changeView(newViewName){currentView&&newViewName==currentView.name||_changeView(newViewName)}function _changeView(newViewName){ignoreWindowResize++,currentView&&(trigger("viewDestroy",currentView,currentView,currentView.element),unselect(),currentView.triggerEventDestroy(),freezeContentHeight(),currentView.element.remove(),header.deactivateButton(currentView.name)),header.activateButton(newViewName),currentView=new fcViews[newViewName]($("<div class='fc-view fc-view-"+newViewName+"' style='position:relative'/>").appendTo(content),t),renderView(),unfreezeContentHeight(),ignoreWindowResize--}function renderView(inc){(!currentView.start||inc||date<currentView.start||date>=currentView.end)&&elementVisible()&&_renderView(inc)
}function _renderView(inc){ignoreWindowResize++,currentView.start&&(trigger("viewDestroy",currentView,currentView,currentView.element),unselect(),clearEvents()),freezeContentHeight(),currentView.render(date,inc||0),setSize(),unfreezeContentHeight(),(currentView.afterRender||noop)(),updateTitle(),updateTodayButton(),trigger("viewRender",currentView,currentView,currentView.element),currentView.trigger("viewDisplay",_element),ignoreWindowResize--,getAndRenderEvents()}function updateSize(){elementVisible()&&(unselect(),clearEvents(),calcSize(),setSize(),renderEvents())}function calcSize(){suggestedViewHeight=options.contentHeight?options.contentHeight:options.height?options.height-(headerElement?headerElement.height():0)-vsides(content):Math.round(content.width()/Math.max(options.aspectRatio,.5))}function setSize(){suggestedViewHeight===undefined&&calcSize(),ignoreWindowResize++,currentView.setHeight(suggestedViewHeight),currentView.setWidth(content.width()),ignoreWindowResize--,elementOuterWidth=element.outerWidth()}function windowResize(){if(!ignoreWindowResize)if(currentView.start){var uid=++resizeUID;setTimeout(function(){uid==resizeUID&&!ignoreWindowResize&&elementVisible()&&elementOuterWidth!=(elementOuterWidth=element.outerWidth())&&(ignoreWindowResize++,updateSize(),currentView.trigger("windowResize",_element),ignoreWindowResize--)},200)}else lateRender()}function refetchEvents(){clearEvents(),fetchAndRenderEvents()}function rerenderEvents(modifiedEventID){clearEvents(),renderEvents(modifiedEventID)}function renderEvents(modifiedEventID){elementVisible()&&(currentView.setEventData(events),currentView.renderEvents(events,modifiedEventID),currentView.trigger("eventAfterAllRender"))}function clearEvents(){currentView.triggerEventDestroy(),currentView.clearEvents(),currentView.clearEventData()}function getAndRenderEvents(){!options.lazyFetching||isFetchNeeded(currentView.visStart,currentView.visEnd)?fetchAndRenderEvents():renderEvents()}function fetchAndRenderEvents(){fetchEvents(currentView.visStart,currentView.visEnd)}function reportEvents(_events){events=_events,renderEvents()}function reportEventChange(eventID){rerenderEvents(eventID)}function updateTitle(){header.updateTitle(currentView.title)}function updateTodayButton(){var today=new Date;today>=currentView.start&&today<currentView.end?header.disableButton("today"):header.enableButton("today")}function select(start,end,allDay){currentView.select(start,end,allDay===undefined?!0:allDay)}function unselect(){currentView&&currentView.unselect()}function prev(){renderView(-1)}function next(){renderView(1)}function prevYear(){addYears(date,-1),renderView()}function nextYear(){addYears(date,1),renderView()}function today(){date=new Date,renderView()}function gotoDate(year,month,dateOfMonth){year instanceof Date?date=cloneDate(year):setYMD(date,year,month,dateOfMonth),renderView()}function incrementDate(years,months,days){years!==undefined&&addYears(date,years),months!==undefined&&addMonths(date,months),days!==undefined&&addDays(date,days),renderView()}function getDate(){return cloneDate(date)}function freezeContentHeight(){content.css({width:"100%",height:content.height(),overflow:"hidden"})}function unfreezeContentHeight(){content.css({width:"",height:"",overflow:""})}function getView(){return currentView}function option(name,value){return value===undefined?options[name]:void(("height"==name||"contentHeight"==name||"aspectRatio"==name)&&(options[name]=value,updateSize()))}function trigger(name,thisObj){return options[name]?options[name].apply(thisObj||_element,Array.prototype.slice.call(arguments,2)):void 0}var t=this;t.options=options,t.render=render,t.destroy=destroy,t.refetchEvents=refetchEvents,t.reportEvents=reportEvents,t.reportEventChange=reportEventChange,t.rerenderEvents=rerenderEvents,t.changeView=changeView,t.select=select,t.unselect=unselect,t.prev=prev,t.next=next,t.prevYear=prevYear,t.nextYear=nextYear,t.today=today,t.gotoDate=gotoDate,t.incrementDate=incrementDate,t.formatDate=function(format,date){return formatDate(format,date,options)},t.formatDates=function(format,date1,date2){return formatDates(format,date1,date2,options)},t.getDate=getDate,t.getView=getView,t.option=option,t.trigger=trigger,EventManager.call(t,options,eventSources);var header,headerElement,content,tm,currentView,elementOuterWidth,suggestedViewHeight,_dragElement,isFetchNeeded=t.isFetchNeeded,fetchEvents=t.fetchEvents,_element=element[0],resizeUID=0,ignoreWindowResize=0,date=new Date,events=[];setYMD(date,options.year,options.month,options.date),options.droppable&&$(document).bind("dragstart",function(ev,ui){var _e=ev.target,e=$(_e);if(!e.parents(".fc").length){var accept=options.dropAccept;($.isFunction(accept)?accept.call(_e,e):e.is(accept))&&(_dragElement=_e,currentView.dragStart(_dragElement,ev,ui))}}).bind("dragstop",function(ev,ui){_dragElement&&(currentView.dragStop(_dragElement,ev,ui),_dragElement=null)})}function Header(calendar,options){function render(){tm=options.theme?"ui":"fc";var sections=options.header;return sections?element=$("<table class='fc-header' style='width:100%'/>").append($("<tr/>").append(renderSection("left")).append(renderSection("center")).append(renderSection("right"))):void 0}function destroy(){element.remove()}function renderSection(position){var e=$("<td class='fc-header-"+position+"'/>"),buttonStr=options.header[position];return buttonStr&&$.each(buttonStr.split(" "),function(i){i>0&&e.append("<span class='fc-header-space'/>");var prevButton;$.each(this.split(","),function(j,buttonName){if("title"==buttonName)e.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),prevButton&&prevButton.addClass(tm+"-corner-right"),prevButton=null;else{var buttonClick;if(calendar[buttonName]?buttonClick=calendar[buttonName]:fcViews[buttonName]&&(buttonClick=function(){button.removeClass(tm+"-state-hover"),calendar.changeView(buttonName)}),buttonClick){var icon=options.theme?smartProperty(options.buttonIcons,buttonName):null,text=smartProperty(options.buttonText,buttonName),button=$("<span class='fc-button fc-button-"+buttonName+" "+tm+"-state-default'>"+(icon?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+icon+"'/></span>":text)+"</span>").click(function(){button.hasClass(tm+"-state-disabled")||buttonClick()}).mousedown(function(){button.not("."+tm+"-state-active").not("."+tm+"-state-disabled").addClass(tm+"-state-down")}).mouseup(function(){button.removeClass(tm+"-state-down")}).hover(function(){button.not("."+tm+"-state-active").not("."+tm+"-state-disabled").addClass(tm+"-state-hover")},function(){button.removeClass(tm+"-state-hover").removeClass(tm+"-state-down")}).appendTo(e);disableTextSelection(button),prevButton||button.addClass(tm+"-corner-left"),prevButton=button}}}),prevButton&&prevButton.addClass(tm+"-corner-right")}),e}function updateTitle(html){element.find("h2").html(html)}function activateButton(buttonName){element.find("span.fc-button-"+buttonName).addClass(tm+"-state-active")}function deactivateButton(buttonName){element.find("span.fc-button-"+buttonName).removeClass(tm+"-state-active")}function disableButton(buttonName){element.find("span.fc-button-"+buttonName).addClass(tm+"-state-disabled")}function enableButton(buttonName){element.find("span.fc-button-"+buttonName).removeClass(tm+"-state-disabled")}var t=this;t.render=render,t.destroy=destroy,t.updateTitle=updateTitle,t.activateButton=activateButton,t.deactivateButton=deactivateButton,t.disableButton=disableButton,t.enableButton=enableButton;var tm,element=$([])}function EventManager(options,_sources){function isFetchNeeded(start,end){return!rangeStart||rangeStart>start||end>rangeEnd}function fetchEvents(start,end){rangeStart=start,rangeEnd=end,cache=[];var fetchID=++currentFetchID,len=sources.length;pendingSourceCnt=len;for(var i=0;len>i;i++)fetchEventSource(sources[i],fetchID)}function fetchEventSource(source,fetchID){_fetchEventSource(source,function(events){if(fetchID==currentFetchID){if(events){options.eventDataTransform&&(events=$.map(events,options.eventDataTransform)),source.eventDataTransform&&(events=$.map(events,source.eventDataTransform));for(var i=0;i<events.length;i++)events[i].source=source,normalizeEvent(events[i]);cache=cache.concat(events)}pendingSourceCnt--,pendingSourceCnt||reportEvents(cache)}})}function _fetchEventSource(source,callback){var i,res,fetchers=fc.sourceFetchers;for(i=0;i<fetchers.length;i++){if(res=fetchers[i](source,rangeStart,rangeEnd,callback),res===!0)return;if("object"==typeof res)return void _fetchEventSource(res,callback)}var events=source.events;if(events)$.isFunction(events)?(pushLoading(),events(cloneDate(rangeStart),cloneDate(rangeEnd),function(events){callback(events),popLoading()})):$.isArray(events)?callback(events):callback();else{var url=source.url;if(url){var customData,success=source.success,error=source.error,complete=source.complete;customData=$.isFunction(source.data)?source.data():source.data;var data=$.extend({},customData||{}),startParam=firstDefined(source.startParam,options.startParam),endParam=firstDefined(source.endParam,options.endParam);startParam&&(data[startParam]=Math.round(+rangeStart/1e3)),endParam&&(data[endParam]=Math.round(+rangeEnd/1e3)),pushLoading(),$.ajax($.extend({},ajaxDefaults,source,{data:data,success:function(events){events=events||[];var res=applyAll(success,this,arguments);$.isArray(res)&&(events=res),callback(events)},error:function(){applyAll(error,this,arguments),callback()},complete:function(){applyAll(complete,this,arguments),popLoading()}}))}else callback()}}function addEventSource(source){source=_addEventSource(source),source&&(pendingSourceCnt++,fetchEventSource(source,currentFetchID))}function _addEventSource(source){return $.isFunction(source)||$.isArray(source)?source={events:source}:"string"==typeof source&&(source={url:source}),"object"==typeof source?(normalizeSource(source),sources.push(source),source):void 0}function removeEventSource(source){sources=$.grep(sources,function(src){return!isSourcesEqual(src,source)}),cache=$.grep(cache,function(e){return!isSourcesEqual(e.source,source)}),reportEvents(cache)}function updateEvent(event){var i,e,len=cache.length,defaultEventEnd=getView().defaultEventEnd,startDelta=event.start-event._start,endDelta=event.end?event.end-(event._end||defaultEventEnd(event)):0;for(i=0;len>i;i++)e=cache[i],e._id==event._id&&e!=event&&(e.start=new Date(+e.start+startDelta),e.end=event.end?new Date(e.end?+e.end+endDelta:+defaultEventEnd(e)+endDelta):null,e.title=event.title,e.url=event.url,e.allDay=event.allDay,e.className=event.className,e.editable=event.editable,e.color=event.color,e.backgroundColor=event.backgroundColor,e.borderColor=event.borderColor,e.textColor=event.textColor,normalizeEvent(e));normalizeEvent(event),reportEvents(cache)}function renderEvent(event,stick){normalizeEvent(event),event.source||(stick&&(stickySource.events.push(event),event.source=stickySource),cache.push(event)),reportEvents(cache)}function removeEvents(filter){if(filter){if(!$.isFunction(filter)){var id=filter+"";filter=function(e){return e._id==id}}cache=$.grep(cache,filter,!0);for(var i=0;i<sources.length;i++)$.isArray(sources[i].events)&&(sources[i].events=$.grep(sources[i].events,filter,!0))}else{cache=[];for(var i=0;i<sources.length;i++)$.isArray(sources[i].events)&&(sources[i].events=[])}reportEvents(cache)}function clientEvents(filter){return $.isFunction(filter)?$.grep(cache,filter):filter?(filter+="",$.grep(cache,function(e){return e._id==filter})):cache}function pushLoading(){loadingLevel++||trigger("loading",null,!0,getView())}function popLoading(){--loadingLevel||trigger("loading",null,!1,getView())}function normalizeEvent(event){var source=event.source||{},ignoreTimezone=firstDefined(source.ignoreTimezone,options.ignoreTimezone);event._id=event._id||(event.id===undefined?"_fc"+eventGUID++:event.id+""),event.date&&(event.start||(event.start=event.date),delete event.date),event._start=cloneDate(event.start=parseDate(event.start,ignoreTimezone)),event.end=parseDate(event.end,ignoreTimezone),event.end&&event.end<=event.start&&(event.end=null),event._end=event.end?cloneDate(event.end):null,event.allDay===undefined&&(event.allDay=firstDefined(source.allDayDefault,options.allDayDefault)),event.className?"string"==typeof event.className&&(event.className=event.className.split(/\s+/)):event.className=[]}function normalizeSource(source){source.className?"string"==typeof source.className&&(source.className=source.className.split(/\s+/)):source.className=[];for(var normalizers=fc.sourceNormalizers,i=0;i<normalizers.length;i++)normalizers[i](source)}function isSourcesEqual(source1,source2){return source1&&source2&&getSourcePrimitive(source1)==getSourcePrimitive(source2)}function getSourcePrimitive(source){return("object"==typeof source?source.events||source.url:"")||source}var t=this;t.isFetchNeeded=isFetchNeeded,t.fetchEvents=fetchEvents,t.addEventSource=addEventSource,t.removeEventSource=removeEventSource,t.updateEvent=updateEvent,t.renderEvent=renderEvent,t.removeEvents=removeEvents,t.clientEvents=clientEvents,t.normalizeEvent=normalizeEvent;for(var rangeStart,rangeEnd,trigger=t.trigger,getView=t.getView,reportEvents=t.reportEvents,stickySource={events:[]},sources=[stickySource],currentFetchID=0,pendingSourceCnt=0,loadingLevel=0,cache=[],i=0;i<_sources.length;i++)_addEventSource(_sources[i])}function addYears(d,n,keepTime){return d.setFullYear(d.getFullYear()+n),keepTime||clearTime(d),d}function addMonths(d,n,keepTime){if(+d){var m=d.getMonth()+n,check=cloneDate(d);for(check.setDate(1),check.setMonth(m),d.setMonth(m),keepTime||clearTime(d);d.getMonth()!=check.getMonth();)d.setDate(d.getDate()+(check>d?1:-1))}return d}function addDays(d,n,keepTime){if(+d){var dd=d.getDate()+n,check=cloneDate(d);check.setHours(9),check.setDate(dd),d.setDate(dd),keepTime||clearTime(d),fixDate(d,check)}return d}function fixDate(d,check){if(+d)for(;d.getDate()!=check.getDate();)d.setTime(+d+(check>d?1:-1)*HOUR_MS)}function addMinutes(d,n){return d.setMinutes(d.getMinutes()+n),d}function clearTime(d){return d.setHours(0),d.setMinutes(0),d.setSeconds(0),d.setMilliseconds(0),d}function cloneDate(d,dontKeepTime){return dontKeepTime?clearTime(new Date(+d)):new Date(+d)}function zeroDate(){var d,i=0;do d=new Date(1970,i++,1);while(d.getHours());return d}function dayDiff(d1,d2){return Math.round((cloneDate(d1,!0)-cloneDate(d2,!0))/DAY_MS)}function setYMD(date,y,m,d){y!==undefined&&y!=date.getFullYear()&&(date.setDate(1),date.setMonth(0),date.setFullYear(y)),m!==undefined&&m!=date.getMonth()&&(date.setDate(1),date.setMonth(m)),d!==undefined&&date.setDate(d)}function parseDate(s,ignoreTimezone){return"object"==typeof s?s:"number"==typeof s?new Date(1e3*s):"string"==typeof s?s.match(/^\d+(\.\d+)?$/)?new Date(1e3*parseFloat(s)):(ignoreTimezone===undefined&&(ignoreTimezone=!0),parseISO8601(s,ignoreTimezone)||(s?new Date(s):null)):null}function parseISO8601(s,ignoreTimezone){var m=s.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!m)return null;var date=new Date(m[1],0,1);if(ignoreTimezone||!m[13]){var check=new Date(m[1],0,1,9,0);m[3]&&(date.setMonth(m[3]-1),check.setMonth(m[3]-1)),m[5]&&(date.setDate(m[5]),check.setDate(m[5])),fixDate(date,check),m[7]&&date.setHours(m[7]),m[8]&&date.setMinutes(m[8]),m[10]&&date.setSeconds(m[10]),m[12]&&date.setMilliseconds(1e3*Number("0."+m[12])),fixDate(date,check)}else if(date.setUTCFullYear(m[1],m[3]?m[3]-1:0,m[5]||1),date.setUTCHours(m[7]||0,m[8]||0,m[10]||0,m[12]?1e3*Number("0."+m[12]):0),m[14]){var offset=60*Number(m[16])+(m[18]?Number(m[18]):0);offset*="-"==m[15]?1:-1,date=new Date(+date+60*offset*1e3)}return date}function parseTime(s){if("number"==typeof s)return 60*s;if("object"==typeof s)return 60*s.getHours()+s.getMinutes();var m=s.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(m){var h=parseInt(m[1],10);return m[3]&&(h%=12,"p"==m[3].toLowerCase().charAt(0)&&(h+=12)),60*h+(m[2]?parseInt(m[2],10):0)}}function formatDate(date,format,options){return formatDates(date,null,format,options)}function formatDates(date1,date2,format,options){options=options||defaults;var i,c,i2,formatter,date=date1,otherDate=date2,len=format.length,res="";for(i=0;len>i;i++)if(c=format.charAt(i),"'"==c){for(i2=i+1;len>i2;i2++)if("'"==format.charAt(i2)){date&&(res+=i2==i+1?"'":format.substring(i+1,i2),i=i2);break}}else if("("==c){for(i2=i+1;len>i2;i2++)if(")"==format.charAt(i2)){var subres=formatDate(date,format.substring(i+1,i2),options);parseInt(subres.replace(/\D/,""),10)&&(res+=subres),i=i2;break}}else if("["==c){for(i2=i+1;len>i2;i2++)if("]"==format.charAt(i2)){var subformat=format.substring(i+1,i2),subres=formatDate(date,subformat,options);subres!=formatDate(otherDate,subformat,options)&&(res+=subres),i=i2;break}}else if("{"==c)date=date2,otherDate=date1;else if("}"==c)date=date1,otherDate=date2;else{for(i2=len;i2>i;i2--)if(formatter=dateFormatters[format.substring(i,i2)]){date&&(res+=formatter(date,options)),i=i2-1;break}i2==i&&date&&(res+=c)}return res}function iso8601Week(date){var time,checkDate=new Date(date.getTime());return checkDate.setDate(checkDate.getDate()+4-(checkDate.getDay()||7)),time=checkDate.getTime(),checkDate.setMonth(0),checkDate.setDate(1),Math.floor(Math.round((time-checkDate)/864e5)/7)+1}function exclEndDay(event){return event.end?_exclEndDay(event.end,event.allDay):addDays(cloneDate(event.start),1)}function _exclEndDay(end,allDay){return end=cloneDate(end),allDay||end.getHours()||end.getMinutes()?addDays(end,1):clearTime(end)}function lazySegBind(container,segs,bindHandlers){container.unbind("mouseover").mouseover(function(ev){for(var e,i,seg,parent=ev.target;parent!=this;)e=parent,parent=parent.parentNode;(i=e._fci)!==undefined&&(e._fci=undefined,seg=segs[i],bindHandlers(seg.event,seg.element,seg),$(ev.target).trigger(ev)),ev.stopPropagation()})}function setOuterWidth(element,width,includeMargins){for(var e,i=0;i<element.length;i++)e=$(element[i]),e.width(Math.max(0,width-hsides(e,includeMargins)))}function setOuterHeight(element,height,includeMargins){for(var e,i=0;i<element.length;i++)e=$(element[i]),e.height(Math.max(0,height-vsides(e,includeMargins)))}function hsides(element,includeMargins){return hpadding(element)+hborders(element)+(includeMargins?hmargins(element):0)}function hpadding(element){return(parseFloat($.css(element[0],"paddingLeft",!0))||0)+(parseFloat($.css(element[0],"paddingRight",!0))||0)}function hmargins(element){return(parseFloat($.css(element[0],"marginLeft",!0))||0)+(parseFloat($.css(element[0],"marginRight",!0))||0)}function hborders(element){return(parseFloat($.css(element[0],"borderLeftWidth",!0))||0)+(parseFloat($.css(element[0],"borderRightWidth",!0))||0)}function vsides(element,includeMargins){return vpadding(element)+vborders(element)+(includeMargins?vmargins(element):0)}function vpadding(element){return(parseFloat($.css(element[0],"paddingTop",!0))||0)+(parseFloat($.css(element[0],"paddingBottom",!0))||0)}function vmargins(element){return(parseFloat($.css(element[0],"marginTop",!0))||0)+(parseFloat($.css(element[0],"marginBottom",!0))||0)}function vborders(element){return(parseFloat($.css(element[0],"borderTopWidth",!0))||0)+(parseFloat($.css(element[0],"borderBottomWidth",!0))||0)}function noop(){}function dateCompare(a,b){return a-b}function arrayMax(a){return Math.max.apply(Math,a)}function zeroPad(n){return(10>n?"0":"")+n}function smartProperty(obj,name){if(obj[name]!==undefined)return obj[name];for(var res,parts=name.split(/(?=[A-Z])/),i=parts.length-1;i>=0;i--)if(res=obj[parts[i].toLowerCase()],res!==undefined)return res;return obj[""]}function htmlEscape(s){return s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function disableTextSelection(element){element.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function markFirstLast(e){e.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function getSkinCss(event,opt){var source=event.source||{},eventColor=event.color,sourceColor=source.color,optionColor=opt("eventColor"),backgroundColor=event.backgroundColor||eventColor||source.backgroundColor||sourceColor||opt("eventBackgroundColor")||optionColor,borderColor=event.borderColor||eventColor||source.borderColor||sourceColor||opt("eventBorderColor")||optionColor,textColor=event.textColor||source.textColor||opt("eventTextColor"),statements=[];return backgroundColor&&statements.push("background-color:"+backgroundColor),borderColor&&statements.push("border-color:"+borderColor),textColor&&statements.push("color:"+textColor),statements.join(";")}function applyAll(functions,thisObj,args){if($.isFunction(functions)&&(functions=[functions]),functions){var i,ret;for(i=0;i<functions.length;i++)ret=functions[i].apply(thisObj,args)||ret;return ret}}function firstDefined(){for(var i=0;i<arguments.length;i++)if(arguments[i]!==undefined)return arguments[i]}function MonthView(element,calendar){function render(date,delta){delta&&(addMonths(date,delta),date.setDate(1));var firstDay=opt("firstDay"),start=cloneDate(date,!0);start.setDate(1);var end=addMonths(cloneDate(start),1),visStart=cloneDate(start);addDays(visStart,-((visStart.getDay()-firstDay+7)%7)),skipHiddenDays(visStart);var visEnd=cloneDate(end);addDays(visEnd,(7-visEnd.getDay()+firstDay)%7),skipHiddenDays(visEnd,-1,!0);var colCnt=getCellsPerWeek(),rowCnt=Math.round(dayDiff(visEnd,visStart)/7);"fixed"==opt("weekMode")&&(addDays(visEnd,7*(6-rowCnt)),rowCnt=6),t.title=formatDate(start,opt("titleFormat")),t.start=start,t.end=end,t.visStart=visStart,t.visEnd=visEnd,renderBasic(rowCnt,colCnt,!0)}var t=this;t.render=render,BasicView.call(t,element,calendar,"month");var opt=t.opt,renderBasic=t.renderBasic,skipHiddenDays=t.skipHiddenDays,getCellsPerWeek=t.getCellsPerWeek,formatDate=calendar.formatDate}function BasicWeekView(element,calendar){function render(date,delta){delta&&addDays(date,7*delta);var start=addDays(cloneDate(date),-((date.getDay()-opt("firstDay")+7)%7)),end=addDays(cloneDate(start),7),visStart=cloneDate(start);skipHiddenDays(visStart);var visEnd=cloneDate(end);skipHiddenDays(visEnd,-1,!0);var colCnt=getCellsPerWeek();t.start=start,t.end=end,t.visStart=visStart,t.visEnd=visEnd,t.title=formatDates(visStart,addDays(cloneDate(visEnd),-1),opt("titleFormat")),renderBasic(1,colCnt,!1)}var t=this;t.render=render,BasicView.call(t,element,calendar,"basicWeek");var opt=t.opt,renderBasic=t.renderBasic,skipHiddenDays=t.skipHiddenDays,getCellsPerWeek=t.getCellsPerWeek,formatDates=calendar.formatDates}function BasicDayView(element,calendar){function render(date,delta){delta&&addDays(date,delta),skipHiddenDays(date,0>delta?-1:1);var start=cloneDate(date,!0),end=addDays(cloneDate(start),1);t.title=formatDate(date,opt("titleFormat")),t.start=t.visStart=start,t.end=t.visEnd=end,renderBasic(1,1,!1)}var t=this;t.render=render,BasicView.call(t,element,calendar,"basicDay");var opt=t.opt,renderBasic=t.renderBasic,skipHiddenDays=t.skipHiddenDays,formatDate=calendar.formatDate}function BasicView(element,calendar,viewName){function renderBasic(_rowCnt,_colCnt,_showNumbers){rowCnt=_rowCnt,colCnt=_colCnt,showNumbers=_showNumbers,updateOptions(),body||buildEventContainer(),buildTable()}function updateOptions(){tm=opt("theme")?"ui":"fc",colFormat=opt("columnFormat"),showWeekNumbers=opt("weekNumbers"),weekNumberTitle=opt("weekNumberTitle"),weekNumberFormat="iso"!=opt("weekNumberCalculation")?"w":"W"}function buildEventContainer(){daySegmentContainer=$("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(element)}function buildTable(){var html=buildTableHTML();table&&table.remove(),table=$(html).appendTo(element),head=table.find("thead"),headCells=head.find(".fc-day-header"),body=table.find("tbody"),bodyRows=body.find("tr"),bodyCells=body.find(".fc-day"),bodyFirstCells=bodyRows.find("td:first-child"),firstRowCellInners=bodyRows.eq(0).find(".fc-day > div"),firstRowCellContentInners=bodyRows.eq(0).find(".fc-day-content > div"),markFirstLast(head.add(head.find("tr"))),markFirstLast(bodyRows),bodyRows.eq(0).addClass("fc-first"),bodyRows.filter(":last").addClass("fc-last"),bodyCells.each(function(i,_cell){var date=cellToDate(Math.floor(i/colCnt),i%colCnt);trigger("dayRender",t,date,$(_cell))}),dayBind(bodyCells)}function buildTableHTML(){var html="<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+buildHeadHTML()+buildBodyHTML()+"</table>";return html}function buildHeadHTML(){var col,date,headerClass=tm+"-widget-header",html="";for(html+="<thead><tr>",showWeekNumbers&&(html+="<th class='fc-week-number "+headerClass+"'>"+htmlEscape(weekNumberTitle)+"</th>"),col=0;colCnt>col;col++)date=cellToDate(0,col),html+="<th class='fc-day-header fc-"+dayIDs[date.getDay()]+" "+headerClass+"'>"+htmlEscape(formatDate(date,colFormat))+"</th>";return html+="</tr></thead>"}function buildBodyHTML(){var row,col,date,contentClass=tm+"-widget-content",html="";for(html+="<tbody>",row=0;rowCnt>row;row++){for(html+="<tr class='fc-week'>",showWeekNumbers&&(date=cellToDate(row,0),html+="<td class='fc-week-number "+contentClass+"'><div>"+htmlEscape(formatDate(date,weekNumberFormat))+"</div></td>"),col=0;colCnt>col;col++)date=cellToDate(row,col),html+=buildCellHTML(date);html+="</tr>"}return html+="</tbody>"}function buildCellHTML(date){var contentClass=tm+"-widget-content",month=t.start.getMonth(),today=clearTime(new Date),html="",classNames=["fc-day","fc-"+dayIDs[date.getDay()],contentClass];return date.getMonth()!=month&&classNames.push("fc-other-month"),+date==+today?classNames.push("fc-today",tm+"-state-highlight"):classNames.push(today>date?"fc-past":"fc-future"),html+="<td class='"+classNames.join(" ")+"' data-date='"+formatDate(date,"yyyy-MM-dd")+"'><div>",showNumbers&&(html+="<div class='fc-day-number'>"+date.getDate()+"</div>"),html+="<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>"}function setHeight(height){viewHeight=height;var rowHeight,rowHeightLast,cell,bodyHeight=viewHeight-head.height();"variable"==opt("weekMode")?rowHeight=rowHeightLast=Math.floor(bodyHeight/(1==rowCnt?2:6)):(rowHeight=Math.floor(bodyHeight/rowCnt),rowHeightLast=bodyHeight-rowHeight*(rowCnt-1)),bodyFirstCells.each(function(i,_cell){rowCnt>i&&(cell=$(_cell),cell.find("> div").css("min-height",(i==rowCnt-1?rowHeightLast:rowHeight)-vsides(cell)))})}function setWidth(width){viewWidth=width,colPositions.clear(),colContentPositions.clear(),weekNumberWidth=0,showWeekNumbers&&(weekNumberWidth=head.find("th.fc-week-number").outerWidth()),colWidth=Math.floor((viewWidth-weekNumberWidth)/colCnt),setOuterWidth(headCells.slice(0,-1),colWidth)}function dayBind(days){days.click(dayClick).mousedown(daySelectionMousedown)}function dayClick(ev){if(!opt("selectable")){var date=parseISO8601($(this).data("date"));trigger("dayClick",this,date,!0,ev)}}function renderDayOverlay(overlayStart,overlayEnd,refreshCoordinateGrid){refreshCoordinateGrid&&coordinateGrid.build();for(var segments=rangeToSegments(overlayStart,overlayEnd),i=0;i<segments.length;i++){var segment=segments[i];dayBind(renderCellOverlay(segment.row,segment.leftCol,segment.row,segment.rightCol))}}function renderCellOverlay(row0,col0,row1,col1){var rect=coordinateGrid.rect(row0,col0,row1,col1,element);return renderOverlay(rect,element)}function defaultSelectionEnd(startDate){return cloneDate(startDate)}function renderSelection(startDate,endDate){renderDayOverlay(startDate,addDays(cloneDate(endDate),1),!0)}function clearSelection(){clearOverlays()}function reportDayClick(date,allDay,ev){var cell=dateToCell(date),_element=bodyCells[cell.row*colCnt+cell.col];trigger("dayClick",_element,date,allDay,ev)}function dragStart(_dragElement,ev){hoverListener.start(function(cell){clearOverlays(),cell&&renderCellOverlay(cell.row,cell.col,cell.row,cell.col)},ev)}function dragStop(_dragElement,ev,ui){var cell=hoverListener.stop();if(clearOverlays(),cell){var d=cellToDate(cell);trigger("drop",_dragElement,d,!0,ev,ui)}}function defaultEventEnd(event){return cloneDate(event.start)}function colLeft(col){return colPositions.left(col)}function colRight(col){return colPositions.right(col)}function colContentLeft(col){return colContentPositions.left(col)}function colContentRight(col){return colContentPositions.right(col)}function allDayRow(i){return bodyRows.eq(i)}var t=this;t.renderBasic=renderBasic,t.setHeight=setHeight,t.setWidth=setWidth,t.renderDayOverlay=renderDayOverlay,t.defaultSelectionEnd=defaultSelectionEnd,t.renderSelection=renderSelection,t.clearSelection=clearSelection,t.reportDayClick=reportDayClick,t.dragStart=dragStart,t.dragStop=dragStop,t.defaultEventEnd=defaultEventEnd,t.getHoverListener=function(){return hoverListener},t.colLeft=colLeft,t.colRight=colRight,t.colContentLeft=colContentLeft,t.colContentRight=colContentRight,t.getIsCellAllDay=function(){return!0},t.allDayRow=allDayRow,t.getRowCnt=function(){return rowCnt},t.getColCnt=function(){return colCnt},t.getColWidth=function(){return colWidth},t.getDaySegmentContainer=function(){return daySegmentContainer},View.call(t,element,calendar,viewName),OverlayManager.call(t),SelectionManager.call(t),BasicEventRenderer.call(t);var table,head,headCells,body,bodyRows,bodyCells,bodyFirstCells,firstRowCellInners,firstRowCellContentInners,daySegmentContainer,viewWidth,viewHeight,colWidth,weekNumberWidth,rowCnt,colCnt,showNumbers,coordinateGrid,hoverListener,colPositions,colContentPositions,tm,colFormat,showWeekNumbers,weekNumberTitle,weekNumberFormat,opt=t.opt,trigger=t.trigger,renderOverlay=t.renderOverlay,clearOverlays=t.clearOverlays,daySelectionMousedown=t.daySelectionMousedown,cellToDate=t.cellToDate,dateToCell=t.dateToCell,rangeToSegments=t.rangeToSegments,formatDate=calendar.formatDate;disableTextSelection(element.addClass("fc-grid")),coordinateGrid=new CoordinateGrid(function(rows,cols){var e,n,p;headCells.each(function(i,_e){e=$(_e),n=e.offset().left,i&&(p[1]=n),p=[n],cols[i]=p}),p[1]=n+e.outerWidth(),bodyRows.each(function(i,_e){rowCnt>i&&(e=$(_e),n=e.offset().top,i&&(p[1]=n),p=[n],rows[i]=p)}),p[1]=n+e.outerHeight()}),hoverListener=new HoverListener(coordinateGrid),colPositions=new HorizontalPositionCache(function(col){return firstRowCellInners.eq(col)}),colContentPositions=new HorizontalPositionCache(function(col){return firstRowCellContentInners.eq(col)})}function BasicEventRenderer(){function renderEvents(events,modifiedEventId){t.renderDayEvents(events,modifiedEventId)}function clearEvents(){t.getDaySegmentContainer().empty()}var t=this;t.renderEvents=renderEvents,t.clearEvents=clearEvents,DayEventRenderer.call(t)}function AgendaWeekView(element,calendar){function render(date,delta){delta&&addDays(date,7*delta);var start=addDays(cloneDate(date),-((date.getDay()-opt("firstDay")+7)%7)),end=addDays(cloneDate(start),7),visStart=cloneDate(start);skipHiddenDays(visStart);var visEnd=cloneDate(end);skipHiddenDays(visEnd,-1,!0);var colCnt=getCellsPerWeek();t.title=formatDates(visStart,addDays(cloneDate(visEnd),-1),opt("titleFormat")),t.start=start,t.end=end,t.visStart=visStart,t.visEnd=visEnd,renderAgenda(colCnt)}var t=this;t.render=render,AgendaView.call(t,element,calendar,"agendaWeek");var opt=t.opt,renderAgenda=t.renderAgenda,skipHiddenDays=t.skipHiddenDays,getCellsPerWeek=t.getCellsPerWeek,formatDates=calendar.formatDates}function AgendaDayView(element,calendar){function render(date,delta){delta&&addDays(date,delta),skipHiddenDays(date,0>delta?-1:1);var start=cloneDate(date,!0),end=addDays(cloneDate(start),1);t.title=formatDate(date,opt("titleFormat")),t.start=t.visStart=start,t.end=t.visEnd=end,renderAgenda(1)}var t=this;t.render=render,AgendaView.call(t,element,calendar,"agendaDay");var opt=t.opt,renderAgenda=t.renderAgenda,skipHiddenDays=t.skipHiddenDays,formatDate=calendar.formatDate
}function AgendaView(element,calendar,viewName){function renderAgenda(c){colCnt=c,updateOptions(),dayTable?buildDayTable():buildSkeleton()}function updateOptions(){tm=opt("theme")?"ui":"fc",rtl=opt("isRTL"),minMinute=parseTime(opt("minTime")),maxMinute=parseTime(opt("maxTime")),colFormat=opt("columnFormat"),showWeekNumbers=opt("weekNumbers"),weekNumberTitle=opt("weekNumberTitle"),weekNumberFormat="iso"!=opt("weekNumberCalculation")?"w":"W",snapMinutes=opt("snapMinutes")||opt("slotMinutes")}function buildSkeleton(){var s,d,i,maxd,minutes,headerClass=tm+"-widget-header",contentClass=tm+"-widget-content",slotNormal=opt("slotMinutes")%15==0;for(buildDayTable(),slotLayer=$("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(element),opt("allDaySlot")?(daySegmentContainer=$("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(slotLayer),s="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+headerClass+" fc-agenda-axis'>"+opt("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+headerClass+" fc-agenda-gutter'>&nbsp;</th></tr></table>",allDayTable=$(s).appendTo(slotLayer),allDayRow=allDayTable.find("tr"),dayBind(allDayRow.find("td")),slotLayer.append("<div class='fc-agenda-divider "+headerClass+"'><div class='fc-agenda-divider-inner'/></div>")):daySegmentContainer=$([]),slotScroller=$("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(slotLayer),slotContainer=$("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(slotScroller),slotSegmentContainer=$("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(slotContainer),s="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",d=zeroDate(),maxd=addMinutes(cloneDate(d),maxMinute),addMinutes(d,minMinute),slotCnt=0,i=0;maxd>d;i++)minutes=d.getMinutes(),s+="<tr class='fc-slot"+i+" "+(minutes?"fc-minor":"")+"'><th class='fc-agenda-axis "+headerClass+"'>"+(slotNormal&&minutes?"&nbsp;":formatDate(d,opt("axisFormat")))+"</th><td class='"+contentClass+"'><div style='position:relative'>&nbsp;</div></td></tr>",addMinutes(d,opt("slotMinutes")),slotCnt++;s+="</tbody></table>",slotTable=$(s).appendTo(slotContainer),slotBind(slotTable.find("td"))}function buildDayTable(){var html=buildDayTableHTML();dayTable&&dayTable.remove(),dayTable=$(html).appendTo(element),dayHead=dayTable.find("thead"),dayHeadCells=dayHead.find("th").slice(1,-1),dayBody=dayTable.find("tbody"),dayBodyCells=dayBody.find("td").slice(0,-1),dayBodyCellInners=dayBodyCells.find("> div"),dayBodyCellContentInners=dayBodyCells.find(".fc-day-content > div"),dayBodyFirstCell=dayBodyCells.eq(0),dayBodyFirstCellStretcher=dayBodyCellInners.eq(0),markFirstLast(dayHead.add(dayHead.find("tr"))),markFirstLast(dayBody.add(dayBody.find("tr")))}function buildDayTableHTML(){var html="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+buildDayTableHeadHTML()+buildDayTableBodyHTML()+"</table>";return html}function buildDayTableHeadHTML(){var date,weekText,col,headerClass=tm+"-widget-header",html="";for(html+="<thead><tr>",showWeekNumbers?(date=cellToDate(0,0),weekText=formatDate(date,weekNumberFormat),rtl?weekText+=weekNumberTitle:weekText=weekNumberTitle+weekText,html+="<th class='fc-agenda-axis fc-week-number "+headerClass+"'>"+htmlEscape(weekText)+"</th>"):html+="<th class='fc-agenda-axis "+headerClass+"'>&nbsp;</th>",col=0;colCnt>col;col++)date=cellToDate(0,col),html+="<th class='fc-"+dayIDs[date.getDay()]+" fc-col"+col+" "+headerClass+"'>"+htmlEscape(formatDate(date,colFormat))+"</th>";return html+="<th class='fc-agenda-gutter "+headerClass+"'>&nbsp;</th></tr></thead>"}function buildDayTableBodyHTML(){var date,col,cellsHTML,cellHTML,classNames,headerClass=tm+"-widget-header",contentClass=tm+"-widget-content",today=clearTime(new Date),html="";for(html+="<tbody><tr><th class='fc-agenda-axis "+headerClass+"'>&nbsp;</th>",cellsHTML="",col=0;colCnt>col;col++)date=cellToDate(0,col),classNames=["fc-col"+col,"fc-"+dayIDs[date.getDay()],contentClass],+date==+today?classNames.push(tm+"-state-highlight","fc-today"):classNames.push(today>date?"fc-past":"fc-future"),cellHTML="<td class='"+classNames.join(" ")+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>",cellsHTML+=cellHTML;return html+=cellsHTML,html+="<td class='fc-agenda-gutter "+contentClass+"'>&nbsp;</td></tr></tbody>"}function setHeight(height){height===undefined&&(height=viewHeight),viewHeight=height,slotTopCache={};var headHeight=dayBody.position().top,allDayHeight=slotScroller.position().top,bodyHeight=Math.min(height-headHeight,slotTable.height()+allDayHeight+1);dayBodyFirstCellStretcher.height(bodyHeight-vsides(dayBodyFirstCell)),slotLayer.css("top",headHeight),slotScroller.height(bodyHeight-allDayHeight-1),slotHeight=slotTable.find("tr:first").height()+1,snapRatio=opt("slotMinutes")/snapMinutes,snapHeight=slotHeight/snapRatio}function setWidth(width){viewWidth=width,colPositions.clear(),colContentPositions.clear();var axisFirstCells=dayHead.find("th:first");allDayTable&&(axisFirstCells=axisFirstCells.add(allDayTable.find("th:first"))),axisFirstCells=axisFirstCells.add(slotTable.find("th:first")),axisWidth=0,setOuterWidth(axisFirstCells.width("").each(function(i,_cell){axisWidth=Math.max(axisWidth,$(_cell).outerWidth())}),axisWidth);var gutterCells=dayTable.find(".fc-agenda-gutter");allDayTable&&(gutterCells=gutterCells.add(allDayTable.find("th.fc-agenda-gutter")));var slotTableWidth=slotScroller[0].clientWidth;gutterWidth=slotScroller.width()-slotTableWidth,gutterWidth?(setOuterWidth(gutterCells,gutterWidth),gutterCells.show().prev().removeClass("fc-last")):gutterCells.hide().prev().addClass("fc-last"),colWidth=Math.floor((slotTableWidth-axisWidth)/colCnt),setOuterWidth(dayHeadCells.slice(0,-1),colWidth)}function resetScroll(){function scroll(){slotScroller.scrollTop(top)}var d0=zeroDate(),scrollDate=cloneDate(d0);scrollDate.setHours(opt("firstHour"));var top=timePosition(d0,scrollDate)+1;scroll(),setTimeout(scroll,0)}function afterRender(){resetScroll()}function dayBind(cells){cells.click(slotClick).mousedown(daySelectionMousedown)}function slotBind(cells){cells.click(slotClick).mousedown(slotSelectionMousedown)}function slotClick(ev){if(!opt("selectable")){var col=Math.min(colCnt-1,Math.floor((ev.pageX-dayTable.offset().left-axisWidth)/colWidth)),date=cellToDate(0,col),rowMatch=this.parentNode.className.match(/fc-slot(\d+)/);if(rowMatch){var mins=parseInt(rowMatch[1])*opt("slotMinutes"),hours=Math.floor(mins/60);date.setHours(hours),date.setMinutes(mins%60+minMinute),trigger("dayClick",dayBodyCells[col],date,!1,ev)}else trigger("dayClick",dayBodyCells[col],date,!0,ev)}}function renderDayOverlay(overlayStart,overlayEnd,refreshCoordinateGrid){refreshCoordinateGrid&&coordinateGrid.build();for(var segments=rangeToSegments(overlayStart,overlayEnd),i=0;i<segments.length;i++){var segment=segments[i];dayBind(renderCellOverlay(segment.row,segment.leftCol,segment.row,segment.rightCol))}}function renderCellOverlay(row0,col0,row1,col1){var rect=coordinateGrid.rect(row0,col0,row1,col1,slotLayer);return renderOverlay(rect,slotLayer)}function renderSlotOverlay(overlayStart,overlayEnd){for(var i=0;colCnt>i;i++){var dayStart=cellToDate(0,i),dayEnd=addDays(cloneDate(dayStart),1),stretchStart=new Date(Math.max(dayStart,overlayStart)),stretchEnd=new Date(Math.min(dayEnd,overlayEnd));if(stretchEnd>stretchStart){var rect=coordinateGrid.rect(0,i,0,i,slotContainer),top=timePosition(dayStart,stretchStart),bottom=timePosition(dayStart,stretchEnd);rect.top=top,rect.height=bottom-top,slotBind(renderOverlay(rect,slotContainer))}}}function colLeft(col){return colPositions.left(col)}function colContentLeft(col){return colContentPositions.left(col)}function colRight(col){return colPositions.right(col)}function colContentRight(col){return colContentPositions.right(col)}function getIsCellAllDay(cell){return opt("allDaySlot")&&!cell.row}function realCellToDate(cell){var d=cellToDate(0,cell.col),slotIndex=cell.row;return opt("allDaySlot")&&slotIndex--,slotIndex>=0&&addMinutes(d,minMinute+slotIndex*snapMinutes),d}function timePosition(day,time){if(day=cloneDate(day,!0),time<addMinutes(cloneDate(day),minMinute))return 0;if(time>=addMinutes(cloneDate(day),maxMinute))return slotTable.height();var slotMinutes=opt("slotMinutes"),minutes=60*time.getHours()+time.getMinutes()-minMinute,slotI=Math.floor(minutes/slotMinutes),slotTop=slotTopCache[slotI];return slotTop===undefined&&(slotTop=slotTopCache[slotI]=slotTable.find("tr").eq(slotI).find("td div")[0].offsetTop),Math.max(0,Math.round(slotTop-1+slotHeight*(minutes%slotMinutes/slotMinutes)))}function getAllDayRow(){return allDayRow}function defaultEventEnd(event){var start=cloneDate(event.start);return event.allDay?start:addMinutes(start,opt("defaultEventMinutes"))}function defaultSelectionEnd(startDate,allDay){return allDay?cloneDate(startDate):addMinutes(cloneDate(startDate),opt("slotMinutes"))}function renderSelection(startDate,endDate,allDay){allDay?opt("allDaySlot")&&renderDayOverlay(startDate,addDays(cloneDate(endDate),1),!0):renderSlotSelection(startDate,endDate)}function renderSlotSelection(startDate,endDate){var helperOption=opt("selectHelper");if(coordinateGrid.build(),helperOption){var col=dateToCell(startDate).col;if(col>=0&&colCnt>col){var rect=coordinateGrid.rect(0,col,0,col,slotContainer),top=timePosition(startDate,startDate),bottom=timePosition(startDate,endDate);if(bottom>top){if(rect.top=top,rect.height=bottom-top,rect.left+=2,rect.width-=5,$.isFunction(helperOption)){var helperRes=helperOption(startDate,endDate);helperRes&&(rect.position="absolute",selectionHelper=$(helperRes).css(rect).appendTo(slotContainer))}else rect.isStart=!0,rect.isEnd=!0,selectionHelper=$(slotSegHtml({title:"",start:startDate,end:endDate,className:["fc-select-helper"],editable:!1},rect)),selectionHelper.css("opacity",opt("dragOpacity"));selectionHelper&&(slotBind(selectionHelper),slotContainer.append(selectionHelper),setOuterWidth(selectionHelper,rect.width,!0),setOuterHeight(selectionHelper,rect.height,!0))}}}else renderSlotOverlay(startDate,endDate)}function clearSelection(){clearOverlays(),selectionHelper&&(selectionHelper.remove(),selectionHelper=null)}function slotSelectionMousedown(ev){if(1==ev.which&&opt("selectable")){unselect(ev);var dates;hoverListener.start(function(cell,origCell){if(clearSelection(),cell&&cell.col==origCell.col&&!getIsCellAllDay(cell)){var d1=realCellToDate(origCell),d2=realCellToDate(cell);dates=[d1,addMinutes(cloneDate(d1),snapMinutes),d2,addMinutes(cloneDate(d2),snapMinutes)].sort(dateCompare),renderSlotSelection(dates[0],dates[3])}else dates=null},ev),$(document).one("mouseup",function(ev){hoverListener.stop(),dates&&(+dates[0]==+dates[1]&&reportDayClick(dates[0],!1,ev),reportSelection(dates[0],dates[3],!1,ev))})}}function reportDayClick(date,allDay,ev){trigger("dayClick",dayBodyCells[dateToCell(date).col],date,allDay,ev)}function dragStart(_dragElement,ev){hoverListener.start(function(cell){if(clearOverlays(),cell)if(getIsCellAllDay(cell))renderCellOverlay(cell.row,cell.col,cell.row,cell.col);else{var d1=realCellToDate(cell),d2=addMinutes(cloneDate(d1),opt("defaultEventMinutes"));renderSlotOverlay(d1,d2)}},ev)}function dragStop(_dragElement,ev,ui){var cell=hoverListener.stop();clearOverlays(),cell&&trigger("drop",_dragElement,realCellToDate(cell),getIsCellAllDay(cell),ev,ui)}var t=this;t.renderAgenda=renderAgenda,t.setWidth=setWidth,t.setHeight=setHeight,t.afterRender=afterRender,t.defaultEventEnd=defaultEventEnd,t.timePosition=timePosition,t.getIsCellAllDay=getIsCellAllDay,t.allDayRow=getAllDayRow,t.getCoordinateGrid=function(){return coordinateGrid},t.getHoverListener=function(){return hoverListener},t.colLeft=colLeft,t.colRight=colRight,t.colContentLeft=colContentLeft,t.colContentRight=colContentRight,t.getDaySegmentContainer=function(){return daySegmentContainer},t.getSlotSegmentContainer=function(){return slotSegmentContainer},t.getMinMinute=function(){return minMinute},t.getMaxMinute=function(){return maxMinute},t.getSlotContainer=function(){return slotContainer},t.getRowCnt=function(){return 1},t.getColCnt=function(){return colCnt},t.getColWidth=function(){return colWidth},t.getSnapHeight=function(){return snapHeight},t.getSnapMinutes=function(){return snapMinutes},t.defaultSelectionEnd=defaultSelectionEnd,t.renderDayOverlay=renderDayOverlay,t.renderSelection=renderSelection,t.clearSelection=clearSelection,t.reportDayClick=reportDayClick,t.dragStart=dragStart,t.dragStop=dragStop,View.call(t,element,calendar,viewName),OverlayManager.call(t),SelectionManager.call(t),AgendaEventRenderer.call(t);var dayTable,dayHead,dayHeadCells,dayBody,dayBodyCells,dayBodyCellInners,dayBodyCellContentInners,dayBodyFirstCell,dayBodyFirstCellStretcher,slotLayer,daySegmentContainer,allDayTable,allDayRow,slotScroller,slotContainer,slotSegmentContainer,slotTable,selectionHelper,viewWidth,viewHeight,axisWidth,colWidth,gutterWidth,slotHeight,snapMinutes,snapRatio,snapHeight,colCnt,slotCnt,coordinateGrid,hoverListener,colPositions,colContentPositions,tm,rtl,minMinute,maxMinute,colFormat,showWeekNumbers,weekNumberTitle,weekNumberFormat,opt=t.opt,trigger=t.trigger,renderOverlay=t.renderOverlay,clearOverlays=t.clearOverlays,reportSelection=t.reportSelection,unselect=t.unselect,daySelectionMousedown=t.daySelectionMousedown,slotSegHtml=t.slotSegHtml,cellToDate=t.cellToDate,dateToCell=t.dateToCell,rangeToSegments=t.rangeToSegments,formatDate=calendar.formatDate,slotTopCache={};disableTextSelection(element.addClass("fc-agenda")),coordinateGrid=new CoordinateGrid(function(rows,cols){function constrain(n){return Math.max(slotScrollerTop,Math.min(slotScrollerBottom,n))}var e,n,p;dayHeadCells.each(function(i,_e){e=$(_e),n=e.offset().left,i&&(p[1]=n),p=[n],cols[i]=p}),p[1]=n+e.outerWidth(),opt("allDaySlot")&&(e=allDayRow,n=e.offset().top,rows[0]=[n,n+e.outerHeight()]);for(var slotTableTop=slotContainer.offset().top,slotScrollerTop=slotScroller.offset().top,slotScrollerBottom=slotScrollerTop+slotScroller.outerHeight(),i=0;slotCnt*snapRatio>i;i++)rows.push([constrain(slotTableTop+snapHeight*i),constrain(slotTableTop+snapHeight*(i+1))])}),hoverListener=new HoverListener(coordinateGrid),colPositions=new HorizontalPositionCache(function(col){return dayBodyCellInners.eq(col)}),colContentPositions=new HorizontalPositionCache(function(col){return dayBodyCellContentInners.eq(col)})}function AgendaEventRenderer(){function renderEvents(events,modifiedEventId){var i,len=events.length,dayEvents=[],slotEvents=[];for(i=0;len>i;i++)events[i].allDay?dayEvents.push(events[i]):slotEvents.push(events[i]);opt("allDaySlot")&&(renderDayEvents(dayEvents,modifiedEventId),setHeight()),renderSlotSegs(compileSlotSegs(slotEvents),modifiedEventId)}function clearEvents(){getDaySegmentContainer().empty(),getSlotSegmentContainer().empty()}function compileSlotSegs(events){var d,i,j,seg,colSegs,colCnt=getColCnt(),minMinute=getMinMinute(),maxMinute=getMaxMinute(),visEventEnds=$.map(events,slotEventEnd),segs=[];for(i=0;colCnt>i;i++)for(d=cellToDate(0,i),addMinutes(d,minMinute),colSegs=sliceSegs(events,visEventEnds,d,addMinutes(cloneDate(d),maxMinute-minMinute)),colSegs=placeSlotSegs(colSegs),j=0;j<colSegs.length;j++)seg=colSegs[j],seg.col=i,segs.push(seg);return segs}function sliceSegs(events,visEventEnds,start,end){var i,event,eventStart,eventEnd,segStart,segEnd,isStart,isEnd,segs=[],len=events.length;for(i=0;len>i;i++)event=events[i],eventStart=event.start,eventEnd=visEventEnds[i],eventEnd>start&&end>eventStart&&(start>eventStart?(segStart=cloneDate(start),isStart=!1):(segStart=eventStart,isStart=!0),eventEnd>end?(segEnd=cloneDate(end),isEnd=!1):(segEnd=eventEnd,isEnd=!0),segs.push({event:event,start:segStart,end:segEnd,isStart:isStart,isEnd:isEnd}));return segs.sort(compareSlotSegs)}function slotEventEnd(event){return event.end?cloneDate(event.end):addMinutes(cloneDate(event.start),opt("defaultEventMinutes"))}function renderSlotSegs(segs,modifiedEventId){var i,seg,event,top,bottom,columnLeft,columnRight,columnWidth,width,left,right,eventElements,eventElement,triggerRes,titleElement,height,segCnt=segs.length,html="",slotSegmentContainer=getSlotSegmentContainer(),isRTL=opt("isRTL");for(i=0;segCnt>i;i++)seg=segs[i],event=seg.event,top=timePosition(seg.start,seg.start),bottom=timePosition(seg.start,seg.end),columnLeft=colContentLeft(seg.col),columnRight=colContentRight(seg.col),columnWidth=columnRight-columnLeft,columnRight-=.025*columnWidth,columnWidth=columnRight-columnLeft,width=columnWidth*(seg.forwardCoord-seg.backwardCoord),opt("slotEventOverlap")&&(width=Math.max(2*(width-10),width)),isRTL?(right=columnRight-seg.backwardCoord*columnWidth,left=right-width):(left=columnLeft+seg.backwardCoord*columnWidth,right=left+width),left=Math.max(left,columnLeft),right=Math.min(right,columnRight),width=right-left,seg.top=top,seg.left=left,seg.outerWidth=width,seg.outerHeight=bottom-top,html+=slotSegHtml(event,seg);for(slotSegmentContainer[0].innerHTML=html,eventElements=slotSegmentContainer.children(),i=0;segCnt>i;i++)seg=segs[i],event=seg.event,eventElement=$(eventElements[i]),triggerRes=trigger("eventRender",event,event,eventElement),triggerRes===!1?eventElement.remove():(triggerRes&&triggerRes!==!0&&(eventElement.remove(),eventElement=$(triggerRes).css({position:"absolute",top:seg.top,left:seg.left}).appendTo(slotSegmentContainer)),seg.element=eventElement,event._id===modifiedEventId?bindSlotSeg(event,eventElement,seg):eventElement[0]._fci=i,reportEventElement(event,eventElement));for(lazySegBind(slotSegmentContainer,segs,bindSlotSeg),i=0;segCnt>i;i++)seg=segs[i],(eventElement=seg.element)&&(seg.vsides=vsides(eventElement,!0),seg.hsides=hsides(eventElement,!0),titleElement=eventElement.find(".fc-event-title"),titleElement.length&&(seg.contentTop=titleElement[0].offsetTop));for(i=0;segCnt>i;i++)seg=segs[i],(eventElement=seg.element)&&(eventElement[0].style.width=Math.max(0,seg.outerWidth-seg.hsides)+"px",height=Math.max(0,seg.outerHeight-seg.vsides),eventElement[0].style.height=height+"px",event=seg.event,seg.contentTop!==undefined&&height-seg.contentTop<10&&(eventElement.find("div.fc-event-time").text(formatDate(event.start,opt("timeFormat"))+" - "+event.title),eventElement.find("div.fc-event-title").remove()),trigger("eventAfterRender",event,event,eventElement))}function slotSegHtml(event,seg){var html="<",url=event.url,skinCss=getSkinCss(event,opt),classes=["fc-event","fc-event-vert"];return isEventDraggable(event)&&classes.push("fc-event-draggable"),seg.isStart&&classes.push("fc-event-start"),seg.isEnd&&classes.push("fc-event-end"),classes=classes.concat(event.className),event.source&&(classes=classes.concat(event.source.className||[])),html+=url?"a href='"+htmlEscape(event.url)+"'":"div",html+=" class='"+classes.join(" ")+"' style='position:absolute;top:"+seg.top+"px;left:"+seg.left+"px;"+skinCss+"'><div class='fc-event-inner'><div class='fc-event-time'>"+htmlEscape(formatDates(event.start,event.end,opt("timeFormat")))+"</div><div class='fc-event-title'>"+htmlEscape(event.title||"")+"</div></div><div class='fc-event-bg'></div>",seg.isEnd&&isEventResizable(event)&&(html+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),html+="</"+(url?"a":"div")+">"}function bindSlotSeg(event,eventElement,seg){var timeElement=eventElement.find("div.fc-event-time");isEventDraggable(event)&&draggableSlotEvent(event,eventElement,timeElement),seg.isEnd&&isEventResizable(event)&&resizableSlotEvent(event,eventElement,timeElement),eventElementHandlers(event,eventElement)}function draggableDayEvent(event,eventElement,seg){function resetElement(){allDay||(eventElement.width(origWidth).height("").draggable("option","grid",null),allDay=!0)}var origWidth,revert,dayDelta,isStart=seg.isStart,allDay=!0,hoverListener=getHoverListener(),colWidth=getColWidth(),snapHeight=getSnapHeight(),snapMinutes=getSnapMinutes(),minMinute=getMinMinute();eventElement.draggable({opacity:opt("dragOpacity","month"),revertDuration:opt("dragRevertDuration"),start:function(ev,ui){trigger("eventDragStart",eventElement,event,ev,ui),hideEvents(event,eventElement),origWidth=eventElement.width(),hoverListener.start(function(cell,origCell){if(clearOverlays(),cell){revert=!1;var origDate=cellToDate(0,origCell.col),date=cellToDate(0,cell.col);dayDelta=dayDiff(date,origDate),cell.row?isStart?allDay&&(eventElement.width(colWidth-10),setOuterHeight(eventElement,snapHeight*Math.round((event.end?(event.end-event.start)/MINUTE_MS:opt("defaultEventMinutes"))/snapMinutes)),eventElement.draggable("option","grid",[colWidth,1]),allDay=!1):revert=!0:(renderDayOverlay(addDays(cloneDate(event.start),dayDelta),addDays(exclEndDay(event),dayDelta)),resetElement()),revert=revert||allDay&&!dayDelta}else resetElement(),revert=!0;eventElement.draggable("option","revert",revert)},ev,"drag")},stop:function(ev,ui){if(hoverListener.stop(),clearOverlays(),trigger("eventDragStop",eventElement,event,ev,ui),revert)resetElement(),eventElement.css("filter",""),showEvents(event,eventElement);else{var minuteDelta=0;allDay||(minuteDelta=Math.round((eventElement.offset().top-getSlotContainer().offset().top)/snapHeight)*snapMinutes+minMinute-(60*event.start.getHours()+event.start.getMinutes())),eventDrop(this,event,dayDelta,minuteDelta,allDay,ev,ui)}}})}function draggableSlotEvent(event,eventElement,timeElement){function updateUI(){clearOverlays(),isInBounds&&(isAllDay?(timeElement.hide(),eventElement.draggable("option","grid",null),renderDayOverlay(addDays(cloneDate(event.start),dayDelta),addDays(exclEndDay(event),dayDelta))):(updateTimeText(minuteDelta),timeElement.css("display",""),eventElement.draggable("option","grid",[colWidth,snapHeight])))}function updateTimeText(minuteDelta){var newEnd,newStart=addMinutes(cloneDate(event.start),minuteDelta);event.end&&(newEnd=addMinutes(cloneDate(event.end),minuteDelta)),timeElement.text(formatDates(newStart,newEnd,opt("timeFormat")))}var origPosition,origCell,isInBounds,prevIsInBounds,isAllDay,prevIsAllDay,colDelta,prevColDelta,dayDelta,minuteDelta,prevMinuteDelta,coordinateGrid=t.getCoordinateGrid(),colCnt=getColCnt(),colWidth=getColWidth(),snapHeight=getSnapHeight(),snapMinutes=getSnapMinutes();eventElement.draggable({scroll:!1,grid:[colWidth,snapHeight],axis:1==colCnt?"y":!1,opacity:opt("dragOpacity"),revertDuration:opt("dragRevertDuration"),start:function(ev,ui){trigger("eventDragStart",eventElement,event,ev,ui),hideEvents(event,eventElement),coordinateGrid.build(),origPosition=eventElement.position(),origCell=coordinateGrid.cell(ev.pageX,ev.pageY),isInBounds=prevIsInBounds=!0,isAllDay=prevIsAllDay=getIsCellAllDay(origCell),colDelta=prevColDelta=0,dayDelta=0,minuteDelta=prevMinuteDelta=0},drag:function(ev,ui){var cell=coordinateGrid.cell(ev.pageX,ev.pageY);if(isInBounds=!!cell){if(isAllDay=getIsCellAllDay(cell),colDelta=Math.round((ui.position.left-origPosition.left)/colWidth),colDelta!=prevColDelta){var origDate=cellToDate(0,origCell.col),col=origCell.col+colDelta;col=Math.max(0,col),col=Math.min(colCnt-1,col);var date=cellToDate(0,col);dayDelta=dayDiff(date,origDate)}isAllDay||(minuteDelta=Math.round((ui.position.top-origPosition.top)/snapHeight)*snapMinutes)}(isInBounds!=prevIsInBounds||isAllDay!=prevIsAllDay||colDelta!=prevColDelta||minuteDelta!=prevMinuteDelta)&&(updateUI(),prevIsInBounds=isInBounds,prevIsAllDay=isAllDay,prevColDelta=colDelta,prevMinuteDelta=minuteDelta),eventElement.draggable("option","revert",!isInBounds)},stop:function(ev,ui){clearOverlays(),trigger("eventDragStop",eventElement,event,ev,ui),isInBounds&&(isAllDay||dayDelta||minuteDelta)?eventDrop(this,event,dayDelta,isAllDay?0:minuteDelta,isAllDay,ev,ui):(isInBounds=!0,isAllDay=!1,colDelta=0,dayDelta=0,minuteDelta=0,updateUI(),eventElement.css("filter",""),eventElement.css(origPosition),showEvents(event,eventElement))}})}function resizableSlotEvent(event,eventElement,timeElement){var snapDelta,prevSnapDelta,snapHeight=getSnapHeight(),snapMinutes=getSnapMinutes();eventElement.resizable({handles:{s:".ui-resizable-handle"},grid:snapHeight,start:function(ev,ui){snapDelta=prevSnapDelta=0,hideEvents(event,eventElement),trigger("eventResizeStart",this,event,ev,ui)},resize:function(ev,ui){snapDelta=Math.round((Math.max(snapHeight,eventElement.height())-ui.originalSize.height)/snapHeight),snapDelta!=prevSnapDelta&&(timeElement.text(formatDates(event.start,snapDelta||event.end?addMinutes(eventEnd(event),snapMinutes*snapDelta):null,opt("timeFormat"))),prevSnapDelta=snapDelta)},stop:function(ev,ui){trigger("eventResizeStop",this,event,ev,ui),snapDelta?eventResize(this,event,0,snapMinutes*snapDelta,ev,ui):showEvents(event,eventElement)}})}var t=this;t.renderEvents=renderEvents,t.clearEvents=clearEvents,t.slotSegHtml=slotSegHtml,DayEventRenderer.call(t);var opt=t.opt,trigger=t.trigger,isEventDraggable=t.isEventDraggable,isEventResizable=t.isEventResizable,eventEnd=t.eventEnd,eventElementHandlers=t.eventElementHandlers,setHeight=t.setHeight,getDaySegmentContainer=t.getDaySegmentContainer,getSlotSegmentContainer=t.getSlotSegmentContainer,getHoverListener=t.getHoverListener,getMaxMinute=t.getMaxMinute,getMinMinute=t.getMinMinute,timePosition=t.timePosition,getIsCellAllDay=t.getIsCellAllDay,colContentLeft=t.colContentLeft,colContentRight=t.colContentRight,cellToDate=t.cellToDate,getColCnt=t.getColCnt,getColWidth=t.getColWidth,getSnapHeight=t.getSnapHeight,getSnapMinutes=t.getSnapMinutes,getSlotContainer=t.getSlotContainer,reportEventElement=t.reportEventElement,showEvents=t.showEvents,hideEvents=t.hideEvents,eventDrop=t.eventDrop,eventResize=t.eventResize,renderDayOverlay=t.renderDayOverlay,clearOverlays=t.clearOverlays,renderDayEvents=t.renderDayEvents,calendar=t.calendar,formatDate=calendar.formatDate,formatDates=calendar.formatDates;t.draggableDayEvent=draggableDayEvent}function placeSlotSegs(segs){var i,levels=buildSlotSegLevels(segs),level0=levels[0];if(computeForwardSlotSegs(levels),level0){for(i=0;i<level0.length;i++)computeSlotSegPressures(level0[i]);for(i=0;i<level0.length;i++)computeSlotSegCoords(level0[i],0,0)}return flattenSlotSegLevels(levels)}function buildSlotSegLevels(segs){var i,seg,j,levels=[];for(i=0;i<segs.length;i++){for(seg=segs[i],j=0;j<levels.length&&computeSlotSegCollisions(seg,levels[j]).length;j++);(levels[j]||(levels[j]=[])).push(seg)}return levels}function computeForwardSlotSegs(levels){var i,level,j,seg,k;for(i=0;i<levels.length;i++)for(level=levels[i],j=0;j<level.length;j++)for(seg=level[j],seg.forwardSegs=[],k=i+1;k<levels.length;k++)computeSlotSegCollisions(seg,levels[k],seg.forwardSegs)}function computeSlotSegPressures(seg){var i,forwardSeg,forwardSegs=seg.forwardSegs,forwardPressure=0;if(seg.forwardPressure===undefined){for(i=0;i<forwardSegs.length;i++)forwardSeg=forwardSegs[i],computeSlotSegPressures(forwardSeg),forwardPressure=Math.max(forwardPressure,1+forwardSeg.forwardPressure);seg.forwardPressure=forwardPressure}}function computeSlotSegCoords(seg,seriesBackwardPressure,seriesBackwardCoord){var i,forwardSegs=seg.forwardSegs;if(seg.forwardCoord===undefined)for(forwardSegs.length?(forwardSegs.sort(compareForwardSlotSegs),computeSlotSegCoords(forwardSegs[0],seriesBackwardPressure+1,seriesBackwardCoord),seg.forwardCoord=forwardSegs[0].backwardCoord):seg.forwardCoord=1,seg.backwardCoord=seg.forwardCoord-(seg.forwardCoord-seriesBackwardCoord)/(seriesBackwardPressure+1),i=0;i<forwardSegs.length;i++)computeSlotSegCoords(forwardSegs[i],0,seg.forwardCoord)}function flattenSlotSegLevels(levels){var i,level,j,segs=[];for(i=0;i<levels.length;i++)for(level=levels[i],j=0;j<level.length;j++)segs.push(level[j]);return segs}function computeSlotSegCollisions(seg,otherSegs,results){results=results||[];for(var i=0;i<otherSegs.length;i++)isSlotSegCollision(seg,otherSegs[i])&&results.push(otherSegs[i]);return results}function isSlotSegCollision(seg1,seg2){return seg1.end>seg2.start&&seg1.start<seg2.end}function compareForwardSlotSegs(seg1,seg2){return seg2.forwardPressure-seg1.forwardPressure||(seg1.backwardCoord||0)-(seg2.backwardCoord||0)||compareSlotSegs(seg1,seg2)}function compareSlotSegs(seg1,seg2){return seg1.start-seg2.start||seg2.end-seg2.start-(seg1.end-seg1.start)||(seg1.event.title||"").localeCompare(seg2.event.title)}function View(element,calendar,viewName){function opt(name,viewNameOverride){var v=options[name];return $.isPlainObject(v)?smartProperty(v,viewNameOverride||viewName):v}function trigger(name,thisObj){return calendar.trigger.apply(calendar,[name,thisObj||t].concat(Array.prototype.slice.call(arguments,2),[t]))}function isEventDraggable(event){var source=event.source||{};return firstDefined(event.startEditable,source.startEditable,opt("eventStartEditable"),event.editable,source.editable,opt("editable"))&&!opt("disableDragging")}function isEventResizable(event){var source=event.source||{};return firstDefined(event.durationEditable,source.durationEditable,opt("eventDurationEditable"),event.editable,source.editable,opt("editable"))&&!opt("disableResizing")}function setEventData(events){eventsByID={};var i,event,len=events.length;for(i=0;len>i;i++)event=events[i],eventsByID[event._id]?eventsByID[event._id].push(event):eventsByID[event._id]=[event]}function clearEventData(){eventsByID={},eventElementsByID={},eventElementCouples=[]}function eventEnd(event){return event.end?cloneDate(event.end):defaultEventEnd(event)}function reportEventElement(event,element){eventElementCouples.push({event:event,element:element}),eventElementsByID[event._id]?eventElementsByID[event._id].push(element):eventElementsByID[event._id]=[element]}function triggerEventDestroy(){$.each(eventElementCouples,function(i,couple){t.trigger("eventDestroy",couple.event,couple.event,couple.element)})}function eventElementHandlers(event,eventElement){eventElement.click(function(ev){return eventElement.hasClass("ui-draggable-dragging")||eventElement.hasClass("ui-resizable-resizing")?void 0:trigger("eventClick",this,event,ev)}).hover(function(ev){trigger("eventMouseover",this,event,ev)},function(ev){trigger("eventMouseout",this,event,ev)})}function showEvents(event,exceptElement){eachEventElement(event,exceptElement,"show")}function hideEvents(event,exceptElement){eachEventElement(event,exceptElement,"hide")}function eachEventElement(event,exceptElement,funcName){var i,elements=eventElementsByID[event._id],len=elements.length;for(i=0;len>i;i++)exceptElement&&elements[i][0]==exceptElement[0]||elements[i][funcName]()}function eventDrop(e,event,dayDelta,minuteDelta,allDay,ev,ui){var oldAllDay=event.allDay,eventId=event._id;moveEvents(eventsByID[eventId],dayDelta,minuteDelta,allDay),trigger("eventDrop",e,event,dayDelta,minuteDelta,allDay,function(){moveEvents(eventsByID[eventId],-dayDelta,-minuteDelta,oldAllDay),reportEventChange(eventId)},ev,ui),reportEventChange(eventId)}function eventResize(e,event,dayDelta,minuteDelta,ev,ui){var eventId=event._id;elongateEvents(eventsByID[eventId],dayDelta,minuteDelta),trigger("eventResize",e,event,dayDelta,minuteDelta,function(){elongateEvents(eventsByID[eventId],-dayDelta,-minuteDelta),reportEventChange(eventId)},ev,ui),reportEventChange(eventId)}function moveEvents(events,dayDelta,minuteDelta,allDay){minuteDelta=minuteDelta||0;for(var e,len=events.length,i=0;len>i;i++)e=events[i],allDay!==undefined&&(e.allDay=allDay),addMinutes(addDays(e.start,dayDelta,!0),minuteDelta),e.end&&(e.end=addMinutes(addDays(e.end,dayDelta,!0),minuteDelta)),normalizeEvent(e,options)}function elongateEvents(events,dayDelta,minuteDelta){minuteDelta=minuteDelta||0;for(var e,len=events.length,i=0;len>i;i++)e=events[i],e.end=addMinutes(addDays(eventEnd(e),dayDelta,!0),minuteDelta),normalizeEvent(e,options)}function isHiddenDay(day){return"object"==typeof day&&(day=day.getDay()),isHiddenDayHash[day]}function getCellsPerWeek(){return cellsPerWeek
}function skipHiddenDays(date,inc,isExclusive){for(inc=inc||1;isHiddenDayHash[(date.getDay()+(isExclusive?inc:0)+7)%7];)addDays(date,inc)}function cellToDate(){var cellOffset=cellToCellOffset.apply(null,arguments),dayOffset=cellOffsetToDayOffset(cellOffset),date=dayOffsetToDate(dayOffset);return date}function cellToCellOffset(row,col){var colCnt=t.getColCnt(),dis=isRTL?-1:1,dit=isRTL?colCnt-1:0;"object"==typeof row&&(col=row.col,row=row.row);var cellOffset=row*colCnt+(col*dis+dit);return cellOffset}function cellOffsetToDayOffset(cellOffset){var day0=t.visStart.getDay();return cellOffset+=dayToCellMap[day0],7*Math.floor(cellOffset/cellsPerWeek)+cellToDayMap[(cellOffset%cellsPerWeek+cellsPerWeek)%cellsPerWeek]-day0}function dayOffsetToDate(dayOffset){var date=cloneDate(t.visStart);return addDays(date,dayOffset),date}function dateToCell(date){var dayOffset=dateToDayOffset(date),cellOffset=dayOffsetToCellOffset(dayOffset),cell=cellOffsetToCell(cellOffset);return cell}function dateToDayOffset(date){return dayDiff(date,t.visStart)}function dayOffsetToCellOffset(dayOffset){var day0=t.visStart.getDay();return dayOffset+=day0,Math.floor(dayOffset/7)*cellsPerWeek+dayToCellMap[(dayOffset%7+7)%7]-dayToCellMap[day0]}function cellOffsetToCell(cellOffset){var colCnt=t.getColCnt(),dis=isRTL?-1:1,dit=isRTL?colCnt-1:0,row=Math.floor(cellOffset/colCnt),col=(cellOffset%colCnt+colCnt)%colCnt*dis+dit;return{row:row,col:col}}function rangeToSegments(startDate,endDate){for(var rowCnt=t.getRowCnt(),colCnt=t.getColCnt(),segments=[],rangeDayOffsetStart=dateToDayOffset(startDate),rangeDayOffsetEnd=dateToDayOffset(endDate),rangeCellOffsetFirst=dayOffsetToCellOffset(rangeDayOffsetStart),rangeCellOffsetLast=dayOffsetToCellOffset(rangeDayOffsetEnd)-1,row=0;rowCnt>row;row++){var rowCellOffsetFirst=row*colCnt,rowCellOffsetLast=rowCellOffsetFirst+colCnt-1,segmentCellOffsetFirst=Math.max(rangeCellOffsetFirst,rowCellOffsetFirst),segmentCellOffsetLast=Math.min(rangeCellOffsetLast,rowCellOffsetLast);if(segmentCellOffsetLast>=segmentCellOffsetFirst){var segmentCellFirst=cellOffsetToCell(segmentCellOffsetFirst),segmentCellLast=cellOffsetToCell(segmentCellOffsetLast),cols=[segmentCellFirst.col,segmentCellLast.col].sort(),isStart=cellOffsetToDayOffset(segmentCellOffsetFirst)==rangeDayOffsetStart,isEnd=cellOffsetToDayOffset(segmentCellOffsetLast)+1==rangeDayOffsetEnd;segments.push({row:row,leftCol:cols[0],rightCol:cols[1],isStart:isStart,isEnd:isEnd})}}return segments}var t=this;t.element=element,t.calendar=calendar,t.name=viewName,t.opt=opt,t.trigger=trigger,t.isEventDraggable=isEventDraggable,t.isEventResizable=isEventResizable,t.setEventData=setEventData,t.clearEventData=clearEventData,t.eventEnd=eventEnd,t.reportEventElement=reportEventElement,t.triggerEventDestroy=triggerEventDestroy,t.eventElementHandlers=eventElementHandlers,t.showEvents=showEvents,t.hideEvents=hideEvents,t.eventDrop=eventDrop,t.eventResize=eventResize;var defaultEventEnd=t.defaultEventEnd,normalizeEvent=calendar.normalizeEvent,reportEventChange=calendar.reportEventChange,eventsByID={},eventElementsByID={},eventElementCouples=[],options=calendar.options;t.isHiddenDay=isHiddenDay,t.skipHiddenDays=skipHiddenDays,t.getCellsPerWeek=getCellsPerWeek,t.dateToCell=dateToCell,t.dateToDayOffset=dateToDayOffset,t.dayOffsetToCellOffset=dayOffsetToCellOffset,t.cellOffsetToCell=cellOffsetToCell,t.cellToDate=cellToDate,t.cellToCellOffset=cellToCellOffset,t.cellOffsetToDayOffset=cellOffsetToDayOffset,t.dayOffsetToDate=dayOffsetToDate,t.rangeToSegments=rangeToSegments;var cellsPerWeek,hiddenDays=opt("hiddenDays")||[],isHiddenDayHash=[],dayToCellMap=[],cellToDayMap=[],isRTL=opt("isRTL");!function(){opt("weekends")===!1&&hiddenDays.push(0,6);for(var dayIndex=0,cellIndex=0;7>dayIndex;dayIndex++)dayToCellMap[dayIndex]=cellIndex,isHiddenDayHash[dayIndex]=-1!=$.inArray(dayIndex,hiddenDays),isHiddenDayHash[dayIndex]||(cellToDayMap[cellIndex]=dayIndex,cellIndex++);if(cellsPerWeek=cellIndex,!cellsPerWeek)throw"invalid hiddenDays"}()}function DayEventRenderer(){function renderDayEvents(events,modifiedEventId){var segments=_renderDayEvents(events,!1,!0);segmentElementEach(segments,function(segment,element){reportEventElement(segment.event,element)}),attachHandlers(segments,modifiedEventId),segmentElementEach(segments,function(segment,element){trigger("eventAfterRender",segment.event,segment.event,element)})}function renderTempDayEvent(event,adjustRow,adjustTop){var segments=_renderDayEvents([event],!0,!1),elements=[];return segmentElementEach(segments,function(segment,element){segment.row===adjustRow&&element.css("top",adjustTop),elements.push(element[0])}),elements}function _renderDayEvents(events,doAppend,doRowHeights){var html,elements,finalContainer=getDaySegmentContainer(),renderContainer=doAppend?$("<div/>"):finalContainer,segments=buildSegments(events);return calculateHorizontals(segments),html=buildHTML(segments),renderContainer[0].innerHTML=html,elements=renderContainer.children(),doAppend&&finalContainer.append(elements),resolveElements(segments,elements),segmentElementEach(segments,function(segment,element){segment.hsides=hsides(element,!0)}),segmentElementEach(segments,function(segment,element){element.width(Math.max(0,segment.outerWidth-segment.hsides))}),segmentElementEach(segments,function(segment,element){segment.outerHeight=element.outerHeight(!0)}),setVerticals(segments,doRowHeights),segments}function buildSegments(events){for(var segments=[],i=0;i<events.length;i++){var eventSegments=buildSegmentsForEvent(events[i]);segments.push.apply(segments,eventSegments)}return segments}function buildSegmentsForEvent(event){for(var startDate=event.start,endDate=exclEndDay(event),segments=rangeToSegments(startDate,endDate),i=0;i<segments.length;i++)segments[i].event=event;return segments}function calculateHorizontals(segments){for(var isRTL=opt("isRTL"),i=0;i<segments.length;i++){var segment=segments[i],leftFunc=(isRTL?segment.isEnd:segment.isStart)?colContentLeft:colLeft,rightFunc=(isRTL?segment.isStart:segment.isEnd)?colContentRight:colRight,left=leftFunc(segment.leftCol),right=rightFunc(segment.rightCol);segment.left=left,segment.outerWidth=right-left}}function buildHTML(segments){for(var html="",i=0;i<segments.length;i++)html+=buildHTMLForSegment(segments[i]);return html}function buildHTMLForSegment(segment){var html="",isRTL=opt("isRTL"),event=segment.event,url=event.url,classNames=["fc-event","fc-event-hori"];isEventDraggable(event)&&classNames.push("fc-event-draggable"),segment.isStart&&classNames.push("fc-event-start"),segment.isEnd&&classNames.push("fc-event-end"),classNames=classNames.concat(event.className),event.source&&(classNames=classNames.concat(event.source.className||[]));var skinCss=getSkinCss(event,opt);return html+=url?"<a href='"+htmlEscape(url)+"'":"<div",html+=" class='"+classNames.join(" ")+"' style='position:absolute;left:"+segment.left+"px;"+skinCss+"'><div class='fc-event-inner'>",!event.allDay&&segment.isStart&&(html+="<span class='fc-event-time'>"+htmlEscape(formatDates(event.start,event.end,opt("timeFormat")))+"</span>"),html+="<span class='fc-event-title'>"+htmlEscape(event.title||"")+"</span></div>",segment.isEnd&&isEventResizable(event)&&(html+="<div class='ui-resizable-handle ui-resizable-"+(isRTL?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>"),html+="</"+(url?"a":"div")+">"}function resolveElements(segments,elements){for(var i=0;i<segments.length;i++){var segment=segments[i],event=segment.event,element=elements.eq(i),triggerRes=trigger("eventRender",event,event,element);triggerRes===!1?element.remove():(triggerRes&&triggerRes!==!0&&(triggerRes=$(triggerRes).css({position:"absolute",left:segment.left}),element.replaceWith(triggerRes),element=triggerRes),segment.element=element)}}function setVerticals(segments,doRowHeights){var rowContentHeights=calculateVerticals(segments),rowContentElements=getRowContentElements(),rowContentTops=[];if(doRowHeights)for(var i=0;i<rowContentElements.length;i++)rowContentElements[i].height(rowContentHeights[i]);for(var i=0;i<rowContentElements.length;i++)rowContentTops.push(rowContentElements[i].position().top);segmentElementEach(segments,function(segment,element){element.css("top",rowContentTops[segment.row]+segment.top)})}function calculateVerticals(segments){for(var rowCnt=getRowCnt(),colCnt=getColCnt(),rowContentHeights=[],segmentRows=buildSegmentRows(segments),rowI=0;rowCnt>rowI;rowI++){for(var segmentRow=segmentRows[rowI],colHeights=[],colI=0;colCnt>colI;colI++)colHeights.push(0);for(var segmentI=0;segmentI<segmentRow.length;segmentI++){var segment=segmentRow[segmentI];segment.top=arrayMax(colHeights.slice(segment.leftCol,segment.rightCol+1));for(var colI=segment.leftCol;colI<=segment.rightCol;colI++)colHeights[colI]=segment.top+segment.outerHeight}rowContentHeights.push(arrayMax(colHeights))}return rowContentHeights}function buildSegmentRows(segments){var segmentI,segment,rowI,rowCnt=getRowCnt(),segmentRows=[];for(segmentI=0;segmentI<segments.length;segmentI++)segment=segments[segmentI],rowI=segment.row,segment.element&&(segmentRows[rowI]?segmentRows[rowI].push(segment):segmentRows[rowI]=[segment]);for(rowI=0;rowCnt>rowI;rowI++)segmentRows[rowI]=sortSegmentRow(segmentRows[rowI]||[]);return segmentRows}function sortSegmentRow(segments){for(var sortedSegments=[],subrows=buildSegmentSubrows(segments),i=0;i<subrows.length;i++)sortedSegments.push.apply(sortedSegments,subrows[i]);return sortedSegments}function buildSegmentSubrows(segments){segments.sort(compareDaySegments);for(var subrows=[],i=0;i<segments.length;i++){for(var segment=segments[i],j=0;j<subrows.length&&isDaySegmentCollision(segment,subrows[j]);j++);subrows[j]?subrows[j].push(segment):subrows[j]=[segment]}return subrows}function getRowContentElements(){var i,rowCnt=getRowCnt(),rowDivs=[];for(i=0;rowCnt>i;i++)rowDivs[i]=allDayRow(i).find("div.fc-day-content > div");return rowDivs}function attachHandlers(segments,modifiedEventId){var segmentContainer=getDaySegmentContainer();segmentElementEach(segments,function(segment,element,i){var event=segment.event;event._id===modifiedEventId?bindDaySeg(event,element,segment):element[0]._fci=i}),lazySegBind(segmentContainer,segments,bindDaySeg)}function bindDaySeg(event,eventElement,segment){isEventDraggable(event)&&t.draggableDayEvent(event,eventElement,segment),segment.isEnd&&isEventResizable(event)&&t.resizableDayEvent(event,eventElement,segment),eventElementHandlers(event,eventElement)}function draggableDayEvent(event,eventElement){var dayDelta,hoverListener=getHoverListener();eventElement.draggable({delay:50,opacity:opt("dragOpacity"),revertDuration:opt("dragRevertDuration"),start:function(ev,ui){trigger("eventDragStart",eventElement,event,ev,ui),hideEvents(event,eventElement),hoverListener.start(function(cell,origCell,rowDelta,colDelta){if(eventElement.draggable("option","revert",!cell||!rowDelta&&!colDelta),clearOverlays(),cell){var origDate=cellToDate(origCell),date=cellToDate(cell);dayDelta=dayDiff(date,origDate),renderDayOverlay(addDays(cloneDate(event.start),dayDelta),addDays(exclEndDay(event),dayDelta))}else dayDelta=0},ev,"drag")},stop:function(ev,ui){hoverListener.stop(),clearOverlays(),trigger("eventDragStop",eventElement,event,ev,ui),dayDelta?eventDrop(this,event,dayDelta,0,event.allDay,ev,ui):(eventElement.css("filter",""),showEvents(event,eventElement))}})}function resizableDayEvent(event,element,segment){var isRTL=opt("isRTL"),direction=isRTL?"w":"e",handle=element.find(".ui-resizable-"+direction),isResizing=!1;disableTextSelection(element),element.mousedown(function(ev){ev.preventDefault()}).click(function(ev){isResizing&&(ev.preventDefault(),ev.stopImmediatePropagation())}),handle.mousedown(function(ev){function mouseup(ev){trigger("eventResizeStop",this,event,ev),$("body").css("cursor",""),hoverListener.stop(),clearOverlays(),dayDelta&&eventResize(this,event,dayDelta,0,ev),setTimeout(function(){isResizing=!1},0)}if(1==ev.which){isResizing=!0;var dayDelta,helpers,hoverListener=getHoverListener(),elementTop=(getRowCnt(),getColCnt(),element.css("top")),eventCopy=$.extend({},event),minCellOffset=dayOffsetToCellOffset(dateToDayOffset(event.start));clearSelection(),$("body").css("cursor",direction+"-resize").one("mouseup",mouseup),trigger("eventResizeStart",this,event,ev),hoverListener.start(function(cell,origCell){if(cell){var origCellOffset=cellToCellOffset(origCell),cellOffset=cellToCellOffset(cell);if(cellOffset=Math.max(cellOffset,minCellOffset),dayDelta=cellOffsetToDayOffset(cellOffset)-cellOffsetToDayOffset(origCellOffset)){eventCopy.end=addDays(eventEnd(event),dayDelta,!0);var oldHelpers=helpers;helpers=renderTempDayEvent(eventCopy,segment.row,elementTop),helpers=$(helpers),helpers.find("*").css("cursor",direction+"-resize"),oldHelpers&&oldHelpers.remove(),hideEvents(event)}else helpers&&(showEvents(event),helpers.remove(),helpers=null);clearOverlays(),renderDayOverlay(event.start,addDays(exclEndDay(event),dayDelta))}},ev)}})}var t=this;t.renderDayEvents=renderDayEvents,t.draggableDayEvent=draggableDayEvent,t.resizableDayEvent=resizableDayEvent;var opt=t.opt,trigger=t.trigger,isEventDraggable=t.isEventDraggable,isEventResizable=t.isEventResizable,eventEnd=t.eventEnd,reportEventElement=t.reportEventElement,eventElementHandlers=t.eventElementHandlers,showEvents=t.showEvents,hideEvents=t.hideEvents,eventDrop=t.eventDrop,eventResize=t.eventResize,getRowCnt=t.getRowCnt,getColCnt=t.getColCnt,allDayRow=(t.getColWidth,t.allDayRow),colLeft=t.colLeft,colRight=t.colRight,colContentLeft=t.colContentLeft,colContentRight=t.colContentRight,getDaySegmentContainer=(t.dateToCell,t.getDaySegmentContainer),formatDates=t.calendar.formatDates,renderDayOverlay=t.renderDayOverlay,clearOverlays=t.clearOverlays,clearSelection=t.clearSelection,getHoverListener=t.getHoverListener,rangeToSegments=t.rangeToSegments,cellToDate=t.cellToDate,cellToCellOffset=t.cellToCellOffset,cellOffsetToDayOffset=t.cellOffsetToDayOffset,dateToDayOffset=t.dateToDayOffset,dayOffsetToCellOffset=t.dayOffsetToCellOffset}function isDaySegmentCollision(segment,otherSegments){for(var i=0;i<otherSegments.length;i++){var otherSegment=otherSegments[i];if(otherSegment.leftCol<=segment.rightCol&&otherSegment.rightCol>=segment.leftCol)return!0}return!1}function segmentElementEach(segments,callback){for(var i=0;i<segments.length;i++){var segment=segments[i],element=segment.element;element&&callback(segment,element,i)}}function compareDaySegments(a,b){return b.rightCol-b.leftCol-(a.rightCol-a.leftCol)||b.event.allDay-a.event.allDay||a.event.start-b.event.start||(a.event.title||"").localeCompare(b.event.title)}function SelectionManager(){function select(startDate,endDate,allDay){unselect(),endDate||(endDate=defaultSelectionEnd(startDate,allDay)),renderSelection(startDate,endDate,allDay),reportSelection(startDate,endDate,allDay)}function unselect(ev){selected&&(selected=!1,clearSelection(),trigger("unselect",null,ev))}function reportSelection(startDate,endDate,allDay,ev){selected=!0,trigger("select",null,startDate,endDate,allDay,ev)}function daySelectionMousedown(ev){var cellToDate=t.cellToDate,getIsCellAllDay=t.getIsCellAllDay,hoverListener=t.getHoverListener(),reportDayClick=t.reportDayClick;if(1==ev.which&&opt("selectable")){unselect(ev);var dates;hoverListener.start(function(cell,origCell){clearSelection(),cell&&getIsCellAllDay(cell)?(dates=[cellToDate(origCell),cellToDate(cell)].sort(dateCompare),renderSelection(dates[0],dates[1],!0)):dates=null},ev),$(document).one("mouseup",function(ev){hoverListener.stop(),dates&&(+dates[0]==+dates[1]&&reportDayClick(dates[0],!0,ev),reportSelection(dates[0],dates[1],!0,ev))})}}var t=this;t.select=select,t.unselect=unselect,t.reportSelection=reportSelection,t.daySelectionMousedown=daySelectionMousedown;var opt=t.opt,trigger=t.trigger,defaultSelectionEnd=t.defaultSelectionEnd,renderSelection=t.renderSelection,clearSelection=t.clearSelection,selected=!1;opt("selectable")&&opt("unselectAuto")&&$(document).mousedown(function(ev){var ignore=opt("unselectCancel");ignore&&$(ev.target).parents(ignore).length||unselect(ev)})}function OverlayManager(){function renderOverlay(rect,parent){var e=unusedOverlays.shift();return e||(e=$("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")),e[0].parentNode!=parent[0]&&e.appendTo(parent),usedOverlays.push(e.css(rect).show()),e}function clearOverlays(){for(var e;e=usedOverlays.shift();)unusedOverlays.push(e.hide().unbind())}var t=this;t.renderOverlay=renderOverlay,t.clearOverlays=clearOverlays;var usedOverlays=[],unusedOverlays=[]}function CoordinateGrid(buildFunc){var rows,cols,t=this;t.build=function(){rows=[],cols=[],buildFunc(rows,cols)},t.cell=function(x,y){var i,rowCnt=rows.length,colCnt=cols.length,r=-1,c=-1;for(i=0;rowCnt>i;i++)if(y>=rows[i][0]&&y<rows[i][1]){r=i;break}for(i=0;colCnt>i;i++)if(x>=cols[i][0]&&x<cols[i][1]){c=i;break}return r>=0&&c>=0?{row:r,col:c}:null},t.rect=function(row0,col0,row1,col1,originElement){var origin=originElement.offset();return{top:rows[row0][0]-origin.top,left:cols[col0][0]-origin.left,width:cols[col1][1]-cols[col0][0],height:rows[row1][1]-rows[row0][0]}}}function HoverListener(coordinateGrid){function mouse(ev){_fixUIEvent(ev);var newCell=coordinateGrid.cell(ev.pageX,ev.pageY);(!newCell!=!cell||newCell&&(newCell.row!=cell.row||newCell.col!=cell.col))&&(newCell?(firstCell||(firstCell=newCell),change(newCell,firstCell,newCell.row-firstCell.row,newCell.col-firstCell.col)):change(newCell,firstCell),cell=newCell)}var bindType,change,firstCell,cell,t=this;t.start=function(_change,ev,_bindType){change=_change,firstCell=cell=null,coordinateGrid.build(),mouse(ev),bindType=_bindType||"mousemove",$(document).bind(bindType,mouse)},t.stop=function(){return $(document).unbind(bindType,mouse),cell}}function _fixUIEvent(event){event.pageX===undefined&&(event.pageX=event.originalEvent.pageX,event.pageY=event.originalEvent.pageY)}function HorizontalPositionCache(getElement){function e(i){return elements[i]=elements[i]||getElement(i)}var t=this,elements={},lefts={},rights={};t.left=function(i){return lefts[i]=lefts[i]===undefined?e(i).position().left:lefts[i]},t.right=function(i){return rights[i]=rights[i]===undefined?t.left(i)+e(i).width():rights[i]},t.clear=function(){elements={},lefts={},rights={}}}var defaults={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"iso",weekNumberTitle:"W",allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"<span class='fc-text-arrow'>&lsaquo;</span>",next:"<span class='fc-text-arrow'>&rsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&laquo;</span>",nextYear:"<span class='fc-text-arrow'>&raquo;</span>",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*",handleWindowResize:!0},rtlDefaults={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"<span class='fc-text-arrow'>&rsaquo;</span>",next:"<span class='fc-text-arrow'>&lsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&raquo;</span>",nextYear:"<span class='fc-text-arrow'>&laquo;</span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},fc=$.fullCalendar={version:"1.6.6"},fcViews=fc.views={};$.fn.fullCalendar=function(options){if("string"==typeof options){var res,args=Array.prototype.slice.call(arguments,1);return this.each(function(){var calendar=$.data(this,"fullCalendar");if(calendar&&$.isFunction(calendar[options])){var r=calendar[options].apply(calendar,args);res===undefined&&(res=r),"destroy"==options&&$.removeData(this,"fullCalendar")}}),res!==undefined?res:this}options=options||{};var eventSources=options.eventSources||[];return delete options.eventSources,options.events&&(eventSources.push(options.events),delete options.events),options=$.extend(!0,{},defaults,options.isRTL||options.isRTL===undefined&&defaults.isRTL?rtlDefaults:{},options),this.each(function(i,_element){var element=$(_element),calendar=new Calendar(element,options,eventSources);element.data("fullCalendar",calendar),calendar.render()}),this},fc.sourceNormalizers=[],fc.sourceFetchers=[];var ajaxDefaults={dataType:"json",cache:!1},eventGUID=1;fc.addDays=addDays,fc.cloneDate=cloneDate,fc.parseDate=parseDate,fc.parseISO8601=parseISO8601,fc.parseTime=parseTime,fc.formatDate=formatDate,fc.formatDates=formatDates;var dayIDs=["sun","mon","tue","wed","thu","fri","sat"],DAY_MS=864e5,HOUR_MS=36e5,MINUTE_MS=6e4,dateFormatters={s:function(d){return d.getSeconds()},ss:function(d){return zeroPad(d.getSeconds())},m:function(d){return d.getMinutes()},mm:function(d){return zeroPad(d.getMinutes())},h:function(d){return d.getHours()%12||12},hh:function(d){return zeroPad(d.getHours()%12||12)},H:function(d){return d.getHours()},HH:function(d){return zeroPad(d.getHours())},d:function(d){return d.getDate()},dd:function(d){return zeroPad(d.getDate())},ddd:function(d,o){return o.dayNamesShort[d.getDay()]},dddd:function(d,o){return o.dayNames[d.getDay()]},M:function(d){return d.getMonth()+1},MM:function(d){return zeroPad(d.getMonth()+1)},MMM:function(d,o){return o.monthNamesShort[d.getMonth()]},MMMM:function(d,o){return o.monthNames[d.getMonth()]},yy:function(d){return(d.getFullYear()+"").substring(2)},yyyy:function(d){return d.getFullYear()},t:function(d){return d.getHours()<12?"a":"p"},tt:function(d){return d.getHours()<12?"am":"pm"},T:function(d){return d.getHours()<12?"A":"P"},TT:function(d){return d.getHours()<12?"AM":"PM"},u:function(d){return formatDate(d,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(d){var date=d.getDate();return date>10&&20>date?"th":["st","nd","rd"][date%10-1]||"th"},w:function(d,o){return o.weekNumberCalculation(d)},W:function(d){return iso8601Week(d)}};fc.dateFormatters=dateFormatters,fc.applyAll=applyAll,fcViews.month=MonthView,fcViews.basicWeek=BasicWeekView,fcViews.basicDay=BasicDayView,setDefaults({weekMode:"fixed"}),fcViews.agendaWeek=AgendaWeekView,fcViews.agendaDay=AgendaDayView,setDefaults({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24,slotEventOverlap:!0})}(jQuery),define("fullcalendar",function(){}),angular.module("ui.calendar",[]).constant("uiCalendarConfig",{}).controller("uiCalendarCtrl",["$scope","$timeout",function($scope,$timeout){var sourceSerialId=1,eventSerialId=1,sources=$scope.eventSources,extraEventSignature=$scope.calendarWatchEvent?$scope.calendarWatchEvent:angular.noop,wrapFunctionWithScopeApply=function(functionToWrap){var wrapper;return functionToWrap&&(wrapper=function(){var args=arguments;$timeout(function(){functionToWrap.apply(this,args)})}),wrapper};this.eventsFingerprint=function(e){return e.__uiCalId||(e.__uiCalId=eventSerialId++),""+e.__uiCalId+(e.id||"")+(e.title||"")+(e.url||"")+(+e.start||"")+(+e.end||"")+(e.allDay||"")+(e.className||"")+extraEventSignature(e)||""},this.sourcesFingerprint=function(source){return source.__id||(source.__id=sourceSerialId++)},this.allEvents=function(){for(var arraySources=[],i=0,srcLen=sources.length;srcLen>i;i++){var source=sources[i];if(angular.isArray(source))arraySources.push(source);else if(angular.isObject(source)&&angular.isArray(source.events)){var extEvent={};for(var key in source)"_uiCalId"!==key&&"events"!==key&&(extEvent[key]=source[key]);for(var eI=0;eI<source.events.length;eI++)angular.extend(source.events[eI],extEvent);arraySources.push(source.events)}}return Array.prototype.concat.apply([],arraySources)},this.changeWatcher=function(arraySource,tokenFn){var self,getTokens=function(){for(var token,el,array=angular.isFunction(arraySource)?arraySource():arraySource,result=[],i=0,n=array.length;n>i;i++)el=array[i],token=tokenFn(el),map[token]=el,result.push(token);return result},subtractAsSets=function(a,b){var i,n,result=[],inB={};for(i=0,n=b.length;n>i;i++)inB[b[i]]=!0;for(i=0,n=a.length;n>i;i++)inB[a[i]]||result.push(a[i]);return result},map={},applyChanges=function(newTokens,oldTokens){var i,n,el,token,replacedTokens={},removedTokens=subtractAsSets(oldTokens,newTokens);for(i=0,n=removedTokens.length;n>i;i++){var removedToken=removedTokens[i];el=map[removedToken],delete map[removedToken];var newToken=tokenFn(el);newToken===removedToken?self.onRemoved(el):(replacedTokens[newToken]=removedToken,self.onChanged(el))}var addedTokens=subtractAsSets(newTokens,oldTokens);for(i=0,n=addedTokens.length;n>i;i++)token=addedTokens[i],el=map[token],replacedTokens[token]||self.onAdded(el)};return self={subscribe:function(scope,onChanged){scope.$watch(getTokens,function(newTokens,oldTokens){onChanged&&onChanged(newTokens,oldTokens)===!1||applyChanges(newTokens,oldTokens)},!0)},onAdded:angular.noop,onChanged:angular.noop,onRemoved:angular.noop}},this.getFullCalendarConfig=function(calendarSettings,uiCalendarConfig){var config={};return angular.extend(config,uiCalendarConfig),angular.extend(config,calendarSettings),angular.forEach(config,function(value,key){"function"==typeof value&&(config[key]=wrapFunctionWithScopeApply(config[key]))}),config}}]).directive("uiCalendar",["uiCalendarConfig","$locale",function(uiCalendarConfig,$locale){var tValues=function(data){var r,k;r=[];for(k in data)r[k]=data[k];return r},dtf=$locale.DATETIME_FORMATS;return uiCalendarConfig=angular.extend({monthNames:tValues(dtf.MONTH),monthNamesShort:tValues(dtf.SHORTMONTH),dayNames:tValues(dtf.DAY),dayNamesShort:tValues(dtf.SHORTDAY)},uiCalendarConfig||{}),{restrict:"A",scope:{eventSources:"=ngModel",calendarWatchEvent:"&"},controller:"uiCalendarCtrl",link:function(scope,elm,attrs,controller){function getOptions(){var fullCalendarConfig,calendarSettings=attrs.uiCalendar?scope.$parent.$eval(attrs.uiCalendar):{};fullCalendarConfig=controller.getFullCalendarConfig(calendarSettings,uiCalendarConfig),options={eventSources:sources},angular.extend(options,fullCalendarConfig);var options2={};for(var o in options)"eventSources"!==o&&(options2[o]=options[o]);return JSON.stringify(options2)}var sources=scope.eventSources,sourcesChanged=!1,eventSourcesWatcher=controller.changeWatcher(sources,controller.sourcesFingerprint),eventsWatcher=controller.changeWatcher(controller.allEvents,controller.eventsFingerprint),options=null;scope.destroy=function(){scope.calendar=attrs.calendar?scope.$parent[attrs.calendar]=elm.html(""):elm.html("")},scope.init=function(){scope.calendar.fullCalendar(options)},eventSourcesWatcher.onAdded=function(source){scope.calendar.fullCalendar("addEventSource",source),sourcesChanged=!0},eventSourcesWatcher.onRemoved=function(source){scope.calendar.fullCalendar("removeEventSource",source),sourcesChanged=!0},eventsWatcher.onAdded=function(event){scope.calendar.fullCalendar("renderEvent",event)},eventsWatcher.onRemoved=function(event){scope.calendar.fullCalendar("removeEvents",function(e){return e===event})},eventsWatcher.onChanged=function(event){scope.calendar.fullCalendar("updateEvent",event)},eventSourcesWatcher.subscribe(scope),eventsWatcher.subscribe(scope,function(){return sourcesChanged===!0?(sourcesChanged=!1,!1):void 0}),scope.$watch(getOptions,function(){scope.destroy(),scope.init()})}}}]),define("angular-ui-calendar",["jquery","jquery-ui","angular","bootstrap","moment","fullcalendar"],function(global){return function(){var ret,fn;return fn=function(){return this.angular.module("ui.calendar")},ret=fn.apply(global,arguments)}}(this)),define("core/moduleDef",["angular","angular-resource","angular-ui-router","angular-ui-bootstrap","angular-promise-tracker","./directives/angular-masonry/angular-masonry","lvl-dragdrop","blueimp-fileupload","./security/module","./common/tasks/module","./common/calendar/module","angular-sanitize","angular-cache","angular-bindonce","modernizr","retina","angular-ui-calendar"],function(angular){return angular.module("core.module",["ngResource","ui.router","ui.bootstrap","ajoslin.promise-tracker","ago.wu.masonry","blueimp.fileupload","core.security.module","ngLocale","lvl.directives.dragdrop","ngSanitize","jmdobry.angular-cache","pasvaz.bindonce","ui.calendar"])}),function(jQuery,window,undefined){function migrateWarn(msg){warnedAbout[msg]||(warnedAbout[msg]=!0,jQuery.migrateWarnings.push(msg),window.console&&console.warn&&!jQuery.migrateMute&&(console.warn("JQMIGRATE: "+msg),jQuery.migrateTrace&&console.trace&&console.trace()))}function migrateWarnProp(obj,prop,value,msg){if(Object.defineProperty)try{return void Object.defineProperty(obj,prop,{configurable:!0,enumerable:!0,get:function(){return migrateWarn(msg),value},set:function(newValue){migrateWarn(msg),value=newValue}})}catch(err){}jQuery._definePropertyBroken=!0,obj[prop]=value}var warnedAbout={};jQuery.migrateWarnings=[],!jQuery.migrateMute&&window.console&&console.log&&console.log("JQMIGRATE: Logging is active"),jQuery.migrateTrace===undefined&&(jQuery.migrateTrace=!0),jQuery.migrateReset=function(){warnedAbout={},jQuery.migrateWarnings.length=0},"BackCompat"===document.compatMode&&migrateWarn("jQuery is not compatible with Quirks Mode");var attrFn=jQuery("<input/>",{size:1}).attr("size")&&jQuery.attrFn,oldAttr=jQuery.attr,valueAttrGet=jQuery.attrHooks.value&&jQuery.attrHooks.value.get||function(){return null},valueAttrSet=jQuery.attrHooks.value&&jQuery.attrHooks.value.set||function(){return undefined},rnoType=/^(?:input|button)$/i,rnoAttrNodeType=/^[238]$/,rboolean=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,ruseDefault=/^(?:checked|selected)$/i;migrateWarnProp(jQuery,"attrFn",attrFn||{},"jQuery.attrFn is deprecated"),jQuery.attr=function(elem,name,value,pass){var lowerName=name.toLowerCase(),nType=elem&&elem.nodeType;return pass&&(oldAttr.length<4&&migrateWarn("jQuery.fn.attr( props, pass ) is deprecated"),elem&&!rnoAttrNodeType.test(nType)&&(attrFn?name in attrFn:jQuery.isFunction(jQuery.fn[name])))?jQuery(elem)[name](value):("type"===name&&value!==undefined&&rnoType.test(elem.nodeName)&&elem.parentNode&&migrateWarn("Can't change the 'type' of an input or button in IE 6/7/8"),!jQuery.attrHooks[lowerName]&&rboolean.test(lowerName)&&(jQuery.attrHooks[lowerName]={get:function(elem,name){var attrNode,property=jQuery.prop(elem,name);return property===!0||"boolean"!=typeof property&&(attrNode=elem.getAttributeNode(name))&&attrNode.nodeValue!==!1?name.toLowerCase():undefined},set:function(elem,value,name){var propName;return value===!1?jQuery.removeAttr(elem,name):(propName=jQuery.propFix[name]||name,propName in elem&&(elem[propName]=!0),elem.setAttribute(name,name.toLowerCase())),name}},ruseDefault.test(lowerName)&&migrateWarn("jQuery.fn.attr('"+lowerName+"') may use property instead of attribute")),oldAttr.call(jQuery,elem,name,value))},jQuery.attrHooks.value={get:function(elem,name){var nodeName=(elem.nodeName||"").toLowerCase();return"button"===nodeName?valueAttrGet.apply(this,arguments):("input"!==nodeName&&"option"!==nodeName&&migrateWarn("jQuery.fn.attr('value') no longer gets properties"),name in elem?elem.value:null)},set:function(elem,value){var nodeName=(elem.nodeName||"").toLowerCase();return"button"===nodeName?valueAttrSet.apply(this,arguments):("input"!==nodeName&&"option"!==nodeName&&migrateWarn("jQuery.fn.attr('value', val) no longer sets properties"),void(elem.value=value))}};var matched,browser,oldInit=jQuery.fn.init,oldParseJSON=jQuery.parseJSON,rquickExpr=/^(?:[^<]*(<[\w\W]+>)[^>]*|#([\w\-]*))$/;
jQuery.fn.init=function(selector,context,rootjQuery){var match;return selector&&"string"==typeof selector&&!jQuery.isPlainObject(context)&&(match=rquickExpr.exec(selector))&&match[1]&&("<"!==selector.charAt(0)&&migrateWarn("$(html) HTML strings must start with '<' character"),context&&context.context&&(context=context.context),jQuery.parseHTML)?oldInit.call(this,jQuery.parseHTML(jQuery.trim(selector),context,!0),context,rootjQuery):oldInit.apply(this,arguments)},jQuery.fn.init.prototype=jQuery.fn,jQuery.parseJSON=function(json){return json||null===json?oldParseJSON.apply(this,arguments):(migrateWarn("jQuery.parseJSON requires a valid JSON string"),null)},jQuery.uaMatch=function(ua){ua=ua.toLowerCase();var match=/(chrome)[ \/]([\w.]+)/.exec(ua)||/(webkit)[ \/]([\w.]+)/.exec(ua)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(ua)||/(msie) ([\w.]+)/.exec(ua)||ua.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(ua)||[];return{browser:match[1]||"",version:match[2]||"0"}},jQuery.browser||(matched=jQuery.uaMatch(navigator.userAgent),browser={},matched.browser&&(browser[matched.browser]=!0,browser.version=matched.version),browser.chrome?browser.webkit=!0:browser.webkit&&(browser.safari=!0),jQuery.browser=browser),migrateWarnProp(jQuery,"browser",jQuery.browser,"jQuery.browser is deprecated"),jQuery.sub=function(){function jQuerySub(selector,context){return new jQuerySub.fn.init(selector,context)}jQuery.extend(!0,jQuerySub,this),jQuerySub.superclass=this,jQuerySub.fn=jQuerySub.prototype=this(),jQuerySub.fn.constructor=jQuerySub,jQuerySub.sub=this.sub,jQuerySub.fn.init=function(selector,context){return context&&context instanceof jQuery&&!(context instanceof jQuerySub)&&(context=jQuerySub(context)),jQuery.fn.init.call(this,selector,context,rootjQuerySub)},jQuerySub.fn.init.prototype=jQuerySub.fn;var rootjQuerySub=jQuerySub(document);return migrateWarn("jQuery.sub() is deprecated"),jQuerySub},jQuery.ajaxSetup({converters:{"text json":jQuery.parseJSON}});var oldFnData=jQuery.fn.data;jQuery.fn.data=function(name){var ret,evt,elem=this[0];return!elem||"events"!==name||1!==arguments.length||(ret=jQuery.data(elem,name),evt=jQuery._data(elem,name),ret!==undefined&&ret!==evt||evt===undefined)?oldFnData.apply(this,arguments):(migrateWarn("Use of jQuery.fn.data('events') is deprecated"),evt)};var rscriptType=/\/(java|ecma)script/i,oldSelf=jQuery.fn.andSelf||jQuery.fn.addBack;jQuery.fn.andSelf=function(){return migrateWarn("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()"),oldSelf.apply(this,arguments)},jQuery.clean||(jQuery.clean=function(elems,context,fragment,scripts){context=context||document,context=!context.nodeType&&context[0]||context,context=context.ownerDocument||context,migrateWarn("jQuery.clean() is deprecated");var i,elem,handleScript,jsTags,ret=[];if(jQuery.merge(ret,jQuery.buildFragment(elems,context).childNodes),fragment)for(handleScript=function(elem){return!elem.type||rscriptType.test(elem.type)?scripts?scripts.push(elem.parentNode?elem.parentNode.removeChild(elem):elem):fragment.appendChild(elem):void 0},i=0;null!=(elem=ret[i]);i++)jQuery.nodeName(elem,"script")&&handleScript(elem)||(fragment.appendChild(elem),"undefined"!=typeof elem.getElementsByTagName&&(jsTags=jQuery.grep(jQuery.merge([],elem.getElementsByTagName("script")),handleScript),ret.splice.apply(ret,[i+1,0].concat(jsTags)),i+=jsTags.length));return ret});var eventAdd=jQuery.event.add,eventRemove=jQuery.event.remove,eventTrigger=jQuery.event.trigger,oldToggle=jQuery.fn.toggle,oldLive=jQuery.fn.live,oldDie=jQuery.fn.die,ajaxEvents="ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess",rajaxEvent=new RegExp("\\b(?:"+ajaxEvents+")\\b"),rhoverHack=/(?:^|\s)hover(\.\S+|)\b/,hoverHack=function(events){return"string"!=typeof events||jQuery.event.special.hover?events:(rhoverHack.test(events)&&migrateWarn("'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'"),events&&events.replace(rhoverHack,"mouseenter$1 mouseleave$1"))};jQuery.event.props&&"attrChange"!==jQuery.event.props[0]&&jQuery.event.props.unshift("attrChange","attrName","relatedNode","srcElement"),jQuery.event.dispatch&&migrateWarnProp(jQuery.event,"handle",jQuery.event.dispatch,"jQuery.event.handle is undocumented and deprecated"),jQuery.event.add=function(elem,types,handler,data,selector){elem!==document&&rajaxEvent.test(types)&&migrateWarn("AJAX events should be attached to document: "+types),eventAdd.call(this,elem,hoverHack(types||""),handler,data,selector)},jQuery.event.remove=function(elem,types,handler,selector,mappedTypes){eventRemove.call(this,elem,hoverHack(types)||"",handler,selector,mappedTypes)},jQuery.fn.error=function(){var args=Array.prototype.slice.call(arguments,0);return migrateWarn("jQuery.fn.error() is deprecated"),args.splice(0,0,"error"),arguments.length?this.bind.apply(this,args):(this.triggerHandler.apply(this,args),this)},jQuery.fn.toggle=function(fn,fn2){if(!jQuery.isFunction(fn)||!jQuery.isFunction(fn2))return oldToggle.apply(this,arguments);migrateWarn("jQuery.fn.toggle(handler, handler...) is deprecated");var args=arguments,guid=fn.guid||jQuery.guid++,i=0,toggler=function(event){var lastToggle=(jQuery._data(this,"lastToggle"+fn.guid)||0)%i;return jQuery._data(this,"lastToggle"+fn.guid,lastToggle+1),event.preventDefault(),args[lastToggle].apply(this,arguments)||!1};for(toggler.guid=guid;i<args.length;)args[i++].guid=guid;return this.click(toggler)},jQuery.fn.live=function(types,data,fn){return migrateWarn("jQuery.fn.live() is deprecated"),oldLive?oldLive.apply(this,arguments):(jQuery(this.context).on(types,this.selector,data,fn),this)},jQuery.fn.die=function(types,fn){return migrateWarn("jQuery.fn.die() is deprecated"),oldDie?oldDie.apply(this,arguments):(jQuery(this.context).off(types,this.selector||"**",fn),this)},jQuery.event.trigger=function(event,data,elem,onlyHandlers){return elem||rajaxEvent.test(event)||migrateWarn("Global events are undocumented and deprecated"),eventTrigger.call(this,event,data,elem||document,onlyHandlers)},jQuery.each(ajaxEvents.split("|"),function(_,name){jQuery.event.special[name]={setup:function(){var elem=this;return elem!==document&&(jQuery.event.add(document,name+"."+jQuery.guid,function(){jQuery.event.trigger(name,null,elem,!0)}),jQuery._data(this,name,jQuery.guid++)),!1},teardown:function(){return this!==document&&jQuery.event.remove(document,name+"."+jQuery._data(this,name)),!1}}})}(jQuery,window),define("jquery-migrate",["jquery"],function(global){return function(){var ret,fn;return fn=function(jQuery){jQuery.migrateMute=!0},ret=fn.apply(global,arguments)}}(this)),function(window,document,location,setTimeout,decodeURIComponent,encodeURIComponent){function isHostMethod(object,property){var t=typeof object[property];return"function"==t||!("object"!=t||!object[property])||"unknown"==t}function isHostObject(object,property){return!("object"!=typeof object[property]||!object[property])}function isArray(o){return"[object Array]"===Object.prototype.toString.call(o)}function hasFlash(){var name="Shockwave Flash",mimeType="application/x-shockwave-flash";if(!undef(navigator.plugins)&&"object"==typeof navigator.plugins[name]){var description=navigator.plugins[name].description;description&&!undef(navigator.mimeTypes)&&navigator.mimeTypes[mimeType]&&navigator.mimeTypes[mimeType].enabledPlugin&&(flashVersion=description.match(/\d+/g))}if(!flashVersion){var flash;try{flash=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),flashVersion=Array.prototype.slice.call(flash.GetVariable("$version").match(/(\d+),(\d+),(\d+),(\d+)/),1),flash=null}catch(notSupportedException){}}if(!flashVersion)return!1;var major=parseInt(flashVersion[0],10),minor=parseInt(flashVersion[1],10);return HAS_FLASH_THROTTLED_BUG=major>9&&minor>0,!0}function dom_onReady(){if(!domIsReady){domIsReady=!0;for(var i=0;i<domReadyQueue.length;i++)domReadyQueue[i]();domReadyQueue.length=0}}function whenReady(fn,scope){return domIsReady?void fn.call(scope):void domReadyQueue.push(function(){fn.call(scope)})}function getParentObject(){var obj=parent;if(""!==namespace)for(var i=0,ii=namespace.split(".");i<ii.length;i++)obj=obj[ii[i]];return obj.easyXDM}function noConflict(ns){return window.easyXDM=_easyXDM,namespace=ns,namespace&&(IFRAME_PREFIX="easyXDM_"+namespace.replace(".","_")+"_"),easyXDM}function getDomainName(url){return url.match(reURI)[3]}function getPort(url){return url.match(reURI)[4]||""}function getLocation(url){var m=url.toLowerCase().match(reURI),proto=m[2],domain=m[3],port=m[4]||"";return("http:"==proto&&":80"==port||"https:"==proto&&":443"==port)&&(port=""),proto+"//"+domain+port}function resolveUrl(url){if(url=url.replace(reDoubleSlash,"$1/"),!url.match(/^(http||https):\/\//)){var path="/"===url.substring(0,1)?"":location.pathname;"/"!==path.substring(path.length-1)&&(path=path.substring(0,path.lastIndexOf("/")+1)),url=location.protocol+"//"+location.host+path+url}for(;reParent.test(url);)url=url.replace(reParent,"");return url}function appendQueryParameters(url,parameters){var hash="",indexOf=url.indexOf("#");-1!==indexOf&&(hash=url.substring(indexOf),url=url.substring(0,indexOf));var q=[];for(var key in parameters)parameters.hasOwnProperty(key)&&q.push(key+"="+encodeURIComponent(parameters[key]));return url+(useHash?"#":-1==url.indexOf("?")?"?":"&")+q.join("&")+hash}function undef(v){return"undefined"==typeof v}function apply(destination,source,noOverwrite){var member;for(var prop in source)source.hasOwnProperty(prop)&&(prop in destination?(member=source[prop],"object"==typeof member?apply(destination[prop],member,noOverwrite):noOverwrite||(destination[prop]=source[prop])):destination[prop]=source[prop]);return destination}function testForNamePropertyBug(){var form=document.body.appendChild(document.createElement("form")),input=form.appendChild(document.createElement("input"));input.name=IFRAME_PREFIX+"TEST"+channelId,HAS_NAME_PROPERTY_BUG=input!==form.elements[input.name],document.body.removeChild(form)}function createFrame(config){undef(HAS_NAME_PROPERTY_BUG)&&testForNamePropertyBug();var frame;HAS_NAME_PROPERTY_BUG?frame=document.createElement('<iframe name="'+config.props.name+'"/>'):(frame=document.createElement("IFRAME"),frame.name=config.props.name),frame.id=frame.name=config.props.name,delete config.props.name,"string"==typeof config.container&&(config.container=document.getElementById(config.container)),config.container||(apply(frame.style,{position:"absolute",top:"-2000px",left:"0px"}),config.container=document.body);var src=config.props.src;if(config.props.src="javascript:false",apply(frame,config.props),frame.border=frame.frameBorder=0,frame.allowTransparency=!0,config.container.appendChild(frame),config.onLoad&&on(frame,"load",config.onLoad),config.usePost){var input,form=config.container.appendChild(document.createElement("form"));if(form.target=frame.name,form.action=src,form.method="POST","object"==typeof config.usePost)for(var i in config.usePost)config.usePost.hasOwnProperty(i)&&(HAS_NAME_PROPERTY_BUG?input=document.createElement('<input name="'+i+'"/>'):(input=document.createElement("INPUT"),input.name=i),input.value=config.usePost[i],form.appendChild(input));form.submit(),form.parentNode.removeChild(form)}else frame.src=src;return config.props.src=src,frame}function checkAcl(acl,domain){"string"==typeof acl&&(acl=[acl]);for(var re,i=acl.length;i--;)if(re=acl[i],re=new RegExp("^"==re.substr(0,1)?re:"^"+re.replace(/(\*)/g,".$1").replace(/\?/g,".")+"$"),re.test(domain))return!0;return!1}function prepareTransportStack(config){var stackEls,protocol=config.protocol;if(config.isHost=config.isHost||undef(query.xdm_p),useHash=config.hash||!1,config.props||(config.props={}),config.isHost)config.remote=resolveUrl(config.remote),config.channel=config.channel||"default"+channelId++,config.secret=Math.random().toString(16).substring(2),undef(protocol)&&(protocol=getLocation(location.href)==getLocation(config.remote)?"4":isHostMethod(window,"postMessage")||isHostMethod(document,"postMessage")?"1":config.swf&&isHostMethod(window,"ActiveXObject")&&hasFlash()?"6":"Gecko"===navigator.product&&"frameElement"in window&&-1==navigator.userAgent.indexOf("WebKit")?"5":config.remoteHelper?"2":"0");else if(config.channel=query.xdm_c.replace(/["'<>\\]/g,""),config.secret=query.xdm_s,config.remote=query.xdm_e.replace(/["'<>\\]/g,""),protocol=query.xdm_p,config.acl&&!checkAcl(config.acl,config.remote))throw new Error("Access denied for "+config.remote);switch(config.protocol=protocol,protocol){case"0":if(apply(config,{interval:100,delay:2e3,useResize:!0,useParent:!1,usePolling:!1},!0),config.isHost){if(!config.local){for(var image,domain=location.protocol+"//"+location.host,images=document.body.getElementsByTagName("img"),i=images.length;i--;)if(image=images[i],image.src.substring(0,domain.length)===domain){config.local=image.src;break}config.local||(config.local=window)}var parameters={xdm_c:config.channel,xdm_p:0};config.local===window?(config.usePolling=!0,config.useParent=!0,config.local=location.protocol+"//"+location.host+location.pathname+location.search,parameters.xdm_e=config.local,parameters.xdm_pa=1):parameters.xdm_e=resolveUrl(config.local),config.container&&(config.useResize=!1,parameters.xdm_po=1),config.remote=appendQueryParameters(config.remote,parameters)}else apply(config,{channel:query.xdm_c,remote:query.xdm_e,useParent:!undef(query.xdm_pa),usePolling:!undef(query.xdm_po),useResize:config.useParent?!1:config.useResize});stackEls=[new easyXDM.stack.HashTransport(config),new easyXDM.stack.ReliableBehavior({}),new easyXDM.stack.QueueBehavior({encode:!0,maxLength:4e3-config.remote.length}),new easyXDM.stack.VerifyBehavior({initiate:config.isHost})];break;case"1":stackEls=[new easyXDM.stack.PostMessageTransport(config)];break;case"2":config.remoteHelper=resolveUrl(config.remoteHelper),stackEls=[new easyXDM.stack.NameTransport(config),new easyXDM.stack.QueueBehavior,new easyXDM.stack.VerifyBehavior({initiate:config.isHost})];break;case"3":stackEls=[new easyXDM.stack.NixTransport(config)];break;case"4":stackEls=[new easyXDM.stack.SameOriginTransport(config)];break;case"5":stackEls=[new easyXDM.stack.FrameElementTransport(config)];break;case"6":flashVersion||hasFlash(),stackEls=[new easyXDM.stack.FlashTransport(config)]}return stackEls.push(new easyXDM.stack.QueueBehavior({lazy:config.lazy,remove:!0})),stackEls}function chainStack(stackElements){for(var stackEl,defaults={incoming:function(message,origin){this.up.incoming(message,origin)},outgoing:function(message,recipient){this.down.outgoing(message,recipient)},callback:function(success){this.up.callback(success)},init:function(){this.down.init()},destroy:function(){this.down.destroy()}},i=0,len=stackElements.length;len>i;i++)stackEl=stackElements[i],apply(stackEl,defaults,!0),0!==i&&(stackEl.down=stackElements[i-1]),i!==len-1&&(stackEl.up=stackElements[i+1]);return stackEl}function removeFromStack(element){element.up.down=element.down,element.down.up=element.up,element.up=element.down=null}var HAS_NAME_PROPERTY_BUG,flashVersion,HAS_FLASH_THROTTLED_BUG,on,un,global=this,channelId=Math.floor(1e4*Math.random()),emptyFn=Function.prototype,reURI=/^((http.?:)\/\/([^:\/\s]+)(:\d+)*)/,reParent=/[\-\w]+\/\.\.\//,reDoubleSlash=/([^:])\/\//g,namespace="",easyXDM={},_easyXDM=window.easyXDM,IFRAME_PREFIX="easyXDM_",useHash=!1;if(isHostMethod(window,"addEventListener"))on=function(target,type,listener){target.addEventListener(type,listener,!1)},un=function(target,type,listener){target.removeEventListener(type,listener,!1)};else{if(!isHostMethod(window,"attachEvent"))throw new Error("Browser not supported");on=function(object,sEvent,fpNotify){object.attachEvent("on"+sEvent,fpNotify)},un=function(object,sEvent,fpNotify){object.detachEvent("on"+sEvent,fpNotify)}}var readyState,domIsReady=!1,domReadyQueue=[];if("readyState"in document?(readyState=document.readyState,domIsReady="complete"==readyState||~navigator.userAgent.indexOf("AppleWebKit/")&&("loaded"==readyState||"interactive"==readyState)):domIsReady=!!document.body,!domIsReady){if(isHostMethod(window,"addEventListener"))on(document,"DOMContentLoaded",dom_onReady);else if(on(document,"readystatechange",function(){"complete"==document.readyState&&dom_onReady()}),document.documentElement.doScroll&&window===top){var doScrollCheck=function(){if(!domIsReady){try{document.documentElement.doScroll("left")}catch(e){return void setTimeout(doScrollCheck,1)}dom_onReady()}};doScrollCheck()}on(window,"load",dom_onReady)}var query=function(input){input=input.substring(1).split("&");for(var pair,data={},i=input.length;i--;)pair=input[i].split("="),data[pair[0]]=decodeURIComponent(pair[1]);return data}(/xdm_e=/.test(location.search)?location.search:location.hash),getJSON=function(){var cached={},obj={a:[1,2,3]},json='{"a":[1,2,3]}';return"undefined"!=typeof JSON&&"function"==typeof JSON.stringify&&JSON.stringify(obj).replace(/\s/g,"")===json?JSON:(Object.toJSON&&Object.toJSON(obj).replace(/\s/g,"")===json&&(cached.stringify=Object.toJSON),"function"==typeof String.prototype.evalJSON&&(obj=json.evalJSON(),obj.a&&3===obj.a.length&&3===obj.a[2]&&(cached.parse=function(str){return str.evalJSON()})),cached.stringify&&cached.parse?(getJSON=function(){return cached},cached):null)};apply(easyXDM,{version:"2.4.17.1",query:query,stack:{},apply:apply,getJSONObject:getJSON,whenReady:whenReady,noConflict:noConflict}),easyXDM.DomHelper={on:on,un:un,requiresJSON:function(path){isHostObject(window,"JSON")||document.write('<script type="text/javascript" src="'+path+'"></script>')}},function(){var _map={};easyXDM.Fn={set:function(name,fn){_map[name]=fn},get:function(name,del){var fn=_map[name];return del&&delete _map[name],fn}}}(),easyXDM.Socket=function(config){var stack=chainStack(prepareTransportStack(config).concat([{incoming:function(message,origin){config.onMessage(message,origin)},callback:function(success){config.onReady&&config.onReady(success)}}])),recipient=getLocation(config.remote);this.origin=getLocation(config.remote),this.destroy=function(){stack.destroy()},this.postMessage=function(message){stack.outgoing(message,recipient)},stack.init()},easyXDM.Rpc=function(config,jsonRpcConfig){if(jsonRpcConfig.local)for(var method in jsonRpcConfig.local)if(jsonRpcConfig.local.hasOwnProperty(method)){var member=jsonRpcConfig.local[method];"function"==typeof member&&(jsonRpcConfig.local[method]={method:member})}var stack=chainStack(prepareTransportStack(config).concat([new easyXDM.stack.RpcBehavior(this,jsonRpcConfig),{callback:function(success){config.onReady&&config.onReady(success)}}]));this.origin=getLocation(config.remote),this.destroy=function(){stack.destroy()},stack.init()},easyXDM.stack.SameOriginTransport=function(config){var pub,frame,send,targetOrigin;return pub={outgoing:function(message,domain,fn){send(message),fn&&fn()},destroy:function(){frame&&(frame.parentNode.removeChild(frame),frame=null)},onDOMReady:function(){targetOrigin=getLocation(config.remote),config.isHost?(apply(config.props,{src:appendQueryParameters(config.remote,{xdm_e:location.protocol+"//"+location.host+location.pathname,xdm_c:config.channel,xdm_p:4}),name:IFRAME_PREFIX+config.channel+"_provider"}),frame=createFrame(config),easyXDM.Fn.set(config.channel,function(sendFn){return send=sendFn,setTimeout(function(){pub.up.callback(!0)},0),function(msg){pub.up.incoming(msg,targetOrigin)}})):(send=getParentObject().Fn.get(config.channel,!0)(function(msg){pub.up.incoming(msg,targetOrigin)}),setTimeout(function(){pub.up.callback(!0)},0))},init:function(){whenReady(pub.onDOMReady,pub)}}},easyXDM.stack.FlashTransport=function(config){function onMessage(message){setTimeout(function(){pub.up.incoming(message,targetOrigin)},0)}function addSwf(domain){var url=config.swf+"?host="+config.isHost,id="easyXDM_swf_"+Math.floor(1e4*Math.random());easyXDM.Fn.set("flash_loaded"+domain.replace(/[\-.]/g,"_"),function(){easyXDM.stack.FlashTransport[domain].swf=swf=swfContainer.firstChild;for(var queue=easyXDM.stack.FlashTransport[domain].queue,i=0;i<queue.length;i++)queue[i]();queue.length=0}),config.swfContainer?swfContainer="string"==typeof config.swfContainer?document.getElementById(config.swfContainer):config.swfContainer:(swfContainer=document.createElement("div"),apply(swfContainer.style,HAS_FLASH_THROTTLED_BUG&&config.swfNoThrottle?{height:"20px",width:"20px",position:"fixed",right:0,top:0}:{height:"1px",width:"1px",position:"absolute",overflow:"hidden",right:0,top:0}),document.body.appendChild(swfContainer));var flashVars="callback=flash_loaded"+domain.replace(/[\-.]/g,"_")+"&proto="+global.location.protocol+"&domain="+getDomainName(global.location.href)+"&port="+getPort(global.location.href)+"&ns="+namespace;swfContainer.innerHTML="<object height='20' width='20' type='application/x-shockwave-flash' id='"+id+"' data='"+url+"'><param name='allowScriptAccess' value='always'></param><param name='wmode' value='transparent'><param name='movie' value='"+url+"'></param><param name='flashvars' value='"+flashVars+"'></param><embed type='application/x-shockwave-flash' FlashVars='"+flashVars+"' allowScriptAccess='always' wmode='transparent' src='"+url+"' height='1' width='1'></embed></object>"}var pub,frame,targetOrigin,swf,swfContainer;return pub={outgoing:function(message,domain,fn){swf.postMessage(config.channel,message.toString()),fn&&fn()},destroy:function(){try{swf.destroyChannel(config.channel)}catch(e){}swf=null,frame&&(frame.parentNode.removeChild(frame),frame=null)},onDOMReady:function(){targetOrigin=config.remote,easyXDM.Fn.set("flash_"+config.channel+"_init",function(){setTimeout(function(){pub.up.callback(!0)})}),easyXDM.Fn.set("flash_"+config.channel+"_onMessage",onMessage),config.swf=resolveUrl(config.swf);var swfdomain=getDomainName(config.swf),fn=function(){easyXDM.stack.FlashTransport[swfdomain].init=!0,swf=easyXDM.stack.FlashTransport[swfdomain].swf,swf.createChannel(config.channel,config.secret,getLocation(config.remote),config.isHost),config.isHost&&(HAS_FLASH_THROTTLED_BUG&&config.swfNoThrottle&&apply(config.props,{position:"fixed",right:0,top:0,height:"20px",width:"20px"}),apply(config.props,{src:appendQueryParameters(config.remote,{xdm_e:getLocation(location.href),xdm_c:config.channel,xdm_p:6,xdm_s:config.secret}),name:IFRAME_PREFIX+config.channel+"_provider"}),frame=createFrame(config))};easyXDM.stack.FlashTransport[swfdomain]&&easyXDM.stack.FlashTransport[swfdomain].init?fn():easyXDM.stack.FlashTransport[swfdomain]?easyXDM.stack.FlashTransport[swfdomain].queue.push(fn):(easyXDM.stack.FlashTransport[swfdomain]={queue:[fn]},addSwf(swfdomain))},init:function(){whenReady(pub.onDOMReady,pub)}}},easyXDM.stack.PostMessageTransport=function(config){function _getOrigin(event){if(event.origin)return getLocation(event.origin);if(event.uri)return getLocation(event.uri);if(event.domain)return location.protocol+"//"+event.domain;throw"Unable to retrieve the origin of the event"}function _window_onMessage(event){var origin=_getOrigin(event);origin==targetOrigin&&event.data.substring(0,config.channel.length+1)==config.channel+" "&&pub.up.incoming(event.data.substring(config.channel.length+1),origin)}var pub,frame,callerWindow,targetOrigin;return pub={outgoing:function(message,domain,fn){callerWindow.postMessage(config.channel+" "+message,domain||targetOrigin),fn&&fn()},destroy:function(){un(window,"message",_window_onMessage),frame&&(callerWindow=null,frame.parentNode.removeChild(frame),frame=null)},onDOMReady:function(){if(targetOrigin=getLocation(config.remote),config.isHost){var waitForReady=function(event){event.data==config.channel+"-ready"&&(callerWindow="postMessage"in frame.contentWindow?frame.contentWindow:frame.contentWindow.document,un(window,"message",waitForReady),on(window,"message",_window_onMessage),setTimeout(function(){pub.up.callback(!0)},0))};on(window,"message",waitForReady),apply(config.props,{src:appendQueryParameters(config.remote,{xdm_e:getLocation(location.href),xdm_c:config.channel,xdm_p:1}),name:IFRAME_PREFIX+config.channel+"_provider"}),frame=createFrame(config)}else on(window,"message",_window_onMessage),callerWindow="postMessage"in window.parent?window.parent:window.parent.document,callerWindow.postMessage(config.channel+"-ready",targetOrigin),setTimeout(function(){pub.up.callback(!0)},0)},init:function(){whenReady(pub.onDOMReady,pub)}}},easyXDM.stack.FrameElementTransport=function(config){var pub,frame,send,targetOrigin;return pub={outgoing:function(message,domain,fn){send.call(this,message),fn&&fn()},destroy:function(){frame&&(frame.parentNode.removeChild(frame),frame=null)},onDOMReady:function(){targetOrigin=getLocation(config.remote),config.isHost?(apply(config.props,{src:appendQueryParameters(config.remote,{xdm_e:getLocation(location.href),xdm_c:config.channel,xdm_p:5}),name:IFRAME_PREFIX+config.channel+"_provider"}),frame=createFrame(config),frame.fn=function(sendFn){return delete frame.fn,send=sendFn,setTimeout(function(){pub.up.callback(!0)},0),function(msg){pub.up.incoming(msg,targetOrigin)}}):(document.referrer&&getLocation(document.referrer)!=query.xdm_e&&(window.top.location=query.xdm_e),send=window.frameElement.fn(function(msg){pub.up.incoming(msg,targetOrigin)}),pub.up.callback(!0))},init:function(){whenReady(pub.onDOMReady,pub)}}},easyXDM.stack.NameTransport=function(config){function _sendMessage(message){var url=config.remoteHelper+(isHost?"#_3":"#_2")+config.channel;callerWindow.contentWindow.sendMessage(message,url)}function _onReady(){isHost?2!==++readyCount&&isHost||pub.up.callback(!0):(_sendMessage("ready"),pub.up.callback(!0))}function _onMessage(message){pub.up.incoming(message,remoteOrigin)}function _onLoad(){callback&&setTimeout(function(){callback(!0)},0)}var pub,isHost,callerWindow,remoteWindow,readyCount,callback,remoteOrigin,remoteUrl;return pub={outgoing:function(message,domain,fn){callback=fn,_sendMessage(message)},destroy:function(){callerWindow.parentNode.removeChild(callerWindow),callerWindow=null,isHost&&(remoteWindow.parentNode.removeChild(remoteWindow),remoteWindow=null)},onDOMReady:function(){isHost=config.isHost,readyCount=0,remoteOrigin=getLocation(config.remote),config.local=resolveUrl(config.local),isHost?(easyXDM.Fn.set(config.channel,function(message){isHost&&"ready"===message&&(easyXDM.Fn.set(config.channel,_onMessage),_onReady())}),remoteUrl=appendQueryParameters(config.remote,{xdm_e:config.local,xdm_c:config.channel,xdm_p:2}),apply(config.props,{src:remoteUrl+"#"+config.channel,name:IFRAME_PREFIX+config.channel+"_provider"}),remoteWindow=createFrame(config)):(config.remoteHelper=config.remote,easyXDM.Fn.set(config.channel,_onMessage));var onLoad=function(){var w=callerWindow||this;un(w,"load",onLoad),easyXDM.Fn.set(config.channel+"_load",_onLoad),function test(){"function"==typeof w.contentWindow.sendMessage?_onReady():setTimeout(test,50)}()};callerWindow=createFrame({props:{src:config.local+"#_4"+config.channel},onLoad:onLoad})},init:function(){whenReady(pub.onDOMReady,pub)}}},easyXDM.stack.HashTransport=function(config){function _sendMessage(message){if(_callerWindow){var url=config.remote+"#"+_msgNr++ +"_"+message;(isHost||!useParent?_callerWindow.contentWindow:_callerWindow).location=url}}function _handleHash(hash){_lastMsg=hash,pub.up.incoming(_lastMsg.substring(_lastMsg.indexOf("_")+1),_remoteOrigin)}function _pollHash(){if(_listenerWindow){var href=_listenerWindow.location.href,hash="",indexOf=href.indexOf("#");-1!=indexOf&&(hash=href.substring(indexOf)),hash&&hash!=_lastMsg&&_handleHash(hash)}}function _attachListeners(){_timer=setInterval(_pollHash,pollInterval)}var pub,isHost,_timer,pollInterval,_lastMsg,_msgNr,_listenerWindow,_callerWindow,useParent,_remoteOrigin;return pub={outgoing:function(message){_sendMessage(message)},destroy:function(){window.clearInterval(_timer),(isHost||!useParent)&&_callerWindow.parentNode.removeChild(_callerWindow),_callerWindow=null},onDOMReady:function(){if(isHost=config.isHost,pollInterval=config.interval,_lastMsg="#"+config.channel,_msgNr=0,useParent=config.useParent,_remoteOrigin=getLocation(config.remote),isHost){if(apply(config.props,{src:config.remote,name:IFRAME_PREFIX+config.channel+"_provider"}),useParent)config.onLoad=function(){_listenerWindow=window,_attachListeners(),pub.up.callback(!0)};else{var tries=0,max=config.delay/50;!function getRef(){if(++tries>max)throw new Error("Unable to reference listenerwindow");try{_listenerWindow=_callerWindow.contentWindow.frames[IFRAME_PREFIX+config.channel+"_consumer"]}catch(ex){}_listenerWindow?(_attachListeners(),pub.up.callback(!0)):setTimeout(getRef,50)}()}_callerWindow=createFrame(config)}else _listenerWindow=window,_attachListeners(),useParent?(_callerWindow=parent,pub.up.callback(!0)):(apply(config,{props:{src:config.remote+"#"+config.channel+new Date,name:IFRAME_PREFIX+config.channel+"_consumer"},onLoad:function(){pub.up.callback(!0)}}),_callerWindow=createFrame(config))},init:function(){whenReady(pub.onDOMReady,pub)}}},easyXDM.stack.ReliableBehavior=function(){var pub,callback,idOut=0,idIn=0,currentMessage="";return pub={incoming:function(message,origin){var indexOf=message.indexOf("_"),ack=message.substring(0,indexOf).split(",");message=message.substring(indexOf+1),ack[0]==idOut&&(currentMessage="",callback&&(callback(!0),callback=null)),message.length>0&&(pub.down.outgoing(ack[1]+","+idOut+"_"+currentMessage,origin),idIn!=ack[1]&&(idIn=ack[1],pub.up.incoming(message,origin)))},outgoing:function(message,origin,fn){currentMessage=message,callback=fn,pub.down.outgoing(idIn+","+ ++idOut+"_"+message,origin)}}},easyXDM.stack.QueueBehavior=function(config){function dispatch(){if(config.remove&&0===queue.length)return void removeFromStack(pub);if(!waiting&&0!==queue.length&&!destroying){waiting=!0;var message=queue.shift();pub.down.outgoing(message.data,message.origin,function(success){waiting=!1,message.callback&&setTimeout(function(){message.callback(success)},0),dispatch()})}}var pub,destroying,queue=[],waiting=!0,incoming="",maxLength=0,lazy=!1,doFragment=!1;return pub={init:function(){undef(config)&&(config={}),config.maxLength&&(maxLength=config.maxLength,doFragment=!0),config.lazy?lazy=!0:pub.down.init()},callback:function(success){waiting=!1;var up=pub.up;dispatch(),up.callback(success)},incoming:function(message,origin){if(doFragment){var indexOf=message.indexOf("_"),seq=parseInt(message.substring(0,indexOf),10);incoming+=message.substring(indexOf+1),0===seq&&(config.encode&&(incoming=decodeURIComponent(incoming)),pub.up.incoming(incoming,origin),incoming="")}else pub.up.incoming(message,origin)},outgoing:function(message,origin,fn){config.encode&&(message=encodeURIComponent(message));var fragment,fragments=[];if(doFragment){for(;0!==message.length;)fragment=message.substring(0,maxLength),message=message.substring(fragment.length),fragments.push(fragment);for(;fragment=fragments.shift();)queue.push({data:fragments.length+"_"+fragment,origin:origin,callback:0===fragments.length?fn:null})}else queue.push({data:message,origin:origin,callback:fn});lazy?pub.down.init():dispatch()},destroy:function(){destroying=!0,pub.down.destroy()}}},easyXDM.stack.VerifyBehavior=function(config){function startVerification(){mySecret=Math.random().toString(16).substring(2),pub.down.outgoing(mySecret)}var pub,mySecret,theirSecret;return pub={incoming:function(message,origin){var indexOf=message.indexOf("_");-1===indexOf?message===mySecret?pub.up.callback(!0):theirSecret||(theirSecret=message,config.initiate||startVerification(),pub.down.outgoing(message)):message.substring(0,indexOf)===theirSecret&&pub.up.incoming(message.substring(indexOf+1),origin)},outgoing:function(message,origin,fn){pub.down.outgoing(mySecret+"_"+message,origin,fn)},callback:function(){config.initiate&&startVerification()}}},easyXDM.stack.RpcBehavior=function(proxy,config){function _send(data){data.jsonrpc="2.0",pub.down.outgoing(serializer.stringify(data))}function _createMethod(definition,method){var slice=Array.prototype.slice;return function(){var callback,l=arguments.length,message={method:method};
l>0&&"function"==typeof arguments[l-1]?(l>1&&"function"==typeof arguments[l-2]?(callback={success:arguments[l-2],error:arguments[l-1]},message.params=slice.call(arguments,0,l-2)):(callback={success:arguments[l-1]},message.params=slice.call(arguments,0,l-1)),_callbacks[""+ ++_callbackCounter]=callback,message.id=_callbackCounter):message.params=slice.call(arguments,0),definition.namedParams&&1===message.params.length&&(message.params=message.params[0]),_send(message)}}function _executeMethod(method,id,fn,params){if(!fn)return void(id&&_send({id:id,error:{code:-32601,message:"Procedure not found."}}));var success,error;id?(success=function(result){success=emptyFn,_send({id:id,result:result})},error=function(message,data){error=emptyFn;var msg={id:id,error:{code:-32099,message:message}};data&&(msg.error.data=data),_send(msg)}):success=error=emptyFn,isArray(params)||(params=[params]);try{var result=fn.method.apply(fn.scope,params.concat([success,error]));undef(result)||success(result)}catch(ex1){error(ex1.message)}}var pub,serializer=config.serializer||getJSON(),_callbackCounter=0,_callbacks={};return pub={incoming:function(message){var data=serializer.parse(message);if(data.method)config.handle?config.handle(data,_send):_executeMethod(data.method,data.id,config.local[data.method],data.params);else{var callback=_callbacks[data.id];data.error?callback.error&&callback.error(data.error):callback.success&&callback.success(data.result),delete _callbacks[data.id]}},init:function(){if(config.remote)for(var method in config.remote)config.remote.hasOwnProperty(method)&&(proxy[method]=_createMethod(config.remote[method],method));pub.down.init()},destroy:function(){for(var method in config.remote)config.remote.hasOwnProperty(method)&&proxy.hasOwnProperty(method)&&delete proxy[method];pub.down.destroy()}}},global.easyXDM=easyXDM}(window,document,location,window.setTimeout,decodeURIComponent,encodeURIComponent),define("easyXDM",function(global){return function(){var ret;return ret||global.easyXDM}}(this)),define("core/services/apinetService",["module","../moduleDef","angular","easyXDM"],function(requireModule,module,angular,easyXDM){var config=requireModule.config()||{};config.apiRoot=config.apiRoot?config.apiRoot:"/",config.notificationRoot=config.notificationRoot?config.notificationRoot:"http://localhost:36653",config.useEasyXDM=!angular.isDefined(config.useEasyXDM)||config.useEasyXDM;var createEasyXDMRpc=function(){return new easyXDM.Rpc({remote:config.apiRoot+"cors/",lazy:!1},{remote:{request:{}}})},corsRpc=config.useEasyXDM?createEasyXDMRpc():null,corsRpcInited=!1;module.constant("defaultPageSize",20),module.service("apinetService",["$q","$http","$cacheFactory","i18n","securityInterceptor","$timeout","$rootScope",function($q,$http,$cacheFactory,i18n,securityInterceptor,$timeout,$rootScope){var throwError=function(data,status){var errorMsg=data&&data.message?data.message:404===status?i18n.msg("core.errors.notFound"):status>=502&&504>=status?i18n.msg("core.errors.unavailable"):500===status?i18n.msg("core.errors.general"):i18n.msg("core.errors.title")+": "+status;throw errorMsg},offTimeout=null,completeApiUrl=function(apiUrl,data){if(!apiUrl)return apiUrl;var params=[];return data&&(angular.isString(data)?params.push("p="+data):angular.isObject(data)&&data.hasOwnProperty("project")&&data.project&&params.push("p="+data.project)),$rootScope.moduleVersion&&params.push("m="+$rootScope.moduleVersion),params.length<=0?apiUrl:apiUrl+"?"+params.join("&")};angular.extend(this,{performRequest:function(cfg,timeout){cfg=cfg||{};var deferred=$q.defer(),requestData=angular.extend({},cfg.requestData);if(!requestData||!requestData.method)return deferred.reject("Inconsistent request"),deferred.promise;var successFn=angular.isFunction(cfg.successFn)?cfg.successFn:function(){},failureFn=angular.isFunction(cfg.failureFn)?cfg.failureFn:function(){};timeout=timeout&&timeout>0?timeout:1e4;var method=requestData.method;if(delete requestData.method,corsRpc){var JSON=easyXDM.getJSONObject(),data={};for(var key in requestData)requestData.hasOwnProperty(key)&&null!==requestData[key]&&(data[key]=angular.isObject(requestData[key])?JSON.stringify(requestData[key]):requestData[key]);var requestCfg={url:completeApiUrl("../api/"+method,data),method:"POST",headers:{"X-AGO-Requested-With":"easyXDM"},data:data,timeout:timeout};return corsRpcInited||(offTimeout=$timeout(function(){corsRpcInited||(corsRpc&&corsRpc.destroy(),corsRpc=createEasyXDMRpc()),deferred.reject({status:0,corsConfig:cfg})},timeout+1e3)),corsRpc.request(requestCfg,function(response){corsRpcInited||($timeout.cancel(offTimeout),corsRpcInited=!0),response.corsConfig=angular.extend({},cfg);try{deferred.resolve(successFn(response.data?angular.fromJson(response.data):response.data))}catch(e){deferred.reject(e)}},function(response){corsRpcInited||($timeout.cancel(offTimeout),corsRpcInited=!0);var responseData=response.data||{};responseData.corsConfig=angular.extend({},cfg);try{var data=null;try{data=responseData.data?angular.fromJson(responseData.data):null}catch(e){}var status=responseData.status?responseData.status:500;if(401===status||403===status)throw responseData;deferred.resolve(failureFn(data,status))}catch(e){deferred.reject(e)}}),securityInterceptor(deferred.promise)}var httpCfg={timeout:timeout};return $http.post(completeApiUrl(config.apiRoot+"api/"+method,requestData),requestData,httpCfg).success(function(data){try{deferred.resolve(successFn(data?angular.fromJson(data):data))}catch(e){deferred.reject(e)}}).error(function(data,status){try{deferred.resolve(failureFn(data,status))}catch(e){deferred.reject(e)}}),deferred.promise},getModel:function(requestData,postProcessFn,timeout){var cache;if(requestData.cacheable&&requestData.modelType&&requestData.id){cache=$cacheFactory.get(requestData.modelType)||$cacheFactory(requestData.modelType);var cachedModel=cache.get(requestData.id);if(cachedModel){var deferred=$q.defer();return deferred.resolve(cachedModel),deferred.promise}}return this.performRequest({requestData:requestData,successFn:function(data){if(data)return angular.isFunction(postProcessFn)&&(data=postProcessFn(data),data=data?data:{}),requestData.cacheable&&(cache=cache?cache:$cacheFactory.get(requestData.modelType)||$cacheFactory(requestData.modelType),cache.put(requestData.id,data)),data;throw i18n.msg("core.errors.unknown")},failureFn:function(data,status){throwError(data,status)}},timeout)},getModels:function(requestData,postProcessRowsFn,timeout){return this.performRequest({requestData:requestData,successFn:function(data){if(angular.isArray(data))return angular.isFunction(postProcessRowsFn)&&(data=postProcessRowsFn(data),data=angular.isArray(data)?data:[]),data;throw data&&data.message?data.message:i18n.msg("core.errors.unknown")},failureFn:function(data,status){throwError(data,status)}},timeout)},action:function(requestData,timeout){return this.performRequest({requestData:requestData,successFn:function(data){return data},failureFn:function(data,status){throwError(data,status)}},timeout)},apiRoot:function(){return config.apiRoot},notificationRoot:function(){return config.notificationRoot},apiUrl:function(relative,project){return completeApiUrl(config.apiRoot+"api/"+relative,project)},downloadUrl:function(relative,project){return completeApiUrl(config.apiRoot+"download/"+relative,project)},oauthUrl:function(provider){return config.apiRoot+"oauth/begin/"+provider},oauthRoot:function(){return config.apiRoot+"oauth"},dropCache:function(modelType,id){if(modelType&&id){var cache=$cacheFactory.get(modelType);cache&&cache.remove(id)}}})}])}),define("core/services/filteringService",["../moduleDef","angular"],function(module,angular){module.service("filteringService",["metadataService","i18n",function($metadataService,i18n){angular.extend(this,{localDateString:function(date){var padString=function(n){return 10>n?"0"+n:n};return padString(date.getDate())+"."+padString(date.getMonth()+1)+"."+date.getFullYear()},localDateTimeString:function(date){var padString=function(n){return 10>n?"0"+n:n};return padString(date.getDate())+"."+padString(date.getMonth()+1)+"."+date.getFullYear()+" "+padString(date.getHours())+":"+padString(date.getMinutes())},getNodeMetadata:function(method,node,parentMetadata,callback){var metadata;return this.isSpecialNode(node)||(node.path&&parentMetadata&&parentMetadata.PrimitiveProperties&&parentMetadata.PrimitiveProperties[node.path]&&(metadata=parentMetadata.PrimitiveProperties[node.path]),node.path&&parentMetadata&&parentMetadata.ModelProperties&&parentMetadata.ModelProperties[node.path]&&(metadata=parentMetadata.ModelProperties[node.path]),!metadata||!metadata.ModelType||metadata.PrimitiveProperties||metadata.ModelProperties)?void callback(metadata||parentMetadata):void $metadataService.modelMetadata(method,metadata.ModelType,function(extendedMeta){angular.extend(metadata,extendedMeta),callback(metadata)})},isUnaryNode:function(node){return node?"exists"===node.op||"not exists"===node.op:!1},isSpecialNode:function(node){return node?!node.path&&("||"===node.op||"&&"===node.op||"&&!"===node.op)||!node.op&&("||"===node.path||"&&"===node.path||"&&!"===node.path):!1},isCompositeNode:function(node,metadata){return this.isSpecialNode(node)||metadata&&metadata.ModelType},allOps:function(){return["=","!=",">","<",">=","<=","exists","not exists","like","not like"]},applicablePaths:function(metadata){var key,result=[];if(!metadata)return result;for(key in metadata.PrimitiveProperties)metadata.PrimitiveProperties.hasOwnProperty(key)&&result.push(key);for(key in metadata.ModelProperties)metadata.ModelProperties.hasOwnProperty(key)&&result.push(key);return result.unshift("&&!"),result.unshift("||"),result.unshift("&&"),result},isOpApplicableToNode:function(op,metadata){return metadata?"exists"===op||"not exists"===op?metadata.PropertyType:"like"===op||"not like"===op?"string"===metadata.PropertyType:"="===op||"!="===op?metadata.PropertyType&&"datetime"!==metadata.PropertyType:">"===op||"<"===op||">="===op||"<="===op?"date"===metadata.PropertyType||"datetime"===metadata.PropertyType||"int"===metadata.PropertyType||"float"===metadata.PropertyType:!1:!1},pathDisplayName:function(path,parentMeta,nodeMeta){if("||"===path)return i18n.msg("core.filters.ops.or");if("&&"===path)return i18n.msg("core.filters.ops.and");if("&&!"===path)return i18n.msg("core.filters.ops.not.and");var metadata=path&&nodeMeta?nodeMeta:{};return path&&parentMeta&&parentMeta.PrimitiveProperties&&parentMeta.PrimitiveProperties[path]&&(metadata=parentMeta.PrimitiveProperties[path]),path&&parentMeta&&parentMeta.ModelProperties&&parentMeta.ModelProperties[path]&&(metadata=parentMeta.ModelProperties[path]),metadata&&metadata.DisplayName?metadata.DisplayName:path},opDisplayName:function(op,not,path){return"="===op||"!="===op?not||"!="===op?"!=":"=":"exists"===op||"not exists"===op?i18n.msg(not||"not exists"===op?"core.filters.ops.not.exists":"core.filters.ops.exists"):"like"===op||"not like"===op?i18n.msg(not||"not like"===op?"core.filters.ops.not.like":"core.filters.ops.like"):"||"===op?path?"":i18n.msg("core.filters.ops.or"):"&&"===op||"&&!"===op?path?"":i18n.msg(not||"&&!"===op?"core.filters.ops.not.and":"core.filters.ops.and"):op},valueDisplayName:function(value,metadata){var date,localized;return metadata?(metadata&&"boolean"===metadata.PropertyType?(value="true"===value||"1"===value?i18n.msg("core.labels.yes"):value,value="false"===value||"0"===value?i18n.msg("core.labels.no"):value):metadata&&"date"===metadata.PropertyType?(date=new Date(value),value=isNaN(date.valueOf())?value:this.localDateString(date)):metadata&&"datetime"===metadata.PropertyType?(date=new Date(value),value=isNaN(date.valueOf())?value:this.localDateTimeString(date)):metadata&&"enum"===metadata.PropertyType&&(localized=metadata.PossibleValues?metadata.PossibleValues[value]:"",value=localized?localized:value),value):value},validateNode:function(node,metadata,validationErrors){return validationErrors=validationErrors?validationErrors:{path:[],op:[],value:[],valid:!0},this.isCompositeNode(node,metadata)?this.validateCompositeNode(node,validationErrors):this.validatePropertyNode(node,metadata,validationErrors),validationErrors.valid=!validationErrors.path.length&&!validationErrors.op.length&&!validationErrors.value.length,validationErrors.valid},validateCompositeNode:function(node,validationErrors){this.isSpecialNode(node)&&(node.path&&"&&"!==node.op&&"||"!==node.op&&validationErrors.path.push(i18n.msg("core.filters.errors.unexpected.op")),node.path&&node.value&&validationErrors.path.push(i18n.msg("core.filters.errors.unexpected.value")))},validatePropertyNode:function(node,metadata,validationErrors){var found,possibleValues,key,propertyType;if(node.items&&node.items.length&&validationErrors.path.push(i18n.msg("core.filters.errors.unexpected.child")),node.op||validationErrors.op.push(i18n.msg("core.filters.errors.missing.op")),!this.isUnaryNode(node)&&(node.value||validationErrors.value.push(i18n.msg("core.filters.errors.missing.value")),propertyType=metadata.PropertyType,"guid"!==propertyType||new RegExp("^(\\{){0,1}[0-9a-fA-F]{8}\\-[0-9a-fA-F]{4}\\-[0-9a-fA-F]{4}\\-[0-9a-fA-F]{4}\\-[0-9a-fA-F]{12}(\\}){0,1}$").test(node.value)||validationErrors.value.push(i18n.msg("core.filters.errors.expected.guid")),"int"===propertyType&&isNaN(parseInt(node.value,10))&&validationErrors.value.push(i18n.msg("core.filters.errors.expected.int")),"float"===propertyType&&isNaN(parseFloat(node.value))&&validationErrors.value.push(i18n.msg("core.filters.errors.expected.float")),"bool"===propertyType&&"true"!==node.value&&"false"!==node.value&&validationErrors.value.push(i18n.msg("core.filters.errors.expected.bool")),("date"===propertyType||"datetime"===propertyType)&&isNaN(new Date(node.value).valueOf())&&validationErrors.value.push(i18n.msg("core.filters.errors.expected.date")),"datetime"===propertyType&&("="===node.op||"!="===node.op)&&validationErrors.value.push(i18n.msg("core.filters.errors.invalid.op")),"enum"===propertyType)){found=!1,possibleValues=angular.isObject(metadata.PossibleValues)?metadata.PossibleValues:{};for(key in possibleValues)if(possibleValues.hasOwnProperty(key)&&node.value===key){found=!0;break}found||validationErrors.value.push(i18n.msg("core.filters.errors.expected.enum"))}},beforeNodeEdit:function(node){node.not&&("&&"===node.op&&(node.op="&&!"),"="===node.op&&(node.op="!="),"exists"===node.op&&(node.op="not exists"),"like"===node.op&&(node.op="not like")),("&&"===node.op||"||"===node.op||"&&!"===node.op)&&(node.path=node.op,node.op="")},afterNodeEdit:function(node,metadata){("&&"===node.path||"||"===node.path||"&&!"===node.path)&&(node.op=node.path,node.path=""),node.not&&(node.not=!1),"&&!"===node.op&&(node.op="&&",node.not=!0),"!="===node.op&&(node.op="=",node.not=!0),"not exists"===node.op&&(node.op="exists",node.not=!0),"not like"===node.op&&(node.op="like",node.not=!0),this.isCompositeNode(node,metadata)?(node.value="",this.isSpecialNode(node)&&(node.path="")):node.items=[],this.isUnaryNode(node)&&(node.value="")},ensurePropertyTypeNode:function(node){node.items||(node.items=[]),0===node.items.length&&node.items.push({items:[]});var propertyTypeNode=node.items[0];return propertyTypeNode.path="PropertyType",propertyTypeNode.op="=",propertyTypeNode.value=propertyTypeNode.value?propertyTypeNode.value:void 0,propertyTypeNode},ensurePropertyValueNode:function(node){return this.ensurePropertyTypeNode(node),node.items.length<=1&&node.items.push({items:[]}),node.items[1]}})}]).filter("applicableOps",["filteringService",function($filteringService){return function(input,metadata){var i,result=[];if(!angular.isArray(input)||!metadata)return result;for(i=0;i<input.length;i++)$filteringService.isOpApplicableToNode(input[i],metadata)&&result.push(input[i]);return result}}])}),define("core/services/i18n",["../moduleDef","angular","module"],function(module,angular,requireModule){var config=requireModule.config()||{};module.service("i18n",["$interpolate","$rootScope","$injector",function($interpolate,$rootScope,$injector){$rootScope.i18n={msg:function(key,params){if(!angular.isString(key))return"";var msg=$rootScope.i18n[key];return angular.isString(msg)?params?$interpolate(msg)(params):msg:angular.isObject(msg)?$interpolate(key)(msg):$rootScope.i18n.handleNotFound(key)},handleNotFound:function(key){return config.release?"":"?"+key+"?"}},angular.extend(this,{supportedLocales:["en","ru"],localizationModules:{},registerLocalizationModule:function(localizationModule){this.localizationModules[localizationModule]=null},addMessages:function(prefix,messages){if(prefix&&prefix.length&&angular.isObject(messages)){$rootScope.i18n[prefix]=messages;for(var key in messages)if(messages.hasOwnProperty(key)){var fullKey=prefix+"."+key,msg=messages[key];angular.isObject(msg)&&this.addMessages(fullKey,msg),angular.isString(msg)&&($rootScope.i18n[fullKey]=msg)}}},setLocale:function(locale){var me=this;if(locale||me.locale){locale=locale||me.locale,me.locale=locale;var initLocalizationModule=function(moduleName){me.localizationModules[moduleName]=locale;var serviceName=moduleName+"/"+locale;if($injector.has(serviceName)){var service=$injector.get(serviceName);angular.isFunction(service)&&service()}};for(var key in me.localizationModules)me.localizationModules.hasOwnProperty(key)&&me.localizationModules[key]!==locale&&initLocalizationModule(key);return $rootScope.$$phase||$rootScope.$apply(),me.locale}},msg:$rootScope.i18n.msg,handleNotFound:$rootScope.i18n.handleNotFound,sync:function(){this.setLocale()}})}]).filter("i18n",["i18n",function(i18n){return function(key,params){return i18n.msg(key,params)}}])}),define("core/services/metadataService",["../moduleDef","angular"],function(module,angular){module.service("metadataService",["apinetService","$stateParams",function(apinetService,$stateParams){angular.extend(this,{metadata:null,promise:null,modelMetadata:function(method,modelType,callback){if(callback){if(modelType&&angular.isObject(this.metadata)&&this.metadata[modelType])return void callback(this.metadata[modelType]);var promise=this.promise?this.promise:apinetService.action({method:method,project:$stateParams.project});this.promise=promise;var me=this;promise.then(function(data){if(me.metadata=angular.extend({},data),me.promise=null,modelType)return void(me.metadata[modelType]&&callback(me.metadata[modelType]));for(var key in me.metadata)if(me.metadata.hasOwnProperty(key))return void callback(me.metadata[key])},function(){me.metadata=null,me.promise=null})}}})}])}),define("core/services/moduleConfig",["../moduleDef"],function(module){module.service("moduleConfig",["$q","$rootScope","apinetService",function($q,$rootScope,apinetService){var config={};return{getConfig:function(project){var deffered=$q.defer();if(config[project])deffered.resolve(config[project]);else var unwatch=$rootScope.$watch("module",function(newVal){newVal&&(unwatch(),apinetService.action({method:newVal+"/config/configuration",project:project}).then(function(response){config[project]=response,deffered.resolve(config[project])},function(error){deffered.reject(error)}))});return deffered.promise},setCurrent:function(project,newOU,newRole){return this.getConfig(project).then(function(cfg){cfg.currentOU=newOU,cfg.currentRole=newRole})},getRoles:function(project){return this.getConfig(project).then(function(cfg){return cfg.roles})},clear:function(){config={}}}}]).run(["moduleConfig","$rootScope","AUTH_EVENTS",function(moduleConfig,$rootScope,AUTH_EVENTS){$rootScope.$on(AUTH_EVENTS.LOGOUT,function(){moduleConfig.clear()})}])}),define("core/services/reportService",["module","../moduleDef","angular"],function(requireModule,module,angular){var REPORT_EVENTS={CREATED:"reports:created",RUNNED:"reports:runned",PROGRESS:"reports:progress",COMPLETED:"reports:completed",ABORTED:"reports:aborted",ERROR:"reports:error",CANCELED:"reports:canceled",DELETED:"reports:deleted",DOWNLOADED:"reports:downloaded"},REPORT_STATES={NotStarted:"NotStarted",Running:"Running",Completed:"Completed",Canceled:"Canceled",Error:"Error"},REPORT_PRIORITY_TYPE={BY_DATE:0,BY_USER:1};module.constant("REPORT_EVENTS",REPORT_EVENTS).constant("REPORT_STATES",REPORT_STATES).constant("REPORT_PRIORITY_TYPE",REPORT_PRIORITY_TYPE).factory("reportService",["$cacheFactory","$q","apinetService",function($cacheFactory,$q,apinetService){var rs=angular.extend(this,{cache:$cacheFactory("userReports"),getReportSettings:function(project,types){types=types||[];var cacheKey="settings."+project+"."+types.toString(),that=this,settings=that.cache.get(cacheKey);return settings&&settings.length>0?$q.when(settings):apinetService.action({method:"core/reporting/getSettings",project:project,types:types}).then(function(response){return that.cache.put(cacheKey,response),response})},runReport:function(parameters){return angular.extend(parameters,{method:"core/reporting/runReport"}),apinetService.action(parameters)},getTopLastReports:function(project){return apinetService.action({method:"core/reporting/getTopLastReports",project:project})},cancelReport:function(project,id){return apinetService.action({method:"core/reporting/cancelReport",project:project,id:id})},deleteReport:function(project,id){return apinetService.action({method:"core/reporting/deleteReport",project:project,id:id})},templateUploadUrl:function(project){return apinetService.apiUrl("core/reporting/uploadTemplate",project)},templateDownloadUrl:function(project,id){return apinetService.downloadUrl("report-template/"+project+"/"+id,project)},reportDownloadUrl:function(project,id){return apinetService.downloadUrl("report/"+project+"/"+id,project)},positions:{},loadReportsQueuePositions:function(){return apinetService.action({method:"core/reporting/getReportQueuePositions"})},updatePositions:function(newPositions){this.positions={};for(var i=0;i<newPositions.length;i++){var pos=newPositions[i];this.positions[pos.taskId]=pos.position>99?"> 99":pos.position}},getQueuePositions:function(){return this.positions}});return rs}]).run(["$rootScope","reportService","AUTH_EVENTS",function($rootScope,reportService,AUTH_EVENTS){$rootScope.$on(AUTH_EVENTS.LOGIN,function(){reportService.loadReportsQueuePositions().then(function(response){response&&reportService.updatePositions(response)})}),$rootScope.$on("workqueue:changed",function(e,arg){reportService.updatePositions(arg.positions)})}])});var io="undefined"==typeof module?{}:module.exports;!function(){if(function(a,b){var c=a;c.version="0.9.16",c.protocol=1,c.transports=[],c.j=[],c.sockets={},c.connect=function(a,d){var f,g,e=c.util.parseUri(a);b&&b.location&&(e.protocol=e.protocol||b.location.protocol.slice(0,-1),e.host=e.host||(b.document?b.document.domain:b.location.hostname),e.port=e.port||b.location.port),f=c.util.uniqueUri(e);var h={host:e.host,secure:"https"==e.protocol,port:e.port||("https"==e.protocol?443:80),query:e.query||""};return c.util.merge(h,d),(h["force new connection"]||!c.sockets[f])&&(g=new c.Socket(h)),!h["force new connection"]&&g&&(c.sockets[f]=g),g=g||c.sockets[f],g.of(e.path.length>1?e.path:"")}}("object"==typeof module?module.exports:this.io={},this),function(a,b){var c=a.util={},d=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,e=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];c.parseUri=function(a){for(var b=d.exec(a||""),c={},f=14;f--;)c[e[f]]=b[f]||"";return c},c.uniqueUri=function(a){var c=a.protocol,d=a.host,e=a.port;return"document"in b?(d=d||document.domain,e=e||("https"==c&&"https:"!==document.location.protocol?443:document.location.port)):(d=d||"localhost",!e&&"https"==c&&(e=443)),(c||"http")+"://"+d+":"+(e||80)},c.query=function(a,b){var d=c.chunkQuery(a||""),e=[];c.merge(d,c.chunkQuery(b||""));for(var f in d)d.hasOwnProperty(f)&&e.push(f+"="+d[f]);return e.length?"?"+e.join("&"):""},c.chunkQuery=function(a){for(var f,b={},c=a.split("&"),d=0,e=c.length;e>d;++d)f=c[d].split("="),f[0]&&(b[f[0]]=f[1]);return b};var f=!1;c.load=function(a){return"document"in b&&"complete"===document.readyState||f?a():void c.on(b,"load",a,!1)},c.on=function(a,b,c,d){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener&&a.addEventListener(b,c,d)},c.request=function(a){if(a&&"undefined"!=typeof XDomainRequest&&!c.ua.hasCORS)return new XDomainRequest;if("undefined"!=typeof XMLHttpRequest&&(!a||c.ua.hasCORS))return new XMLHttpRequest;if(!a)try{return new(window[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(b){}return null},"undefined"!=typeof window&&c.load(function(){f=!0}),c.defer=function(a){return c.ua.webkit&&"undefined"==typeof importScripts?void c.load(function(){setTimeout(a,100)}):a()},c.merge=function(b,d,e,f){var i,g=f||[],h="undefined"==typeof e?2:e;for(i in d)d.hasOwnProperty(i)&&c.indexOf(g,i)<0&&("object"==typeof b[i]&&h?c.merge(b[i],d[i],h-1,g):(b[i]=d[i],g.push(d[i])));return b},c.mixin=function(a,b){c.merge(a.prototype,b.prototype)},c.inherit=function(a,b){function c(){}c.prototype=b.prototype,a.prototype=new c},c.isArray=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},c.intersect=function(a,b){for(var d=[],e=a.length>b.length?a:b,f=a.length>b.length?b:a,g=0,h=f.length;h>g;g++)~c.indexOf(e,f[g])&&d.push(f[g]);return d},c.indexOf=function(a,b,c){for(var d=a.length,c=0>c?0>c+d?0:c+d:c||0;d>c&&a[c]!==b;c++);return c>=d?-1:c},c.toArray=function(a){for(var b=[],c=0,d=a.length;d>c;c++)b.push(a[c]);return b},c.ua={},c.ua.hasCORS="undefined"!=typeof XMLHttpRequest&&function(){try{var a=new XMLHttpRequest}catch(b){return!1}return void 0!=a.withCredentials}(),c.ua.webkit="undefined"!=typeof navigator&&/webkit/i.test(navigator.userAgent),c.ua.iDevice="undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)}("undefined"!=typeof io?io:module.exports,this),function(a,b){function c(){}a.EventEmitter=c,c.prototype.on=function(a,c){return this.$events||(this.$events={}),this.$events[a]?b.util.isArray(this.$events[a])?this.$events[a].push(c):this.$events[a]=[this.$events[a],c]:this.$events[a]=c,this},c.prototype.addListener=c.prototype.on,c.prototype.once=function(a,b){function d(){c.removeListener(a,d),b.apply(this,arguments)}var c=this;return d.listener=b,this.on(a,d),this},c.prototype.removeListener=function(a,c){if(this.$events&&this.$events[a]){var d=this.$events[a];if(b.util.isArray(d)){for(var e=-1,f=0,g=d.length;g>f;f++)if(d[f]===c||d[f].listener&&d[f].listener===c){e=f;break}if(0>e)return this;d.splice(e,1),d.length||delete this.$events[a]}else(d===c||d.listener&&d.listener===c)&&delete this.$events[a]}return this},c.prototype.removeAllListeners=function(a){return void 0===a?(this.$events={},this):(this.$events&&this.$events[a]&&(this.$events[a]=null),this)},c.prototype.listeners=function(a){return this.$events||(this.$events={}),this.$events[a]||(this.$events[a]=[]),b.util.isArray(this.$events[a])||(this.$events[a]=[this.$events[a]]),this.$events[a]},c.prototype.emit=function(a){if(!this.$events)return!1;var c=this.$events[a];if(!c)return!1;var d=Array.prototype.slice.call(arguments,1);if("function"==typeof c)c.apply(this,d);else{if(!b.util.isArray(c))return!1;for(var e=c.slice(),f=0,g=e.length;g>f;f++)e[f].apply(this,d)}return!0}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(exports,nativeJSON){function f(a){return 10>a?"0"+a:a}function date(a){return isFinite(a.valueOf())?a.getUTCFullYear()+"-"+f(a.getUTCMonth()+1)+"-"+f(a.getUTCDate())+"T"+f(a.getUTCHours())+":"+f(a.getUTCMinutes())+":"+f(a.getUTCSeconds())+"Z":null}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,h,g=gap,i=b[a];switch(i instanceof Date&&(i=date(a)),"function"==typeof rep&&(i=rep.call(b,a,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,h=[],"[object Array]"===Object.prototype.toString.apply(i)){for(f=i.length,c=0;f>c;c+=1)h[c]=str(c,i)||"null";return e=0===h.length?"[]":gap?"[\n"+gap+h.join(",\n"+gap)+"\n"+g+"]":"["+h.join(",")+"]",gap=g,e}if(rep&&"object"==typeof rep)for(f=rep.length,c=0;f>c;c+=1)"string"==typeof rep[c]&&(d=rep[c],e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e));else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e));return e=0===h.length?"{}":gap?"{\n"+gap+h.join(",\n"+gap)+"\n"+g+"}":"{"+h.join(",")+"}",gap=g,e}}if(nativeJSON&&nativeJSON.parse)return exports.JSON={parse:nativeJSON.parse,stringify:nativeJSON.stringify};var JSON=exports.JSON={},cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;JSON.stringify=function(a,b,c){var d;if(gap="",indent="","number"==typeof c)for(d=0;c>d;d+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(rep=b,!b||"function"==typeof b||"object"==typeof b&&"number"==typeof b.length)return str("",{"":a});throw new Error("JSON.stringify")},JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),void 0!==d?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof JSON?JSON:void 0),function(a,b){var c=a.parser={},d=c.packets=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"],e=c.reasons=["transport not supported","client not handshaken","unauthorized"],f=c.advice=["reconnect"],g=b.JSON,h=b.util.indexOf;c.encodePacket=function(a){var b=h(d,a.type),c=a.id||"",i=a.endpoint||"",j=a.ack,k=null;switch(a.type){case"error":var l=a.reason?h(e,a.reason):"",m=a.advice?h(f,a.advice):"";(""!==l||""!==m)&&(k=l+(""!==m?"+"+m:""));break;case"message":""!==a.data&&(k=a.data);break;case"event":var n={name:a.name};a.args&&a.args.length&&(n.args=a.args),k=g.stringify(n);break;case"json":k=g.stringify(a.data);break;case"connect":a.qs&&(k=a.qs);break;case"ack":k=a.ackId+(a.args&&a.args.length?"+"+g.stringify(a.args):"")}var o=[b,c+("data"==j?"+":""),i];return null!==k&&void 0!==k&&o.push(k),o.join(":")},c.encodePayload=function(a){var b="";if(1==a.length)return a[0];for(var c=0,d=a.length;d>c;c++){var e=a[c];b+=""+e.length+""+a[c]}return b};var i=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;c.decodePacket=function(a){var b=a.match(i);if(!b)return{};var c=b[2]||"",a=b[5]||"",h={type:d[b[1]],endpoint:b[4]||""};switch(c&&(h.id=c,h.ack=b[3]?"data":!0),h.type){case"error":var b=a.split("+");h.reason=e[b[0]]||"",h.advice=f[b[1]]||"";break;case"message":h.data=a||"";break;case"event":try{var j=g.parse(a);h.name=j.name,h.args=j.args}catch(k){}h.args=h.args||[];break;case"json":try{h.data=g.parse(a)}catch(k){}break;case"connect":h.qs=a||"";break;case"ack":var b=a.match(/^([0-9]+)(\+)?(.*)/);if(b&&(h.ackId=b[1],h.args=[],b[3]))try{h.args=b[3]?g.parse(b[3]):[]}catch(k){}break;case"disconnect":case"heartbeat":}return h
},c.decodePayload=function(a){if(""==a.charAt(0)){for(var b=[],d=1,e="";d<a.length;d++)""==a.charAt(d)?(b.push(c.decodePacket(a.substr(d+1).substr(0,e))),d+=Number(e)+1,e=""):e+=a.charAt(d);return b}return[c.decodePacket(a)]}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(a,b){function c(a,b){this.socket=a,this.sessid=b}a.Transport=c,b.util.mixin(c,b.EventEmitter),c.prototype.heartbeats=function(){return!0},c.prototype.onData=function(a){if(this.clearCloseTimeout(),(this.socket.connected||this.socket.connecting||this.socket.reconnecting)&&this.setCloseTimeout(),""!==a){var c=b.parser.decodePayload(a);if(c&&c.length)for(var d=0,e=c.length;e>d;d++)this.onPacket(c[d])}return this},c.prototype.onPacket=function(a){return this.socket.setHeartbeatTimeout(),"heartbeat"==a.type?this.onHeartbeat():("connect"==a.type&&""==a.endpoint&&this.onConnect(),"error"==a.type&&"reconnect"==a.advice&&(this.isOpen=!1),this.socket.onPacket(a),this)},c.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var a=this;this.closeTimeout=setTimeout(function(){a.onDisconnect()},this.socket.closeTimeout)}},c.prototype.onDisconnect=function(){return this.isOpen&&this.close(),this.clearTimeouts(),this.socket.onDisconnect(),this},c.prototype.onConnect=function(){return this.socket.onConnect(),this},c.prototype.clearCloseTimeout=function(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null)},c.prototype.clearTimeouts=function(){this.clearCloseTimeout(),this.reopenTimeout&&clearTimeout(this.reopenTimeout)},c.prototype.packet=function(a){this.send(b.parser.encodePacket(a))},c.prototype.onHeartbeat=function(){this.packet({type:"heartbeat"})},c.prototype.onOpen=function(){this.isOpen=!0,this.clearCloseTimeout(),this.socket.onOpen()},c.prototype.onClose=function(){this.isOpen=!1,this.socket.onClose(),this.onDisconnect()},c.prototype.prepareUrl=function(){var a=this.socket.options;return this.scheme()+"://"+a.host+":"+a.port+"/"+a.resource+"/"+b.protocol+"/"+this.name+"/"+this.sessid},c.prototype.ready=function(a,b){b.call(this)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(a,b,c){function d(a){if(this.options={port:80,secure:!1,document:"document"in c?document:!1,resource:"socket.io",transports:b.transports,"connect timeout":1e4,"try multiple transports":!0,reconnect:!0,"reconnection delay":500,"reconnection limit":1/0,"reopen delay":3e3,"max reconnection attempts":10,"sync disconnect on unload":!1,"auto connect":!0,"flash policy port":10843,manualFlush:!1},b.util.merge(this.options,a),this.connected=!1,this.open=!1,this.connecting=!1,this.reconnecting=!1,this.namespaces={},this.buffer=[],this.doBuffer=!1,this.options["sync disconnect on unload"]&&(!this.isXDomain()||b.util.ua.hasCORS)){var d=this;b.util.on(c,"beforeunload",function(){d.disconnectSync()},!1)}this.options["auto connect"]&&this.connect()}function e(){}a.Socket=d,b.util.mixin(d,b.EventEmitter),d.prototype.of=function(a){return this.namespaces[a]||(this.namespaces[a]=new b.SocketNamespace(this,a),""!==a&&this.namespaces[a].packet({type:"connect"})),this.namespaces[a]},d.prototype.publish=function(){this.emit.apply(this,arguments);var a;for(var b in this.namespaces)this.namespaces.hasOwnProperty(b)&&(a=this.of(b),a.$emit.apply(a,arguments))},d.prototype.handshake=function(a){function f(b){b instanceof Error?(c.connecting=!1,c.onError(b.message)):a.apply(null,b.split(":"))}var c=this,d=this.options,g=["http"+(d.secure?"s":"")+":/",d.host+":"+d.port,d.resource,b.protocol,b.util.query(this.options.query,"t="+ +new Date)].join("/");if(this.isXDomain()&&!b.util.ua.hasCORS){var h=document.getElementsByTagName("script")[0],i=document.createElement("script");i.src=g+"&jsonp="+b.j.length,h.parentNode.insertBefore(i,h),b.j.push(function(a){f(a),i.parentNode.removeChild(i)})}else{var j=b.util.request();j.open("GET",g,!0),this.isXDomain()&&(j.withCredentials=!0),j.onreadystatechange=function(){4==j.readyState&&(j.onreadystatechange=e,200==j.status?f(j.responseText):403==j.status?c.onError(j.responseText):(c.connecting=!1,!c.reconnecting&&c.onError(j.responseText)))},j.send(null)}},d.prototype.getTransport=function(a){for(var f,c=a||this.transports,e=0;f=c[e];e++)if(b.Transport[f]&&b.Transport[f].check(this)&&(!this.isXDomain()||b.Transport[f].xdomainCheck(this)))return new b.Transport[f](this,this.sessionid);return null},d.prototype.connect=function(a){if(this.connecting)return this;var c=this;return c.connecting=!0,this.handshake(function(d,e,f,g){function h(a){return c.transport&&c.transport.clearTimeouts(),c.transport=c.getTransport(a),c.transport?void c.transport.ready(c,function(){c.connecting=!0,c.publish("connecting",c.transport.name),c.transport.open(),c.options["connect timeout"]&&(c.connectTimeoutTimer=setTimeout(function(){if(!c.connected&&(c.connecting=!1,c.options["try multiple transports"])){for(var a=c.transports;a.length>0&&a.splice(0,1)[0]!=c.transport.name;);a.length?h(a):c.publish("connect_failed")}},c.options["connect timeout"]))}):c.publish("connect_failed")}c.sessionid=d,c.closeTimeout=1e3*f,c.heartbeatTimeout=1e3*e,c.transports||(c.transports=c.origTransports=g?b.util.intersect(g.split(","),c.options.transports):c.options.transports),c.setHeartbeatTimeout(),h(c.transports),c.once("connect",function(){clearTimeout(c.connectTimeoutTimer),a&&"function"==typeof a&&a()})}),this},d.prototype.setHeartbeatTimeout=function(){if(clearTimeout(this.heartbeatTimeoutTimer),!this.transport||this.transport.heartbeats()){var a=this;this.heartbeatTimeoutTimer=setTimeout(function(){a.transport.onClose()},this.heartbeatTimeout)}},d.prototype.packet=function(a){return this.connected&&!this.doBuffer?this.transport.packet(a):this.buffer.push(a),this},d.prototype.setBuffer=function(a){this.doBuffer=a,!a&&this.connected&&this.buffer.length&&(this.options.manualFlush||this.flushBuffer())},d.prototype.flushBuffer=function(){this.transport.payload(this.buffer),this.buffer=[]},d.prototype.disconnect=function(){return(this.connected||this.connecting)&&(this.open&&this.of("").packet({type:"disconnect"}),this.onDisconnect("booted")),this},d.prototype.disconnectSync=function(){var a=b.util.request(),c=["http"+(this.options.secure?"s":"")+":/",this.options.host+":"+this.options.port,this.options.resource,b.protocol,"",this.sessionid].join("/")+"/?disconnect=1";a.open("GET",c,!1),a.send(null),this.onDisconnect("booted")},d.prototype.isXDomain=function(){var a=c.location.port||("https:"==c.location.protocol?443:80);return this.options.host!==c.location.hostname||this.options.port!=a},d.prototype.onConnect=function(){this.connected||(this.connected=!0,this.connecting=!1,this.doBuffer||this.setBuffer(!1),this.emit("connect"))},d.prototype.onOpen=function(){this.open=!0},d.prototype.onClose=function(){this.open=!1,clearTimeout(this.heartbeatTimeoutTimer)},d.prototype.onPacket=function(a){this.of(a.endpoint).onPacket(a)},d.prototype.onError=function(a){a&&a.advice&&"reconnect"===a.advice&&(this.connected||this.connecting)&&(this.disconnect(),this.options.reconnect&&this.reconnect()),this.publish("error",a&&a.reason?a.reason:a)},d.prototype.onDisconnect=function(a){var b=this.connected,c=this.connecting;this.connected=!1,this.connecting=!1,this.open=!1,(b||c)&&(this.transport.close(),this.transport.clearTimeouts(),b&&(this.publish("disconnect",a),"booted"!=a&&this.options.reconnect&&!this.reconnecting&&this.reconnect()))},d.prototype.reconnect=function(){function e(){if(a.connected){for(var b in a.namespaces)a.namespaces.hasOwnProperty(b)&&""!==b&&a.namespaces[b].packet({type:"connect"});a.publish("reconnect",a.transport.name,a.reconnectionAttempts)}clearTimeout(a.reconnectionTimer),a.removeListener("connect_failed",f),a.removeListener("connect",f),a.reconnecting=!1,delete a.reconnectionAttempts,delete a.reconnectionDelay,delete a.reconnectionTimer,delete a.redoTransports,a.options["try multiple transports"]=c}function f(){return a.reconnecting?a.connected?e():a.connecting&&a.reconnecting?a.reconnectionTimer=setTimeout(f,1e3):void(a.reconnectionAttempts++>=b?a.redoTransports?(a.publish("reconnect_failed"),e()):(a.on("connect_failed",f),a.options["try multiple transports"]=!0,a.transports=a.origTransports,a.transport=a.getTransport(),a.redoTransports=!0,a.connect()):(a.reconnectionDelay<d&&(a.reconnectionDelay*=2),a.connect(),a.publish("reconnecting",a.reconnectionDelay,a.reconnectionAttempts),a.reconnectionTimer=setTimeout(f,a.reconnectionDelay))):void 0}this.reconnecting=!0,this.reconnectionAttempts=0,this.reconnectionDelay=this.options["reconnection delay"];var a=this,b=this.options["max reconnection attempts"],c=this.options["try multiple transports"],d=this.options["reconnection limit"];this.options["try multiple transports"]=!1,this.reconnectionTimer=setTimeout(f,this.reconnectionDelay),this.on("connect",f)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(a,b){function c(a,b){this.socket=a,this.name=b||"",this.flags={},this.json=new d(this,"json"),this.ackPackets=0,this.acks={}}function d(a,b){this.namespace=a,this.name=b}a.SocketNamespace=c,b.util.mixin(c,b.EventEmitter),c.prototype.$emit=b.EventEmitter.prototype.emit,c.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)},c.prototype.packet=function(a){return a.endpoint=this.name,this.socket.packet(a),this.flags={},this},c.prototype.send=function(a,b){var c={type:this.flags.json?"json":"message",data:a};return"function"==typeof b&&(c.id=++this.ackPackets,c.ack=!0,this.acks[c.id]=b),this.packet(c)},c.prototype.emit=function(a){var b=Array.prototype.slice.call(arguments,1),c=b[b.length-1],d={type:"event",name:a};return"function"==typeof c&&(d.id=++this.ackPackets,d.ack="data",this.acks[d.id]=c,b=b.slice(0,b.length-1)),d.args=b,this.packet(d)},c.prototype.disconnect=function(){return""===this.name?this.socket.disconnect():(this.packet({type:"disconnect"}),this.$emit("disconnect")),this},c.prototype.onPacket=function(a){function d(){c.packet({type:"ack",args:b.util.toArray(arguments),ackId:a.id})}var c=this;switch(a.type){case"connect":this.$emit("connect");break;case"disconnect":""===this.name?this.socket.onDisconnect(a.reason||"booted"):this.$emit("disconnect",a.reason);break;case"message":case"json":var e=["message",a.data];"data"==a.ack?e.push(d):a.ack&&this.packet({type:"ack",ackId:a.id}),this.$emit.apply(this,e);break;case"event":var e=[a.name].concat(a.args);"data"==a.ack&&e.push(d),this.$emit.apply(this,e);break;case"ack":this.acks[a.ackId]&&(this.acks[a.ackId].apply(this,a.args),delete this.acks[a.ackId]);break;case"error":a.advice?this.socket.onError(a):"unauthorized"==a.reason?this.$emit("connect_failed",a.reason):this.$emit("error",a.reason)}},d.prototype.send=function(){this.namespace.flags[this.name]=!0,this.namespace.send.apply(this.namespace,arguments)},d.prototype.emit=function(){this.namespace.flags[this.name]=!0,this.namespace.emit.apply(this.namespace,arguments)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(a,b,c){function d(){b.Transport.apply(this,arguments)}a.websocket=d,b.util.inherit(d,b.Transport),d.prototype.name="websocket",d.prototype.open=function(){var e,a=b.util.query(this.socket.options.query),d=this;return e||(e=c.MozWebSocket||c.WebSocket),this.websocket=new e(this.prepareUrl()+a),this.websocket.onopen=function(){d.onOpen(),d.socket.setBuffer(!1)},this.websocket.onmessage=function(a){d.onData(a.data)},this.websocket.onclose=function(){d.onClose(),d.socket.setBuffer(!0)},this.websocket.onerror=function(a){d.onError(a)},this},d.prototype.send=b.util.ua.iDevice?function(a){var b=this;return setTimeout(function(){b.websocket.send(a)},0),this}:function(a){return this.websocket.send(a),this},d.prototype.payload=function(a){for(var b=0,c=a.length;c>b;b++)this.packet(a[b]);return this},d.prototype.close=function(){return this.websocket.close(),this},d.prototype.onError=function(a){this.socket.onError(a)},d.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"},d.check=function(){return"WebSocket"in c&&!("__addTask"in WebSocket)||"MozWebSocket"in c},d.xdomainCheck=function(){return!0},b.transports.push("websocket")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(a,b){function c(){b.Transport.websocket.apply(this,arguments)}a.flashsocket=c,b.util.inherit(c,b.Transport.websocket),c.prototype.name="flashsocket",c.prototype.open=function(){var a=this,c=arguments;return WebSocket.__addTask(function(){b.Transport.websocket.prototype.open.apply(a,c)}),this},c.prototype.send=function(){var a=this,c=arguments;return WebSocket.__addTask(function(){b.Transport.websocket.prototype.send.apply(a,c)}),this},c.prototype.close=function(){return WebSocket.__tasks.length=0,b.Transport.websocket.prototype.close.call(this),this},c.prototype.ready=function(a,d){function e(){var b=a.options,e=b["flash policy port"],g=["http"+(b.secure?"s":"")+":/",b.host+":"+b.port,b.resource,"static/flashsocket","WebSocketMain"+(a.isXDomain()?"Insecure":"")+".swf"];c.loaded||("undefined"==typeof WEB_SOCKET_SWF_LOCATION&&(WEB_SOCKET_SWF_LOCATION=g.join("/")),843!==e&&WebSocket.loadFlashPolicyFile("xmlsocket://"+b.host+":"+e),WebSocket.__initialize(),c.loaded=!0),d.call(f)}var f=this;return document.body?e():void b.util.load(e)},c.check=function(){return"undefined"!=typeof WebSocket&&"__initialize"in WebSocket&&swfobject?swfobject.getFlashPlayerVersion().major>=10:!1},c.xdomainCheck=function(){return!0},"undefined"!=typeof window&&(WEB_SOCKET_DISABLE_AUTO_INITIALIZATION=!0),b.transports.push("flashsocket")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports),"undefined"!=typeof window)var swfobject=function(){function A(){if(!t){try{var a=i.getElementsByTagName("body")[0].appendChild(Q("span"));a.parentNode.removeChild(a)}catch(b){return}t=!0;for(var c=l.length,d=0;c>d;d++)l[d]()}}function B(a){t?a():l[l.length]=a}function C(b){if(typeof h.addEventListener!=a)h.addEventListener("load",b,!1);else if(typeof i.addEventListener!=a)i.addEventListener("load",b,!1);else if(typeof h.attachEvent!=a)R(h,"onload",b);else if("function"==typeof h.onload){var c=h.onload;h.onload=function(){c(),b()}}else h.onload=b}function D(){k?E():F()}function E(){var c=i.getElementsByTagName("body")[0],d=Q(b);d.setAttribute("type",e);var f=c.appendChild(d);if(f){var g=0;!function(){if(typeof f.GetVariable!=a){var b=f.GetVariable("$version");b&&(b=b.split(" ")[1].split(","),y.pv=[parseInt(b[0],10),parseInt(b[1],10),parseInt(b[2],10)])}else if(10>g)return g++,void setTimeout(arguments.callee,10);c.removeChild(d),f=null,F()}()}else F()}function F(){var b=m.length;if(b>0)for(var c=0;b>c;c++){var d=m[c].id,e=m[c].callbackFn,f={success:!1,id:d};if(y.pv[0]>0){var g=P(d);if(g)if(!S(m[c].swfVersion)||y.wk&&y.wk<312)if(m[c].expressInstall&&H()){var h={};h.data=m[c].expressInstall,h.width=g.getAttribute("width")||"0",h.height=g.getAttribute("height")||"0",g.getAttribute("class")&&(h.styleclass=g.getAttribute("class")),g.getAttribute("align")&&(h.align=g.getAttribute("align"));for(var i={},j=g.getElementsByTagName("param"),k=j.length,l=0;k>l;l++)"movie"!=j[l].getAttribute("name").toLowerCase()&&(i[j[l].getAttribute("name")]=j[l].getAttribute("value"));I(h,i,d,e)}else J(g),e&&e(f);else U(d,!0),e&&(f.success=!0,f.ref=G(d),e(f))}else if(U(d,!0),e){var n=G(d);n&&typeof n.SetVariable!=a&&(f.success=!0,f.ref=n),e(f)}}}function G(c){var d=null,e=P(c);if(e&&"OBJECT"==e.nodeName)if(typeof e.SetVariable!=a)d=e;else{var f=e.getElementsByTagName(b)[0];f&&(d=f)}return d}function H(){return!u&&S("6.0.65")&&(y.win||y.mac)&&!(y.wk&&y.wk<312)}function I(b,c,d,e){u=!0,r=e||null,s={success:!1,id:d};var g=P(d);if(g){"OBJECT"==g.nodeName?(p=K(g),q=null):(p=g,q=d),b.id=f,(typeof b.width==a||!/%$/.test(b.width)&&parseInt(b.width,10)<310)&&(b.width="310"),(typeof b.height==a||!/%$/.test(b.height)&&parseInt(b.height,10)<137)&&(b.height="137"),i.title=i.title.slice(0,47)+" - Flash Player Installation";var j=y.ie&&y.win?["Active"].concat("").join("X"):"PlugIn",k="MMredirectURL="+h.location.toString().replace(/&/g,"%26")+"&MMplayerType="+j+"&MMdoctitle="+i.title;if(typeof c.flashvars!=a?c.flashvars+="&"+k:c.flashvars=k,y.ie&&y.win&&4!=g.readyState){var l=Q("div");d+="SWFObjectNew",l.setAttribute("id",d),g.parentNode.insertBefore(l,g),g.style.display="none",function(){4==g.readyState?g.parentNode.removeChild(g):setTimeout(arguments.callee,10)}()}L(b,c,d)}}function J(a){if(y.ie&&y.win&&4!=a.readyState){var b=Q("div");a.parentNode.insertBefore(b,a),b.parentNode.replaceChild(K(a),b),a.style.display="none",function(){4==a.readyState?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)}()}else a.parentNode.replaceChild(K(a),a)}function K(a){var c=Q("div");if(y.win&&y.ie)c.innerHTML=a.innerHTML;else{var d=a.getElementsByTagName(b)[0];if(d){var e=d.childNodes;if(e)for(var f=e.length,g=0;f>g;g++)(1!=e[g].nodeType||"PARAM"!=e[g].nodeName)&&8!=e[g].nodeType&&c.appendChild(e[g].cloneNode(!0))}}return c}function L(c,d,f){var g,h=P(f);if(y.wk&&y.wk<312)return g;if(h)if(typeof c.id==a&&(c.id=f),y.ie&&y.win){var i="";for(var j in c)c[j]!=Object.prototype[j]&&("data"==j.toLowerCase()?d.movie=c[j]:"styleclass"==j.toLowerCase()?i+=' class="'+c[j]+'"':"classid"!=j.toLowerCase()&&(i+=" "+j+'="'+c[j]+'"'));var k="";for(var l in d)d[l]!=Object.prototype[l]&&(k+='<param name="'+l+'" value="'+d[l]+'" />');h.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+i+">"+k+"</object>",n[n.length]=c.id,g=P(c.id)}else{var m=Q(b);m.setAttribute("type",e);for(var o in c)c[o]!=Object.prototype[o]&&("styleclass"==o.toLowerCase()?m.setAttribute("class",c[o]):"classid"!=o.toLowerCase()&&m.setAttribute(o,c[o]));for(var p in d)d[p]!=Object.prototype[p]&&"movie"!=p.toLowerCase()&&M(m,p,d[p]);h.parentNode.replaceChild(m,h),g=m}return g}function M(a,b,c){var d=Q("param");d.setAttribute("name",b),d.setAttribute("value",c),a.appendChild(d)}function N(a){var b=P(a);b&&"OBJECT"==b.nodeName&&(y.ie&&y.win?(b.style.display="none",function(){4==b.readyState?O(a):setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b))}function O(a){var b=P(a);if(b){for(var c in b)"function"==typeof b[c]&&(b[c]=null);b.parentNode.removeChild(b)}}function P(a){var b=null;try{b=i.getElementById(a)}catch(c){}return b}function Q(a){return i.createElement(a)}function R(a,b,c){a.attachEvent(b,c),o[o.length]=[a,b,c]}function S(a){var b=y.pv,c=a.split(".");return c[0]=parseInt(c[0],10),c[1]=parseInt(c[1],10)||0,c[2]=parseInt(c[2],10)||0,b[0]>c[0]||b[0]==c[0]&&b[1]>c[1]||b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]?!0:!1}function T(c,d,e,f){if(!y.ie||!y.mac){var g=i.getElementsByTagName("head")[0];if(g){var h=e&&"string"==typeof e?e:"screen";if(f&&(v=null,w=null),!v||w!=h){var j=Q("style");j.setAttribute("type","text/css"),j.setAttribute("media",h),v=g.appendChild(j),y.ie&&y.win&&typeof i.styleSheets!=a&&i.styleSheets.length>0&&(v=i.styleSheets[i.styleSheets.length-1]),w=h}y.ie&&y.win?v&&typeof v.addRule==b&&v.addRule(c,d):v&&typeof i.createTextNode!=a&&v.appendChild(i.createTextNode(c+" {"+d+"}"))}}}function U(a,b){if(x){var c=b?"visible":"hidden";t&&P(a)?P(a).style.visibility=c:T("#"+a,"visibility:"+c)}}function V(b){var c=/[\\\"<>\.;]/,d=null!=c.exec(b);return d&&typeof encodeURIComponent!=a?encodeURIComponent(b):b}{var p,q,r,s,v,w,a="undefined",b="object",c="Shockwave Flash",d="ShockwaveFlash.ShockwaveFlash",e="application/x-shockwave-flash",f="SWFObjectExprInst",g="onreadystatechange",h=window,i=document,j=navigator,k=!1,l=[D],m=[],n=[],o=[],t=!1,u=!1,x=!0,y=function(){var f=typeof i.getElementById!=a&&typeof i.getElementsByTagName!=a&&typeof i.createElement!=a,g=j.userAgent.toLowerCase(),l=j.platform.toLowerCase(),m=/win/.test(l?l:g),n=/mac/.test(l?l:g),o=/webkit/.test(g)?parseFloat(g.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,p=!1,q=[0,0,0],r=null;if(typeof j.plugins!=a&&typeof j.plugins[c]==b)r=j.plugins[c].description,r&&(typeof j.mimeTypes==a||!j.mimeTypes[e]||!!j.mimeTypes[e].enabledPlugin)&&(k=!0,p=!1,r=r.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),q[0]=parseInt(r.replace(/^(.*)\..*$/,"$1"),10),q[1]=parseInt(r.replace(/^.*\.(.*)\s.*$/,"$1"),10),q[2]=/[a-zA-Z]/.test(r)?parseInt(r.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof h[["Active"].concat("Object").join("X")]!=a)try{var s=new(window[["Active"].concat("Object").join("X")])(d);s&&(r=s.GetVariable("$version"),r&&(p=!0,r=r.split(" ")[1].split(","),q=[parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10)]))}catch(t){}return{w3:f,pv:q,wk:o,ie:p,win:m,mac:n}}();!function(){y.w3&&((typeof i.readyState!=a&&"complete"==i.readyState||typeof i.readyState==a&&(i.getElementsByTagName("body")[0]||i.body))&&A(),t||(typeof i.addEventListener!=a&&i.addEventListener("DOMContentLoaded",A,!1),y.ie&&y.win&&(i.attachEvent(g,function(){"complete"==i.readyState&&(i.detachEvent(g,arguments.callee),A())}),h==top&&function(){if(!t){try{i.documentElement.doScroll("left")}catch(a){return void setTimeout(arguments.callee,0)}A()}}()),y.wk&&function(){return t?void 0:/loaded|complete/.test(i.readyState)?void A():void setTimeout(arguments.callee,0)}(),C(A)))}(),function(){y.ie&&y.win&&window.attachEvent("onunload",function(){for(var a=o.length,b=0;a>b;b++)o[b][0].detachEvent(o[b][1],o[b][2]);for(var c=n.length,d=0;c>d;d++)N(n[d]);for(var e in y)y[e]=null;y=null;for(var f in swfobject)swfobject[f]=null;swfobject=null})}()}return{registerObject:function(a,b,c,d){if(y.w3&&a&&b){var e={};e.id=a,e.swfVersion=b,e.expressInstall=c,e.callbackFn=d,m[m.length]=e,U(a,!1)}else d&&d({success:!1,id:a})},getObjectById:function(a){return y.w3?G(a):void 0},embedSWF:function(c,d,e,f,g,h,i,j,k,l){var m={success:!1,id:d};y.w3&&!(y.wk&&y.wk<312)&&c&&d&&e&&f&&g?(U(d,!1),B(function(){e+="",f+="";var n={};if(k&&typeof k===b)for(var o in k)n[o]=k[o];n.data=c,n.width=e,n.height=f;var p={};if(j&&typeof j===b)for(var q in j)p[q]=j[q];if(i&&typeof i===b)for(var r in i)typeof p.flashvars!=a?p.flashvars+="&"+r+"="+i[r]:p.flashvars=r+"="+i[r];if(S(g)){var s=L(n,p,d);n.id==d&&U(d,!0),m.success=!0,m.ref=s}else{if(h&&H())return n.data=h,void I(n,p,d,l);U(d,!0)}l&&l(m)})):l&&l(m)},switchOffAutoHideShow:function(){x=!1},ua:y,getFlashPlayerVersion:function(){return{major:y.pv[0],minor:y.pv[1],release:y.pv[2]}},hasFlashPlayerVersion:S,createSWF:function(a,b,c){return y.w3?L(a,b,c):void 0},showExpressInstall:function(a,b,c,d){y.w3&&H()&&I(a,b,c,d)},removeSWF:function(a){y.w3&&N(a)},createCSS:function(a,b,c,d){y.w3&&T(a,b,c,d)},addDomLoadEvent:B,addLoadEvent:C,getQueryParamValue:function(a){var b=i.location.search||i.location.hash;if(b){if(/\?/.test(b)&&(b=b.split("?")[1]),null==a)return V(b);for(var c=b.split("&"),d=0;d<c.length;d++)if(c[d].substring(0,c[d].indexOf("="))==a)return V(c[d].substring(c[d].indexOf("=")+1))}return""},expressInstallCallback:function(){if(u){var a=P(f);a&&p&&(a.parentNode.replaceChild(p,a),q&&(U(q,!0),y.ie&&y.win&&(p.style.display="block")),r&&r(s)),u=!1}}}}();!function(){if("undefined"!=typeof window&&!window.WebSocket){var a=window.console;return a&&a.log&&a.error||(a={log:function(){},error:function(){}}),swfobject.hasFlashPlayerVersion("10.0.0")?("file:"==location.protocol&&a.error("WARNING: web-socket-js doesn't work in file:///... URL unless you set Flash Security Settings properly. Open the page via Web server i.e. http://..."),WebSocket=function(a,b,c,d,e){var f=this;f.__id=WebSocket.__nextId++,WebSocket.__instances[f.__id]=f,f.readyState=WebSocket.CONNECTING,f.bufferedAmount=0,f.__events={},b?"string"==typeof b&&(b=[b]):b=[],setTimeout(function(){WebSocket.__addTask(function(){WebSocket.__flash.create(f.__id,a,b,c||null,d||0,e||null)})},0)},WebSocket.prototype.send=function(a){if(this.readyState==WebSocket.CONNECTING)throw"INVALID_STATE_ERR: Web Socket connection has not been established";var b=WebSocket.__flash.send(this.__id,encodeURIComponent(a));return 0>b?!0:(this.bufferedAmount+=b,!1)},WebSocket.prototype.close=function(){this.readyState!=WebSocket.CLOSED&&this.readyState!=WebSocket.CLOSING&&(this.readyState=WebSocket.CLOSING,WebSocket.__flash.close(this.__id))},WebSocket.prototype.addEventListener=function(a,b){a in this.__events||(this.__events[a]=[]),this.__events[a].push(b)},WebSocket.prototype.removeEventListener=function(a,b){if(a in this.__events)for(var d=this.__events[a],e=d.length-1;e>=0;--e)if(d[e]===b){d.splice(e,1);break}},WebSocket.prototype.dispatchEvent=function(a){for(var b=this.__events[a.type]||[],c=0;c<b.length;++c)b[c](a);var d=this["on"+a.type];d&&d(a)},WebSocket.prototype.__handleEvent=function(a){"readyState"in a&&(this.readyState=a.readyState),"protocol"in a&&(this.protocol=a.protocol);var b;if("open"==a.type||"error"==a.type)b=this.__createSimpleEvent(a.type);else if("close"==a.type)b=this.__createSimpleEvent("close");else{if("message"!=a.type)throw"unknown event type: "+a.type;var c=decodeURIComponent(a.message);b=this.__createMessageEvent("message",c)}this.dispatchEvent(b)},WebSocket.prototype.__createSimpleEvent=function(a){if(document.createEvent&&window.Event){var b=document.createEvent("Event");return b.initEvent(a,!1,!1),b}return{type:a,bubbles:!1,cancelable:!1}},WebSocket.prototype.__createMessageEvent=function(a,b){if(document.createEvent&&window.MessageEvent&&!window.opera){var c=document.createEvent("MessageEvent");return c.initMessageEvent("message",!1,!1,b,null,null,window,null),c}return{type:a,data:b,bubbles:!1,cancelable:!1}},WebSocket.CONNECTING=0,WebSocket.OPEN=1,WebSocket.CLOSING=2,WebSocket.CLOSED=3,WebSocket.__flash=null,WebSocket.__instances={},WebSocket.__tasks=[],WebSocket.__nextId=0,WebSocket.loadFlashPolicyFile=function(a){WebSocket.__addTask(function(){WebSocket.__flash.loadManualPolicyFile(a)})},WebSocket.__initialize=function(){if(!WebSocket.__flash){if(WebSocket.__swfLocation&&(window.WEB_SOCKET_SWF_LOCATION=WebSocket.__swfLocation),!window.WEB_SOCKET_SWF_LOCATION)return void a.error("[WebSocket] set WEB_SOCKET_SWF_LOCATION to location of WebSocketMain.swf");var b=document.createElement("div");b.id="webSocketContainer",b.style.position="absolute",WebSocket.__isFlashLite()?(b.style.left="0px",b.style.top="0px"):(b.style.left="-100px",b.style.top="-100px");var c=document.createElement("div");c.id="webSocketFlash",b.appendChild(c),document.body.appendChild(b),swfobject.embedSWF(WEB_SOCKET_SWF_LOCATION,"webSocketFlash","1","1","10.0.0",null,null,{hasPriority:!0,swliveconnect:!0,allowScriptAccess:"always"},null,function(b){b.success||a.error("[WebSocket] swfobject.embedSWF failed")})}},WebSocket.__onFlashInitialized=function(){setTimeout(function(){WebSocket.__flash=document.getElementById("webSocketFlash"),WebSocket.__flash.setCallerUrl(location.href),WebSocket.__flash.setDebug(!!window.WEB_SOCKET_DEBUG);for(var a=0;a<WebSocket.__tasks.length;++a)WebSocket.__tasks[a]();WebSocket.__tasks=[]},0)},WebSocket.__onFlashEvent=function(){return setTimeout(function(){try{for(var b=WebSocket.__flash.receiveEvents(),c=0;c<b.length;++c)WebSocket.__instances[b[c].webSocketId].__handleEvent(b[c])}catch(d){a.error(d)}},0),!0},WebSocket.__log=function(b){a.log(decodeURIComponent(b))},WebSocket.__error=function(b){a.error(decodeURIComponent(b))},WebSocket.__addTask=function(a){WebSocket.__flash?a():WebSocket.__tasks.push(a)},WebSocket.__isFlashLite=function(){if(!window.navigator||!window.navigator.mimeTypes)return!1;var a=window.navigator.mimeTypes["application/x-shockwave-flash"];return a&&a.enabledPlugin&&a.enabledPlugin.filename&&a.enabledPlugin.filename.match(/flashlite/i)?!0:!1},window.WEB_SOCKET_DISABLE_AUTO_INITIALIZATION||(window.addEventListener?window.addEventListener("load",function(){WebSocket.__initialize()},!1):window.attachEvent("onload",function(){WebSocket.__initialize()})),void 0):void a.error("Flash Player >= 10.0.0 is required.")}}(),function(a,b,c){function d(a){a&&(b.Transport.apply(this,arguments),this.sendBuffer=[])}function e(){}a.XHR=d,b.util.inherit(d,b.Transport),d.prototype.open=function(){return this.socket.setBuffer(!1),this.onOpen(),this.get(),this.setCloseTimeout(),this},d.prototype.payload=function(a){for(var c=[],d=0,e=a.length;e>d;d++)c.push(b.parser.encodePacket(a[d]));this.send(b.parser.encodePayload(c))},d.prototype.send=function(a){return this.post(a),this},d.prototype.post=function(a){function d(){4==this.readyState&&(this.onreadystatechange=e,b.posting=!1,200==this.status?b.socket.setBuffer(!1):b.onClose())}function f(){this.onload=e,b.socket.setBuffer(!1)}var b=this;this.socket.setBuffer(!0),this.sendXHR=this.request("POST"),c.XDomainRequest&&this.sendXHR instanceof XDomainRequest?this.sendXHR.onload=this.sendXHR.onerror=f:this.sendXHR.onreadystatechange=d,this.sendXHR.send(a)},d.prototype.close=function(){return this.onClose(),this},d.prototype.request=function(a){var c=b.util.request(this.socket.isXDomain()),d=b.util.query(this.socket.options.query,"t="+ +new Date);if(c.open(a||"GET",this.prepareUrl()+d,!0),"POST"==a)try{c.setRequestHeader?c.setRequestHeader("Content-type","text/plain;charset=UTF-8"):c.contentType="text/plain"}catch(e){}return c},d.prototype.scheme=function(){return this.socket.options.secure?"https":"http"},d.check=function(a,d){try{var e=b.util.request(d),f=c.XDomainRequest&&e instanceof XDomainRequest,g=a&&a.options&&a.options.secure?"https:":"http:",h=c.location&&g!=c.location.protocol;if(e&&(!f||!h))return!0}catch(i){}return!1},d.xdomainCheck=function(a){return d.check(a,!0)}}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(a,b){function c(){b.Transport.XHR.apply(this,arguments)}a.htmlfile=c,b.util.inherit(c,b.Transport.XHR),c.prototype.name="htmlfile",c.prototype.get=function(){this.doc=new(window[["Active"].concat("Object").join("X")])("htmlfile"),this.doc.open(),this.doc.write("<html></html>"),this.doc.close(),this.doc.parentWindow.s=this;var a=this.doc.createElement("div");a.className="socketio",this.doc.body.appendChild(a),this.iframe=this.doc.createElement("iframe"),a.appendChild(this.iframe);var c=this,d=b.util.query(this.socket.options.query,"t="+ +new Date);this.iframe.src=this.prepareUrl()+d,b.util.on(window,"unload",function(){c.destroy()})},c.prototype._=function(a,b){a=a.replace(/\\\//g,"/"),this.onData(a);try{var c=b.getElementsByTagName("script")[0];c.parentNode.removeChild(c)}catch(d){}},c.prototype.destroy=function(){if(this.iframe){try{this.iframe.src="about:blank"}catch(a){}this.doc=null,this.iframe.parentNode.removeChild(this.iframe),this.iframe=null,CollectGarbage()}},c.prototype.close=function(){return this.destroy(),b.Transport.XHR.prototype.close.call(this)},c.check=function(a){if("undefined"!=typeof window&&["Active"].concat("Object").join("X")in window)try{var c=new(window[["Active"].concat("Object").join("X")])("htmlfile");return c&&b.Transport.XHR.check(a)}catch(d){}return!1},c.xdomainCheck=function(){return!1},b.transports.push("htmlfile")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(a,b,c){function d(){b.Transport.XHR.apply(this,arguments)}function e(){}a["xhr-polling"]=d,b.util.inherit(d,b.Transport.XHR),b.util.merge(d,b.Transport.XHR),d.prototype.name="xhr-polling",d.prototype.heartbeats=function(){return!1},d.prototype.open=function(){var a=this;return b.Transport.XHR.prototype.open.call(a),!1},d.prototype.get=function(){function b(){4==this.readyState&&(this.onreadystatechange=e,200==this.status?(a.onData(this.responseText),a.get()):a.onClose())}function d(){this.onload=e,this.onerror=e,a.retryCounter=1,a.onData(this.responseText),a.get()}function f(){a.retryCounter++,!a.retryCounter||a.retryCounter>3?a.onClose():a.get()}if(this.isOpen){var a=this;this.xhr=this.request(),c.XDomainRequest&&this.xhr instanceof XDomainRequest?(this.xhr.onload=d,this.xhr.onerror=f):this.xhr.onreadystatechange=b,this.xhr.send(null)
}},d.prototype.onClose=function(){if(b.Transport.XHR.prototype.onClose.call(this),this.xhr){this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=e;try{this.xhr.abort()}catch(a){}this.xhr=null}},d.prototype.ready=function(a,c){var d=this;b.util.defer(function(){c.call(d)})},b.transports.push("xhr-polling")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(a,b,c){function e(){b.Transport["xhr-polling"].apply(this,arguments),this.index=b.j.length;var c=this;b.j.push(function(a){c._(a)})}var d=c.document&&"MozAppearance"in c.document.documentElement.style;a["jsonp-polling"]=e,b.util.inherit(e,b.Transport["xhr-polling"]),e.prototype.name="jsonp-polling",e.prototype.post=function(a){function i(){j(),c.socket.setBuffer(!1)}function j(){c.iframe&&c.form.removeChild(c.iframe);try{h=document.createElement('<iframe name="'+c.iframeId+'">')}catch(a){h=document.createElement("iframe"),h.name=c.iframeId}h.id=c.iframeId,c.form.appendChild(h),c.iframe=h}var c=this,d=b.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index);if(!this.form){var h,e=document.createElement("form"),f=document.createElement("textarea"),g=this.iframeId="socketio_iframe_"+this.index;e.className="socketio",e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.display="none",e.target=g,e.method="POST",e.setAttribute("accept-charset","utf-8"),f.name="d",e.appendChild(f),document.body.appendChild(e),this.form=e,this.area=f}this.form.action=this.prepareUrl()+d,j(),this.area.value=b.JSON.stringify(a);try{this.form.submit()}catch(k){}this.iframe.attachEvent?h.onreadystatechange=function(){"complete"==c.iframe.readyState&&i()}:this.iframe.onload=i,this.socket.setBuffer(!0)},e.prototype.get=function(){var a=this,c=document.createElement("script"),e=b.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index);this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),c.async=!0,c.src=this.prepareUrl()+e,c.onerror=function(){a.onClose()};var f=document.getElementsByTagName("script")[0];f.parentNode.insertBefore(c,f),this.script=c,d&&setTimeout(function(){var a=document.createElement("iframe");document.body.appendChild(a),document.body.removeChild(a)},100)},e.prototype._=function(a){return this.onData(a),this.isOpen&&this.get(),this},e.prototype.ready=function(a,c){var e=this;return d?void b.util.load(function(){c.call(e)}):c.call(this)},e.check=function(){return"document"in c},e.xdomainCheck=function(){return!0},b.transports.push("jsonp-polling")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),"function"==typeof define&&define.amd&&define("socket.io-client",[],function(){return io})}(),define("core/services/notificationService",["module","../moduleDef","jquery","angular","socket.io-client"],function(requireModule,module){var NOTIFICATION_EVENTS={PAUSE:"notification:pause",RESUME:"notification:resume"};module.constant("NOTIFICATION_EVENTS",NOTIFICATION_EVENTS).factory("notificationService",["$rootScope","AUTH_EVENTS","$window",function($rootScope,AUTH_EVENTS,$window){var socket=null,token=null,offLogin=null,offLogout=null,disconnect=function(){socket&&(socket.disconnect(),socket=null,token=null)},connect=function(url){socket=io.connect(url+"?token="+token,{resource:"socket","force new connection":!0}),socket.on("reports_changed",function(msg){$rootScope.$apply(function(){$rootScope.$emit("reports:"+msg.type,{report:msg.report})})}),socket.on("workqueue_changed",function(msg){$rootScope.$apply(function(){$rootScope.$emit("workqueue:changed",{positions:msg.data})})}),socket.on("event_fired",function(msg){$rootScope.$apply(function(){$rootScope.$emit("event:fired",msg.data)})}),socket.on("maintenance_action",function(msg){$rootScope.$apply(function(){$rootScope.$emit("maintenance:action",msg)})})},pause=function(){socket&&socket.disconnect(),$rootScope.$apply(function(){$rootScope.$emit(NOTIFICATION_EVENTS.PAUSE)})},resume=function(){socket&&socket.socket.reconnect(),$rootScope.$apply(function(){$rootScope.$emit(NOTIFICATION_EVENTS.RESUME)})};return{start:function(url){offLogin=$rootScope.$on(AUTH_EVENTS.LOGIN,function(e,args){socket&&token&&token===args.user.Token||(disconnect(),token=args.user.Token,connect(url))}),offLogout=$rootScope.$on(AUTH_EVENTS.LOGOUT,function(){disconnect()}),$window.isCordova&&($window.document.addEventListener("pause",pause,!1),$window.document.addEventListener("resume",resume,!1))},stop:function(){offLogin&&(offLogin(),offLogin=null),offLogout&&(offLogout(),offLogout=null),$window.isCordova&&($window.document.removeEventListener("pause",pause),$window.document.removeEventListener("resume",resume))}}}]),module.run(["apinetService","notificationService","$rootScope",function(apinetService,notificationService,$rootScope){notificationService.start(apinetService.notificationRoot()),$rootScope.$on("$destroy",function(){notificationService.stop()})}])}),define("core/services/errorPageService",["../moduleDef","angular"],function(module){module.factory("errorPageService",function(){var errorData={reasonKey:null,reasonTitleKey:null,backState:null,backStateParams:null},backStateStack=[];return{setPrevState:function(prevState,prevStateParams){if(prevState&&!prevState.abstract&&"page.project"!==prevState.name){var bs={s:prevState,p:prevStateParams};backStateStack.push(bs),backStateStack.length>2&&backStateStack.splice(0,1),errorData.backState=backStateStack[0].s,errorData.backStateParams=backStateStack[0].p}},setError:function(reason,title){errorData.reasonKey=reason||null,errorData.reasonTitleKey=title||null},getError:function(){return errorData}}}),module.run(["errorPageService","$rootScope",function(svc,$rootScope){$rootScope.$on("$stateChangeSuccess",function(ev,to,toParams,from,fromParams){svc.setPrevState(from,fromParams)})}])}),define("core/services/stateCacheService",["../moduleDef","angular"],function(module,angular){module.factory("stateCacheService",["$state","$angularCacheFactory",function($state,$angularCacheFactory){var cache=$angularCacheFactory("stateCache",{capacity:100,maxAge:6e5,recycleFreq:6e4,deleteOnExpire:"aggressive"}),cacheKey=function(scopeKey){return $state.current.name+"_"+scopeKey},defaultRestorer=function(scope,state){angular.extend(scope,state)};return{cacheState:function(scopeKey,state){state&&cache.put(cacheKey(scopeKey),state)},restoreState:function(scopeKey,scope,restore){var key=cacheKey(scopeKey),state=cache.get(key);return state?((restore||defaultRestorer)(scope,state),state):null},put:cache.put,get:cache.get,remove:cache.remove,clear:cache.removeAll}}]).run(["stateCacheService","$rootScope","AUTH_EVENTS",function(stateCacheService,$rootScope,AUTH_EVENTS){$rootScope.$on(AUTH_EVENTS.LOGOUT,function(){stateCacheService.clear()})}])}),define("text!core/services/confirm.tpl.html",[],function(){return'<div class="modal-content">\r\n\r\n    <div class="modal-header">\r\n        <button type="button" class="close" aria-hidden="true" ng-click="cancel()">&times;</button>\r\n        <h4 class="modal-title">{{ title }}</h4>\r\n    </div>\r\n\r\n    <div class="modal-body">\r\n        <p>{{ content }}</p>\r\n    </div>\r\n\r\n    <div class="modal-footer" bindonce="i18n.core.buttons">\r\n        <button type="button" class="btn btn-default" bo-text="i18n.core.buttons.cancel" ng-click="cancel()"></button>\r\n        <button type="button" class="btn btn-primary" bo-text="i18n.core.buttons.ok" ng-click="ok()"></button>\r\n    </div>\r\n</div>\r\n'}),define("core/services/dialogService",["../moduleDef","angular","text!./confirm.tpl.html"],function(module,angular,confirmTpl){module.service("dialogService",["$modal",function($modal){angular.extend(this,{confirm:function(title,content){var modalInstance=$modal.open({template:confirmTpl,controller:["$scope","$modalInstance","dialogService",function($scope,$modalInstance){$scope.title=title,$scope.content=content,$scope.ok=function(){$modalInstance.close()},$scope.cancel=function(){$modalInstance.dismiss("cancel")}}]});return modalInstance.result}})}])}),define("core/services/projectInfoService",["../moduleDef","angular"],function(module,angular){module.factory("projectInfoService",["apinetService","$q","$window","$rootScope","$stateParams",function(apinetService,$q,$window,$rootScope,$stateParams){var CURRENT_PROJECT_LIFETIME_MS=36e5,PROJECT_KEY="ago.current_project",fromLocalStorage=function(){var storedProjectInfo=$window.localStorage.getItem(PROJECT_KEY);return storedProjectInfo&&(storedProjectInfo=angular.fromJson(storedProjectInfo)),storedProjectInfo},toLocalStorage=function(projectInfo){projectInfo.timestamp=new Date,$window.localStorage.setItem(PROJECT_KEY,angular.toJson(projectInfo))},isExpired=function(projectInfo){return(new Date).getTime()-new Date(projectInfo.timestamp).getTime()>CURRENT_PROJECT_LIFETIME_MS},sameModule=function(cached,requested){return cached&&requested&&cached.module===requested.Module.toLowerCase()&&cached.version==requested.Version.toLowerCase()},constructInfoResult=function(info,reload,same){return{data:info,reload:reload,sameModule:same}},firstRequest=!0,svc={start:function(){$rootScope.$on("maintenance:action",function(e,arg){var projectInfo=fromLocalStorage();if(projectInfo&&projectInfo.project===arg.project&&($rootScope.maintenance=arg,"Finished"===arg.action)){var storedProjInfo=fromLocalStorage();storedProjInfo&&storedProjInfo.project===arg.project&&$window.localStorage.removeItem(PROJECT_KEY),$stateParams.project&&$stateParams.project===arg.project&&svc.projectInfo($stateParams.project).then(function(){$window.location.reload()})}})},projectInfo:function(project,force){force=force||!1;var cachedProjectInfo=fromLocalStorage(),requestNeeded=force||null==cachedProjectInfo||cachedProjectInfo.project!==project||isExpired(cachedProjectInfo),deffered=$q.defer();if(requestNeeded||firstRequest)apinetService.getModel({method:"core/projects/projectInfo",project:project}).then(function(response){var result=constructInfoResult(response,requestNeeded&&!firstRequest,sameModule(cachedProjectInfo,response));deffered.resolve(result),response.Maintenance&&$rootScope.$emit("maintenance:action",response.Maintenance)},function(err){deffered.reject(err)}),firstRequest=!1;else{var response=constructInfoResult({Name:cachedProjectInfo.name,Module:cachedProjectInfo.module,Version:cachedProjectInfo.version},!1,!0);deffered.resolve(response)}return deffered.promise.then(function(result){var projectInfo={project:project,name:result.data.Name,module:result.data.Module.toLowerCase(),version:result.data.Version.toLowerCase()};return toLocalStorage(projectInfo),result})}};return svc}]).run(["projectInfoService",function(projectInfoService){projectInfoService.start()}])}),define("core/services/splashscreenService",["../moduleDef","angular"],function(module,angular){module.service("splashscreen",[function(){return{show:function(){angular.element("body").addClass("splashscreen")},hide:function(){angular.element("body").removeClass("splashscreen")}}}])}),define("core/services",["./services/apinetService","./services/filteringService","./services/i18n","./services/metadataService","./services/moduleConfig","./services/reportService","./services/notificationService","./services/errorPageService","./services/stateCacheService","./services/dialogService","./services/projectInfoService","./services/splashscreenService"],function(){}),define("text!core/directives/ago.ErrorMsg.tpl.html",[],function(){return'<div class="alert alert-danger alert-dismissable" ng-show="validation.generalErrors">\r\n	<a class="close" href="" ng-click="resetValidation()">&times;</a>\r\n	<i class="icon-remove-sign"></i>\r\n	{{ validation.generalErrors | joinBy }}\r\n</div>'}),define("core/directives/ago.errorMsg",["../moduleDef","angular","text!./ago.ErrorMsg.tpl.html"],function(module,angular,tpl){module.directive("agoErrorMsg",function(){return{restrict:"E",replace:!0,template:tpl}})}),requirejs.s.contexts._.nextTick=function(f){f()},require(["css"],function(css){css.addBuffer("jquery/select2/theme.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,define("core/directives/ago.select2",["../moduleDef","jquery","angular","jquery/select2","css!jquery/select2/theme"],function(module,$,angular){module.value("agoSelect2Config",{}).directive("agoSelect2",["agoSelect2Config","$timeout","$rootScope",function(agoSelect2Config,$timeout,$rootScope){var options={};return agoSelect2Config&&angular.extend(options,agoSelect2Config),{require:"ngModel",compile:function(tElm,tAttrs){var watch,repeatOption,repeatAttr,isSelect=tElm.is("select"),isMultiple=angular.isDefined(tAttrs.multiple);return tElm.is("select")&&(repeatOption=tElm.find("option[ng-repeat], option[data-ng-repeat]"),repeatOption.length&&(repeatAttr=repeatOption.attr("ng-repeat")||repeatOption.attr("data-ng-repeat"),watch=$.trim(repeatAttr.split("|")[0]).split(" ").pop())),function(scope,elm,attrs,controller){var opts=angular.extend({},options,scope.$eval(attrs.agoSelect2)),convertToAngularModel=function(select2_data){if(opts.simple_tags){var model=[];return angular.forEach(select2_data,function(value){model.push(value.id)}),model}return select2_data},convertToSelect2Model=function(angular_data){if(opts.simple_tags||!angular_data){var model=[];return angular.forEach(angular_data||[],function(value){model.push({id:value,text:value})}),model}return angular_data};if(isSelect?(delete opts.multiple,delete opts.initSelection):isMultiple&&(opts.multiple=!0),controller){var renderValidationsFn=function(){var div=elm.prev();div.toggleClass("ng-invalid",!controller.$valid).toggleClass("ng-valid",controller.$valid).toggleClass("ng-invalid-required",!controller.$valid).toggleClass("ng-valid-required",controller.$valid).toggleClass("ng-dirty",controller.$dirty).toggleClass("ng-pristine",controller.$pristine)};if(controller.$viewChangeListeners.push(renderValidationsFn),controller.$render=function(){return renderValidationsFn(),isSelect||!opts.multiple&&controller.$viewValue&&!angular.isObject(controller.$viewValue)?void elm.select2("val",controller.$viewValue):controller.$viewValue?void elm.select2("data",opts.multiple?convertToSelect2Model(controller.$viewValue):controller.$viewValue):void elm.select2("val",null)},watch&&scope.$watch(watch,function(newVal){newVal&&$timeout(function(){elm.select2("val",controller.$viewValue),elm.trigger("change")})}),!isSelect&&(elm.bind("change",function(){$rootScope.$$phase?controller.$setViewValue(convertToAngularModel(elm.select2("data"))):scope.$apply(function(){controller.$setViewValue(convertToAngularModel(elm.select2("data")))})}),opts.initSelection)){var initSelection=opts.initSelection;opts.initSelection=function(element,callback){initSelection(element,function(value){controller.$setViewValue(convertToAngularModel(value)),callback(value)})}}}elm.bind("$destroy",function(){elm.select2("destroy")}),attrs.$observe("disabled",function(value){elm.select2("enable",!value)}),attrs.$observe("readonly",function(value){elm.select2("readonly",!!value)}),attrs.ngMultiple&&scope.$watch(attrs.ngMultiple,function(){elm.select2(opts)}),$timeout(function(){elm.select2(opts),controller&&(elm.val(controller.$viewValue),controller.$render(),opts.initSelection||isSelect||controller.$setViewValue(convertToAngularModel(elm.select2("data"))))})}}}}])}),define("text!core/directives/agoBox.tpl.html",[],function(){return'<div ng-class="boxClass">\r\n	<div ng-class="boxHeaderClass" ng-click="onHeaderClick($event);">\r\n		<div class="title" ago-box-title-transclude>{{ caption }}</div>\r\n		<div class="actions" ago-box-actions-transclude>\r\n			<a ng-show="collapsibleDefined" href="#" class="btn btn-xs btn-link" ng-click="collapsed = !collapsed;">\r\n				<i class="fa" ng-class="{ \'icon-chevron-up\': !collapsed, \'icon-chevron-down\': collapsed }"></i>\r\n			</a>\r\n		</div>\r\n	</div>\r\n	<div class="collapsing" collapse="collapsed" ng-style="{ \'overflow\': collapsed ? \'hidden\' : \'visible\' }">\r\n		<div ng-class="boxContentClass" ng-transclude ago-box-content-transclude></div>\r\n	</div>\r\n</div>'}),requirejs.s.contexts._.nextTick=function(f){f()},require(["css"],function(css){css.addBuffer("core/directives/agoBox.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,define("core/directives/agoBox",["../moduleDef","angular","text!./agoBox.tpl.html","css!./agoBox.css"],function(module,angular,tpl){module.directive("agoBox",[function(){return{restrict:"EA",replace:!0,transclude:!0,scope:{color:"@",border:"@",caption:"@",large:"@",padding:"@",collapsible:"@",collapsed:"=?",titleClickCollapse:"@",headerClass:"@"},template:tpl,controller:["$scope",function($scope){angular.extend($scope,{boxClass:{box:!0,"ago-box":!0},boxHeaderClass:{"box-header":!0},boxContentClass:{"box-content":!0},onHeaderClick:function(){$scope.titleClickCollapseDefined&&($scope.collapsed=!$scope.collapsed)}}),angular.extend(this,{$scope:$scope,colorWatcher:function(value,oldValue){oldValue&&delete $scope.boxHeaderClass[oldValue+"-background"];for(var p in $scope.boxHeaderClass)$scope.boxHeaderClass.hasOwnProperty(p)&&p.indexOf("-background")>=0&&delete $scope.boxHeaderClass[p];value&&($scope.boxHeaderClass[value+"-background"]=!0)},headerClassWatcher:function(value,oldValue){var prop;if(oldValue)for(prop in oldValue)delete $scope.boxHeaderClass[prop];if(value){var clsval=$scope.$eval(value);for(prop in clsval)$scope.boxHeaderClass[prop]=clsval[prop]}},borderWatcher:function(value,oldValue){oldValue&&delete $scope.boxClass[oldValue+"-border"],value&&($scope.boxClass[value+"-border"]=!0),$scope.boxClass["box-bordered"]=angular.isDefined(value)},largeWatcher:function(value){$scope.boxHeaderClass["box-header-small"]=!angular.isDefined(value)},paddingWatcher:function(value){$scope.boxContentClass["box-padding"]=angular.isDefined(value)},collapsibleWatcher:function(value){$scope.collapsibleDefined=angular.isDefined(value)},titleClickCollapseWatcher:function(value){$scope.titleClickCollapseDefined=angular.isDefined(value),$scope.boxHeaderClass["box-header-clickable"]=angular.isDefined(value)}}),$scope.$watch("color",this.colorWatcher),$scope.$watch("headerClass",this.headerClassWatcher),$scope.$watch("border",this.borderWatcher),$scope.$watch("large",this.largeWatcher),$scope.$watch("padding",this.paddingWatcher),$scope.$watch("collapsible",this.collapsibleWatcher),$scope.$watch("titleClickCollapse",this.titleClickCollapseWatcher),this.colorWatcher($scope.color),this.headerClassWatcher($scope.headerClass),this.borderWatcher($scope.border),this.largeWatcher($scope.large),this.paddingWatcher($scope.padding),this.collapsibleWatcher($scope.collapsible),this.titleClickCollapseWatcher($scope.titleClickCollapse)}]}}]).directive("agoBoxTitle",function(){return{restrict:"EA",replace:!0,transclude:!0,template:"",require:"^agoBox",compile:function(tElement,tAttr,transcludeFn){return function($scope,element,attrs,agoBoxCtrl){agoBoxCtrl.titleContent=transcludeFn(agoBoxCtrl.$scope.$parent,function(){})}}}}).directive("agoBoxTitleTransclude",function(){return{require:"^agoBox",link:function($scope,element,attrs,agoBoxCtrl){$scope.$watch(function(){return agoBoxCtrl.titleContent},function(value){value&&element.html(angular.element(value))})}}}).directive("agoBoxActions",function(){return{restrict:"EA",replace:!0,transclude:!0,template:"",require:"^agoBox",compile:function(tElement,tAttr,transcludeFn){return function($scope,element,attrs,agoBoxCtrl){agoBoxCtrl.actionsContent=transcludeFn(agoBoxCtrl.$scope.$parent,function(){})}}}}).directive("agoBoxActionsTransclude",function(){return{require:"^agoBox",link:function($scope,element,attrs,agoBoxCtrl){$scope.$watch(function(){return agoBoxCtrl.actionsContent},function(value){value&&element.html(angular.element(value))})}}}).directive("agoBoxContent",function(){return{restrict:"EA",replace:!0,transclude:!0,template:"",require:"^agoBox",compile:function(tElement,tAttr,transcludeFn){return function($scope,element,attrs,agoBoxCtrl){agoBoxCtrl.contentContent=transcludeFn(agoBoxCtrl.$scope.$parent,function(){})}}}}).directive("agoBoxContentTransclude",function(){return{require:"^agoBox",link:function($scope,element,attrs,agoBoxCtrl){$scope.$watch(function(){return agoBoxCtrl.contentContent},function(value){value&&element.html(angular.element(value))})}}})}),define("core/directives/buttons",["../moduleDef"],function(module){module.directive("agoBtnDelete",["i18n",function(){return{restrict:"E",replace:!0,template:function(){return'<button type="button" class="btn btn-danger btn-sm"><i class="icon-remove"></i></button>'}}}]),module.directive("agoBtnDeleteMultiple",["i18n",function(){return{restrict:"E",replace:!0,template:function(){return'<button type="button" class="btn btn-danger">{{ text || i18n.msg(\'core.buttons.deleteSelected\') }}</button>'},scope:{text:"="},controller:["$scope","$rootScope",function($scope,$rootScope){$scope.i18n=$rootScope.i18n}]}}])}),define("core/directives/buttonToggle",["../moduleDef"],function(module){module.directive("buttonToggle",function(){return{restrict:"A",require:"ngModel",link:function($scope,element,attr,ctrl){var classToToggle=attr.buttonToggle;element.bind("click",function(){var checked=ctrl.$viewValue;$scope.$apply(function(){ctrl.$setViewValue(!checked)})}),$scope.$watch(attr.ngModel,function(value){value?element.addClass(classToToggle):element.removeClass(classToToggle)})}}})}),define("core/directives/checker",["../moduleDef","angular"],function(module,angular){module.directive("checker",function(){return{restrict:"A",link:function(scope,element,attrs){var params=scope.$eval("{"+attrs.checker+"}");params.items=params.items||"items",params.prop=params.prop||"selected",angular.element(element).on("click",function(){var items=scope[params.items],len=items.length,checked=$(this).is(":checked");scope.$apply(function(){for(var i=0;len>i;i++)items[i][params.prop]=checked})})}}})}),define("core/directives/integer",["../moduleDef"],function(module){module.directive("agoInteger",function(){var INTEGER_REGEXP=/^\-?\d*$/;return{require:"ngModel",link:function(scope,elm,attrs,ctrl){var min=attrs.agoMin?parseInt(attrs.agoMin):null,max=attrs.agoMax?parseInt(attrs.agoMax):null,validator=function(viewValue){if(!viewValue)return ctrl.$setValidity("integer",!0),viewValue;if(INTEGER_REGEXP.test(viewValue)){var ival=parseInt(viewValue,10);return null!==min&&min>ival||null!==max&&ival>max?void ctrl.$setValidity("integer",!1):(ctrl.$setValidity("integer",!0),viewValue)}return void ctrl.$setValidity("integer",!1)};ctrl.$formatters.push(validator),ctrl.$parsers.unshift(validator)}}})}),define("core/directives/lookup",["../moduleDef","angular","jquery","jquery/select2"],function(module,angular){module.directive("lookup",["$compile","$timeout","$exceptionHandler","apinetService","$stateParams","defaultPageSize",function($compile,$timeout,$exceptionHandler,apinetService,$stateParams,defaultPageSize){return{restrict:"A",scope:!0,priority:1e3,terminal:!0,link:function($scope,$element,$attrs){var localLookupOptions={query:function(query){$scope.timeout&&($timeout.cancel($scope.timeout),$scope.timeout=null),$scope.timeout=$timeout(function(){$scope.timeout=null,apinetService.getModels(angular.extend({method:$scope.action,project:$stateParams.project,term:query.term,page:query.page-1},$scope.$eval($attrs.requestParams))).then(function(result){query.callback({results:result,more:result.length>=defaultPageSize,context:!0})},function(error){try{throw error}catch(e){$exceptionHandler(e)}})},query.context?0:600)},initSelection:angular.noop};angular.extend($scope,{lookupOptions:angular.extend({},localLookupOptions,$scope.$eval($attrs.lookupOptions))}),$attrs.lookup&&($scope.action=$attrs.lookup),$attrs.$observe("lookupOptions",function(value){angular.extend($scope.lookupOptions,$scope.$eval(value))}),$attrs.$set("lookup",null),$attrs.$set("ago-select2","lookupOptions"),$compile($element)($scope,function(cloned){$element.replaceWith(cloned)})}}}])}),define("core/directives/requiredMultiple",["../moduleDef","angular"],function(module,angular){module.directive("requiredMultiple",function(){function isEmpty(value){return angular.isUndefined(value)||angular.isArray(value)&&0===value.length||""===value||null===value||value!==value}return{require:"?ngModel",link:function(scope,elm,attr,ctrl){if(ctrl){attr.required=!0;var validator=function(value){return attr.required&&(isEmpty(value)||value===!1)?void ctrl.$setValidity("required",!1):(ctrl.$setValidity("required",!0),value)};ctrl.$formatters.push(validator),ctrl.$parsers.unshift(validator),attr.$observe("required",function(){validator(ctrl.$viewValue)})}}}})}),define("text!core/directives/counter.tpl.html",[],function(){return'<button class="counter btn btn-default pull-right" ng-click="read()">\r\n	{{ viewed }} / {{ count }}\r\n</button>'}),requirejs.s.contexts._.nextTick=function(f){f()},require(["css"],function(css){css.addBuffer("core/directives/counter.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,define("core/directives/counter",["../moduleDef","angular","text!./counter.tpl.html","css!./counter.css"],function(module,angular,tpl){module.directive("counter",["$stateParams","apinetService","DEFAULT_PAGE_SIZE",function($stateParams,apinetService,DEFAULT_PAGE_SIZE){return{restrict:"E",replace:!0,template:tpl,link:function(scope,elm,attrs){scope.viewed="?",scope.count="?",scope.$on("filterChanged",function(){scope.count="?"}),scope.$watchCollection("models",function(newVal){scope.viewed=angular.isArray(newVal)?newVal.length:"?",scope.count=angular.isArray(newVal)&&newVal.length<DEFAULT_PAGE_SIZE?newVal.length:"?"}),scope.read=function(){var params=angular.extend({},scope.requestParams,{project:$stateParams.project,method:attrs.action,filter:scope.filter});apinetService.action(params).then(function(result){scope.count=result},function(error){if(angular.isFunction(scope.handleException))scope.handleException(error);else{if(!scope.validation)throw error;scope.validation.generalErrors=[error]}})}}}}])}),define("text!core/directives/ago.tags.tpl.html",[],function(){return'<div class="tagsBox">\r\n	<span ng-repeat="t in viewModel.Tags" class="tag">\r\n		{{ t.text }}\r\n		<a ng-click="detag(t)" href="" title="{{ i18n.core.tags.removeTag }}">&nbsp;&times;</a>\r\n	</span>\r\n	<span ng-show="!editables.newTagMode" class="newTagBtn">\r\n		<button ng-click="newTag()" title="{{ i18n.core.tags.addTag }}" type="button" class="btn btn-success btn-sm">\r\n			<i class="icon-plus"></i>\r\n		</button>\r\n	</span>\r\n	<div ng-show="editables.newTagMode" class="inline-block input-group select2-bootstrap-append">\r\n		<input type="text" lookup="$$lookupUrl$$" request-params="{type: tagType}" ng-model="editables.newTagModel"\r\n		       placeholder="{{ i18n.core.tags.searchTag }}" style="width: 200px;" class="form-control"\r\n               ng-change="tag()" />\r\n        <span class="input-group-btn">\r\n            <button ng-click="cancelNewTag()" title="{{ i18n.core.buttons.cancel }}" type="button" class="btn btn-warning">&times;</button>\r\n        </span>\r\n	</div>\r\n</div>\r\n'}),requirejs.s.contexts._.nextTick=function(f){f()},require(["css"],function(css){css.addBuffer("core/directives/ago.tags.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,define("core/directives/ago.tags",["../moduleDef","jquery","angular","text!./ago.tags.tpl.html","css!./ago.tags.css"],function(module,$,angular,tpl){module.directive("agoTags",["apinetService","$timeout","$stateParams",function(apinetService,$timeout,$stateParams){return{restrict:"EA",replace:!0,scope:{viewModel:"=",tagType:"=",onNewTag:"&",onCancelNewTag:"&",onTag:"&",onDetag:"&",onError:"&"},template:function(elm,attrs){return tpl.replace("$$lookupUrl$$",attrs.lookupMethod)},controller:["$scope","$rootScope",function($scope,$rootScope){$scope.i18n=$rootScope.i18n}],link:function($scope,elm,attrs){$scope.editables={newTagMode:!1,newTagModel:null},$scope.handleError=function(error){if(!angular.isFunction($scope.onError))throw error;$scope.onError({error:error})},$scope.newTag=function(){$scope.editables.newTagMode=!0,$scope.editables.newTagModel=null,angular.isFunction($scope.onNewTag)&&$scope.onNewTag()},$scope.cancelNewTag=function(){$scope.editables.newTagMode=!1,$scope.editables.newTagModel=null,angular.isFunction($scope.onCancelNewTag)&&$scope.onCancelNewTag()},$scope.tag=function(){if($scope.editables.newTagModel&&$scope.editables.newTagModel.id){for(var i=0;i<$scope.viewModel.Tags.length;i++)if($scope.viewModel.Tags[i].id===$scope.editables.newTagModel.id)return;$scope.editables.newTagMode=!1,apinetService.action({method:attrs.tagMethod,project:$stateParams.project,modelId:$scope.viewModel.Id,tagId:$scope.editables.newTagModel.id}).then(function(result){result&&($scope.viewModel.Tags.push(angular.extend({},$scope.editables.newTagModel)),angular.isFunction($scope.onTag)&&$scope.onTag({result:result}))},$scope.handleError)}},$scope.detag=function(tag){$scope.viewModel&&$scope.viewModel.Id&&$scope.viewModel.Tags&&$scope.tag&&apinetService.action({method:attrs.detagMethod,project:$stateParams.project,modelId:$scope.viewModel.Id,tagId:tag.id}).then(function(result){if(result){for(var i=0;i<$scope.viewModel.Tags.length;i++)if($scope.viewModel.Tags[i]===tag){$scope.viewModel.Tags.splice(i,1);break}angular.isFunction($scope.onDetag)&&$scope.onDetag({result:result})}},$scope.handleError)}}}}])}),define("text!core/directives/datepicker/datepicker.tpl.html",[],function(){return'<div class="dropdown-menu datepicker" ng-class="\'datepicker-mode-\' + $mode">\r\n    <table style="table-layout: fixed; height: 100%; width: 100%;">\r\n        <thead>\r\n        <tr class="text-center">\r\n            <th>\r\n                <button tabindex="-1" type="button" class="btn btn-default pull-left" ng-click="$selectPane(-1)">\r\n                    <i class="{{$iconLeft}}"></i>\r\n                </button>\r\n            </th>\r\n            <th colspan="{{ rows[0].length - 2 }}">\r\n                <button tabindex="-1" type="button" class="btn btn-default btn-block text-strong"  ng-click="$toggleMode()">\r\n                    <strong style="text-transform: capitalize;" ng-bind="title"></strong>\r\n                </button>\r\n            </th>\r\n            <th>\r\n                <button tabindex="-1" type="button" class="btn btn-default pull-right" ng-click="$selectPane(+1)">\r\n                    <i class="{{$iconRight}}"></i>\r\n                </button>\r\n            </th>\r\n        </tr>\r\n        <tr ng-show="showLabels" ng-bind-html="labels"></tr>\r\n        </thead>\r\n        <tbody>\r\n        <tr ng-repeat="(i, row) in rows" height="{{ 100 / rows.length }}%">\r\n            <td class="text-center" ng-repeat="(j, el) in row">\r\n                <button tabindex="-1" type="button" class="btn btn-default" style="width: 100%" ng-class="{\'btn-primary\': el.selected, \'btn-info btn-today\': el.isToday && !el.selected}" ng-click="$select(el.date)" ng-disabled="el.disabled">\r\n                    <span ng-class="{\'text-muted\': el.muted}" ng-bind="el.label"></span>\r\n                </button>\r\n            </td>\r\n        </tr>\r\n        <!-- artem1 change: add today and clear buttons -->\r\n        <tr class="text-center">\r\n            <td colspan="{{ rows[0].length }}" style="padding-top: 4px;" bindonce="i18n.core.buttons">\r\n                <button tabindex="-1" type="button" class="btn btn-success text-strong" ng-click="$selectToday()">\r\n                    <strong bo-text="i18n.core.buttons.today"></strong>\r\n                </button>\r\n\r\n                <button tabindex="-1" type="button" class="btn btn-default pull-right text-strong" ng-click="$clear()">\r\n                    <strong bo-text="i18n.core.buttons.clear"></strong>\r\n                </button>\r\n            </td>\r\n        </tr>\r\n        </tbody>\r\n    </table>\r\n</div>\r\n'
}),define("core/directives/datepicker/dimensions",["../../moduleDef","angular"],function(module,angular){module.factory("dimensions",["$window",function(){var fn=(angular.element,{}),nodeName=fn.nodeName=function(element,name){return element.nodeName&&element.nodeName.toLowerCase()===name.toLowerCase()};fn.css=function(element,prop,extra){var value;return value=element.currentStyle?element.currentStyle[prop]:window.getComputedStyle?window.getComputedStyle(element)[prop]:element.style[prop],extra===!0?parseFloat(value)||0:value},fn.offset=function(element){var boxRect=element.getBoundingClientRect(),docElement=element.ownerDocument;return{width:boxRect.width||element.offsetWidth,height:boxRect.height||element.offsetHeight,top:boxRect.top+(window.pageYOffset||docElement.documentElement.scrollTop)-(docElement.documentElement.clientTop||0),left:boxRect.left+(window.pageXOffset||docElement.documentElement.scrollLeft)-(docElement.documentElement.clientLeft||0)}},fn.position=function(element){var offsetParentElement,offset,offsetParentRect={top:0,left:0};return"fixed"===fn.css(element,"position")?offset=element.getBoundingClientRect():(offsetParentElement=offsetParent(element),offset=fn.offset(element),nodeName(offsetParentElement,"html")||(offsetParentRect=fn.offset(offsetParentElement)),offsetParentRect.top+=fn.css(offsetParentElement,"borderTopWidth",!0),offsetParentRect.left+=fn.css(offsetParentElement,"borderLeftWidth",!0)),{width:element.offsetWidth,height:element.offsetHeight,top:offset.top-offsetParentRect.top-fn.css(element,"marginTop",!0),left:offset.left-offsetParentRect.left-fn.css(element,"marginLeft",!0)}};var offsetParent=function(element){var docElement=element.ownerDocument,offsetParent=element.offsetParent||docElement;if(nodeName(offsetParent,"#document"))return docElement.documentElement;for(;offsetParent&&!nodeName(offsetParent,"html")&&"static"===fn.css(offsetParent,"position");)offsetParent=offsetParent.offsetParent;return offsetParent||docElement.documentElement};return fn.height=function(element,outer){var value=element.offsetHeight;return outer?value+=fn.css(element,"marginTop",!0)+fn.css(element,"marginBottom",!0):value-=fn.css(element,"paddingTop",!0)+fn.css(element,"paddingBottom",!0)+fn.css(element,"borderTopWidth",!0)+fn.css(element,"borderBottomWidth",!0),value},fn.width=function(element,outer){var value=element.offsetWidth;return outer?value+=fn.css(element,"marginLeft",!0)+fn.css(element,"marginRight",!0):value-=fn.css(element,"paddingLeft",!0)+fn.css(element,"paddingRight",!0)+fn.css(element,"borderLeftWidth",!0)+fn.css(element,"borderRightWidth",!0),value},fn}])}),define("core/directives/datepicker/date-parser",["../../moduleDef","angular"],function(module,angular){module.provider("$dateParser",["$localeProvider",function(){function ParseDate(){this.year=1970,this.month=0,this.day=1,this.hours=0,this.minutes=0,this.seconds=0,this.milliseconds=0}function noop(){}function isNumeric(n){return!isNaN(parseFloat(n))&&isFinite(n)}function indexOfCaseInsensitive(array,value){for(var len=array.length,str=value.toString().toLowerCase(),i=0;len>i;i++)if(array[i].toLowerCase()===str)return i;return-1}ParseDate.prototype.setMilliseconds=function(value){this.milliseconds=value},ParseDate.prototype.setSeconds=function(value){this.seconds=value},ParseDate.prototype.setMinutes=function(value){this.minutes=value},ParseDate.prototype.setHours=function(value){this.hours=value},ParseDate.prototype.getHours=function(){return this.hours},ParseDate.prototype.setDate=function(value){this.day=value},ParseDate.prototype.setMonth=function(value){this.month=value},ParseDate.prototype.setFullYear=function(value){this.year=value},ParseDate.prototype.fromDate=function(value){return this.year=value.getFullYear(),this.month=value.getMonth(),this.day=value.getDate(),this.hours=value.getHours(),this.minutes=value.getMinutes(),this.seconds=value.getSeconds(),this.milliseconds=value.getMilliseconds(),this},ParseDate.prototype.toDate=function(){return new Date(this.year,this.month,this.day,this.hours,this.minutes,this.seconds,this.milliseconds)};var proto=ParseDate.prototype,defaults=this.defaults={format:"shortDate",strict:!1};this.$get=["$locale","dateFilter",function($locale,dateFilter){var DateParserFactory=function(config){function setMapForFormat(format){var i,keys=Object.keys(setFnMap),map=[],sortedMap=[],clonedFormat=format;for(i=0;i<keys.length;i++)if(format.split(keys[i]).length>1){var index=clonedFormat.search(keys[i]);format=format.split(keys[i]).join(""),setFnMap[keys[i]]&&(map[index]=setFnMap[keys[i]])}return angular.forEach(map,function(v){v&&sortedMap.push(v)}),sortedMap}function escapeReservedSymbols(text){return text.replace(/\//g,"[\\/]").replace("/-/g","[-]").replace(/\./g,"[.]").replace(/\\s/g,"[\\s]")}function regExpForFormat(format){var i,keys=Object.keys(regExpMap),re=format;for(i=0;i<keys.length;i++)re=re.split(keys[i]).join("${"+i+"}");for(i=0;i<keys.length;i++)re=re.split("${"+i+"}").join("("+regExpMap[keys[i]]+")");return format=escapeReservedSymbols(format),new RegExp("^"+re+"$",["i"])}var regex,setMap,options=angular.extend({},defaults,config),$dateParser={},regExpMap={sss:"[0-9]{3}",ss:"[0-5][0-9]",s:options.strict?"[1-5]?[0-9]":"[0-9]|[0-5][0-9]",mm:"[0-5][0-9]",m:options.strict?"[1-5]?[0-9]":"[0-9]|[0-5][0-9]",HH:"[01][0-9]|2[0-3]",H:options.strict?"1?[0-9]|2[0-3]":"[01]?[0-9]|2[0-3]",hh:"[0][1-9]|[1][012]",h:options.strict?"[1-9]|1[012]":"0?[1-9]|1[012]",a:"AM|PM",EEEE:$locale.DATETIME_FORMATS.DAY.join("|"),EEE:$locale.DATETIME_FORMATS.SHORTDAY.join("|"),dd:"0[1-9]|[12][0-9]|3[01]",d:options.strict?"[1-9]|[1-2][0-9]|3[01]":"0?[1-9]|[1-2][0-9]|3[01]",MMMM:$locale.DATETIME_FORMATS.MONTH.join("|"),MMM:$locale.DATETIME_FORMATS.SHORTMONTH.join("|"),MM:"0[1-9]|1[012]",M:options.strict?"[1-9]|1[012]":"0?[1-9]|1[012]",yyyy:"[1]{1}[0-9]{3}|[2]{1}[0-9]{3}",yy:"[0-9]{2}",y:options.strict?"-?(0|[1-9][0-9]{0,3})":"-?0*[0-9]{1,4}"},setFnMap={sss:proto.setMilliseconds,ss:proto.setSeconds,s:proto.setSeconds,mm:proto.setMinutes,m:proto.setMinutes,HH:proto.setHours,H:proto.setHours,hh:proto.setHours,h:proto.setHours,EEEE:noop,EEE:noop,dd:proto.setDate,d:proto.setDate,a:function(value){var hours=this.getHours()%12;return this.setHours(value.match(/pm/i)?hours+12:hours)},MMMM:function(value){return this.setMonth(indexOfCaseInsensitive($locale.DATETIME_FORMATS.MONTH,value))},MMM:function(value){return this.setMonth(indexOfCaseInsensitive($locale.DATETIME_FORMATS.SHORTMONTH,value))},MM:function(value){return this.setMonth(1*value-1)},M:function(value){return this.setMonth(1*value-1)},yyyy:proto.setFullYear,yy:function(value){return this.setFullYear(2e3+1*value)},y:proto.setFullYear};return $dateParser.init=function(){$dateParser.$format=$locale.DATETIME_FORMATS[options.format]||options.format,regex=regExpForFormat($dateParser.$format),setMap=setMapForFormat($dateParser.$format)},$dateParser.isValid=function(date){return angular.isDate(date)?!isNaN(date.getTime()):regex.test(date)},$dateParser.parse=function(value,baseDate,format){format&&(format=$locale.DATETIME_FORMATS[format]||format),angular.isDate(value)&&(value=dateFilter(value,format||$dateParser.$format));var formatRegex=format?regExpForFormat(format):regex,formatSetMap=format?setMapForFormat(format):setMap,matches=formatRegex.exec(value);if(!matches)return!1;for(var date=(new ParseDate).fromDate(baseDate&&!isNaN(baseDate.getTime())?baseDate:new Date(1970,0,1,0)),i=0;i<matches.length-1;i++)formatSetMap[i]&&formatSetMap[i].call(date,matches[i+1]);return date.toDate()},$dateParser.getDateForAttribute=function(key,value){var date;if("today"===value){var today=new Date;date=new Date(today.getFullYear(),today.getMonth(),today.getDate()+("maxDate"===key?1:0),0,0,0,"minDate"===key?0:-1)}else date=angular.isString(value)&&value.match(/^".+"$/)?new Date(value.substr(1,value.length-2)):isNumeric(value)?new Date(parseInt(value,10)):angular.isString(value)&&0===value.length?"minDate"===key?-1/0:+1/0:new Date(value);return date},$dateParser.getTimeForAttribute=function(key,value){var time;return time="now"===value?(new Date).setFullYear(1970,0,1):angular.isString(value)&&value.match(/^".+"$/)?new Date(value.substr(1,value.length-2)).setFullYear(1970,0,1):isNumeric(value)?new Date(parseInt(value,10)).setFullYear(1970,0,1):angular.isString(value)&&0===value.length?"minTime"===key?-1/0:+1/0:$dateParser.parse(value,new Date(1970,0,1,0))},$dateParser.daylightSavingAdjust=function(date){return date?(date.setHours(date.getHours()>12?date.getHours()+2:0),date):null},$dateParser.init(),$dateParser};return DateParserFactory}]}])}),define("text!core/directives/datepicker/tooltip.tpl.html",[],function(){return'<div class="tooltip in" ng-show="title">\r\n	<div class="tooltip-arrow"></div>\r\n	<div class="tooltip-inner" ng-bind="title"></div>\r\n</div>\r\n'}),define("core/directives/datepicker/raf",["../../moduleDef","angular"],function(module,angular){angular.version.minor<3&&angular.version.dot<14&&angular.module("ng").factory("$$rAF",["$window","$timeout",function($window,$timeout){var requestAnimationFrame=$window.requestAnimationFrame||$window.webkitRequestAnimationFrame||$window.mozRequestAnimationFrame,cancelAnimationFrame=$window.cancelAnimationFrame||$window.webkitCancelAnimationFrame||$window.mozCancelAnimationFrame||$window.webkitCancelRequestAnimationFrame,rafSupported=!!requestAnimationFrame,raf=rafSupported?function(fn){var id=requestAnimationFrame(fn);return function(){cancelAnimationFrame(id)}}:function(fn){var timer=$timeout(fn,16.66,!1);return function(){$timeout.cancel(timer)}};return raf.supported=rafSupported,raf}])}),define("core/directives/datepicker/tooltip",["../../moduleDef","angular","text!./tooltip.tpl.html","./dimensions","./raf"],function(module,angular,tpl){module.provider("$tooltip",function(){var defaults=this.defaults={animation:"am-fade",customClass:"",prefixClass:"tooltip",prefixEvent:"tooltip",container:!1,target:!1,placement:"top",template:tpl,contentTemplate:!1,trigger:"hover focus",keyboard:!1,html:!1,show:!1,title:"",type:"",delay:0,autoClose:!1,bsEnabled:!0};this.$get=["$window","$rootScope","$compile","$q","$templateCache","$http","$animate","$sce","dimensions","$$rAF","$timeout",function($window,$rootScope,$compile,$q,$templateCache,$http,$animate,$sce,dimensions,$$rAF,$timeout){function TooltipFactory(element,config){function enterAnimateCallback(){scope.$emit(options.prefixEvent+".show",$tooltip)}function leaveAnimateCallback(){return scope.$emit(options.prefixEvent+".hide",$tooltip),_blur&&"focus"===options.trigger?element[0].blur():void destroyTipElement()}function bindTriggerEvents(){var triggers=options.trigger.split(" ");angular.forEach(triggers,function(trigger){"click"===trigger?element.on("click",$tooltip.toggle):"manual"!==trigger&&(element.on("hover"===trigger?"mouseenter":"focus",$tooltip.enter),element.on("hover"===trigger?"mouseleave":"blur",$tooltip.leave),"button"===nodeName&&"hover"!==trigger&&element.on(isTouch?"touchstart":"mousedown",$tooltip.$onFocusElementMouseDown))})}function unbindTriggerEvents(){for(var triggers=options.trigger.split(" "),i=triggers.length;i--;){var trigger=triggers[i];"click"===trigger?element.off("click",$tooltip.toggle):"manual"!==trigger&&(element.off("hover"===trigger?"mouseenter":"focus",$tooltip.enter),element.off("hover"===trigger?"mouseleave":"blur",$tooltip.leave),"button"===nodeName&&"hover"!==trigger&&element.off(isTouch?"touchstart":"mousedown",$tooltip.$onFocusElementMouseDown))}}function bindKeyboardEvents(){"focus"!==options.trigger?tipElement.on("keyup",$tooltip.$onKeyUp):element.on("keyup",$tooltip.$onFocusKeyUp)}function unbindKeyboardEvents(){"focus"!==options.trigger?tipElement.off("keyup",$tooltip.$onKeyUp):element.off("keyup",$tooltip.$onFocusKeyUp)}function bindAutoCloseEvents(){$timeout(function(){tipElement.on("click",stopEventPropagation),$body.on("click",$tooltip.hide),_autoCloseEventsBinded=!0},0,!1)}function unbindAutoCloseEvents(){_autoCloseEventsBinded&&(tipElement.off("click",stopEventPropagation),$body.off("click",$tooltip.hide),_autoCloseEventsBinded=!1)}function stopEventPropagation(event){event.stopPropagation()}function getPosition(){return"body"===options.container?dimensions.offset(options.target[0]||element[0]):dimensions.position(options.target[0]||element[0])}function getCalculatedOffset(placement,position,actualWidth,actualHeight){var offset,split=placement.split("-");switch(split[0]){case"right":offset={top:position.top+position.height/2-actualHeight/2,left:position.left+position.width};break;case"bottom":offset={top:position.top+position.height,left:position.left+position.width/2-actualWidth/2};break;case"left":offset={top:position.top+position.height/2-actualHeight/2,left:position.left-actualWidth};break;default:offset={top:position.top-actualHeight,left:position.left+position.width/2-actualWidth/2}}if(!split[1])return offset;if("top"===split[0]||"bottom"===split[0])switch(split[1]){case"left":offset.left=position.left;break;case"right":offset.left=position.left+position.width-actualWidth}else if("left"===split[0]||"right"===split[0])switch(split[1]){case"top":offset.top=position.top-actualHeight;break;case"bottom":offset.top=position.top+position.height}return offset}function destroyTipElement(){clearTimeout(timeout),$tooltip.$isShown&&null!==tipElement&&(options.autoClose&&unbindAutoCloseEvents(),options.keyboard&&unbindKeyboardEvents()),tipScope&&(tipScope.$destroy(),tipScope=null),tipElement&&(tipElement.remove(),tipElement=$tooltip.$element=null)}var $tooltip={},nodeName=element[0].nodeName.toLowerCase(),options=$tooltip.$options=angular.extend({},defaults,config);$tooltip.$promise=fetchTemplate(options.template);var scope=$tooltip.$scope=options.scope&&options.scope.$new()||$rootScope.$new();if(options.delay&&angular.isString(options.delay)){var split=options.delay.split(",").map(parseFloat);options.delay=split.length>1?{show:split[0],hide:split[1]}:split[0]}options.title&&(scope.title=$sce.trustAsHtml(options.title)),scope.$setEnabled=function(isEnabled){scope.$$postDigest(function(){$tooltip.setEnabled(isEnabled)})},scope.$hide=function(){scope.$$postDigest(function(){$tooltip.hide()})},scope.$show=function(){scope.$$postDigest(function(){$tooltip.show()})},scope.$toggle=function(){scope.$$postDigest(function(){$tooltip.toggle()})},$tooltip.$isShown=scope.$isShown=!1;var timeout,hoverState;options.contentTemplate&&($tooltip.$promise=$tooltip.$promise.then(function(template){var templateEl=angular.element(template);return fetchTemplate(options.contentTemplate).then(function(contentTemplate){var contentEl=findElement('[ng-bind="content"]',templateEl[0]);return contentEl.length||(contentEl=findElement('[ng-bind="title"]',templateEl[0])),contentEl.removeAttr("ng-bind").html(contentTemplate),templateEl[0].outerHTML})}));var tipLinker,tipElement,tipTemplate,tipContainer,tipScope;$tooltip.$promise.then(function(template){angular.isObject(template)&&(template=template.data),options.html&&(template=template.replace(htmlReplaceRegExp,'ng-bind-html="')),template=trim.apply(template),tipTemplate=template,tipLinker=$compile(template),$tooltip.init()}),$tooltip.init=function(){options.delay&&angular.isNumber(options.delay)&&(options.delay={show:options.delay,hide:options.delay}),"self"===options.container?tipContainer=element:angular.isElement(options.container)?tipContainer=options.container:options.container&&(tipContainer=findElement(options.container)),bindTriggerEvents(),options.target&&(options.target=angular.isElement(options.target)?options.target:findElement(options.target)),options.show&&scope.$$postDigest(function(){"focus"===options.trigger?element[0].focus():$tooltip.show()})},$tooltip.destroy=function(){unbindTriggerEvents(),destroyTipElement(),scope.$destroy()},$tooltip.enter=function(){return clearTimeout(timeout),hoverState="in",options.delay&&options.delay.show?void(timeout=setTimeout(function(){"in"===hoverState&&$tooltip.show()},options.delay.show)):$tooltip.show()},$tooltip.show=function(){if(options.bsEnabled){scope.$emit(options.prefixEvent+".show.before",$tooltip);var parent,after;options.container?(parent=tipContainer,after=tipContainer[0].lastChild?angular.element(tipContainer[0].lastChild):null):(parent=null,after=element),tipElement&&destroyTipElement(),tipScope=$tooltip.$scope.$new(),tipElement=$tooltip.$element=tipLinker(tipScope,function(){}),tipElement.css({top:"-9999px",left:"-9999px",display:"block",visibility:"hidden"}).addClass(options.placement),options.animation&&tipElement.addClass(options.animation),options.type&&tipElement.addClass(options.prefixClass+"-"+options.type),options.customClass&&tipElement.addClass(options.customClass);var promise=$animate.enter(tipElement,parent,after,enterAnimateCallback);promise&&promise.then&&promise.then(enterAnimateCallback),$tooltip.$isShown=scope.$isShown=!0,safeDigest(scope),$$rAF(function(){$tooltip.$applyPlacement(),tipElement&&tipElement.css({visibility:"visible"})}),options.keyboard&&("focus"!==options.trigger&&$tooltip.focus(),bindKeyboardEvents()),options.autoClose&&bindAutoCloseEvents()}},$tooltip.leave=function(){return clearTimeout(timeout),hoverState="out",options.delay&&options.delay.hide?void(timeout=setTimeout(function(){"out"===hoverState&&$tooltip.hide()},options.delay.hide)):$tooltip.hide()};var _blur;$tooltip.hide=function(blur){if($tooltip.$isShown){scope.$emit(options.prefixEvent+".hide.before",$tooltip),_blur=blur;var promise=$animate.leave(tipElement,leaveAnimateCallback);promise&&promise.then&&promise.then(leaveAnimateCallback),$tooltip.$isShown=scope.$isShown=!1,safeDigest(scope),options.keyboard&&null!==tipElement&&unbindKeyboardEvents(),options.autoClose&&null!==tipElement&&unbindAutoCloseEvents()}},$tooltip.toggle=function(){$tooltip.$isShown?$tooltip.leave():$tooltip.enter()},$tooltip.focus=function(){tipElement[0].focus()},$tooltip.setEnabled=function(isEnabled){options.bsEnabled=isEnabled},$tooltip.$applyPlacement=function(){if(tipElement){var elementPosition=getPosition(),tipWidth=tipElement.prop("offsetWidth"),tipHeight=tipElement.prop("offsetHeight"),tipPosition=getCalculatedOffset(options.placement,elementPosition,tipWidth,tipHeight);tipPosition.top+="px",tipPosition.left+="px",tipElement.css(tipPosition)}},$tooltip.$onKeyUp=function(evt){27===evt.which&&$tooltip.$isShown&&($tooltip.hide(),evt.stopPropagation())},$tooltip.$onFocusKeyUp=function(evt){27===evt.which&&(element[0].blur(),evt.stopPropagation())},$tooltip.$onFocusElementMouseDown=function(evt){evt.preventDefault(),evt.stopPropagation(),$tooltip.$isShown?element[0].blur():element[0].focus()};var _autoCloseEventsBinded=!1;return $tooltip}function safeDigest(scope){scope.$$phase||scope.$root&&scope.$root.$$phase||scope.$digest()}function findElement(query,element){return angular.element((element||$window.document).querySelectorAll(query))}function fetchTemplate(template){return $q.when(template)}var trim=String.prototype.trim,isTouch="createTouch"in $window.document,htmlReplaceRegExp=/ng-bind="/gi,$body=angular.element($window.document);return TooltipFactory}]}),module.directive("bsTooltip",function($window,$location,$sce,$tooltip,$$rAF){return{restrict:"EAC",scope:!0,link:function(scope,element,attr){var options={scope:scope};angular.forEach(["template","contentTemplate","placement","container","target","delay","trigger","keyboard","html","animation","type","customClass"],function(key){angular.isDefined(attr[key])&&(options[key]=attr[key])}),scope.hasOwnProperty("title")||(scope.title=""),attr.$observe("title",function(newValue){if(angular.isDefined(newValue)||!scope.hasOwnProperty("title")){var oldValue=scope.title;scope.title=$sce.trustAsHtml(newValue),angular.isDefined(oldValue)&&$$rAF(function(){tooltip&&tooltip.$applyPlacement()})}}),attr.bsTooltip&&scope.$watch(attr.bsTooltip,function(newValue,oldValue){angular.isObject(newValue)?angular.extend(scope,newValue):scope.title=newValue,angular.isDefined(oldValue)&&$$rAF(function(){tooltip&&tooltip.$applyPlacement()})},!0),attr.bsShow&&scope.$watch(attr.bsShow,function(newValue){tooltip&&angular.isDefined(newValue)&&(angular.isString(newValue)&&(newValue=!!newValue.match(/true|,?(tooltip),?/i)),newValue===!0?tooltip.show():tooltip.hide())}),attr.bsEnabled&&scope.$watch(attr.bsEnabled,function(newValue){tooltip&&angular.isDefined(newValue)&&(angular.isString(newValue)&&(newValue=!!newValue.match(/true|1|,?(tooltip),?/i)),tooltip.setEnabled(newValue===!1?!1:!0))});var tooltip=$tooltip(element,options);scope.$on("$destroy",function(){tooltip&&tooltip.destroy(),options=null,tooltip=null})}}})}),requirejs.s.contexts._.nextTick=function(f){f()},require(["css"],function(css){css.addBuffer("core/directives/datepicker/datepicker.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,define("core/directives/datepicker/datepicker",["../../moduleDef","angular","text!./datepicker.tpl.html","./dimensions","./date-parser","./tooltip","css!./datepicker.css"],function(module,angular,tpl){module.provider("$datepicker",function(){var defaults=this.defaults={animation:"am-fade",prefixClass:"datepicker",placement:"bottom-left",template:tpl,trigger:"focus",container:!1,keyboard:!0,html:!1,delay:0,useNative:!1,dateType:"date",dateFormat:"shortDate",modelDateFormat:null,dayFormat:"dd",monthFormat:"MMM",yearFormat:"yyyy",monthTitleFormat:"MMMM yyyy",yearTitleFormat:"yyyy",strictFormat:!1,autoclose:!1,minDate:-1/0,maxDate:+1/0,startView:0,minView:0,startWeek:0,daysOfWeekDisabled:"",iconLeft:"glyphicon glyphicon-chevron-left",iconRight:"glyphicon glyphicon-chevron-right"};this.$get=["$window","$rootScope","$sce","$dateFormatter","datepickerViews","$tooltip","$timeout",function($window,$rootScope,$sce,$dateFormatter,datepickerViews,$tooltip,$timeout){function DatepickerFactory(element,controller,config){function updateSelected(el){el.selected=$datepicker.$isSelected(el.date)}function focusElement(){element[0].focus()}var $datepicker=$tooltip(element,angular.extend({},defaults,config)),parentScope=config.scope,options=$datepicker.$options,scope=$datepicker.$scope;options.startView&&(options.startView-=options.minView);var pickerViews=datepickerViews($datepicker);$datepicker.$views=pickerViews.views;var viewDate=pickerViews.viewDate;scope.$mode=options.startView,scope.$iconLeft=options.iconLeft,scope.$iconRight=options.iconRight;var $picker=$datepicker.$views[scope.$mode];scope.$select=function(date){$datepicker.select(date)},scope.$selectPane=function(value){$datepicker.$selectPane(value)},scope.$toggleMode=function(){$datepicker.setMode((scope.$mode+1)%$datepicker.$views.length)},scope.$selectToday=function(){$datepicker.select(new Date,!1)},scope.$clear=function(){$datepicker.select(null)},$datepicker.update=function(date){angular.isDate(date)&&!isNaN(date.getTime())&&($datepicker.$date=date,$picker.update.call($picker,date)),$datepicker.$build(!0)},$datepicker.updateDisabledDates=function(dateRanges){options.disabledDateRanges=dateRanges;for(var i=0,l=scope.rows.length;l>i;i++)angular.forEach(scope.rows[i],$datepicker.$setDisabledEl)},$datepicker.select=function(date,keep){date&&!angular.isDate(controller.$dateValue)&&(controller.$dateValue=new Date(date)),date?controller.$dateValue.setFullYear(date.getFullYear(),date.getMonth(),date.getDate()):controller.$dateValue=null,!scope.$mode||keep?(controller.$setViewValue(angular.copy(date)),controller.$render(),options.autoclose&&!keep&&$timeout(function(){$datepicker.hide(!0)})):(date?angular.extend(viewDate,{year:date.getFullYear(),month:date.getMonth(),date:date.getDate()}):viewDate=null,$datepicker.setMode(scope.$mode-1),$datepicker.$build())},$datepicker.setMode=function(mode){scope.$mode=mode,$picker=$datepicker.$views[scope.$mode],$datepicker.$build()},$datepicker.$build=function(pristine){pristine===!0&&$picker.built||(pristine!==!1||$picker.built)&&$picker.build.call($picker)},$datepicker.$updateSelected=function(){for(var i=0,l=scope.rows.length;l>i;i++)angular.forEach(scope.rows[i],updateSelected)},$datepicker.$isSelected=function(date){return $picker.isSelected(date)},$datepicker.$setDisabledEl=function(el){el.disabled=$picker.isDisabled(el.date)},$datepicker.$selectPane=function(value){var steps=$picker.steps,targetDate=new Date(Date.UTC(viewDate.year+(steps.year||0)*value,viewDate.month+(steps.month||0)*value,1));angular.extend(viewDate,{year:targetDate.getUTCFullYear(),month:targetDate.getUTCMonth(),date:targetDate.getUTCDate()}),$datepicker.$build()},$datepicker.$onMouseDown=function(evt){if(evt.preventDefault(),evt.stopPropagation(),isTouch){var targetEl=angular.element(evt.target);"button"!==targetEl[0].nodeName.toLowerCase()&&(targetEl=targetEl.parent()),targetEl.triggerHandler("click")}},$datepicker.$onKeyDown=function(evt){if(/(38|37|39|40|13)/.test(evt.keyCode)&&!evt.shiftKey&&!evt.altKey){if(evt.preventDefault(),evt.stopPropagation(),13===evt.keyCode)return scope.$mode?scope.$apply(function(){$datepicker.setMode(scope.$mode-1)}):$datepicker.hide(!0);$picker.onKeyDown(evt),parentScope.$digest()}};var _init=$datepicker.init;$datepicker.init=function(){return isNative&&options.useNative?(element.prop("type","date"),void element.css("-webkit-appearance","textfield")):(isTouch&&(element.prop("type","text"),element.attr("readonly","true"),element.on("click",focusElement)),void _init())};var _destroy=$datepicker.destroy;$datepicker.destroy=function(){isNative&&options.useNative&&element.off("click",focusElement),_destroy()};var _show=$datepicker.show;$datepicker.show=function(){_show(),$timeout(function(){$datepicker.$element.on(isTouch?"touchstart":"mousedown",$datepicker.$onMouseDown),options.keyboard&&element.on("keydown",$datepicker.$onKeyDown)},0,!1)};var _hide=$datepicker.hide;return $datepicker.hide=function(blur){$datepicker.$isShown&&($datepicker.$element.off(isTouch?"touchstart":"mousedown",$datepicker.$onMouseDown),options.keyboard&&element.off("keydown",$datepicker.$onKeyDown),_hide(blur))},$datepicker}var isNative=(angular.element($window.document.body),/(ip(a|o)d|iphone|android)/gi.test($window.navigator.userAgent)),isTouch="createTouch"in $window.document&&isNative;return defaults.lang||(defaults.lang=$dateFormatter.getDefaultLocale()),DatepickerFactory.defaults=defaults,DatepickerFactory}]}),module.directive("bsDatepicker",["$window","$parse","$q","$dateFormatter","$dateParser","$datepicker",function($window,$parse,$q,$dateFormatter,$dateParser,$datepicker){var isNative=($datepicker.defaults,/(ip(a|o)d|iphone|android)/gi.test($window.navigator.userAgent));return{restrict:"EAC",require:"ngModel",link:function(scope,element,attr,controller){function normalizeDateRanges(ranges){return ranges&&ranges.length?ranges:null}function validateAgainstMinMaxDate(parsedDate){if(angular.isDate(parsedDate)){var isMinValid=isNaN(datepicker.$options.minDate)||parsedDate.getTime()>=datepicker.$options.minDate,isMaxValid=isNaN(datepicker.$options.maxDate)||parsedDate.getTime()<=datepicker.$options.maxDate,isValid=isMinValid&&isMaxValid;controller.$setValidity("date",isValid),controller.$setValidity("min",isMinValid),controller.$setValidity("max",isMaxValid),isValid&&(controller.$dateValue=parsedDate)}}function getDateFormattedString(){return!controller.$dateValue||isNaN(controller.$dateValue.getTime())?"":formatDate(controller.$dateValue,options.dateFormat)}var options={scope:scope,controller:controller};angular.forEach(["placement","container","delay","trigger","keyboard","html","animation","template","autoclose","dateType","dateFormat","modelDateFormat","dayFormat","strictFormat","startWeek","startDate","useNative","lang","startView","minView","iconLeft","iconRight","daysOfWeekDisabled"],function(key){angular.isDefined(attr[key])&&(options[key]=attr[key])}),attr.bsShow&&scope.$watch(attr.bsShow,function(newValue){datepicker&&angular.isDefined(newValue)&&(angular.isString(newValue)&&(newValue=!!newValue.match(/true|,?(datepicker),?/i)),newValue===!0?datepicker.show():datepicker.hide())});var datepicker=$datepicker(element,controller,options);options=datepicker.$options,isNative&&options.useNative&&(options.dateFormat="yyyy-MM-dd");var lang=options.lang,formatDate=function(date,format){return $dateFormatter.formatDate(date,format,lang)},dateParser=$dateParser({format:options.dateFormat,lang:lang,strict:options.strictFormat});angular.forEach(["minDate","maxDate"],function(key){angular.isDefined(attr[key])&&attr.$observe(key,function(newValue){datepicker.$options[key]=dateParser.getDateForAttribute(key,newValue),!isNaN(datepicker.$options[key])&&datepicker.$build(!1),validateAgainstMinMaxDate(controller.$dateValue)})}),scope.$watch(attr.ngModel,function(){datepicker.update(controller.$dateValue)},!0),angular.isDefined(attr.disabledDates)&&scope.$watch(attr.disabledDates,function(disabledRanges,previousValue){disabledRanges=normalizeDateRanges(disabledRanges),previousValue=normalizeDateRanges(previousValue),disabledRanges&&datepicker.updateDisabledDates(disabledRanges)}),controller.$parsers.unshift(function(viewValue){if(!viewValue)return controller.$setValidity("date",!0),null;var parsedDate=dateParser.parse(viewValue,controller.$dateValue);return!parsedDate||isNaN(parsedDate.getTime())?void controller.$setValidity("date",!1):(validateAgainstMinMaxDate(parsedDate),"string"===options.dateType?formatDate(parsedDate,options.modelDateFormat||options.dateFormat):"number"===options.dateType?controller.$dateValue.getTime():"iso"===options.dateType?controller.$dateValue.toISOString():new Date(controller.$dateValue))}),controller.$formatters.push(function(modelValue){var date;return date=angular.isUndefined(modelValue)||null===modelValue?0/0:angular.isDate(modelValue)?modelValue:"string"===options.dateType?dateParser.parse(modelValue,null,options.modelDateFormat):new Date(modelValue),controller.$dateValue=date,getDateFormattedString()}),controller.$render=function(){element.val(getDateFormattedString())},scope.$on("$destroy",function(){datepicker&&datepicker.destroy(),options=null,datepicker=null})}}}]),module.provider("datepickerViews",function(){function split(arr,size){for(var arrays=[];arr.length>0;)arrays.push(arr.splice(0,size));return arrays}function mod(n,m){return(n%m+m)%m}this.defaults={dayFormat:"dd",daySplit:7};this.$get=["$dateFormatter","$dateParser","$sce","i18n","$locale",function($dateFormatter,$dateParser,$sce,i18n,$locale){return function(picker){var scope=picker.$scope,options=picker.$options,lang=i18n.locale||options.lang,formatDate=function(date,format){return $dateFormatter.formatDate(date,format,lang)},dateParser=$dateParser({format:options.dateFormat,lang:lang,strict:options.strictFormat}),startWeek=$locale.DATETIME_FORMATS.ago_startWeek||options.startWeek,weekDaysMin=$dateFormatter.weekdaysShort(lang),weekDaysLabels=weekDaysMin.slice(startWeek).concat(weekDaysMin.slice(0,startWeek)),weekDaysLabelsHtml=$sce.trustAsHtml('<th class="dow text-center">'+weekDaysLabels.join('</th><th class="dow text-center">')+"</th>"),startDate=picker.$date||(options.startDate?dateParser.getDateForAttribute("startDate",options.startDate):new Date),viewDate={year:startDate.getFullYear(),month:startDate.getMonth(),date:startDate.getDate()},views=(6e4*startDate.getTimezoneOffset(),[{format:options.dayFormat,split:7,steps:{month:1},update:function(date,force){!this.built||force||date.getFullYear()!==viewDate.year||date.getMonth()!==viewDate.month?(angular.extend(viewDate,{year:picker.$date.getFullYear(),month:picker.$date.getMonth(),date:picker.$date.getDate()}),picker.$build()):date.getDate()!==viewDate.date&&(viewDate.date=picker.$date.getDate(),picker.$updateSelected())},build:function(){var firstDayOfMonth=new Date(viewDate.year,viewDate.month,1),firstDayOfMonthOffset=firstDayOfMonth.getTimezoneOffset(),firstDate=new Date(+firstDayOfMonth-864e5*mod(firstDayOfMonth.getDay()-startWeek,7)),firstDateOffset=firstDate.getTimezoneOffset(),today=(new Date).toDateString();firstDateOffset!==firstDayOfMonthOffset&&(firstDate=new Date(+firstDate+6e4*(firstDateOffset-firstDayOfMonthOffset)));
for(var day,days=[],i=0;42>i;i++)day=dateParser.daylightSavingAdjust(new Date(firstDate.getFullYear(),firstDate.getMonth(),firstDate.getDate()+i)),days.push({date:day,isToday:day.toDateString()===today,label:formatDate(day,this.format),selected:picker.$date&&this.isSelected(day),muted:day.getMonth()!==viewDate.month,disabled:this.isDisabled(day)});scope.title=formatDate(firstDayOfMonth,options.monthTitleFormat),scope.showLabels=!0,scope.labels=weekDaysLabelsHtml,scope.rows=split(days,this.split),this.built=!0},isSelected:function(date){return picker.$date&&date.getFullYear()===picker.$date.getFullYear()&&date.getMonth()===picker.$date.getMonth()&&date.getDate()===picker.$date.getDate()},isDisabled:function(date){var time=date.getTime();if(time<options.minDate||time>options.maxDate)return!0;if(-1!==options.daysOfWeekDisabled.indexOf(date.getDay()))return!0;if(options.disabledDateRanges)for(var i=0;i<options.disabledDateRanges.length;i++)if(time>=options.disabledDateRanges[i].start&&time<=options.disabledDateRanges[i].end)return!0;return!1},onKeyDown:function(evt){if(picker.$date){var newDate,actualTime=picker.$date.getTime();37===evt.keyCode?newDate=new Date(actualTime-864e5):38===evt.keyCode?newDate=new Date(actualTime-6048e5):39===evt.keyCode?newDate=new Date(actualTime+864e5):40===evt.keyCode&&(newDate=new Date(actualTime+6048e5)),this.isDisabled(newDate)||picker.select(newDate,!0)}}},{name:"month",format:options.monthFormat,split:4,steps:{year:1},update:function(date){this.built&&date.getFullYear()===viewDate.year?date.getMonth()!==viewDate.month&&(angular.extend(viewDate,{month:picker.$date.getMonth(),date:picker.$date.getDate()}),picker.$updateSelected()):(angular.extend(viewDate,{year:picker.$date.getFullYear(),month:picker.$date.getMonth(),date:picker.$date.getDate()}),picker.$build())},build:function(){for(var month,months=(new Date(viewDate.year,0,1),[]),i=0;12>i;i++)month=new Date(viewDate.year,i,1),months.push({date:month,label:formatDate(month,this.format),selected:picker.$isSelected(month),disabled:this.isDisabled(month)});scope.title=formatDate(month,options.yearTitleFormat),scope.showLabels=!1,scope.rows=split(months,this.split),this.built=!0},isSelected:function(date){return picker.$date&&date.getFullYear()===picker.$date.getFullYear()&&date.getMonth()===picker.$date.getMonth()},isDisabled:function(date){var lastDate=+new Date(date.getFullYear(),date.getMonth()+1,0);return lastDate<options.minDate||date.getTime()>options.maxDate},onKeyDown:function(evt){if(picker.$date){var actualMonth=picker.$date.getMonth(),newDate=new Date(picker.$date);37===evt.keyCode?newDate.setMonth(actualMonth-1):38===evt.keyCode?newDate.setMonth(actualMonth-4):39===evt.keyCode?newDate.setMonth(actualMonth+1):40===evt.keyCode&&newDate.setMonth(actualMonth+4),this.isDisabled(newDate)||picker.select(newDate,!0)}}},{name:"year",format:options.yearFormat,split:4,steps:{year:12},update:function(date,force){!this.built||force||parseInt(date.getFullYear()/20,10)!==parseInt(viewDate.year/20,10)?(angular.extend(viewDate,{year:picker.$date.getFullYear(),month:picker.$date.getMonth(),date:picker.$date.getDate()}),picker.$build()):date.getFullYear()!==viewDate.year&&(angular.extend(viewDate,{year:picker.$date.getFullYear(),month:picker.$date.getMonth(),date:picker.$date.getDate()}),picker.$updateSelected())},build:function(){for(var year,firstYear=viewDate.year-viewDate.year%(3*this.split),years=[],i=0;12>i;i++)year=new Date(firstYear+i,0,1),years.push({date:year,label:formatDate(year,this.format),selected:picker.$isSelected(year),disabled:this.isDisabled(year)});scope.title=years[0].label+"-"+years[years.length-1].label,scope.showLabels=!1,scope.rows=split(years,this.split),this.built=!0},isSelected:function(date){return picker.$date&&date.getFullYear()===picker.$date.getFullYear()},isDisabled:function(date){var lastDate=+new Date(date.getFullYear()+1,0,0);return lastDate<options.minDate||date.getTime()>options.maxDate},onKeyDown:function(evt){if(picker.$date){var actualYear=picker.$date.getFullYear(),newDate=new Date(picker.$date);37===evt.keyCode?newDate.setYear(actualYear-1):38===evt.keyCode?newDate.setYear(actualYear-4):39===evt.keyCode?newDate.setYear(actualYear+1):40===evt.keyCode&&newDate.setYear(actualYear+4),this.isDisabled(newDate)||picker.select(newDate,!0)}}}]);return{views:options.minView?Array.prototype.slice.call(views,options.minView):views,viewDate:viewDate}}}]})}),define("text!core/directives/datepicker/timepicker.tpl.html",[],function(){return'<div class="dropdown-menu timepicker" style="min-width: 0px;width: auto;">\r\n    <table height="100%">\r\n        <thead>\r\n        <tr class="text-center">\r\n            <th>\r\n                <button tabindex="-1" type="button" class="btn btn-default pull-left" ng-click="$arrowAction(-1, 0)">\r\n                    <i class="{{ $iconUp }}"></i>\r\n                </button>\r\n            </th>\r\n            <th>\r\n                &nbsp;\r\n            </th>\r\n            <th>\r\n                <button tabindex="-1" type="button" class="btn btn-default pull-left" ng-click="$arrowAction(-1, 1)">\r\n                    <i class="{{ $iconUp }}"></i>\r\n                </button>\r\n            </th>\r\n        </tr>\r\n        </thead>\r\n        <tbody>\r\n        <tr ng-repeat="(i, row) in rows">\r\n            <td class="text-center">\r\n                <button tabindex="-1" style="width: 100%" type="button" class="btn btn-default" ng-class="{\'btn-primary\': row[0].selected}" ng-click="$select(row[0].date, 0)" ng-disabled="row[0].disabled">\r\n                    <span ng-class="{\'text-muted\': row[0].muted}" ng-bind="row[0].label"></span>\r\n                </button>\r\n            </td>\r\n            <td>\r\n                <span ng-bind="i == midIndex ? timeSeparator : \' \'"></span>\r\n            </td>\r\n            <td class="text-center">\r\n                <button tabindex="-1" ng-if="row[1].date" style="width: 100%" type="button" class="btn btn-default" ng-class="{\'btn-primary\': row[1].selected}" ng-click="$select(row[1].date, 1)" ng-disabled="row[1].disabled">\r\n                    <span ng-class="{\'text-muted\': row[1].muted}" ng-bind="row[1].label"></span>\r\n                </button>\r\n            </td>\r\n            <td ng-if="showAM">\r\n                &nbsp;\r\n            </td>\r\n            <td ng-if="showAM">\r\n                <button tabindex="-1" ng-show="i == midIndex - !isAM * 1" style="width: 100%" type="button" ng-class="{\'btn-primary\': !!isAM}" class="btn btn-default" ng-click="$switchMeridian()" ng-disabled="el.disabled">AM</button>\r\n                <button tabindex="-1" ng-show="i == midIndex + 1 - !isAM * 1" style="width: 100%" type="button" ng-class="{\'btn-primary\': !isAM}" class="btn btn-default" ng-click="$switchMeridian()" ng-disabled="el.disabled">PM</button>\r\n            </td>\r\n        </tr>\r\n        </tbody>\r\n        <tfoot>\r\n        <tr class="text-center">\r\n            <th>\r\n                <button tabindex="-1" type="button" class="btn btn-default pull-left" ng-click="$arrowAction(1, 0)">\r\n                    <i class="{{ $iconDown }}"></i>\r\n                </button>\r\n            </th>\r\n            <th>\r\n                &nbsp;\r\n            </th>\r\n            <th>\r\n                <button tabindex="-1" type="button" class="btn btn-default pull-left" ng-click="$arrowAction(1, 1)">\r\n                    <i class="{{ $iconDown }}"></i>\r\n                </button>\r\n            </th>\r\n        </tr>\r\n        </tfoot>\r\n    </table>\r\n</div>\r\n'}),define("core/directives/datepicker/date-formatter",["../../moduleDef","angular"],function(module){module.service("$dateFormatter",["$locale","dateFilter",function($locale,dateFilter){function splitTimeFormat(format){return/(h+)([:\.])?(m+)[ ]?(a?)/i.exec(format).slice(1)}this.getDefaultLocale=function(){return $locale.id},this.getDatetimeFormat=function(format){return $locale.DATETIME_FORMATS[format]||format},this.weekdaysShort=function(){return $locale.DATETIME_FORMATS.SHORTDAY},this.hoursFormat=function(timeFormat){return splitTimeFormat(timeFormat)[0]},this.minutesFormat=function(timeFormat){return splitTimeFormat(timeFormat)[2]},this.timeSeparator=function(timeFormat){return splitTimeFormat(timeFormat)[1]},this.showAM=function(timeFormat){return!!splitTimeFormat(timeFormat)[3]},this.formatDate=function(date,format){return dateFilter(date,format)}}])}),define("core/directives/datepicker/timepicker",["../../moduleDef","angular","text!./timepicker.tpl.html","./dimensions","./date-parser","./date-formatter","./tooltip"],function(module,angular,tpl){module.provider("$timepicker",function(){var defaults=this.defaults={animation:"am-fade",prefixClass:"timepicker",placement:"bottom-left",template:tpl,trigger:"focus",container:!1,keyboard:!0,html:!1,delay:0,useNative:!0,timeType:"date",timeFormat:"shortTime",modelTimeFormat:null,autoclose:!1,minTime:-1/0,maxTime:+1/0,length:5,hourStep:1,minuteStep:5,iconUp:"glyphicon glyphicon-chevron-up",iconDown:"glyphicon glyphicon-chevron-down",arrowBehavior:"pager"};this.$get=["$window","$rootScope","$sce","$dateFormatter","$tooltip","$timeout",function($window,$rootScope,$sce,$dateFormatter,$tooltip,$timeout){function timepickerFactory(element,controller,config){function createSelection(start,end){if(element[0].createTextRange){var selRange=element[0].createTextRange();selRange.collapse(!0),selRange.moveStart("character",start),selRange.moveEnd("character",end),selRange.select()}else element[0].setSelectionRange?element[0].setSelectionRange(start,end):angular.isUndefined(element[0].selectionStart)&&(element[0].selectionStart=start,element[0].selectionEnd=end)}function focusElement(){element[0].focus()}var $timepicker=$tooltip(element,angular.extend({},defaults,config)),parentScope=config.scope,options=$timepicker.$options,scope=$timepicker.$scope,lang=options.lang,formatDate=function(date,format){return $dateFormatter.formatDate(date,format,lang)},selectedIndex=0,startDate=controller.$dateValue||new Date,viewDate={hour:startDate.getHours(),meridian:startDate.getHours()<12,minute:startDate.getMinutes(),second:startDate.getSeconds(),millisecond:startDate.getMilliseconds()},format=$dateFormatter.getDatetimeFormat(options.timeFormat,lang),hoursFormat=$dateFormatter.hoursFormat(format),timeSeparator=$dateFormatter.timeSeparator(format),minutesFormat=$dateFormatter.minutesFormat(format),showAM=$dateFormatter.showAM(format);scope.$iconUp=options.iconUp,scope.$iconDown=options.iconDown,scope.$select=function(date,index){$timepicker.select(date,index)},scope.$moveIndex=function(value,index){$timepicker.$moveIndex(value,index)},scope.$switchMeridian=function(date){$timepicker.switchMeridian(date)},$timepicker.update=function(date){angular.isDate(date)&&!isNaN(date.getTime())?($timepicker.$date=date,angular.extend(viewDate,{hour:date.getHours(),minute:date.getMinutes(),second:date.getSeconds(),millisecond:date.getMilliseconds()}),$timepicker.$build()):$timepicker.$isBuilt||$timepicker.$build()},$timepicker.select=function(date,index,keep){(!controller.$dateValue||isNaN(controller.$dateValue.getTime()))&&(controller.$dateValue=new Date(1970,0,1)),angular.isDate(date)||(date=new Date(date)),0===index?controller.$dateValue.setHours(date.getHours()):1===index&&controller.$dateValue.setMinutes(date.getMinutes()),controller.$setViewValue(angular.copy(controller.$dateValue)),controller.$render(),options.autoclose&&!keep&&$timeout(function(){$timepicker.hide(!0)})},$timepicker.switchMeridian=function(date){if(controller.$dateValue&&!isNaN(controller.$dateValue.getTime())){var hours=(date||controller.$dateValue).getHours();controller.$dateValue.setHours(12>hours?hours+12:hours-12),controller.$setViewValue(angular.copy(controller.$dateValue)),controller.$render()}},$timepicker.$build=function(){var i,hour,midIndex=scope.midIndex=parseInt(options.length/2,10),hours=[];for(i=0;i<options.length;i++)hour=new Date(1970,0,1,viewDate.hour-(midIndex-i)*options.hourStep),hours.push({date:hour,label:formatDate(hour,hoursFormat),selected:$timepicker.$date&&$timepicker.$isSelected(hour,0),disabled:$timepicker.$isDisabled(hour,0)});var minute,minutes=[];for(i=0;i<options.length;i++)minute=new Date(1970,0,1,0,viewDate.minute-(midIndex-i)*options.minuteStep),minutes.push({date:minute,label:formatDate(minute,minutesFormat),selected:$timepicker.$date&&$timepicker.$isSelected(minute,1),disabled:$timepicker.$isDisabled(minute,1)});var rows=[];for(i=0;i<options.length;i++)rows.push([hours[i],minutes[i]]);scope.rows=rows,scope.showAM=showAM,scope.isAM=($timepicker.$date||hours[midIndex].date).getHours()<12,scope.timeSeparator=timeSeparator,$timepicker.$isBuilt=!0},$timepicker.$isSelected=function(date,index){return $timepicker.$date?0===index?date.getHours()===$timepicker.$date.getHours():1===index?date.getMinutes()===$timepicker.$date.getMinutes():void 0:!1},$timepicker.$isDisabled=function(date,index){var selectedTime;return 0===index?selectedTime=date.getTime()+6e4*viewDate.minute:1===index&&(selectedTime=date.getTime()+36e5*viewDate.hour),selectedTime<1*options.minTime||selectedTime>1*options.maxTime},scope.$arrowAction=function(value,index){"picker"===options.arrowBehavior?$timepicker.$setTimeByStep(value,index):$timepicker.$moveIndex(value,index)},$timepicker.$setTimeByStep=function(value,index){{var newDate=new Date($timepicker.$date),hours=newDate.getHours(),minutes=(formatDate(newDate,hoursFormat).length,newDate.getMinutes());formatDate(newDate,minutesFormat).length}0===index?newDate.setHours(hours-parseInt(options.hourStep,10)*value):newDate.setMinutes(minutes-parseInt(options.minuteStep,10)*value),$timepicker.select(newDate,index,!0)},$timepicker.$moveIndex=function(value,index){var targetDate;0===index?(targetDate=new Date(1970,0,1,viewDate.hour+value*options.length,viewDate.minute),angular.extend(viewDate,{hour:targetDate.getHours()})):1===index&&(targetDate=new Date(1970,0,1,viewDate.hour,viewDate.minute+value*options.length*options.minuteStep),angular.extend(viewDate,{minute:targetDate.getMinutes()})),$timepicker.$build()},$timepicker.$onMouseDown=function(evt){if("input"!==evt.target.nodeName.toLowerCase()&&evt.preventDefault(),evt.stopPropagation(),isTouch){var targetEl=angular.element(evt.target);"button"!==targetEl[0].nodeName.toLowerCase()&&(targetEl=targetEl.parent()),targetEl.triggerHandler("click")}},$timepicker.$onKeyDown=function(evt){if(/(38|37|39|40|13)/.test(evt.keyCode)&&!evt.shiftKey&&!evt.altKey){if(evt.preventDefault(),evt.stopPropagation(),13===evt.keyCode)return $timepicker.hide(!0);var newDate=new Date($timepicker.$date),hours=newDate.getHours(),hoursLength=formatDate(newDate,hoursFormat).length,minutes=newDate.getMinutes(),minutesLength=formatDate(newDate,minutesFormat).length,lateralMove=/(37|39)/.test(evt.keyCode),count=2+1*showAM;lateralMove&&(37===evt.keyCode?selectedIndex=1>selectedIndex?count-1:selectedIndex-1:39===evt.keyCode&&(selectedIndex=count-1>selectedIndex?selectedIndex+1:0));var selectRange=[0,hoursLength];0===selectedIndex?(38===evt.keyCode?newDate.setHours(hours-parseInt(options.hourStep,10)):40===evt.keyCode&&newDate.setHours(hours+parseInt(options.hourStep,10)),hoursLength=formatDate(newDate,hoursFormat).length,selectRange=[0,hoursLength]):1===selectedIndex?(38===evt.keyCode?newDate.setMinutes(minutes-parseInt(options.minuteStep,10)):40===evt.keyCode&&newDate.setMinutes(minutes+parseInt(options.minuteStep,10)),minutesLength=formatDate(newDate,minutesFormat).length,selectRange=[hoursLength+1,hoursLength+1+minutesLength]):2===selectedIndex&&(lateralMove||$timepicker.switchMeridian(),selectRange=[hoursLength+1+minutesLength+1,hoursLength+1+minutesLength+3]),$timepicker.select(newDate,selectedIndex,!0),createSelection(selectRange[0],selectRange[1]),parentScope.$digest()}};var _init=$timepicker.init;$timepicker.init=function(){return isNative&&options.useNative?(element.prop("type","time"),void element.css("-webkit-appearance","textfield")):(isTouch&&(element.prop("type","text"),element.attr("readonly","true"),element.on("click",focusElement)),void _init())};var _destroy=$timepicker.destroy;$timepicker.destroy=function(){isNative&&options.useNative&&element.off("click",focusElement),_destroy()};var _show=$timepicker.show;$timepicker.show=function(){_show(),$timeout(function(){$timepicker.$element.on(isTouch?"touchstart":"mousedown",$timepicker.$onMouseDown),options.keyboard&&element.on("keydown",$timepicker.$onKeyDown)},0,!1)};var _hide=$timepicker.hide;return $timepicker.hide=function(blur){$timepicker.$isShown&&($timepicker.$element.off(isTouch?"touchstart":"mousedown",$timepicker.$onMouseDown),options.keyboard&&element.off("keydown",$timepicker.$onKeyDown),_hide(blur))},$timepicker}var isNative=(angular.element($window.document.body),/(ip(a|o)d|iphone|android)/gi.test($window.navigator.userAgent)),isTouch="createTouch"in $window.document&&isNative;return defaults.lang||(defaults.lang=$dateFormatter.getDefaultLocale()),timepickerFactory.defaults=defaults,timepickerFactory}]}).directive("bsTimepicker",["$window","$parse","$q","$dateFormatter","$dateParser","$timepicker",function($window,$parse,$q,$dateFormatter,$dateParser,$timepicker){{var defaults=$timepicker.defaults,isNative=/(ip(a|o)d|iphone|android)/gi.test($window.navigator.userAgent);$window.requestAnimationFrame||$window.setTimeout}return{restrict:"EAC",require:"ngModel",link:function(scope,element,attr,controller){function validateAgainstMinMaxTime(parsedTime){if(angular.isDate(parsedTime)){var isMinValid=isNaN(options.minTime)||new Date(parsedTime.getTime()).setFullYear(1970,0,1)>=options.minTime,isMaxValid=isNaN(options.maxTime)||new Date(parsedTime.getTime()).setFullYear(1970,0,1)<=options.maxTime,isValid=isMinValid&&isMaxValid;controller.$setValidity("date",isValid),controller.$setValidity("min",isMinValid),controller.$setValidity("max",isMaxValid),isValid&&(controller.$dateValue=parsedTime)}}function getTimeFormattedString(){return!controller.$dateValue||isNaN(controller.$dateValue.getTime())?"":formatDate(controller.$dateValue,options.timeFormat)}var options={scope:scope,controller:controller};angular.forEach(["placement","container","delay","trigger","keyboard","html","animation","template","autoclose","timeType","timeFormat","modelTimeFormat","useNative","hourStep","minuteStep","length","arrowBehavior","iconUp","iconDown"],function(key){angular.isDefined(attr[key])&&(options[key]=attr[key])}),attr.bsShow&&scope.$watch(attr.bsShow,function(newValue){timepicker&&angular.isDefined(newValue)&&(angular.isString(newValue)&&(newValue=!!newValue.match(/true|,?(timepicker),?/i)),newValue===!0?timepicker.show():timepicker.hide())}),isNative&&(options.useNative||defaults.useNative)&&(options.timeFormat="HH:mm");var timepicker=$timepicker(element,controller,options);options=timepicker.$options;var lang=options.lang,formatDate=function(date,format){return $dateFormatter.formatDate(date,format,lang)},dateParser=$dateParser({format:options.timeFormat,lang:lang});angular.forEach(["minTime","maxTime"],function(key){angular.isDefined(attr[key])&&attr.$observe(key,function(newValue){timepicker.$options[key]=dateParser.getTimeForAttribute(key,newValue),!isNaN(timepicker.$options[key])&&timepicker.$build(),validateAgainstMinMaxTime(controller.$dateValue)})}),scope.$watch(attr.ngModel,function(){timepicker.update(controller.$dateValue)},!0),controller.$parsers.unshift(function(viewValue){if(!viewValue)return controller.$setValidity("date",!0),null;var parsedTime=angular.isDate(viewValue)?viewValue:dateParser.parse(viewValue,controller.$dateValue);return!parsedTime||isNaN(parsedTime.getTime())?void controller.$setValidity("date",!1):(validateAgainstMinMaxTime(parsedTime),"string"===options.timeType?formatDate(parsedTime,options.modelTimeFormat||options.timeFormat):"number"===options.timeType?controller.$dateValue.getTime():"iso"===options.timeType?controller.$dateValue.toISOString():new Date(controller.$dateValue))}),controller.$formatters.push(function(modelValue){var date;return date=angular.isUndefined(modelValue)||null===modelValue?0/0:angular.isDate(modelValue)?modelValue:"string"===options.timeType?dateParser.parse(modelValue,null,options.modelTimeFormat):new Date(modelValue),controller.$dateValue=date,getTimeFormattedString()}),controller.$render=function(){element.val(getTimeFormattedString())},scope.$on("$destroy",function(){timepicker&&timepicker.destroy(),options=null,timepicker=null})}}}])}),define("text!core/directives/datepicker/datetimepicker.tpl.html",[],function(){return'<div class="row">\r\n    <div class="col-xs-8">\r\n        <input type="text" size="10" bs-datepicker ng-model="datetimeValue" class="form-control"\r\n               ng-disabled="disabled" ng-change="call()"/>\r\n    </div>\r\n    <div class="col-xs-4">\r\n        <input type="text" size="8" bs-timepicker data-time-format="HH:mm" data-time-type="date" data-minute-step="1"\r\n               ng-model="datetimeValue" class="form-control" ng-disabled="disabled" ng-change="call()"/>\r\n    </div>\r\n</div>\r\n'}),define("core/directives/datepicker/datetimepicker",["../../moduleDef","angular","text!./datetimepicker.tpl.html"],function(module,angular,tpl){module.directive("datetimepicker",[function(){return{restrict:"EA",replace:!0,template:tpl,require:"ngModel",scope:{datetimeValue:"=ngModel",disabled:"=ngDisabled",onchange:"&ngChange"},controller:["$scope","$rootScope",function($scope,$rootScope){$scope.i18n=$rootScope.i18n,$scope.call=function(){$scope.onchange({value:$scope.datetimeValue})}}]}}])}),define("text!core/directives/ago.tabs.tpl.html",[],function(){return'<div class="tabbable ago-tabs">\r\n	<ul class="nav nav-responsive nav-tabs">\r\n		<li ng-repeat="i in items" ng-class="{active: tab === i.name }">\r\n			<a ui-sref="{{ i.sref }}">\r\n                {{ i18n.msg(i.code) }}\r\n                <span class="badge" ng-class="{\'label-info\': i.unread}" ng-if="i.count || i.unread">\r\n                    {{ i.count || (i.unread ? \'!\' : \'\') }}\r\n                </span>\r\n            </a>\r\n		</li>\r\n	</ul>\r\n</div>\r\n'}),define("bootstrap-tabdrop",["jquery"],function($){var WinReszier=function(){var timer,registered=[],inited=!1,resize=function(){clearTimeout(timer),timer=setTimeout(notify,100)},notify=function(){for(var i=0,cnt=registered.length;cnt>i;i++)registered[i].apply()};return{register:function(fn){registered.push(fn),inited===!1&&($(window).bind("resize",resize),inited=!0)},unregister:function(fn){for(var i=0,cnt=registered.length;cnt>i;i++)if(registered[i]===fn){delete registered[i];break}}}}(),TabDrop=function(element,options){this.element=$(element),this.dropdown=$('<li class="dropdown hide pull-right tabdrop"><a class="dropdown-toggle" data-toggle="dropdown" href="#">'+options.text+' <b class="caret"></b></a><ul class="dropdown-menu"></ul></li>').prependTo(this.element),this.element.parent().is(".tabs-below")&&this.dropdown.addClass("dropup"),WinReszier.register($.proxy(this.layout,this)),this.layout()};return TabDrop.prototype={constructor:TabDrop,layout:function(){var collection=[];this.dropdown.removeClass("hide"),this.element.append(this.dropdown.find("li")).find(">li").not(".tabdrop").each(function(){this.offsetTop>0&&collection.push(this)}),collection.length>0?(collection=$(collection),this.dropdown.find("ul").empty().append(collection),1===this.dropdown.find(".active").length?this.dropdown.addClass("active"):this.dropdown.removeClass("active")):this.dropdown.addClass("hide")}},$.fn.tabdrop=function(option){return this.each(function(){var $this=$(this),data=$this.data("tabdrop"),options="object"==typeof option&&option;data||$this.data("tabdrop",data=new TabDrop(this,$.extend({},$.fn.tabdrop.defaults,options))),"string"==typeof option&&data[option]()})},$.fn.tabdrop.defaults={text:'<i class="icon-align-justify"></i>'},$.fn.tabdrop.Constructor=TabDrop,$}),requirejs.s.contexts._.nextTick=function(f){f()},require(["css"],function(css){css.addBuffer("bootstrap-tabdrop/css.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,define("core/directives/ago.tabs",["../moduleDef","jquery","angular","text!./ago.tabs.tpl.html","bootstrap-tabdrop","css!bootstrap-tabdrop/css"],function(module,$,angular,tpl){var ctrl=function($scope,$rootScope,$stateParams,apinetService,stateCacheService,$exceptionHandler){$scope.i18n=$rootScope.i18n,$scope.items=$scope.settings.items;var cachekey=function(){var key="tabs";return $stateParams.project&&(key+="_"+$stateParams.project),$scope.settings&&$scope.settings.params&&(key+="_"+angular.toJson($scope.settings.params,!1)),key},loadCounters=function(){if($scope.settings&&$scope.settings.action){var params={method:$scope.settings.action,project:$stateParams.project};$scope.settings.params&&angular.extend(params,$scope.settings.params),apinetService.action(params).then(function(response){stateCacheService.put(cachekey(),response),mapCounters(response)},$exceptionHandler)}},mapCounters=function(data){if(data&&$scope.items)for(var itemIdx=0;itemIdx<$scope.items.length;itemIdx++){var item=$scope.items[itemIdx];angular.isDefined(item.allProp)&&(item.count=data[item.allProp]),angular.isDefined(item.unreadProp)&&(item.unread=data[item.unreadProp])}};$scope.$on("tabs:reset",loadCounters);var state=stateCacheService.get(cachekey());null!=state&&mapCounters(state),loadCounters()};module.directive("agoTabs",["$compile",function($compile){return{restrict:"E",replace:!0,template:tpl,scope:{tab:"@currentTab",settings:"=tabSettings"},controller:["$scope","$rootScope","$stateParams","apinetService","stateCacheService","$exceptionHandler",ctrl],link:function(scope,elm){$target=$(".nav-responsive.nav-tabs",elm),$target.tabdrop(),$compile($target.contents())(scope),scope.$watch("items",function(){$target.tabdrop("layout")})}}}])}),define("text!core/directives/spinner.tpl.html",[],function(){return'<div class="loading" ng-show="active">\r\n    <i class="icon-spinner icon-spin"></i>\r\n</div>\r\n'}),requirejs.s.contexts._.nextTick=function(f){f()},require(["css"],function(css){css.addBuffer("core/directives/spinner.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,define("core/directives/spinner",["../moduleDef","angular","text!./spinner.tpl.html","css!./spinner.css"],function(module,angular,tpl){module.directive("agoSpinner",[function(){return{restrict:"EA",replace:!0,scope:{active:"="},template:tpl}}])}),define("text!core/directives/refresher.tpl.html",[],function(){return'<button class="refresher btn pull-right" ng-click="refresh()" ng-disabled="active"\r\n        bindonce="i18n.core" bo-title="i18n.core.buttons.refresh">\r\n    <i class="icon-refresh" ng-class="{\'icon-spin\': active}"></i>\r\n</button>\r\n'}),requirejs.s.contexts._.nextTick=function(f){f()},require(["css"],function(css){css.addBuffer("core/directives/refresher.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,define("core/directives/refresher",["../moduleDef","angular","text!./refresher.tpl.html","css!./refresher.css"],function(module,angular,tpl){module.directive("refresher",["$stateParams","apinetService",function(){return{restrict:"E",replace:!0,template:tpl,scope:{active:"=",refreshCallback:"&onRefresh"},controller:["$scope","$rootScope",function($scope,$rootScope){$scope.i18n=$rootScope.i18n}],link:function(scope){scope.refresh=function(){angular.isFunction(scope.refreshCallback)&&scope.refreshCallback()}}}}])}),define("core/directives/ago.navToggler",["../moduleDef","angular","jquery"],function(module,angular,$){module.directive("agoNavToggler",["$rootScope",function($rootScope){var minWidth=768;return{restrict:"A",link:function($scope,elm){var $mainNav=$("#main-nav"),$body=$("body"),isNavOpen=function(){return $body.hasClass("main-nav-opened")||$mainNav.width()>50},openMenu=function(){$body.addClass("main-nav-opened").removeClass("main-nav-closed"),$rootScope.$emit("sidebar:opened")},closeMenu=function(){$body.removeClass("main-nav-opened").addClass("main-nav-closed"),$rootScope.$emit("sidebar:closed")},click_event=$.support.touch?"tap":"click";elm.on(click_event,function(){return isNavOpen()?(closeMenu(),!1):(openMenu(),!0)}),$mainNav.on(click_event,"ul > li > a",function(){angular.isDefined($(this).attr("ui-sref"))&&isNavOpen()&&$body.width()<=minWidth&&closeMenu()})}}}])}),define("core/directives/ago.sidebar",["../moduleDef","angular","jquery"],function(module,angular,$){module.directive("agoSidebar",["$window","$exceptionHandler",function($window){return{restrict:"A",scope:{},link:function(scope,elm,attr){var $$window=$($window),offsetTop=attr.offsetTop?parseInt(attr.offsetTop):40,resizeHandler=function(){var height=$$window.height()-offsetTop;elm.height(height)};$$window.on("resize",resizeHandler),scope.$on("$destroy",function(){$$window.off("resize",resizeHandler)}),resizeHandler()}}}])}),define("text!core/directives/nextpage.tpl.html",[],function(){return'<button type="button" class="btn btn-primary" ng-click="paging.page = paging.page + 1"\r\n        bindonce="i18n.core.buttons" bo-text="i18n.core.buttons.more || \'\'">\r\n</button>\r\n'}),define("core/directives/nextpage",["../moduleDef","angular","text!./nextpage.tpl.html"],function(module,angular,tpl){module.directive("nextPage",[function(){return{restrict:"E",replace:!0,template:tpl}}])}),define("text!core/directives/ago.timeMoment.tpl.html",[],function(){return'<small ng-if="time" class="date text-muted time-moment">\r\n    <span class="timeago fade has-tooltip in" data-placement="top"\r\n          title="{{ time | date:\'ago_datetime\' }}">{{ moment(time).fromNow() }}</span>\r\n</small>\r\n'}),requirejs.s.contexts._.nextTick=function(f){f()},require(["css"],function(css){css.addBuffer("core/directives/ago.timeMoment.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,define("core/directives/ago.timeMoment",["../moduleDef","angular","text!./ago.timeMoment.tpl.html","css!./ago.timeMoment.css"],function(module,angular,tpl){module.directive("agoTimeMoment",[function(){return{restrict:"E",replace:!0,template:tpl,link:function($scope,elm,attrs){attrs.time&&($scope.time=$scope.$eval(attrs.time))}}}])}),define("text!core/directives/detailsBtn.tpl.html",[],function(){return'<div class="details-btn btn-group pull-right">\r\n    <a href="" class="btn btn-primary btn-sm" data-toggle="button" ng-click="toggle()">\r\n        <i class="fa" ng-class="{ \'icon-chevron-up\': open, \'icon-chevron-down\': !open }"></i>\r\n    </a>\r\n</div>\r\n'}),requirejs.s.contexts._.nextTick=function(f){f()},require(["css"],function(css){css.addBuffer("core/directives/detailsBtn.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,define("core/directives/detailsBtn",["../moduleDef","angular","text!./detailsBtn.tpl.html","css!./detailsBtn.css"],function(module,angular,tpl){module.directive("detailsBtn",[function(){return{restrict:"EA",replace:!0,template:tpl,scope:{open:"=",toggle:"&"}}}])}),define("text!core/directives/ago.viewMode.tpl.html",[],function(){return'<div class="btn-group" bindonce="i18n.core.viewMode">\r\n    <a href="" class="btn dropdown-toggle" data-toggle="dropdown">\r\n        <i class="{{ settings[mode].icon }}"></i>\r\n        <span class="inline-block hidden-xs">{{ (settings[mode].title | i18n) || \'\' }}</span>\r\n    </a>\r\n    <ul class="dropdown-menu" role="menu">\r\n        <li ng-repeat="m in modes" ng-class="{\'active\': m === mode}">\r\n            <a href="" ng-click="toggleViewMode(m)">\r\n                <i class="{{ settings[m].icon }}"></i>\r\n                {{ settings[m].title | i18n }}\r\n            </a>\r\n        </li>\r\n    </ul>\r\n</div>\r\n'}),define("core/directives/ago.viewMode",["../moduleDef","angular","text!./ago.viewMode.tpl.html"],function(module,angular,tpl){module.directive("agoViewMode",function(){return{restrict:"E",replace:!0,template:tpl,controller:["$scope","$rootScope",function($scope,$rootScope){$scope.i18n=$rootScope.i18n,$scope.toggleViewMode=function(m){m&&$scope.mode!==m&&($scope.mode=m,$scope.$emit("viewModeChanged"))
}}],scope:{modes:"=",settings:"=",mode:"="}}})}),define("text!core/directives/expiration.tpl.html",[],function(){return'<span bindonce="expiration" bo-if="visible" class="label" bo-title="expiration.title"\r\n      bo-class="{\'label-warning\': !expiration.expired && days, \'label-important\': expiration.expired, \'label-default\': !expiration.expired && !days }"\r\n      bo-html="expiration.days">\r\n</span>\r\n'}),define("core/directives/expiration",["../moduleDef","angular","text!./expiration.tpl.html"],function(module,angular,tpl){module.directive("expiration",["$locale","i18n",function($locale,i18n){return{restrict:"EA",replace:!0,template:tpl,scope:{visible:"=",expired:"=",days:"="},link:function($scope){if(!$scope.visible)return void($scope.expiration={});if($scope.expiration={expired:$scope.expired,days:"&ndash;"},$scope.days){var pcat=$locale.pluralCat(Math.abs($scope.days)),daysText="";switch(pcat){case"one":case"few":case"many":case"other":daysText=i18n.msg("core.duration.days."+pcat);break;case"zero":case"two":daysText="";break;default:daysText=""}var msgKey="core.expiration."+($scope.expired?"already":"will"),msg=i18n.msg(msgKey,{days:Math.abs($scope.days),daysText:daysText});$scope.expiration.days=Math.abs($scope.days),$scope.expiration.days>99&&($scope.expiration.days="99+"),$scope.expiration.title=msg}}}}])}),define("core/directives/ago.timespan",["../moduleDef","angular"],function(module,angular){var constructRegEx=function(d,h,m){var days="(\\d+"+d+")",hours="(\\d+"+h+")",minutes="(\\d+"+m+")";return new RegExp("^\\s*"+days+"?\\s*"+hours+"?\\s*"+minutes+"?\\s*$")},day=function(i18n){return i18n.msg("core.timespan.day")},hour=function(i18n){return i18n.msg("core.timespan.hour")},minute=function(i18n){return i18n.msg("core.timespan.minute")};module.directive("agoTimespan",["i18n","$filter",function(i18n,$filter){return{restrict:"A",scope:!1,require:"ngModel",link:function($scope,elm,attr,ctrl){ctrl.$parsers.push(function(value){if(!angular.isDefined(value))return void 0;var endWith=function(str,suffix){return-1!==str.indexOf(suffix,str.length-suffix.length)},parts=constructRegEx(day(i18n),hour(i18n),minute(i18n)).exec(value);if(!parts||parts.length<2)return void ctrl.$setValidity("pattern",!1);for(var result=0,partIndex=1;partIndex<parts.length;partIndex++){var p=parts[partIndex];angular.isDefined(p)&&(endWith(p,day(i18n))&&(result+=24*parseInt(p.substring(0,p.length-1))),endWith(p,hour(i18n))&&(result+=parseInt(p.substring(0,p.length-1))),endWith(p,minute(i18n))&&(result+=parseInt(p.substring(0,p.length-1))/60))}return ctrl.$setValidity("pattern",!0),result}),ctrl.$formatters.push(function(value){return $filter("agoTimespan")(value)})}}}]),module.filter("agoTimespan",["i18n",function(i18n){return function(value){if(!angular.isDefined(value))return"";var days=Math.floor(value/24),rest=value%24,hours=Math.floor(rest);rest-=hours;var minutes=Math.floor(60*rest),parts=[];return days>0&&parts.push(days+day(i18n)),hours>0&&parts.push(hours+hour(i18n)),minutes>0&&parts.push(minutes+minute(i18n)),parts.join(" ")}}])}),define("text!core/directives/files/ago.uploader.tpl.html",[],function(){return'<div file-upload="options" class="file-upload">\r\n	<span class="btn btn-success fileinput-button" ng-class="{disabled: disabled}">\r\n		<i class="icon-plus"></i>\r\n		<span>{{ i18n.core.upload.addFiles }}</span>\r\n		<input type="file" name="files[]" multiple ng-disabled="disabled">\r\n	</span>\r\n	<span class="hidden-xs inline-block">\r\n		{{ i18n.core.upload.placeholder }}\r\n	</span>\r\n\r\n	<div id="progressbar" class="progress progress-small" ng-show="uploading">\r\n		<div class="progress-bar progress-bar-success" ng-style="{\'width\': progress + \'%\'}">{{ progress }}%</div>\r\n	</div>\r\n\r\n	<table class="table table-striped ng-cloak" ng-hide="queue.length <= 0">\r\n		<tr data-ng-repeat="file in queue">\r\n			<td>\r\n				{{file.name}}\r\n			</td>\r\n			<td>\r\n				{{file.size | formatFileSize}}\r\n			</td>\r\n			<td>\r\n				<button type="button" class="btn btn-sm btn-warning" data-ng-click="file.$cancel()" data-ng-hide="!file.$cancel">\r\n					<i class="icon-ban-circle"></i>\r\n					<span>{{ i18n.core.buttons.cancel }}</span>\r\n				</button>\r\n			</td>\r\n		</tr>\r\n	</table>\r\n</div>'}),define("text!core/directives/files/ago.uploader.inrow.tpl.html",[],function(){return'<div file-upload="options" class="file-upload">\r\n	<span ng-hide="uploading" class="fileinput-button" ng-class="{disabled: disabled}">\r\n		<i class="icon-paper-clip"></i>\r\n        <button ng-if="hasDeleteCallback" ng-click="delete()" type="button" class="close" title="{{i18n.core.buttons.delete}}">&times;</button>\r\n		<input type="file" name="files[]" multiple ng-disabled="disabled" title="{{ i18n.core.upload.addFiles }}">\r\n	</span>\r\n	<img ng-show="uploading" ng-src="{{ loadingImgUrl }}" />\r\n	<span ng-show="uploading">{{ progress }}%</span>\r\n</div>\r\n'}),requirejs.s.contexts._.nextTick=function(f){f()},require(["css"],function(css){css.addBuffer("core/directives/files/ago.uploader.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,define("core/directives/files/ago.uploader",["../../moduleDef","require","jquery","angular","text!./ago.uploader.tpl.html","text!./ago.uploader.inrow.tpl.html","css!./ago.uploader.css"],function(module,require,$,angular,tpl,tplInrow){var newUuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=16*Math.random()|0,v="x"==c?r:3&r|8;return v.toString(16)})},defaultOptions={autoUpload:!0,xhrFields:{withCredentials:!0},maxChunkSize:3145728};$(document).bind("drop dragover",function(e){e.preventDefault()});var applyHandlers=function(scope,$elm,$dropTarget){scope.uploading=!1,scope.progress=0,$dropTarget=$dropTarget||$elm,scope.$on("fileuploadsubmit",function(e,data){data.formData=data.formData||{},angular.extend(data.formData,{uploadid:newUuid()}),scope.uploading=!0,scope.progress=0,$dropTarget.removeClass("file-upload-dropzone_hover")}),scope.$on("fileuploadprogressall",function(e,data){var progress=parseInt(data.loaded/data.total*100,10);scope.progress=progress}),scope.$on("fileuploadalways",function(e,data){scope.clear(data.files);var rejectedCnt=0;scope.queue.map(function(file){"rejected"===file.$state()&&rejectedCnt++}),scope.uploading=scope.queue.length>rejectedCnt,scope.queue.length===rejectedCnt&&scope.clear(scope.queue)}),$($elm).fileupload("option",{dropZone:$dropTarget,pasteZone:$dropTarget}),$dropTarget.on("dragover",function(){$dropTarget.addClass("file-upload-dropzone_hover")}),$dropTarget.on("dragleave",function(){$dropTarget.removeClass("file-upload-dropzone_hover")}),scope.$on("destroy",function(){$dropTarget.off("dragenter dragover dragleave")})};module.directive("agoUploader",["i18n",function(){return{restrict:"EA",replace:!0,template:tpl,scope:!0,link:function(scope,elm,attrs){applyHandlers(scope,$(elm[0]));var ops=angular.copy(defaultOptions);scope.options=angular.extend(ops,scope.$eval(attrs.agoUploader))}}}]),module.directive("agoUploaderInrow",["i18n","$timeout","$parse",function(i18n,$timeout,$parse){return{restrict:"EA",replace:!0,template:tplInrow,scope:!0,link:function($scope,elm,attrs){$scope.loadingImgUrl=require.toUrl("core/themes/flatty/images/ajax-loaders/15.gif"),$scope.hasDeleteCallback=angular.isDefined(attrs.onDelete);var deleteHandler=null;$scope.hasDeleteCallback&&(deleteHandler=$parse(attrs.onDelete)),$scope.delete=function(){deleteHandler&&deleteHandler($scope)};var init=function(){var $elm=$(elm[0]),$dropTarget=$("#"+$scope.$eval(attrs.dropTarget)),secondInit=function(){applyHandlers($scope,$elm,$dropTarget);var ops=angular.copy(defaultOptions);$scope.options=angular.extend(ops,$scope.$eval(attrs.agoUploaderInrow))};$dropTarget.length>0?secondInit():$timeout(function(){$dropTarget=$("#"+$scope.$eval(attrs.dropTarget)),secondInit()})};if(attrs.dropTarget)var unwatch=$scope.$watch(attrs.dropTarget,function(val){val&&(init(),unwatch())});else init()}}}])}),define("text!core/directives/files/ago.fileLink.tpl.html",[],function(){return'<a target="_blank" ng-href="{{ !isCordova ? downloadUrl() : \'\' }}" ng-click="onDownload()"\r\n        style="word-break: break-all; white-space: normal">\r\n    {{ name || fileName }}\r\n</a>\r\n'}),define("core/directives/files/ago.fileLink",["../../moduleDef","angular","text!./ago.fileLink.tpl.html"],function(module,angular,tpl){module.directive("agoFileLink",["$window","$exceptionHandler",function($window,$exceptionHandler){return{restrict:"EA",replace:!0,template:tpl,scope:{name:"=",fileName:"=",downloadUrl:"&",downloadCallback:"&onDownload",errorCallback:"&onError"},link:function(scope){scope.isCordova=$window.isCordova,scope.onDownload=function(){if($window.isCordova){var fileUrl=scope.downloadUrl();if("iOS"===$window.device.platform)$window.open(fileUrl,"_blank","location=yes,transitionstyle=fliphorizontal,EnableViewPortScale=yes");else if("Android"===$window.device.platform){var fail=function(error){scope.errorCallback({error:error}),$exceptionHandler(error)},localFileName=scope.fileName||scope.name;$window.requestFileSystem(LocalFileSystem.PERSISTENT,0,function(fileSystem){var localPath=fileSystem.root.toURL()+localFileName,ft=new FileTransfer,encodedFileUrl=$window.encodeURI(fileUrl);ft.download(encodedFileUrl,localPath,function(entry){$window.open(entry.toURL(),"_system")},fail)},fail)}}scope.downloadCallback()}}}}])}),define("text!core/directives/files/ago.filesView.tpl.html",[],function(){return'<div class="row">\r\n    <div class="col-xs-12">\r\n        <div filters-box="filter" sorters="sorters" meta="{{filterMeta}}" group="{{filterGroup}}"\r\n             apply-enabled="applyEnabled" apply-filter="applyFilter" reset-filter="resetFilter" filter-applied="filterApplied" >\r\n\r\n            <form class="form form-horizontal">\r\n                <div class="form-group">\r\n                    <label class="col-md-3 control-label" bindonce="i18n.core" bo-text="i18n.core.fields.name"></label>\r\n                    <div class="col-md-9">\r\n                        <input type="text" ng-model="filter.simple.Name" filter-node="{path: \'Name\', op:\'like\'}" class="form-control"  />\r\n                    </div>\r\n                </div>\r\n            </form>\r\n        </div>\r\n\r\n        <ago-box header-class="{hidden: true}">\r\n            <ago-box-content>\r\n                <div class="box-toolbox box-toolbox-top">\r\n                    <ago-error-msg></ago-error-msg>\r\n\r\n                    <div class="col-xs-2 col-sm-9" ago-uploader="topUploadOption()">\r\n                    </div>\r\n\r\n                    <refresher active="indication.loading" on-refresh="refreshList()"></refresher>\r\n                    <button type="button" class="btn btn-danger pull-right"\r\n                            ng-click="deleteSelected()" ng-disabled="!hasSelected()"\r\n                            bindonce="i18n.core"\r\n                            bo-title="i18n.core.buttons.deleteSelected">\r\n                        <i class="icon-remove"></i>\r\n                        <span class="inline-block hidden-xs" bo-text="i18n.core.buttons.delete"></span>\r\n                    </button>\r\n\r\n                    <div class="clearfix"></div>\r\n                </div>\r\n\r\n                <div class="responsive-table">\r\n                    <div class="scrollable-area">\r\n                        <table class="table table-bordered">\r\n                            <thead>\r\n                            <tr bindonce="i18n.core">\r\n                                <th class="onepct">\r\n                                    <input type="checkbox" checker="items: \'models\'">\r\n                                </th>\r\n                                <th class="col-md-4 col-sm-8 col-xs-11" bo-text="i18n.core.fields.name"></th>\r\n                                <th class="col-md-2 col-sm-3 hidden-xs" bo-text="i18n.core.fields.size"></th>\r\n                                <th class="col-md-2 hidden-sm hidden-xs" bo-text="i18n.core.fields.creator"></th>\r\n                                <th class="col-md-2 hidden-sm hidden-xs" bo-text="i18n.core.fields.creationTime"></th>\r\n                                <th class="onepct">&nbsp;</th>\r\n                            </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                            <tr bo-id="f.Id" bindonce ng-repeat="f in models">\r\n                                <td class="onepct">\r\n                                    <input type="checkbox" ng-model="f.selected" bo-attr bo-attr-data-itemid="f.Id">\r\n                                </td>\r\n                                <td inline-edit="f.Name" on-update="renameFile(f, val)" on-cancel="resetValidation()"\r\n                                    class="col-md-4 col-sm-8 col-xs-11">\r\n                                    <div ng-hide="editMode">\r\n                                        <ago-file-link name="f.Name" download-url="downloadUrl(f)"\r\n                                                       on-error="onDownloadError(f)" style="padding-right: 35px">\r\n                                       </ago-file-link>\r\n                                        <button class="btn btn-sm pull-right" ng-click="edit()">\r\n                                            <i class="icon-pencil"></i>\r\n                                        </button>\r\n                                        <div ago-uploader-inrow="itemUploadOption(f)" drop-target="f.Id" class="col-xs-12"></div>\r\n                                    </div>\r\n                                    <form name="editForm" class="form-inline" ng-show="editMode"\r\n                                          ng-class="{\'has-error\': editForm.$invalid}" style="width: 100%" novalidate>\r\n                                        <div class="input-group" style="padding-left: 0">\r\n                                            <input type="text" class="form-control" ng-model="emodel.value" required\r\n                                                   ng-readonly="waiting">\r\n                                            <inline-buttons class="input-group-btn"></inline-buttons>\r\n                                        </div>\r\n                                        <div class="col-xs-12">\r\n                                            <span ng-if="f.validation.fieldErrors[\'Name\']" class="help-block alert-danger">\r\n                                                {{ f.validation.fieldErrors[\'Name\'] | joinBy }}\r\n                                            </span>\r\n                                            <span ng-if="f.validation.generalErrors" class="help-block alert-danger">\r\n                                                {{ f.validation.generalErrors | joinBy }}\r\n                                            </span>\r\n                                        </div>\r\n                                    </form>\r\n                                </td>\r\n                                <td class="col-md-2 col-sm-3 hidden-xs" bo-text="f.Size | formatFileSize"></td>\r\n                                <td class="col-md-2 hidden-sm hidden-xs" bo-text="f.Author"></td>\r\n                                <td class="col-md-2 hidden-sm hidden-xs" bo-text="f.CreationTime | date:\'ago_datetime\'"></td>\r\n                                <td class="onepct">\r\n                                    <ago-btn-delete bo-title="i18n.core.buttons.delete" ng-click="delete(f)"></ago-btn-delete>\r\n                                </td>\r\n                            </tr>\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="box-toolbox box-toolbox-bottom">\r\n                    <button type="button" class="btn btn-primary" ng-click="paging.page = paging.page + 1">{{ i18n.core.buttons.more }}</button>\r\n\r\n                    <refresher active="indication.loading" on-refresh="refreshList()"></refresher>\r\n                    <counter action="tasks/tasks/getFilesCount"></counter>\r\n                </div>\r\n            </ago-box-content>\r\n        </ago-box>\r\n    </div>\r\n</div>'}),define("core/directives/files/ago.filesView",["../../moduleDef","jquery","angular","text!./ago.filesView.tpl.html"],function(module,$,angular,tpl){module.directive("filesView",[function(){return{restrict:"E",replace:!0,scope:!1,template:tpl,controller:["$scope","$attrs","$stateParams","apinetService","$window","i18n","dialogService","$rootScope",function($scope,$attrs,$stateParams,apinetService,$window,i18n,dialogService,$rootScope){$scope.i18n=$rootScope.i18n,$scope.filterMeta=$attrs.filterMeta,$scope.filterGroup=$attrs.filterGroup,$scope.uploadUrl=$attrs.uploadUrl,$scope.deleteUrl=$attrs.deleteUrl,$scope.renameUrl=$attrs.renameUrl,$scope.ownerId=$scope.$eval($attrs.ownerId),$scope.resetValidation=function(){$scope.validation||($scope.validation={}),$scope.validation.generalErrors=[],$scope.validation.fieldErrors={}};var handleException=function(error){$scope.resetValidation(),$scope.validation.generalErrors=angular.isArray(error)?error:[error]},uploadOptions={url:apinetService.apiUrl($scope.uploadUrl,$stateParams.project),done:function(e,data){$scope.handleResult(data.result)},fail:function(e,data){"abort"!==data.errorThrown&&handleException(data.result.message)}};$scope.topUploadOption=function(){var topOptions=angular.copy(uploadOptions);return angular.extend(topOptions,{submit:function(e,data){angular.extend(data.formData,{project:$stateParams.project,ownerId:$scope.ownerId})}}),topOptions},$scope.itemUploadOption=function(file){var itemOptions=angular.copy(uploadOptions);return angular.extend(itemOptions,{maxNumberOfFiles:1,submit:function(e,data){angular.extend(data.formData,{project:$stateParams.project,ownerId:$scope.ownerId,fileId:file.Id})}}),itemOptions},$scope.findIndexById=function(fileId){if(!fileId)return-1;var modelIndex=-1;return angular.forEach($scope.models,function(model,index){model.Id===fileId&&(modelIndex=index)}),modelIndex},$scope.handleResult=function(response){response&&response.files&&response.files.map(function(file){var idx=$scope.findIndexById(file.model.Id);0>idx?$scope.models.push(file.model):$scope.models[idx]=file.model})},$scope.removeFromModels=function(modelsToRemove){for(var i=0;i<modelsToRemove.length;i++){var index=$scope.models.indexOf(modelsToRemove[i]);0>index||$scope.models.splice(index,1)}},$scope.hasSelected=function(){for(var i=0;i<$scope.models.length;i++)if($scope.models[i].selected&&$scope.models[i].selected===!0)return!0;return!1};var deleteFiles=function(models){var ids=$.map(models,function(m){return m.Id});apinetService.action({method:$scope.deleteUrl,project:$stateParams.project,ids:ids}).then(function(){$scope.removeFromModels(models)},handleException)};$scope.deleteSelected=function(){dialogService.confirm(i18n.msg("core.confirm.delete.title"),i18n.msg("core.confirm.delete.records")).then(function(){for(var modelsToRemove=[],i=0;i<$scope.models.length;i++)$scope.models[i].selected&&$scope.models[i].selected===!0&&modelsToRemove.push($scope.models[i]);modelsToRemove.length<=0||($scope.resetValidation(),deleteFiles(modelsToRemove))})},$scope.delete=function(model){model&&dialogService.confirm(i18n.msg("core.confirm.delete.title"),i18n.msg("core.confirm.delete.record")).then(function(){deleteFiles([model])})},$scope.renameFile=function(file,newName){return apinetService.action({method:$scope.renameUrl,project:$stateParams.project,fileId:file.Id,name:newName}).then(function(response){return response.validation.success&&angular.extend(file,response.model),file.validation=response.validation,response.validation.success},handleException)},$scope.downloadUrl=function(file){return apinetService.downloadUrl("file/"+$stateParams.project+"/"+file.Id,$stateParams.project)},$scope.onDownloadError=function(file){handleException(i18n.msg("core.errors.downloadError",{file:file.Name}))},$scope.resetValidation()}]}}])}),requirejs.s.contexts._.nextTick=function(f){f()},require(["css"],function(css){css.addBuffer("core/directives/filters/filteredList.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,define("core/directives/filters/filteredList",["../../moduleDef","angular","css!./filteredList.css"],function(module,angular){module.directive("filteredList",["apinetService","i18n","$timeout","$stateParams","stateCacheService",function($apinetService,i18n,$timeout,$stateParams,stateCacheService){var cacheKey=function($scope){var key=$scope.method+($stateParams.project?"_"+$stateParams.project:"");return $scope.onCacheKey&&angular.isFunction($scope.onCacheKey)&&(key=$scope.onCacheKey(key)||key),key},cacheCurrentState=function($scope){var state={filterApplied:$scope.filterApplied,filter:angular.copy($scope.filter),sorters:angular.copy($scope.sorters),paging:angular.copy($scope.paging),models:angular.copy($scope.models)};$scope.onCacheState&&angular.isFunction($scope.onCacheState)&&$scope.onCacheState(state);var key=cacheKey($scope);stateCacheService.cacheState(key,state)},restoreCurrentState=function($scope){var key=cacheKey($scope),state=stateCacheService.restoreState(key,$scope);return state&&$scope.onRestoreCacheState&&angular.isFunction($scope.onRestoreCacheState)&&$scope.onRestoreCacheState(state),null!=state};return{controller:["$scope","$rootScope",function($scope,$rootScope){angular.extend($scope,{sorters:[],filter:{},requestParams:$scope.initialRequestParams||{},paging:{page:0,loadedPages:[]},applyEnabled:!1,filterApplied:!1,models:[],validation:{},indication:{loading:!1},applyFilter:function(){$scope.applyEnabled&&($scope.filterApplied=!0,$scope.refreshList())},resetFilter:function(){$scope.filter={},$scope.requestParams=angular.extend({},$scope.initialRequestParams),$scope.filterApplied=!1,$scope.$emit("resetFilter"),$scope.applyEnabled=!1,$scope.$emit("filterChanged"),$rootScope.$$phase||$scope.$apply(),$scope.refreshList()},resetValidation:function(){$scope.validation={}},refreshList:function(append){if($scope.timeout)return $scope.indication.loading=!0,$timeout.cancel($scope.timeout),void($scope.timeout=$timeout(function(){$scope.timeout=null,$scope.indication.loading=!1,$scope.refreshList(append)},1e3));if(append){if(-1!==$scope.paging.loadedPages.indexOf($scope.paging.page))return}else $scope.paging.page=0,$scope.paging.loadedPages=[];var params=angular.extend({project:$stateParams.project},$scope.requestParams,{method:$scope.method,filter:$scope.filter,sorters:$scope.sorters,page:$scope.paging.page});$scope.resetValidation(),$scope.indication.loading=!0,$scope.timeout=$timeout(function(){$scope.timeout=null},500),$apinetService.getModels(params).then(function(result){if($scope.indication.loading=!1,$scope.applyEnabled=!1,append)if(result.length){$scope.paging.loadedPages.push($scope.paging.page);for(var i=0;i<result.length;i++)$scope.models.push(result[i])}else $scope.paging.page=$scope.paging.page-1,$scope.paging.page<0&&($scope.paging.page=0);else $scope.models=result;cacheCurrentState($scope),$scope.$emit("modelsChanged")},function(error){$scope.indication.loading=!1,$scope.validation.generalErrors=[error]})},pageWatcher:function(value,oldValue){return oldValue>=value?void 0:value!==oldValue+1?void($scope.paging.page=oldValue):void $scope.refreshList(!0)},applyEnablingWatcher:function(value,oldValue){value!==oldValue&&($scope.applyEnabled=!0,$scope.$emit("filterChanged"))}})}],link:function($scope,element,attrs){element.addClass("filtered-list");var inputParams=$scope.$eval(attrs.filteredList);if(angular.extend($scope,inputParams),restoreCurrentState($scope))$scope.refreshList();else{var initialSorters=$scope.$eval(attrs.initialSorters)||{};for(var key in initialSorters)if(initialSorters.hasOwnProperty(key)){var direction=initialSorters[key];!direction||"asc"!==direction&&"desc"!==direction||$scope.sorters.push({property:key,descending:"desc"===direction,direction:i18n.msg("desc"===direction?"core.sorting.descending":"core.sorting.ascending")})}$scope.resetFilter()}$timeout(function(){$scope.$watch("sorters",$scope.applyEnablingWatcher,!0),$scope.$watch("paging.page",$scope.pageWatcher,!0),$scope.$watch("filter",$scope.applyEnablingWatcher,!0),$scope.$watch("requestParams",$scope.applyEnablingWatcher,!0)},500)}}}])}),define("text!core/directives/filters/filteredListActions.tpl.html",[],function(){return'<div class="btn-group pull-right" bindonce="i18n.core">\r\n	<button type="button" class="btn btn-info"\r\n	        ng-click="resetFilter();"\r\n	        bo-title="i18n.core.buttons.clear">\r\n		<i class="icon-remove"></i>\r\n	</button>\r\n	<button type="button" class="btn btn-success"\r\n	        ng-click="applyFilter();"\r\n	        ng-disabled="!applyEnabled"\r\n	        bo-title="i18n.core.buttons.apply">\r\n		<i class="icon-ok"></i>\r\n	</button>\r\n</div>'}),define("core/directives/filters/filteredListActions",["../../moduleDef","text!./filteredListActions.tpl.html"],function(module,tpl){module.directive("filteredListActions",[function(){return{restrict:"A",replace:!0,template:tpl}}])}),define("core/directives/filters/filterNode",["../../moduleDef","angular"],function(module,angular){module.directive("filterNode",["$parse",function($parse){return{restrict:"A",require:"ngModel",link:function($scope,$element,$attrs,ngModelCtrl){var node=$scope.$eval($attrs.filterNode),ngModelGet=$parse($attrs.ngModel),ngModelSet=ngModelGet.assign;if(angular.isObject(node)&&ngModelSet){var value=ngModelGet($scope);if("undefined"==typeof value&&(value=null),node.hasOwnProperty("items")&&node.items.length>0)for(var i=0;i<node.items.length;i++)angular.extend(node.items[i],{value:value});ngModelSet($scope,angular.extend({},node,{value:value}))}ngModelCtrl.$parsers.push(function(value){if("undefined"==typeof value&&(value=null),!angular.isObject(node))return value;if(node.hasOwnProperty("items")&&node.items.length>0)for(var i=0;i<node.items.length;i++)angular.extend(node.items[i],{value:value});return angular.extend({},node,{value:value})}),ngModelCtrl.$formatters.push(function(value){var result=angular.isObject(node)&&angular.isObject(value)&&value.hasOwnProperty("value")?value.value:value;return"undefined"!=typeof result?result:null})}}}])}),define("text!core/directives/filters/filterPersister.tpl.html",[],function(){return'<div bindonce="i18n.core">\r\n	<div class="alert alert-error" ng-show="validation.generalErrors">\r\n		{{ validation.generalErrors }}\r\n	</div>\r\n\r\n	<form class="form form-horizontal" name="saveFilterForm" novalidate>\r\n		<div class="form-group">\r\n			<label class="col-md-3 control-label" bo-text="i18n.core.fields.name"></label>\r\n			<div class="col-md-9">\r\n				<input class="form-control" name="name" type="text" ng-model="saveFilterName" required />\r\n			</div>\r\n		</div>\r\n		<div class="form-group">\r\n			<div class="col-md-offset-3 col-md-9">\r\n				<button class="btn btn-primary" ng-click="saveFilter()" ng-disabled=\'saveFilterForm.$invalid\'\r\n                        bo-text="i18n.core.buttons.save"></button>\r\n			</div>\r\n		</div>\r\n	</form>\r\n\r\n	<form class="form form-horizontal" name="loadFilterForm" novalidate>\r\n		<div class="form-group">\r\n			<label class="col-md-3 control-label" bo-text="i18n.core.fields.name"></label>\r\n			<div class="col-md-9">\r\n				<input type="text" lookup="core/users/lookupFilterNames" lookup-options="{allowClear: true}"\r\n                       bo-attr bo-attr-data-placeholder="i18n.core.filters.placeholders.selectFavorite"\r\n                       ng-model="loadFilterName.lookupEntry" class="form-control" request-params="{ group: group }" required />\r\n			</div>\r\n		</div>\r\n		<div class="form-group">\r\n			<div class="col-md-offset-3 col-md-9">\r\n				<button class="btn btn-success" ng-click="loadFilter()" ng-disabled=\'loadFilterForm.$invalid\'\r\n                        bo-text="i18n.core.buttons.load"></button>\r\n				<button class="btn btn-danger" ng-click="deleteFilter()" ng-disabled=\'loadFilterForm.$invalid\'\r\n                        bo-text="i18n.core.buttons.delete"></button>\r\n			</div>\r\n		</div>\r\n	</form>\r\n</div>\r\n'}),define("core/directives/filters/filterPersister",["../../moduleDef","angular","text!./filterPersister.tpl.html"],function(module,angular,tpl){module.directive("filterPersister",["apinetService","$stateParams",function(apinetService,$stateParams){return{replace:!0,template:tpl,scope:{group:"=",filter:"="},controller:["$scope","$rootScope",function($scope,$rootScope){angular.extend($scope,{i18n:$rootScope.i18n,validation:{generalErrors:[],fieldErrors:{}},saveFilterName:"",loadFilterName:{},saveFilter:function(){apinetService.action({method:"core/users/saveFilter",project:$stateParams.project,name:$scope.saveFilterName,group:$scope.group,filter:angular.fromJson(angular.toJson($scope.filter))}).then(function(result){result.success||angular.extend($scope.validation,result)},function(error){$scope.validation.generalErrors=error})},loadFilter:function(){apinetService.action({method:"core/users/loadFilter",project:$stateParams.project,name:$scope.loadFilterName.lookupEntry?$scope.loadFilterName.lookupEntry.id:null,group:$scope.group}).then(function(result){if(result)for(var key in result)result.hasOwnProperty(key)&&($scope.filter[key]=result[key])},function(error){$scope.validation.generalErrors=error})},deleteFilter:function(){apinetService.action({method:"core/users/deleteFilter",project:$stateParams.project,name:$scope.loadFilterName.lookupEntry?$scope.loadFilterName.lookupEntry.id:null,group:$scope.group}).then(function(){$scope.loadFilterName.lookupEntry=null},function(error){$scope.validation.generalErrors=error})}})}]}}])}),define("text!core/directives/filters/filtersBox.tpl.html",[],function(){return'<div class="row">\r\n	<div class="col-xs-12">\r\n		<ago-box class="filters-box" color="{{ filterApplied ? \'green\' : \'gray\' }}" title-click-collapse collapsed="collapsed">\r\n			<ago-box-title>\r\n                <div style="white-space: nowrap">\r\n                    <label>\r\n                        <i class="fa icon-filter"></i>\r\n                        <i class="fa icon-chevron-sign-down"\r\n                           ng-show="filterApplied && searchNode != null"></i>\r\n                        <span ng-hide="searchNode != null">{{ i18n.core.filters.title }}</span>\r\n                    </label>\r\n                    <input type="text" class="form-control" style="display: inline; margin-left: 5px"\r\n                           placeholder="Search..." ng-show="searchNode != null"\r\n                           ng-click="searchInputClick($event)" ng-keyup="$event.keyCode == 13 && applyFilter()"\r\n                           ng-model="searchModel" filter-node="searchNode">\r\n                </div>\r\n			</ago-box-title>\r\n\r\n			<ago-box-actions>\r\n				<div class="btn-group pull-right" bindonce="i18n.core">\r\n					<button type="button" class="btn btn-danger"\r\n					        ng-click="resetFilterClick($event);"\r\n					        bo-title="i18n.core.buttons.clear">\r\n						<i class="icon-remove"></i>\r\n					</button>\r\n					<button type="button" class="btn btn-success"\r\n					        ng-click="applyFilterClick($event);"\r\n					        ng-disabled="!applyEnabled"\r\n					        bo-title="i18n.core.buttons.apply">\r\n						<i class="icon-ok"></i>\r\n					</button>\r\n				</div>\r\n			</ago-box-actions>\r\n\r\n			<div class="row">\r\n				<div class="col-xs-12 col-lg-6">\r\n					<ago-box color="blue" border="blue" caption="{{ i18n.core.filters.simple }}" title-click-collapse ng-hide="simpleHidden">\r\n						<div ng-transclude></div>\r\n					</ago-box>\r\n				</div>\r\n\r\n				<div class="col-xs-12" ng-class="{\'col-lg-6\': !simpleHidden, \'col-lg-12\': simpleHidden }">\r\n					<div filters-box-more-filters-transclude></div>\r\n\r\n					<ago-box color="green" border="green" caption="{{ i18n.core.filters.complex }}" padding title-click-collapse collapsed="structuredCollapsed">\r\n						<div structured-filter filter-ng-model="filter.complex" meta="meta"></div>\r\n					</ago-box>\r\n\r\n					<ago-box color="orange" border="orange" caption="{{ i18n.core.filters.favorites }}" title-click-collapse collapsed="favoritesCollapsed">\r\n						<div filter-persister group="group" filter="filter"></div>\r\n					</ago-box>\r\n\r\n					<ago-box color="red" border="red" caption="{{ i18n.core.sorting.title }}" padding title-click-collapse collapsed="sortersCollapsed" ng-hide="sortersHidden">\r\n						<div structured-sorters ng-model="sorters" meta="meta" sorters="sorters" expanded="!sortersCollapsed"></div>\r\n					</ago-box>\r\n				</div>\r\n			</div>\r\n		</ago-box>\r\n	</div>\r\n</div>\r\n'
}),define("core/directives/filters/filtersBox",["../../moduleDef","angular","text!./filtersBox.tpl.html"],function(module,angular,tpl){module.directive("filtersBox",[function(){return{restrict:"EA",replace:!0,transclude:!0,template:tpl,scope:{meta:"@",group:"@",filter:"=filtersBox",sorters:"=",applyEnabled:"=",applyFilter:"=",resetFilter:"=",simpleHidden:"=",sortersHidden:"=",filterApplied:"=",searchNode:"=",searchModel:"="},controller:["$scope","$rootScope",function($scope,$rootScope){angular.extend($scope,{i18n:$rootScope.i18n,collapsed:!1,structuredCollapsed:!0,favoritesCollapsed:!0,sortersCollapsed:!0,applyFilterClick:function(e){e&&(e.stopPropagation(),e.preventDefault()),$scope.applyFilter()},resetFilterClick:function(e){e&&(e.stopPropagation(),e.preventDefault()),$scope.resetFilter()},searchInputClick:function(e){e&&(e.stopPropagation(),e.preventDefault())}}),this.$scope=$scope,$scope.$watch("applyEnabled",function(value){value||($scope.collapsed=!0)},!0)}]}}]).directive("filtersBoxMoreFilters",function(){return{restrict:"EA",replace:!0,transclude:!0,template:"",require:"^filtersBox",compile:function(tElement,tAttr,transcludeFn){return function($scope,element,attrs,filtersBoxCtrl){filtersBoxCtrl.moreFiltersContent=transcludeFn(filtersBoxCtrl.$scope.$parent,function(){})}}}}).directive("filtersBoxMoreFiltersTransclude",function(){return{require:"^filtersBox",link:function($scope,element,attrs,filtersBoxCtrl){$scope.$watch(function(){return filtersBoxCtrl.moreFiltersContent},function(value){value&&element.html(angular.element(value))})}}})}),define("text!core/directives/filters/structuredFilter.tpl.html",[],function(){return'<div class="filteringComponent">\r\n	<div class="box-toolbox box-toolbox-top clearfix" bindonce="i18n.core">\r\n		<div class="pull-left btn-group">\r\n			<button class="btn btn-success" bo-title="i18n.core.filters.buttons.newNode" ng-click="addNode()">\r\n				<i class="icon-plus"></i>\r\n			</button>\r\n		</div>\r\n		<div class="pull-right">\r\n			<button class="btn btn-warning" bo-title="i18n.core.buttons.clear" ng-click="clear()">\r\n				<i class="icon-remove-circle icon-white"></i>\r\n                <span bo-text="i18n.core.buttons.clear"></span>\r\n			</button>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row">\r\n		<div class="col-lg-12">\r\n			<div structured-filter-node\r\n			     node="rootNode"\r\n			     root="true"\r\n			     meta="meta"\r\n			     get-parent-metadata="getMetadata(callback)">\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>'}),define("text!core/directives/filters/structuredFilterNode.tpl.html",[],function(){return'<div class="nodePanel" bindonce>\r\n	<form ng-if="!root" class="form-inline nodeData" novalidate ng-class="{ \'hasError\': !context.validation.valid }"\r\n	      ng-mouseenter="context.hover = true;" ng-mouseleave="context.hover = false;">\r\n\r\n		<div class="input-group">\r\n			<span ng-show="context.path.visible" class="input-group-btn btn-group dropdown">\r\n				<button ng-disabled="!context.path.editable" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">\r\n					{{ context.path.displayValue }}\r\n					<span class="caret"></span>\r\n				</button>\r\n				<ul class="dropdown-menu">\r\n					<li ng-repeat="path in context.path.options">\r\n						<a ng-click="nodeUpdated(\'path\', path.value);" bo-text="path.label"></a>\r\n					</li>\r\n				</ul>\r\n			</span>\r\n			<span ng-show="context.add" class="input-group-btn">\r\n				<button class="btn btn-success" bo-title="i18n.core.filters.buttons.newNode"\r\n				        ng-click="addNode()" ng-disabled="!context.add">\r\n					<i class="icon-plus"></i>\r\n				</button>\r\n			</span>\r\n			<span ng-show="context.op.visible" class="input-group-btn btn-group dropdown">\r\n				<button ng-disabled="!context.op.editable" class="btn btn-success dropdown-toggle" data-toggle="dropdown">\r\n					{{ context.op.displayValue }}\r\n				</button>\r\n				<ul class="dropdown-menu">\r\n					<li ng-repeat="op in context.op.options">\r\n						<a ng-click="nodeUpdated(\'op\', op.value);">{{ op.label }}</a>\r\n					</li>\r\n				</ul>\r\n			</span>\r\n			<span ng-show="context.value.visible && context.value.editorType"\r\n			      filter-value-editor="{{ context.value.editorType }}"></span>\r\n			<span ng-show="!context.value.visible || !context.value.editorType">&nbsp;</span>\r\n			<span ng-show="context.delete" class="input-group-btn">\r\n				<button class="btn btn-danger pull-right" bo-title="i18n.core.filters.buttons.deleteNode"\r\n				        ng-click="deleteNode()" ng-disabled="!context.delete">\r\n					<i class="icon-minus"></i>\r\n				</button>\r\n			</span>\r\n		</div>\r\n	</form>\r\n\r\n	<div ng-class="{ nodeChildren: !root }">\r\n        <div class="nodeChildrenContainer"></div>\r\n	</div>\r\n</div>\r\n'}),define("text!core/directives/filters/booleanValueEditor.tpl.html",[],function(){return'<select class="form-control" ng-model="tempValue" ng-change="nodeUpdated(\'value\', tempValue);" bindonce="i18n.core">\r\n	<option value=""></option>\r\n	<option value="true" bo-text="i18n.core.labels.yes"></option>\r\n	<option value="false" bo-text="i18n.core.labels.no"></option>\r\n</select>'}),define("text!core/directives/filters/datetimeValueEditor.tpl.html",[],function(){return'<datetimepicker ng-model="tempValue" ng-change="nodeUpdated(\'value\', value);"></datetimepicker>\r\n'}),define("text!core/directives/filters/dateValueEditor.tpl.html",[],function(){return'<input bs-datepicker class="form-control" ng-model="tempValue" ng-change="nodeUpdated(\'value\', tempValue);" />'}),define("text!core/directives/filters/enumValueEditor.tpl.html",[],function(){return'<select class="form-control"\r\n	ng-options="key as value for (key, value) in context.metadata.PossibleValues"\r\n	ng-model="tempValue" ng-change="nodeUpdated(\'value\', tempValue);">\r\n</select>'}),define("text!core/directives/filters/textValueEditor.tpl.html",[],function(){return'<input class="form-control" ng-model="tempValue" ng-change="nodeUpdated(\'value\', tempValue);" />'}),define("core/directives/filters/structuredFilter",["../../moduleDef","jquery","angular","text!./structuredFilter.tpl.html","text!./structuredFilterNode.tpl.html","text!./booleanValueEditor.tpl.html","text!./datetimeValueEditor.tpl.html","text!./dateValueEditor.tpl.html","text!./enumValueEditor.tpl.html","text!./textValueEditor.tpl.html"],function(module,$,angular,tpl,nodeTpl,booleanEditorTpl,datetimeEditorTpl,dateEditorTpl,enumEditorTpl,textEditorTpl){var editorTpls={};module.directive("structuredFilter",["$compile","filteringService","metadataService",function($compile,$filteringService,$metadataService){return angular.extend(editorTpls,{"boolean":$compile(booleanEditorTpl),datetime:$compile(datetimeEditorTpl),date:$compile(dateEditorTpl),"enum":$compile(enumEditorTpl),text:$compile(textEditorTpl)}),{replace:!0,template:tpl,scope:{rootNode:"=filterNgModel",meta:"="},controller:["$scope","$rootScope",function($scope,$rootScope){angular.extend($scope,{i18n:$rootScope.i18n,getMetadata:function(callback,forceRefresh){return forceRefresh||!$scope.metadata?void $metadataService.modelMetadata($scope.meta,null,function(metadata){$scope.metadata=metadata,callback($scope.metadata)}):void callback($scope.metadata)},addNode:function(){$scope.$broadcast("addRootNode")},clear:function(){$scope.$broadcast("clear")}}),$scope.$watch("rootNode",function(value){value?(value.op="&&",delete value.path,delete value.value,delete value.not,value.items||(value.items=[])):($scope.rootNode={op:"&&",items:[]},$scope.clear())},!1)}]}}]).directive("structuredFilterNode",["filteringService","metadataService","$compile","$filter",function($filteringService,$metadataService,$compile,$filter){var compiledNodeTpl=$compile(nodeTpl);return{replace:!0,scope:{node:"=",root:"@",meta:"=",getParentMetadata:"&"},controller:["$scope","$rootScope",function($scope,$rootScope){$scope.node=$scope.node||{op:"&&",items:[]},$scope.editingNode=angular.extend({},$scope.node),angular.extend($scope,{i18n:$rootScope.i18n,context:{},nodeUpdated:function(property,value){var forceMetadata=!1;property&&$scope.context.hasOwnProperty(property)&&($scope.editingNode[property]=value,"path"===property&&(delete $scope.context.op.options,$scope.editingNode.op="",forceMetadata=!0));var ctx=$scope.context={add:$scope.root,"delete":!$scope.root,hover:!1,validation:{path:[],op:[],value:[],valid:!0},path:{editable:!1,visible:!0},op:{editable:!1,visible:!1},value:{editable:!1,visible:!1,editorType:null}};$scope.root||($scope.getMetadata(function(){$filteringService.afterNodeEdit($scope.editingNode,ctx.metadata);var i;if(!ctx.op.options||!ctx.op.options.length)for(ctx.op.options=$filter("applicableOps")($filteringService.allOps(),ctx.metadata),!$scope.editingNode.op&&ctx.op.options.length&&($scope.editingNode.op=ctx.op.options[0]),i=0;i<ctx.op.options.length;i++)ctx.op.options[i]={value:ctx.op.options[i],label:$filteringService.opDisplayName(ctx.op.options[i])};if(!ctx.path.options||!ctx.path.options.length){for(ctx.path.options=$filteringService.applicablePaths(ctx.parentMeta),i=0;i<ctx.path.options.length;i++)ctx.path.options[i]={value:ctx.path.options[i],label:$filteringService.pathDisplayName(ctx.path.options[i],ctx.parentMeta)};ctx.path.options.sort(function(a,b){return"&&"===a.value||"||"===a.value||"&&!"===a.value?-1:"&&"===b.value||"||"===b.value||"&&!"===b.value?1:a.label>b.label?1:a.label<b.label?-1:0})}var composite=$filteringService.isCompositeNode($scope.editingNode,ctx.metadata),special=$filteringService.isSpecialNode($scope.editingNode);composite||special?(ctx.add=!0,ctx.path.editable=!$scope.editingNode.items||!$scope.editingNode.items.length):(ctx.path.editable=!0,ctx.op.editable=ctx.op.visible=!!$scope.editingNode.path,ctx.value.editable=ctx.value.visible=!!$scope.editingNode.path&&!!$scope.editingNode.op&&!$filteringService.isUnaryNode($scope.editingNode),ctx.value.editable&&(ctx.value.editorType="text",("date"===ctx.metadata.PropertyType||"datetime"===ctx.metadata.PropertyType||"boolean"===ctx.metadata.PropertyType||"enum"===ctx.metadata.PropertyType)&&(ctx.value.editorType=ctx.metadata.PropertyType))),$filteringService.validateNode($scope.editingNode,ctx.metadata,ctx.validation)&&($scope.node=angular.extend({},$scope.editingNode)),$filteringService.beforeNodeEdit($scope.editingNode),ctx.path.displayValue=$filteringService.pathDisplayName($scope.editingNode.path,ctx.parentMeta,ctx.metadata),ctx.op.displayValue=$filteringService.opDisplayName($scope.editingNode.op,$scope.editingNode.not,$scope.node.path),ctx.value.displayValue=$filteringService.valueDisplayName($scope.editingNode.value,ctx.metadata),$scope.editingNode.value&&($scope.tempValue=$scope.editingNode.value)},forceMetadata),property&&$scope.$parent.nodeUpdated())},getMetadata:function(callback,forceRefresh){return forceRefresh||!$scope.context.metadata?void $scope.getParentMetadata({callback:function(parentMeta){$filteringService.getNodeMetadata($scope.meta,$scope.editingNode,parentMeta,function(metadata){$scope.context.metadata=metadata,$scope.context.parentMeta=parentMeta,callback($scope.context.metadata)})}}):void callback($scope.context.metadata)},addNode:function(){$scope.context.add&&($scope.node.items.push({op:"&&",items:[]}),$scope.appendSubNode($scope.node.items.length-1),$scope.nodeUpdated())},deleteNode:function(){if($scope.context.delete){var parentNode=$scope.$parent.node;if(parentNode&&parentNode.items){var index=parentNode.items.indexOf($scope.node);-1!==index&&(parentNode.items.splice(index,1),$scope.$parent.renderSubNodes(),$scope.$parent.nodeUpdated())}}}}),$scope.root&&($scope.$on("addRootNode",function(){$scope.addNode()}),$scope.$on("clear",function(){$scope.node.items=[],$scope.renderSubNodes()}),$scope.$watch("node",function(){$scope.renderSubNodes()},!1)),$scope.nodeUpdated()}],link:function($scope,element){var childrenContainer=$("<div />");$scope.appendSubNode=function(index){$compile(["<div structured-filter-node",'node="node.items['+index+']"','meta="meta"','get-parent-metadata="getMetadata(callback)">',"</div>"].join("\n"))($scope,function(cloned){childrenContainer.append(cloned)})},$scope.renderSubNodes=function(){childrenContainer.html(""),$scope.node=$scope.node||{},$scope.node.items=$scope.node.items||[];for(var i=0;i<$scope.node.items.length;i++)$scope.appendSubNode(i)},compiledNodeTpl($scope,function(cloned){element.replaceWith(cloned),childrenContainer=$(".nodeChildrenContainer",cloned),$scope.renderSubNodes()})}}}]).directive("filterValueEditor",[function(){return{link:function($scope,element,attrs){attrs.$observe("filterValueEditor",function(editorType){var linkFn=editorTpls[editorType];linkFn&&linkFn($scope,function(cloned){element.html(cloned)})})}}}])}),define("text!core/directives/filters/userFilter.tpl.html",[],function(){return'<div class="filteringComponent">\r\n	<div class="box-toolbox box-toolbox-top clearfix" bindonce="i18n.core">\r\n		<div class="pull-left btn-group">\r\n			<button class="btn btn-success" bo-title="i18n.core.filters.buttons.newNode" ng-click="addNode()">\r\n				<i class="icon-plus"></i>\r\n			</button>\r\n		</div>\r\n		<div class="pull-right">\r\n            <div class="btn-group">\r\n                <label class="btn btn-primary" ng-class="{\'active\': rootNode.op === \'&&\'}"\r\n                       ng-click="rootNode.op = \'&&\'">\r\n                    {{ i18n.core.filters.ops.and }}\r\n                </label>\r\n                <label class="btn btn-primary" ng-class="{\'active\': rootNode.op === \'||\'}"\r\n                       ng-click="rootNode.op = \'||\'">\r\n                    {{ i18n.core.filters.ops.or }}\r\n                </label>\r\n            </div>\r\n			<button class="btn btn-warning" bo-title="i18n.core.buttons.clear" ng-click="clear()">\r\n				<i class="icon-remove-circle icon-white"></i>\r\n                <span bo-text="i18n.core.buttons.clear"></span>\r\n			</button>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row">\r\n		<div class="col-lg-12">\r\n			<div ng-repeat="node in rootNode.items">\r\n				<div user-filter-node node="node" root-node="rootNode"></div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>'}),define("text!core/directives/filters/userFilterNode.tpl.html",[],function(){return'<div class="nodePanel">\r\n	<form class="form-inline nodeData row" novalidate ng-class="{ \'hasError\': !context.typeValidation.valid || !context.valueValidation.valid}">\r\n		<div class="col-md-6">\r\n			<span ng-show="context.path.visible">\r\n				<input type="text" lookup="core/dictionary/lookupCustomPropertyTypes" style="width: 100%;"\r\n					ng-model="editingTypeNode.value" placeholder="{{ i18n.core.filters.placeholders.typeNode }}" autofocus required class="form-control" />\r\n			</span>\r\n		</div>\r\n		<div class="col-md-6 input-group">\r\n			<span ng-show="context.op.visible" class="input-group-btn btn-group dropdown">\r\n				<button class="btn btn-success dropdown-toggle pull-left" data-toggle="dropdown">\r\n					{{ context.op.displayValue }}\r\n				</button>\r\n				<ul class="dropdown-menu">\r\n					<li bindonce ng-repeat="op in context.op.options">\r\n						<a ng-click="nodeUpdated(\'op\', op.value);" bo-text="op.label"></a>\r\n					</li>\r\n				</ul>\r\n			</span>\r\n			<span ng-show="context.value.visible && context.value.editorType"\r\n			      filter-value-editor="{{ context.value.editorType }}"></span>\r\n			<span ng-show="!context.value.visible || !context.value.editorType">&nbsp;</span>\r\n			<span class="input-group-btn">\r\n				<button class="btn btn-danger pull-right" bo-title="i18n.core.filters.buttons.deleteNode"\r\n				        ng-click="deleteNode()">\r\n					<i class="icon-minus"></i>\r\n				</button>\r\n			</span>\r\n		</div>\r\n	</form>\r\n</div>\r\n'}),define("core/directives/filters/userFilter",["../../moduleDef","angular","text!./userFilter.tpl.html","text!./userFilterNode.tpl.html","text!./booleanValueEditor.tpl.html","text!./dateValueEditor.tpl.html","text!./textValueEditor.tpl.html"],function(module,angular,tpl,nodeTpl,booleanEditorTpl,dateEditorTpl,textEditorTpl){var editorTpls={};module.directive("userFilter",["$compile",function($compile){return angular.extend(editorTpls,{"boolean":$compile(booleanEditorTpl),date:$compile(dateEditorTpl),text:$compile(textEditorTpl)}),{replace:!0,template:tpl,scope:{rootNode:"=filterNgModel",meta:"="},controller:["$scope","$rootScope",function($scope,$rootScope){angular.extend($scope,{i18n:$rootScope.i18n,addNode:function(){$scope.rootNode.items.push({op:"&&",items:[]})},clear:function(){$scope.rootNode.items=[]},decorateRootNode:function(){delete $scope.rootNode.path,delete $scope.rootNode.value,delete $scope.rootNode.not,$scope.rootNode.items=$scope.rootNode.items||[]}}),$scope.$watch("rootNode",function(value){value||($scope.rootNode={op:"&&"}),$scope.decorateRootNode()},!0)}]}}]).directive("userFilterNode",["$filter","filteringService","metadataService","apinetService","$stateParams",function($filter,$filteringService,metadataService,apinetService,$stateParams){return{replace:!0,scope:{node:"=",rootNode:"="},template:nodeTpl,controller:["$scope","$rootScope",function($scope,$rootScope){$scope.typeNode=$filteringService.ensurePropertyTypeNode($scope.node),$scope.valueNode=$filteringService.ensurePropertyValueNode($scope.node),$scope.editingTypeNode=angular.extend({},$scope.typeNode),$scope.editingValueNode=angular.extend({},$scope.valueNode),angular.extend($scope,{i18n:$rootScope.i18n,context:{},restoring:!1,tempValue:void 0,typeNodeUpdated:function(){return $scope.restoring?void($scope.restoring=!1):void((!$scope.editingTypeNode.value||angular.isObject($scope.editingTypeNode.value))&&$scope.getTypeMetadata(function(typeMetadata){var ctx=$scope.context={typeValidation:{path:[],op:[],value:[],valid:!0},valueValidation:{path:[],op:[],value:[],valid:!0},path:{visible:!0},op:{visible:!1},value:{visible:!1,editorType:"text"}};$filteringService.validateNode($scope.editingTypeNode,typeMetadata,ctx.typeValidation)&&($scope.typeNode=$scope.node.items[0]=angular.extend({},$scope.editingTypeNode),angular.isObject($scope.typeNode.value)&&($scope.typeNode.value=$scope.typeNode.value.id)),$scope.editingValueNode.path=void 0,$scope.editingValueNode.op=void 0,$scope.editingValueNode.value=void 0,$scope.tempValue=void 0,$scope.editingTypeNode.value&&$scope.editingTypeNode.value.id&&$scope.getParameterType($scope.editingTypeNode.value.id,function(pt){pt&&pt.ValueType&&$scope.nodeUpdated("path",pt.ValueType+"Value")})}))},nodeUpdated:function(property,value){var forceMetadata=!1;property&&$scope.context.hasOwnProperty(property)&&($scope.editingValueNode[property]=value,"path"===property&&(delete $scope.context.op.options,$scope.editingValueNode.op="",forceMetadata=!0)),$scope.getValueMetadata(function(valueMetadata){$filteringService.afterNodeEdit($scope.editingValueNode,valueMetadata);var i,ctx=$scope.context;if(!ctx.op.options||!ctx.op.options.length)for(ctx.op.options=$filter("applicableOps")($filteringService.allOps(),valueMetadata),!$scope.editingValueNode.op&&ctx.op.options.length&&($scope.editingValueNode.op=ctx.op.options[0]),i=0;i<ctx.op.options.length;i++)ctx.op.options[i]={value:ctx.op.options[i],label:$filteringService.opDisplayName(ctx.op.options[i])};ctx.value.editorType="text",valueMetadata.PropertyType&&(ctx.op.visible=!0,ctx.value.visible=!$filteringService.isUnaryNode($scope.editingValueNode),("date"===valueMetadata.PropertyType||"datetime"===valueMetadata.PropertyType||"boolean"===valueMetadata.PropertyType||"enum"===valueMetadata.PropertyType)&&(ctx.value.editorType=valueMetadata.PropertyType)),$filteringService.validateNode($scope.editingValueNode,valueMetadata,ctx.validation)&&($scope.valueNode=$scope.node.items[1]=angular.extend({},$scope.editingValueNode)),$filteringService.beforeNodeEdit($scope.editingValueNode),ctx.op.displayValue=$filteringService.opDisplayName($scope.editingValueNode.op,$scope.editingValueNode.not,$scope.node.path),ctx.value.displayValue=$filteringService.valueDisplayName($scope.editingValueNode.value,valueMetadata)},forceMetadata)},getParameterType:function(paramTypeId,callback){apinetService.getModel({method:"core/dictionary/getCustomPropertyType",project:$stateParams.project,id:paramTypeId},function(result){callback(result)})},getTypeMetadata:function(callback){return $scope.typeMetadata?void callback($scope.typeMetadata):void metadataService.modelMetadata("core/dictionary/customPropertyMetadata","AGO.Core.Model.Dictionary.CustomPropertyTypeModel",function(typeMetadata){$scope.typeMetadata=typeMetadata,callback($scope.typeMetadata)})},getValueMetadata:function(callback,forceRefresh){return forceRefresh||!$scope.valueMetadata?void metadataService.modelMetadata("core/dictionary/customPropertyMetadata","AGO.Core.Model.Dictionary.CustomPropertyInstanceModel",function(parentMeta){$filteringService.getNodeMetadata("core/dictionary/customPropertyMetadata",$scope.editingValueNode,parentMeta,function(typeMetadata){$scope.valueMetadata=typeMetadata,callback($scope.valueMetadata)})}):void callback($scope.valueMetadata)},deleteNode:function(){var index=$scope.rootNode.items.indexOf($scope.node);-1!==index&&$scope.rootNode.items.splice(index,1)},restoreState:function(){$scope.restoring=!0,$scope.getParameterType($scope.editingTypeNode.value,function(pt){$scope.editingTypeNode.value={id:pt.Id,text:pt.FullName,ValueType:pt.ValueType},angular.extend($scope.context,{path:{visible:!0},op:{visible:!0},value:{visible:!0}}),$scope.tempValue=$scope.editingValueNode.value,$scope.nodeUpdated("op",$scope.editingValueNode.op),$scope.$watch("editingTypeNode.value",$scope.typeNodeUpdated,!0)})}}),$scope.editingTypeNode.value&&!angular.isObject($scope.editingTypeNode.value)?$scope.restoreState():$scope.$watch("editingTypeNode.value",$scope.typeNodeUpdated,!0)}]}}])}),define("text!core/directives/filters/structuredSorters.tpl.html",[],function(){return'<div class="structuredSorters">\r\n	<div class="row">\r\n		<div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">\r\n			<div>\r\n				<h4 bindonce="i18n.core" bo-text="i18n.core.sorting.sortingFields"></h4>\r\n			</div>\r\n			<div x-lvl-drop-target="true" x-on-drop="dropped(dragEl, dropEl)" style="padding-bottom: 20px;">\r\n				<div ng-repeat="sorter in sorters track by $index" style="margin-bottom: 5px;">\r\n					<button class="btn btn-primary" bindonce="i18n.core" bo-title="sorter.direction" ng-click="switchDirection($event)" property="{{sorter.property}}" x-lvl-draggable="true">\r\n						<span bindonce="sorter.displayName" bo-text="sorter.displayName"></span>\r\n						<span ng-show="!sorter.descending"></span>\r\n						<span ng-show="sorter.descending"></span>\r\n					</button>\r\n					<ago-btn-delete bindonce="i18n.core" bo-title="i18n.core.sorting.removeField" ng-click="remove(sorter.property)"></ago-btn-delete>\r\n				</div>\r\n				<div class="placeholder" ng-hide="sorters.length > 0">Drag sorting fields here</div>\r\n			</div>\r\n		</div>\r\n		<div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">\r\n			<div>\r\n				<h4 bindonce="i18n.core" bo-text="i18n.core.sorting.availableFields"></h4>\r\n			</div>\r\n			<div x-lvl-drop-target="true" x-on-drop="reverted(dragEl, dropEl)">\r\n				<div bindonce ng-repeat="sorter in availableFields" style="margin-bottom: 5px;">\r\n					<button class="btn btn-primary" x-lvl-draggable="true" property="{{sorter.property}}"\r\n                            ng-click="add(sorter.property)" bo-text="sorter.displayName">\r\n					</button>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>'}),define("core/directives/filters/structuredSorters",["../../moduleDef","jquery","angular","text!./structuredSorters.tpl.html"],function(module,$,angular,tpl){module.directive("structuredSorters",["$compile","metadataService",function($compile,$metadataService){return{replace:!0,template:tpl,scope:{meta:"=",sorters:"=",expanded:"="},controller:["$scope","$rootScope","i18n",function($scope,$rootScope,i18n){angular.extend($scope,{i18n:$rootScope.i18n,availableFields:null,sorters:$scope.sorters||[],dropped:function(dragEl){var element=$(dragEl),property=element.attr("property");$scope.moveElement(property,$scope.availableFields,$scope.sorters)},reverted:function(dragEl){var element=$(dragEl),property=element.attr("property");$scope.moveElement(property,$scope.sorters,$scope.availableFields)},add:function(property){$scope.moveElement(property,$scope.availableFields,$scope.sorters)},remove:function(property){$scope.moveElement(property,$scope.sorters,$scope.availableFields)},moveElement:function(property,from,to){var result=null;if(!property)return result;for(var index=-1,i=0;i<from.length;i++)if(from[i].property===property){index=i;break}if(index>=0){var src=from[index],fn=function(){result={property:src.property,displayName:src.displayName,direction:i18n.msg("core.sorting.ascending")},to.push(result),from.splice(index,1)};$rootScope.$$phase?fn():$scope.$apply(fn)}return result},switchDirection:function(event){for(var element=$(event.currentTarget),property=element.attr("property"),sorter=null,i=0;i<$scope.sorters.length;i++)if($scope.sorters[i].property===property){sorter=$scope.sorters[i];break}sorter&&(sorter.descending?delete sorter.descending:sorter.descending=!0,sorter.direction=i18n.msg(sorter.descending?"core.sorting.descending":"core.sorting.ascending"))},processMetadata:function(){$scope.availableFields||$metadataService.modelMetadata($scope.meta,null,function(metadata){if(metadata&&metadata.PrimitiveProperties){$scope.availableFields=[];for(var key in metadata.PrimitiveProperties)if(metadata.PrimitiveProperties.hasOwnProperty(key)){$scope.availableFields.push({property:key,displayName:metadata.PrimitiveProperties[key].DisplayName});for(var i=0;i<$scope.sorters.length;i++){for(var j=0;j<$scope.availableFields.length;j++)if($scope.availableFields[j].property===$scope.sorters[i].property){$scope.availableFields.splice(j,1);break}$scope.sorters[i].property===key&&($scope.sorters[i].displayName=metadata.PrimitiveProperties[key].DisplayName)}}}})}}),$scope.$watch("expanded",function(value){value&&$scope.processMetadata()},!0)}]}}])}),define("text!core/directives/filters/filterLoader.tpl.html",[],function(){return'<div class="input-group">\r\n    <input type="text" lookup="core/users/lookupFilterNames" lookup-options="{allowClear: true}"\r\n           bo-attr bo-attr-data-placeholder="i18n.core.filters.placeholders.selectFavorite"\r\n           ng-model="editables.selected" class="form-control" request-params="{ group: group }" required />\r\n    <span class="input-group-btn">\r\n        <button class="btn btn-success" ng-click="load()" ng-disabled=\'!editables.selected\'>\r\n            <i class="icon-filter"></i>\r\n            <span class="inline-block hidden-xs" bo-text="i18n.core.buttons.load"></span>\r\n        </button>\r\n    </span>\r\n</div>\r\n'}),define("core/directives/filters/filterLoader",["../../moduleDef","angular","text!./filterLoader.tpl.html"],function(module,angular,tpl){module.directive("filterLoader",["apinetService","$stateParams",function(apinetService,$stateParams){return{restrict:"E",replace:!0,template:tpl,scope:{group:"@",filter:"="},controller:["$scope","$rootScope","$controller",function($scope,$rootScope,$controller){$scope.i18n=$rootScope.i18n,angular.extend(this,$controller("ErrorHandlingCtrl",{$scope:$scope})),$scope.editables={selected:null},$scope.load=function(){$scope.editables.selected&&apinetService.action({method:"core/users/loadFilter",project:$stateParams.project,name:$scope.editables.selected.id,group:$scope.group}).then(function(result){if(result)for(var key in result)result.hasOwnProperty(key)&&($scope.filter[key]=result[key])},$scope.handleException)}}]}}])}),define("core/directives/inplace/inlineButtons",["../../moduleDef"],function(module){module.directive("inlineButtons",[function(){return{restrict:"E",replace:!0,template:'<div>	<button type="button" class="btn" ng-show="isChanged" ng-click="cancel()" ng-disabled="!cancelEnabled()" title="{{ i18n.core.buttons.cancel }}">		<i class="icon-reply"></i>	</button>	<button type="button" class="btn" ng-show="isChanged" ng-click="update()" ng-disabled="!updateEnabled()" title="{{ i18n.core.buttons.save }}">		<i class="icon-ok"></i>	</button>	<img ng-show="waiting" class="waiting" /></div>'}}])}),define("core/directives/inplace/inlineDate",["../../moduleDef","jquery"],function(module,$){module.directive("inlineDate",["$timeout",function($timeout){return{restrict:"E",replace:!0,template:function(elm,attr){var viewTmpl='<span ng-hide="editMode" ng-click="edit()" class="editable">{{ '+attr.model+" | date:'"+(attr.dateFormat||"ago_date")+"' }}<inline-none></inline-none></span>",editTmpl='<input type="text" class="form-control '+(attr.inputClass?attr.inputClass+'"':'"')+(attr.hasOwnProperty("required")?' required="required"':"")+(attr.hasOwnProperty("ngRequired")?' ng-required="'+attr.ngRequired+'"':"")+' ng-model="emodel.value" bs-datepicker ng-disabled="waiting"></input>';return'<div inline-edit="'+attr.model+'">'+viewTmpl+'	<form name="editForm" class="form-inline" ng-class="{\'has-error\': editForm.$invalid}" ng-show="editMode" style="width: 100%" novalidate>		<div class="input-group '+(attr.inputCol?attr.inputCol:"")+'" style="padding-left: 0px">'+editTmpl+'			<inline-buttons class="input-group-btn"></inline-buttons>		</div>	</form></div>'},link:function(scope,elm){$timeout(function(){$elm=$("input",elm),$elm.off("blur",scope.onBlur),$elm.on("blur",function(){$timeout(scope.onBlur)})})}}}])}),define("core/directives/inplace/inlineTime",["../../moduleDef","jquery"],function(module,$){module.directive("inlineTime",["$timeout",function($timeout){return{restrict:"E",replace:!0,template:function(elm,attr){var viewTmpl='<span ng-hide="editMode" ng-click="edit()" class="editable">{{ '+attr.model+" | date:'"+(attr.timeFormat||"shortTime")+"' }}<inline-none></inline-none></span>",editTmpl='<input type="text" class="form-control '+(attr.inputClass?attr.inputClass+'"':'"')+(attr.hasOwnProperty("required")?' required="required"':"")+(attr.hasOwnProperty("ngRequired")?' ng-required="'+attr.ngRequired+'"':"")+' ng-model="emodel.value" bs-timepicker data-time-format="HH:mm" data-time-type="string" data-minute-step="1" ng-disabled="waiting"></input>';return'<div inline-edit="'+attr.model+'">'+viewTmpl+'	<form name="editForm" class="form-inline" ng-class="{\'has-error\': editForm.$invalid}" ng-show="editMode" style="width: 100%" novalidate>		<div class="input-group '+(attr.inputCol?attr.inputCol:"")+'" style="padding-left: 0px">'+editTmpl+'			<inline-buttons class="input-group-btn"></inline-buttons>		</div>	</form></div>'},link:function(scope,elm){$timeout(function(){$elm=$("input",elm),$elm.off("blur",scope.onBlur),$elm.on("blur",function(){$timeout(scope.onBlur)})})}}}])}),define("core/directives/inplace/inlineDatetime",["../../moduleDef","jquery"],function(module,$){module.directive("inlineDatetime",["$timeout",function($timeout){return{restrict:"E",replace:!0,template:function(elm,attr){var viewTmpl='<span ng-hide="editMode" ng-click="edit()" class="editable">{{ '+attr.model+" | date:'"+(attr.datetimeFormat||"ago_datetime")+"' }}<inline-none></inline-none></span>",editTmpl='<datetimepicker class="'+(attr.inputClass?attr.inputClass+'"':'"')+(attr.hasOwnProperty("required")?' required="required"':"")+(attr.hasOwnProperty("ngRequired")?' ng-required="'+attr.ngRequired+'"':"")+' ng-model="emodel.value" ng-disabled="waiting"></datetimepicker>';return'<div inline-edit="'+attr.model+'">'+viewTmpl+'	<form name="editForm" class="form-inline" ng-class="{\'has-error\': editForm.$invalid}" ng-show="editMode" style="width: 100%" novalidate>		<div class="input-group '+(attr.inputCol?attr.inputCol:"")+'" style="padding-left: 0px">'+editTmpl+'			<inline-buttons class="input-group-btn"></inline-buttons>		</div>	</form></div>'},link:function(scope,elm){var $dp=$("input[bs-datepicker]",elm),$tp=$("input[bs-timepicker]",elm);
scope.elInput=$dp,$timeout(function(){$dp.off("blur",scope.onBlur),$tp.off("blur",scope.onBlur);var blur=function(){$timeout(function(){$dp.is(":focus")||$tp.is(":focus")||scope.onBlur()})};$dp.on("blur",blur),$tp.on("blur",blur)})}}}])}),requirejs.s.contexts._.nextTick=function(f){f()},require(["css"],function(css){css.addBuffer("core/directives/inplace/inlineEdit.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,define("core/directives/inplace/inlineEdit",["../../moduleDef","angular","css!./inlineEdit.css"],function(module,angular){var safeApply=function(scope,fn){scope.$$phase||scope.$root.$$phase?fn():scope.$apply(fn)};module.directive("inlineNone",function(){return{restrict:"E",replace:!0,template:'<small ng-show="isEmpty() && !editMode" class="text-muted"><em>{{ i18n.core.labels.none }}</em></small>'}}).directive("inlineEdit",["$timeout","$parse","$q",function($timeout,$parse,$q){return{restrict:"A",scope:!0,link:function(scope,element,attr){scope.emodel={original:null,value:null},scope.editMode=!1,scope.isChanged=!1,scope.waiting=!1,scope.elInput=scope.elInput||element.find('input[type!="file"], textarea, select');var callback=function(cb){return cb?$parse(cb)(scope,{val:scope.emodel.value}):!0},unwatch=null;scope.edit=function(){scope.editForm&&scope.editForm.$setPristine();var val=scope.$eval(attr.inlineEdit);scope.emodel.original=angular.copy(val),scope.emodel.value=val,scope.editMode=!0,callback(attr.onBeginEdit),$timeout(function(){scope.elInput.focus()},0,!1),unwatch=scope.$watch("emodel.value",function(){scope.isChanged=!angular.equals(scope.emodel.value,scope.emodel.original),scope.isChanged&&callback(attr.onChanged)},!0)},scope.update=function(){scope.editForm&&scope.editForm.$invalid||(scope.waiting=!0,$q.when(callback(attr.onUpdate)).then(function(result){scope.waiting=!1,angular.isDefined(result)&&result!==!0||(unwatch(),scope.editMode=scope.isChanged=!1)},function(){scope.waiting=!1}))},scope.cancel=function(){unwatch(),callback(attr.onCancel),scope.emodel.value=scope.emodel.original,scope.editMode=scope.isChanged=!1},scope.cancelEnabled=function(){return scope.isChanged&&!scope.waiting},scope.updateEnabled=function(){return scope.isChanged&&!scope.waiting&&!(scope.editForm&&scope.editForm.$invalid)},scope.isEmpty=function(){var value=scope.$eval(attr.inlineEdit);return angular.isUndefined(value)||angular.isArray(value)&&0===value.length||""===value||null===value||value!==value},scope.onBlur=function(){scope.isChanged||safeApply(scope,scope.cancel)},angular.element(scope.elInput).on("keydown",function(e){var isTextArea=$(scope.elInput).is("textarea"),isSubmit=isTextArea?(e.ctrlKey||e.metaKey)&&13===e.keyCode:13===e.keyCode,isEsc=27===e.keyCode;return isSubmit?scope.$apply(scope.update):isEsc&&scope.$apply(scope.cancel),!0}),angular.element(scope.elInput).on("blur",scope.onBlur),attr.initialEditMode&&scope.edit()}}}])}),define("core/directives/inplace/inlineLookup",["../../moduleDef","jquery","jquery/select2"],function(module,$){module.directive("inlineLookup",["$timeout",function($timeout){return{restrict:"E",replace:!0,transclude:!0,template:function(elm,attr){var viewTmpl=attr.hasOwnProperty("multiple")||attr.hasOwnProperty("customView")?'<div style="display: inline-block" ng-transclude></div>':"{{ "+attr.model+".text }}",editTmpl='<input type="text" ng-model="emodel.value" ng-readonly="waiting" lookup="'+attr.inputLookup+'"'+(attr.hasOwnProperty("requestParams")?' request-params="'+attr.requestParams+'"':"")+' class="form-control '+(attr.inputClass?attr.inputClass+'"':'"')+(attr.hasOwnProperty("required")?attr.hasOwnProperty("multiple")?' required-multiple="true"':' ng-required="true"':"")+(attr.hasOwnProperty("ngRequired")?(attr.hasOwnProperty("multiple")?' required-multiple="true"':"")+' ng-required="'+attr.ngRequired+'"':"")+(attr.hasOwnProperty("multiple")?' multiple="multiple"':"")+' lookup-options="{openOnEnter: false'+(attr.inputLookupOptions?", "+attr.inputLookupOptions:"")+'}"'+(attr.placeholder?' placeholder="'+attr.placeholder+'"':"")+"></input>";return'<div inline-edit="'+attr.model+'">	<span ng-hide="editMode" ng-click="edit()" class="editable">'+viewTmpl+'<inline-none></inline-none></span>	<form name="editForm" ng-show="editMode" ng-class="{\'has-error\': editForm.$invalid}" style="width: 100%; margin-bottom: 0px" novalidate>		<div class="input-group '+(attr.inputCol?" "+attr.inputCol:"")+'" style="padding-left: 0px">'+editTmpl+'		<inline-buttons class="input-group-btn" style="vertical-align: top"></inline-buttons>		</div>	</form></div>'},link:function(scope,elm,attr){$timeout(function(){scope.elInput=attr.hasOwnProperty("multiple")?$("input.select2-input",elm):$(".select2-focusser",elm),scope.onFocus=function(){$(this).select2("open")};var $input=$("input",elm);$input.off("blur",scope.onBlur),$input.on("select2-blur",scope.onBlur),$input.on("select2-focus",scope.onFocus),$input.on("select2-opening",function(){$input.off("select2-blur",scope.onBlur),$input.off("select2-focus",scope.onFocus)}),$input.on("select2-close",function(){return $timeout(function(){$input.on("select2-blur",scope.onBlur),$input.on("select2-focus",scope.onFocus),attr.hasOwnProperty("multiple")||scope.onBlur()}),!1})},50)}}}])}),define("core/directives/inplace/inlineText",["../../moduleDef"],function(module){module.directive("inlineText",[function(){return{restrict:"E",replace:!0,template:function(elm,attr){var inpt='<input type="text" class="form-control'+(attr.inputClass?" "+attr.inputClass+'"':'"')+(attr.hasOwnProperty("required")?' required="true"':"")+(attr.hasOwnProperty("ngRequired")?' ng-required="'+attr.ngRequired+'"':"")+(attr.inputPattern?' ng-pattern="'+attr.inputPattern+'"':"")+' ng-model="emodel.value" ng-readonly="waiting"></input>',viewTmpl='<span class="editable" ng-hide="editMode" ng-click="edit()">{{ '+(attr.viewModel||attr.model)+" }}<inline-none></inline-none></span>";return'<div inline-edit="'+attr.model+'">'+viewTmpl+'<form name="editForm" class="form-inline" ng-show="editMode" ng-class="{\'has-error\': editForm.$invalid}" style="width: 100%" novalidate>	<div class="input-group '+(attr.inputCol?attr.inputCol:"")+'" style="padding-left: 0px">'+inpt+'		<inline-buttons class="input-group-btn"></inline-buttons>	</div></form></div>'}}}])}),define("core/directives/inplace/inlineTextArea",["../../moduleDef"],function(module){module.directive("inlineTextArea",[function(){return{restrict:"E",replace:!0,template:function(elm,attr){var viewTmpl='<span class="editable preformatted" ng-hide="editMode" ng-click="edit()">{{ '+attr.model+" }}<inline-none></inline-none></span>";return'<div inline-edit="'+attr.model+'">'+viewTmpl+'<form name="editForm" class="form-inline" ng-show="editMode" ng-class="{\'has-error\': editForm.$invalid}" style="width: 100%" novalidate>	<div class="input-group '+(attr.inputCol?attr.inputCol:"")+'"  style="padding-left: 0px">		<textarea class="form-control '+(attr.inputClass?" "+attr.inputClass+'"':'"')+(attr.inputRows?' rows="'+attr.inputRows+'"':"")+(attr.hasOwnProperty("required")?' required="true"':"")+(attr.hasOwnProperty("ngRequired")?' ng-required="'+attr.ngRequired+'"':"")+' ng-model="emodel.value" ng-readonly="waiting"></textarea>		<inline-buttons class="input-group-btn" style="vertical-align: top"></inline-buttons>	</div></form></div>'}}}])}),define("core/directives/inplace/inlineSelect",["../../moduleDef"],function(module){module.directive("inlineSelect",[function(){return{restrict:"E",replace:!0,template:function(elm,attr){var inpt='<select class="form-control'+(attr.inputClass?" "+attr.inputClass+'"':'"')+(attr.hasOwnProperty("required")?' required="true"':"")+(attr.hasOwnProperty("ngRequired")?' ng-required="'+attr.ngRequired+'"':"")+(attr.options?' ng-options="'+attr.options+'"':"")+' ng-change="update();" ng-model="emodel.value" ng-readonly="waiting"></select>',viewTmpl='<span class="editable" ng-hide="editMode" ng-click="edit()">{{ '+(attr.displayValue||attr.model)+" }}<inline-none></inline-none></span>",tmpl='<div inline-edit="'+attr.model+'"';return attr.initialEditMode&&(tmpl+=' initial-edit-mode="'+attr.initialEditMode+'"'),tmpl+=">"+viewTmpl+'<form name="editForm" class="form-inline" ng-show="editMode" ng-class="{\'has-error\': editForm.$invalid}" style="width: 100%" novalidate>	<div class="input-group '+(attr.inputCol?attr.inputCol:"")+'" style="padding-left: 0px">'+inpt+'		<inline-buttons class="input-group-btn"></inline-buttons>	</div></form></div>'}}}])}),define("core/directives/inplace/inlineCheckbox",["../../moduleDef"],function(module){module.directive("inlineCheckbox",[function(){return{restrict:"E",replace:!0,template:function(elm,attr){var localTrueExp=attr.trueExp||"i18n.core.labels.yes",localFalseExp=attr.falseExp||"i18n.core.labels.no",trueOpt="{v: true, n: "+localTrueExp+"}",falseOpt="{v: false, n: "+localFalseExp+"}",noneOpt="{v: null, n: i18n.core.labels.none}",ngOpts="i.v as i.n for i in ["+(attr.hasOwnProperty("required")?"":noneOpt+",")+trueOpt+","+falseOpt+"]",inpt='<select class="form-control'+(attr.inputClass?" "+attr.inputClass+'"':'"')+(attr.hasOwnProperty("required")?' required="true"':"")+(attr.hasOwnProperty("ngRequired")?' ng-required="'+attr.ngRequired+'"':"")+' ng-change="update();" ng-options="'+ngOpts+'" ng-model="emodel.value" ng-readonly="waiting"></select>',viewExp="!!"+attr.model+" ? "+localTrueExp+" : "+localFalseExp,viewValue="!isEmpty() ? ("+viewExp+') : ""',viewTmpl='<span class="editable" ng-hide="editMode" ng-click="edit()">{{ '+viewValue+" }}<inline-none></inline-none></span>";return'<div inline-edit="'+attr.model+'">'+viewTmpl+'<form name="editForm" class="form-inline" ng-show="editMode" ng-class="{\'has-error\': editForm.$invalid}" novalidate>	<div class="input-group '+(attr.inputCol?attr.inputCol:"")+'" style="padding-left: 0px">'+inpt+'		<inline-buttons class="input-group-btn"></inline-buttons>	</div></form></div>'}}}])}),define("core/directives/inplace/inlineNumber",["../../moduleDef"],function(module){module.directive("inlineNumber",[function(){return{restrict:"E",replace:!0,template:function(elm,attr){var inpt='<input type="number" class="form-control'+(attr.inputClass?" "+attr.inputClass+'"':'"')+(attr.hasOwnProperty("numMin")?' min="'+attr.numMin+'"':"")+(attr.hasOwnProperty("numMax")?' max="'+attr.numMax+'"':"")+(attr.hasOwnProperty("required")?' required="true"':"")+(attr.hasOwnProperty("ngRequired")?' ng-required="'+attr.ngRequired+'"':"")+' ng-model="emodel.value" ng-readonly="waiting"></input>',viewTmpl='<span class="editable" ng-hide="editMode" ng-click="edit()">{{ '+(attr.viewModel||attr.model)+" }}<inline-none></inline-none></span>";return'<div inline-edit="'+attr.model+'">'+viewTmpl+'<form name="editForm" class="form-inline" ng-show="editMode" ng-class="{\'has-error\': editForm.$invalid}" style="width: 100%" novalidate>	<div class="input-group '+(attr.inputCol?attr.inputCol:"")+'" style="padding-left: 0px">'+inpt+'		<inline-buttons class="input-group-btn"></inline-buttons>	</div></form></div>'}}}])}),define("core/directives/inplace/inlineEmail",["../../moduleDef"],function(module){module.directive("inlineEmail",[function(){return{restrict:"E",replace:!0,template:function(elm,attr){var inpt='<input type="email" class="form-control'+(attr.inputClass?" "+attr.inputClass+'"':'"')+(attr.hasOwnProperty("required")?' required="true"':"")+(attr.hasOwnProperty("ngRequired")?' ng-required="'+attr.ngRequired+'"':"")+' ng-model="emodel.value" ng-readonly="waiting"></input>',viewTmpl='<span class="editable" ng-hide="editMode" ng-click="edit()">{{ '+(attr.viewModel||attr.model)+" }}<inline-none></inline-none></span>";return'<div inline-edit="'+attr.model+'">'+viewTmpl+'<form name="editForm" class="form-inline" ng-show="editMode" ng-class="{\'has-error\': editForm.$invalid}" style="width: 100%" novalidate>	<div class="input-group '+(attr.inputCol?attr.inputCol:"")+'" style="padding-left: 0px">'+inpt+'		<inline-buttons class="input-group-btn"></inline-buttons>	</div></form></div>'}}}])}),define("core/directives/inplace/inlineTimespan",["../../moduleDef"],function(module){module.directive("inlineTimespan",[function(){return{restrict:"E",replace:!0,template:function(elm,attr){var inpt='<input type="text" ago-timespan class="form-control'+(attr.inputClass?" "+attr.inputClass+'"':'"')+(attr.hasOwnProperty("required")?' required="true"':"")+(attr.hasOwnProperty("ngRequired")?' ng-required="'+attr.ngRequired+'"':"")+(attr.placeholder?' placeholder="'+attr.placeholder+'"':"")+' ng-model="emodel.value" ng-readonly="waiting"></input>',viewTmpl='<span class="editable" ng-hide="editMode" ng-click="edit()">{{ '+(attr.viewModel||attr.model)+" | agoTimespan }}<inline-none></inline-none></span>";return'<div inline-edit="'+attr.model+'">'+viewTmpl+'<form name="editForm" class="form-inline" ng-show="editMode" ng-class="{\'has-error\': editForm.$invalid}" style="width: 100%" novalidate>	<div class="input-group '+(attr.inputCol?attr.inputCol:"")+'" style="padding-left: 0px">'+inpt+'		<inline-buttons class="input-group-btn"></inline-buttons>	</div></form></div>'}}}])}),define("text!core/directives/header/breadCrumbs.tpl.html",[],function(){return'<ul class="breadcrumb breadcrumbfull-nav" ng-hide="breadcrumbsHidden">\r\n	<li ng-repeat="breadcrumb in breadcrumbs" style="margin-right: 5px">\r\n		<a style="cursor: pointer" ui-sref="{{breadcrumb.url}}">\r\n            {{ i18n[breadcrumb.name] || breadcrumb.name }}\r\n        </a>\r\n		<i class="icon-angle-right" ng-hide="$last"></i>\r\n	</li>\r\n</ul>\r\n'}),define("core/directives/header/breadCrumbs",["../../moduleDef","text!./breadCrumbs.tpl.html"],function(module,tpl){module.directive("breadCrumbs",function(){return{restrict:"A",replace:!0,template:tpl}})}),define("text!core/directives/header/eventNotifier.tpl.html",[],function(){return'<li class="dropdown medium only-icon widget">\r\n    <a href="" ui-sref="page.projects.events">\r\n        <i class="icon-bell"></i>\r\n        <div class="label" ng-show="count">{{ count }}</div>\r\n    </a>\r\n</li>\r\n'}),define("core/directives/header/eventNotifier",["../../moduleDef","text!./eventNotifier.tpl.html"],function(module,tpl){module.directive("eventNotifier",["$rootScope","apinetService","$exceptionHandler","NOTIFICATION_EVENTS",function($rootScope,apinetService,$exceptionHandler,NOTIFICATION_EVENTS){return{template:tpl,restrict:"EA",replace:!0,scope:!0,link:function($scope){$scope.count=0,$rootScope.$on("event:fired",function(){$scope.count++}),$rootScope.$on("event:markAsRead",function(){load()}),$rootScope.$on(NOTIFICATION_EVENTS.RESUME,function(){load()});var load=function(){apinetService.action({method:"core/events/unreadEvents"}).then(function(response){$scope.count=response},$exceptionHandler)};load()}}}])}),define("text!core/directives/header/reportNotifier.tpl.html",[],function(){return'<li class="dropdown light only-icon widget">\r\n	<a href="" ui-sref="page.projects.reports" class="visible-xs" ng-if="!project">\r\n		<i class="icon-print"></i>\r\n\r\n		<div ng-show="reports.count.active > 0 || reports.count.unread > 0" class="label">{{ reports.badgexs() }}</div>\r\n	</a>\r\n	<a ng-href="#!/project/{{project}}/reports" class="visible-xs" ng-if="project">\r\n		<i class="icon-print"></i>\r\n\r\n		<div ng-show="reports.count.active > 0 || reports.count.unread > 0" class="label">{{ reports.badgexs() }}</div>\r\n	</a>\r\n	<a href="" class="dropdown-toggle hidden-xs" data-toggle="dropdown">\r\n		<i class="icon-print"></i>\r\n\r\n		<div ng-show="reports.count.active > 0 || reports.count.unread > 0" class="label">{{ reports.badge() }}</div>\r\n		<span class="caret"></span>\r\n	</a>\r\n	<ul class="dropdown-menu">\r\n		<li ng-show="project">\r\n			<a href="" ng-click="update()" onclick="event.stopPropagation();">\r\n				<div class=\'widget-body\'>\r\n					<div class=\'pull-left icon\'>\r\n						<i ng-class="{\'icon-spin\': reports.updating}" class="icon-refresh"></i>\r\n					</div>\r\n					<div class=\'pull-left text\'>\r\n						{{ i18n.core.buttons.refresh }}\r\n					</div>\r\n				</div>\r\n			</a>\r\n		</li>\r\n		<li ng-show="reports.showActive" class="divider"></li>\r\n		<li ng-show="reports.showActive" class="text-center">{{ i18n.core.reporting.running }}</li>\r\n		<li ng-show="reports.showActive" ng-repeat="r in reports.active">\r\n			<div class=\'widget-body\'>\r\n				<div class=\'pull-left icon\'>\r\n					<ago-report-icon report="r"></ago-report-icon>\r\n				</div>\r\n				<div class=\'pull-left text\'>\r\n					<div class="clearfix">\r\n						<a class="btn btn-sm btn-primary pull-right" ng-show="isInQueue(r)"\r\n							onclick="event.stopPropagation();" title="{{ i18n.core.reporting.position }}">{{\r\n							reports.positions[r.Id] || \'?\' }}</a>\r\n\r\n						<span ng-hide="isInQueue(r)">\r\n							{{r.DataGenerationProgress}}% / {{r.ReportGenerationProgress}}%\r\n						</span>\r\n						{{r.Name}}\r\n						<small class="text-muted">{{ r.Project }}</small>\r\n					</div>\r\n					<div class="clearfix" style="margin-top: 5px">\r\n						<button type="button" ng-click="cancel(r)" onclick="event.stopPropagation();"\r\n							class="btn btn-xs btn-danger pull-right">{{ i18n.core.buttons.cancel }}\r\n						</button>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</li>\r\n		<li ng-show="reports.showCompleted" class="divider"></li>\r\n		<li ng-show="reports.showCompleted" class="text-center">{{ i18n.core.reporting.unread }}</li>\r\n		<li ng-show="reports.showCompleted" ng-repeat="r in reports.completed">\r\n			<div class=\'widget-body\'>\r\n				<div class=\'pull-left icon\'>\r\n					<ago-report-icon report="r"></ago-report-icon>\r\n				</div>\r\n				<div class=\'pull-left text\' ago-report-link report="r">\r\n				</div>\r\n			</div>\r\n		</li>\r\n\r\n		<li class="widget-footer" ng-show="project">\r\n			<a ng-href="#!/project/{{project}}/reports">{{ i18n.core.reporting.viewAllProj }}</a>\r\n		</li>\r\n		<li class="widget-footer">\r\n			<a href="" ui-sref="page.projects.reports">{{ i18n.core.reporting.viewAll }}</a>\r\n		</li>\r\n	</ul>\r\n</li>'}),define("core/directives/header/reportNotifier",["../../moduleDef","angular","text!./reportNotifier.tpl.html"],function(module,angular,tpl){module.directive("reportNotifier",["security","reportService","$timeout","$rootScope","REPORT_EVENTS","REPORT_STATES","$stateParams","NOTIFICATION_EVENTS",function(security,reportService,$timeout,$rootScope,REPORT_EVENTS,REPORT_STATES,$stateParams,NOTIFICATION_EVENTS){return{template:tpl,restrict:"EA",replace:!0,scope:!0,link:function($scope){$scope.reports={count:{active:0,unread:0},active:[],completed:[],positions:{},showActive:!1,showCompleted:!1,updating:!1,badge:function(){var active=this.count.active>9?"9+":this.count.active,unread=this.count.unread>9?"9+":this.count.unread;return active+" / "+unread},badgexs:function(){return this.count.unread>9?"9+":this.count.unread},clear:function(){this.count.active=0,this.count.unread=0,this.active=[],this.completed=[],this.refresh()},refresh:function(){this.showActive=this.active.length>0,this.showCompleted=this.completed.length>0},find:function(id,lookActive){if(!id)return null;for(var reports=lookActive?this.active:this.completed,i=0;i<reports.length;i++)if(reports[i].Id===id)return reports[i];return null},remove:function(id,fromActive){var forDelete=this.find(id,fromActive);if(forDelete){var items=fromActive?this.active:this.completed,idx=items.indexOf(forDelete);return items.splice(idx,1),!0}return!1}};var handleException=function(error){$scope.reports.updating=!1,console.log("Error in report notifier: %s",error)},isRunning=function(report){return report&&report.State&&report.State===REPORT_STATES.NotStarted||report.State===REPORT_STATES.Running};$scope.isInQueue=function(report){return report&&report.State&&report.State===REPORT_STATES.NotStarted},$scope.update=function(){return $scope.project?($scope.reports.updating=!0,void reportService.getTopLastReports($scope.project).then(function(response){$scope.reports.clear(),$scope.reports.count.active=response.active,$scope.reports.count.unread=response.unread;for(var i=0;i<response.reports.length;i++)isRunning(response.reports[i])?$scope.reports.active.push(response.reports[i]):$scope.reports.completed.push(response.reports[i]);$scope.reports.refresh(),$scope.reports.updating=!1,$scope.updatePromise=null},handleException)):void $scope.reports.clear()},$scope.cancel=function(report){reportService.cancelReport(report.ProjectCode,report.Id).then(function(){$scope.reports.remove(report.Id,!0),$scope.reports.refresh()},handleException)},$scope.updatePromise=null,$scope.throttleUpdate=function(){$scope.updatePromise&&$timeout.cancel($scope.updatePromise),$scope.updatePromise=$timeout($scope.update,300)},$scope.merge=function(e,arg){var newReport=arg.report,existed=$scope.reports.find(newReport.Id,!0);return existed?(angular.extend(existed,newReport),void $scope.reports.refresh()):(existed=$scope.reports.find(newReport.Id,!1),existed?(angular.extend(existed,newReport),void $scope.reports.refresh()):void 0)},$rootScope.$on(REPORT_EVENTS.CREATED,$scope.throttleUpdate),$rootScope.$on(REPORT_EVENTS.RUNNED,$scope.merge),$rootScope.$on(REPORT_EVENTS.PROGRESS,$scope.merge),$rootScope.$on(REPORT_EVENTS.COMPLETED,$scope.throttleUpdate),$rootScope.$on(REPORT_EVENTS.ABORTED,$scope.throttleUpdate),$rootScope.$on(REPORT_EVENTS.ERROR,$scope.throttleUpdate),$rootScope.$on(REPORT_EVENTS.CANCELED,$scope.throttleUpdate),$rootScope.$on(REPORT_EVENTS.DELETED,$scope.throttleUpdate),$rootScope.$on(REPORT_EVENTS.DOWNLOADED,$scope.throttleUpdate),$rootScope.$on(NOTIFICATION_EVENTS.RESUME,$scope.throttleUpdate),$scope.project=$stateParams.project,$scope.reports.positions=reportService.getQueuePositions(),$scope.$watch(function(){return reportService.getQueuePositions()},function(newValue){$scope.reports.positions=newValue}),$scope.$watch(function(){return $stateParams.project},function(){$scope.project=$stateParams.project,$scope.update()})}}}])}),define("text!core/directives/header/ago.backBtn.tpl.html",[],function(){return'<a href="" class="btn" ng-click="back()">\r\n    <i class="icon-chevron-left"></i>\r\n    <span class="inline-block hidden-xs" bindonce="i18n.core" bo-text="i18n.core.buttons.back"></span>\r\n</a>\r\n'}),define("core/directives/header/ago.backBtn",["../../moduleDef","text!./ago.backBtn.tpl.html"],function(module,tpl){module.directive("agoBackBtn",["$window",function($window){return{restrict:"EA",replace:!0,template:tpl,link:function(scope){scope.back=function(){$window.history.back()}}}}])}),define("text!core/directives/header/maintenanceNotifier.tpl.html",[],function(){return'<div class="alert" ng-class="{\'alert-danger\': info.inProgress, \'alert-warning\': !info.isProgress}" ng-show="info">\r\n    <i class="icon-exclamation-sign"></i>\r\n    {{ info.msg }}\r\n</div>\r\n'}),define("core/directives/header/maintenanceNotifier",["../../moduleDef","angular","text!./maintenanceNotifier.tpl.html"],function(module,angular,tpl){module.directive("maintenanceNotifier",function(){return{restrict:"E",replace:!0,template:tpl,controller:["$scope","$rootScope",function($scope,$rootScope){var off=$rootScope.$watch("maintenance",function(val){if(!val)return void delete $scope.info;switch(val.action){case"Sheduled":$scope.info={inProgress:!1,msg:$rootScope.i18n.msg("core.maintenance.sheduled",val)};break;case"InProgress":$scope.info={inProgress:!0,msg:$rootScope.i18n.msg("core.maintenance.progress",val)};break;default:delete $scope.info}});$scope.$on("$destroy",off)}]}})}),define("text!core/directives/reporting/ago.reportSelector.tpl.html",[],function(){return'<button type="button" class="btn btn-default" ng-click="open()">\r\n    <i class="icon-print"></i>\r\n    <span class="inline-block hidden-xs" bindonce="i18n.core" bo-text="i18n.core.reporting.selector"></span>\r\n</button>\r\n'}),define("text!core/directives/reporting/ago.reportSelectorModal.tpl.html",[],function(){return'<div class="modal-header">\r\n	<h3>{{ i18n.core.reporting.title }}</h3>\r\n</div>\r\n<div class="modal-body">\r\n	<div class="container">\r\n		<div class="row">\r\n			<div class="col-xs-12">\r\n				<div class="alert alert-danger alert-dismissable" ng-show="error">\r\n					<a class="close" href="" ng-click="clearError()">&times;</a>\r\n					<i class="icon-remove-sign"></i>\r\n					{{ error }}\r\n				</div>\r\n\r\n				<div class="form-group">\r\n					<lable>{{ i18n.core.reporting.report }}</label>\r\n					<select ng-options="s.Name for s in data.settings" ng-model="data.setting" class="form-control"></select>\r\n				</div>\r\n				<div class="form-group">\r\n					<lable>{{ i18n.core.reporting.priority.title }}</label>\r\n					<select ng-model="data.priority" class="form-control">\r\n						<option value="{{ priorities.BY_DATE }}">{{ i18n.core.reporting.priority.byDate }}</option>\r\n						<option value="{{ priorities.BY_USER }}">{{ i18n.core.reporting.priority.byUser }}</option>\r\n					</select>\r\n				</div>\r\n				<div class="form-group">\r\n					<lable>{{ i18n.core.reporting.result }}</label>\r\n					<input type="text" ng-model="data.resultName" class="form-control" />\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n<div class="modal-footer">\r\n	<button class="btn btn-primary" ng-click="ok()" ng-disabled="!valid()">{{ i18n.core.reporting.run }}</button>\r\n	<button class="btn btn-warning" ng-click="cancel()">{{ i18n.core.buttons.cancel }}</button>\r\n</div>'}),define("core/directives/reporting/ago.reportSelector",["../../moduleDef","jquery","angular","text!./ago.reportSelector.tpl.html","text!./ago.reportSelectorModal.tpl.html"],function(module,$,angular,tpl,modalTpl){module.directive("agoReportSelector",["$stateParams","reportService","i18n","$q","$modal","REPORT_PRIORITY_TYPE",function($stateParams,reportService,i18n,$q,$modal,REPORT_PRIORITY_TYPE){return{restrict:"E",replace:!0,template:tpl,scope:{project:"=",types:"=reportTypes",onGetParams:"&",onError:"&"},controller:["$scope","$rootScope",function($scope,$rootScope){$scope.i18n=$rootScope.i18n,$scope.priorities=REPORT_PRIORITY_TYPE}],link:function(scope){var handleError=function(error){return scope.error=error,angular.isFunction(scope.onError)?scope.onError({error:error}):console.log("Error when requesting report settings or run report: "+error),!1};scope.runReport=function(modalResult){var parameters={project:$stateParams.project,settingsId:modalResult.setting.Id,priority:modalResult.priority,resultName:modalResult.resultName,parameters:null},call=null;call=$q.when(angular.isFunction(scope.onGetParams)?scope.onGetParams({settings:modalResult.setting,parameters:parameters}):parameters),call.then(function(){reportService.runReport(parameters).catch(handleError)},handleError)},scope.open=function(){var modalInstance=$modal.open({scope:scope,template:modalTpl,resolve:{settings:function(){return reportService.getReportSettings(scope.project,scope.types).catch(handleError)}},controller:["$scope","$modalInstance","settings",function($scope,$modalInstance,settings){$scope.data={},settings=settings||[],angular.extend($scope.data,{settings:settings,setting:settings.length>0?settings[0]:null,priority:REPORT_PRIORITY_TYPE.BY_DATE,resultName:null}),$scope.ok=function(){$modalInstance.close({setting:$scope.data.setting,priority:$scope.data.priority,resultName:$scope.data.resultName})},$scope.cancel=function(){$modalInstance.dismiss("cancel")},$scope.valid=function(){return $scope.data.setting},$scope.clearError=function(){$scope.error=null}}]});modalInstance.result.then(scope.runReport)}}}}])}),define("text!core/directives/reporting/ago.reportIcon.tpl.html",[],function(){return'<i ng-class="classes()"></i>'}),define("core/directives/reporting/ago.reportIcon",["../../moduleDef","angular","text!./ago.reportIcon.tpl.html"],function(module,angular,tpl){module.directive("agoReportIcon",[function(){return{restrict:"EA",replace:!0,template:tpl,scope:{report:"="},link:function(scope){scope.classes=function(){var r=scope.report;return{"icon-bar-chart":"Running"!==r.State&&"NotStarted"!==r.State,"icon-cog":"Running"===r.State||"NotStarted"===r.State,"icon-spin":"Running"===r.State,"text-success":"Completed"===r.State&&r.ResultUnread===!0,"text-info":"Running"===r.State||"NotStarted"==r.State,"text-error":"Error"===r.State,"text-warning":"Canceled"===r.State}}}}}])}),define("text!core/directives/reporting/ago.reportLink.tpl.html",[],function(){return'<div ng-switch="report.State">\r\n	<a ago-file-link ng-switch-when="Completed"\r\n       name="report.Name" file-name="report.ResultName"\r\n       download-url="downloadUrl()" on-download="onDownload()" on-error="errorCallback({error: error})"\r\n       ng-class="{\'text-success\': report.ResultUnread}"></a>\r\n	<span ng-switch-when="Canceled" class="text-warning">{{ report.Name }}</span>\r\n	<span ng-switch-when="Error" class="text-error">{{ report.Name }}</span>\r\n	<span ng-switch-default class="text-info">{{ report.Name }}</span>\r\n	<small class="text-muted">{{ report.Project }}</small>\r\n</div>\r\n'}),define("core/directives/reporting/ago.reportLink",["../../moduleDef","angular","text!./ago.reportLink.tpl.html"],function(module,angular,tpl){module.directive("agoReportLink",["reportService","$window",function(reportService){return{restrict:"EA",replace:!0,template:tpl,scope:{report:"=",downloadCallback:"&onDownload",errorCallback:"&onError"},link:function(scope){scope.downloadUrl=function(){return reportService.reportDownloadUrl(scope.report.ProjectCode,scope.report.Id)},scope.onDownload=function(){scope.report.ResultUnread=!1,scope.downloadCallback({report:scope.report})}}}}])}),define("text!core/directives/layout/ago.form-static-item.tpl.html",[],function(){return'<div class="form-group col-xs-12" ng-class="{\'col-md-6\': !!!large}">\r\n    <label class="col-xs-12 col-sm-3 col-md-12 control-label">{{ label }}</label>\r\n    <div class="col-xs-12 col-sm-9 col-md-12">\r\n        <p class="form-control-static" ng-transclude=""></p>\r\n    </div>\r\n</div>\r\n'}),define("core/directives/layout/ago.form-static-item",["../../moduleDef","angular","text!./ago.form-static-item.tpl.html"],function(module,angular,tpl){module.directive("agoFormStaticItem",function(){return{restrict:"E",replace:!0,template:tpl,transclude:!0,scope:{label:"=",large:"@"}}})}),define("text!core/directives/layout/ago.form-item.tpl.html",[],function(){return'<div class="form-group col-xs-12" ng-class="{\'has-error\': validation.fieldErrors[field], \'col-md-6\': !!!large}">\r\n    <label class="col-xs-12 col-sm-3 col-md-12 control-label">{{ label }}</label>\r\n    <div class="col-xs-12 col-sm-9 col-md-12">\r\n        <div ng-transclude=""></div>\r\n        <span ng-show="validation.fieldErrors[field]" class="help-block has-error">\r\n            {{ validation.fieldErrors[field] | joinBy }}\r\n        </span>\r\n    </div>\r\n</div>\r\n'}),define("core/directives/layout/ago.form-item",["../../moduleDef","angular","text!./ago.form-item.tpl.html"],function(module,angular,tpl){module.directive("agoFormItem",function(){return{restrict:"E",replace:!0,template:tpl,transclude:!0,scope:{field:"@",label:"=",large:"@",validation:"=vld"}}})}),define("text!core/directives/layout/ago.new-form-item.tpl.html",[],function(){return'<div class="form-group" ng-class="{\'has-error\': control.$invalid || validation.fieldErrors[field]}">\r\n    <label class="col-md-2 control-label">{{ label }}</label>\r\n    <div class="col-md-5" ng-transclude>\r\n    </div>\r\n    <div class="col-md-5">\r\n        <span ng-show="control.$error.required" class="help-block has-error">\r\n            * {{ i18n.core.errors.requiredField }}\r\n        </span>\r\n        <span ng-show="control.$error.pattern" class="help-block has-error">\r\n            * {{ i18n.core.errors.invalidFormat }}\r\n        </span>\r\n        <span ng-show="validation.fieldErrors[field]" class="help-block has-error">\r\n            {{ validation.fieldErrors[field] | joinBy }}\r\n        </span>\r\n    </div>\r\n</div>\r\n'
}),define("core/directives/layout/ago.new-form-item",["../../moduleDef","angular","text!./ago.new-form-item.tpl.html"],function(module,angular,tpl){module.directive("agoNewFormItem",function(){return{restrict:"E",replace:!0,template:tpl,transclude:!0,controller:["$scope","$rootScope",function($scope,$rootScope){$scope.i18n=$rootScope.i18n}],scope:{field:"@",label:"=",control:"=",validation:"=vld"}}})}),define("text!core/directives/layout/ago.new-form-static-item.tpl.html",[],function(){return'<div class="form-group" ng-show="visible">\r\n    <!--Using ng-if breaks transcluded scope inheritance, may be fixed in 1.3-->\r\n    <!--http://stackoverflow.com/questions/22140160/ng-if-in-transcluded-scope-breaks-scope-inheritance-->\r\n    <!--PS: May be ng-if should be in form template (it works, tested), not here, but this very common logic will be-->\r\n    <!--repeated in each place where short info used, ugly-->\r\n    <label class="col-md-2 control-label">{{ label }}</label>\r\n    <div class="col-md-5" ng-transclude></div>\r\n</div>\r\n'}),define("core/directives/layout/ago.new-form-static-item",["../../moduleDef","angular","text!./ago.new-form-static-item.tpl.html"],function(module,angular,tpl){module.directive("agoNewFormStaticItem",function(){return{restrict:"E",replace:!1,template:tpl,transclude:!0,controller:["$scope","$rootScope",function($scope,$rootScope){$scope.i18n=$rootScope.i18n}],scope:{label:"=",visible:"="}}})}),define("text!core/directives/layout/ago.details-item.tpl.html",[],function(){return'<div class="form-group col-xs-12" ng-class="{\'col-lg-6\': !!!large}">\r\n    <label class="col-xs-12 col-lg-12 control-label" ng-class="{\'col-md-4\': !!!large, \'large\': !!large}">{{ label }}</label>\r\n    <div class="col-xs-12 col-lg-12" ng-class="{\'col-md-8\': !!!large}">\r\n        <div ng-transclude></div>\r\n    </div>\r\n</div>\r\n'}),define("core/directives/layout/ago.details-item",["../../moduleDef","angular","text!./ago.details-item.tpl.html"],function(module,angular,tpl){module.directive("agoDetailsItem",function(){return{restrict:"E",replace:!0,template:tpl,transclude:!0,scope:{label:"=",large:"@"}}})}),define("text!core/directives/custom-props/customPropertyEditor.tpl.html",[],function(){return'<div class="input-group" style="padding-left: 0px">\r\n    <!-- string -->\r\n	<input name="str" type="text" class="form-control" placeholder="{{i18n.core.customProps.placeholders.string}}" ng-show="isStr(p.Type)" ng-model="emodel.value" ng-required="isStr(p.Type)"/>\r\n	<!-- number -->\r\n	<input name="num" type="text" class="form-control" placeholder="{{i18n.core.customProps.placeholders.number}}" ng-show="isNum(p.Type)" ng-model="emodel.value" ng-required="isNum(p.Type)" />\r\n    <!-- date -->\r\n    <input name="dt" type="text" class="form-control" placeholder="{{i18n.core.customProps.placeholders.date}}" ng-show="isDate(p.Type)" ng-model="emodel.value" bs-datepicker ng-required="isDate(p.Type)" />\r\n\r\n	<div class="input-group-btn">\r\n		<button type="button" class="btn" ng-show="isChanged" ng-click="cancel()" ng-disabled="!cancelEnabled()" title="{{ i18n.core.buttons.cancel }}">\r\n			<i class="icon-reply"></i>\r\n		</button>\r\n		<button type="button" class="btn" ng-show="isChanged" ng-click="update()" ng-disabled="!cancelEnabled() || hasEditError(p, editForm)" title="{{ i18n.core.buttons.save }}">\r\n			<i class="icon-ok"></i>\r\n		</button>\r\n		<img ng-show="waiting" class="waiting">\r\n	</div>\r\n</div>'}),define("core/directives/custom-props/customPropertyEditor",["../../moduleDef","angular","text!./customPropertyEditor.tpl.html"],function(module,angular,tpl){module.directive("customPropertyEditor",["$timeout",function($timeout){return{restrict:"E",replace:!0,template:tpl,link:function(scope,elm){var $datepicker=$("input[bs-datepicker]",elm);$timeout(function(){$datepicker.off("blur",scope.onBlur),$datepicker.on("blur",function(){$timeout(scope.onBlur)})})}}}])}),define("text!core/directives/custom-props/customPropertiesView.tpl.html",[],function(){return'<div>\r\n<ago-box color="orange" title-click-collapse collapsible="true" large="true" collapsed="collapsed">\r\n	<ago-box-title>\r\n		<i class="icon-table"></i>\r\n		<span bindonce="i18n.core.customProps" bo-text="i18n.core.customProps.title"></span>\r\n	</ago-box-title>\r\n	<ago-box-actions>\r\n		<a class="btn btn-xs btn-link">\r\n			<i class="fa" ng-class="{ \'icon-chevron-up\': !collapsed, \'icon-chevron-down\': collapsed }"></i>\r\n		</a>\r\n	</ago-box-actions>\r\n	<ago-box-content>\r\n		<div class="box-toolbox box-toolbox-top" bindonce="i18n.core.customProps">\r\n			<ago-error-msg></ago-error-msg>\r\n			<form name="form" class="form-inline" novalidate>\r\n				<div class="row" ng-class="{\'has-error\': editables.focused && hasAddError()}">\r\n					<div class="col-sm-5">\r\n						<input name="ptype" type="text" lookup="core/dictionary/lookupCustomPropertyTypes" class="form-control"\r\n                               ng-model="editables.type" ng-required="editables.focused"\r\n                               ng-focus="editables.focused=true" ng-blur="editables.focused=false"\r\n                               bo-attr bo-attr-placeholder="i18n.core.customProps.placeholders.selectType" />\r\n					</div>\r\n					<div class="col-sm-7 input-group">\r\n						<!-- string -->\r\n						<input id="str" name="str" type="text" class="form-control"\r\n                               ng-show="isStr()" ng-model="editables.value" ng-required="isStr() && editables.focused"\r\n                               ng-focus="editables.focused=true" ng-blur="editables.focused=false"\r\n                               bo-attr bo-attr-placeholder="i18n.core.customParams.placeholders.string"/>\r\n						<!-- number -->\r\n						<input id="num" name="num" type="text" class="form-control"\r\n                               ng-show="isNum()" ng-model="editables.value" ng-required="isNum() && editables.focused"\r\n                               ng-focus="editables.focused=true" ng-blur="editables.focused=false" ng-pattern="/^\\d+((\\.|\\,)\\d+)?$/"\r\n                               bo-attr bo-attr-placeholder="i18n.core.customProps.placeholders.number" />\r\n						<!-- date -->\r\n						<input id="dt" name="dt" type="text" class="form-control" bs-datepicker\r\n                               ng-show="isDate()" ng-model="editables.value"  ng-required="isDate() && editables.focused"\r\n                               ng-focus="editables.focused=true"\r\n                               bo-attr bo-attr-placeholder="i18n.core.customProps.placeholders.date" />\r\n                        <!-- ng-blur="editables.focused=false" (this don\'t work, because $apply already in progress\r\n                        and can\'t fix this, so, use another method in link function) -->\r\n						<!-- empty type -->\r\n						<input type="text" class="form-control disabled" ng-hide="editables.type" disabled="true"\r\n                               bo-attr bo-attr-placeholder="i18n.core.customProps.placeholders.selectType" />\r\n\r\n						<div class="input-group-btn">\r\n							<button class="btn btn-success" ng-disabled="hasAddError()" ng-click="add()"\r\n                                    bo-text="i18n.core.buttons.add"></button>\r\n						</div>\r\n					</div>\r\n				</div>\r\n				<div class="row" ng-class="{\'has-error\': isNum() && form.num.$error.pattern}">\r\n					<div class="col-xs-12">\r\n						<span class="help-block" ng-show="isNum() && form.num.$error.pattern"\r\n                              bo-text="i18n.core.customProps.numFormat">\r\n						</span>\r\n					</div>\r\n				</div>\r\n			</form>\r\n		</div>\r\n		<p ng-hide="model.Parameters.length">\r\n			<span class="text-muted" bindonce="i18n.core.customProps" bo-text="i18n.core.customProps.empty"></span>\r\n		</p>\r\n		<table class="table" ng-show="model.Parameters.length" bindonce="i18n.core.customProps">\r\n			<thead>\r\n				<tr>\r\n					<th class="col-xs-4" bo-text="i18n.core.fields.customProperties.type"></th>\r\n					<th bo-text="i18n.core.fields.customProperties.value"></th>\r\n					<th class="onepct">&nbsp;</th>\r\n				</tr>\r\n			</thead>\r\n			<tbody>\r\n				<tr bindonce ng-repeat="p in model.Parameters">\r\n					<td bo-text="p.Type.text"></td>\r\n					<td inline-edit="p.Value" on-update="updateParam(p, val)">\r\n						<span class="editable" ng-hide="editMode" ng-click="edit()">\r\n							{{ valueToString(p) }}\r\n						</span>\r\n						<form name="editForm" class="form-inline" ng-show="editMode"\r\n                              ng-class="{\'has-error\': hasEditError(p, editForm)}" style="width: 100%" novalidate>\r\n							<custom-property-editor></custom-property-editor>\r\n						</form>\r\n					</td>\r\n					<td>\r\n						<ago-btn-delete bo-title="i18n.core.buttons.delete" ng-click="delete(p)"></ago-btn-delete>\r\n					</td>\r\n				</tr>\r\n			</tbody>\r\n		</table>\r\n	</ago-box-content>\r\n</ago-box>\r\n</div>\r\n'}),define("core/directives/custom-props/customPropertiesView",["../../moduleDef","jquery","angular","text!./customPropertiesView.tpl.html"],function(module,$,angular,tpl){module.directive("customProperties",["$rootScope","apinetService","dialogService","$filter","$stateParams","$timeout",function($rootScope,apinetService,dialogService,$filter,$stateParams,$timeout){return{restrict:"E",replace:!0,template:tpl,scope:{model:"=",collapsed:"=",createUrl:"@",updateUrl:"@",deleteUrl:"@"},link:function(scope,elm){scope.i18n=$rootScope.i18n,$(elm).on("blur","#dt",function(){$timeout(function(){scope.editables.focused=!1},10)})},controller:["$scope",function($scope){$scope.editables={type:null,value:null,focused:!1};var isValueTypeMatch=function(needed,type){return type=type||$scope.editables.type,type&&type.ValueType===needed};$scope.$watch("editables.type",function(){$scope.editables.value=null},!0),$scope.isNum=function(type){return isValueTypeMatch("Number",type)},$scope.isStr=function(type){return isValueTypeMatch("String",type)},$scope.isDate=function(type){return isValueTypeMatch("Date",type)},$scope.hasAddError=function(){return null===$scope.editables.type||null===$scope.editables.value||$scope.isStr()&&$scope.form.str.$invalid||$scope.isNum()&&$scope.form.num.$invalid||$scope.isDate()&&$scope.form.dt.$invalid},$scope.hasEditError=function(param,form){return $scope.isStr(param.Type)&&form.str.$invalid||$scope.isNum(param.Type)&&(form.num.$invalid||!/^\d+((\.|\,)\d+)?$/.test(form.num.$viewValue))||$scope.isDate(param.Type)&&form.dt.$invalid},$scope.valueToString=function(param){switch(param.Type.ValueType){case"String":return param.Value;case"Number":return $filter("number")(param.Value);case"Date":return $filter("date")(param.Value,"ago_date");default:return console.log("Error when extract param value: %s - %s",param.Type.ValueType,param.Value),""}},$scope.resetValidation=function(){$scope.validation={}};var handleException=function(error){$scope.resetValidation(),$scope.validation.generalErrors=[error]},handleValidationErrors=function(validation){$scope.resetValidation(),angular.extend($scope.validation,validation)};$scope.add=function(){apinetService.action({method:$scope.createUrl,project:$stateParams.project,ownerId:$scope.model.Id,model:{type:{id:$scope.editables.type.id},value:$scope.editables.value}}).then(function(result){result.validation.success?($scope.editables.type=null,$scope.editables.value=null,$scope.resetValidation(),$scope.model.Parameters.unshift(result.model)):handleValidationErrors(result.validation)},handleException)},$scope.delete=function(param){dialogService.confirm($scope.i18n.msg("core.confirm.delete.title"),$scope.i18n.msg("core.confirm.delete.record")).then(function(){apinetService.action({method:$scope.deleteUrl,project:$stateParams.project,paramId:param.Id}).then(function(){var modelIndex=$scope.model.Parameters.indexOf(param);modelIndex>=0&&$scope.model.Parameters.splice(modelIndex,1)},handleException)})},$scope.updateParam=function(param,val){return param&&val?($scope.resetValidation(),apinetService.action({method:$scope.updateUrl,project:$stateParams.project,ownerId:$scope.model.Id,model:{id:param.Id,value:val}}).then(function(result){result.validation.success?angular.extend(param,result.model):handleValidationErrors(result.validation)},handleException)):null},$scope.resetValidation()}]}}])}),define("text!core/directives/custom-props/customPropTypeHeader.tpl.html",[],function(){return'<tr bindonce="i18n.core">\r\n    <th class="col-xs-12 col-sm-6 col-md-4" bo-text="i18n.core.fields.fullName"></th>\r\n    <th class="col-sm-3 col-md-4 hidden-xs" bo-text="i18n.core.customPropTypes.fields.valueType"></th>\r\n    <th class="col-sm-3 col-md-4 hidden-xs" bo-text="i18n.core.customPropTypes.fields.format"></th>\r\n</tr>\r\n'}),define("core/directives/custom-props/customPropTypeHeader",["../../moduleDef","angular","text!./customPropTypeHeader.tpl.html"],function(module,angular,tpl){module.directive("customPropTypeHeader",function(){return{restrict:"E",replace:!0,template:tpl}})}),define("text!core/directives/custom-props/customPropTypeColumn.tpl.html",[],function(){return'<tr>\r\n    <td class="col-xs-12 col-sm-6 col-md-4">\r\n        <inline-text model="m.Name" view-model="m.FullName" on-update="updateProp(m, \'Name\', val)" on-cancel="onCancel(m)"\r\n                     required></inline-text>\r\n        <span ng-show="m.validation.generalErrors" class="help-block has-error">\r\n            {{ m.validation.generalErrors | joinBy }}\r\n        </span>\r\n        <span ng-show="m.validation.fieldErrors[\'Name\']" class="help-block has-error">\r\n            {{ m.validation.fieldErrors[\'Name\'] | joinBy }}\r\n        </span>\r\n        <small class="visible-xs text-muted">{{ m.ValueType }} {{ m.Format }}</small>\r\n    </td>\r\n    <td class="col-sm-3 hidden-xs">{{ m.ValueType }}</td>\r\n    <td class="col-sm-3 hidden-xs">\r\n        <inline-text model="m.Format" on-update="updateProp(m, \'Format\', val)" on-cancel="onCancel(m)"></inline-text>\r\n    </td>\r\n</tr>\r\n'}),define("core/directives/custom-props/customPropTypeColumn",["../../moduleDef","angular","text!./customPropTypeColumn.tpl.html"],function(module,angular,tpl){module.directive("customPropTypeColumn",function(){return{restrict:"E",replace:!0,template:tpl}})}),define("text!core/directives/custom-props/customPropTypeAddForm.tpl.html",[],function(){return'<form name="createParamTypeForm" class="form form-horizontal" novalidate>\r\n    <!--Parent-->\r\n    <ago-new-form-item label="i18n.core.fields.predecessor" field="Parent" control="createParamTypeForm.Parent" vld="validation">\r\n        <input name="Parent" type="text" class="form-control" ng-model="model.parent"\r\n               lookup="core/dictionary/lookupCustomPropertyTypes"\r\n               placeholder="{{ i18n.core.customPropTypes.placeholders.parent }}">\r\n    </ago-new-form-item>\r\n\r\n    <!--Name-->\r\n    <ago-new-form-item label="i18n.core.fields.name" field="Name" control="createParamTypeForm.Name" vld="validation">\r\n        <input name="Name" type="text" class="form-control" ng-model="model.name" required>\r\n    </ago-new-form-item>\r\n\r\n    <!--ValueType-->\r\n    <ago-new-form-item label="i18n.core.customPropTypes.fields.valueType" field="ValueType"\r\n                       control="createParamTypeForm.ValueType" vld="validation">\r\n        <input name="ValueType" type="text" class="form-control" ng-model="model.type"\r\n               lookup="core/dictionary/lookupCustomPropertyValueTypes" required\r\n               placeholder="{{ i18n.core.customPropTypes.placeholders.type }}">\r\n    </ago-new-form-item>\r\n\r\n    <!--Format-->\r\n    <ago-new-form-item label="i18n.core.customPropTypes.fields.format" field="Format" control="createParamTypeForm.Format"\r\n            vld="validation">\r\n        <input name="Format" type="text" class="form-control" ng-model="model.format">\r\n    </ago-new-form-item>\r\n\r\n    <div class="form-actions form-actions-padding-sm">\r\n        <div class="row">\r\n            <div class="col-md-10 col-md-offset-2" bindonce="i18n.core">\r\n                <button type="button" class="btn" ng-click="onCancel()" bo-text="i18n.core.buttons.cancel"></button>\r\n                <button type="button" class="btn btn-success" ng-click="onUpdate()" bo-text="i18n.core.buttons.save"\r\n                        ng-disabled="createParamTypeForm.$invalid"></button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</form>\r\n'}),define("core/directives/custom-props/customPropTypeAddForm",["../../moduleDef","angular","text!./customPropTypeAddForm.tpl.html"],function(module,angular,tpl){module.directive("customPropTypeAddForm",function(){return{restrict:"E",replace:!0,template:tpl,scope:{model:"=",validation:"=vld",onUpdate:"&",onCancel:"&"},controller:["$scope","$rootScope",function($scope,$rootScope){$scope.i18n=$rootScope.i18n}]}})}),define("text!core/directives/custom-props/customPropsList.tpl.html",[],function(){return'<table class="table" style="margin-bottom: 0">\r\n    <tbody>\r\n    <tr ng-repeat="p in items">\r\n        <td>{{ p.Type.text }}</td>\r\n        <td>{{ valueToString(p) }}</td>\r\n    </tr>\r\n    </tbody>\r\n</table>\r\n'}),define("core/directives/custom-props/customPropsList",["../../moduleDef","angular","text!./customPropsList.tpl.html"],function(module,angular,tpl){module.directive("agoCustomPropsList",function(){return{restrict:"E",replace:!0,template:tpl,scope:{items:"="},controller:["$scope","$filter",function($scope,$filter){$scope.valueToString=function(param){switch(param.Type.ValueType){case"String":return param.Value;case"Number":return $filter("number")(param.Value);case"Date":return $filter("date")(param.Value,"ago_date");default:return console.log("Error when extract param value: %s - %s",param.Type.ValueType,param.Value),""}}}]}})}),define("text!core/directives/hdict/ago.hdictView.tpl.html",[],function(){return'<div bindonce="i18n.core">\r\n    <div class="box-toolbox box-toolbox-top clearfix">\r\n        <ago-error-msg></ago-error-msg>\r\n\r\n        <div class="btn-group pull-left" ng-hide="createFormVisible">\r\n            <button class="btn btn-success" bo-title="i18n.core.buttons.new"\r\n                    ng-click="toggleCreateForm(true)">\r\n                <i class="icon-plus"></i>\r\n            </button>\r\n        </div>\r\n        <div ng-transclude ago-hdict-add-form-transclude></div>\r\n\r\n        <refresher active="indication.loading" on-refresh="refreshList()"></refresher>\r\n        <div class="pull-right" ng-transclude ago-hdict-toolbox-transclude></div>\r\n    </div>\r\n\r\n    <div class="responsive-table">\r\n        <div class="scrollable-area">\r\n            <table class="table table-bordered">\r\n                <thead>\r\n                <tr ago-hdict-header-transclude>\r\n                    <th class="{{ defColClass }}" bo-text="i18n.core.fields.creator"></th>\r\n                    <th class="{{ defColClass }}" bo-text="i18n.core.fields.creationTime"></th>\r\n                    <th class="onepct">&nbsp;</th>\r\n                </tr>\r\n                </thead>\r\n                <tbody>\r\n                <tr ng-repeat="m in models" ago-hdict-column-transclude>\r\n                    <td class="{{ defColClass }}">{{ m.Creator.FullName }}</td>\r\n                    <td class="{{ defColClass }}">{{ m.CreationTime | date:\'ago_datetime\' }}</td>\r\n                    <td class="onepct">\r\n                        <ago-btn-delete bo-title="i18n.core.buttons.delete" ng-click="delete(m)"></ago-btn-delete>\r\n                    </td>\r\n                </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="box-toolbox box-toolbox-bottom">\r\n        <button type="button" class="btn btn-primary" ng-click="paging.page = paging.page + 1" bo-text="i18n.core.buttons.more">\r\n        </button>\r\n\r\n        <refresher active="indication.loading" on-refresh="refreshList()"></refresher>\r\n        <counter></counter>\r\n    </div>\r\n</div>\r\n'}),define("core/directives/hdict/ago.hdictView",["../../moduleDef","angular","jquery","text!./ago.hdictView.tpl.html"],function(module,angular,$,tpl){module.directive("agoHdictView",[function(){return{restrict:"E",replace:!0,transclude:!0,template:tpl,controller:["$scope","$rootScope",function($scope,$rootScope){$scope.i18n=$rootScope.i18n,$scope.defColClass="hidden-xs hidden-sm col-md-2",angular.extend(this,{$scope:$scope,placeholders:{addForm:null,toolbox:null,headerFn:null,columnFn:null}})}],compile:function(elm,attrs){var cnt=$("counter",elm);cnt.attr("action",attrs.counterUrl)}}}]).directive("agoHdictAddForm",[function(){return{require:"^agoHdictView",restrict:"E",replace:!0,template:"",transclude:!0,controller:function(){},compile:function(elm,attrs,transclude){return function(scope,elm,attrs,viewCtrl){viewCtrl.placeholders.addForm=transclude(viewCtrl.$scope,angular.noop)}}}}]).directive("agoHdictAddFormTransclude",[function(){return{require:"^agoHdictView",restrict:"A",link:function(scope,elm,attrs,ctrl){var unwatch=scope.$watch(function(){return ctrl.placeholders.addForm},function(addForm){addForm&&(elm.html(angular.element(addForm)),unwatch())})}}}]).directive("agoHdictToolbox",function(){return{require:"^agoHdictView",restrict:"E",replace:!0,template:"",transclude:!0,controller:function(){},compile:function(elm,attrs,transclude){return function(scope,elm,attrs,viewCtrl){viewCtrl.placeholders.toolbox=transclude(viewCtrl.$scope,angular.noop)}}}}).directive("agoHdictToolboxTransclude",[function(){return{require:"^agoHdictView",restrict:"A",link:function(scope,elm,attrs,ctrl){var unwatch=scope.$watch(function(){return ctrl.placeholders.toolbox},function(toolbox){toolbox&&(elm.html(angular.element(toolbox)),unwatch())})}}}]).directive("agoHdictHeader",function(){return{require:"^agoHdictView",restrict:"E",replace:!0,template:"",transclude:"true",controller:function(){},compile:function(elm,attrs,transclude){return function(scope,elm,attrs,viewCtrl){viewCtrl.placeholders.headerFn=transclude,angular.isDefined(attrs.defColClass)&&(viewCtrl.$scope.defColClass=attrs.defColClass)}}}}).directive("agoHdictHeaderTransclude",[function(){return{require:"^agoHdictView",restrict:"EA",link:function(scope,elm,attrs,ctrl){var unwatch=scope.$watch(function(){return ctrl.placeholders.headerFn},function(headerFn){if(headerFn){var ths=null;headerFn(scope,function(clone){ths=angular.element(clone).children("th")}),elm.prepend(ths),unwatch()}})}}}]).directive("agoHdictColumn",function(){return{require:"^agoHdictView",restrict:"E",replace:!0,template:"",transclude:"true",controller:function(){},link:function(scope,elm,attrs,viewCtrl,transclude){viewCtrl.placeholders.columnFn=transclude}}}).directive("agoHdictColumnTransclude",[function(){return{require:"^agoHdictView",restrict:"EA",link:function(scope,elm,attrs,ctrl){var unwatch=scope.$watch(function(){return ctrl.placeholders.columnFn},function(columnFn){if(columnFn){var tds=null;columnFn(scope,function(clone){tds=angular.element(clone).children("td")}),elm.prepend(tds),unwatch()}})}}}])}),define("text!core/directives/hdict/ago.HdictFullnameHeader.tpl.html",[],function(){return'<tr bindonce="i18n.core">\r\n    <th class="col-xs-12 col-md-10" bo-text="i18n.core.fields.fullName"></th>\r\n</tr>\r\n'}),define("core/directives/hdict/ago.hdictFullnameHeader",["../../moduleDef","angular","text!./ago.HdictFullnameHeader.tpl.html"],function(module,angular,tpl){module.directive("agoHdictFullnameHeader",function(){return{restrict:"E",replace:!0,template:tpl}})}),define("text!core/directives/hdict/ago.HdictFullnameColumn.tpl.html",[],function(){return'<tr>\r\n    <td class="col-xs-12 col-md-10" style="white-space: normal">\r\n        <inline-text model="m.Name" view-model="m.FullName" on-update="updateProp(m, \'Name\', val)" on-cancel="onCancel(m)"\r\n                     required></inline-text>\r\n        <span ng-show="m.validation.generalErrors" class="help-block has-error">\r\n            {{ m.validation.generalErrors | joinBy }}\r\n        </span>\r\n        <span ng-show="m.validation.fieldErrors[\'Name\']" class="help-block has-error">\r\n            {{ m.validation.fieldErrors[\'Name\'] | joinBy }}\r\n        </span>\r\n    </td>\r\n</tr>\r\n'}),define("core/directives/hdict/ago.hdictFullnameColumn",["../../moduleDef","angular","text!./ago.HdictFullnameColumn.tpl.html"],function(module,angular,tpl){module.directive("agoHdictFullnameColumn",function(){return{restrict:"E",replace:!0,template:tpl}})}),define("text!core/directives/hdict/ago.hdictDefaultAddForm.tpl.html",[],function(){return'<form name="createParamTypeForm" class="form form-horizontal" novalidate>\r\n    <!--Parent-->\r\n    <ago-new-form-item label="i18n.core.fields.predecessor" field="Parent" control="createParamTypeForm.Parent" vld="validation">\r\n        <input name="Parent" type="text" class="form-control" ng-model="model.parent"\r\n               placeholder="{{ i18n.core.customPropTypes.placeholders.parent }}">\r\n    </ago-new-form-item>\r\n\r\n    <!--Name-->\r\n    <ago-new-form-item label="i18n.core.fields.name" field="Name" control="createParamTypeForm.Name" vld="validation">\r\n        <input name="Name" type="text" class="form-control" ng-model="model.name" required>\r\n    </ago-new-form-item>\r\n\r\n    <div class="form-actions form-actions-padding-sm">\r\n        <div class="row">\r\n            <div class="col-md-10 col-md-offset-2" bindonce="i18n.core">\r\n                <button type="button" class="btn" ng-click="onCancel()" bo-text="i18n.core.buttons.cancel"></button>\r\n                <button type="button" class="btn btn-success" ng-click="onUpdate()" bo-text="i18n.core.buttons.save"\r\n                        ng-disabled="createParamTypeForm.$invalid"></button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</form>\r\n'}),define("core/directives/hdict/ago.hdictDefaultAddForm",["../../moduleDef","angular","jquery","text!./ago.hdictDefaultAddForm.tpl.html"],function(module,angular,$,tpl){module.directive("agoHdictDefaultAddForm",function(){return{restrict:"E",replace:!0,template:tpl,scope:{model:"=",validation:"=vld",onUpdate:"&",onCancel:"&",bindableParentUrl:"="},controller:["$scope","$rootScope",function($scope,$rootScope){$scope.i18n=$rootScope.i18n}],compile:function(elm,attrs){var il=$('input[name="Parent"]',elm);return il.attr("lookup",attrs.parentUrl),function($scope){$scope.bindableParentUrl&&($scope.action=$scope.bindableParentUrl)}}}})}),define("core/directives/hdict/hdictBaseController",["../../moduleDef","angular"],function(module,angular){module.controller("BaseHDictController",["$scope","$stateParams","i18n","apinetService","dialogService","$controller","createUrl","updateUrl","deleteUrl","newModelFn","afterCreateFn",function($scope,$stateParams,i18n,apinetService,dialogService,$controller,createUrl,updateUrl,deleteUrl,newModelFn,afterCreateFn){angular.extend(this,$controller("ErrorHandlingCtrl",{$scope:$scope})),$scope.createFormVisible=!1,$scope.create=function(){var model=newModelFn();apinetService.action({method:createUrl,project:$stateParams.project,model:model}).then(function(result){result.validation.success?($scope.models.push(result.model),$scope.toggleCreateForm(!1),angular.isFunction(afterCreateFn)&&afterCreateFn()):$scope.validation=result.validation||{}},$scope.handleException)},$scope.delete=function(model){dialogService.confirm(i18n.msg("core.confirm.delete.title"),i18n.msg("core.confirm.delete.record")).then(function(){apinetService.action({method:deleteUrl,project:$stateParams.project,id:model.Id}).then(function(result){if(result.validation.success){if(angular.isArray(result.model))for(var i=0;i<result.model.length;i++)$scope.removeDeletedModel(result.model[i])}else model.validation=result.validation||{}},$scope.handleException)})},$scope.updateProp=function(model,prop,val){var valueProp="id";val=angular.isArray(val)?val.map(function(item){return item[valueProp]}):angular.isObject(val)&&!angular.isDate(val)?val[valueProp]:val;var arg={Id:model.Id,ModelVersion:model.ModelVersion,Prop:prop,Value:val};return apinetService.action({method:updateUrl,project:$stateParams.project,model:arg}).then(function(result){if(result.validation.success){if(angular.isArray(result.model))for(var i=0;i<result.model.length;i++)$scope.extendUpdatedModel(result.model[i])}else model.validation=result.validation||{};return result.validation.success},$scope.handleError)},$scope.onCancel=function(model){model.validation={}},$scope.extendUpdatedModel=function(updatedModel){for(var i=0;i<$scope.models.length;i++)if($scope.models[i].Id===updatedModel.Id){angular.extend($scope.models[i],updatedModel);break}},$scope.removeDeletedModel=function(id){for(var i=0;i<$scope.models.length;i++)if($scope.models[i].Id===id){$scope.models.splice(i,1);break}},$scope.toggleCreateForm=function(visible){$scope.createFormVisible=visible}}])}),define("core/directives/hdict/hdictFullnameController",["../../moduleDef","angular"],function(module,angular){module.controller("BaseHDictFullNameCtrl",["$scope","$controller","actionPrefix","entityType",function($scope,$controller,actionPrefix,entityType){$scope.newModel={parent:null,name:null,clear:function(){this.parent=null,this.name=null}},angular.extend(this,$controller("BaseHDictController",{$scope:$scope,createUrl:actionPrefix+"/create"+entityType,updateUrl:actionPrefix+"/update"+entityType,deleteUrl:actionPrefix+"/delete"+entityType,newModelFn:function(){return{Name:$scope.newModel.name,ParentId:$scope.newModel.parent?$scope.newModel.parent.id:null}},afterCreateFn:function(){$scope.newModel.clear()}}))}])}),define("text!core/directives/project/projectOUs.tpl.html",[],function(){return'<div class="row" id="content-wrapper">\r\n    <div class="col-xs-12">\r\n\r\n        <div class="row">\r\n            <div class="col-xs-12">\r\n                <ago-tabs current-tab="ous" tab-settings="tabs" style="padding-top: 5px"></ago-tabs>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="row">\r\n            <div class="col-xs-12">\r\n                <div filters-box="filter" sorters="sorters" meta="{{ metadataUrl }}" group="{{ filterGroup }}"\r\n                     apply-enabled="applyEnabled" apply-filter="applyFilter" reset-filter="resetFilter" filter-applied="filterApplied" >\r\n                    <form class="form form-horizontal">\r\n                        <div class="form-group">\r\n                            <label class="col-md-3 control-label" bindonce="i18n.core" bo-text="i18n.core.fields.name"></label>\r\n                            <div class="col-md-9">\r\n                                <input type="text" ng-model="filter.simple.Name" filter-node="{path: \'Name\', op:\'like\'}" class="form-control"  />\r\n                            </div>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <ago-box header-class="{hidden: true}">\r\n            <ago-box-content>\r\n                <div class="box-toolbox box-toolbox-top">\r\n                    <ago-error-msg></ago-error-msg>\r\n\r\n                    <form name="addMemberForm" class="form-inline" novalidate>\r\n\r\n                        <div class="input-group select2-bootstrap-append">\r\n                            <input type="text"\r\n                                   ng-model="editables.name"\r\n                                   placeholder="{{ i18n.projects.ous.placeholders.name }}"\r\n                                   class="form-control" />\r\n                            <span class="input-group-btn">\r\n                                <button type="button" class="btn btn-success" ng-click="add()"\r\n                                        ng-disabled="!editables.filled()">\r\n                                    <i class="icon-plus"></i>\r\n                                </button>\r\n                                <refresher active="indication.loading" on-refresh="refreshList()"></refresher>\r\n                            </span>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n\r\n                <div class="responsive-table">\r\n                    <div class="scrollable-area">\r\n                        <table class="table" bindonce="i18n.projects.members">\r\n                            <thead>\r\n                            <tr class="hidden-xs">\r\n                                <th class="col-xs-4" bo-text="i18n.core.fields.name"></th>\r\n                                <th class="col-xs-8" bo-text="i18n.projects.ous.shared"></th>\r\n                                <th class="onepct">&nbsp;</th>\r\n                            </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                            <tr ng-repeat="m in models">\r\n                                <td class="col-xs-4" style="white-space: normal">\r\n                                    <inline-text model="m.Name" input-class="col-xs-12"\r\n                                                 on-cancel="resetModelValidation(m)"\r\n                                                 on-update="onUpdateProp(m, \'Name\', val)"\r\n                                                 required></inline-text>\r\n                                </td>\r\n                                <td class="col-xs-8" style="white-space: normal">\r\n                                    <inline-lookup model="m.Shared" input-class="col-xs-12" input-lookup=""\r\n                                                   on-cancel="resetModelValidation(m)"\r\n                                                   on-update="onUpdateProp(m, \'Shared\', val)"\r\n                                                   required multiple>\r\n                                        <ul class="ous">\r\n                                            <li ng-repeat="s in m.Shared" bindonce bo-text="s.text"></li>\r\n                                        </ul>\r\n                                   </inline-lookup>\r\n\r\n                                </td>\r\n                                <td class="onepct">\r\n                                    <ago-btn-delete class="pull-right" ng-click="remove(m)"\r\n                                        bindonce="i18n.core.buttons" bo-title="i18n.core.buttons.delete">\r\n                                    </ago-btn-delete>\r\n                                </td>\r\n                            </tr>\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="box-toolbox box-toolbox-bottom">\r\n                    <button type="button" class="btn btn-primary" ng-click="paging.page = paging.page + 1">{{ i18n.core.buttons.more }}</button>\r\n\r\n                    <refresher active="indication.loading" on-refresh="refreshList()"></refresher>\r\n                    <counter action=""></counter>\r\n                </div>\r\n            </ago-box-content>\r\n        </ago-box>\r\n\r\n    </div>\r\n</div>\r\n'
}),requirejs.s.contexts._.nextTick=function(f){f()},require(["css"],function(css){css.addBuffer("core/directives/project/ous.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,define("core/directives/project/projectOUs",["../../moduleDef","jquery","angular","text!./projectOUs.tpl.html","css!./ous.css"],function(module,$,angular,tpl){module.directive("agoProjectOus",["$stateParams","apinetService","dialogService","i18n","moduleConfig","$controller",function($stateParams,apinetService,dialogService,i18n,moduleConfig,$controller){return{restrict:"E",replace:!0,template:tpl,compile:function(elm,attrs){var $counter=$("counter",elm);$counter.attr("action",attrs.counterUrl);var $sharedLookup=$('inline-lookup[model="m.Shared"]',elm);return $sharedLookup.attr("input-lookup",attrs.ouLookupUrl),function($scope,elm,attrs){angular.extend(this,$controller("ErrorHandlingCtrl",{$scope:$scope})),$scope.metadataUrl=attrs.metadataUrl,$scope.filterGroup=attrs.filterGroup;var addUrl=attrs.addUrl,removeUrl=attrs.removeUrl,updateUrl=attrs.updateUrl;angular.extend(this,$controller("InlineEditCtrl",{$scope:$scope,project:$stateParams.project,method:updateUrl,afterUpdate:null})),$scope.resetModelValidation=function(model){model.validation={}},$scope.editables={name:null,clear:function(){this.name=null},filled:function(){return this.name}},$scope.remove=function(ou){ou&&dialogService.confirm(i18n.msg("core.confirm.delete.title"),i18n.msg("core.confirm.delete.record")).then(function(){apinetService.action({method:removeUrl,project:$stateParams.project,ouId:ou.Id}).then(function(){var index=$scope.models.indexOf(ou);index>=0&&$scope.models.splice(index,1)},$scope.handleException)})},$scope.add=function(){apinetService.action({method:addUrl,project:$stateParams.project,name:$scope.editables.name}).then(function(response){response.validation.success?($scope.models.unshift(response.model),$scope.editables.clear()):$scope.validation=response.validation},$scope.handleException)}}}}}])}),define("text!core/directives/project/members.tpl.html",[],function(){return'<div class="row" id="content-wrapper">\r\n    <div class="col-xs-12">\r\n\r\n        <div class="row">\r\n            <div class="col-xs-12">\r\n                <ago-tabs current-tab="members" tab-settings="tabs" style="padding-top: 5px"></ago-tabs>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="row">\r\n            <div class="col-xs-12">\r\n                <div filters-box="filter" sorters="sorters" meta="{{ metadataUrl }}" group="{{ filterGroup }}"\r\n                     apply-enabled="applyEnabled" apply-filter="applyFilter" reset-filter="resetFilter" filter-applied="filterApplied" >\r\n                    <form class="form form-horizontal">\r\n                        <div class="form-group">\r\n                            <label class="col-md-3 control-label" bindonce="i18n.core" bo-text="i18n.core.fields.name"></label>\r\n                            <div class="col-md-9">\r\n                                <input type="text" ng-model="filter.simple.Name" filter-node="{path: \'FullName\', op:\'like\'}" class="form-control"  />\r\n                            </div>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <ago-box header-class="{hidden: true}">\r\n            <ago-box-content>\r\n                <div class="box-toolbox box-toolbox-top">\r\n                    <ago-error-msg></ago-error-msg>\r\n\r\n                    <!--Disabled by #301, because of only via invite project admin must add members-->\r\n                    <!--<div class="row">-->\r\n                        <!--<div class="col-xs-12">-->\r\n                            <!--<form name="addMemberForm" class="form-inline" novalidate>-->\r\n                                <!--<div class="row">-->\r\n                                    <!--<div class="col-xs-12">-->\r\n                                        <!--<div class="input-group select2-bootstrap-append">-->\r\n                                            <!--<input type="text" name="member" lookup="core/users/lookupUsers"-->\r\n                                                   <!--ng-model="editables.newMember"-->\r\n                                                   <!--placeholder="{{ i18n.projects.members.placeholders.newMember }}"-->\r\n                                                   <!--class="form-control" />-->\r\n                                            <!--<span class="input-group-btn">-->\r\n                                                <!--<button type="button" class="btn btn-success" ng-click="add()"-->\r\n                                                        <!--ng-disabled="!editables.filled()">-->\r\n                                                    <!--<i class="icon-plus"></i>-->\r\n                                                <!--</button>-->\r\n                                                <!--<refresher active="indication.loading" on-refresh="refreshList()"></refresher>-->\r\n                                            <!--</span>-->\r\n                                        <!--</div>-->\r\n                                    <!--</div>-->\r\n                                <!--</div>-->\r\n                                <!--<div class="row">-->\r\n                                    <!--<div class="col-xs-12 col-sm-6">-->\r\n                                        <!--<input type="text" name="ou" lookup=""-->\r\n                                               <!--ng-model="editables.newOU"-->\r\n                                               <!--placeholder="{{ i18n.projects.members.placeholders.ou }}"-->\r\n                                               <!--class="form-control">-->\r\n                                    <!--</div>-->\r\n                                    <!--<div class="col-xs-12 col-sm-6">-->\r\n                                        <!--<div class="btn-group">-->\r\n                                            <!--<label ng-repeat="r in roles" bindonce class="btn btn-primary"-->\r\n                                                   <!--ng-class="{\'active\': editables.active(r)}"-->\r\n                                                   <!--ng-click="editables.toggle(r)"-->\r\n                                                   <!--bo-text="r.text">-->\r\n                                            <!--</label>-->\r\n                                        <!--</div>-->\r\n                                    <!--</div>-->\r\n                                <!--</div>-->\r\n                            <!--</form>-->\r\n                        <!--</div>-->\r\n                    <!--</div>-->\r\n                </div>\r\n\r\n                <div class="responsive-table">\r\n                    <div class="scrollable-area">\r\n                        <table class="table" bindonce="i18n.projects.members">\r\n                            <thead>\r\n                            <tr>\r\n                                <th class="col-xs-3" bo-text="i18n.projects.members.fields.user"></th>\r\n                                <th class="col-xs-2" bo-text="i18n.projects.members.fields.suffix"></th>\r\n                                <th class="col-xs-4" bo-text="i18n.projects.members.fields.current"></th>\r\n                                <th class="col-xs-1" bo-text="i18n.projects.members.fields.active"></th>\r\n                                <th class="col-xs-2">&nbsp;</th>\r\n                            </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                            <tr bindonce ng-repeat-start="m in models" ng-class="{\'text-muted\': !m.Active}">\r\n                                <td class="col-xs-3" style="white-space: normal" bo-text="m.FullName"></td>\r\n                                <td class="col-xs-2" style="white-space: normal">\r\n                                    <inline-text model="m.NameSuffix" input-col="col-xs-12"\r\n                                                 on-update="onUpdateProp(m, \'NameSuffix\', val)"\r\n                                                 on-cancel="onCancelProp()"></inline-text>\r\n                                </td>\r\n                                <td class="col-xs-4" style="white-space: normal">\r\n                                    <ago-project-member-current-editor member="m" role-lookup-url="" ou-lookup-url=""\r\n                                       on-cancel="resetModelValidation(member)" on-update="changeCurrent(member, current)">\r\n                                    </ago-project-member-current-editor>\r\n                                </td>\r\n                                <td class="col-xs-1">\r\n                                    <inline-checkbox model="m.Active"\r\n                                                     on-update="onUpdateProp(m, \'Active\', val)"\r\n                                                     on-cancel="onCancelProp()"></inline-checkbox>\r\n                                </td>\r\n                                <td class="col-xs-2">\r\n                                    <ago-btn-delete class="pull-right" style="margin-left: 5px"\r\n                                        bindonce="i18n.core.buttons" bo-title="i18n.core.buttons.delete"\r\n                                        ng-click="remove(m)"></ago-btn-delete>\r\n                                    <details-btn class="pull-right" open="m.expanded" toggle="toggle(m)">\r\n                                    </details-btn>\r\n                                </td>\r\n                            </tr>\r\n                            <tr ng-repeat-end ng-show="m.expanded">\r\n                                <td colspan="3">\r\n                                    <div class="responsive-table">\r\n                                        <div class="scrollable-area">\r\n                                            <span ng-show="m.validation.generalErrors" class="help-block alert-danger">\r\n                                                {{ m.validation.generalErrors | joinBy }}\r\n                                            </span>\r\n                                            <ago-project-member-permissions member="m" ou-lookup-url="" roles-loolup-url=""\r\n                                                    on-cancel="resetModelValidation(member)"\r\n                                                    on-update="changeRoles(member, ou, roles)"\r\n                                                    on-add="addPermission(member, ou, roles)"\r\n                                                    on-remove="removePermission(member, permission)">\r\n                                            </ago-project-member-permissions>\r\n                                        </div>\r\n                                    </div>\r\n                                </td>\r\n                            </tr>\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="box-toolbox box-toolbox-bottom">\r\n                    <button type="button" class="btn btn-primary" ng-click="paging.page = paging.page + 1">{{ i18n.core.buttons.more }}</button>\r\n\r\n                    <refresher active="indication.loading" on-refresh="refreshList()"></refresher>\r\n                    <counter action=\'tasks/project/getMembersCount\'></counter>\r\n                </div>\r\n            </ago-box-content>\r\n        </ago-box>\r\n\r\n    </div>\r\n</div>\r\n'}),requirejs.s.contexts._.nextTick=function(f){f()},require(["css"],function(css){css.addBuffer("core/directives/project/roles.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,define("core/directives/project/members",["../../moduleDef","jquery","angular","text!./members.tpl.html","css!./roles.css"],function(module,$,angular,tpl){module.directive("agoProjectMembers",["$stateParams","apinetService","dialogService","i18n","moduleConfig","$controller",function($stateParams,apinetService,dialogService,i18n,moduleConfig,$controller){return{restrict:"E",replace:!0,template:tpl,compile:function(elm,attrs){var $mou=$('input[name="ou"]',elm);$mou.attr("lookup",attrs.ouLookupUrl);var $mce=$("ago-project-member-current-editor",elm);$mce.attr("role-lookup-url",attrs.roleLookupUrl),$mce.attr("ou-lookup-url",attrs.ouLookupUrl);var $mp=$("ago-project-member-permissions",elm);return $mp.attr("roles-lookup-url",attrs.roleLookupUrl),$mp.attr("ou-lookup-url",attrs.ouLookupUrl),function($scope,elm,attrs){angular.extend(this,$controller("ErrorHandlingCtrl",{$scope:$scope})),angular.extend(this,$controller("InlineEditCtrl",{$scope:$scope,project:$stateParams.project,method:attrs.updateUrl,afterUpdate:null})),moduleConfig.getRoles($stateParams.project).then(function(roles){$scope.roles=roles}),$scope.metadataUrl=attrs.metadataUrl,$scope.filterGroup=attrs.filterGroup;var removeUrl=(attrs.addUrl,attrs.removeUrl),changeCurrentUrl=attrs.changeCurrentUrl,addPermissionUrl=attrs.addPermissionUrl,removePermissionUrl=attrs.removePermissionUrl,changeRolesUrl=attrs.changeRolesUrl;$scope.resetModelValidation=function(model){model.validation={}},$scope.editables={newMember:null,newOU:null,roles:[],toggle:function(role){var index=this.roles.indexOf(role);index>=0?this.roles.splice(index,1):this.roles.push(role)},active:function(role){return this.roles.indexOf(role)>=0},clear:function(){this.newMember=null,this.newOU=null,this.roles=[]},filled:function(){return null!=this.newMember&&null!=this.newOU&&this.roles.length>0}},$scope.remove=function(member){member&&dialogService.confirm(i18n.msg("core.confirm.delete.title"),i18n.msg("core.confirm.delete.record")).then(function(){apinetService.action({method:removeUrl,project:$stateParams.project,memberId:member.Id}).then(function(){var index=$scope.models.indexOf(member);index>=0&&$scope.models.splice(index,1)},$scope.handleException)})},$scope.add=function(){},$scope.changeCurrent=function(member,current){return member&&current?apinetService.action({method:changeCurrentUrl,project:$stateParams.project,memberId:member.Id,ouId:current.ou.id,role:current.role.id}).then(function(response){return response.validation.success?(angular.extend(member,response.model),$scope.resetModelValidation(member)):member.validation=response.validation,response.validation.success},$scope.handleException):!1},$scope.toggle=function(member){member.expanded=!member.expanded},$scope.changeRoles=function(member,ou,roles){return member&&ou&&roles?apinetService.action({method:changeRolesUrl,project:$stateParams.project,memberId:member.Id,ouId:ou.id,roles:roles.map(function(r){return r.id})}).then(function(response){return response.validation.success?(angular.extend(member,response.model),$scope.resetModelValidation(member)):member.validation=response.validation,response.validation.success},$scope.handleException):!1},$scope.addPermission=function(member,ou,roles){return member&&ou&&roles?apinetService.action({method:addPermissionUrl,project:$stateParams.project,memberId:member.Id,ouId:ou.id,roles:roles.map(function(r){return r.id})}).then(function(response){return response.validation.success?(angular.extend(member,response.model),$scope.resetModelValidation(member)):member.validation=response.validation,response.validation.success},$scope.handleException):!1},$scope.removePermission=function(member,perm){member&&perm&&dialogService.confirm(i18n.msg("core.confirm.delete.title"),i18n.msg("core.confirm.delete.record")).then(function(){apinetService.action({method:removePermissionUrl,project:$stateParams.project,memberId:member.Id,ouId:perm.OrgUnit.id}).then(function(response){return response.validation.success?(angular.extend(member,response.model),$scope.resetModelValidation(member)):member.validation=response.validation,response.validation.success},$scope.handleException)})}}}}}])}),define("text!core/directives/project/memberCurrentSelector.tpl.html",[],function(){return'<div bindonce="i18n.projects.members">\r\n    <div class="form-group">\r\n        <label class="col-sm-2 control-label" bo-text="i18n.projects.members.fields.role"></label>\r\n        <div class="col-xs-12 col-sm-10">\r\n            <input name="role" type="text" class="form-control" ng-model="current.role" required="true"\r\n                   bo-attr bo-attr-placeholder="i18n.projects.members.placeholders.role"\r\n                   lookup="" lookup-options="{allowClear: true}"\r\n                   request-params="{memberId: memberId, ouId: currentOUId()}">\r\n        </div>\r\n    </div>\r\n    <div class="form-group">\r\n        <label class="col-sm-2 control-label" bo-text="i18n.projects.members.fields.ou"></label>\r\n        <div class="col-xs-12 col-sm-10">\r\n            <input name="ou" type="text" class="form-control" ng-model="current.ou" required="true"\r\n                   bo-attr bo-attr-placeholder="i18n.projects.members.placeholders.ou"\r\n                   lookup="" lookup-options="{allowClear: true}"\r\n                   request-params="{memberId: memberId, role: currentRole()}">\r\n        </div>\r\n    </div>\r\n</div>\r\n'}),define("core/directives/project/memberCurrentSelector",["../../moduleDef","jquery","angular","text!./memberCurrentSelector.tpl.html"],function(module,$,angular,tpl){module.directive("agoProjectMemberCurrentSelector",function(){return{restrict:"E",replace:!0,template:tpl,compile:function(elm,attrs){var $roleLookup=$('input[name="role"]',elm),$ouLookup=$('input[name="ou"]',elm);$roleLookup.attr("lookup",attrs.roleLookupUrl),$ouLookup.attr("lookup",attrs.ouLookupUrl)},scope:{current:"=",memberId:"="},controller:["$scope","$rootScope",function($scope,$rootScope){$scope.i18n=$rootScope.i18n,$scope.currentOUId=function(){return $scope.current&&$scope.current.ou?$scope.current.ou.id:null},$scope.currentRole=function(){return $scope.current&&$scope.current.role?$scope.current.role.id:null}}]}})}),define("text!core/directives/project/memberCurrentEditor.tpl.html",[],function(){return'<div>\r\n    <div inline-edit="tuple" on-cancel="doCancel()" on-update="doUpdate(val)">\r\n        <span class="editable" ng-hide="editMode" ng-click="edit()">\r\n            {{member.CurrentRole.text}} &ndash; {{member.CurrentOrgUnit.text}}\r\n        </span>\r\n        <form name="editForm" role="form" class="form-horizontal" ng-show="editMode" ng-class="{\'has-error\': editForm.$invalid}" novalidate>\r\n            <div class="form-group"\r\n                 ng-if="member.validation.fieldErrors[\'CurrentOU\'] || member.validation.fieldErrors[\'CurrentRole\']">\r\n                <div class="col-xs-12">\r\n                    <span ng-if="member.validation.fieldErrors[\'CurrentOU\']" class="help-block alert-danger">\r\n                        {{ member.validation.fieldErrors[\'CurrentOU\'] | joinBy }}\r\n                    </span>\r\n                    <span ng-if="member.validation.fieldErrors[\'CurrentRole\']" class="help-block alert-danger">\r\n                        {{ member.validation.fieldErrors[\'CurrentRole\'] | joinBy }}\r\n                    </span>\r\n                </div>\r\n            </div>\r\n            <ago-project-member-current-selector current="tuple" member-id="member.Id" ></ago-project-member-current-selector>\r\n            <div class="form-group">\r\n                <div class="col-xs-12 col-sm-offset-2 col-sm-10" bindonce="i18n.core">\r\n                    <img ng-show="waiting" class="waiting" />\r\n                    <button type="button" class="btn btn-default" bo-text="i18n.core.buttons.cancel"\r\n                            ng-click="cancel()" ng-disabled="waiting">\r\n                    </button>\r\n                    <button type="button" class="btn btn-success" bo-text="i18n.core.buttons.ok"\r\n                            ng-click="update()" ng-disabled="!updateEnabled()">\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </form>\r\n    </div>\r\n</div>\r\n'}),define("core/directives/project/memberCurrentEditor",["../../moduleDef","jquery","angular","text!./memberCurrentEditor.tpl.html"],function(module,$,angular,tpl){module.directive("agoProjectMemberCurrentEditor",["$timeout",function($timeout){return{restrict:"E",replace:!0,template:tpl,compile:function(elm,attrs){var $currentSelector=$("ago-project-member-current-selector",elm);return $currentSelector.attr("role-lookup-url",attrs.roleLookupUrl),$currentSelector.attr("ou-lookup-url",attrs.ouLookupUrl),function($scope,iElm){$timeout(function(){$('input[name="role"],input[name="ou"]',iElm).off("blur")})}},scope:{member:"=",onCancel:"&",onUpdate:"&"},controller:["$scope","$rootScope",function($scope,$rootScope){$scope.i18n=$rootScope.i18n,$scope.$watch("member",function(){$scope.member&&($scope.tuple={ou:$scope.member.CurrentOrgUnit,role:$scope.member.CurrentRole})}),$scope.doCancel=function(){$scope.onCancel({member:$scope.member})},$scope.doUpdate=function(val){return $scope.onUpdate({member:$scope.member,current:val})}}]}}])}),define("text!core/directives/project/memberPermissions.tpl.html",[],function(){return'<table class="table table-bordered">\r\n    <thead bindonce="i18n.projects.members">\r\n    <tr ng-if="!newPerm.addMode">\r\n        <th class="col-xs-6" bo-text="i18n.projects.members.fields.ou"></th>\r\n        <th class="col-xs-6" bo-text="i18n.projects.members.fields.roles"></th>\r\n        <th class="onepct">\r\n            <button type="button" class="btn btn-sm btn-success" ng-click="newPerm.toggle()">\r\n                <i class="icon-plus"></i>\r\n            </button>\r\n        </th>\r\n    </tr>\r\n    <tr ng-if="newPerm.addMode">\r\n        <th colspan="3">\r\n            <form name="addForm" class="form-inline" ng-class="{\'has-error\': addForm.$invalid }" novalidate>\r\n                <div class="col-sm-5" style="padding-left: 0; padding-right: 0">\r\n                    <input name="ou" type="text" class="form-control" ng-model="newPerm.ou" required="true"\r\n                           bo-attr bo-attr-placeholder="i18n.projects.members.placeholders.ou"\r\n                           lookup="">\r\n                </div>\r\n                <div class="col-sm-5" style="padding-left: 0; padding-right: 0">\r\n                    <input name="roles" type="text" class="form-control" ng-model="newPerm.roles" required="true"\r\n                           multiple="true" lookup=""\r\n                           bo-attr bo-attr-placeholder="i18n.projects.members.placeholders.roles">\r\n                </div>\r\n                <div class="col-sm-2" style="padding-left: 0">\r\n                    <button type="button" class="btn" ng-click="newPerm.toggle()">\r\n                        <i class="icon-reply"></i>\r\n                    </button>\r\n                    <button type="button" class="btn" ng-click="doAdd()" ng-disabled="!newPerm.filled()">\r\n                        <i class="icon-ok"></i>\r\n                    </button>\r\n                </div>\r\n            </form>\r\n        </th>\r\n    </tr>\r\n    </thead>\r\n    <tbody>\r\n    <tr ng-repeat="p in member.Permissions">\r\n        <td class="col-xs-6">{{ p.OrgUnit.text }}</td>\r\n        <td class="col-xs-6">\r\n            <inline-lookup model="p.Roles" multiple required input-lookup=""\r\n                           on-cancel="doCancel()" on-update="doUpdate(p, val)">\r\n                <ul class="roles">\r\n                    <li ng-repeat="r in p.Roles" bindonce="" bo-text="r.text"></li>\r\n                </ul>\r\n            </inline-lookup>\r\n\r\n        </td>\r\n        <td>\r\n            <ago-btn-delete bindonse="i18n.core.buttons" bo-title="i18n.core.buttons.delete"\r\n                            ng-click="doRemove(p)"></ago-btn-delete>\r\n        </td>\r\n    </tr>\r\n    </tbody>\r\n</table>\r\n'}),define("core/directives/project/memberPermissions",["../../moduleDef","jquery","angular","text!./memberPermissions.tpl.html"],function(module,$,angular,tpl){module.directive("agoProjectMemberPermissions",function(){return{restrict:"E",replace:!0,template:tpl,compile:function(elm,attrs){var $rolesLookup=$("inline-lookup",elm),$ouSelector=$('input[name="ou"]',elm),$rolesSelector=$('input[name="roles"]',elm);$rolesLookup.attr("input-lookup",attrs.rolesLookupUrl),$ouSelector.attr("lookup",attrs.ouLookupUrl),$rolesSelector.attr("lookup",attrs.rolesLookupUrl)},scope:{member:"=",onCancel:"&",onUpdate:"&",onAdd:"&",onRemove:"&"},controller:["$scope","$rootScope","$q",function($scope,$rootScope,$q){$scope.i18n=$rootScope.i18n,$scope.doCancel=function(){$scope.onCancel({member:$scope.member})},$scope.doUpdate=function(permission,roles){return $scope.onUpdate({member:$scope.member,ou:permission.OrgUnit,roles:roles})},$scope.newPerm={ou:null,roles:[],addMode:!1,toggle:function(){this.addMode=!this.addMode},filled:function(){return null!=this.ou&&null!=this.roles&&this.roles.length>0},clear:function(){this.ou=null,this.roles=[]}},$scope.doAdd=function(){if($scope.newPerm.filled()){var mayBePromise=$scope.onAdd({member:$scope.member,ou:$scope.newPerm.ou,roles:$scope.newPerm.roles});$q.when(mayBePromise).then(function(result){angular.isDefined(result)&&result!==!0||($scope.newPerm.clear(),$scope.newPerm.toggle())})}},$scope.doRemove=function(perm){perm&&$scope.onRemove({member:$scope.member,permission:perm})}}]}})}),define("text!core/directives/project/projectInfo.tpl.html",[],function(){return'<div class="row" id="content-wrapper">\r\n    <div class="col-xs-12">\r\n\r\n        <div class="row">\r\n            <div class="col-xs-12">\r\n                <ago-tabs current-tab="props" tab-settings="tabs" style="padding-top: 5px"></ago-tabs>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="row">\r\n            <div class="col-xs-12">\r\n                <ago-error-msg></ago-error-msg>\r\n\r\n                <div class="row">\r\n                    <div class="col-xs-12">\r\n                        <ago-box color="purple" large="true" style="padding-top: 5px">\r\n                            <ago-box-title>\r\n                                <i class="icon-info"></i>\r\n                                {{ i18n.projects.settings.title }}\r\n                            </ago-box-title>\r\n\r\n                            <ago-box-content>\r\n                                <div class="box-toolbox box-toolbox-top">\r\n                                    <button type="button" class="btn btn-danger">{{ i18n.core.buttons.delete }}</button>\r\n                                    <refresher active="loading" on-refresh="load()"></refresher>\r\n                                </div>\r\n\r\n                                <form class="form form-horizontal" novalidate>\r\n                                    <div class="row">\r\n                                        <div class="col-md-4 col-xs-12">\r\n                                            <div class="box">\r\n                                                <div id="{{ model.Id }}" class="box-content" style="border: none; box-shadow: none">\r\n                                                    <img class="img-responsive" src="https://placehold.it/320x320&text=Photo"\r\n                                                         ng-src="{{ model.imageUrl }}">\r\n                                                    <div ago-uploader-inrow="itemUploadOption(f)" drop-target="model.Id"></div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div class="col-md-8 col-xs-12">\r\n                                            <!-- Project code and type - read only section -->\r\n                                            <div class="row">\r\n                                                <ago-form-static-item label="i18n.projects.fields.code" large="true">\r\n                                                    {{ model.ProjectCode }}\r\n                                                </ago-form-static-item>\r\n                                            </div>\r\n                                            <div class="row">\r\n                                                <ago-form-static-item label="i18n.core.fields.type" large="true">\r\n                                                    {{ model.Type }}\r\n                                                </ago-form-static-item>\r\n                                            </div>\r\n                                            <!-- Name and status -->\r\n                                            <div class="row">\r\n                                                <ago-form-item label="i18n.core.fields.name" fields="Name"\r\n                                                               vld="validation"  large="true">\r\n                                                    <inline-text model="model.Name" on-update="onUpdateProp(model, \'Name\', val)"\r\n                                                                 on-cancel="resetValidation()" input-col="col-xs-12" required></inline-text>\r\n                                                </ago-form-item>\r\n                                            </div>\r\n                                            <div class="row">\r\n                                                <ago-form-item label="i18n.projects.fields.status" field="Status"\r\n                                                               vld="validation"  large="true">\r\n                                                    <inline-lookup model="model.Status" input-col="col-xs-12" required\r\n                                                                   on-update="onUpdateProp(model, \'Status\', val)"\r\n                                                                   on-cancel="onCancelProp()"\r\n                                                                   input-lookup="core/dictionary/lookupProjectStatuses"></inline-lookup>\r\n                                                </ago-form-item>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <!-- Description -->\r\n                                    <div class="row">\r\n                                        <ago-form-item label="i18n.core.fields.description" field="Description"\r\n                                                vld="validation" large="true">\r\n                                            <inline-text-area model="model.Description" input-col="col-xs-12" input-rows="5"\r\n                                                on-update="onUpdateProp(model, \'Description\', val)"\r\n                                                on-cancel="onCancelProp()"></inline-text-area>\r\n                                        </ago-form-item>\r\n                                    </div>\r\n\r\n                                    <!-- Public project and tags -->\r\n                                    <div class="row">\r\n                                        <ago-form-item label="i18n.projects.fields.public" field="VisibleForAll"\r\n                                                vld="validation">\r\n                                            <inline-checkbox model="model.VisibleForAll"\r\n                                                 true-exp="i18n.projects.settings.publicTitle"\r\n                                                 false-exp="i18n.projects.settings.privateTitle"\r\n                                                 on-update="onUpdateProp(model, \'VisibleForAll\', val)"\r\n                                                 on-cancel="resetValidation()"></inline-checkbox>\r\n                                        </ago-form-item>\r\n                                        <ago-form-item label="i18n.projects.fields.tags" field="Tags" vld="validation">\r\n                                            <ago-tags view-model="model" tag-type="\'core.project\'"\r\n                                                      lookup-method="core/dictionary/lookupTags"\r\n                                                      tag-method="tasks/project/tagProject"\r\n                                                      detag-method="tasks/project/detagProject"\r\n                                                      on-error="handleException(error)">\r\n                                            </ago-tags>\r\n                                        </ago-form-item>\r\n                                    </div>\r\n\r\n                                    <!-- Author and creation time - read only section -->\r\n                                    <div class="row">\r\n                                        <ago-form-static-item label="i18n.core.fields.creator">\r\n                                            {{ model.Author }}\r\n                                        </ago-form-static-item>\r\n                                        <ago-form-static-item label="i18n.core.fields.creationTime">\r\n                                            {{ model.CreationTime | date:\'ago_datetime\' }}\r\n                                        </ago-form-static-item>\r\n                                    </div>\r\n                                </form>\r\n                            </ago-box-content>\r\n                        </ago-box>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="row">\r\n            <div class="col-xs-12">\r\n                <ago-status-history model="model.StatusHistory" view-settings="viewSettings"\r\n                    change="changeStatus" collapsed="statusHistoryCollapsed">\r\n                </ago-status-history>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'
}),define("core/directives/project/projectInfo",["../../moduleDef","jquery","angular","text!./projectInfo.tpl.html"],function(module,$,angular,tpl){module.directive("agoProjectInfo",["$stateParams","apinetService","stateCacheService","ProjectStatusViewSettings","$controller",function($stateParams,apinetService,stateCacheService,statusViewSettings,$controller){return{restrict:"E",replace:!0,template:tpl,compile:function(elm,attrs){var $tagsEditor=$("ago-tags",elm);return $tagsEditor.attr("tag-method",attrs.tagUrl),$tagsEditor.attr("detag-method",attrs.detagUrl),function($scope){var loadUrl=attrs.loadUrl,updateUrl=attrs.updateUrl;$scope.viewSettings=statusViewSettings,angular.extend(this,$controller("ErrorHandlingCtrl",{$scope:$scope})),angular.extend(this,$controller("InlineEditCtrl",{$scope:$scope,project:$stateParams.project,method:updateUrl,afterUpdate:function(model,prop){"Name"===prop&&(apinetService.dropCache("projectInfo",$stateParams.project),$scope.breadcrumbs&&angular.forEach($scope.breadcrumbs,function(bi){bi.projectRoot===!0&&(bi.name=model.Name)})),saveState()}})),angular.extend(this,$controller("ProjectImageUrlCtrl",{$scope:$scope})),$scope.changeStatus=function(newStatus){$scope.onUpdateProp($scope.model,"Status",newStatus)},$scope.load=function(){$scope.loading=!0,apinetService.action({method:loadUrl,project:$stateParams.project}).then(function(response){$scope.model=response,$scope.loading=!1,saveState(),calculateImageUrl()},$scope.handleException)};var cacheKey=loadUrl+"_"+$stateParams.project,saveState=function(){stateCacheService.cacheState(cacheKey,{model:angular.copy($scope.model)})};$scope.itemUploadOption=function(){var itemOptions={};return angular.extend(itemOptions,{url:apinetService.apiUrl("core/projects/uploadImage",$stateParams.project),acceptFileTypes:/(\.|\/)(gif|jpe?g|png)$/i,done:function(e,data){data&&data.result&&data.result.files&&($scope.model.ImageId=data.result.files[0].model,calculateImageUrl())},fail:function(e,data){"abort"!==data.errorThrown&&$scope.handleException(data.result.message)},maxNumberOfFiles:1,submit:function(e,data){angular.extend(data.formData,{projectId:$scope.model.Id})}}),itemOptions};var calculateImageUrl=function(){$scope.model.imageUrl=$scope.projectImageUrl($scope.model)};$scope.model={},$scope.resetValidation(),stateCacheService.restoreState(cacheKey,$scope),$scope.load()}}}}])}),define("text!core/directives/project/projectInvitations.tpl.html",[],function(){return'<div class="row" id="content-wrapper">\r\n    <div class="col-xs-12">\r\n\r\n        <div class="row">\r\n            <div class="col-xs-12">\r\n                <ago-tabs current-tab="invite" tab-settings="tabs" style="padding-top: 5px"></ago-tabs>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="row">\r\n            <div class="col-xs-12">\r\n                <div filters-box="filter" sorters="sorters" meta="{{ metadataUrl }}" group="{{ filterGroup }}"\r\n                     apply-enabled="applyEnabled" apply-filter="applyFilter" reset-filter="resetFilter" filter-applied="filterApplied" >\r\n                    <form class="form form-horizontal">\r\n                        <div class="form-group">\r\n                            <label class="col-md-3 control-label" bo-text="i18n.projects.invitations.filter.custom"></label>\r\n                            <div class="col-md-9">\r\n                                <select ng-model="filter.simple.Custom" class="form-control">\r\n                                    <option value="all" bo-text="i18n.projects.invitations.filter.predefined.all"></option>\r\n                                    <option value="waiting" bo-text="i18n.projects.invitations.filter.predefined.waiting"></option>\r\n                                    <option value="accepted" bo-text="i18n.projects.invitations.filter.predefined.accepted"></option>\r\n                                    <option value="refused" bo-text="i18n.projects.invitations.filter.predefined.refused"></option>\r\n                                </select>\r\n                            </div>\r\n                        </div>\r\n                        <div class="form-group">\r\n                            <label class="col-md-3 control-label" bindonce="i18n.core" bo-text="i18n.projects.invitations.fields.email"></label>\r\n                            <div class="col-md-9">\r\n                                <input type="text" ng-model="filter.simple.Email" filter-node="{path: \'Email\', op:\'like\'}" class="form-control"  />\r\n                            </div>\r\n                        </div>\r\n                        <div class="form-group">\r\n                            <label class="col-md-3 control-label" bindonce="i18n.core" bo-text="i18n.projects.invitations.fields.content"></label>\r\n                            <div class="col-md-9">\r\n                                <input type="text" ng-model="filter.simple.Content" filter-node="{path: \'Content\', op:\'like\'}" class="form-control"  />\r\n                            </div>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <ago-box header-class="{hidden: true}">\r\n            <ago-box-content>\r\n                <div class="box-toolbox box-toolbox-top">\r\n                    <ago-error-msg></ago-error-msg>\r\n\r\n                    <button class="btn btn-success" ng-if="!editables.addMode" ng-click="editables.toggle()">\r\n                        <i class="icon-plus"></i>\r\n                    </button>\r\n\r\n                    <form name="form" class="form form-horizontal" novalidate ng-if="editables.addMode">\r\n                        <!--Email-->\r\n                        <ago-new-form-item label="i18n.projects.invitations.fields.email" field="Email" control="form.email" vld="validation">\r\n                            <input name="email" type="email" class="form-control" ng-model="editables.email" required>\r\n                        </ago-new-form-item>\r\n                        <!--Content-->\r\n                        <ago-new-form-item label="i18n.projects.invitations.fields.content" field="Content" control="form.content" vld="validation">\r\n                            <textarea name="content" type="text" class="form-control" ng-model="editables.content"\r\n                                      rows="3" required></textarea>\r\n                        </ago-new-form-item>\r\n                        <!--OU-->\r\n                        <ago-new-form-item label="i18n.projects.members.fields.ou" field="InitialOU"\r\n                                           control="form.ou" vld="validation">\r\n                            <input name="ou" type="text" class="form-control" ng-model="editables.ou"\r\n                                   lookup="" required\r\n                                   placeholder="{{ i18n.projects.members.placeholders.ou }}">\r\n                        </ago-new-form-item>\r\n                        <!--Role-->\r\n                        <ago-new-form-item label="i18n.projects.members.fields.role" field="InitialRole"\r\n                                           control="form.role" vld="validation">\r\n                            <input name="role" type="text" class="form-control" ng-model="editables.role"\r\n                                   lookup="" required\r\n                                   placeholder="{{ i18n.projects.members.placeholders.role }}">\r\n                        </ago-new-form-item>\r\n\r\n                        <div class="form-actions form-actions-padding-sm">\r\n                            <div class="row">\r\n                                <div class="col-md-10 col-md-offset-2" bindonce="i18n.core">\r\n                                    <button type="button" class="btn" ng-click="editables.toggle()" bo-text="i18n.core.buttons.cancel"></button>\r\n                                    <button type="button" class="btn btn-success" ng-click="add()" bo-text="i18n.core.buttons.save"\r\n                                            ng-disabled="form.$invalid"></button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n\r\n                <div class="responsive-table">\r\n                    <div class="scrollable-area">\r\n                        <table class="table" bindonce="i18n.projects.register">\r\n                            <thead>\r\n                            <tr class="hidden-xs">\r\n                                <th class="col-xs-2" bo-text="i18n.projects.invitations.fields.email"></th>\r\n                                <th class="col-xs-3" bo-text="i18n.projects.invitations.fields.content"></th>\r\n                                <th class="col-xs-2" bo-text="i18n.projects.invitations.fields.ouAndRole"></th>\r\n                                <th class="col-xs-1" bo-text="i18n.projects.invitations.fields.accepted"></th>\r\n                                <th class="col-xs-2" bo-text="i18n.projects.invitations.fields.member"></th>\r\n                                <th class="col-xs-2">&nbsp;</th>\r\n                            </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                            <tr ng-repeat-start="m in models">\r\n                                <td class="col-xs-2" style="white-space: normal">\r\n                                    <inline-email model="m.Email" on-update="onUpdateProp(m, \'Email\', val)"\r\n                                                  on-cancel="onCancelProp(m)" required></inline-email>\r\n                                    <button class="btn btn-default btn-sm" ng-click="send(m)" ng-if="m.Accepted == null">\r\n                                        <i class="icon-mail-forward"></i>\r\n                                        <span class="inline-block hidden-xs">{{ i18n.core.buttons.send }}</span>\r\n                                    </button>\r\n                                </td>\r\n                                <td class="col-xs-3">\r\n                                    <inline-text-area model="m.Content" on-update="onUpdateProp(m, \'Content\', val)"\r\n                                                     on-cancel="onCancelProp(m)" required></inline-text-area>\r\n                                </td>\r\n                                <td class="col-xs-2" style="white-space: normal">\r\n                                    <div>\r\n                                        <inline-lookup model="m.InitialOU" input-lookup=""\r\n                                                on-update="onUpdateProp(m, \'InitialOU\', val)"\r\n                                                on-cancel="onCancelProp(m)" required></inline-lookup>\r\n                                    </div>\r\n                                    <div>\r\n                                        <inline-lookup model="m.InitialRole" input-lookup=""\r\n                                               on-update="onUpdateProp(m, \'InitialRole\', val)"\r\n                                               on-cancel="onCancelProp(m)" required></inline-lookup>\r\n                                    </div>\r\n                                </td>\r\n                                <td class="col-xs-1" bo-text="m.Accepted | yesNoEmpty"></td>\r\n                                <td class="col-xs-2" bo-text="m.MemberFullName"></td>\r\n                                <td class="col-xs-2">\r\n                                    <ago-btn-delete class="pull-right" ng-click="remove(m)" style="margin-left: 5px"\r\n                                                    bindonce="i18n.core.buttons" bo-title="i18n.core.buttons.delete">\r\n                                    </ago-btn-delete>\r\n                                    <details-btn open="m.details.expanded" toggle="toggleDetails(m)"></details-btn>\r\n                                </td>\r\n                            </tr>\r\n                            <tr ng-repeat-end ng-show="m.details.expanded" style="background-color: #dddddd">\r\n                                <td colspan="6">\r\n                                    <span ng-hide="m.details.loaded">{{ i18n.core.labels.loading }}</span>\r\n                                    <table class="table table-bordered" hg-show="m.details.loaded">\r\n                                        <thead>\r\n                                        <tr bindonce="i18n.projects.invitations">\r\n                                            <th bo-text="i18n.projects.invitations.fields.subject"></th>\r\n                                            <th bo-text="i18n.projects.invitations.fields.body"></th>\r\n                                            <th bo-text="i18n.projects.invitations.fields.sent"></th>\r\n                                            <th bo-text="i18n.projects.invitations.fields.sentAt"></th>\r\n                                        </tr>\r\n                                        </thead>\r\n                                        <tr ng-repeat="i in m.details.Items" bindonce>\r\n                                            <td style="white-space: normal" bo-text="i.Subject"></td>\r\n                                            <td style="white-space: normal" bo-html="i.Body"></td>\r\n                                            <td bo-text="i.EmailDelivered | yesNoEmpty"></td>\r\n                                            <td bo-text="i.EmailDeliveredAt | date:\'ago_datetime\'"></td>\r\n                                        </tr>\r\n                                    </table>\r\n                                </td>\r\n                            </tr>\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="box-toolbox box-toolbox-bottom">\r\n                    <button type="button" class="btn btn-primary" ng-click="paging.page = paging.page + 1">{{ i18n.core.buttons.more }}</button>\r\n\r\n                    <refresher active="indication.loading" on-refresh="refreshList()"></refresher>\r\n                    <counter action=""></counter>\r\n                </div>\r\n            </ago-box-content>\r\n        </ago-box>\r\n\r\n    </div>\r\n</div>\r\n'}),define("core/directives/project/projectInvitations",["../../moduleDef","jquery","angular","text!./projectInvitations.tpl.html"],function(module,$,angular,tpl){module.directive("agoProjectInvitations",["$stateParams","apinetService","dialogService","i18n","moduleConfig","$controller",function($stateParams,apinetService,dialogService,i18n,moduleConfig,$controller){return{restrict:"E",replace:!0,template:tpl,compile:function(elm,attrs){var $counter=$("counter",elm);$counter.attr("action",attrs.counterUrl);var $ouLookup=$('inline-lookup[model="m.InitialOU"]',elm),$ouInput=$('input[name="ou"]',elm);$ouLookup.attr("input-lookup",attrs.ouLookupUrl),$ouInput.attr("lookup",attrs.ouLookupUrl);var $roleLookup=$('inline-lookup[model="m.InitialRole"]',elm),$roleInput=$('input[name="role"]',elm);return $roleLookup.attr("input-lookup",attrs.roleLookupUrl),$roleInput.attr("lookup",attrs.roleLookupUrl),function($scope,elm,attrs){angular.extend(this,$controller("ErrorHandlingCtrl",{$scope:$scope})),$scope.metadataUrl=attrs.metadataUrl,$scope.filterGroup=attrs.filterGroup;var addUrl=attrs.addUrl,removeUrl=attrs.removeUrl,updateUrl=attrs.updateUrl,sendUrl=attrs.sendUrl,sentLogUrl=attrs.sentLogUrl;angular.extend(this,$controller("InlineEditCtrl",{$scope:$scope,project:$stateParams.project,method:updateUrl,afterUpdate:null})),$scope.$watch("filter.simple.Custom",function(value){$scope.requestParams.predefined=value||"all"},!0),angular.extend(this,$controller("PrefilteredListCtrl",{$scope:$scope,defaultFilter:function(isFirstRequest){var defaultPredefined=isFirstRequest?"waiting":"all";return $scope.requestParams.predefined=defaultPredefined,{simple:{Custom:defaultPredefined}}}})),angular.extend(this,$controller("BaseCardsListCtrl",{$scope:$scope,project:$stateParams.project,detailsUrl:sentLogUrl})),$scope.resetModelValidation=function(model){model.validation={}},$scope.editables={addMode:!1,email:null,content:null,ou:null,role:null,clear:function(){this.email=null,this.content=null,this.ou=null,this.role=null},filled:function(){return this.email&&this.content&&this.ou&&this.role},toggle:function(){this.addMode=!this.addMode}},$scope.remove=function(model){model&&dialogService.confirm(i18n.msg("core.confirm.delete.title"),i18n.msg("core.confirm.delete.record")).then(function(){apinetService.action({method:removeUrl,project:$stateParams.project,invitationId:model.Id}).then(function(){var index=$scope.models.indexOf(model);index>=0&&$scope.models.splice(index,1)},$scope.handleException)})},$scope.add=function(){apinetService.action({method:addUrl,project:$stateParams.project,data:{Email:$scope.editables.email,Content:$scope.editables.content,InitialOU:$scope.editables.ou,InitialRole:$scope.editables.role}}).then(function(response){$scope.models.unshift(response),$scope.editables.clear(),$scope.editables.toggle()},$scope.handleException)},$scope.send=function(m){apinetService.action({method:sendUrl,project:$stateParams.project,invitationId:m.Id}).then(function(){m.details&&delete m.details,$scope.toggleDetails(m)},$scope.handleException)}}}}}])}),define("text!core/directives/status/statusBtn.tpl.html",[],function(){return'<button type="button" class="btn" ng-class="viewSettings[status.id].class" ng-click="changeStatus()">\r\n    <i ng-class="viewSettings[status.id].icon"></i>\r\n    <span class="inline-block visible-xs" title="{{ status.text }}" ng-if="cutXs !== \'0\'">\r\n        {{ (status.text | textCut:(cutXs || status.text.length)) || \'\' }}\r\n    </span>\r\n    <span class="inline-block visible-sm hidden-xs hidden-md hidden-lg" title="{{ status.text }}" ng-if="cutSm !== \'0\'">\r\n        {{ (status.text | textCut:(cutSm || status.text.length)) || \'\' }}\r\n    </span>\r\n    <span class="inline-block visible-md hidden-xs hidden-sm hidden-lg" ng-if="cutMd !== \'0\'">\r\n        {{ (status.text | textCut:(cutMd || status.text.length)) || \'\' }}\r\n    </span>\r\n    <span class="inline-block visible-lg hidden-xs hidden-sm hidden-md" ng-if="cutM !== \'0\'">\r\n        {{ (status.text | textCut:(cut || status.text.length)) || \'\' }}\r\n    </span>\r\n</button>\r\n'}),define("core/directives/status/statusBtn",["../../moduleDef","angular","text!./statusBtn.tpl.html"],function(module,angular,tpl){module.directive("agoStatusBtn",["$rootScope",function($rootScope){return{restrict:"E",replace:!0,template:tpl,scope:{status:"=",onChange:"=change",viewSettings:"=",cut:"@",cutXs:"@",cutMd:"@",cutSm:"@"},link:function($scope){$scope.i18n=$rootScope.i18n,$scope.changeStatus=function(){angular.isFunction($scope.onChange)&&$scope.onChange($scope.status)}}}}])}),define("text!core/directives/status/statusHistoryView.tpl.html",[],function(){return'<div>\r\n<ago-box color="green" title-click-collapse collapsible="true" large="true" collapsed="collapsed">\r\n	<ago-box-title>\r\n		<i class="icon-table"></i>\r\n		<span bindonce="i18n.core.statusHistory" bo-text="i18n.core.statusHistory.title"></span>\r\n	</ago-box-title>\r\n	<ago-box-actions>\r\n		<a class="btn btn-xs btn-link">\r\n			<i class="fa" ng-class="{ \'icon-chevron-up\': !collapsed, \'icon-chevron-down\': collapsed }"></i>\r\n		</a>\r\n	</ago-box-actions>\r\n	\r\n	<div class="box-toolbox box-toolbox-top">\r\n        <div class="btn-group">\r\n            <ago-status-btn ng-repeat="n in model.Next" status="n" change="changeStatus" view-settings="viewSettings">\r\n            </ago-status-btn>\r\n        </div>\r\n	</div>\r\n\r\n	<div class="responsive-table">\r\n			<div class="scrollable-area">\r\n				<table class="table table-bordered">\r\n					<thead>\r\n						<tr bindonce="i18n.core.statusHistory">\r\n							<th class="col-xs-12 col-sm-3" bo-text="i18n.core.statusHistory.fields.status"></th>\r\n							<th class="col-sm-3 hidden-xs" bo-text="i18n.core.statusHistory.fields.author"></th>\r\n							<th class="col-sm-3 hidden-xs" bo-text="i18n.core.statusHistory.fields.effectivePeriod"></th>\r\n							<th class="col-sm-3 hidden-xs" bo-text="i18n.core.statusHistory.fields.duration"></th>\r\n						</tr>\r\n					</thead>\r\n					<tbody>\r\n						<tr ng-repeat="h in model.History">\r\n							<td class="col-xs-12 col-sm-3" style="white-space: normal">\r\n                                <ago-status-btn class="disabled" status="h.Status" view-settings="viewSettings">\r\n                                </ago-status-btn>\r\n								<small class="visible-xs text-muted">\r\n									{{ h.Author }}, \r\n									{{ \r\n										i18n.msg(\'core.statusHistory.period\', {\r\n												start: (h.Start | date:\'ago_datetime\'), \r\n												finish: ((h.Finish | date:\'ago_datetime\') || i18n.core.labels.presentTime) \r\n											}) \r\n									}}, {{ duration(h) | date:\'ago_datetime\' }}\r\n								</small>\r\n							</td>\r\n							<td class="col-sm-3 hidden-xs">{{ h.Author }}</td>\r\n							<td class="col-sm-3 hidden-xs" style="white-space: normal">\r\n								{{ \r\n									i18n.msg(\'core.statusHistory.period\', {\r\n											start: (h.Start | date:\'ago_datetime\'), \r\n											finish: ((h.Finish | date:\'ago_datetime\') || i18n.core.labels.presentTime) \r\n										}) \r\n								}}\r\n							</td>\r\n							<td class="col-sm-3 hidden-xs" style="white-space: normal">\r\n								{{ duration(h) | date:\'ago_datetime\' }}\r\n							</td>\r\n						</tr>\r\n					</tbody>\r\n				</table>\r\n			</div>\r\n		</div>\r\n</ago-box>\r\n</div>\r\n'}),define("core/directives/status/statusHistoryView",["../../moduleDef","angular","text!./statusHistoryView.tpl.html"],function(module,angular,tpl){module.directive("agoStatusHistory",["$locale",function($locale){var MS_PER_DAY=864e5,MS_PER_HOUR=36e5,MS_PER_MINUTE=6e4;return{restrict:"E",replace:!0,template:tpl,controller:["$scope","$rootScope",function($scope,$rootScope){$scope.i18n=$rootScope.i18n}],scope:{model:"=",viewSettings:"=",onChange:"=change",collapsed:"="},link:function(scope){var pluralDurationPart=function(cnt,type,omitZero){if(omitZero&&0>=cnt)return"";switch($locale.pluralCat(cnt)){case"one":case"few":case"many":case"other":var pcat=$locale.pluralCat(cnt);return cnt+" "+scope.i18n.msg("core.statusHistory.duration."+type+"."+pcat);case"zero":case"two":default:return""}};scope.isClosedRecord=function(hrecord){return hrecord.hasOwnProperty("Finish")},scope.duration=function(hrecord){var finish=hrecord.Finish?new Date(hrecord.Finish):new Date,start=new Date(hrecord.Start),f=Date.UTC(finish.getFullYear(),finish.getMonth(),finish.getDate(),finish.getHours(),finish.getMinutes(),finish.getSeconds()),s=Date.UTC(start.getFullYear(),start.getMonth(),start.getDate(),start.getHours(),start.getMinutes(),start.getSeconds()),ms=Math.abs(f-s),daysDiff=Math.floor(ms/MS_PER_DAY),hoursDiff=Math.floor((ms-daysDiff*MS_PER_DAY)/MS_PER_HOUR),minutesDiff=Math.floor((ms-(daysDiff*MS_PER_DAY+hoursDiff*MS_PER_HOUR))/MS_PER_MINUTE),minuteName=scope.i18n.msg("core.statusHistory.duration.minutes"),days=pluralDurationPart(daysDiff,"days",!0);return days+" "+pluralDurationPart(hoursDiff,"hours",""===days)+(minutesDiff>0?" "+minutesDiff+" "+minuteName:"< 1 "+minuteName)},scope.changeStatus=function(status){angular.isFunction(scope.onChange)&&scope.onChange(status)}}}}])}),define("text!core/directives/comments/commentsView.tpl.html",[],function(){return'<div class="row" id="content-wrapper">\r\n    <div class="col-xs-12">\r\n        <div class="row">\r\n            <div class="col-xs-12">\r\n                <ago-tabs current-tab="comments" tab-settings="tabs"></ago-tabs>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="row">\r\n            <div class="col-xs-12">\r\n                <ago-box header-class="{hidden: true}">\r\n                    <ago-box-content>\r\n                        <div class="box-toolbox box-toolbox-top">\r\n                            <ago-error-msg></ago-error-msg>\r\n\r\n                            <form name="form" class="form-inline" ng-submit="addComment()" novalidate>\r\n                                <div class="input-group">\r\n                                    <input type="text" class="form-control" ng-model="newComment"\r\n                                           bindonce="i18n.pas.tasks"\r\n                                           bo-attr bo-attr-placeholder="i18n.pas.tasks.comments.placeholder">\r\n                                        <span class="input-group-btn">\r\n                                            <button type="submit" class="btn btn-success" ng-disabled="!newComment">\r\n                                                <i class="icon-plus"></i>\r\n                                            </button>\r\n\r\n                                            <refresher active="indication.loading" on-refresh="refreshList()"></refresher>\r\n                                        </span>\r\n                                </div>\r\n                            </form>\r\n                        </div>\r\n\r\n                        <div class="chat">\r\n                            <ul class="list-unstyled list-hover list-striped">\r\n                                <li class="message" bindonce ng-repeat="m in models">\r\n                                    <div class="avatar">\r\n                                        <i height="23" width="23" class="lead icon-user" bo-if="!m.AvatarUrl"></i>\r\n                                        <img height="23" width="23" bo-if="m.AvatarUrl" bo-src="m.AvatarUrl">\r\n                                    </div>\r\n                                    <div class="name-and-time">\r\n                                        <div class="name pull-left">\r\n                                            <small class="text-contrast" bo-text="m.Author"></small>\r\n                                        </div>\r\n                                        <div class="time pull-right">\r\n                                            <small class="date pull-right text-muted" data-placement="top">\r\n                                                    <span class="timeago fade has-tooltip in" data-placement="top"\r\n                                                          bo-title="m.CreationTime | date:\'ago_datetime\'"\r\n                                                          bo-text="moment(m.CreationTime).fromNow()">\r\n                                                    </span>\r\n                                                <i class="icon-time"></i>\r\n                                            </small>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="body" bo-text="m.Text"></div>\r\n                                </li>\r\n                            </ul>\r\n                        </div>\r\n\r\n                        <div class="box-toolbox box-toolbox-bottom clearfix">\r\n                            <form name="form" class="form-inline" ng-submit="addComment()" novalidate>\r\n                                <div class="input-group">\r\n                                    <input type="text" class="form-control" ng-model="newComment"\r\n                                           bindonce="i18n.pas.tasks"\r\n                                           bo-attr bo-attr-placeholder="i18n.pas.tasks.comments.placeholder">\r\n                                        <span class="input-group-btn">\r\n                                            <button type="submit" class="btn btn-success" ng-disabled="!newComment">\r\n                                                <i class="icon-plus"></i>\r\n                                            </button>\r\n\r\n                                            <counter action="pas/tasks/getCommentsCount"></counter>\r\n                                            <refresher active="indication.loading" on-refresh="refreshList()"></refresher>\r\n\r\n                                        </span>\r\n                                </div>\r\n                            </form>\r\n                        </div>\r\n                    </ago-box-content>\r\n                </ago-box>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'}),define("core/directives/comments/commentsView",["../../moduleDef","angular","text!./commentsView.tpl.html"],function(module,angular,tpl){module.directive("agoCommentsView",["$controller","$stateParams","apinetService",function($controller,$stateParams,apinetService){return{restrict:"E",replace:!0,template:tpl,link:function($scope,elm,attrs){angular.extend(this,$controller("ErrorHandlingCtrl",{$scope:$scope})),$scope.newComment=null,$scope.addComment=function(){$scope.newComment&&apinetService.action({method:attrs.createUrl,project:$stateParams.project,num:$scope.num,text:$scope.newComment}).then(function(response){$scope.models.push(response),$scope.newComment=null},$scope.handleException)}}}}])}),define("text!core/directives/ago.watchBtn.tpl.html",[],function(){return'<button type="button" class="btn" ng-click="toggle()" ng-disabled="loading">\r\n    <i class="{{ icon }}"></i>\r\n    <span class="inline-block hidden-xs">{{ label }}</span>\r\n</button>\r\n'}),define("core/directives/ago.watchBtn",["../moduleDef","angular","text!./ago.watchBtn.tpl.html"],function(module,angular,tpl){module.directive("agoWatchBtn",["$stateParams","apinetService","$exceptionHandler",function($stateParams,apinetService,$exceptionHandler){return{restrict:"E",replace:!0,template:tpl,scope:{code:"@",itemId:"="},controller:["$scope","$rootScope",function($scope,$rootScope){$scope.i18n=$rootScope.i18n}],link:function($scope){var updateView=function(){$scope.loading?($scope.icon="icon-ban-circle",$scope.label=$scope.i18n.msg("core.labels.loading")):($scope.icon=$scope.watched?"icon-eye-open":"icon-eye-close",$scope.label=$scope.i18n.msg("core.buttons."+($scope.watched?"unwatch":"watch")))};$scope.$watch("itemId",function(){$scope.loading=!0,updateView(),angular.isDefined($scope.itemId)&&apinetService.action({method:"core/events/hasSubscription",code:$scope.code,project:$stateParams.project,itemId:$scope.itemId}).then(function(response){$scope.loading=!1,$scope.watched=response,updateView()},function(err){$scope.loading=!1,$exceptionHandler(err)})}),$scope.toggle=function(){var method=$scope.watched?"core/events/unsubscribe":"core/events/subscribe";$scope.loading=!0,updateView(),apinetService.action({method:method,code:$scope.code,project:$stateParams.project,itemId:$scope.itemId}).then(function(){$scope.loading=!1,$scope.watched=!$scope.watched,updateView()},function(err){$scope.loading=!1,$exceptionHandler(err)})}}}}])}),define("text!core/directives/gantt/ganttView.tpl.html",[],function(){return'<div class="gantt">\r\n    <div ng-transclude></div>\r\n</div>\r\n'}),define("dhtmlxgantt",[],function(){function dtmlXMLLoaderObject(funcObject,dhtmlObject,async,rSeed){return this.xmlDoc="",this.async="undefined"!=typeof async?async:!0,this.onloadAction=funcObject||null,this.mainObject=dhtmlObject||null,this.waitCall=null,this.rSeed=rSeed||!1,this}function callerFunction(funcObject,dhtmlObject){return this.handler=function(e){return e||(e=window.event),funcObject(e,dhtmlObject),!0},this.handler}function getAbsoluteLeft(htmlObject){return getOffset(htmlObject).left}function getAbsoluteTop(htmlObject){return getOffset(htmlObject).top}function getOffsetSum(elem){for(var top=0,left=0;elem;)top+=parseInt(elem.offsetTop),left+=parseInt(elem.offsetLeft),elem=elem.offsetParent;return{top:top,left:left}}function getOffsetRect(elem){var box=elem.getBoundingClientRect(),body=document.body,docElem=document.documentElement,scrollTop=window.pageYOffset||docElem.scrollTop||body.scrollTop,scrollLeft=window.pageXOffset||docElem.scrollLeft||body.scrollLeft,clientTop=docElem.clientTop||body.clientTop||0,clientLeft=docElem.clientLeft||body.clientLeft||0,top=box.top+scrollTop-clientTop,left=box.left+scrollLeft-clientLeft;
return{top:Math.round(top),left:Math.round(left)}}function getOffset(elem){return elem.getBoundingClientRect?getOffsetRect(elem):getOffsetSum(elem)}function convertStringToBoolean(inputString){switch("string"==typeof inputString&&(inputString=inputString.toLowerCase()),inputString){case"1":case"true":case"yes":case"y":case 1:case!0:return!0;default:return!1}}function getUrlSymbol(str){return-1!=str.indexOf("?")?"&":"?"}function dhtmlDragAndDropObject(){return window.dhtmlDragAndDrop?window.dhtmlDragAndDrop:(this.lastLanding=0,this.dragNode=0,this.dragStartNode=0,this.dragStartObject=0,this.tempDOMU=null,this.tempDOMM=null,this.waitDrag=0,window.dhtmlDragAndDrop=this,this)}function _dhtmlxError(){return this.catches||(this.catches=[]),this}function dhtmlXHeir(a,b){for(var c in b)"function"==typeof b[c]&&(a[c]=b[c]);return a}function dhtmlxEvent(el,event,handler){el.addEventListener?el.addEventListener(event,handler,!1):el.attachEvent&&el.attachEvent("on"+event,handler)}function dhtmlxDetachEvent(el,event,handler){el.removeEventListener?el.removeEventListener(event,handler,!1):el.detachEvent&&el.detachEvent("on"+event,handler)}function dhtmlxDnD(obj,config){config&&(this._settings=config),dhtmlxEventable(this),dhtmlxEvent(obj,"mousedown",dhtmlx.bind(function(e){config.original_target={target:e.target||e.srcElement},this.dragStart(obj,e)},this))}function dataProcessor(serverProcessorURL){return this.serverProcessor=serverProcessorURL,this.action_param="!nativeeditor_status",this.object=null,this.updatedRows=[],this.autoUpdate=!0,this.updateMode="cell",this._tMode="GET",this.post_delim="_",this._waitMode=0,this._in_progress={},this._invalid={},this.mandatoryFields=[],this.messages=[],this.styles={updated:"font-weight:bold;",inserted:"font-weight:bold;",deleted:"text-decoration : line-through;",invalid:"background-color:FFE0E0;",invalid_cell:"border-bottom:2px solid red;",error:"color:red;",clear:"font-weight:normal;text-decoration:none;"},this.enableUTFencoding(!0),dhtmlxEventable(this),this}window.dhtmlx||(dhtmlx=function(obj){for(var a in obj)dhtmlx[a]=obj[a];return dhtmlx}),dhtmlx.extend_api=function(name,map,ext){var t=window[name];t&&(window[name]=function(obj){var that;if(obj&&"object"==typeof obj&&!obj.tagName){that=t.apply(this,map._init?map._init(obj):arguments);for(var a in dhtmlx)map[a]&&this[map[a]](dhtmlx[a]);for(var a in obj)map[a]?this[map[a]](obj[a]):0===a.indexOf("on")&&this.attachEvent(a,obj[a])}else that=t.apply(this,arguments);return map._patch&&map._patch(this),that||this},window[name].prototype=t.prototype,ext&&dhtmlXHeir(window[name].prototype,ext))},dhtmlxAjax={get:function(url,callback){var t=new dtmlXMLLoaderObject(!0);return t.async=arguments.length<3,t.waitCall=callback,t.loadXML(url),t},post:function(url,post,callback){var t=new dtmlXMLLoaderObject(!0);return t.async=arguments.length<4,t.waitCall=callback,t.loadXML(url,!0,post),t},getSync:function(url){return this.get(url,null,!0)},postSync:function(url,post){return this.post(url,post,null,!0)}},dtmlXMLLoaderObject.count=0,dtmlXMLLoaderObject.prototype.waitLoadFunction=function(dhtmlObject){var once=!0;return this.check=function(){if(dhtmlObject&&dhtmlObject.onloadAction&&(!dhtmlObject.xmlDoc.readyState||4==dhtmlObject.xmlDoc.readyState)){if(!once)return;once=!1,dtmlXMLLoaderObject.count++,"function"==typeof dhtmlObject.onloadAction&&dhtmlObject.onloadAction(dhtmlObject.mainObject,null,null,null,dhtmlObject),dhtmlObject.waitCall&&(dhtmlObject.waitCall.call(this,dhtmlObject),dhtmlObject.waitCall=null)}},this.check},dtmlXMLLoaderObject.prototype.getXMLTopNode=function(tagName,oldObj){var z;if(this.xmlDoc.responseXML){var temp=this.xmlDoc.responseXML.getElementsByTagName(tagName);if(0===temp.length&&-1!=tagName.indexOf(":"))var temp=this.xmlDoc.responseXML.getElementsByTagName(tagName.split(":")[1]);z=temp[0]}else z=this.xmlDoc.documentElement;if(z)return this._retry=!1,z;if(!this._retry&&_isIE){this._retry=!0;var oldObj=this.xmlDoc;return this.loadXMLString(this.xmlDoc.responseText.replace(/^[\s]+/,""),!0),this.getXMLTopNode(tagName,oldObj)}return dhtmlxError.throwError("LoadXML","Incorrect XML",[oldObj||this.xmlDoc,this.mainObject]),document.createElement("DIV")},dtmlXMLLoaderObject.prototype.loadXMLString=function(xmlString,silent){if(_isIE)this.xmlDoc=new ActiveXObject("Microsoft.XMLDOM"),this.xmlDoc.async=this.async,this.xmlDoc.onreadystatechange=function(){},this.xmlDoc.loadXML(xmlString);else{var parser=new DOMParser;this.xmlDoc=parser.parseFromString(xmlString,"text/xml")}silent||(this.onloadAction&&this.onloadAction(this.mainObject,null,null,null,this),this.waitCall&&(this.waitCall(),this.waitCall=null))},dtmlXMLLoaderObject.prototype.loadXML=function(filePath,postMode,postVars,rpc){this.rSeed&&(filePath+=(-1!=filePath.indexOf("?")?"&":"?")+"a_dhx_rSeed="+(new Date).valueOf()),this.filePath=filePath,this.xmlDoc=!_isIE&&window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),this.async&&(this.xmlDoc.onreadystatechange=new this.waitLoadFunction(this)),this.xmlDoc.open(postMode?"POST":"GET",filePath,this.async),rpc?(this.xmlDoc.setRequestHeader("User-Agent","dhtmlxRPC v0.1 ("+navigator.userAgent+")"),this.xmlDoc.setRequestHeader("Content-type","text/xml")):postMode&&this.xmlDoc.setRequestHeader("Content-type","application/x-www-form-urlencoded"),this.xmlDoc.setRequestHeader("X-Requested-With","XMLHttpRequest"),this.xmlDoc.send(null||postVars),this.async||new this.waitLoadFunction(this)()},dtmlXMLLoaderObject.prototype.destructor=function(){return this._filterXPath=null,this._getAllNamedChilds=null,this._retry=null,this.async=null,this.rSeed=null,this.filePath=null,this.onloadAction=null,this.mainObject=null,this.xmlDoc=null,this.doXPath=null,this.doXPathOpera=null,this.doXSLTransToObject=null,this.doXSLTransToString=null,this.loadXML=null,this.loadXMLString=null,this.doSerialization=null,this.xmlNodeToJSON=null,this.getXMLTopNode=null,this.setXSLParamValue=null,null},dtmlXMLLoaderObject.prototype.xmlNodeToJSON=function(node){for(var t={},i=0;i<node.attributes.length;i++)t[node.attributes[i].name]=node.attributes[i].value;t._tagvalue=node.firstChild?node.firstChild.nodeValue:"";for(var i=0;i<node.childNodes.length;i++){var name=node.childNodes[i].tagName;name&&(t[name]||(t[name]=[]),t[name].push(this.xmlNodeToJSON(node.childNodes[i])))}return t},dhtmlDragAndDropObject.prototype.removeDraggableItem=function(htmlNode){htmlNode.onmousedown=null,htmlNode.dragStarter=null,htmlNode.dragLanding=null},dhtmlDragAndDropObject.prototype.addDraggableItem=function(htmlNode,dhtmlObject){htmlNode.onmousedown=this.preCreateDragCopy,htmlNode.dragStarter=dhtmlObject,this.addDragLanding(htmlNode,dhtmlObject)},dhtmlDragAndDropObject.prototype.addDragLanding=function(htmlNode,dhtmlObject){htmlNode.dragLanding=dhtmlObject},dhtmlDragAndDropObject.prototype.preCreateDragCopy=function(e){return!e&&!window.event||2!=(e||event).button?window.dhtmlDragAndDrop.waitDrag?(window.dhtmlDragAndDrop.waitDrag=0,document.body.onmouseup=window.dhtmlDragAndDrop.tempDOMU,document.body.onmousemove=window.dhtmlDragAndDrop.tempDOMM,!1):(window.dhtmlDragAndDrop.dragNode&&window.dhtmlDragAndDrop.stopDrag(e),window.dhtmlDragAndDrop.waitDrag=1,window.dhtmlDragAndDrop.tempDOMU=document.body.onmouseup,window.dhtmlDragAndDrop.tempDOMM=document.body.onmousemove,window.dhtmlDragAndDrop.dragStartNode=this,window.dhtmlDragAndDrop.dragStartObject=this.dragStarter,document.body.onmouseup=window.dhtmlDragAndDrop.preCreateDragCopy,document.body.onmousemove=window.dhtmlDragAndDrop.callDrag,window.dhtmlDragAndDrop.downtime=(new Date).valueOf(),e&&e.preventDefault?(e.preventDefault(),!1):!1):void 0},dhtmlDragAndDropObject.prototype.callDrag=function(e){e||(e=window.event);var dragger=window.dhtmlDragAndDrop;if(!((new Date).valueOf()-dragger.downtime<100)){if(!dragger.dragNode){if(!dragger.waitDrag)return dragger.stopDrag(e,!0);if(dragger.dragNode=dragger.dragStartObject._createDragNode(dragger.dragStartNode,e),!dragger.dragNode)return dragger.stopDrag();dragger.dragNode.onselectstart=function(){return!1},dragger.gldragNode=dragger.dragNode,document.body.appendChild(dragger.dragNode),document.body.onmouseup=dragger.stopDrag,dragger.waitDrag=0,dragger.dragNode.pWindow=window,dragger.initFrameRoute()}if(dragger.dragNode.parentNode!=window.document.body&&dragger.gldragNode){var grd=dragger.gldragNode;dragger.gldragNode.old&&(grd=dragger.gldragNode.old),grd.parentNode.removeChild(grd);var oldBody=dragger.dragNode.pWindow;if(grd.pWindow&&grd.pWindow.dhtmlDragAndDrop.lastLanding&&grd.pWindow.dhtmlDragAndDrop.lastLanding.dragLanding._dragOut(grd.pWindow.dhtmlDragAndDrop.lastLanding),_isIE){var div=document.createElement("Div");div.innerHTML=dragger.dragNode.outerHTML,dragger.dragNode=div.childNodes[0]}else dragger.dragNode=dragger.dragNode.cloneNode(!0);dragger.dragNode.pWindow=window,dragger.gldragNode.old=dragger.dragNode,document.body.appendChild(dragger.dragNode),oldBody.dhtmlDragAndDrop.dragNode=dragger.dragNode}dragger.dragNode.style.left=e.clientX+15+(dragger.fx?-1*dragger.fx:0)+(document.body.scrollLeft||document.documentElement.scrollLeft)+"px",dragger.dragNode.style.top=e.clientY+3+(dragger.fy?-1*dragger.fy:0)+(document.body.scrollTop||document.documentElement.scrollTop)+"px";var z;z=e.srcElement?e.srcElement:e.target,dragger.checkLanding(z,e)}},dhtmlDragAndDropObject.prototype.calculateFramePosition=function(n){if(window.name){for(var el=parent.frames[window.name].frameElement.offsetParent,fx=0,fy=0;el;)fx+=el.offsetLeft,fy+=el.offsetTop,el=el.offsetParent;if(parent.dhtmlDragAndDrop){var ls=parent.dhtmlDragAndDrop.calculateFramePosition(1);fx+=1*ls.split("_")[0],fy+=1*ls.split("_")[1]}if(n)return fx+"_"+fy;this.fx=fx,this.fy=fy}return"0_0"},dhtmlDragAndDropObject.prototype.checkLanding=function(htmlObject,e){htmlObject&&htmlObject.dragLanding?(this.lastLanding&&this.lastLanding.dragLanding._dragOut(this.lastLanding),this.lastLanding=htmlObject,this.lastLanding=this.lastLanding.dragLanding._dragIn(this.lastLanding,this.dragStartNode,e.clientX,e.clientY,e),this.lastLanding_scr=_isIE?e.srcElement:e.target):htmlObject&&"BODY"!=htmlObject.tagName?this.checkLanding(htmlObject.parentNode,e):(this.lastLanding&&this.lastLanding.dragLanding._dragOut(this.lastLanding,e.clientX,e.clientY,e),this.lastLanding=0,this._onNotFound&&this._onNotFound())},dhtmlDragAndDropObject.prototype.stopDrag=function(e,mode){var dragger=window.dhtmlDragAndDrop;if(!mode){dragger.stopFrameRoute();var temp=dragger.lastLanding;dragger.lastLanding=null,temp&&temp.dragLanding._drag(dragger.dragStartNode,dragger.dragStartObject,temp,_isIE?event.srcElement:e.target)}dragger.lastLanding=null,dragger.dragNode&&dragger.dragNode.parentNode==document.body&&dragger.dragNode.parentNode.removeChild(dragger.dragNode),dragger.dragNode=0,dragger.gldragNode=0,dragger.fx=0,dragger.fy=0,dragger.dragStartNode=0,dragger.dragStartObject=0,document.body.onmouseup=dragger.tempDOMU,document.body.onmousemove=dragger.tempDOMM,dragger.tempDOMU=null,dragger.tempDOMM=null,dragger.waitDrag=0},dhtmlDragAndDropObject.prototype.stopFrameRoute=function(win){win&&window.dhtmlDragAndDrop.stopDrag(1,1);for(var i=0;i<window.frames.length;i++)try{window.frames[i]!=win&&window.frames[i].dhtmlDragAndDrop&&window.frames[i].dhtmlDragAndDrop.stopFrameRoute(window)}catch(e){}try{parent.dhtmlDragAndDrop&&parent!=window&&parent!=win&&parent.dhtmlDragAndDrop.stopFrameRoute(window)}catch(e){}},dhtmlDragAndDropObject.prototype.initFrameRoute=function(win,mode){win&&(window.dhtmlDragAndDrop.preCreateDragCopy(),window.dhtmlDragAndDrop.dragStartNode=win.dhtmlDragAndDrop.dragStartNode,window.dhtmlDragAndDrop.dragStartObject=win.dhtmlDragAndDrop.dragStartObject,window.dhtmlDragAndDrop.dragNode=win.dhtmlDragAndDrop.dragNode,window.dhtmlDragAndDrop.gldragNode=win.dhtmlDragAndDrop.dragNode,window.document.body.onmouseup=window.dhtmlDragAndDrop.stopDrag,window.waitDrag=0,!_isIE&&mode&&(!_isFF||1.8>_FFrv)&&window.dhtmlDragAndDrop.calculateFramePosition());try{parent.dhtmlDragAndDrop&&parent!=window&&parent!=win&&parent.dhtmlDragAndDrop.initFrameRoute(window)}catch(e){}for(var i=0;i<window.frames.length;i++)try{window.frames[i]!=win&&window.frames[i].dhtmlDragAndDrop&&window.frames[i].dhtmlDragAndDrop.initFrameRoute(window,!win||mode?1:0)}catch(e){}},_isFF=!1,_isIE=!1,_isOpera=!1,_isKHTML=!1,_isMacOS=!1,_isChrome=!1,_FFrv=!1,_KHTMLrv=!1,_OperaRv=!1,-1!=navigator.userAgent.indexOf("Macintosh")&&(_isMacOS=!0),navigator.userAgent.toLowerCase().indexOf("chrome")>-1&&(_isChrome=!0),-1!=navigator.userAgent.indexOf("Safari")||-1!=navigator.userAgent.indexOf("Konqueror")?(_KHTMLrv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Safari")+7,5)),_KHTMLrv>525?(_isFF=!0,_FFrv=1.9):_isKHTML=!0):-1!=navigator.userAgent.indexOf("Opera")?(_isOpera=!0,_OperaRv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Opera")+6,3))):-1!=navigator.appName.indexOf("Microsoft")?(_isIE=!0,-1==navigator.appVersion.indexOf("MSIE 8.0")&&-1==navigator.appVersion.indexOf("MSIE 9.0")&&-1==navigator.appVersion.indexOf("MSIE 10.0")||"BackCompat"==document.compatMode||(_isIE=8)):"Netscape"==navigator.appName&&-1!=navigator.userAgent.indexOf("Trident")?_isIE=8:(_isFF=!0,_FFrv=parseFloat(navigator.userAgent.split("rv:")[1])),dtmlXMLLoaderObject.prototype.doXPath=function(xpathExp,docObj,namespace,result_type){if(_isKHTML||!_isIE&&!window.XPathResult)return this.doXPathOpera(xpathExp,docObj);if(_isIE)return docObj||(docObj=this.xmlDoc.nodeName?this.xmlDoc:this.xmlDoc.responseXML),docObj||dhtmlxError.throwError("LoadXML","Incorrect XML",[docObj||this.xmlDoc,this.mainObject]),namespace&&docObj.setProperty("SelectionNamespaces","xmlns:xsl='"+namespace+"'"),"single"==result_type?docObj.selectSingleNode(xpathExp):docObj.selectNodes(xpathExp)||new Array(0);var nodeObj=docObj;docObj||(docObj=this.xmlDoc.nodeName?this.xmlDoc:this.xmlDoc.responseXML),docObj||dhtmlxError.throwError("LoadXML","Incorrect XML",[docObj||this.xmlDoc,this.mainObject]),-1!=docObj.nodeName.indexOf("document")?nodeObj=docObj:(nodeObj=docObj,docObj=docObj.ownerDocument);var retType=XPathResult.ANY_TYPE;"single"==result_type&&(retType=XPathResult.FIRST_ORDERED_NODE_TYPE);var rowsCol=[],col=docObj.evaluate(xpathExp,nodeObj,function(){return namespace},retType,null);if(retType==XPathResult.FIRST_ORDERED_NODE_TYPE)return col.singleNodeValue;for(var thisColMemb=col.iterateNext();thisColMemb;)rowsCol[rowsCol.length]=thisColMemb,thisColMemb=col.iterateNext();return rowsCol},_dhtmlxError.prototype.catchError=function(type,func_name){this.catches[type]=func_name},_dhtmlxError.prototype.throwError=function(type,name,params){return this.catches[type]?this.catches[type](type,name,params):this.catches.ALL?this.catches.ALL(type,name,params):(window.alert("Error type: "+arguments[0]+"\nDescription: "+arguments[1]),null)},window.dhtmlxError=new _dhtmlxError,dtmlXMLLoaderObject.prototype.doXPathOpera=function(xpathExp,docObj){var z=xpathExp.replace(/[\/]+/gi,"/").split("/"),obj=null,i=1;if(!z.length)return[];if("."==z[0])obj=[docObj];else{if(""!==z[0])return[];obj=(this.xmlDoc.responseXML||this.xmlDoc).getElementsByTagName(z[i].replace(/\[[^\]]*\]/g,"")),i++}for(i;i<z.length;i++)obj=this._getAllNamedChilds(obj,z[i]);return-1!=z[i-1].indexOf("[")&&(obj=this._filterXPath(obj,z[i-1])),obj},dtmlXMLLoaderObject.prototype._filterXPath=function(a,b){for(var c=[],b=b.replace(/[^\[]*\[\@/g,"").replace(/[\[\]\@]*/g,""),i=0;i<a.length;i++)a[i].getAttribute(b)&&(c[c.length]=a[i]);return c},dtmlXMLLoaderObject.prototype._getAllNamedChilds=function(a,b){var c=[];_isKHTML&&(b=b.toUpperCase());for(var i=0;i<a.length;i++)for(var j=0;j<a[i].childNodes.length;j++)_isKHTML?a[i].childNodes[j].tagName&&a[i].childNodes[j].tagName.toUpperCase()==b&&(c[c.length]=a[i].childNodes[j]):a[i].childNodes[j].tagName==b&&(c[c.length]=a[i].childNodes[j]);return c},dtmlXMLLoaderObject.prototype.xslDoc=null,dtmlXMLLoaderObject.prototype.setXSLParamValue=function(paramName,paramValue,xslDoc){xslDoc||(xslDoc=this.xslDoc),xslDoc.responseXML&&(xslDoc=xslDoc.responseXML);var item=this.doXPath("/xsl:stylesheet/xsl:variable[@name='"+paramName+"']",xslDoc,"http://www.w3.org/1999/XSL/Transform","single");item&&(item.firstChild.nodeValue=paramValue)},dtmlXMLLoaderObject.prototype.doXSLTransToObject=function(xslDoc,xmlDoc){xslDoc||(xslDoc=this.xslDoc),xslDoc.responseXML&&(xslDoc=xslDoc.responseXML),xmlDoc||(xmlDoc=this.xmlDoc),xmlDoc.responseXML&&(xmlDoc=xmlDoc.responseXML);var result;if(_isIE){result=new ActiveXObject("Msxml2.DOMDocument.3.0");try{xmlDoc.transformNodeToObject(xslDoc,result)}catch(e){result=xmlDoc.transformNode(xslDoc)}}else this.XSLProcessor||(this.XSLProcessor=new XSLTProcessor,this.XSLProcessor.importStylesheet(xslDoc)),result=this.XSLProcessor.transformToDocument(xmlDoc);return result},dtmlXMLLoaderObject.prototype.doXSLTransToString=function(xslDoc,xmlDoc){var res=this.doXSLTransToObject(xslDoc,xmlDoc);return"string"==typeof res?res:this.doSerialization(res)},dtmlXMLLoaderObject.prototype.doSerialization=function(xmlDoc){if(xmlDoc||(xmlDoc=this.xmlDoc),xmlDoc.responseXML&&(xmlDoc=xmlDoc.responseXML),_isIE)return xmlDoc.xml;var xmlSerializer=new XMLSerializer;return xmlSerializer.serializeToString(xmlDoc)},dhtmlxEventable=function(obj){obj.attachEvent=function(name,catcher,callObj){return name="ev_"+name.toLowerCase(),this[name]||(this[name]=new this.eventCatcher(callObj||this)),name+":"+this[name].addEvent(catcher)},obj.callEvent=function(name,arg0){return name="ev_"+name.toLowerCase(),this[name]?this[name].apply(this,arg0):!0},obj.checkEvent=function(name){return!!this["ev_"+name.toLowerCase()]},obj.eventCatcher=function(obj){var dhx_catch=[],z=function(){for(var res=!0,i=0;i<dhx_catch.length;i++)if(dhx_catch[i]){var zr=dhx_catch[i].apply(obj,arguments);res=res&&zr}return res};return z.addEvent=function(ev){return"function"!=typeof ev&&(ev=eval(ev)),ev?dhx_catch.push(ev)-1:!1},z.removeEvent=function(id){dhx_catch[id]=null},z},obj.detachEvent=function(id){if(id){var list=id.split(":");this[list[0]].removeEvent(list[1])}},obj.detachAllEvents=function(){for(var name in this)0===name.indexOf("ev_")&&(this.detachEvent(name),this[name]=null)},obj=null},window.dhtmlx||(window.dhtmlx={}),function(){function callback(config,result){var usercall=config.callback;modality(!1),config.box.parentNode.removeChild(config.box),_dhx_msg_cfg=config.box=null,usercall&&usercall(result)}function modal_key(e){if(_dhx_msg_cfg){e=e||event;var code=e.which||event.keyCode;return dhtmlx.message.keyboard&&((13==code||32==code)&&callback(_dhx_msg_cfg,!0),27==code&&callback(_dhx_msg_cfg,!1)),e.preventDefault&&e.preventDefault(),!(e.cancelBubble=!0)}}function modality(mode){modality.cover||(modality.cover=document.createElement("DIV"),modality.cover.onkeydown=modal_key,modality.cover.className="dhx_modal_cover",document.body.appendChild(modality.cover));document.body.scrollHeight;modality.cover.style.display=mode?"inline-block":"none"}function button(text,result){var button_css="dhtmlx_"+text.toLowerCase().replace(/ /g,"_")+"_button";return"<div class='dhtmlx_popup_button "+button_css+"' result='"+result+"' ><div>"+text+"</div></div>"}function info(text){t.area||(t.area=document.createElement("DIV"),t.area.className="dhtmlx_message_area",t.area.style[t.position]="5px",document.body.appendChild(t.area)),t.hide(text.id);var message=document.createElement("DIV");return message.innerHTML="<div>"+text.text+"</div>",message.className="dhtmlx-info dhtmlx-"+text.type,message.onclick=function(){t.hide(text.id),text=null},"bottom"==t.position&&t.area.firstChild?t.area.insertBefore(message,t.area.firstChild):t.area.appendChild(message),text.expire>0&&(t.timers[text.id]=window.setTimeout(function(){t.hide(text.id)},text.expire)),t.pull[text.id]=message,message=null,text.id}function _boxStructure(config,ok,cancel){var box=document.createElement("DIV");box.className=" dhtmlx_modal_box dhtmlx-"+config.type,box.setAttribute("dhxbox",1);var inner="";if(config.width&&(box.style.width=config.width),config.height&&(box.style.height=config.height),config.title&&(inner+='<div class="dhtmlx_popup_title">'+config.title+"</div>"),inner+='<div class="dhtmlx_popup_text"><span>'+(config.content?"":config.text)+'</span></div><div  class="dhtmlx_popup_controls">',ok&&(inner+=button(config.ok||"OK",!0)),cancel&&(inner+=button(config.cancel||"Cancel",!1)),config.buttons)for(var i=0;i<config.buttons.length;i++)inner+=button(config.buttons[i],i);if(inner+="</div>",box.innerHTML=inner,config.content){var node=config.content;"string"==typeof node&&(node=document.getElementById(node)),"none"==node.style.display&&(node.style.display=""),box.childNodes[config.title?1:0].appendChild(node)}return box.onclick=function(e){e=e||event;var source=e.target||e.srcElement;if(source.className||(source=source.parentNode),"dhtmlx_popup_button"==source.className.split(" ")[0]){var result=source.getAttribute("result");result="true"==result||("false"==result?!1:result),callback(config,result)}},config.box=box,(ok||cancel)&&(_dhx_msg_cfg=config),box}function _createBox(config,ok,cancel){var box=config.tagName?config:_boxStructure(config,ok,cancel);config.hidden||modality(!0),document.body.appendChild(box);var x=Math.abs(Math.floor(((window.innerWidth||document.documentElement.offsetWidth)-box.offsetWidth)/2)),y=Math.abs(Math.floor(((window.innerHeight||document.documentElement.offsetHeight)-box.offsetHeight)/2));return box.style.top="top"==config.position?"-3px":y+"px",box.style.left=x+"px",box.onkeydown=modal_key,box.focus(),config.hidden&&dhtmlx.modalbox.hide(box),box}function alertPopup(config){return _createBox(config,!0,!1)}function confirmPopup(config){return _createBox(config,!0,!0)}function boxPopup(config){return _createBox(config)}function box_params(text,type,callback){return"object"!=typeof text&&("function"==typeof type&&(callback=type,type=""),text={text:text,type:type,callback:callback}),text}function params(text,type,expire,id){return"object"!=typeof text&&(text={text:text,type:type,expire:expire,id:id}),text.id=text.id||t.uid(),text.expire=text.expire||t.expire,text}var _dhx_msg_cfg=null;document.attachEvent?document.attachEvent("onkeydown",modal_key):document.addEventListener("keydown",modal_key,!0),dhtmlx.alert=function(){var text=box_params.apply(this,arguments);return text.type=text.type||"confirm",alertPopup(text)},dhtmlx.confirm=function(){var text=box_params.apply(this,arguments);return text.type=text.type||"alert",confirmPopup(text)},dhtmlx.modalbox=function(){var text=box_params.apply(this,arguments);return text.type=text.type||"alert",boxPopup(text)},dhtmlx.modalbox.hide=function(node){for(;node&&node.getAttribute&&!node.getAttribute("dhxbox");)node=node.parentNode;node&&(node.parentNode.removeChild(node),modality(!1))};var t=dhtmlx.message=function(text){text=params.apply(this,arguments),text.type=text.type||"info";var subtype=text.type.split("-")[0];switch(subtype){case"alert":return alertPopup(text);case"confirm":return confirmPopup(text);case"modalbox":return boxPopup(text);default:return info(text)}};t.seed=(new Date).valueOf(),t.uid=function(){return t.seed++},t.expire=4e3,t.keyboard=!0,t.position="top",t.pull={},t.timers={},t.hideAll=function(){for(var key in t.pull)t.hide(key)},t.hide=function(id){var obj=t.pull[id];obj&&obj.parentNode&&(window.setTimeout(function(){obj.parentNode.removeChild(obj),obj=null},2e3),obj.className+=" hidden",t.timers[id]&&window.clearTimeout(t.timers[id]),delete t.pull[id])}}(),gantt={version:"3.1.0"},dhtmlxEventable=function(obj){obj._silent_mode=!1,obj._silentStart=function(){this._silent_mode=!0},obj._silentEnd=function(){this._silent_mode=!1},obj.attachEvent=function(name,catcher,callObj){return name="ev_"+name.toLowerCase(),this[name]||(this[name]=new this._eventCatcher(callObj||this)),name+":"+this[name].addEvent(catcher)},obj.callEvent=function(name,arg0){return this._silent_mode?!0:(name="ev_"+name.toLowerCase(),this[name]?this[name].apply(this,arg0):!0)},obj.checkEvent=function(name){return!!this["ev_"+name.toLowerCase()]},obj._eventCatcher=function(obj){var dhx_catch=[],z=function(){for(var res=!0,i=0;i<dhx_catch.length;i++)if(dhx_catch[i]){var zr=dhx_catch[i].apply(obj,arguments);res=res&&zr}return res};return z.addEvent=function(ev){return"function"!=typeof ev&&(ev=eval(ev)),ev?dhx_catch.push(ev)-1:!1},z.removeEvent=function(id){dhx_catch[id]=null},z},obj.detachEvent=function(id){if(id){var list=id.split(":");this[list[0]].removeEvent(list[1])}},obj.detachAllEvents=function(){for(var name in this)0===name.indexOf("ev_")&&delete this[name]},obj=null},dhtmlx.copy=function(object){var i,t,result;if(object&&"object"==typeof object){for(result={},t=[Array,Date,Number,String,Boolean],i=0;i<t.length;i++)object instanceof t[i]&&(result=i?new t[i](object):new t[i]);for(i in object)Object.prototype.hasOwnProperty.apply(object,[i])&&(result[i]=dhtmlx.copy(object[i]))}return result||object},dhtmlx.mixin=function(target,source,force){for(var f in source)(!target[f]||force)&&(target[f]=source[f]);return target},dhtmlx.defined=function(obj){return"undefined"!=typeof obj},dhtmlx.uid=function(){return this._seed||(this._seed=(new Date).valueOf()),this._seed++,this._seed},dhtmlx.bind=function(functor,object){return function(){return functor.apply(object,arguments)}},gantt._get_position=function(elem){var top=0,left=0;if(elem.getBoundingClientRect){var box=elem.getBoundingClientRect(),body=document.body,docElem=document.documentElement,scrollTop=window.pageYOffset||docElem.scrollTop||body.scrollTop,scrollLeft=window.pageXOffset||docElem.scrollLeft||body.scrollLeft,clientTop=docElem.clientTop||body.clientTop||0,clientLeft=docElem.clientLeft||body.clientLeft||0;return top=box.top+scrollTop-clientTop,left=box.left+scrollLeft-clientLeft,{y:Math.round(top),x:Math.round(left),width:elem.offsetWidth,height:elem.offsetHeight}}for(;elem;)top+=parseInt(elem.offsetTop,10),left+=parseInt(elem.offsetLeft,10),elem=elem.offsetParent;return{y:top,x:left,width:elem.offsetWidth,height:elem.offsetHeight}},gantt._detectScrollSize=function(){var div=document.createElement("div");div.style.cssText="visibility:hidden;position:absolute;left:-1000px;width:100px;padding:0px;margin:0px;height:110px;min-height:100px;overflow-y:scroll;",document.body.appendChild(div);var width=div.offsetWidth-div.clientWidth;return document.body.removeChild(div),width},dhtmlxEventable(gantt),gantt._click={},gantt._dbl_click={},gantt._context_menu={},gantt._on_click=function(e){e=e||window.event;var trg=e.target||e.srcElement,id=gantt.locate(e),res=!0;if(null!==id?res=!gantt.checkEvent("onTaskClick")||gantt.callEvent("onTaskClick",[id,e]):gantt.callEvent("onEmptyClick",[e]),res){var default_action=gantt._find_ev_handler(e,trg,gantt._click,id);if(!default_action)return;id&&gantt.getTask(id)&&gantt.config.select_task&&gantt.selectTask(id)}},gantt._on_contextmenu=function(e){e=e||window.event;var src=e.target||e.srcElement,taskId=gantt.locate(src),linkId=gantt.locate(src,gantt.config.link_attribute),res=!gantt.checkEvent("onContextMenu")||gantt.callEvent("onContextMenu",[taskId,linkId,e]);return res||(e.preventDefault?e.preventDefault():e.returnValue=!1),res},gantt._find_ev_handler=function(e,trg,hash,id){for(var res=!0;trg;){var css=trg.className||"";if(css){css=css.split(" ");for(var i=0;i<css.length;i++)if(css[i]&&hash[css[i]]){var handler=hash[css[i]].call(gantt,e,id,trg);res=res&&!("undefined"!=typeof handler&&handler!==!0)}}trg=trg.parentNode}return res},gantt._on_dblclick=function(e){e=e||window.event;var trg=e.target||e.srcElement,id=gantt.locate(e),res=!gantt.checkEvent("onTaskDblClick")||gantt.callEvent("onTaskDblClick",[id,e]);if(res){var default_action=gantt._find_ev_handler(e,trg,gantt._dbl_click,id);if(!default_action)return;null!==id&&gantt.getTask(id)&&res&&gantt.config.details_on_dblclick&&gantt.showLightbox(id)}},gantt._on_mousemove=function(e){if(gantt.checkEvent("onMouseMove")){var id=gantt.locate(e);gantt._last_move_event=e,gantt.callEvent("onMouseMove",[id,e])}},dhtmlxDnD.prototype={dragStart:function(obj,e){this.config={obj:obj,marker:null,started:!1,pos:this.getPosition(e),sensitivity:4},this._settings&&dhtmlx.mixin(this.config,this._settings,!0);var mousemove=dhtmlx.bind(function(e){return this.dragMove(obj,e)},this),limited_mousemove=(dhtmlx.bind(function(e){return this.dragScroll(obj,e)},this),dhtmlx.bind(function(e){return dhtmlx.defined(this.config.updates_per_second)&&!gantt._checkTimeout(this,this.config.updates_per_second)?!0:mousemove(e)},this)),mouseup=dhtmlx.bind(function(){return dhtmlxDetachEvent(document.body,"mousemove",limited_mousemove),dhtmlxDetachEvent(document.body,"mouseup",mouseup),this.dragEnd(obj)},this);dhtmlxEvent(document.body,"mousemove",limited_mousemove),dhtmlxEvent(document.body,"mouseup",mouseup),document.body.className+=" gantt_noselect"},dragMove:function(obj,e){if(!this.config.marker&&!this.config.started){var pos=this.getPosition(e),diff_x=pos.x-this.config.pos.x,diff_y=pos.y-this.config.pos.y,distance=Math.sqrt(Math.pow(Math.abs(diff_x),2)+Math.pow(Math.abs(diff_y),2));if(distance>this.config.sensitivity){if(this.config.started=!0,this.config.ignore=!1,this.callEvent("onBeforeDragStart",[obj,this.config.original_target])===!1)return this.config.ignore=!0,!0;var marker=this.config.marker=document.createElement("div");marker.className="gantt_drag_marker",marker.innerHTML="Dragging object",document.body.appendChild(marker),this.callEvent("onAfterDragStart",[obj,this.config.original_target])}else this.config.ignore=!0}this.config.ignore||(e.pos=this.getPosition(e),this.config.marker.style.left=e.pos.x+"px",this.config.marker.style.top=e.pos.y+"px",this.callEvent("onDragMove",[obj,e]))},dragEnd:function(){this.config.marker&&(this.config.marker.parentNode.removeChild(this.config.marker),this.config.marker=null,this.callEvent("onDragEnd",[])),document.body.className=document.body.className.replace(" gantt_noselect","")},getPosition:function(e){var x=0,y=0;return e=e||window.event,e.pageX||e.pageY?(x=e.pageX,y=e.pageY):(e.clientX||e.clientY)&&(x=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,y=e.clientY+document.body.scrollTop+document.documentElement.scrollTop),{x:x,y:y}}},gantt._init_grid=function(){this._click.gantt_close=dhtmlx.bind(function(e,id){return this.close(id),!1},this),this._click.gantt_open=dhtmlx.bind(function(e,id){return this.open(id),!1},this),this._click.gantt_row=dhtmlx.bind(function(e,id,trg){if(null!==id){var task=this.getTask(id);this.showDate(task.start_date),this.callEvent("onTaskRowClick",[id,trg])}},this),this._click.gantt_grid_head_cell=dhtmlx.bind(function(e,id,trg){var column=trg.getAttribute("column_id");if(this.callEvent("onGridHeaderClick",[column,e]))if("add"==column)this._click.gantt_add(e,this.config.root_id);else if(this.config.sort){var sort=this._sort&&this._sort.direction&&this._sort.name==column?this._sort.direction:"desc";sort="desc"==sort?"asc":"desc",this._sort={name:column,direction:sort},this._render_grid_header(),this.sort(column,"desc"==sort)}},this),!this.config.sort&&this.config.order_branch&&this._init_dnd(),this._click.gantt_add=dhtmlx.bind(function(e,id){if(!this.config.readonly){var item={};return this.createTask(item,id?id:this.config.root_id),!1}},this),this._init_resize&&this._init_resize()},gantt._render_grid=function(){this._is_grid_visible()&&(this._calc_grid_width(),this._render_grid_header())},gantt._calc_grid_width=function(){if(this.config.autofit){var columns=this.getGridColumns(),cols_width=0,unknown=[],width=[];this._reset_columns_width();for(var i=0;i<columns.length;i++){var v=parseInt(columns[i].width,10);window.isNaN(v)&&(v=50,unknown.push(i)),width[i]=v,cols_width+=v}{var diff=this._get_grid_width()-cols_width;diff/(unknown.length>0?unknown.length:width.length>0?width.length:1)}if(unknown.length>0)for(var delta=diff/(unknown.length?unknown.length:1),i=0;i<unknown.length;i++){var index=unknown[i];
width[index]+=delta}else for(var delta=diff/(width.length?width.length:1),i=0;i<width.length;i++)width[i]+=delta;for(var i=0;i<width.length;i++)columns[i].width=width[i]}},gantt._render_grid_header=function(){for(var columns=this.getGridColumns(),cells=[],width=0,labels=this.locale.labels,lineHeigth=this.config.scale_height-2,i=0;i<columns.length;i++){var last=i==columns.length-1,col=columns[i];last&&this._get_grid_width()>width+col.width&&(col.width=this._get_grid_width()-width),width+=col.width;var sort=this._sort&&col.name==this._sort.name?"<div class='gantt_sort gantt_"+this._sort.direction+"'></div>":"",cssClass=["gantt_grid_head_cell","gantt_grid_head_"+col.name,last?"gantt_last_cell":"",this.templates.grid_header_class(col.name,col)].join(" "),style="width:"+(col.width-(last?1:0))+"px;",label=col.label||labels["column_"+col.name];label=label||"";var cell="<div class='"+cssClass+"' style='"+style+"' column_id='"+col.name+"'>"+label+sort+"</div>";cells.push(cell)}this.$grid_scale.style.height=this.config.scale_height-1+"px",this.$grid_scale.style.lineHeight=lineHeigth+"px",this.$grid_scale.style.width=width-1+"px",this.$grid_scale.innerHTML=cells.join(""),this._render_grid_header_resize&&this._render_grid_header_resize()},gantt._render_grid_item=function(item){if(!gantt._is_grid_visible())return null;for(var columns=this.getGridColumns(),cells=[],i=0;i<columns.length;i++){var cell,value,last=i==columns.length-1,col=columns[i];"add"==col.name&&i==columns.length-1?value="<div class='gantt_add'></div>":(value=col.template?col.template(item):item[col.name],value instanceof Date&&(value=this.templates.date_grid(value)),value="<div class='gantt_tree_content'>"+value+"</div>");var css="gantt_cell"+(last?" gantt_last_cell":""),tree="";if(col.tree){for(var j=0;j<item.$level;j++)tree+=this.templates.grid_indent(item);var has_child=this._has_children(item.id);has_child?(tree+=this.templates.grid_open(item),tree+=this.templates.grid_folder(item)):(tree+=this.templates.grid_blank(item),tree+=this.templates.grid_file(item))}var style="width:"+(col.width-(last?1:0))+"px;";dhtmlx.defined(col.align)&&(style+="text-align:"+col.align+";"),cell="<div class='"+css+"' style='"+style+"'>"+tree+value+"</div>",cells.push(cell)}var css=item.$index%2===0?"":" odd";if(css+=item.$transparent?" gantt_transparent":"",this.templates.grid_row_class){var css_template=this.templates.grid_row_class.call(this,item.start_date,item.end_date,item);css_template&&(css+=" "+css_template)}this.getState().selected_task==item.id&&(css+=" gantt_selected");var el=document.createElement("div");return el.className="gantt_row"+css,el.style.height=this.config.row_height+"px",el.style.lineHeight=gantt.config.row_height+"px",el.setAttribute(this.config.task_attribute,item.id),el.innerHTML=cells.join(""),el},gantt.open=function(id){gantt._set_item_state(id,!0),this.callEvent("onTaskOpened",[id])},gantt.close=function(id){gantt._set_item_state(id,!1),this.callEvent("onTaskClosed",[id])},gantt._set_item_state=function(id,state){id&&this._pull[id]&&(this._pull[id].$open=state,this.refreshData())},gantt._is_grid_visible=function(){return this.config.grid_width&&this.config.show_grid},gantt._get_grid_width=function(){return this._is_grid_visible()?this._is_chart_visible()?this.config.grid_width:this._x:0},gantt.getTaskIndex=function(id){for(var branch=this._branches[this.getTask(id).parent],i=0;i<branch.length;i++)if(branch[i]==id)return i;return-1},gantt.getGlobalTaskIndex=function(id){for(var branch=this._order,i=0;i<branch.length;i++)if(branch[i]==id)return i;return-1},gantt.moveTask=function(sid,tindex,parent){var id=arguments[3];if(id){if(id===sid)return;parent=this.getTask(id).parent,tindex=this.getTaskIndex(id)}if(sid!=parent){parent=parent||this.config.root_id;var source=this.getTask(sid),tbranch=(this._branches[source.parent],this._branches[parent]||[]);if(-1==tindex&&(tindex=tbranch.length+1),source.parent==parent){var sindex=this.getTaskIndex(sid);if(sindex==tindex)return}this._replace_branch_child(source.parent,sid),tbranch=this._branches[parent]||[];var tid=tbranch[tindex];tid?tbranch=tbranch.slice(0,tindex).concat([sid]).concat(tbranch.slice(tindex)):tbranch.push(sid),source.parent=parent,this._branches[parent]=tbranch;for(var childTree=this._getTaskTree(sid),i=0;i<childTree.length;i++){var item=this._pull[childTree[i]];item&&(item.$level=this.calculateTaskLevel(item))}source.$drop_target=1*tindex>0?id?(this.getTaskIndex(sid)>this.getTaskIndex(id)?"next:":"")+id:"next:"+gantt.getPrevSibling(sid):tbranch[1*tindex+1]?tbranch[1*tindex+1]:parent,this.refreshData()}},gantt._init_dnd=function(){var dnd=new dhtmlxDnD(this.$grid_data,{updates_per_second:60});dhtmlx.defined(this.config.dnd_sensitivity)&&(dnd.config.sensitivity=this.config.dnd_sensitivity),dnd.attachEvent("onBeforeDragStart",dhtmlx.bind(function(obj,e){var el=this._locateHTML(e);if(!el)return!1;this.hideQuickInfo&&this._hideQuickInfo();var id=this.locate(e),task=gantt.getTask(id);return gantt._is_readonly(task)?!1:(dnd.config.initial_open_state=task.$open,this.callEvent("onRowDragStart",[id,e.target||e.srcElement,e])?void 0:!1)},this)),dnd.attachEvent("onAfterDragStart",dhtmlx.bind(function(obj,e){var el=this._locateHTML(e);dnd.config.marker.innerHTML=el.outerHTML,dnd.config.id=this.locate(e);var task=this.getTask(dnd.config.id);task.$open=!1,task.$transparent=!0,this.refreshData()},this)),dnd.lastTaskOfLevel=function(level){for(var ids=gantt._order,pull=gantt._pull,last_item=null,i=0,len=ids.length;len>i;i++)pull[ids[i]].$level==level&&(last_item=pull[ids[i]]);return last_item?last_item.id:null},dnd._getGridPos=dhtmlx.bind(function(e){var pos=this._get_position(this.$grid_data),x=pos.x,y=e.pos.y-10;return y<pos.y&&(y=pos.y),y>pos.y+this.$grid_data.offsetHeight-this.config.row_height&&(y=pos.y+this.$grid_data.offsetHeight-this.config.row_height),pos.x=x,pos.y=y,pos},this),dnd.attachEvent("onDragMove",dhtmlx.bind(function(obj,e){var dd=dnd.config,pos=dnd._getGridPos(e);dd.marker.style.left=pos.x+10+"px",dd.marker.style.top=pos.y+"px",pos=dnd._getGridPos(e);var y=(pos.x,pos.y),target=document.elementFromPoint(pos.x-document.body.scrollLeft+1,y-document.body.scrollTop),el=this.locate(target),item=this.getTask(dnd.config.id);if(this.isTaskExists(el)||(el=dnd.lastTaskOfLevel(item.$level),el==dnd.config.id&&(el=null)),this.isTaskExists(el)){var box=gantt._get_position(target),over=this.getTask(el);if(box.y+target.offsetHeight/2<y){var index=this.getGlobalTaskIndex(over.id),next=this._pull[this._order[index+1]];if(next){if(next.id==item.id)return;over=next}else if(next=this._pull[this._order[index]],next.$level==item.$level&&next.id!=item.id)return void this.moveTask(item.id,-1,next.parent)}for(var index=this.getGlobalTaskIndex(over.id),prev=this._pull[this._order[index-1]],shift=1;(!prev||prev.id==over.id)&&index-shift>=0;)prev=this._pull[this._order[index-shift]],shift++;if(item.id==over.id)return;over.$level==item.$level&&item.id!=over.id?this.moveTask(item.id,0,0,over.id):over.$level!=item.$level-1||gantt.getChildren(over.id).length?prev&&prev.$level==item.$level&&item.id!=prev.id&&this.moveTask(item.id,-1,prev.parent):this.moveTask(item.id,0,over.id)}return!0},this)),dnd.attachEvent("onDragEnd",dhtmlx.bind(function(){var task=this.getTask(dnd.config.id);task.$transparent=!1,task.$open=dnd.config.initial_open_state,this.refreshData(),this.callEvent("onRowDragEnd",[dnd.config.id,task.$drop_target])},this))},gantt.getGridColumns=function(){return this.config.columns},gantt._reset_columns_width=function(){var original=gantt._original_columns,current=gantt.config.columns;if(!original||original.length!=current.length)return!1;for(var i=0;i<original.length;i++)current[i].width=original[i].width;return!0},gantt._has_children=function(id){return this.getChildren(id).length>0},gantt._scale_helpers={getSum:function(sizes,from,to){void 0===to&&(to=sizes.length-1),void 0===from&&(from=0);for(var summ=0,i=from;to>=i;i++)summ+=sizes[i];return summ},setSumWidth:function(sum_width,scale,from,to){var parts=scale.width;void 0===to&&(to=parts.length-1),void 0===from&&(from=0);var length=to-from+1;if(!(from>parts.length-1||0>=length||to>parts.length-1)){var oldWidth=this.getSum(parts,from,to),diff=sum_width-oldWidth;this.adjustSize(diff,parts,from,to),this.adjustSize(-diff,parts,to+1),scale.full_width=this.getSum(parts)}},splitSize:function(width,count){for(var arr=[],i=0;count>i;i++)arr[i]=0;return this.adjustSize(width,arr),arr},adjustSize:function(width,parts,from,to){from||(from=0),void 0===to&&(to=parts.length-1);for(var length=to-from+1,full=this.getSum(parts,from,to),shared=0,i=from;to>=i;i++){var share=Math.floor(width*(full?parts[i]/full:1/length));full-=parts[i],width-=share,length--,parts[i]+=share,shared+=share}parts[parts.length-1]+=width},sortScales:function(scales){function cellSize(unit,step){var d=new Date(1970,0,1);return gantt.date.add(d,step,unit)-d}scales.sort(function(a,b){return cellSize(a.unit,a.step)<cellSize(b.unit,b.step)?1:cellSize(a.unit,a.step)>cellSize(b.unit,b.step)?-1:0})},primaryScale:function(){return gantt._init_template("date_scale"),{unit:gantt.config.scale_unit,step:gantt.config.step,template:gantt.templates.date_scale,date:gantt.config.date_scale,css:gantt.templates.scale_cell_class}},prepareConfigs:function(scales,min_coll_width,container_width,scale_height){for(var heights=this.splitSize(scale_height,scales.length),full_width=container_width,configs=[],i=scales.length-1;i>=0;i--){var main_scale=i==scales.length-1,cfg=this.initScaleConfig(scales[i]);main_scale&&this.processIgnores(cfg),this.initColSizes(cfg,min_coll_width,full_width,heights[i]),this.limitVisibleRange(cfg),main_scale&&(full_width=cfg.full_width),configs.unshift(cfg)}for(var i=0;i<configs.length-1;i++)this.alineScaleColumns(configs[configs.length-1],configs[i]);return configs},_ignore_time_config:function(date){return this.config.skip_off_time?!this.isWorkTime(date):!1},processIgnores:function(config){config.ignore_x={},config.display_count=config.count},initColSizes:function(config,min_col_width,full_width,line_height){var cont_width=full_width;config.height=line_height;var column_count=void 0===config.display_count?config.count:config.display_count;column_count||(column_count=1),config.col_width=Math.floor(cont_width/column_count),min_col_width&&config.col_width<min_col_width&&(config.col_width=min_col_width,cont_width=config.col_width*column_count),config.width=[];for(var ignores=config.ignore_x||{},i=0;i<config.trace_x.length;i++)config.width[i]=ignores[config.trace_x[i].valueOf()]||config.display_count==config.count?0:1;this.adjustSize(cont_width-this.getSum(config.width),config.width),config.full_width=this.getSum(config.width)},initScaleConfig:function(config){var cfg=dhtmlx.mixin({count:0,col_width:0,full_width:0,height:0,width:[],trace_x:[]},config);return this.eachColumn(config.unit,config.step,function(date){cfg.count++,cfg.trace_x.push(new Date(date))}),cfg},iterateScales:function(lower_scale,upper_scale,from,to,callback){for(var upper_dates=upper_scale.trace_x,lower_dates=lower_scale.trace_x,prev=from||0,end=to||lower_dates.length-1,prevUpper=0,up=1;up<upper_dates.length;up++)for(var next=prev;end>=next;next++)+lower_dates[next]!=+upper_dates[up]||(callback&&callback.apply(this,[prevUpper,up,prev,next]),prev=next,prevUpper=up)},alineScaleColumns:function(lower_scale,upper_scale,from,to){this.iterateScales(lower_scale,upper_scale,from,to,function(upper_start,upper_end,lower_start,lower_end){var targetWidth=this.getSum(lower_scale.width,lower_start,lower_end-1),actualWidth=this.getSum(upper_scale.width,upper_start,upper_end-1);actualWidth!=targetWidth&&this.setSumWidth(targetWidth,upper_scale,upper_start,upper_end-1)})},eachColumn:function(unit,step,callback){var start=new Date(gantt._min_date),end=new Date(gantt._max_date);gantt.date[unit+"_start"]&&(start=gantt.date[unit+"_start"](start));var curr=new Date(start);for(+curr>=+end&&(end=gantt.date.add(curr,step,unit));+end>+curr;)callback.call(this,new Date(curr)),curr=gantt.date.add(curr,step,unit)},limitVisibleRange:function(cfg){var dates=cfg.trace_x,left=0,right=cfg.width.length-1,diff=0;if(+dates[0]<+gantt._min_date&&left!=right){var width=Math.floor(cfg.width[0]*((dates[1]-gantt._min_date)/(dates[1]-dates[0])));diff+=cfg.width[0]-width,cfg.width[0]=width,dates[0]=new Date(gantt._min_date)}var last=dates.length-1,lastDate=dates[last],outDate=gantt.date.add(lastDate,cfg.step,cfg.unit);if(+outDate>+gantt._max_date&&last>0){var width=cfg.width[last]-Math.floor(cfg.width[last]*((outDate-gantt._max_date)/(outDate-lastDate)));diff+=cfg.width[last]-width,cfg.width[last]=width}if(diff){for(var full=this.getSum(cfg.width),shared=0,i=0;i<cfg.width.length;i++){var share=Math.floor(diff*(cfg.width[i]/full));cfg.width[i]+=share,shared+=share}this.adjustSize(diff-shared,cfg.width)}}},gantt._tasks_dnd={drag:null,_events:{before_start:{},before_finish:{},after_finish:{}},_handlers:{},init:function(){this.clear_drag_state();var drag=gantt.config.drag_mode;this.set_actions();var evs={before_start:"onBeforeTaskDrag",before_finish:"onBeforeTaskChanged",after_finish:"onAfterTaskDrag"};for(var stage in this._events)for(var mode in drag)this._events[stage][mode]=evs[stage];this._handlers[drag.move]=this._move,this._handlers[drag.resize]=this._resize,this._handlers[drag.progress]=this._resize_progress},set_actions:function(){var data=gantt.$task_data;dhtmlxEvent(data,"mousemove",dhtmlx.bind(function(e){this.on_mouse_move(e||event)},this)),dhtmlxEvent(data,"mousedown",dhtmlx.bind(function(e){this.on_mouse_down(e||event)},this)),dhtmlxEvent(data,"mouseup",dhtmlx.bind(function(e){this.on_mouse_up(e||event)},this))},clear_drag_state:function(){this.drag={id:null,mode:null,pos:null,start_x:null,start_y:null,obj:null,left:null}},_resize:function(ev,shift,drag){var cfg=gantt.config,coords_x=this._drag_task_coords(ev,drag);drag.left?(ev.start_date=gantt._date_from_pos(coords_x.start+shift),ev.start_date||(ev.start_date=new Date(gantt.getState().min_date))):(ev.end_date=gantt._date_from_pos(coords_x.end+shift),ev.end_date||(ev.end_date=new Date(gantt.getState().max_date))),ev.end_date-ev.start_date<cfg.min_duration&&(drag.left?ev.start_date=gantt.calculateEndDate(ev.end_date,-1):ev.end_date=gantt.calculateEndDate(ev.start_date,1)),gantt._init_task_timing(ev)},_resize_progress:function(ev,shift,drag){var coords_x=this._drag_task_coords(ev,drag),diff=Math.max(0,drag.pos.x-coords_x.start);ev.progress=Math.min(1,diff/(coords_x.end-coords_x.start))},_move:function(ev,shift,drag){var coords_x=this._drag_task_coords(ev,drag),new_start=gantt._date_from_pos(coords_x.start+shift),new_end=gantt._date_from_pos(coords_x.end+shift);new_start?new_end?(ev.start_date=new_start,ev.end_date=new_end):(ev.end_date=new Date(gantt.getState().max_date),ev.start_date=gantt._date_from_pos(gantt.posFromDate(ev.end_date)-(coords_x.end-coords_x.start))):(ev.start_date=new Date(gantt.getState().min_date),ev.end_date=gantt._date_from_pos(gantt.posFromDate(ev.start_date)+(coords_x.end-coords_x.start)))},_drag_task_coords:function(t,drag){var start=drag.obj_s_x=drag.obj_s_x||gantt.posFromDate(t.start_date),end=drag.obj_e_x=drag.obj_e_x||gantt.posFromDate(t.end_date);return{start:start,end:end}},on_mouse_move:function(e){this.drag.start_drag&&this._start_dnd(e);var drag=this.drag;if(drag.mode){if(!gantt._checkTimeout(this,40))return;this._update_on_move(e)}},_update_on_move:function(e){var drag=this.drag;if(drag.mode){var pos=gantt._get_mouse_pos(e);if(drag.pos&&drag.pos.x==pos.x)return;drag.pos=pos;var curr_date=gantt._date_from_pos(pos.x);if(!curr_date||isNaN(curr_date.getTime()))return;var shift=pos.x-drag.start_x,ev=gantt.getTask(drag.id);if(this._handlers[drag.mode]){var original=dhtmlx.mixin({},ev),copy=dhtmlx.mixin({},ev);this._handlers[drag.mode].apply(this,[copy,shift,drag]),dhtmlx.mixin(ev,copy,!0),gantt._update_parents(drag.id,!0),gantt.callEvent("onTaskDrag",[ev.id,drag.mode,copy,original,e]),dhtmlx.mixin(ev,copy,!0),gantt._update_parents(drag.id),gantt.refreshTask(drag.id)}}},on_mouse_down:function(e,src){if(2!=e.button){var id=gantt.locate(e),task=null;if(gantt.isTaskExists(id)&&(task=gantt.getTask(id)),!gantt._is_readonly(task)&&!this.drag.mode){this.clear_drag_state(),src=src||e.target||e.srcElement;var className=gantt._trim(src.className||"");if(!className||!this._get_drag_mode(className))return src.parentNode?this.on_mouse_down(e,src.parentNode):void 0;var drag=this._get_drag_mode(className);if(drag)if(drag.mode&&drag.mode!=gantt.config.drag_mode.ignore&&gantt.config["drag_"+drag.mode]){if(id=gantt.locate(src),task=dhtmlx.copy(gantt.getTask(id)||{}),gantt._is_readonly(task))return this.clear_drag_state(),!1;if(gantt._is_flex_task(task)&&drag.mode!=gantt.config.drag_mode.progress)return void this.clear_drag_state();drag.id=id;var pos=gantt._get_mouse_pos(e);drag.start_x=pos.x,drag.start_y=pos.y,drag.obj=task,this.drag.start_drag=drag}else this.clear_drag_state();else if(gantt.checkEvent("onMouseDown")&&gantt.callEvent("onMouseDown",[className.split(" ")[0]])&&src.parentNode)return this.on_mouse_down(e,src.parentNode)}}},_fix_dnd_scale_time:function(task,drag){var unit=gantt._tasks.unit,step=gantt._tasks.step;gantt.config.round_dnd_dates||(unit="minute",step=gantt.config.time_step),drag.mode==gantt.config.drag_mode.resize?drag.left?task.start_date=gantt.roundDate({date:task.start_date,unit:unit,step:step}):task.end_date=gantt.roundDate({date:task.end_date,unit:unit,step:step}):drag.mode==gantt.config.drag_mode.move&&(task.start_date=gantt.roundDate({date:task.start_date,unit:unit,step:step}),task.end_date=gantt.calculateEndDate(task.start_date,task.duration,gantt.config.duration_unit))},_fix_working_times:function(task,drag){var drag=drag||{mode:gantt.config.drag_mode.move};gantt.config.work_time&&gantt.config.correct_work_time&&(drag.mode==gantt.config.drag_mode.resize?drag.left?task.start_date=gantt.getClosestWorkTime({date:task.start_date,dir:"future"}):task.end_date=gantt.getClosestWorkTime({date:task.end_date,dir:"past"}):drag.mode==gantt.config.drag_mode.move&&gantt.correctTaskWorkTime(task))},on_mouse_up:function(e){var drag=this.drag;if(drag.mode&&drag.id){var ev=gantt.getTask(drag.id);if(gantt.config.work_time&&gantt.config.correct_work_time&&this._fix_working_times(ev,drag),this._fix_dnd_scale_time(ev,drag),gantt._init_task_timing(ev),this._fireEvent("before_finish",drag.mode,[drag.id,drag.mode,dhtmlx.copy(drag.obj),e])){var drag_id=drag.id;gantt._init_task_timing(ev),this._fireEvent("after_finish",drag.mode,[drag_id,drag.mode,e]),this.clear_drag_state(),gantt.updateTask(ev.id)}else drag.obj._dhx_changed=!1,dhtmlx.mixin(ev,drag.obj,!0),gantt.updateTask(ev.id)}this.clear_drag_state()},_get_drag_mode:function(className){var modes=gantt.config.drag_mode,classes=(className||"").split(" "),classname=classes[0],drag={mode:null,left:null};switch(classname){case"gantt_task_line":case"gantt_task_content":drag.mode=modes.move;break;case"gantt_task_drag":drag.mode=modes.resize,drag.left=classes[1]&&-1!==classes[1].indexOf("left",classes[1].length-"left".length)?!0:!1;break;case"gantt_task_progress_drag":drag.mode=modes.progress;break;case"gantt_link_control":case"gantt_link_point":drag.mode=modes.ignore;break;default:drag=null}return drag},_start_dnd:function(e){if(this.drag&&this.drag.start_drag){var drag=this.drag=this.drag.start_drag;delete drag.start_drag;var cfg=gantt.config,id=drag.id;cfg["drag_"+drag.mode]&&gantt.callEvent("onBeforeDrag",[id,drag.mode,e])&&this._fireEvent("before_start",drag.mode,[id,drag.mode,e])?delete drag.start_drag:this.clear_drag_state()}},_fireEvent:function(stage,mode,params){dhtmlx.assert(this._events[stage],"Invalid stage:{"+stage+"}");var trigger=this._events[stage][mode];return dhtmlx.assert(trigger,"Unknown after drop mode:{"+mode+"}"),dhtmlx.assert(params,"Invalid event arguments"),gantt.checkEvent(trigger)?gantt.callEvent(trigger,params):!0}},gantt.roundTaskDates=function(task){var drag_state=gantt._tasks_dnd.drag;drag_state||(drag_state={mode:gantt.config.drag_mode.move}),gantt._tasks_dnd._fix_dnd_scale_time(task,drag_state)},gantt._render_link=function(id){var link=this.getLink(id);gantt._linkRenderer.render_item(link,this.$task_links)},gantt._get_link_type=function(from_start,to_start){var type=null;return from_start&&to_start?type=gantt.config.links.start_to_start:!from_start&&to_start?type=gantt.config.links.finish_to_start:from_start||to_start?from_start&&!to_start&&(type=gantt.config.links.start_to_finish):type=gantt.config.links.finish_to_finish,type},gantt.isLinkAllowed=function(from,to,from_start,to_start){var link=null;if(link="object"==typeof from?from:{source:from,target:to,type:this._get_link_type(from_start,to_start)},!link)return!1;if(!(link.source&&link.target&&link.type))return!1;if(link.source==link.target)return!1;var res=!0;return this.checkEvent("onLinkValidation")&&(res=this.callEvent("onLinkValidation",[link])),res},gantt._render_link_element=function(link){var dots=this._path_builder.get_points(link),drawer=gantt._drawer,lines=drawer.get_lines(dots),div=document.createElement("div"),css="gantt_task_link";link.color&&(css+=" gantt_link_inline_color");var cssTemplate=this.templates.link_class?this.templates.link_class(link):"";cssTemplate&&(css+=" "+cssTemplate),this.config.highlight_critical_path&&this.isCriticalLink&&this.isCriticalLink(link)&&(css+=" gantt_critical_link"),div.className=css,div.setAttribute(gantt.config.link_attribute,link.id);for(var i=0;i<lines.length;i++){i==lines.length-1&&(lines[i].size-=gantt.config.link_arrow_size);var el=drawer.render_line(lines[i],lines[i+1]);link.color&&(el.firstChild.style.backgroundColor=link.color),div.appendChild(el)}var direction=lines[lines.length-1].direction,endpoint=gantt._render_link_arrow(dots[dots.length-1],direction);return link.color&&(endpoint.style.borderColor=link.color),div.appendChild(endpoint),div},gantt._render_link_arrow=function(point,direction){var div=document.createElement("div"),drawer=gantt._drawer,top=point.y,left=point.x,size=gantt.config.link_arrow_size,line_width=gantt.config.row_height,className="gantt_link_arrow gantt_link_arrow_"+direction;switch(direction){case drawer.dirs.right:top-=(size-line_width)/2,left-=size;break;case drawer.dirs.left:top-=(size-line_width)/2;break;case drawer.dirs.up:left-=(size-line_width)/2;break;case drawer.dirs.down:top-=size,left-=(size-line_width)/2}return div.style.cssText=["top:"+top+"px","left:"+left+"px"].join(";"),div.className=className,div},gantt._drawer={current_pos:null,dirs:{left:"left",right:"right",up:"up",down:"down"},path:[],clear:function(){this.current_pos=null,this.path=[]},point:function(pos){this.current_pos=dhtmlx.copy(pos)},get_lines:function(dots){this.clear(),this.point(dots[0]);for(var i=1;i<dots.length;i++)this.line_to(dots[i]);return this.get_path()},line_to:function(pos){var next=dhtmlx.copy(pos),prev=this.current_pos,line=this._get_line(prev,next);this.path.push(line),this.current_pos=next},get_path:function(){return this.path},get_wrapper_sizes:function(v){var res,wrapper_size=gantt.config.link_wrapper_width,y=(gantt.config.link_line_width,v.y+(gantt.config.row_height-wrapper_size)/2);switch(v.direction){case this.dirs.left:res={top:y,height:wrapper_size,lineHeight:wrapper_size,left:v.x-v.size-wrapper_size/2,width:v.size+wrapper_size};break;case this.dirs.right:res={top:y,lineHeight:wrapper_size,height:wrapper_size,left:v.x-wrapper_size/2,width:v.size+wrapper_size};break;case this.dirs.up:res={top:y-v.size,lineHeight:v.size+wrapper_size,height:v.size+wrapper_size,left:v.x-wrapper_size/2,width:wrapper_size};break;case this.dirs.down:res={top:y,lineHeight:v.size+wrapper_size,height:v.size+wrapper_size,left:v.x-wrapper_size/2,width:wrapper_size}}return res},get_line_sizes:function(v){var res,line_size=gantt.config.link_line_width,wrapper_size=gantt.config.link_wrapper_width,size=v.size+line_size;switch(v.direction){case this.dirs.left:case this.dirs.right:res={height:line_size,width:size,marginTop:(wrapper_size-line_size)/2,marginLeft:(wrapper_size-line_size)/2};break;case this.dirs.up:case this.dirs.down:res={height:size,width:line_size,marginTop:(wrapper_size-line_size)/2,marginLeft:(wrapper_size-line_size)/2}}return res},render_line:function(v){var pos=this.get_wrapper_sizes(v),wrapper=document.createElement("div");wrapper.style.cssText=["top:"+pos.top+"px","left:"+pos.left+"px","height:"+pos.height+"px","width:"+pos.width+"px"].join(";"),wrapper.className="gantt_line_wrapper";var innerPos=this.get_line_sizes(v),inner=document.createElement("div");return inner.style.cssText=["height:"+innerPos.height+"px","width:"+innerPos.width+"px","margin-top:"+innerPos.marginTop+"px","margin-left:"+innerPos.marginLeft+"px"].join(";"),inner.className="gantt_link_line_"+v.direction,wrapper.appendChild(inner),wrapper},_get_line:function(from,to){var direction=this.get_direction(from,to),vect={x:from.x,y:from.y,direction:this.get_direction(from,to)};return vect.size=Math.abs(direction==this.dirs.left||direction==this.dirs.right?from.x-to.x:from.y-to.y),vect},get_direction:function(from,to){var direction=0;return direction=to.x<from.x?this.dirs.left:to.x>from.x?this.dirs.right:to.y>from.y?this.dirs.down:this.dirs.up}},gantt._y_from_ind=function(index){return index*gantt.config.row_height},gantt._path_builder={path:[],clear:function(){this.path=[]},current:function(){return this.path[this.path.length-1]},point:function(next){return next?(this.path.push(dhtmlx.copy(next)),next):this.current()},point_to:function(direction,diff,point){point=point?{x:point.x,y:point.y}:dhtmlx.copy(this.point());var dir=gantt._drawer.dirs;switch(direction){case dir.left:point.x-=diff;break;case dir.right:point.x+=diff;break;case dir.up:point.y-=diff;break;case dir.down:point.y+=diff}return this.point(point)},get_points:function(link){var pt=this.get_endpoint(link),xy=gantt.config,dy=pt.e_y-pt.y,dx=pt.e_x-pt.x,dir=gantt._drawer.dirs;this.clear(),this.point({x:pt.x,y:pt.y});var shiftX=2*xy.link_arrow_size,forward=pt.e_x>pt.x;if(link.type==gantt.config.links.start_to_start)this.point_to(dir.left,shiftX),forward?(this.point_to(dir.down,dy),this.point_to(dir.right,dx)):(this.point_to(dir.right,dx),this.point_to(dir.down,dy)),this.point_to(dir.right,shiftX);else if(link.type==gantt.config.links.finish_to_start)if(forward=pt.e_x>pt.x+2*shiftX,this.point_to(dir.right,shiftX),forward)dx-=shiftX,this.point_to(dir.down,dy),this.point_to(dir.right,dx);else{dx-=2*shiftX;var sign=dy>0?1:-1;this.point_to(dir.down,sign*(xy.row_height/2)),this.point_to(dir.right,dx),this.point_to(dir.down,sign*(Math.abs(dy)-xy.row_height/2)),this.point_to(dir.right,shiftX)}else if(link.type==gantt.config.links.finish_to_finish)this.point_to(dir.right,shiftX),forward?(this.point_to(dir.right,dx),this.point_to(dir.down,dy)):(this.point_to(dir.down,dy),this.point_to(dir.right,dx)),this.point_to(dir.left,shiftX);else if(link.type==gantt.config.links.start_to_finish)if(forward=pt.e_x>pt.x-2*shiftX,this.point_to(dir.left,shiftX),forward){dx+=2*shiftX;var sign=dy>0?1:-1;this.point_to(dir.down,sign*(xy.row_height/2)),this.point_to(dir.right,dx),this.point_to(dir.down,sign*(Math.abs(dy)-xy.row_height/2)),this.point_to(dir.left,shiftX)}else dx+=shiftX,this.point_to(dir.down,dy),this.point_to(dir.right,dx);return this.path},get_endpoint:function(link){var types=gantt.config.links,from_start=!1,to_start=!1;link.type==types.start_to_start?from_start=to_start=!0:link.type==types.finish_to_finish?from_start=to_start=!1:link.type==types.finish_to_start?(from_start=!1,to_start=!0):link.type==types.start_to_finish?(from_start=!0,to_start=!1):dhtmlx.assert(!1,"Invalid link type");var from=gantt._get_task_visible_pos(gantt._pull[link.source],from_start),to=gantt._get_task_visible_pos(gantt._pull[link.target],to_start);return{x:from.x,e_x:to.x,y:from.y,e_y:to.y}}},gantt._init_links_dnd=function(){function getLinePos(task,to_start,shift){var pos=gantt._get_task_pos(task,!!to_start);return pos.y+=gantt._get_task_height()/2,shift=shift||0,pos.x+=(to_start?-1:1)*shift,pos}function updateMarkedHtml(marker){var link=getDndState(),css=["gantt_link_tooltip"];link.from&&link.to&&css.push(gantt.isLinkAllowed(link.from,link.to,link.from_start,link.to_start)?"gantt_allowed_link":"gantt_invalid_link");var className=gantt.templates.drag_link_class(link.from,link.from_start,link.to,link.to_start);className&&css.push(className);var html="<div class='"+className+"'>"+gantt.templates.drag_link(link.from,link.from_start,link.to,link.to_start)+"</div>";marker.innerHTML=html}function advanceMarker(marker,pos){marker.style.left=pos.x+5+"px",marker.style.top=pos.y+5+"px"}function getDndState(){return{from:gantt._link_source_task,to:gantt._link_target_task,from_start:gantt._link_source_task_start,to_start:gantt._link_target_task_start}}function resetDndState(){gantt._link_source_task=gantt._link_source_task_start=gantt._link_target_task=null,gantt._link_target_task_start=!0}function showDirectingLine(s_x,s_y,e_x,e_y){var div=getDirectionLine(),link=getDndState(),css=["gantt_link_direction"];gantt.templates.link_direction_class&&css.push(gantt.templates.link_direction_class(link.from,link.from_start,link.to,link.to_start));var dist=Math.sqrt(Math.pow(e_x-s_x,2)+Math.pow(e_y-s_y,2));if(dist=Math.max(0,dist-3)){div.className=css.join(" ");var tan=(e_y-s_y)/(e_x-s_x),angle=Math.atan(tan);2==coordinateCircleQuarter(s_x,e_x,s_y,e_y)?angle+=Math.PI:3==coordinateCircleQuarter(s_x,e_x,s_y,e_y)&&(angle-=Math.PI);var sin=Math.sin(angle),cos=Math.cos(angle),top=Math.round(s_y),left=Math.round(s_x),style=["-webkit-transform: rotate("+angle+"rad)","-moz-transform: rotate("+angle+"rad)","-ms-transform: rotate("+angle+"rad)","-o-transform: rotate("+angle+"rad)","transform: rotate("+angle+"rad)","width:"+Math.round(dist)+"px"];if(-1!=window.navigator.userAgent.indexOf("MSIE 8.0")){style.push('-ms-filter: "'+ieTransform(sin,cos)+'"');var shiftLeft=Math.abs(Math.round(s_x-e_x)),shiftTop=Math.abs(Math.round(e_y-s_y));switch(coordinateCircleQuarter(s_x,e_x,s_y,e_y)){case 1:top-=shiftTop;break;case 2:left-=shiftLeft,top-=shiftTop;break;case 3:left-=shiftLeft}}style.push("top:"+top+"px"),style.push("left:"+left+"px"),div.style.cssText=style.join(";")}}function ieTransform(sin,cos){return"progid:DXImageTransform.Microsoft.Matrix(M11 = "+cos+",M12 = -"+sin+",M21 = "+sin+",M22 = "+cos+",SizingMethod = 'auto expand')"}function coordinateCircleQuarter(sX,eX,sY,eY){return eX>=sX?sY>=eY?1:4:sY>=eY?2:3}function getDirectionLine(){return dnd._direction||(dnd._direction=document.createElement("div"),gantt.$task_links.appendChild(dnd._direction)),dnd._direction}function removeDirectionLine(){dnd._direction&&(dnd._direction.parentNode&&dnd._direction.parentNode.removeChild(dnd._direction),dnd._direction=null)}var dnd=new dhtmlxDnD(this.$task_bars,{sensitivity:0,updates_per_second:60}),start_marker="task_left",end_marker="task_right",link_edge_marker="gantt_link_point",link_landing_hover_area="gantt_link_control";dnd.attachEvent("onBeforeDragStart",dhtmlx.bind(function(obj,e){var target=e.target||e.srcElement;if(resetDndState(),gantt.getState().drag_id)return!1;if(gantt._locate_css(target,link_edge_marker)){gantt._locate_css(target,start_marker)&&(gantt._link_source_task_start=!0);var sid=gantt._link_source_task=this.locate(e),t=gantt.getTask(sid);if(gantt._is_readonly(t))return resetDndState(),!1;var shift=0;return gantt._get_safe_type(t.type)==gantt.config.types.milestone&&(shift=(gantt._get_visible_milestone_width()-gantt._get_milestone_width())/2),this._dir_start=getLinePos(t,!!gantt._link_source_task_start,shift),!0}return!1},this)),dnd.attachEvent("onAfterDragStart",dhtmlx.bind(function(){updateMarkedHtml(dnd.config.marker)},this)),dnd.attachEvent("onDragMove",dhtmlx.bind(function(obj,e){var dd=dnd.config,pos=dnd.getPosition(e);advanceMarker(dd.marker,pos);var landing=gantt._is_link_drop_area(e),prevTarget=gantt._link_target_task,prevLanding=gantt._link_landing,prevToStart=gantt._link_target_task_start,targ=gantt.locate(e),to_start=!0;
if(landing&&(to_start=!gantt._locate_css(e,end_marker),landing=!!targ),gantt._link_target_task=targ,gantt._link_landing=landing,gantt._link_target_task_start=to_start,landing){var t=gantt.getTask(targ),node=gantt._locate_css(e,link_landing_hover_area),shift=0;node&&(shift=Math.floor(node.offsetWidth/2)),this._dir_end=getLinePos(t,!!gantt._link_target_task_start,shift)}else this._dir_end=gantt._get_mouse_pos(e);var targetChanged=!(prevLanding==landing&&prevTarget==targ&&prevToStart==to_start);return targetChanged&&(prevTarget&&gantt.refreshTask(prevTarget,!1),targ&&gantt.refreshTask(targ,!1)),targetChanged&&updateMarkedHtml(dd.marker),showDirectingLine(this._dir_start.x,this._dir_start.y,this._dir_end.x,this._dir_end.y),!0},this)),dnd.attachEvent("onDragEnd",dhtmlx.bind(function(){var link=getDndState();if(link.from&&link.to&&link.from!=link.to){var type=gantt._get_link_type(link.from_start,link.to_start),link={source:link.from,target:link.to,type:type};link.type&&gantt.isLinkAllowed(link)&&gantt.addLink(link)}resetDndState(),link.from&&gantt.refreshTask(link.from,!1),link.to&&gantt.refreshTask(link.to,!1),removeDirectionLine()},this)),gantt._is_link_drop_area=function(e){return!!gantt._locate_css(e,link_landing_hover_area)}},gantt._get_link_state=function(){return{link_landing_area:this._link_landing,link_target_id:this._link_target_task,link_target_start:this._link_target_task_start,link_source_id:this._link_source_task,link_source_start:this._link_source_task_start}},gantt._init_tasks=function(){function refreshId(renders,oldId,newId,item){for(var i=0;i<renders.length;i++)renders[i].change_id(oldId,newId),renders[i].render_item(item)}this._tasks={col_width:this.config.columnWidth,width:[],full_width:0,trace_x:[],rendered:{}},this._click.gantt_task_link=dhtmlx.bind(function(e){var id=this.locate(e,gantt.config.link_attribute);id&&this.callEvent("onLinkClick",[id,e])},this),this._click.gantt_scale_cell=dhtmlx.bind(function(e){var pos=gantt._get_mouse_pos(e),date=gantt._date_from_pos(pos.x),coll=Math.floor(gantt._day_index_by_date(date)),coll_date=gantt._tasks.trace_x[coll];gantt.callEvent("onScaleClick",[e,coll_date])},this),this._dbl_click.gantt_task_link=dhtmlx.bind(function(e,id){var id=this.locate(e,gantt.config.link_attribute);this._delete_link_handler(id,e)},this),this._dbl_click.gantt_link_point=dhtmlx.bind(function(e,id,trg){var id=this.locate(e),task=this.getTask(id),link=null;return trg.parentNode&&trg.parentNode.className&&(link=trg.parentNode.className.indexOf("_left")>-1?task.$target[0]:task.$source[0]),link&&this._delete_link_handler(link,e),!1},this),this._tasks_dnd.init(),this._init_links_dnd();var filter_grid_task=this._create_filter("_filter_task","_is_grid_visible"),filter_chart_task=this._create_filter("_filter_task","_is_chart_visible"),filter_link=this._create_filter("_filter_link","_is_chart_visible"),filter_chart_bg=this._create_filter("_filter_task","_is_chart_visible","_is_std_background");this._task_renderers={},this._linkRenderer=this._task_renderer("links",this._render_link_element,this.$task_links,filter_link),this._taskRenderer=this._task_renderers.task=this._task_renderer("task",this._render_task_element,this.$task_bars,filter_chart_task),this._task_renderers.grid=this._task_renderer("grid",this._render_grid_item,this.$grid_data,filter_grid_task),this._task_renderers.bg=this._task_renderer("bg",this._render_bg_line,this.$task_bg,filter_chart_bg),this.attachEvent("onTaskIdChange",function(oldId,newId){var render=this._get_task_renderers();refreshId(render,oldId,newId,this.getTask(newId))}),this.attachEvent("onLinkIdChange",function(oldId,newId){var render=this._get_link_renderers();refreshId(render,oldId,newId,this.getLink(newId))})},gantt._create_filter=function(filter_methods){return filter_methods instanceof Array||(filter_methods=Array.prototype.slice.call(arguments,0)),function(obj){for(var res=!0,i=0,len=filter_methods.length;len>i;i++){var filter_method=filter_methods[i];gantt[filter_method]&&(res=res&&gantt[filter_method].apply(gantt,[obj.id,obj])!==!1)}return res}},gantt._is_chart_visible=function(){return!!this.config.show_chart},gantt._filter_task=function(id,task){var min=null,max=null;return this.config.start_date&&this.config.end_date&&(min=this.config.start_date.valueOf(),max=this.config.end_date.valueOf(),+task.start_date>max||+task.end_date<+min)?!1:!0},gantt._filter_link=function(id,link){return this.config.show_links&&gantt.isTaskVisible(link.source)&&gantt.isTaskVisible(link.target)?this.callEvent("onBeforeLinkDisplay",[id,link]):!1},gantt._is_std_background=function(){return!this.config.static_background},gantt._task_layers=[],gantt._task_renderers={},gantt._get_task_renderers=function(){var r=[];for(var i in this._task_renderers)r.push(this._task_renderers[i]);return r},gantt._get_link_renderers=function(){return[this._linkRenderer]},gantt._delete_link_handler=function(id,e){if(id&&this.callEvent("onLinkDblClick",[id,e])){var link=gantt.getLink(id);if(gantt._is_readonly(link))return;var title="",question=gantt.locale.labels.link+" "+this.templates.link_description(this.getLink(id))+" "+gantt.locale.labels.confirm_link_deleting;window.setTimeout(function(){gantt._dhtmlx_confirm(question,title,function(){gantt.deleteLink(id)})},gantt.config.touch?300:1)}},gantt.getTaskNode=function(id){return this._taskRenderer.rendered[id]},gantt.getLinkNode=function(id){return this._linkRenderer.rendered[id]},gantt._get_tasks_data=function(){for(var rows=[],i=0;i<this._order.length;i++){var item=this._pull[this._order[i]];item.$index=i,this.resetProjectDates(item),rows.push(item)}return rows},gantt._get_links_data=function(){var links=[];for(var i in this._lpull)links.push(this._lpull[i]);return links},gantt._render_data=function(){this._sync_order(),this._update_layout_sizes(),this.config.static_background&&this._render_bg_canvas();for(var data=this._get_tasks_data(),renderers=this._get_task_renderers(),i=0;i<renderers.length;i++)renderers[i].render_items(data);var links=gantt._get_links_data();renderers=this._get_link_renderers();for(var i=0;i<renderers.length;i++)renderers[i].render_items(links);this.callEvent("onDataRender",[])},gantt._update_layout_sizes=function(){var cfg=this._tasks;cfg.bar_height=this._get_task_height(),this.$task_data.style.height=Math.max(this.$task.offsetHeight-this.config.scale_height,0)+"px",this.$task_bg.style.height="",this.$task_bg.style.backgroundImage="";for(var data_els=this.$task_data.childNodes,i=0,len=data_els.length;len>i;i++){var el=data_els[i];this._is_layer(el)&&el.style&&(el.style.width=cfg.full_width+"px")}if(this._is_grid_visible()){for(var columns=this.getGridColumns(),width=0,i=0;i<columns.length;i++)width+=columns[i].width;this.$grid_data.style.width=Math.max(width-1,0)+"px"}},gantt._scale_range_unit=function(){var unit=this.config.scale_unit;if(this.config.scale_offset_minimal){var scales=this._get_scales();unit=scales[scales.length-1].unit}return unit},gantt._init_tasks_range=function(){var unit=this._scale_range_unit();if(this.config.start_date&&this.config.end_date)return this._min_date=this.date[unit+"_start"](new Date(this.config.start_date)),void(this._max_date=this.date[unit+"_start"](new Date(this.config.end_date)));var data=this._get_tasks_data(),root=this._init_task({id:this.config.root_id});data.push(root);var max=-1/0,min=1/0;this.eachTask(function(child){child.end_date&&+child.end_date>+max&&(max=new Date(child.end_date))},this.config.root_id),this.eachTask(function(child){child.start_date&&+child.start_date<+min&&(min=new Date(child.start_date))},this.config.root_id),this._min_date=min,this._max_date=max,max&&max!=-1/0||(this._min_date=new Date,this._max_date=new Date(this._min_date)),this._min_date=this.date[unit+"_start"](this._min_date),+this._min_date==+min&&(this._min_date=this.date.add(this.date[unit+"_start"](this._min_date),-1,unit)),this._max_date=this.date[unit+"_start"](this._max_date),this._max_date=this.date.add(this._max_date,2,unit)},gantt._prepare_scale_html=function(config){var cells=[],date=null,content=null,css=null;(config.template||config.date)&&(content=config.template||this.date.date_to_str(config.date)),css=config.css||gantt.templates.scale_cell_class;for(var i=0;i<config.count;i++){date=new Date(config.trace_x[i]);var value=content.call(this,date),width=config.width[i],style="",template="",cssclass="";if(width){style="width:"+width+"px;",cssclass="gantt_scale_cell"+(i==config.count-1?" gantt_last_cell":""),template=css.call(this,date),template&&(cssclass+=" "+template);var cell="<div class='"+cssclass+"' style='"+style+"'>"+value+"</div>";cells.push(cell)}}return cells.join("")},gantt._get_scales=function(){var helpers=this._scale_helpers,scales=[helpers.primaryScale()].concat(this.config.subscales);return helpers.sortScales(scales),scales},gantt._render_tasks_scales=function(){this._init_tasks_range(),this._scroll_resize(),this._set_sizes();var scales_html="",outer_width=0,data_width=0,scale_height=0;if(this._is_chart_visible()){var helpers=this._scale_helpers,scales=this._get_scales();scale_height=this.config.scale_height-1;for(var resize=this._get_resize_options(),avail_width=resize.x?Math.max(this.config.autosize_min_width,0):this.$task.offsetWidth,cfgs=helpers.prepareConfigs(scales,this.config.min_column_width,avail_width,scale_height),cfg=this._tasks=cfgs[cfgs.length-1],html=[],css=this.templates.scale_row_class,i=0;i<cfgs.length;i++){var cssClass="gantt_scale_line",tplClass=css(cfgs[i]);tplClass&&(cssClass+=" "+tplClass),html.push('<div class="'+cssClass+'" style="height:'+cfgs[i].height+"px;line-height:"+cfgs[i].height+'px">'+this._prepare_scale_html(cfgs[i])+"</div>")}scales_html=html.join(""),outer_width=cfg.full_width+this.$scroll_ver.offsetWidth+"px",data_width=cfg.full_width+"px",scale_height+="px"}this.$task.style.display=this._is_chart_visible()?"":"none",this.$task_scale.style.height=scale_height,this.$task_data.style.width=this.$task_scale.style.width=outer_width,this.$task_scale.innerHTML=scales_html},gantt._render_bg_line=function(item){var cfg=gantt._tasks,count=cfg.count,row=document.createElement("div");if(gantt.config.show_task_cells)for(var j=0;count>j;j++){var width=cfg.width[j],cssclass="";if(width>0){var cell=document.createElement("div");cell.style.width=width+"px",cssclass="gantt_task_cell"+(j==count-1?" gantt_last_cell":""),cssTemplate=this.templates.task_cell_class(item,cfg.trace_x[j]),cssTemplate&&(cssclass+=" "+cssTemplate),cell.className=cssclass,row.appendChild(cell)}}var odd=item.$index%2!==0,cssTemplate=gantt.templates.task_row_class(item.start_date,item.end_date,item),css="gantt_task_row"+(odd?" odd":"")+(cssTemplate?" "+cssTemplate:"");return this.getState().selected_task==item.id&&(css+=" gantt_selected"),row.className=css,row.style.height=gantt.config.row_height+"px",row.setAttribute(this.config.task_attribute,item.id),row},gantt._render_bg_canvas=function(){},gantt._adjust_scales=function(){if(this.config.fit_tasks){var old_min=+this._min_date,old_max=+this._max_date;if(this._init_tasks_range(),+this._min_date!=old_min||+this._max_date!=old_max)return this.render(),this.callEvent("onScaleAdjusted",[]),!0}return!1},gantt.refreshTask=function(taskId,refresh_links){var renders=this._get_task_renderers(),task=this.getTask(taskId);if(task&&this.isTaskVisible(taskId)){for(var i=0;i<renders.length;i++)renders[i].render_item(task);if(void 0!==refresh_links&&!refresh_links)return;for(var i=0;i<task.$source.length;i++)gantt.refreshLink(task.$source[i]);for(var i=0;i<task.$target.length;i++)gantt.refreshLink(task.$target[i])}else this._render_data()},gantt.refreshLink=function(linkId){this.isLinkExists(linkId)?gantt._render_link(linkId):gantt._linkRenderer.remove_item(linkId)},gantt._combine_item_class=function(basic,template,itemId){var css=[basic];template&&css.push(template);var state=gantt.getState(),task=this.getTask(itemId);this._get_safe_type(task.type)==this.config.types.milestone&&css.push("gantt_milestone"),this._get_safe_type(task.type)==this.config.types.project&&css.push("gantt_project"),this._is_flex_task(task)&&css.push("gantt_dependent_task"),this.config.select_task&&itemId==state.selected_task&&css.push("gantt_selected"),itemId==state.drag_id&&(css.push("gantt_drag_"+state.drag_mode),state.touch_drag&&css.push("gantt_touch_"+state.drag_mode));var links=gantt._get_link_state();if(links.link_source_id==itemId&&css.push("gantt_link_source"),links.link_target_id==itemId&&css.push("gantt_link_target"),this.config.highlight_critical_path&&this.isCriticalTask&&this.isCriticalTask(task)&&css.push("gantt_critical_task"),links.link_landing_area&&links.link_target_id&&links.link_source_id&&links.link_target_id!=links.link_source_id){var from_id=links.link_source_id,from_start=links.link_source_start,to_start=links.link_target_start,allowDrag=gantt.isLinkAllowed(from_id,itemId,from_start,to_start),dragClass="";dragClass=allowDrag?to_start?"link_start_allow":"link_finish_allow":to_start?"link_start_deny":"link_finish_deny",css.push(dragClass)}return css.join(" ")},gantt._render_pair=function(parent,css,task,content){var state=gantt.getState();+task.end_date<=+state.max_date&&parent.appendChild(content(css+" task_right")),+task.start_date>=+state.min_date&&parent.appendChild(content(css+" task_left"))},gantt._get_task_height=function(){var height=this.config.task_height;return"full"==height&&(height=this.config.row_height-5),height=Math.min(height,this.config.row_height),Math.max(height,0)},gantt._get_milestone_width=function(){return this._get_task_height()},gantt._get_visible_milestone_width=function(){var origWidth=gantt._get_task_height();return Math.sqrt(2*origWidth*origWidth)},gantt.getTaskPosition=function(task,start_date,end_date){var x=this.posFromDate(start_date||task.start_date),x2=this.posFromDate(end_date||task.end_date);x2=Math.max(x,x2);var y=this.getTaskTop(task.id),height=this.config.task_height;return{left:x,top:y,height:height,width:Math.max(x2-x,0)}},gantt._get_task_width=function(task){return Math.round(this._get_task_pos(task,!1).x-this._get_task_pos(task,!0).x)},gantt._is_readonly=function(item){return item&&item[this.config.editable_property]?!1:item&&item[this.config.readonly_property]||this.config.readonly},gantt._task_default_render=function(task){var pos=this._get_task_pos(task),cfg=this.config,height=this._get_task_height(),padd=Math.floor((this.config.row_height-height)/2);this._get_safe_type(task.type)==cfg.types.milestone&&cfg.link_line_width>1&&(padd+=1);var div=document.createElement("div"),width=gantt._get_task_width(task),type=this._get_safe_type(task.type);div.setAttribute(this.config.task_attribute,task.id),cfg.show_progress&&type!=this.config.types.milestone&&this._render_task_progress(task,div,width);var content=gantt._render_task_content(task,width);task.textColor&&(content.styles.color=task.textColor),div.appendChild(content);var css=this._combine_item_class("gantt_task_line",this.templates.task_class(task.start_date,task.end_date,task),task.id);(task.color||task.progressColor||task.textColor)&&(css+=" gantt_task_inline_color"),div.className=css;var styles=["left:"+pos.x+"px","top:"+(padd+pos.y)+"px","height:"+height+"px","line-height:"+height+"px","width:"+width+"px"];task.color&&styles.push("background-color:"+task.color),task.textColor&&styles.push("color:"+task.textColor),div.style.cssText=styles.join(";");var side=this._render_leftside_content(task);return side&&div.appendChild(side),side=this._render_rightside_content(task),side&&div.appendChild(side),this._is_readonly(task)||(cfg.drag_resize&&!this._is_flex_task(task)&&type!=this.config.types.milestone&&gantt._render_pair(div,"gantt_task_drag",task,function(css){var el=document.createElement("div");return el.className=css,el}),cfg.drag_links&&this.config.show_links&&gantt._render_pair(div,"gantt_link_control",task,function(css){var outer=document.createElement("div");outer.className=css,outer.style.cssText=["height:"+height+"px","line-height:"+height+"px"].join(";");var inner=document.createElement("div");return inner.className="gantt_link_point",outer.appendChild(inner),outer})),div},gantt._render_task_element=function(task){var painters=this.config.type_renderers,renderer=painters[this._get_safe_type(task.type)];return renderer||(renderer=this._task_default_render),renderer.apply(this,arguments)},gantt._render_side_content=function(task,template,cssClass){if(!template)return null;var text=template(task.start_date,task.end_date,task);if(!text)return null;var content=document.createElement("div");return content.className="gantt_side_content "+cssClass,content.innerHTML=text,content},gantt._render_leftside_content=function(task){var css="gantt_left "+gantt._get_link_crossing_css(!0,task);return gantt._render_side_content(task,this.templates.leftside_text,css)},gantt._render_rightside_content=function(task){var css="gantt_right "+gantt._get_link_crossing_css(!1,task);return gantt._render_side_content(task,this.templates.rightside_text,css)},gantt._get_conditions=function(leftside){return leftside?{$source:[gantt.config.links.start_to_start],$target:[gantt.config.links.start_to_start,gantt.config.links.finish_to_start]}:{$source:[gantt.config.links.finish_to_start,gantt.config.links.finish_to_finish],$target:[gantt.config.links.finish_to_finish]}},gantt._get_link_crossing_css=function(left,task){var cond=gantt._get_conditions(left);for(var i in cond)for(var links=task[i],ln=0;ln<links.length;ln++)for(var link=gantt.getLink(links[ln]),tp=0;tp<cond[i].length;tp++)if(link.type==cond[i][tp])return"gantt_link_crossing";return""},gantt._render_task_content=function(task){var content=document.createElement("div");return this._get_safe_type(task.type)!=this.config.types.milestone&&(content.innerHTML=this.templates.task_text(task.start_date,task.end_date,task)),content.className="gantt_task_content",content},gantt._render_task_progress=function(task,element,maxWidth){var done=1*task.progress||0;maxWidth=Math.max(maxWidth-2,0);var pr=document.createElement("div"),width=Math.round(maxWidth*done);if(width=Math.min(maxWidth,width),task.progressColor&&(pr.style.backgroundColor=task.progressColor,pr.style.opacity=1),pr.style.width=width+"px",pr.className="gantt_task_progress",pr.innerHTML=this.templates.progress_text(task.start_date,task.end_date,task),element.appendChild(pr),this.config.drag_progress&&!gantt._is_readonly(task)){var drag=document.createElement("div");drag.style.left=width+"px",drag.className="gantt_task_progress_drag",pr.appendChild(drag),element.appendChild(drag)}},gantt._get_line=function(step){var steps={second:1,minute:60,hour:3600,day:86400,week:604800,month:2592e3,year:31536e3};return steps[step]||0},gantt._date_from_pos=function(x){var scale=this._tasks;if(0>x||x>scale.full_width||!scale.full_width)return null;for(var ind=0,summ=0;summ+scale.width[ind]<x;)summ+=scale.width[ind],ind++;var col_width=scale.width[ind]||scale.col_width,part=0;col_width&&(part=(x-summ)/col_width);var unit=gantt._get_coll_duration(scale,scale.trace_x[ind]),date=new Date(scale.trace_x[ind].valueOf()+Math.round(part*unit));return date},gantt.posFromDate=function(date){var ind=gantt._day_index_by_date(date);dhtmlx.assert(ind>=0,"Invalid day index");for(var wholeCells=Math.floor(ind),partCell=ind%1,pos=0,i=1;wholeCells>=i;i++)pos+=gantt._tasks.width[i-1];return partCell&&(pos+=wholeCells<gantt._tasks.width.length?gantt._tasks.width[wholeCells]*(partCell%1):1),pos},gantt._day_index_by_date=function(date){var pos=new Date(date).valueOf(),days=gantt._tasks.trace_x,ignores=gantt._tasks.ignore_x;if(pos<=this._min_date)return 0;if(pos>=this._max_date)return days.length;for(var day=null,xind=0,length=days.length-1;length>xind&&(day=+days[xind+1],!(day>pos)||ignores[day]);xind++);return days[xind]?xind+(date-days[xind])/gantt._get_coll_duration(gantt._tasks,days[xind]):0},gantt._get_coll_duration=function(scale,date){return gantt.date.add(date,scale.step,scale.unit)-date},gantt._get_x_pos=function(task,to_start){to_start=to_start!==!1;gantt.posFromDate(to_start?task.start_date:task.end_date)},gantt.getTaskTop=function(task_id){return this._y_from_ind(this._get_visible_order(task_id))},gantt._get_task_coord=function(task,to_start,x_correction){to_start=to_start!==!1,x_correction=x_correction||0;var isMilestone=this._get_safe_type(task.type)==this.config.types.milestone,date=null;date=to_start||isMilestone?task.start_date||this._default_task_date(task):task.end_date||this.calculateEndDate(this._default_task_date(task));var x=this.posFromDate(date),y=this.getTaskTop(task.id);return isMilestone&&(to_start?x-=x_correction:x+=x_correction),{x:x,y:y}},gantt._get_task_pos=function(task,to_start){to_start=to_start!==!1;var mstoneCorrection=gantt._get_milestone_width()/2;return this._get_task_coord(task,to_start,mstoneCorrection)},gantt._get_task_visible_pos=function(task,to_start){to_start=to_start!==!1;var mstoneCorrection=gantt._get_visible_milestone_width()/2;return this._get_task_coord(task,to_start,mstoneCorrection)},gantt._correct_shift=function(start,back){return start-=6e4*(new Date(gantt._min_date).getTimezoneOffset()-new Date(start).getTimezoneOffset())*(back?-1:1)},gantt._get_mouse_pos=function(ev){if(ev.pageX||ev.pageY)var pos={x:ev.pageX,y:ev.pageY};var d=_isIE?document.documentElement:document.body,pos={x:ev.clientX+d.scrollLeft-d.clientLeft,y:ev.clientY+d.scrollTop-d.clientTop},box=gantt._get_position(gantt.$task_data);return pos.x=pos.x-box.x+gantt.$task_data.scrollLeft,pos.y=pos.y-box.y+gantt.$task_data.scrollTop,pos},gantt._is_layer=function(dom_element){return dom_element&&dom_element.hasAttribute&&dom_element.hasAttribute(this.config.layer_attribute)},gantt._task_renderer=function(id,render_one,node,filter){return this._task_area_pulls||(this._task_area_pulls={}),this._task_area_renderers||(this._task_area_renderers={}),this._task_area_renderers[id]?this._task_area_renderers[id]:(render_one||dhtmlx.assert(!1,"Invalid renderer call"),node&&node.setAttribute(this.config.layer_attribute,!0),this._task_area_renderers[id]={render_item:function(item,container){var pull=gantt._task_area_pulls[id];if(container=container||node,filter&&!filter(item))return void this.remove_item(item.id);var dom=render_one.call(gantt,item);dom&&(pull[item.id]?this.replace_item(item.id,dom):(pull[item.id]=dom,container.appendChild(dom)))},clear:function(container){this.rendered=gantt._task_area_pulls[id]={},container=container||node,container&&(container.innerHTML="")},render_items:function(items,container){container=container||node,this.clear(container);for(var buffer=document.createDocumentFragment(),i=0,vis=items.length;vis>i;i++)this.render_item(items[i],buffer);container.appendChild(buffer)},replace_item:function(item_id,newNode){var item=this.rendered[item_id];item&&item.parentNode&&item.parentNode.replaceChild(newNode,item),this.rendered[item_id]=newNode},remove_item:function(item_id){var item=this.rendered[item_id];item&&item.parentNode&&item.parentNode.removeChild(item),delete this.rendered[item_id]},change_id:function(oldid,newid){this.rendered[newid]=this.rendered[oldid],delete this.rendered[oldid]},rendered:this._task_area_pulls[id],node:node,unload:function(){this.clear(),delete gantt._task_area_renderers[id],delete gantt._task_area_pulls[id]}},this._task_area_renderers[id])},gantt._clear_renderers=function(){for(var i in this._task_area_renderers)this._task_renderer(i).unload()},gantt._pull={},gantt._branches={},gantt._order=[],gantt._lpull={},gantt.load=function(url,type,callback){this._load_url=url,dhtmlx.assert(arguments.length,"Invalid load arguments"),this.callEvent("onLoadStart",[]);var tp="json",cl=null;arguments.length>=3?(tp=type,cl=callback):"string"==typeof arguments[1]?tp=arguments[1]:"function"==typeof arguments[1]&&(cl=arguments[1]),this._load_type=tp,dhtmlxAjax.get(url,dhtmlx.bind(function(l){this.on_load(l,tp),this.callEvent("onLoadEnd",[]),"function"==typeof cl&&cl.call(this)},this))},gantt.parse=function(data,type){this.on_load({xmlDoc:{responseText:data}},type)},gantt.serialize=function(type){return type=type||"json",this[type].serialize()},gantt.on_load=function(resp,type){type||(type="json"),dhtmlx.assert(this[type],"Invalid data type:'"+type+"'");var raw=resp.xmlDoc.responseText,data=this[type].parse(raw,resp);this._process_loading(data)},gantt._process_loading=function(data){data.collections&&this._load_collections(data.collections);for(var tasks=data.data,i=0;i<tasks.length;i++){var task=tasks[i];this._init_task(task),this.callEvent("onTaskLoading",[task])&&(this._pull[task.id]=task,this._add_branch(task,!0))}this._sync_order();for(var i in this._pull)this._pull[i].$level=this.calculateTaskLevel(this._pull[i]);if(this._init_links(data.links||(data.collections?data.collections.links:[])),this.render(),this.config.initial_scroll){var id=this._order[0]||this.config.root_id;id&&this.showTask(id)}},gantt._init_links=function(links){if(links)for(var i=0;i<links.length;i++)if(links[i]){var link=this._init_link(links[i]);this._lpull[link.id]=link}this._sync_links()},gantt._load_collections=function(collections){var collections_loaded=!1;for(var key in collections)if(collections.hasOwnProperty(key)){collections_loaded=!0;var collection=collections[key],arr=this.serverList[key];if(!arr)continue;arr.splice(0,arr.length);for(var j=0;j<collection.length;j++){var option=collection[j],obj=dhtmlx.copy(option);obj.key=obj.value;for(var option_key in option)if(option.hasOwnProperty(option_key)){if("value"==option_key||"label"==option_key)continue;obj[option_key]=option[option_key]}arr.push(obj)}}collections_loaded&&this.callEvent("onOptionsLoad",[])},gantt._sync_order=function(silent){this._order=[],this._sync_order_item({parent:this.config.root_id,$open:!0,$ignore:!0,id:this.config.root_id}),silent||(this._scroll_resize(),this._set_sizes())},gantt.attachEvent("onBeforeTaskDisplay",function(id,task){return!task.$ignore}),gantt._sync_order_item=function(item){if(item.id&&this._filter_task(item.id,item)&&this.callEvent("onBeforeTaskDisplay",[item.id,item])&&this._order.push(item.id),item.$open){var children=this._branches[item.id];if(children)for(var i=0;i<children.length;i++)this._sync_order_item(this._pull[children[i]])}},gantt._get_visible_order=function(id){dhtmlx.assert(id,"Invalid argument");for(var ord=this._order,i=0,count=ord.length;count>i;i++)if(ord[i]==id)return i;return-1},gantt.eachTask=function(code,parent,master){parent=parent||this.config.root_id,master=master||this;var branch=this._branches[parent];if(branch)for(var i=0;i<branch.length;i++){var item=this._pull[branch[i]];code.call(master,item),this._branches[item.id]&&this.eachTask(code,item.id,master)}},gantt.json={parse:function(data){return dhtmlx.assert(data,"Invalid data"),"string"==typeof data&&(window.JSON?data=JSON.parse(data):(gantt._temp=eval("("+data+")"),data=gantt._temp||{},gantt._temp=null)),data.dhx_security&&(dhtmlx.security_key=data.dhx_security),data},_copyLink:function(obj){var copy={};for(var key in obj)copy[key]=obj[key];return copy},_copyObject:function(obj){var copy={};for(var key in obj)"$"!=key.charAt(0)&&(copy[key]=obj[key],copy[key]instanceof Date&&(copy[key]=gantt.templates.xml_format(copy[key])));return copy},serialize:function(){var tasks=[],links=[];gantt.eachTask(function(obj){gantt.resetProjectDates(obj),tasks.push(this._copyObject(obj))},gantt.config.root_id,this);for(var key in gantt._lpull)links.push(this._copyLink(gantt._lpull[key]));return{data:tasks,links:links}}},gantt.xml={_xmlNodeToJSON:function(node,attrs_only){for(var t={},i=0;i<node.attributes.length;i++)t[node.attributes[i].name]=node.attributes[i].value;if(!attrs_only){for(var i=0;i<node.childNodes.length;i++){var child=node.childNodes[i];1==child.nodeType&&(t[child.tagName]=child.firstChild?child.firstChild.nodeValue:"")}t.text||(t.text=node.firstChild?node.firstChild.nodeValue:"")}return t},_getCollections:function(loader){for(var collection={},opts=loader.doXPath("//coll_options"),i=0;i<opts.length;i++)for(var bind=opts[i].getAttribute("for"),arr=collection[bind]=[],itms=loader.doXPath(".//item",opts[i]),j=0;j<itms.length;j++){for(var itm=itms[j],attrs=itm.attributes,obj={key:itms[j].getAttribute("value"),label:itms[j].getAttribute("label")},k=0;k<attrs.length;k++){var attr=attrs[k];"value"!=attr.nodeName&&"label"!=attr.nodeName&&(obj[attr.nodeName]=attr.nodeValue)}arr.push(obj)}return collection},_getXML:function(text,loader,toptag){toptag=toptag||"data",loader.getXMLTopNode||(loader=new dtmlXMLLoaderObject(function(){}),loader.loadXMLString(text));var xml=loader.getXMLTopNode(toptag);if(xml.tagName!=toptag)throw"Invalid XML data";var skey=xml.getAttribute("dhx_security");return skey&&(dhtmlx.security_key=skey),loader},parse:function(text,loader){loader=this._getXML(text,loader);for(var data={},evs=data.data=[],xml=loader.doXPath("//task"),i=0;i<xml.length;i++)evs[i]=this._xmlNodeToJSON(xml[i]);return data.collections=this._getCollections(loader),data},_copyLink:function(obj){return"<item id='"+obj.id+"' source='"+obj.source+"' target='"+obj.target+"' type='"+obj.type+"' />"},_copyObject:function(obj){return"<task id='"+obj.id+"' parent='"+(obj.parent||"")+"' start_date='"+obj.start_date+"' duration='"+obj.duration+"' open='"+!!obj.open+"' progress='"+obj.progress+"' end_date='"+obj.end_date+"'><![CDATA["+obj.text+"]]></task>"},serialize:function(){for(var tasks=[],links=[],json=gantt.json.serialize(),i=0,len=json.data.length;len>i;i++)tasks.push(this._copyObject(json.data[i]));for(var i=0,len=json.links.length;len>i;i++)links.push(this._copyLink(json.links[i]));return"<data>"+tasks.join("")+"<coll_options for='links'>"+links.join("")+"</coll_options></data>"}},gantt.oldxml={parse:function(text,loader){loader=gantt.xml._getXML(text,loader,"projects");for(var data={collections:{links:[]}},evs=data.data=[],xml=loader.doXPath("//task"),i=0;i<xml.length;i++){evs[i]=gantt.xml._xmlNodeToJSON(xml[i]);var parent=xml[i].parentNode;evs[i].parent="project"==parent.tagName?"project-"+parent.getAttribute("id"):parent.parentNode.getAttribute("id")}xml=loader.doXPath("//project");for(var i=0;i<xml.length;i++){var ev=gantt.xml._xmlNodeToJSON(xml[i],!0);ev.id="project-"+ev.id,evs.push(ev)}for(var i=0;i<evs.length;i++){var ev=evs[i];ev.start_date=ev.startdate||ev.est,ev.end_date=ev.enddate,ev.text=ev.name,ev.duration=ev.duration/8,ev.open=1,ev.duration||ev.end_date||(ev.duration=1),ev.predecessortasks&&data.collections.links.push({target:ev.id,source:ev.predecessortasks,type:gantt.config.links.finish_to_start})}return data},serialize:function(){dhtmlx.message("Serialization to 'old XML' is not implemented")}},gantt.serverList=function(name,array){return array?this.serverList[name]=array.slice(0):this.serverList[name]||(this.serverList[name]=[]),this.serverList[name]},gantt._working_time_helper={units:["year","month","week","day","hour","minute"],hours:[8,17],dates:{0:!1,6:!1},_get_unit_order:function(unit){for(var i=0,len=this.units.length;len>i;i++)if(this.units[i]==unit)return i;dhtmlx.assert(!1,"Incorrect duration unit")},_timestamp:function(settings){var timestamp=null;return settings.day||0===settings.day?timestamp=settings.day:settings.date&&(timestamp=gantt.date.date_part(new Date(settings.date)).valueOf()),timestamp},set_time:function(settings){var hours=void 0!==settings.hours?settings.hours:!0,timestamp=this._timestamp(settings);null!==timestamp?this.dates[timestamp]=hours:this.hours=hours},unset_time:function(settings){if(settings){var timestamp=this._timestamp(settings);null!==timestamp&&delete this.dates[timestamp]}else this.hours=[]},is_working_unit:function(date,unit,order){return gantt.config.work_time?(void 0===order&&(order=this._get_unit_order(unit)),void 0===order?!1:order&&!this.is_working_unit(date,this.units[order-1],order-1)?!1:this["is_work_"+unit]?this["is_work_"+unit](date):!0):!0},is_work_day:function(date){var val=this.get_working_hours(date);return val instanceof Array?val.length>0:!1
},is_work_hour:function(date){for(var hours=this.get_working_hours(date),hour=date.getHours(),i=0;i<hours.length;i+=2){if(void 0===hours[i+1])return hours[i]==hour;if(hour>=hours[i]&&hour<hours[i+1])return!0}return!1},get_working_hours:function(date){var t=this._timestamp({date:date}),hours=!0;return void 0!==this.dates[t]?hours=this.dates[t]:void 0!==this.dates[date.getDay()]&&(hours=this.dates[date.getDay()]),hours===!0?this.hours:hours?hours:[]},get_work_units_between:function(from,to,unit,step){if(!unit)return!1;for(var start=new Date(from),end=new Date(to),step=step||1,units=0;start.valueOf()<end.valueOf();)this.is_working_unit(start,unit)&&units++,start=gantt.date.add(start,step,unit);return units},add_worktime:function(from,duration,unit,step){if(!unit)return!1;for(var start=new Date(from),added=0,step=step||1,duration=1*duration;duration>added;){var next=gantt.date.add(start,step,unit);this.is_working_unit(step>0?start:next,unit)&&added++,start=next}return start},get_closest_worktime:function(settings){if(this.is_working_unit(settings.date,settings.unit))return settings.date;var unit=settings.unit,curr=gantt.date[unit+"_start"](settings.date),future_target=new Date(curr),prev_target=new Date(curr),tick=!0,maximum_loop=3e3,count=0,both_directins="any"==settings.dir||!settings.dir,inc=1;for("past"==settings.dir&&(inc=-1);!this.is_working_unit(curr,unit);)if(both_directins&&(curr=tick?future_target:prev_target,inc=-1*inc),curr=gantt.date.add(curr,inc,unit),both_directins&&(tick?future_target=curr:prev_target=curr),tick=!tick,count++,count>maximum_loop)return dhtmlx.assert(!1,"Invalid working time check"),!1;return(curr==prev_target||"past"==settings.dir)&&(curr=gantt.date.add(curr,1,unit)),curr}},gantt.getTask=function(id){return dhtmlx.assert(id,"Invalid argument for gantt.getTask"),dhtmlx.assert(this._pull[id],"Task not found id="+id),this._pull[id]},gantt.getTaskByTime=function(from,to){var p=this._pull,res=[];if(from||to){from=+from||-1/0,to=+to||1/0;for(var t in p){var task=p[t];+task.start_date<to&&+task.end_date>from&&res.push(task)}}else for(var t in p)res.push(p[t]);return res},gantt.isTaskExists=function(id){return dhtmlx.defined(this._pull[id])},gantt.isTaskVisible=function(id){if(!this._pull[id])return!1;if(!(+this._pull[id].start_date<+this._max_date&&+this._pull[id].end_date>+this._min_date))return!1;for(var i=0,count=this._order.length;count>i;i++)if(this._order[i]==id)return!0;return!1},gantt.updateTask=function(id,item){return dhtmlx.defined(item)||(item=this.getTask(id)),this.callEvent("onBeforeTaskUpdate",[id,item])===!1?!1:(this._pull[item.id]=item,this._is_parent_sync(item)||this._resync_parent(item),this._update_parents(item.id),this.refreshTask(item.id),this.callEvent("onAfterTaskUpdate",[id,item]),this._sync_order(),void this._adjust_scales())},gantt._add_branch=function(task,silent){this._branches[task.parent]||(this._branches[task.parent]=[]);for(var branch=this._branches[task.parent],added_already=!1,i=0,length=branch.length;length>i;i++)if(branch[i]==task.id){added_already=!0;break}added_already||branch.push(task.id),this._sync_parent(task),this._sync_order(silent)},gantt._move_branch=function(task,old_parent,new_parent){task.parent=new_parent,this._sync_parent(task),this._replace_branch_child(old_parent,task.id),this.isTaskExists(new_parent)||new_parent===this.config.root_id?this._add_branch(task):delete this._branches[task.id],task.$level=this.calculateTaskLevel(task),this._sync_order()},gantt._resync_parent=function(task){this._move_branch(task,task.$rendered_parent,task.parent)},gantt._sync_parent=function(task){task.$rendered_parent=task.parent},gantt._is_parent_sync=function(task){return task.$rendered_parent==task.parent},gantt._replace_branch_child=function(node,old_id,new_id){var branch=this._branches[node];if(branch){for(var newbranch=[],i=0;i<branch.length;i++)branch[i]!=old_id?newbranch.push(branch[i]):new_id&&newbranch.push(new_id);this._branches[node]=newbranch}this._sync_order()},gantt.addTask=function(item,parent){return dhtmlx.defined(parent)||(parent=item.parent||0),dhtmlx.defined(this._pull[parent])||(parent=0),item.parent=parent,item=this._init_task(item),this.callEvent("onBeforeTaskAdd",[item.id,item])===!1?!1:(this._pull[item.id]=item,this._add_branch(item),this.refreshData(),this._adjust_scales(),this.callEvent("onAfterTaskAdd",[item.id,item]),item.id)},gantt._default_task_date=function(item,parent_id){var parent=parent_id&&parent_id!=this.config.root_id?this.getTask(parent_id):!1,startDate="";if(parent)startDate=parent.start_date;else{var first=this._order[0];startDate=first?this.getTask(first).start_date:this.getState().min_date}return new Date(startDate)},gantt._set_default_task_timing=function(task){task.start_date=task.start_date||gantt._default_task_date(task,task.parent),task.duration=task.duration||this.config.duration_step,task.end_date=task.end_date||this.calculateEndDate(task.start_date,task.duration)},gantt.createTask=function(item,parent){return item=item||{},item.id=dhtmlx.uid(),item.start_date||(item.start_date=gantt._default_task_date(item,parent)),void 0===item.text&&(item.text=gantt.locale.labels.new_task),void 0===item.duration&&(item.duration=1),parent&&(item.parent=parent,parent=this.getTask(parent),parent.$open=!0),this.callEvent("onTaskCreated",[item])?(this.config.details_on_create?(item.$new=!0,this._pull[item.id]=this._init_task(item),this._add_branch(item),item.$level=this.calculateTaskLevel(item),this.selectTask(item.id),this.refreshData(),this.showLightbox(item.id)):this.addTask(item)&&(this.showTask(item.id),this.selectTask(item.id)),item.id):null},gantt.deleteTask=function(id){return this._deleteTask(id)},gantt._getChildLinks=function(id){var item=this.getTask(id);if(!item)return[];for(var links=item.$source.concat(item.$target),branches=this.getChildren(item.id),i=0;i<branches.length;i++)links=links.concat(this._getChildLinks(branches[i]));for(var res={},i=0;i<links.length;i++)res[links[i]]=!0;links=[];for(var i in res)links.push(i);return links},gantt._getTaskTree=function(id){var item=this.getTask(id);if(!item)return[];for(var items=[],branches=this.getChildren(item.id),i=0;i<branches.length;i++)items.push(branches[i]),items=items.concat(this._getTaskTree(branches[i]));return items},gantt._deleteRelatedLinks=function(links,silent){var use_dp=this._dp&&!silent;use_dp&&this._dp.setUpdateMode("off");for(var i=0;i<links.length;i++)use_dp&&(this._dp.setGanttMode("links"),this._dp.setUpdated(links[i],!0,"deleted")),this._deleteLink(links[i],!0);use_dp&&(this._dp.sendData(),this._dp.setUpdateMode("cell"))},gantt._deleteRelatedTasks=function(id,silent){var use_dp=this._dp&&!silent;use_dp&&(this._dp.setGanttMode("tasks"),this._dp.setUpdateMode("off"));for(var tree=this._getTaskTree(id),i=0;i<tree.length;i++){var t_id=tree[i];this._unset_task(t_id),use_dp&&this._dp.setUpdated(t_id,!0,"deleted")}use_dp&&this._dp.setUpdateMode("cell")},gantt._unset_task=function(id){var item=this.getTask(id);this._update_flags(id,null),delete this._pull[id],this._move_branch(item,item.parent,null)},gantt._deleteTask=function(id,silent){var item=this.getTask(id);if(!silent&&this.callEvent("onBeforeTaskDelete",[id,item])===!1)return!1;var links=gantt._getChildLinks(id);return this._deleteRelatedTasks(id,silent),this._deleteRelatedLinks(links,silent),this._unset_task(id),silent||(this.callEvent("onAfterTaskDelete",[id,item]),this.refreshData()),!0},gantt.clearAll=function(){this._pull={},this._branches={},this._order=[],this._order_full=[],this._lpull={},this._update_flags(),this.userdata={},this.callEvent("onClear",[]),this.refreshData()},gantt._update_flags=function(oldid,newid){void 0===oldid?(this._lightbox_id=this._selected_task=null,this._tasks_dnd.drag&&(this._tasks_dnd.drag.id=null)):(this._lightbox_id==oldid&&(this._lightbox_id=newid),this._selected_task==oldid&&(this._selected_task=newid),this._tasks_dnd.drag&&this._tasks_dnd.drag.id==oldid&&(this._tasks_dnd.drag.id=newid))},gantt.changeTaskId=function(oldid,newid){var item=this._pull[newid]=this._pull[oldid];this._pull[newid].id=newid,delete this._pull[oldid];for(var id in this._pull)this._pull[id].parent==oldid&&(this._pull[id].parent=newid);this._update_flags(oldid,newid),this._replace_branch_child(item.parent,oldid,newid),this.callEvent("onTaskIdChange",[oldid,newid])},gantt._get_duration_unit=function(){return 1e3*gantt._get_line(this.config.duration_unit)||this.config.duration_unit},gantt._get_safe_type=function(){return"task"},gantt._get_type_name=function(type_value){for(var i in this.config.types)if(this.config.types[i]==type_value)return i;return"task"},gantt.getWorkHours=function(date){return this._working_time_helper.get_working_hours(date)},gantt.setWorkTime=function(config){this._working_time_helper.set_time(config)},gantt.isWorkTime=function(date,unit){var helper=this._working_time_helper;return helper.is_working_unit(date,unit||this.config.duration_unit)},gantt.correctTaskWorkTime=function(task){gantt.config.work_time&&gantt.config.correct_work_time&&(gantt.isWorkTime(task.start_date)?gantt.isWorkTime(new Date(+task.end_date-1))||(task.end_date=gantt.calculateEndDate(task.start_date,task.duration)):(task.start_date=gantt.getClosestWorkTime({date:task.start_date,dir:"future"}),task.end_date=gantt.calculateEndDate(task.start_date,task.duration)))},gantt.getClosestWorkTime=function(config){var helper=this._working_time_helper;return config instanceof Date&&(config={date:config}),config.dir=config.dir||"any",config.unit=config.unit||this.config.duration_unit,helper.get_closest_worktime(config)},gantt.calculateDuration=function(start_date,end_date){var helper=this._working_time_helper;return helper.get_work_units_between(start_date,end_date,this.config.duration_unit,this.config.duration_step)},gantt.calculateEndDate=function(start,duration){var helper=this._working_time_helper,mult=duration>=0?1:-1;return helper.add_worktime(start,Math.abs(duration),this.config.duration_unit,mult*this.config.duration_step)},gantt._init_task=function(task){return dhtmlx.defined(task.id)||(task.id=dhtmlx.uid()),task.start_date&&(task.start_date=gantt.date.parseDate(task.start_date,"xml_date")),task.end_date&&(task.end_date=gantt.date.parseDate(task.end_date,"xml_date")),task.start_date&&!task.end_date&&task.duration&&(task.end_date=this.calculateEndDate(task.start_date,task.duration)),gantt._init_task_timing(task),task.start_date&&task.end_date&&gantt.correctTaskWorkTime(task),task.$source=[],task.$target=[],task.parent=task.parent||this.config.root_id,task.$open=dhtmlx.defined(task.open)?task.open:this.config.open_tree_initially,task.$level=this.calculateTaskLevel(task),task},gantt._init_task_timing=function(task){var task_type=this._get_safe_type(task.type);void 0===task.$rendered_type?task.$rendered_type=task_type:task.$rendered_type!=task_type&&(delete task.$no_end,delete task.$no_start,task.$rendered_type=task_type),void 0!==task.$no_end&&void 0!==task.$no_start||task_type==this.config.types.milestone||(task_type==this.config.types.project?(task.$no_end=task.$no_start=!0,this._set_default_task_timing(task)):(task.$no_end=!(task.end_date||task.duration),task.$no_start=!task.start_date)),task_type==this.config.types.milestone&&(task.end_date=task.start_date),task.start_date&&task.end_date&&(task.duration=this.calculateDuration(task.start_date,task.end_date)),task.duration=task.duration||0},gantt._is_flex_task=function(task){return!(!task.$no_end&&!task.$no_start)},gantt.resetProjectDates=function(task){if(task.$no_end||task.$no_start){var dates=this.getSubtaskDates(task.id);this._assign_project_dates(task,dates.start_date,dates.end_date)}},gantt.getSubtaskDates=function(task_id){var min=null,max=null,root=void 0!==task_id?task_id:gantt.config.root_id;return this.eachTask(function(child){child.start_date&&(!min||min>child.start_date.valueOf())&&(min=child.start_date.valueOf()),child.end_date&&(!max||max<child.end_date.valueOf())&&(max=child.end_date.valueOf())},root),{start_date:min?new Date(min):null,end_date:max?new Date(max):null}},gantt._assign_project_dates=function(task,from,to){task.$no_start&&(task.start_date=from&&1/0!=from?new Date(from):this._default_task_date(task,task.parent)),task.$no_end&&(task.end_date=to&&to!=-1/0?new Date(to):this.calculateEndDate(task.start_date,this.config.duration_step)),(task.$no_start||task.$no_end)&&this._init_task_timing(task)},gantt._update_parents=function(taskId,silent){if(taskId){for(var task=this.getTask(taskId);!task.$no_end&&!task.$no_start&&task.parent&&this.isTaskExists(task.parent);)task=this.getTask(task.parent);(task.$no_start||task.$no_end)&&(gantt.resetProjectDates(task),silent||this.refreshTask(task.id,!0)),task.parent&&this.isTaskExists(task.parent)&&this._update_parents(task.parent,silent)}},gantt.isChildOf=function(child_id,parent_id){if(!this.isTaskExists(child_id))return!1;if(parent_id===this.config.root_id)return this.isTaskExists(child_id);for(var task=this.getTask(child_id);task&&this.isTaskExists(task.parent);)if(task=this.getTask(task.parent),task&&task.id==parent_id)return!0;return!1},gantt.roundDate=function(config){config instanceof Date&&(config={date:config,unit:gantt._tasks.unit,step:gantt._tasks.step});for(var date=config.date,steps=config.step,unit=config.unit,upper=gantt.date[unit+"_start"](new Date(this._min_date));+date>+upper;)upper=gantt.date.add(upper,steps,unit);var lower=gantt.date.add(upper,-1*steps,unit);return config.dir&&"future"==config.dir?upper:config.dir&&"past"==config.dir?lower:Math.abs(date-lower)<Math.abs(upper-date)?lower:upper},gantt.attachEvent("onBeforeTaskUpdate",function(id,task){return gantt._init_task_timing(task),!0}),gantt.attachEvent("onBeforeTaskAdd",function(id,task){return gantt._init_task_timing(task),!0}),gantt.calculateTaskLevel=function(item){for(var level=0;item.parent&&dhtmlx.defined(this._pull[item.parent]);)item=this._pull[item.parent],level++;return level},gantt.sort=function(field,desc,parent){var render=!arguments[3];dhtmlx.defined(parent)||(parent=this.config.root_id),dhtmlx.defined(field)||(field="order");var criteria="string"==typeof field?function(a,b){if(a[field]==b[field])return 0;var result=a[field]>b[field];return desc&&(result=!result),result?1:-1}:field,els=this._branches[parent];if(els){for(var temp=[],i=els.length-1;i>=0;i--)temp[i]=this._pull[els[i]];temp.sort(criteria);for(var i=0;i<temp.length;i++)els[i]=temp[i].id,this.sort(field,desc,els[i],!0)}render&&this.refreshData()},gantt.getNext=function(id){for(var i=0;i<this._order.length-1;i++)if(this._order[i]==id)return this._order[i+1];return null},gantt.getPrev=function(id){for(var i=1;i<this._order.length;i++)if(this._order[i]==id)return this._order[i-1];return null},gantt.getParent=function(id){var parent=this.config.root_id;if(this.isTaskExists(id)){var task=gantt.getTask(id);parent=task.parent}return parent},gantt.getSiblings=function(id){var parent=this.getParent(id);return this._branches[parent]||[]},gantt.getNextSibling=function(id){for(var siblings=this.getSiblings(id),i=0,len=siblings.length;len>i;i++)if(siblings[i]==id)return siblings[i+1]||null;return null},gantt.getPrevSibling=function(id){for(var siblings=this.getSiblings(id),i=0,len=siblings.length;len>i;i++)if(siblings[i]==id)return siblings[i-1]||null;return null},gantt._dp_init=function(dp){dp.setTransactionMode("POST",!0),dp.serverProcessor+=(-1!=dp.serverProcessor.indexOf("?")?"&":"?")+"editing=true",dp._serverProcessor=dp.serverProcessor,dp.styles={updated:"gantt_updated",inserted:"gantt_inserted",deleted:"gantt_deleted",invalid:"gantt_invalid",error:"gantt_error",clear:""},dp._methods=["_row_style","setCellTextStyle","_change_id","_delete_task"],dp.setGanttMode=function(mode){var modes=dp.modes||{};dp._ganttMode&&(modes[dp._ganttMode]={_in_progress:dp._in_progress,_invalid:dp._invalid,updatedRows:dp.updatedRows});var newState=modes[mode];newState||(newState=modes[mode]={_in_progress:{},_invalid:{},updatedRows:[]}),dp._in_progress=newState._in_progress,dp._invalid=newState._invalid,dp.updatedRows=newState.updatedRows,dp.modes=modes,dp._ganttMode=mode},this._sendTaskOrder=function(id,item){item.$drop_target&&(dp.setGanttMode("tasks"),this.getTask(id).target=item.$drop_target,dp.setUpdated(id,!0,"order"),delete this.getTask(id).$drop_target)},this.attachEvent("onAfterTaskAdd",function(id){dp.setGanttMode("tasks"),dp.setUpdated(id,!0,"inserted")}),this.attachEvent("onAfterTaskUpdate",function(id,item){dp.setGanttMode("tasks"),dp.setUpdated(id,!0),gantt._sendTaskOrder(id,item)}),this.attachEvent("onAfterTaskDelete",function(id){dp.setGanttMode("tasks"),dp.setUpdated(id,!0,"deleted")}),this.attachEvent("onAfterLinkUpdate",function(id){dp.setGanttMode("links"),dp.setUpdated(id,!0)}),this.attachEvent("onAfterLinkAdd",function(id){dp.setGanttMode("links"),dp.setUpdated(id,!0,"inserted")}),this.attachEvent("onAfterLinkDelete",function(id){dp.setGanttMode("links"),dp.setUpdated(id,!0,"deleted")}),this.attachEvent("onRowDragEnd",function(id){gantt._sendTaskOrder(id,gantt.getTask(id))}),dp.attachEvent("onBeforeDataSending",function(){return this.serverProcessor=this._serverProcessor+getUrlSymbol(this._serverProcessor)+"gantt_mode="+this._ganttMode,!0});var afterUpdate=dp.afterUpdate;dp.afterUpdate=function(that,b,c,d,xml){var mode=dp._ganttMode;dp.setGanttMode(xml.filePath&&-1!=xml.filePath.indexOf("gantt_mode=links")?"links":"tasks");var res=afterUpdate.apply(dp,arguments);return dp.setGanttMode(mode),res},dp._getRowData=dhtmlx.bind(function(id){var task;task="tasks"==dp._ganttMode?this.isTaskExists(id)?this.getTask(id):{id:id}:this.isLinkExists(id)?this.getLink(id):{id:id},task=dhtmlx.copy(task);var data={};for(var key in task)if("$"!=key.substr(0,1)){var value=task[key];data[key]=value instanceof Date?this.templates.xml_format(value):null===value?"":value}return task.$no_start&&(task.start_date="",task.duration=""),task.$no_end&&(task.end_date="",task.duration=""),data[dp.action_param]=this.getUserData(id,dp.action_param),data},this),this._change_id=dhtmlx.bind(function(oldid,newid){"tasks"!=dp._ganttMode?this.changeLinkId(oldid,newid):this.changeTaskId(oldid,newid)},this),this._row_style=function(row_id,classname){if("tasks"==dp._ganttMode){var el=gantt.getTaskRowNode(row_id);if(el)if(classname)el.className+=" "+classname;else{var regexp=/ (gantt_updated|gantt_inserted|gantt_deleted|gantt_invalid|gantt_error)/g;el.className=el.className.replace(regexp,"")}}},this._delete_task=function(){},this._dp=dp},gantt.getUserData=function(id,name){return this.userdata||(this.userdata={}),this.userdata[id]&&this.userdata[id][name]?this.userdata[id][name]:""},gantt.setUserData=function(id,name,value){this.userdata||(this.userdata={}),this.userdata[id]||(this.userdata[id]={}),this.userdata[id][name]=value},gantt._init_link=function(link){return dhtmlx.defined(link.id)||(link.id=dhtmlx.uid()),link},gantt._sync_links=function(){for(var id in this._pull)this._pull[id].$source=[],this._pull[id].$target=[];for(var id in this._lpull){var link=this._lpull[id];this._pull[link.source]&&this._pull[link.source].$source.push(id),this._pull[link.target]&&this._pull[link.target].$target.push(id)}},gantt.getLink=function(id){return dhtmlx.assert(this._lpull[id],"Link doesn't exist"),this._lpull[id]},gantt.isLinkExists=function(id){return dhtmlx.defined(this._lpull[id])},gantt.addLink=function(link){return link=this._init_link(link),this.callEvent("onBeforeLinkAdd",[link.id,link])===!1?!1:(this._lpull[link.id]=link,this._sync_links(),this._render_link(link.id),this.callEvent("onAfterLinkAdd",[link.id,link]),link.id)},gantt.updateLink=function(id,data){return dhtmlx.defined(data)||(data=this.getLink(id)),this.callEvent("onBeforeLinkUpdate",[id,data])===!1?!1:(this._lpull[id]=data,this._sync_links(),this._render_link(id),this.callEvent("onAfterLinkUpdate",[id,data]),!0)},gantt.deleteLink=function(id){return this._deleteLink(id)},gantt._deleteLink=function(id,silent){var link=this.getLink(id);return silent||this.callEvent("onBeforeLinkDelete",[id,link])!==!1?(delete this._lpull[id],this._sync_links(),this.refreshLink(id),silent||this.callEvent("onAfterLinkDelete",[id,link]),!0):!1},gantt.changeLinkId=function(oldid,newid){this._lpull[newid]=this._lpull[oldid],this._lpull[newid].id=newid,delete this._lpull[oldid],this._sync_links(),this.callEvent("onLinkIdChange",[oldid,newid])},gantt.getChildren=function(id){return dhtmlx.defined(this._branches[id])?this._branches[id]:[]},gantt.hasChild=function(id){return dhtmlx.defined(this._branches[id])&&this._branches[id].length},gantt.refreshData=function(){this._render_data()},gantt._configure=function(col,data){for(var key in data)"undefined"==typeof col[key]&&(col[key]=data[key])},gantt._init_skin=function(){if(!gantt.skin)for(var links=document.getElementsByTagName("link"),i=0;i<links.length;i++){var res=links[i].href.match("dhtmlxgantt_([a-z]+).css");if(res){gantt.skin=res[1];break}}gantt.skin||(gantt.skin="terrace");var skinset=gantt.skins[gantt.skin];this._configure(gantt.config,skinset.config);var config=gantt.getGridColumns();config[1]&&"undefined"==typeof config[1].width&&(config[1].width=skinset._second_column_width),config[2]&&"undefined"==typeof config[2].width&&(config[2].width=skinset._third_column_width),skinset._lightbox_template&&(gantt._lightbox_template=skinset._lightbox_template),gantt._init_skin=function(){}},gantt.skins={},gantt._lightbox_methods={},gantt._lightbox_template="<div class='gantt_cal_ltitle'><span class='gantt_mark'>&nbsp;</span><span class='gantt_time'></span><span class='gantt_title'></span></div><div class='gantt_cal_larea'></div>",gantt.showLightbox=function(id){if(id&&!gantt._is_readonly(this.getTask(id))&&this.callEvent("onBeforeLightbox",[id])){var task=this.getTask(id),box=this.getLightbox(this._get_safe_type(task.type));this._center_lightbox(box),this.showCover(),this._fill_lightbox(id,box),this.callEvent("onLightbox",[id])}},gantt._get_timepicker_step=function(){if(this.config.round_dnd_dates){var scale=gantt._tasks,step=this._get_line(scale.unit)*scale.step/60;return step>=1440&&(step=this.config.time_step),step}return this.config.time_step},gantt.getLabel=function(property,key){for(var sections=this._get_typed_lightbox_config(),i=0;i<sections.length;i++)if(sections[i].map_to==property)for(var options=sections[i].options,j=0;j<options.length;j++)if(options[j].key==key)return options[j].label;return""},gantt.updateCollection=function(list_name,collection){collection=collection.slice(0);var list=gantt.serverList(list_name);return list?(list.splice(0,list.length),list.push.apply(list,collection||[]),void gantt.resetLightbox()):!1},gantt.getLightboxType=function(){return this._get_safe_type(this._lightbox_type)},gantt.getLightbox=function(type){if(void 0===type&&(type=this.getLightboxType()),!this._lightbox||this.getLightboxType()!=this._get_safe_type(type)){this._lightbox_type=this._get_safe_type(type);var d=document.createElement("DIV");d.className="gantt_cal_light";var full_width=this._is_lightbox_timepicker();(gantt.config.wide_form||full_width)&&(d.className+=" gantt_cal_light_wide"),full_width&&(gantt.config.wide_form=!0,d.className+=" gantt_cal_light_full"),d.style.visibility="hidden";for(var html=this._lightbox_template,buttons=this.config.buttons_left,i=0;i<buttons.length;i++){var button=this.config._migrate_buttons[buttons[i]]?this.config._migrate_buttons[buttons[i]]:buttons[i];html+="<div class='gantt_btn_set gantt_left_btn_set "+button+"_set'><div dhx_button='1' class='"+button+"'></div><div>"+this.locale.labels[button]+"</div></div>"}buttons=this.config.buttons_right;for(var i=0;i<buttons.length;i++){var button=this.config._migrate_buttons[buttons[i]]?this.config._migrate_buttons[buttons[i]]:buttons[i];html+="<div class='gantt_btn_set gantt_right_btn_set "+button+"_set' style='float:right;'><div dhx_button='1' class='"+button+"'></div><div>"+this.locale.labels[button]+"</div></div>"}html+="</div>",d.innerHTML=html,gantt.config.drag_lightbox&&(d.firstChild.onmousedown=gantt._ready_to_dnd,d.firstChild.onselectstart=function(){return!1},d.firstChild.style.cursor="pointer",gantt._init_dnd_events()),document.body.insertBefore(d,document.body.firstChild),this._lightbox=d;var sns=this._get_typed_lightbox_config(type);html=this._render_sections(sns);for(var ds=d.getElementsByTagName("div"),i=0;i<ds.length;i++){var t_ds=ds[i];if("gantt_cal_larea"==t_ds.className){t_ds.innerHTML=html;break}}this.resizeLightbox(),this._init_lightbox_events(this),d.style.display="none",d.style.visibility="visible"}return this._lightbox},gantt._render_sections=function(sns){for(var html="",i=0;i<sns.length;i++){var block=this.form_blocks[sns[i].type];if(block){sns[i].id="area_"+dhtmlx.uid();var display=sns[i].hidden?" style='display:none'":"",button="";sns[i].button&&(button="<div class='gantt_custom_button' index='"+i+"'><div class='gantt_custom_button_"+sns[i].button+"'></div><div>"+this.locale.labels["button_"+sns[i].button]+"</div></div>"),this.config.wide_form&&(html+="<div class='gantt_wrap_section' "+display+">"),html+="<div id='"+sns[i].id+"' class='gantt_cal_lsection'>"+button+this.locale.labels["section_"+sns[i].name]+"</div>"+block.render.call(this,sns[i]),html+="</div>"}}return html},gantt.resizeLightbox=function(){var d=this._lightbox;if(d){var con=d.childNodes[1];con.style.height="0px",con.style.height=con.scrollHeight+"px",d.style.height=con.scrollHeight+this.config.lightbox_additional_height+"px",con.style.height=con.scrollHeight+"px"}},gantt._center_lightbox=function(box){if(box){box.style.display="block";var scroll_top=window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop,scroll_left=window.pageXOffset||document.body.scrollLeft||document.documentElement.scrollLeft,view_height=window.innerHeight||document.documentElement.clientHeight;box.style.top=scroll_top?Math.round(scroll_top+Math.max((view_height-box.offsetHeight)/2,0))+"px":Math.round(Math.max((view_height-box.offsetHeight)/2,0)+9)+"px",box.style.left=document.documentElement.scrollWidth>document.body.offsetWidth?Math.round(scroll_left+(document.body.offsetWidth-box.offsetWidth)/2)+"px":Math.round((document.body.offsetWidth-box.offsetWidth)/2)+"px"}},gantt.showCover=function(){if(!this._cover){this._cover=document.createElement("DIV"),this._cover.className="gantt_cal_cover";var _document_height=void 0!==document.height?document.height:document.body.offsetHeight,_scroll_height=document.documentElement?document.documentElement.scrollHeight:0;this._cover.style.height=Math.max(_document_height,_scroll_height)+"px",document.body.appendChild(this._cover)}},gantt._init_lightbox_events=function(){gantt.lightbox_events={},gantt.lightbox_events.gantt_save_btn=function(){gantt._save_lightbox()},gantt.lightbox_events.gantt_delete_btn=function(){gantt.callEvent("onLightboxDelete",[gantt._lightbox_id])&&(gantt.isTaskExists(gantt._lightbox_id)?gantt.$click.buttons["delete"](gantt._lightbox_id):gantt.hideLightbox())},gantt.lightbox_events.gantt_cancel_btn=function(){gantt._cancel_lightbox()},gantt.lightbox_events["default"]=function(e,src){if(src.getAttribute("dhx_button"))gantt.callEvent("onLightboxButton",[src.className,src,e]);else{var index,block,sec;-1!=src.className.indexOf("gantt_custom_button")&&(-1!=src.className.indexOf("gantt_custom_button_")?(index=src.parentNode.getAttribute("index"),sec=src.parentNode.parentNode):(index=src.getAttribute("index"),sec=src.parentNode,src=src.firstChild));var sections=gantt._get_typed_lightbox_config();index&&(block=gantt.form_blocks[sections[index].type],block.button_click(index,src,sec,sec.nextSibling))}},dhtmlxEvent(gantt.getLightbox(),"click",function(e){e=e||window.event;var src=e.target?e.target:e.srcElement;if(src.className||(src=src.previousSibling),src&&src.className&&0===src.className.indexOf("gantt_btn_set")&&(src=src.firstChild),src&&src.className){var func=dhtmlx.defined(gantt.lightbox_events[src.className])?gantt.lightbox_events[src.className]:gantt.lightbox_events["default"];return func(e,src)}return!1}),gantt.getLightbox().onkeydown=function(e){switch((e||event).keyCode){case gantt.keys.edit_save:if((e||event).shiftKey)return;gantt._save_lightbox();break;case gantt.keys.edit_cancel:gantt._cancel_lightbox()}}},gantt._cancel_lightbox=function(){var task=this.getLightboxValues();this.callEvent("onLightboxCancel",[this._lightbox_id,task.$new]),gantt.isTaskExists(task.id)&&task.$new&&this._deleteTask(task.id,!0),this.refreshData(),this.hideLightbox()},gantt._save_lightbox=function(){var task=this.getLightboxValues();this.callEvent("onLightboxSave",[this._lightbox_id,task,!!task.$new])&&(task.$new?(delete task.$new,this.addTask(task)):this.isTaskExists(task.id)&&(dhtmlx.mixin(this.getTask(task.id),task,!0),this.updateTask(task.id)),this.refreshData(),this.hideLightbox())},gantt._resolve_default_mapping=function(section){var mapping=section.map_to,time_controls={time:!0,duration:!0};return time_controls[section.type]&&("auto"==section.map_to?mapping={start_date:"start_date",end_date:"end_date",duration:"duration"}:"string"==typeof section.map_to&&(mapping={start_date:section.map_to})),mapping},gantt.getLightboxValues=function(){var task={};gantt.isTaskExists(this._lightbox_id)&&(task=dhtmlx.mixin({},this.getTask(this._lightbox_id)));for(var sns=this._get_typed_lightbox_config(),i=0;i<sns.length;i++){var node=document.getElementById(sns[i].id);node=node?node.nextSibling:node;var block=this.form_blocks[sns[i].type];if(block){var res=block.get_value.call(this,node,task,sns[i]),map_to=gantt._resolve_default_mapping(sns[i]);if("string"==typeof map_to&&"auto"!=map_to)task[map_to]=res;else if("object"==typeof map_to)for(var property in map_to)map_to[property]&&(task[map_to[property]]=res[property])}}return task},gantt.hideLightbox=function(){var box=this.getLightbox();box&&(box.style.display="none"),this._lightbox_id=null,this.hideCover(),this.callEvent("onAfterLightbox",[])},gantt.hideCover=function(){this._cover&&this._cover.parentNode.removeChild(this._cover),this._cover=null},gantt.resetLightbox=function(){gantt._lightbox&&!gantt._custom_lightbox&&gantt._lightbox.parentNode.removeChild(gantt._lightbox),gantt._lightbox=null},gantt._set_lightbox_values=function(data,box){var task=data,s=box.getElementsByTagName("span");gantt.templates.lightbox_header?(s[1].innerHTML="",s[2].innerHTML=gantt.templates.lightbox_header(task.start_date,task.end_date,task)):(s[1].innerHTML=this.templates.task_time(task.start_date,task.end_date,task),s[2].innerHTML=(this.templates.task_text(task.start_date,task.end_date,task)||"").substr(0,70));for(var sns=this._get_typed_lightbox_config(this.getLightboxType()),i=0;i<sns.length;i++){var section=sns[i];if(this.form_blocks[section.type]){var node=document.getElementById(section.id).nextSibling,block=this.form_blocks[section.type],map_to=gantt._resolve_default_mapping(sns[i]),value=dhtmlx.defined(task[map_to])?task[map_to]:section.default_value;block.set_value.call(gantt,node,value,task,section),section.focus&&block.focus.call(gantt,node)}}data.id&&(gantt._lightbox_id=data.id)},gantt._fill_lightbox=function(id,box){var task=this.getTask(id);this._set_lightbox_values(task,box)},gantt.getLightboxSection=function(name){var config=this._get_typed_lightbox_config(),i=0;for(i;i<config.length&&config[i].name!=name;i++);var section=config[i];this._lightbox||this.getLightbox();var header=document.getElementById(section.id),node=header.nextSibling,result={section:section,header:header,node:node,getValue:function(ev){return gantt.form_blocks[section.type].get_value.call(gantt,node,ev||{},section)},setValue:function(value,ev){return gantt.form_blocks[section.type].set_value.call(gantt,node,value,ev||{},section)}},handler=this._lightbox_methods["get_"+section.type+"_control"];return handler?handler(result):result},gantt._lightbox_methods.get_template_control=function(result){return result.control=result.node,result},gantt._lightbox_methods.get_select_control=function(result){return result.control=result.node.getElementsByTagName("select")[0],result
},gantt._lightbox_methods.get_textarea_control=function(result){return result.control=result.node.getElementsByTagName("textarea")[0],result},gantt._lightbox_methods.get_time_control=function(result){return result.control=result.node.getElementsByTagName("select"),result},gantt._init_dnd_events=function(){dhtmlxEvent(document.body,"mousemove",gantt._move_while_dnd),dhtmlxEvent(document.body,"mouseup",gantt._finish_dnd),gantt._init_dnd_events=function(){}},gantt._move_while_dnd=function(e){if(gantt._dnd_start_lb){document.gantt_unselectable||(document.body.className+=" gantt_unselectable",document.gantt_unselectable=!0);var lb=gantt.getLightbox(),now=e&&e.target?[e.pageX,e.pageY]:[event.clientX,event.clientY];lb.style.top=gantt._lb_start[1]+now[1]-gantt._dnd_start_lb[1]+"px",lb.style.left=gantt._lb_start[0]+now[0]-gantt._dnd_start_lb[0]+"px"}},gantt._ready_to_dnd=function(e){var lb=gantt.getLightbox();gantt._lb_start=[parseInt(lb.style.left,10),parseInt(lb.style.top,10)],gantt._dnd_start_lb=e&&e.target?[e.pageX,e.pageY]:[event.clientX,event.clientY]},gantt._finish_dnd=function(){gantt._lb_start&&(gantt._lb_start=gantt._dnd_start_lb=!1,document.body.className=document.body.className.replace(" gantt_unselectable",""),document.gantt_unselectable=!1)},gantt._focus=function(node,select){if(node&&node.focus)if(gantt.config.touch);else try{select&&node.select&&node.select(),node.focus()}catch(e){}},gantt.form_blocks={getTimePicker:function(sns,hidden){var time_format=sns.time_format;if(!time_format){var time_format=["%d","%m","%Y"];gantt._get_line(gantt._tasks.unit)<gantt._get_line("day")&&time_format.push("%H:%i")}sns._time_format_order={size:0};var cfg=this.config,dt=this.date.date_part(new Date(gantt._min_date.valueOf())),last=1440,first=0;gantt.config.limit_time_select&&(last=60*cfg.last_hour+1,first=60*cfg.first_hour,dt.setHours(cfg.first_hour));for(var html="",p=0;p<time_format.length;p++){var time_option=time_format[p];p>0&&(html+=" ");var options="";switch(time_option){case"%Y":sns._time_format_order[2]=p,sns._time_format_order.size++;for(var year=dt.getFullYear()-5,i=0;10>i;i++)options+="<option value='"+(year+i)+"'>"+(year+i)+"</option>";break;case"%m":sns._time_format_order[1]=p,sns._time_format_order.size++;for(var i=0;12>i;i++)options+="<option value='"+i+"'>"+this.locale.date.month_full[i]+"</option>";break;case"%d":sns._time_format_order[0]=p,sns._time_format_order.size++;for(var i=1;32>i;i++)options+="<option value='"+i+"'>"+i+"</option>";break;case"%H:%i":var last=1440,first=0;sns._time_format_order[3]=p,sns._time_format_order.size++;var i=first,tdate=dt.getDate();for(sns._time_values=[];last>i;){var time=this.templates.time_picker(dt);options+="<option value='"+i+"'>"+time+"</option>",sns._time_values.push(i),dt.setTime(dt.valueOf()+60*this._get_timepicker_step()*1e3);var diff=dt.getDate()!=tdate?1:0;i=24*diff*60+60*dt.getHours()+dt.getMinutes()}}if(options){var readonly=sns.readonly?"disabled='disabled'":"",display=hidden?" style='display:none'":"";html+="<select "+readonly+display+">"+options+"</select>"}}return html},_fill_lightbox_select:function(s,i,d,map){if(s[i+map[0]].value=d.getDate(),s[i+map[1]].value=d.getMonth(),s[i+map[2]].value=d.getFullYear(),dhtmlx.defined(map[3])){var v=60*d.getHours()+d.getMinutes();v=Math.round(v/gantt._get_timepicker_step())*gantt._get_timepicker_step(),s[i+map[3]].value=v}},template:{render:function(sns){var height=(sns.height||"30")+"px";return"<div class='gantt_cal_ltext gantt_cal_template' style='height:"+height+";'></div>"},set_value:function(node,value){node.innerHTML=value||""},get_value:function(node){return node.innerHTML||""},focus:function(){}},textarea:{render:function(sns){var height=(sns.height||"130")+"px";return"<div class='gantt_cal_ltext' style='height:"+height+";'><textarea></textarea></div>"},set_value:function(node,value){node.firstChild.value=value||""},get_value:function(node){return node.firstChild.value},focus:function(node){var a=node.firstChild;gantt._focus(a,!0)}},select:{render:function(sns){for(var height=(sns.height||"23")+"px",html="<div class='gantt_cal_ltext' style='height:"+height+";'><select style='width:100%;'>",i=0;i<sns.options.length;i++)html+="<option value='"+sns.options[i].key+"'>"+sns.options[i].label+"</option>";return html+="</select></div>"},set_value:function(node,value,ev,sns){var select=node.firstChild;!select._dhx_onchange&&sns.onchange&&(select.onchange=sns.onchange,select._dhx_onchange=!0),"undefined"==typeof value&&(value=(select.options[0]||{}).value),select.value=value||""},get_value:function(node){return node.firstChild.value},focus:function(node){var a=node.firstChild;gantt._focus(a,!0)}},time:{render:function(sns){var time=this.form_blocks.getTimePicker.call(this,sns),parts=["<div style='height:30px;padding-top:0px;font-size:inherit;text-align:center;' class='gantt_section_time'>"];return parts.push(time),sns.single_date?(time=this.form_blocks.getTimePicker.call(this,sns,!0),parts.push("<span></span>")):parts.push("<span style='font-weight:normal; font-size:10pt;'> &nbsp;&ndash;&nbsp; </span>"),parts.push(time),parts.push("</div>"),parts.join("")},set_value:function(node,value,ev,config){{var cfg=config,s=node.getElementsByTagName("select"),map=config._time_format_order;config._time_format_size}if(cfg.auto_end_date)for(var _update_lightbox_select=function(){start_date=new Date(s[map[2]].value,s[map[1]].value,s[map[0]].value,0,0),end_date=gantt.calculateEndDate(start_date,1),this.form_blocks._fill_lightbox_select(s,map.size,end_date,map,cfg)},i=0;4>i;i++)s[i].onchange=_update_lightbox_select;var mapping=gantt._resolve_default_mapping(config);"string"==typeof mapping&&(mapping={start_date:mapping});var start_date=ev[mapping.start_date]||new Date,end_date=ev[mapping.end_date]||gantt.calculateEndDate(start_date,1);this.form_blocks._fill_lightbox_select(s,0,start_date,map,cfg),this.form_blocks._fill_lightbox_select(s,map.size,end_date,map,cfg)},get_value:function(node,ev,config){var s=node.getElementsByTagName("select"),map=config._time_format_order,hours=0,minutes=0;if(dhtmlx.defined(map[3])){var time=parseInt(s[map[3]].value,10);hours=Math.floor(time/60),minutes=time%60}var start_date=new Date(s[map[2]].value,s[map[1]].value,s[map[0]].value,hours,minutes);if(hours=minutes=0,dhtmlx.defined(map[3])){var time=parseInt(s[map.size+map[3]].value,10);hours=Math.floor(time/60),minutes=time%60}var end_date=new Date(s[map[2]+map.size].value,s[map[1]+map.size].value,s[map[0]+map.size].value,hours,minutes);start_date>=end_date&&(end_date=gantt.date.add(start_date,gantt._get_timepicker_step(),"minute"));var mapped_fields=gantt._resolve_default_mapping(config),res={start_date:new Date(start_date),end_date:new Date(end_date)};return"string"==typeof mapped_fields?res.start_date:res},focus:function(node){gantt._focus(node.getElementsByTagName("select")[0])}},duration:{render:function(sns){var time=this.form_blocks.getTimePicker.call(this,sns);time="<div class='gantt_time_selects'>"+time+"</div>";var label=this.locale.labels[this.config.duration_unit+"s"],singleDate=sns.single_date?' style="display:none"':"",readonly=sns.readonly?" disabled='disabled'":"",duration="<div class='gantt_duration' "+singleDate+"><input type='button' class='gantt_duration_dec' value='-'"+readonly+"><input type='text' value='5' class='gantt_duration_value'"+readonly+"><input type='button' class='gantt_duration_inc' value='+'"+readonly+"> "+label+" <span></span></div>",html="<div style='height:30px;padding-top:0px;font-size:inherit;' class='gantt_section_time'>"+time+" "+duration+"</div>";return html},set_value:function(node,value,ev,config){function _calc_date(){var start_date=gantt.form_blocks.duration._get_start_date.call(gantt,node,config),duration=gantt.form_blocks.duration._get_duration.call(gantt,node,config),end_date=gantt.calculateEndDate(start_date,duration);endspan.innerHTML=gantt.templates.task_date(end_date)}function _change_duration(step){var value=duration.value;value=parseInt(value,10),window.isNaN(value)&&(value=0),value+=step,1>value&&(value=1),duration.value=value,_calc_date()}var cfg=config,s=node.getElementsByTagName("select"),inps=node.getElementsByTagName("input"),duration=inps[1],btns=[inps[0],inps[2]],endspan=node.getElementsByTagName("span")[0],map=config._time_format_order;btns[0].onclick=dhtmlx.bind(function(){_change_duration(-1*this.config.duration_step)},this),btns[1].onclick=dhtmlx.bind(function(){_change_duration(1*this.config.duration_step)},this),s[0].onchange=_calc_date,s[1].onchange=_calc_date,s[2].onchange=_calc_date,s[3]&&(s[3].onchange=_calc_date),duration.onkeydown=dhtmlx.bind(function(e){e=e||window.event;var code=e.charCode||e.keyCode||e.which;return 40==code?(_change_duration(-1*this.config.duration_step),!1):38==code?(_change_duration(1*this.config.duration_step),!1):void window.setTimeout(function(){_calc_date()},1)},this),duration.onchange=dhtmlx.bind(function(){_calc_date()},this);var mapping=gantt._resolve_default_mapping(config);"string"==typeof mapping&&(mapping={start_date:mapping});var start_date=ev[mapping.start_date]||new Date,end_date=ev[mapping.end_date]||gantt.calculateEndDate(start_date,1),duration_val=Math.round(ev[mapping.duration])||gantt.calculateDuration(start_date,end_date);gantt.form_blocks._fill_lightbox_select(s,0,start_date,map,cfg),duration.value=duration_val,_calc_date()},_get_start_date:function(node,config){var s=node.getElementsByTagName("select"),map=config._time_format_order,hours=0,minutes=0;if(dhtmlx.defined(map[3])){var time=parseInt(s[map[3]].value,10);hours=Math.floor(time/60),minutes=time%60}return new Date(s[map[2]].value,s[map[1]].value,s[map[0]].value,hours,minutes)},_get_duration:function(node){var duration=node.getElementsByTagName("input")[1];return duration=parseInt(duration.value,10),(!duration||window.isNaN(duration))&&(duration=1),0>duration&&(duration*=-1),duration},get_value:function(node,ev,config){var start_date=gantt.form_blocks.duration._get_start_date(node,config),duration=gantt.form_blocks.duration._get_duration(node,config),end_date=gantt.calculateEndDate(start_date,duration),mapped_fields=gantt._resolve_default_mapping(config),res={start_date:new Date(start_date),end_date:new Date(end_date),duration:duration};return"string"==typeof mapped_fields?res.start_date:res},focus:function(node){gantt._focus(node.getElementsByTagName("select")[0])}},parent:{_filter:function(options,config,item_id){var filter=config.filter||function(){return!0};options=options.slice(0);for(var i=0;i<options.length;i++){var task=options[i];(task.id==item_id||gantt.isChildOf(task.id,item_id)||filter(task.id,task)===!1)&&(options.splice(i,1),i--)}return options},_display:function(config,item_id){var tasks=[],options=[];item_id&&(tasks=gantt.getTaskByTime(),config.allow_root&&tasks.unshift({id:gantt.config.root_id,text:config.root_label||""}),tasks=this._filter(tasks,config,item_id),config.sort&&tasks.sort(config.sort));for(var text=config.template||gantt.templates.task_text,i=0;i<tasks.length;i++){var label=text.apply(gantt,[tasks[i].start_date,tasks[i].end_date,tasks[i]]);void 0===label&&(label=""),options.push({key:tasks[i].id,label:label})}return config.options=options,config.map_to=config.map_to||"parent",gantt.form_blocks.select.render.apply(this,arguments)},render:function(sns){return gantt.form_blocks.parent._display(sns,!1)},set_value:function(node,value,ev,config){var tmpDom=document.createElement("div");tmpDom.innerHTML=gantt.form_blocks.parent._display(config,ev.id);var newOptions=tmpDom.removeChild(tmpDom.firstChild);return node.onselect=null,node.parentNode.replaceChild(newOptions,node),gantt.form_blocks.select.set_value.apply(gantt,[newOptions,value,ev,config])},get_value:function(){return gantt.form_blocks.select.get_value.apply(gantt,arguments)},focus:function(){return gantt.form_blocks.select.focus.apply(gantt,arguments)}}},gantt._is_lightbox_timepicker=function(){for(var s=this._get_typed_lightbox_config(),i=0;i<s.length;i++)if("time"==s[i].name&&"time"==s[i].type)return!0;return!1},gantt._dhtmlx_confirm=function(message,title,callback,ok){if(!message)return callback();var opts={text:message};title&&(opts.title=title),ok&&(opts.ok=ok),callback&&(opts.callback=function(result){result&&callback()}),dhtmlx.confirm(opts)},gantt._get_typed_lightbox_config=function(type){void 0===type&&(type=this.getLightboxType());var field=this._get_type_name(type);return gantt.config.lightbox[field+"_sections"]?gantt.config.lightbox[field+"_sections"]:gantt.config.lightbox.sections},gantt._silent_redraw_lightbox=function(type){var oldType=this.getLightboxType();if(this.getState().lightbox){var taskId=this.getState().lightbox,formData=this.getLightboxValues(),task=dhtmlx.copy(this.getTask(taskId));this.resetLightbox();var updTask=dhtmlx.mixin(task,formData,!0),box=this.getLightbox(type?type:void 0);this._center_lightbox(this.getLightbox()),this._set_lightbox_values(updTask,box),this.callEvent("onLightboxChange",[oldType,this.getLightboxType()])}else this.resetLightbox(),this.getLightbox(type?type:void 0);this.callEvent("onLightboxChange",[oldType,this.getLightboxType()])},gantt._extend_to_optional=function(lightbox_block){var duration=lightbox_block,optional_time={render:duration.render,focus:duration.focus,set_value:function(node,value,task,section){var mapping=gantt._resolve_default_mapping(section);if(task[mapping.start_date])return optional_time.enable(node,section),duration.set_value.call(gantt,node,value,task,section);optional_time.disable(node,section);var val={};for(var i in mapping)val[mapping[i]]=task[i];return duration.set_value.call(gantt,node,value,val,section)},get_value:function(node,task,section){return section.disabled?{start_date:null}:duration.get_value.call(gantt,node,task,section)},update_block:function(node,section){if(gantt.callEvent("onSectionToggle",[gantt._lightbox_id,section]),node.style.display=section.disabled?"none":"block",section.button){var button=node.previousSibling.firstChild.firstChild,labels=gantt.locale.labels,button_text=section.disabled?labels[section.name+"_enable_button"]:labels[section.name+"_disable_button"];button.nextSibling.innerHTML=button_text}gantt.resizeLightbox()},disable:function(node,section){section.disabled=!0,optional_time.update_block(node,section)},enable:function(node,section){section.disabled=!1,optional_time.update_block(node,section)},button_click:function(index,el,section,container){if(gantt.callEvent("onSectionButton",[gantt._lightbox_id,section])!==!1){var config=gantt._get_typed_lightbox_config()[index];config.disabled?optional_time.enable(container,config):optional_time.disable(container,config)}}};return optional_time},gantt.form_blocks.duration_optional=gantt._extend_to_optional(gantt.form_blocks.duration),gantt.form_blocks.time_optional=gantt._extend_to_optional(gantt.form_blocks.time),dataProcessor.prototype={setTransactionMode:function(mode,total){this._tMode=mode,this._tSend=total},escape:function(data){return this._utf?encodeURIComponent(data):escape(data)},enableUTFencoding:function(mode){this._utf=convertStringToBoolean(mode)},setDataColumns:function(val){this._columns="string"==typeof val?val.split(","):val},getSyncState:function(){return!this.updatedRows.length},enableDataNames:function(mode){this._endnm=convertStringToBoolean(mode)},enablePartialDataSend:function(mode){this._changed=convertStringToBoolean(mode)},setUpdateMode:function(mode,dnd){this.autoUpdate="cell"==mode,this.updateMode=mode,this.dnd=dnd},ignore:function(code,master){this._silent_mode=!0,code.call(master||window),this._silent_mode=!1},setUpdated:function(rowId,state,mode){if(!this._silent_mode){var ind=this.findRow(rowId);mode=mode||"updated";var existing=this.obj.getUserData(rowId,this.action_param);existing&&"updated"==mode&&(mode=existing),state?(this.set_invalid(rowId,!1),this.updatedRows[ind]=rowId,this.obj.setUserData(rowId,this.action_param,mode),this._in_progress[rowId]&&(this._in_progress[rowId]="wait")):this.is_invalid(rowId)||(this.updatedRows.splice(ind,1),this.obj.setUserData(rowId,this.action_param,"")),state||this._clearUpdateFlag(rowId),this.markRow(rowId,state,mode),state&&this.autoUpdate&&this.sendData(rowId)}},_clearUpdateFlag:function(){},markRow:function(id,state,mode){var str="",invalid=this.is_invalid(id);if(invalid&&(str=this.styles[invalid],state=!0),this.callEvent("onRowMark",[id,state,mode,invalid])&&(str=this.styles[state?mode:"clear"]+str,this.obj[this._methods[0]](id,str),invalid&&invalid.details)){str+=this.styles[invalid+"_cell"];for(var i=0;i<invalid.details.length;i++)invalid.details[i]&&this.obj[this._methods[1]](id,i,str)}},getState:function(id){return this.obj.getUserData(id,this.action_param)},is_invalid:function(id){return this._invalid[id]},set_invalid:function(id,mode,details){details&&(mode={value:mode,details:details,toString:function(){return this.value.toString()}}),this._invalid[id]=mode},checkBeforeUpdate:function(){return!0},sendData:function(rowId){return!this._waitMode||"tree"!=this.obj.mytype&&!this.obj._h2?(this.obj.editStop&&this.obj.editStop(),"undefined"==typeof rowId||this._tSend?this.sendAllData():this._in_progress[rowId]?!1:(this.messages=[],!this.checkBeforeUpdate(rowId)&&this.callEvent("onValidationError",[rowId,this.messages])?!1:void this._beforeSendData(this._getRowData(rowId),rowId))):void 0},_beforeSendData:function(data,rowId){return this.callEvent("onBeforeUpdate",[rowId,this.getState(rowId),data])?void this._sendData(data,rowId):!1},serialize:function(data,id){if("string"==typeof data)return data;if("undefined"!=typeof id)return this.serialize_one(data,"");var stack=[],keys=[];for(var key in data)data.hasOwnProperty(key)&&(stack.push(this.serialize_one(data[key],key+this.post_delim)),keys.push(key));return stack.push("ids="+this.escape(keys.join(","))),dhtmlx.security_key&&stack.push("dhx_security="+dhtmlx.security_key),stack.join("&")},serialize_one:function(data,pref){if("string"==typeof data)return data;var stack=[];for(var key in data)data.hasOwnProperty(key)&&stack.push(this.escape((pref||"")+key)+"="+this.escape(data[key]));return stack.join("&")},_sendData:function(a1,rowId){if(a1){if(!this.callEvent("onBeforeDataSending",rowId?[rowId,this.getState(rowId),a1]:[null,null,a1]))return!1;rowId&&(this._in_progress[rowId]=(new Date).valueOf());var a2=new dtmlXMLLoaderObject(this.afterUpdate,this,!0),a3=this.serverProcessor+(this._user?getUrlSymbol(this.serverProcessor)+["dhx_user="+this._user,"dhx_version="+this.obj.getUserData(0,"version")].join("&"):"");"POST"!=this._tMode?a2.loadXML(a3+(-1!=a3.indexOf("?")?"&":"?")+this.serialize(a1,rowId)):a2.loadXML(a3,!0,this.serialize(a1,rowId)),this._waitMode++}},sendAllData:function(){if(this.updatedRows.length){this.messages=[];for(var valid=!0,i=0;i<this.updatedRows.length;i++)valid&=this.checkBeforeUpdate(this.updatedRows[i]);if(!valid&&!this.callEvent("onValidationError",["",this.messages]))return!1;if(this._tSend)this._sendData(this._getAllData());else for(var i=0;i<this.updatedRows.length;i++)if(!this._in_progress[this.updatedRows[i]]){if(this.is_invalid(this.updatedRows[i]))continue;if(this._beforeSendData(this._getRowData(this.updatedRows[i]),this.updatedRows[i]),this._waitMode&&("tree"==this.obj.mytype||this.obj._h2))return}}},_getAllData:function(){for(var out={},has_one=!1,i=0;i<this.updatedRows.length;i++){var id=this.updatedRows[i];this._in_progress[id]||this.is_invalid(id)||this.callEvent("onBeforeUpdate",[id,this.getState(id)])&&(out[id]=this._getRowData(id,id+this.post_delim),has_one=!0,this._in_progress[id]=(new Date).valueOf())}return has_one?out:null},setVerificator:function(ind,verifFunction){this.mandatoryFields[ind]=verifFunction||function(value){return""!==value}},clearVerificator:function(ind){this.mandatoryFields[ind]=!1},findRow:function(pattern){var i=0;for(i=0;i<this.updatedRows.length&&pattern!=this.updatedRows[i];i++);return i},defineAction:function(name,handler){this._uActions||(this._uActions=[]),this._uActions[name]=handler},afterUpdateCallback:function(sid,tid,action,btag){var marker=sid,correct="error"!=action&&"invalid"!=action;if(correct||this.set_invalid(sid,action),this._uActions&&this._uActions[action]&&!this._uActions[action](btag))return delete this._in_progress[marker];"wait"!=this._in_progress[marker]&&this.setUpdated(sid,!1);var soid=sid;switch(action){case"inserted":case"insert":tid!=sid&&(this.obj[this._methods[2]](sid,tid),sid=tid);break;case"delete":case"deleted":return this.obj.setUserData(sid,this.action_param,"true_deleted"),this.obj[this._methods[3]](sid),delete this._in_progress[marker],this.callEvent("onAfterUpdate",[sid,action,tid,btag])}"wait"!=this._in_progress[marker]?(correct&&this.obj.setUserData(sid,this.action_param,""),delete this._in_progress[marker]):(delete this._in_progress[marker],this.setUpdated(tid,!0,this.obj.getUserData(sid,this.action_param))),this.callEvent("onAfterUpdate",[soid,action,tid,btag])},afterUpdate:function(that,b,c,d,xml){if(xml.getXMLTopNode("data"),xml.xmlDoc.responseXML){for(var atag=xml.doXPath("//data/action"),i=0;i<atag.length;i++){var btag=atag[i],action=btag.getAttribute("type"),sid=btag.getAttribute("sid"),tid=btag.getAttribute("tid");that.afterUpdateCallback(sid,tid,action,btag)}that.finalizeUpdate()}},finalizeUpdate:function(){this._waitMode&&this._waitMode--,("tree"==this.obj.mytype||this.obj._h2)&&this.updatedRows.length&&this.sendData(),this.callEvent("onAfterUpdateFinish",[]),this.updatedRows.length||this.callEvent("onFullSync",[])},init:function(anObj){this.obj=anObj,this.obj._dp_init&&this.obj._dp_init(this)},setOnAfterUpdate:function(ev){this.attachEvent("onAfterUpdate",ev)},enableDebug:function(){},setOnBeforeUpdateHandler:function(func){this.attachEvent("onBeforeDataSending",func)},setAutoUpdate:function(interval,user){interval=interval||2e3,this._user=user||(new Date).valueOf(),this._need_update=!1,this._loader=null,this._update_busy=!1,this.attachEvent("onAfterUpdate",function(sid,action,tid,xml_node){this.afterAutoUpdate(sid,action,tid,xml_node)}),this.attachEvent("onFullSync",function(){this.fullSync()});var self=this;window.setInterval(function(){self.loadUpdate()},interval)},afterAutoUpdate:function(sid,action){return"collision"==action?(this._need_update=!0,!1):!0},fullSync:function(){return this._need_update===!0&&(this._need_update=!1,this.loadUpdate()),!0},getUpdates:function(url,callback){return this._update_busy?!1:(this._update_busy=!0,this._loader=this._loader||new dtmlXMLLoaderObject(!0),this._loader.async=!0,this._loader.waitCall=callback,void this._loader.loadXML(url))},_v:function(node){return node.firstChild?node.firstChild.nodeValue:""},_a:function(arr){for(var res=[],i=0;i<arr.length;i++)res[i]=this._v(arr[i]);return res},loadUpdate:function(){var self=this,version=this.obj.getUserData(0,"version"),url=this.serverProcessor+getUrlSymbol(this.serverProcessor)+["dhx_user="+this._user,"dhx_version="+version].join("&");url=url.replace("editing=true&",""),this.getUpdates(url,function(){var vers=self._loader.doXPath("//userdata");self.obj.setUserData(0,"version",self._v(vers[0]));var upds=self._loader.doXPath("//update");if(upds.length){self._silent_mode=!0;for(var i=0;i<upds.length;i++){var status=upds[i].getAttribute("status"),id=upds[i].getAttribute("id"),parent=upds[i].getAttribute("parent");switch(status){case"inserted":self.callEvent("insertCallback",[upds[i],id,parent]);break;case"updated":self.callEvent("updateCallback",[upds[i],id,parent]);break;case"deleted":self.callEvent("deleteCallback",[upds[i],id,parent])}}self._silent_mode=!1}self._update_busy=!1,self=null})}},dhtmlx.assert=function(check,message){check||dhtmlx.message({type:"error",text:message,expire:-1})},gantt.init=function(node,from,to){if(from&&to&&(this.config.start_date=this._min_date=new Date(from),this.config.end_date=this._max_date=new Date(to)),this._init_skin(),this.config.scroll_size||(this.config.scroll_size=this._detectScrollSize()),!this._original_columns){var cols=this.config.columns;this._original_columns=[];for(var i=0,l=cols.length;l>i;i++)this._original_columns.push(dhtmlx.copy(cols[i]))}dhtmlxEvent(window,"resize",this._on_resize),this.init=function(node){this.$container&&this.$container.parentNode&&(this.$container.parentNode.removeChild(this.$container),this.$container=null),this._reinit(node)},this._reinit(node)},gantt._reinit=function(node){this._init_html_area(node),this._set_sizes(),this._clear_renderers(),this.resetLightbox(),this._update_flags(),this._init_touch_events(),this._init_templates(),this._init_grid(),this._init_tasks(),this._set_scroll_events(),dhtmlxEvent(this.$container,"click",this._on_click),dhtmlxEvent(this.$container,"dblclick",this._on_dblclick),dhtmlxEvent(this.$container,"mousemove",this._on_mousemove),dhtmlxEvent(this.$container,"contextmenu",this._on_contextmenu),this.callEvent("onGanttReady",[]),this.render()},gantt._init_html_area=function(node){this._obj="string"==typeof node?document.getElementById(node):node,dhtmlx.assert(this._obj,"Invalid html container: "+node);var html="<div class='gantt_container'><div class='gantt_grid'></div><div class='gantt_task'></div>";html+="<div class='gantt_ver_scroll'><div></div></div><div class='gantt_hor_scroll'><div></div></div></div>",this._obj.innerHTML=html,this.$container=this._obj.firstChild;var childs=this.$container.childNodes;this.$grid=childs[0],this.$task=childs[1],this.$scroll_ver=childs[2],this.$scroll_hor=childs[3],this.$grid.innerHTML="<div class='gantt_grid_scale'></div><div class='gantt_grid_data'></div>",this.$grid_scale=this.$grid.childNodes[0],this.$grid_data=this.$grid.childNodes[1],this.$task.innerHTML="<div class='gantt_task_scale'></div><div class='gantt_data_area'><div class='gantt_task_bg'></div><div class='gantt_links_area'></div><div class='gantt_bars_area'></div></div>",this.$task_scale=this.$task.childNodes[0],this.$task_data=this.$task.childNodes[1],this.$task_bg=this.$task_data.childNodes[0],this.$task_links=this.$task_data.childNodes[1],this.$task_bars=this.$task_data.childNodes[2]},gantt.$click={buttons:{edit:function(id){gantt.showLightbox(id)},"delete":function(id){var question=gantt.locale.labels.confirm_deleting,title=gantt.locale.labels.confirm_deleting_title;gantt._dhtmlx_confirm(question,title,function(){var task=gantt.getTask(id);task.$new?(gantt._deleteTask(id,!0),gantt.refreshData()):gantt.deleteTask(id),gantt.hideLightbox()})}}},gantt._calculate_content_height=function(){var scale_height=this.config.scale_height,rows_height=this._order.length*this.config.row_height,hor_scroll_height=this._scroll_hor?this.config.scroll_size+1:0;return this._is_grid_visible()||this._is_chart_visible()?scale_height+rows_height+2+hor_scroll_height:0},gantt._calculate_content_width=function(){{var grid_width=this._get_grid_width(),chart_width=this._tasks?this._tasks.full_width:0;this._scroll_ver?this.config.scroll_size+1:0}return this._is_chart_visible()||(chart_width=0),this._is_grid_visible()||(grid_width=0),grid_width+chart_width+1},gantt._get_resize_options=function(){var res={x:!1,y:!1};return"xy"==this.config.autosize?res.x=res.y=!0:"y"==this.config.autosize||this.config.autosize===!0?res.y=!0:"x"==this.config.autosize&&(res.x=!0),res},gantt._clean_el_size=function(value){return 1*(value||"").toString().replace("px","")||0},gantt._get_box_styles=function(){var computed=null;computed=window.getComputedStyle?window.getComputedStyle(this._obj,null):{width:this._obj.clientWidth,height:this._obj.clientHeight};var properties=["width","height","paddingTop","paddingBottom","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],styles={boxSizing:"border-box"==computed.boxSizing};computed.MozBoxSizing&&(styles.boxSizing="border-box"==computed.MozBoxSizing);for(var i=0;i<properties.length;i++)styles[properties[i]]=computed[properties[i]]?this._clean_el_size(computed[properties[i]]):0;var box={horPaddings:styles.paddingLeft+styles.paddingRight+styles.borderLeftWidth+styles.borderRightWidth,vertPaddings:styles.paddingTop+styles.paddingBottom+styles.borderTopWidth+styles.borderBottomWidth,borderBox:styles.boxSizing,innerWidth:styles.width,innerHeight:styles.height,outerWidth:styles.width,outerHeight:styles.height};return box.borderBox?(box.innerWidth-=box.horPaddings,box.innerHeight-=box.vertPaddings):(box.outerWidth+=box.horPaddings,box.outerHeight+=box.vertPaddings),box},gantt._do_autosize=function(){var resize=this._get_resize_options(),boxSizes=this._get_box_styles();if(resize.y){var reqHeight=this._calculate_content_height();boxSizes.borderBox&&(reqHeight+=boxSizes.vertPaddings),this._obj.style.height=reqHeight+"px"}if(resize.x){var reqWidth=this._calculate_content_width();boxSizes.borderBox&&(reqWidth+=boxSizes.horPaddings),this._obj.style.width=reqWidth+"px"}},gantt._set_sizes=function(){this._do_autosize();var boxSizes=this._get_box_styles();if(this._y=boxSizes.innerHeight,!(this._y<20)){this.$grid.style.height=this.$task.style.height=Math.max(this._y-this.$scroll_hor.offsetHeight-2,0)+"px";var dataHeight=Math.max(this._y-(this.config.scale_height||0)-this.$scroll_hor.offsetHeight-2,0);this.$grid_data.style.height=this.$task_data.style.height=dataHeight+"px";var gridWidth=Math.max(this._get_grid_width()-1,0);this.$grid.style.width=gridWidth+"px",this.$grid.style.display=0===gridWidth?"none":"",boxSizes=this._get_box_styles(),this._x=boxSizes.innerWidth,this._x<20||(this.$grid_data.style.width=Math.max(this._get_grid_width()-1,0)+"px",this.$task.style.width=Math.max(this._x-this._get_grid_width()-2,0)+"px")}},gantt.getScrollState=function(){return this.$task&&this.$task_data?{x:this.$task.scrollLeft,y:this.$task_data.scrollTop}:null},gantt._save_scroll_state=function(x,y){var pos={};this._cached_scroll_pos=this._cached_scroll_pos||{},void 0!==x&&(pos.x=x),void 0!==y&&(pos.y=y),dhtmlx.mixin(this._cached_scroll_pos,pos,!0)},gantt._restore_scroll_state=function(){return this._cached_scroll_pos||null},gantt.scrollTo=function(left,top){1*left==left&&(this.$task.scrollLeft=left,this._save_scroll_state(left,void 0)),1*top==top&&(this.$task_data.scrollTop=top,this.$grid_data.scrollTop=top,this._save_scroll_state(void 0,top))},gantt.showDate=function(date){var date_x=this.posFromDate(date),scroll_to=Math.max(date_x-this.config.task_scroll_offset,0);this.scrollTo(scroll_to)},gantt.showTask=function(id){var el=this.getTaskNode(id);if(el){var left=Math.max(el.offsetLeft-this.config.task_scroll_offset,0),top=el.offsetTop-(this.$task_data.offsetHeight-this.config.row_height)/2;this.scrollTo(left,top)}},gantt._on_resize=gantt.setSizes=function(){gantt._set_sizes(),gantt._scroll_resize()},gantt.render=function(){var pos=dhtmlx.copy(this._restore_scroll_state());if(this._render_grid(),this._render_tasks_scales(),this._scroll_resize(),this._on_resize(),this._render_data(),this.config.preserve_scroll&&pos){var new_pos=gantt._restore_scroll_state(),visible_date=gantt._date_from_pos(pos.x);if(new_pos.x!=pos.x||new_pos.y!=pos.y){if(visible_date){var date_x=this.posFromDate(visible_date);this.scrollTo(date_x)}gantt.scrollTo(void 0,pos.y)}}this.callEvent("onGanttRender",[])},gantt._set_scroll_events=function(){function onMouseWheel(e){var res=gantt._get_resize_options(),wx=ff?-20*e.deltaX:e.wheelDeltaX,wy=ff?-40*e.deltaY:e.wheelDelta;if(wx){if(res.x)return!0;var dir=wx/-40,left=gantt.$task.scrollLeft+30*dir;gantt.scrollTo(left,null),gantt.$scroll_hor.scrollTop=top}else{if(res.y)return!0;var dir=wy/-40;"undefined"==typeof wy&&(dir=e.detail);var top=gantt.$grid_data.scrollTop+30*dir;gantt.scrollTo(null,top),gantt.$scroll_ver.scrollTop=top}return e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,!1}dhtmlxEvent(this.$scroll_hor,"scroll",function(){if(!gantt._touch_scroll_active){var left=gantt.$scroll_hor.scrollLeft;gantt.scrollTo(left)}}),dhtmlxEvent(this.$scroll_ver,"scroll",function(){if(!gantt._touch_scroll_active){var top=gantt.$scroll_ver.scrollTop;gantt.$grid_data.scrollTop=top,gantt.scrollTo(null,top)
}}),dhtmlxEvent(this.$task,"scroll",function(){var left=gantt.$task.scrollLeft,barLeft=gantt.$scroll_hor.scrollLeft;barLeft!=left&&(gantt.$scroll_hor.scrollLeft=left)}),dhtmlxEvent(this.$task_data,"scroll",function(){var top=gantt.$task_data.scrollTop,barTop=gantt.$scroll_ver.scrollTop;barTop!=top&&(gantt.$scroll_ver.scrollTop=top)});var ff=_isFF&&!window._KHTMLrv;ff?dhtmlxEvent(gantt.$container,"wheel",onMouseWheel):dhtmlxEvent(gantt.$container,"mousewheel",onMouseWheel)},gantt._scroll_resize=function(){if(!(this._x<20||this._y<20)){var grid_width=this._get_grid_width(),task_width=Math.max(this._x-grid_width,0),task_height=Math.max(this._y-this.config.scale_height,0),scroll_size=this.config.scroll_size+1,task_data_width=Math.max(this.$task_data.offsetWidth-scroll_size,0),task_data_height=this.config.row_height*this._order.length,resize=this._get_resize_options(),scroll_hor=this._scroll_hor=resize.x?!1:task_data_width>task_width,scroll_ver=this._scroll_ver=resize.y?!1:task_data_height>task_height;this.$scroll_hor.style.display=scroll_hor?"block":"none",this.$scroll_hor.style.height=(scroll_hor?scroll_size:0)+"px",this.$scroll_hor.style.width=Math.max(this._x-(scroll_ver?scroll_size:2),0)+"px",this.$scroll_hor.firstChild.style.width=task_data_width+grid_width+scroll_size+2+"px",this.$scroll_ver.style.display=scroll_ver?"block":"none",this.$scroll_ver.style.width=(scroll_ver?scroll_size:0)+"px",this.$scroll_ver.style.height=Math.max(this._y-(scroll_hor?scroll_size:0)-this.config.scale_height,0)+"px",this.$scroll_ver.style.top=this.config.scale_height+"px",this.$scroll_ver.firstChild.style.height=this.config.scale_height+task_data_height+"px"}},gantt.locate=function(e){var trg=gantt._get_target_node(e);if((trg.className||"").indexOf("gantt_task_cell")>=0)return null;for(var attribute=arguments[1]||this.config.task_attribute;trg;){if(trg.getAttribute){var test=trg.getAttribute(attribute);if(test)return test}trg=trg.parentNode}return null},gantt._get_target_node=function(e){var trg;return e.tagName?trg=e:(e=e||window.event,trg=e.target||e.srcElement),trg},gantt._trim=function(str){var func=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")};return func.apply(str)},gantt._locate_css=function(e,classname,strict){void 0===strict&&(strict=!0);for(var trg=gantt._get_target_node(e),css="";trg;){if(css=trg.className){var ind=css.indexOf(classname);if(ind>=0){if(!strict)return trg;var left=0===ind||!gantt._trim(css.charAt(ind-1)),right=ind+classname.length>=css.length||!gantt._trim(css.charAt(ind+classname.length));if(left&&right)return trg}}trg=trg.parentNode}return null},gantt._locateHTML=function(e,attribute){var trg=gantt._get_target_node(e);for(attribute=attribute||this.config.task_attribute;trg;){if(trg.getAttribute){var test=trg.getAttribute(attribute);if(test)return trg}trg=trg.parentNode}return null},gantt.getTaskRowNode=function(id){for(var els=this.$grid_data.childNodes,attribute=this.config.task_attribute,i=0;i<els.length;i++)if(els[i].getAttribute){var value=els[i].getAttribute(attribute);if(value==id)return els[i]}return null},gantt.getState=function(){return{drag_id:this._tasks_dnd.drag.id,drag_mode:this._tasks_dnd.drag.mode,drag_from_start:this._tasks_dnd.drag.left,selected_task:this._selected_task,min_date:new Date(this._min_date),max_date:new Date(this._max_date),lightbox:this._lightbox_id,touch_drag:this._touch_drag}},gantt._checkTimeout=function(host,updPerSecond){if(!updPerSecond)return!0;var timeout=1e3/updPerSecond;return 1>timeout?!0:host._on_timeout?!1:(setTimeout(function(){delete host._on_timeout},timeout),host._on_timeout=!0,!0)},gantt.selectTask=function(id){if(!this.config.select_task)return!1;if(id){if(this._selected_task==id)return this._selected_task;if(!this.callEvent("onBeforeTaskSelected",[id]))return!1;this.unselectTask(),this._selected_task=id,this.refreshTask(id),this.callEvent("onTaskSelected",[id])}return this._selected_task},gantt.unselectTask=function(){var id=this._selected_task;id&&(this._selected_task=null,this.refreshTask(id),this.callEvent("onTaskUnselected",[id]))},gantt.getSelectedId=function(){return dhtmlx.defined(this._selected_task)?this._selected_task:null},gantt.changeLightboxType=function(type){return this.getLightboxType()==type?!0:void gantt._silent_redraw_lightbox(type)},function(){if(gantt._modules&&gantt._modules.length)for(var i=0;i<gantt._modules.length;i++)gantt._modules[i](gantt)}(),gantt.date={init:function(){for(var s=gantt.locale.date.month_short,t=gantt.locale.date.month_short_hash={},i=0;i<s.length;i++)t[s[i]]=i;for(var s=gantt.locale.date.month_full,t=gantt.locale.date.month_full_hash={},i=0;i<s.length;i++)t[s[i]]=i},date_part:function(date){return date.setHours(0),date.setMinutes(0),date.setSeconds(0),date.setMilliseconds(0),date.getHours()&&date.setTime(date.getTime()+36e5*(24-date.getHours())),date},time_part:function(date){return(date.valueOf()/1e3-60*date.getTimezoneOffset())%86400},week_start:function(date){var shift=date.getDay();return gantt.config.start_on_monday&&(0===shift?shift=6:shift--),this.date_part(this.add(date,-1*shift,"day"))},month_start:function(date){return date.setDate(1),this.date_part(date)},year_start:function(date){return date.setMonth(0),this.month_start(date)},day_start:function(date){return this.date_part(date)},hour_start:function(date){var hour=date.getHours();return this.day_start(date),date.setHours(hour),date},minute_start:function(date){var min=date.getMinutes();return this.hour_start(date),date.setMinutes(min),date},_add_days:function(date,inc){var ndate=new Date(date.valueOf());return ndate.setDate(ndate.getDate()+inc),!date.getHours()&&ndate.getHours()&&ndate.setTime(ndate.getTime()+36e5*(24-ndate.getHours())),ndate},add:function(date,inc,mode){var ndate=new Date(date.valueOf());switch(mode){case"day":ndate=gantt.date._add_days(ndate,inc);break;case"week":ndate=gantt.date._add_days(ndate,7*inc);break;case"month":ndate.setMonth(ndate.getMonth()+inc);break;case"year":ndate.setYear(ndate.getFullYear()+inc);break;case"hour":ndate.setTime(ndate.getTime()+60*inc*60*1e3);break;case"minute":ndate.setTime(ndate.getTime()+60*inc*1e3);break;default:return gantt.date["add_"+mode](date,inc,mode)}return ndate},to_fixed:function(num){return 10>num?"0"+num:num},copy:function(date){return new Date(date.valueOf())},date_to_str:function(format,utc){return format=format.replace(/%[a-zA-Z]/g,function(a){switch(a){case"%d":return'"+gantt.date.to_fixed(date.getDate())+"';case"%m":return'"+gantt.date.to_fixed((date.getMonth()+1))+"';case"%j":return'"+date.getDate()+"';case"%n":return'"+(date.getMonth()+1)+"';case"%y":return'"+gantt.date.to_fixed(date.getFullYear()%100)+"';case"%Y":return'"+date.getFullYear()+"';case"%D":return'"+gantt.locale.date.day_short[date.getDay()]+"';case"%l":return'"+gantt.locale.date.day_full[date.getDay()]+"';case"%M":return'"+gantt.locale.date.month_short[date.getMonth()]+"';case"%F":return'"+gantt.locale.date.month_full[date.getMonth()]+"';case"%h":return'"+gantt.date.to_fixed((date.getHours()+11)%12+1)+"';case"%g":return'"+((date.getHours()+11)%12+1)+"';case"%G":return'"+date.getHours()+"';case"%H":return'"+gantt.date.to_fixed(date.getHours())+"';case"%i":return'"+gantt.date.to_fixed(date.getMinutes())+"';case"%a":return'"+(date.getHours()>11?"pm":"am")+"';case"%A":return'"+(date.getHours()>11?"PM":"AM")+"';case"%s":return'"+gantt.date.to_fixed(date.getSeconds())+"';case"%W":return'"+gantt.date.to_fixed(gantt.date.getISOWeek(date))+"';default:return a}}),utc&&(format=format.replace(/date\.get/g,"date.getUTC")),new Function("date",'return "'+format+'";')},str_to_date:function(format,utc){for(var splt="var temp=date.match(/[a-zA-Z]+|[0-9]+/g);",mask=format.match(/%[a-zA-Z]/g),i=0;i<mask.length;i++)switch(mask[i]){case"%j":case"%d":splt+="set[2]=temp["+i+"]||1;";break;case"%n":case"%m":splt+="set[1]=(temp["+i+"]||1)-1;";break;case"%y":splt+="set[0]=temp["+i+"]*1+(temp["+i+"]>50?1900:2000);";break;case"%g":case"%G":case"%h":case"%H":splt+="set[3]=temp["+i+"]||0;";break;case"%i":splt+="set[4]=temp["+i+"]||0;";break;case"%Y":splt+="set[0]=temp["+i+"]||0;";break;case"%a":case"%A":splt+="set[3]=set[3]%12+((temp["+i+"]||'').toLowerCase()=='am'?0:12);";break;case"%s":splt+="set[5]=temp["+i+"]||0;";break;case"%M":splt+="set[1]=gantt.locale.date.month_short_hash[temp["+i+"]]||0;";break;case"%F":splt+="set[1]=gantt.locale.date.month_full_hash[temp["+i+"]]||0;"}var code="set[0],set[1],set[2],set[3],set[4],set[5]";return utc&&(code=" Date.UTC("+code+")"),new Function("date","var set=[0,0,1,0,0,0]; "+splt+" return new Date("+code+");")},getISOWeek:function(ndate){if(!ndate)return!1;var nday=ndate.getDay();0===nday&&(nday=7);var first_thursday=new Date(ndate.valueOf());first_thursday.setDate(ndate.getDate()+(4-nday));var year_number=first_thursday.getFullYear(),ordinal_date=Math.round((first_thursday.getTime()-new Date(year_number,0,1).getTime())/864e5),week_number=1+Math.floor(ordinal_date/7);return week_number},getUTCISOWeek:function(ndate){return this.getISOWeek(ndate)},convert_to_utc:function(date){return new Date(date.getUTCFullYear(),date.getUTCMonth(),date.getUTCDate(),date.getUTCHours(),date.getUTCMinutes(),date.getUTCSeconds())},parseDate:function(date,format){return"string"==typeof date&&(dhtmlx.defined(format)&&(format="string"==typeof format?dhtmlx.defined(gantt.templates[format])?gantt.templates[format]:gantt.date.str_to_date(format):gantt.templates.xml_date),date=date?format(date):null),date}},gantt.config||(gantt.config={}),gantt.config||(gantt.config={}),gantt.templates||(gantt.templates={}),function(){dhtmlx.mixin(gantt.config,{links:{finish_to_start:"0",start_to_start:"1",finish_to_finish:"2",start_to_finish:"3"},types:{task:"task",project:"project",milestone:"milestone"},duration_unit:"day",work_time:!1,correct_work_time:!1,skip_off_time:!1,autosize:!1,autosize_min_width:0,show_links:!0,show_task_cells:!0,static_background:!1,branch_loading:!1,show_loading:!1,show_chart:!0,show_grid:!0,min_duration:36e5,xml_date:"%d-%m-%Y %H:%i",api_date:"%d-%m-%Y %H:%i",start_on_monday:!0,server_utc:!1,show_progress:!0,fit_tasks:!1,select_task:!0,preserve_scroll:!0,readonly:!1,date_grid:"%Y-%m-%d",drag_links:!0,drag_progress:!0,drag_resize:!0,drag_move:!0,drag_mode:{resize:"resize",progress:"progress",move:"move",ignore:"ignore"},round_dnd_dates:!0,link_wrapper_width:20,root_id:0,autofit:!0,columns:[{name:"text",tree:!0,width:"*",resize:!0},{name:"start_date",align:"center",resize:!0},{name:"duration",align:"center"},{name:"add",width:"44"}],step:1,scale_unit:"day",scale_offset_minimal:!0,subscales:[],time_step:60,duration_step:1,date_scale:"%d %M",task_date:"%d %F %Y",time_picker:"%H:%i",task_attribute:"task_id",link_attribute:"link_id",layer_attribute:"data-layer",buttons_left:["gantt_save_btn","gantt_cancel_btn"],_migrate_buttons:{dhx_save_btn:"gantt_save_btn",dhx_cancel_btn:"gantt_cancel_btn",dhx_delete_btn:"gantt_delete_btn"},buttons_right:["gantt_delete_btn"],lightbox:{sections:[{name:"description",height:70,map_to:"text",type:"textarea",focus:!0},{name:"time",height:72,type:"duration",map_to:"auto"}],project_sections:[{name:"description",height:70,map_to:"text",type:"textarea",focus:!0},{name:"type",type:"typeselect",map_to:"type"},{name:"time",height:72,type:"duration",readonly:!0,map_to:"auto"}],milestone_sections:[{name:"description",height:70,map_to:"text",type:"textarea",focus:!0},{name:"type",type:"typeselect",map_to:"type"},{name:"time",height:72,type:"duration",single_date:!0,map_to:"auto"}]},drag_lightbox:!0,sort:!1,details_on_create:!0,details_on_dblclick:!0,initial_scroll:!0,task_scroll_offset:100,task_height:"full",min_column_width:70,min_grid_column_width:70,grid_resizer_column_attribute:"column_index",grid_resizer_attribute:"grid_resizer",keep_grid_width:!1,grid_resize:!1,readonly_property:"readonly",editable_property:"editable",type_renderers:{},open_tree_initially:!1}),gantt.keys={edit_save:13,edit_cancel:27},gantt._init_template=function(name,initial){var registeredTemplates=this._reg_templates||{};this.config[name]&&registeredTemplates[name]!=this.config[name]&&(initial&&this.templates[name]||(this.templates[name]=this.date.date_to_str(this.config[name]),registeredTemplates[name]=this.config[name])),this._reg_templates=registeredTemplates},gantt._init_templates=function(){var labels=gantt.locale.labels;labels.gantt_save_btn=labels.icon_save,labels.gantt_cancel_btn=labels.icon_cancel,labels.gantt_delete_btn=labels.icon_delete;var d=this.date.date_to_str,c=this.config;gantt._init_template("date_scale",!0),gantt._init_template("date_grid",!0),gantt._init_template("task_date",!0),dhtmlx.mixin(this.templates,{xml_date:this.date.str_to_date(c.xml_date,c.server_utc),xml_format:d(c.xml_date,c.server_utc),api_date:this.date.str_to_date(c.api_date),progress_text:function(){return""},grid_header_class:function(){return""},task_text:function(start,end,task){return task.text},task_class:function(){return""},grid_row_class:function(){return""},task_row_class:function(){return""},task_cell_class:function(){return""},scale_cell_class:function(){return""},scale_row_class:function(){return""},grid_indent:function(){return"<div class='gantt_tree_indent'></div>"},grid_folder:function(item){return"<div class='gantt_tree_icon gantt_folder_"+(item.$open?"open":"closed")+"'></div>"},grid_file:function(){return"<div class='gantt_tree_icon gantt_file'></div>"},grid_open:function(item){return"<div class='gantt_tree_icon gantt_"+(item.$open?"close":"open")+"'></div>"},grid_blank:function(){return"<div class='gantt_tree_icon gantt_blank'></div>"},task_time:function(start,end){return gantt.templates.task_date(start)+" - "+gantt.templates.task_date(end)},time_picker:d(c.time_picker),link_class:function(){return""},link_description:function(link){var from=gantt.getTask(link.source),to=gantt.getTask(link.target);return"<b>"+from.text+"</b> &ndash;  <b>"+to.text+"</b>"},drag_link:function(from,from_start,to,to_start){from=gantt.getTask(from);var labels=gantt.locale.labels,text="<b>"+from.text+"</b> "+(from_start?labels.link_start:labels.link_end)+"<br/>";return to&&(to=gantt.getTask(to),text+="<b> "+to.text+"</b> "+(to_start?labels.link_start:labels.link_end)+"<br/>"),text},drag_link_class:function(from,from_start,to,to_start){var add="";if(from&&to){var allowed=gantt.isLinkAllowed(from,to,from_start,to_start);add=" "+(allowed?"gantt_link_allow":"gantt_link_deny")}return"gantt_link_tooltip"+add}}),this.callEvent("onTemplatesReady",[])}}(),window.jQuery&&!function($){var methods=[];$.fn.dhx_gantt=function(config){if(config=config||{},"string"!=typeof config){var views=[];return this.each(function(){if(this&&this.getAttribute&&!this.getAttribute("dhxgantt")){for(var key in config)"data"!=key&&(gantt.config[key]=config[key]);gantt.init(this),config.data&&gantt.parse(config.data),views.push(gantt)}}),1===views.length?views[0]:views}return methods[config]?methods[config].apply(this,[]):void $.error("Method "+config+" does not exist on jQuery.dhx_gantt")}}(jQuery),window.dhtmlx&&(dhtmlx.attaches||(dhtmlx.attaches={}),dhtmlx.attaches.attachGantt=function(start,end){var obj=document.createElement("DIV");obj.id="gantt_"+dhtmlx.uid(),obj.style.width="100%",obj.style.height="100%",obj.cmp="grid",document.body.appendChild(obj),this.attachObject(obj.id);var that=this.vs[this.av];that.grid=gantt,gantt.init(obj.id,start,end),obj.firstChild.style.border="none",that.gridId=obj.id,that.gridObj=obj;var method_name="_viewRestore";return this.vs[this[method_name]()].grid}),gantt.locale={date:{month_full:["January","February","March","April","May","June","July","August","September","October","November","December"],month_short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],day_full:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],day_short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},labels:{new_task:"New task",icon_save:"Save",icon_cancel:"Cancel",icon_details:"Details",icon_edit:"Edit",icon_delete:"Delete",confirm_closing:"",confirm_deleting:"Task will be deleted permanently, are you sure?",section_description:"Description",section_time:"Time period",section_type:"Type",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years"}},gantt.skins.skyblue={config:{grid_width:350,row_height:27,scale_height:27,task_height:24,link_line_width:1,link_arrow_size:8,lightbox_additional_height:75},_second_column_width:95,_third_column_width:80},gantt.skins.meadow={config:{grid_width:350,row_height:27,scale_height:30,task_height:24,link_line_width:2,link_arrow_size:6,lightbox_additional_height:72},_second_column_width:95,_third_column_width:80},gantt.skins.terrace={config:{grid_width:360,row_height:35,scale_height:35,task_height:24,link_line_width:2,link_arrow_size:6,lightbox_additional_height:75},_second_column_width:90,_third_column_width:70},gantt.skins.broadway={config:{grid_width:360,row_height:35,scale_height:35,task_height:24,link_line_width:1,link_arrow_size:7,lightbox_additional_height:86},_second_column_width:90,_third_column_width:80,_lightbox_template:"<div class='gantt_cal_ltitle'><span class='gantt_mark'>&nbsp;</span><span class='gantt_time'></span><span class='gantt_title'></span><div class='gantt_cancel_btn'></div></div><div class='gantt_cal_larea'></div>",_config_buttons_left:{},_config_buttons_right:{gantt_delete_btn:"icon_delete",gantt_save_btn:"icon_save"}},gantt.config.touch_drag=500,gantt.config.touch=!0,gantt.config.touch_feedback=!0,gantt._touch_feedback=function(){gantt.config.touch_feedback&&navigator.vibrate&&navigator.vibrate(1)},gantt._init_touch_events=function(){"force"!=this.config.touch&&(this.config.touch=this.config.touch&&(-1!=navigator.userAgent.indexOf("Mobile")||-1!=navigator.userAgent.indexOf("iPad")||-1!=navigator.userAgent.indexOf("Android")||-1!=navigator.userAgent.indexOf("Touch"))),this.config.touch&&(window.navigator.msPointerEnabled?this._touch_events(["MSPointerMove","MSPointerDown","MSPointerUp"],function(ev){return ev.pointerType==ev.MSPOINTER_TYPE_MOUSE?null:ev},function(ev){return!ev||ev.pointerType==ev.MSPOINTER_TYPE_MOUSE}):this._touch_events(["touchmove","touchstart","touchend"],function(ev){return ev.touches&&ev.touches.length>1?null:ev.touches[0]?{target:ev.target,pageX:ev.touches[0].pageX,pageY:ev.touches[0].pageY,clientX:ev.touches[0].clientX,clientY:ev.touches[0].clientY}:ev},function(){return!1}))},gantt._touch_events=function(names,accessor,ignore){function block_action(e){return e&&e.preventDefault&&e.preventDefault(),(e||event).cancelBubble=!0,!1}function cloneTaskRendered(taskId){var renders=gantt._task_area_pulls,task=gantt.getTask(taskId);if(task&&gantt.isTaskVisible(taskId))for(var i in renders)if(task=renders[i][taskId],task&&task.getAttribute("task_id")&&task.getAttribute("task_id")==taskId){var copy=task.cloneNode(!0);return current_target=task,renders[i][taskId]=copy,task.style.display="none",copy.className+=" gantt_drag_move ",task.parentNode.appendChild(copy),copy}}var scroll_state,dblclicktime=0,action_mode=!1,scroll_mode=!1,action_start=null,long_tap_timer=null,current_target=null;dhtmlxEvent(gantt.$container,names[0],function(e){if(!ignore(e)&&action_mode){long_tap_timer&&clearTimeout(long_tap_timer);var source=accessor(e);if(gantt._tasks_dnd.drag.id||gantt._tasks_dnd.drag.start_drag)return gantt._tasks_dnd.on_mouse_move(source),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,!1;if(source&&action_start){var dx=action_start.pageX-source.pageX,dy=action_start.pageY-source.pageY;!scroll_mode&&(Math.abs(dx)>5||Math.abs(dy)>5)&&(gantt._touch_scroll_active=scroll_mode=!0,dblclicktime=0,scroll_state=gantt.getScrollState()),scroll_mode&&gantt.scrollTo(scroll_state.x+dx,scroll_state.y+dy)}return block_action(e)}}),dhtmlxEvent(this.$container,"contextmenu",function(e){return action_mode?block_action(e):void 0}),dhtmlxEvent(this.$container,names[1],function(e){if(!ignore(e)){if(e.touches&&e.touches.length>1)return void(action_mode=!1);if(action_mode=!0,action_start=accessor(e),action_start&&dblclicktime){var now=new Date;500>now-dblclicktime?(gantt._on_dblclick(action_start),block_action(e)):dblclicktime=now}else dblclicktime=new Date;long_tap_timer=setTimeout(function(){var taskId=gantt.locate(action_start);taskId&&-1==action_start.target.className.indexOf("gantt_link_point")&&(gantt._tasks_dnd.on_mouse_down(action_start),gantt._tasks_dnd._start_dnd(action_start),gantt._touch_drag=!0,cloneTaskRendered(taskId),gantt.refreshTask(taskId),gantt._touch_feedback()),long_tap_timer=null},gantt.config.touch_drag)}}),dhtmlxEvent(this.$container,names[2],function(e){if(!ignore(e)){long_tap_timer&&clearTimeout(long_tap_timer),gantt._touch_drag=!1,action_mode=!1;var source=accessor(e);gantt._tasks_dnd.on_mouse_up(source),current_target&&(gantt.refreshTask(gantt.locate(current_target)),current_target.parentNode&&current_target.parentNode.removeChild(current_target),gantt._touch_feedback()),gantt._touch_scroll_active=action_mode=scroll_mode=!1,current_target=null}})}}),define("dhtmlxgantt_tooltip",[],function(){gantt._tooltip={},gantt._tooltip_class="gantt_tooltip",gantt.config.tooltip_timeout=30,gantt.config.tooltip_offset_y=20,gantt.config.tooltip_offset_x=10,gantt._create_tooltip=function(){return this._tooltip_html||(this._tooltip_html=document.createElement("div"),this._tooltip_html.className=gantt._tooltip_class),this._tooltip_html},gantt._is_cursor_under_tooltip=function(t,e){return t.x>=e.pos.x&&t.x<=e.pos.x+e.width?!0:t.y>=e.pos.y&&t.y<=e.pos.y+e.height?!0:!1},gantt._show_tooltip=function(t,e){if(!gantt.config.touch||gantt.config.touch_tooltip){var n=this._create_tooltip();n.innerHTML=t,gantt.$task_data.appendChild(n);var i=n.offsetWidth+20,a=n.offsetHeight+40,s=this.$task.offsetHeight,r=this.$task.offsetWidth,o=this.getScrollState();e.y+=o.y;var d={x:e.x,y:e.y};e.x+=1*gantt.config.tooltip_offset_x||0,e.y+=1*gantt.config.tooltip_offset_y||0,e.y=Math.min(Math.max(o.y,e.y),o.y+s-a),e.x=Math.min(Math.max(o.x,e.x),o.x+r-i),gantt._is_cursor_under_tooltip(d,{pos:e,width:i,height:a})&&(d.x+i>r+o.x&&(e.x=d.x-(i-20)-(1*gantt.config.tooltip_offset_x||0)),d.y+a>s+o.y&&(e.y=d.y-(a-40)-(1*gantt.config.tooltip_offset_y||0))),n.style.left=e.x+"px",n.style.top=e.y+"px"}},gantt._hide_tooltip=function(){this._tooltip_html&&this._tooltip_html.parentNode&&this._tooltip_html.parentNode.removeChild(this._tooltip_html),this._tooltip_id=0},gantt._is_tooltip=function(t){var e=t.target||t.srcElement;return gantt._is_node_child(e,function(t){return t.className==this._tooltip_class})},gantt._is_task_line=function(t){var e=t.target||t.srcElement;return gantt._is_node_child(e,function(t){return t==this.$task_data})},gantt._is_node_child=function(t,e){for(var n=!1;t&&!n;)n=e.call(gantt,t),t=t.parentNode;return n},gantt._tooltip_pos=function(t){if(t.pageX||t.pageY)var e={x:t.pageX,y:t.pageY};var n=_isIE?document.documentElement:document.body,e={x:t.clientX+n.scrollLeft-n.clientLeft,y:t.clientY+n.scrollTop-n.clientTop},i=gantt._get_position(gantt.$task_data);return e.x=e.x-i.x,e.y=e.y-i.y,e},gantt.attachEvent("onMouseMove",function(t,e){if(this.config.tooltip_timeout){document.createEventObject&&!document.createEvent&&(e=document.createEventObject(e));var n=this.config.tooltip_timeout;this._tooltip_id&&!t&&(isNaN(this.config.tooltip_hide_timeout)||(n=this.config.tooltip_hide_timeout)),clearTimeout(gantt._tooltip_ev_timer),gantt._tooltip_ev_timer=setTimeout(function(){gantt._init_tooltip(t,e)},n)}else gantt._init_tooltip(t,e)}),gantt._init_tooltip=function(t,e){if(!this._is_tooltip(e)&&(t!=this._tooltip_id||this._is_task_line(e))){if(!t)return this._hide_tooltip();this._tooltip_id=t;var n=this.getTask(t),i=this.templates.tooltip_text(n.start_date,n.end_date,n);i||this._hide_tooltip(),this._show_tooltip(i,this._tooltip_pos(e))}},gantt.attachEvent("onMouseLeave",function(t){gantt._is_tooltip(t)||this._hide_tooltip()}),gantt.templates.tooltip_date_format=gantt.date.date_to_str("%Y-%m-%d"),gantt.templates.tooltip_text=function(t,e,n){return"<b>Task:</b> "+n.text+"<br/><b>Start date:</b> "+gantt.templates.tooltip_date_format(t)+"<br/><b>End date:</b> "+gantt.templates.tooltip_date_format(e)}}),define("dhtmlxgantt_marker",[],function(){gantt._markers||(gantt._markers={}),gantt.config.show_markers=!0,gantt.attachEvent("onClear",function(){gantt._markers={}}),gantt.attachEvent("onGanttReady",function(){function t(t){if(!gantt.config.show_markers)return!1;if(!t.start_date)return!1;var r=document.createElement("div");r.setAttribute("marker_id",t.id);var e="gantt_marker";gantt.templates.marker_class&&(e+=" "+gantt.templates.marker_class(t)),t.css&&(e+=" "+t.css),t.title&&(r.title=t.title),r.className=e;var a=gantt.posFromDate(t.start_date);if(r.style.left=a+"px",r.style.height=Math.max(gantt._y_from_ind(gantt._order.length),0)+"px",t.end_date){var n=gantt.posFromDate(t.end_date);r.style.width=Math.max(n-a,0)+"px"}return t.text&&(r.innerHTML="<div class='gantt_marker_content' >"+t.text+"</div>"),r}var r=document.createElement("div");r.className="gantt_marker_area",gantt.$task_data.appendChild(r),gantt.$marker_area=r,gantt._markerRenderer=gantt._task_renderer("markers",t,gantt.$marker_area,null)}),gantt.attachEvent("onDataRender",function(){gantt.renderMarkers()}),gantt.getMarker=function(t){return this._markers?this._markers[t]:null},gantt.addMarker=function(t){return t.id=t.id||dhtmlx.uid(),this._markers[t.id]=t,t.id},gantt.deleteMarker=function(t){return this._markers&&this._markers[t]?(delete this._markers[t],!0):!1},gantt.updateMarker=function(t){this._markerRenderer&&this._markerRenderer.render_item(t)},gantt.renderMarkers=function(){if(!this._markers)return!1;if(!this._markerRenderer)return!1;var t=[];for(var r in this._markers)t.push(this._markers[r]);return this._markerRenderer.render_items(t),!0}}),requirejs.s.contexts._.nextTick=function(f){f()},require(["css"],function(css){css.addBuffer("dhtmlxgantt/css.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,requirejs.s.contexts._.nextTick=function(f){f()},require(["css"],function(css){css.addBuffer("core/directives/gantt/gantt.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,define("core/directives/gantt/ganttView",["../../moduleDef","jquery","angular","text!./ganttView.tpl.html","dhtmlxgantt","dhtmlxgantt_tooltip","dhtmlxgantt_marker","css!dhtmlxgantt/css","css!./gantt.css"],function(module,$,angular,tpl){function templateHelper($element){var template=$element[0].innerHTML;return template.replace(/[\r\n]/g,"").replace(/"/g,'\\"').replace(/\{\{task\.([^\}]+)\}\}/g,function(match,prop){if(-1!=prop.indexOf("|")){var parts=prop.split("|"),filterParts=parts[1].split(":"),filter="\"+gantt.aFilter('"+filterParts[0].trim()+"')",filterParams="(task."+parts[0].trim()+(filterParts.length>1?","+filterParts.slice(1).join(","):"")+')+"';return filter+filterParams}return'"+task.'+prop+'+"'})}var ctrl=function($scope,$rootScope,$stateParams,apinetService,stateCacheService,$exceptionHandler,$window,$filter,$injector,$compile,statuses){$scope.i18n=$rootScope.i18n;var gantt=$window.gantt;this.gantt=gantt,gantt.aFilter=$filter;var ganttCfg=gantt.config;ganttCfg.details_on_dblclick=!1,ganttCfg.autosize="y",ganttCfg.grid_width=300,ganttCfg.duration_unit="hour",ganttCfg.duration_step=1,ganttCfg.round_dnd_dates=!1,ganttCfg.time_step=1,ganttCfg.scale_unit="day",ganttCfg.date_scale="%d",ganttCfg.subscales=[{unit:"month",step:1,date:"%F %Y"}],ganttCfg.fit_tasks=!0,ganttCfg.initial_scroll=!1,gantt.templates.grid_folder=function(){return"<div class='gantt_tree_icon' style='width: 0'></div>"},gantt.templates.grid_file=function(){return"<div class='gantt_tree_icon' style='width: 0'></div>"},$scope.gantt=gantt;var evtBeforeLinkAdd=gantt.attachEvent("onBeforeLinkAdd",function(id,link){return 0==link.type||1==link.type}),evtBeforeTaskDrag=gantt.attachEvent("onBeforeTaskDrag",function(id,mode){var modes=ganttCfg.drag_mode,task=gantt.getTask(id);switch(mode){case modes.move:case modes.resize:return task.Status.id!==statuses.Closed;case modes.progress:return task.Status.id===statuses.InProgress}return!1}),evtAfterTaskDrag=gantt.attachEvent("onAfterTaskDrag",function(id,mode){var modes=ganttCfg.drag_mode;switch(mode){case modes.move:case modes.resize:var task=gantt.getTask(id),data={taskId:task.id,start:task.start_date,finish:task.end_date};$scope.update({task:data});break;case modes.progress:var task=gantt.getTask(id),data={taskId:task.id,percent:Math.round(100*task.progress)};$scope.percent({task:data})}}),evtAfterLinkAdd=gantt.attachEvent("onAfterLinkAdd",function(id,link){var linkType=0==link.type?"EndToStart":1==link.type?"StartToStart":null,data={fromTaskId:link.source,toTaskId:link.target,linkType:linkType};$scope.link({link:data})}),evtAfterLinkDelete=gantt.attachEvent("onAfterLinkDelete",function(id,link){var data={taskId:link.target,linkId:link.id};$scope.unlink({link:data})}),evtTaskSelected=gantt.attachEvent("onTaskSelected",function(id){$scope.select({id:id})}),doLayout=function(){$scope.gantt.setSizes()},offOpen=$rootScope.$on("sidebar:opened",doLayout),offClose=$rootScope.$on("sidebar:closed",doLayout);$scope.$on("$destroy",function(){$scope.gantt.detachEvent(evtTaskSelected),$scope.gantt.detachEvent(evtAfterLinkAdd),$scope.gantt.detachEvent(evtAfterLinkDelete),$scope.gantt.detachEvent(evtBeforeLinkAdd),$scope.gantt.detachEvent(evtBeforeTaskDrag),$scope.gantt.detachEvent(evtAfterTaskDrag),offOpen(),offClose()})};module.directive("agoGanttView",["$compile","$filter","$window",function($compile,$filter,$window){return{restrict:"E",replace:!0,template:tpl,scope:{data:"=",convertor:"&",update:"&",percent:"&",link:"&",unlink:"&",select:"&"},transclude:!0,controller:["$scope","$rootScope","$stateParams","apinetService","stateCacheService","$exceptionHandler","$window","$filter","$injector","$compile","taskStatuses",ctrl],link:function($scope,$elm){var $elm0=$elm[0],doLayout=function(){$scope.gantt.setSizes()};$scope.$watch(function(){return $elm0.offsetWidth+"."+$elm0.offsetHeight},doLayout),$scope.$on("viewModeChanged",$scope.doLayout),$scope.gantt.init($elm0);var loadData=function(){if($scope.data){var selectedTaskId=$scope.gantt.getSelectedId(),scrollPosition=$scope.gantt.getScrollState(),windowYScrollPosition=$($window).scrollTop();$scope.gantt.clearAll(),$scope.select({id:null}),$scope.gantt.parse($scope.convertor({data:$scope.data}),"json");{var now=new Date;gantt.addMarker({start_date:now,css:"today",text:$scope.i18n.msg("core.labels.now"),title:$filter("date")(now,"ago_date")})}$scope.gantt.setSizes(),$scope.gantt.renderMarkers(),selectedTaskId&&$scope.gantt.selectTask(selectedTaskId),$scope.gantt.scrollTo(scrollPosition.x,scrollPosition.y),$($window).scrollTop(windowYScrollPosition)}};$scope.$watchCollection("data",loadData)}}}]),module.directive("agoGanttTemplate",[function(){return{restrict:"AE",require:"^agoGanttView",terminal:!0,link:function($scope,$element,$attrs,$controller){var template=Function("sd","ed","task",'return "'+templateHelper($element)+'"');$controller.gantt.templates[$attrs.agoGanttTemplate]=template}}}]),module.directive("agoGanttColumn",[function(){return{restrict:"AE",require:"^agoGanttView",terminal:!0,link:function($scope,$element,$attrs,$controller){var gantt=$controller.gantt,module=$attrs.module||"core",label=$attrs.label?$scope.$eval($attrs.label):" ",width=$attrs.width||"*",align=$attrs.align||"left",template=Function("task",'return "'+templateHelper($element)+'"'),config={template:template,label:label,width:width,align:align,module:module};gantt.config.columnsSet&&gantt.config.columns?gantt.config.columns.length>0&&gantt.config.columns[0].module!==module&&(gantt.config.columnsSet=gantt.config.columns=[]):gantt.config.columnsSet=gantt.config.columns=[],gantt.config.columns.length||(config.tree=!0),gantt.config.columns.push(config)
}}}])}),define("text!core/directives/gantt/ganttListToggle.tpl.html",[],function(){return'<div class="btn-group" data-toggle="buttons" bindonce="i18n.core.viewMode">\r\n    <label type="button" class="btn btn-primary" ng-class="{\'active\': viewMode == \'list\'}"\r\n           ng-click="toggleViewMode(\'list\')">\r\n        <input type="radio" name="viewMode" id="vmList" autocomplete="off">\r\n        <i class="icon-list"></i>\r\n        <span class="inline-block hidden-xs" bo-text="i18n.core.viewMode.list"></span>\r\n    </label>\r\n    <label type="button" class="btn btn-primary" ng-class="{\'active\': viewMode == \'gantt\'}"\r\n           ng-click="toggleViewMode(\'gantt\')">\r\n        <input type="radio" name="viewMode" id="vmGantt" autocomplete="off">\r\n        <i class="icon-bar-chart"></i>\r\n        <span class="inline-block hidden-xs" bo-text="i18n.core.viewMode.gantt"></span>\r\n    </label>\r\n</div>'}),define("core/directives/gantt/ganttListToggle",["../../moduleDef","angular","text!./ganttListToggle.tpl.html"],function(module,angular,tpl){module.directive("agoGanttListToggle",function(){return{restrict:"E",replace:!0,template:tpl,controller:["$scope","$rootScope",function($scope,$rootScope){$scope.i18n=$rootScope.i18n,$scope.toggleViewMode=function(mode){mode&&$scope.viewMode!==mode&&($scope.viewMode=mode,$scope.$emit("viewModeChanged"))}}],scope:{viewMode:"="}}})}),define("text!core/directives/lookup-items/lookupItems.tpl.html",[],function(){return'<ul class="lookup-items">\r\n    <li ng-class="{\'badge\': !!badge}" ng-repeat="i in items">{{ i.text }}</li>\r\n</ul>\r\n'}),requirejs.s.contexts._.nextTick=function(f){f()},require(["css"],function(css){css.addBuffer("core/directives/lookup-items/lookupItems.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,define("core/directives/lookup-items/lookupItems",["../../moduleDef","angular","text!./lookupItems.tpl.html","css!./lookupItems.css"],function(module,angular,tpl){module.directive("agoLookupItems",function(){return{restrict:"E",replace:!0,template:tpl,scope:{items:"=",badge:"@"}}})}),define("text!core/directives/calendar/calendarListToggle.tpl.html",[],function(){return'<div class="btn-group" data-toggle="buttons" bindonce="i18n.core.viewMode">\r\n    <label type="button" class="btn btn-primary" ng-class="{\'active\': viewMode == \'calendar\'}"\r\n           ng-click="toggleViewMode(\'calendar\')">\r\n        <input type="radio" name="viewMode" id="vmCalendar" autocomplete="off">\r\n        <i class="icon-calendar"></i>\r\n        <span class="inline-block hidden-xs" bo-text="i18n.core.viewMode.calendar"></span>\r\n    </label>\r\n    <label type="button" class="btn btn-primary" ng-class="{\'active\': viewMode == \'list\'}"\r\n           ng-click="toggleViewMode(\'list\')">\r\n        <input type="radio" name="viewMode" id="vmList" autocomplete="off">\r\n        <i class="icon-list"></i>\r\n        <span class="inline-block hidden-xs" bo-text="i18n.core.viewMode.list"></span>\r\n    </label>\r\n</div>\r\n'}),define("core/directives/calendar/calendarListToggle",["../../moduleDef","angular","text!./calendarListToggle.tpl.html"],function(module,angular,tpl){module.directive("agoCalendarListToggle",function(){return{restrict:"E",replace:!0,template:tpl,controller:["$scope","$rootScope",function($scope,$rootScope){$scope.i18n=$rootScope.i18n,$scope.toggleViewMode=function(mode){mode&&$scope.viewMode!==mode&&($scope.viewMode=mode,$scope.$emit("viewModeChanged"))}}],scope:{viewMode:"="}}})}),define("text!core/directives/calendar/calendarViewToggle.tpl.html",[],function(){return'<div class="btn-group" bindonce="i18n.core.calendar">\r\n    <a href="" class="btn dropdown-toggle" data-toggle="dropdown" bo-title="i18n.core.calendar.buttons.mode">\r\n        {{ currentView | i18n }}\r\n    </a>\r\n    <ul class="dropdown-menu" role="menu">\r\n        <li>\r\n            <a href="" ng-click="changeView(\'month\')" bo-text="i18n.core.calendar.buttons.month"></a>\r\n        </li>\r\n        <li>\r\n            <a href="" ng-click="changeView(\'basicWeek\')" bo-text="i18n.core.calendar.buttons.basicWeek"></a>\r\n        </li>\r\n        <li>\r\n            <a href="" ng-click="changeView(\'basicDay\')" bo-text="i18n.core.calendar.buttons.basicDay"></a>\r\n        </li>\r\n        <li>\r\n            <a href="" ng-click="changeView(\'agendaWeek\')" bo-text="i18n.core.calendar.buttons.agendaWeek"></a>\r\n        </li>\r\n        <li>\r\n            <a href="" ng-click="changeView(\'agendaDay\')" bo-text="i18n.core.calendar.buttons.agendaDay"></a>\r\n        </li>\r\n    </ul>\r\n</div>\r\n'}),define("core/directives/calendar/calendarViewToggle",["../../moduleDef","angular","text!./calendarViewToggle.tpl.html"],function(module,angular,tpl){module.directive("agoCalendarViewToggle",function(){return{restrict:"E",replace:!0,template:tpl,controller:["$scope","$rootScope",function($scope,$rootScope){$scope.i18n=$rootScope.i18n;var setView=function(mode){$scope.currentView="core.calendar.buttons."+mode};$scope.changeView=function(mode){$rootScope.$emit("agoCalendar:changeMode",{calendar:$scope.calendar,mode:mode})};var off=$rootScope.$on("agoCalendar:modeChanged",function(e,arg){setView(arg.mode)});$scope.$on("$destroy",function(){off()})}],scope:{},link:function($scope,elm,attr){$scope.calendar=attr.calendar}}})}),define("core/directives",["./directives/ago.errorMsg","./directives/ago.select2","./directives/agoBox","./directives/buttons","./directives/buttonToggle","./directives/checker","./directives/integer","./directives/lookup","./directives/requiredMultiple","./directives/counter","./directives/ago.tags","./directives/datepicker/datepicker","./directives/datepicker/timepicker","./directives/datepicker/datetimepicker","./directives/ago.tabs","./directives/spinner","./directives/refresher","./directives/ago.navToggler","./directives/ago.sidebar","./directives/nextpage","./directives/ago.timeMoment","./directives/detailsBtn","./directives/ago.viewMode","./directives/expiration","./directives/ago.timespan","./directives/files/ago.uploader","./directives/files/ago.fileLink","./directives/files/ago.filesView","./directives/filters/filteredList","./directives/filters/filteredListActions","./directives/filters/filterNode","./directives/filters/filterPersister","./directives/filters/filtersBox","./directives/filters/structuredFilter","./directives/filters/userFilter","./directives/filters/structuredSorters","./directives/filters/filterLoader","./directives/inplace/inlineButtons","./directives/inplace/inlineDate","./directives/inplace/inlineTime","./directives/inplace/inlineDatetime","./directives/inplace/inlineEdit","./directives/inplace/inlineLookup","./directives/inplace/inlineText","./directives/inplace/inlineTextArea","./directives/inplace/inlineSelect","./directives/inplace/inlineCheckbox","./directives/inplace/inlineNumber","./directives/inplace/inlineEmail","./directives/inplace/inlineTimespan","./directives/header/breadCrumbs","./directives/header/eventNotifier","./directives/header/reportNotifier","./directives/header/ago.backBtn","./directives/header/maintenanceNotifier","./directives/reporting/ago.reportSelector","./directives/reporting/ago.reportIcon","./directives/reporting/ago.reportLink","./directives/layout/ago.form-static-item","./directives/layout/ago.form-item","./directives/layout/ago.new-form-item","./directives/layout/ago.new-form-static-item","./directives/layout/ago.details-item","./directives/custom-props/customPropertyEditor","./directives/custom-props/customPropertiesView","./directives/custom-props/customPropTypeHeader","./directives/custom-props/customPropTypeColumn","./directives/custom-props/customPropTypeAddForm","./directives/custom-props/customPropsList","./directives/hdict/ago.hdictView","./directives/hdict/ago.hdictFullnameHeader","./directives/hdict/ago.hdictFullnameColumn","./directives/hdict/ago.hdictDefaultAddForm","./directives/hdict/hdictBaseController","./directives/hdict/hdictFullnameController","./directives/project/projectOUs","./directives/project/members","./directives/project/memberCurrentSelector","./directives/project/memberCurrentEditor","./directives/project/memberPermissions","./directives/project/projectInfo","./directives/project/projectInvitations","./directives/status/statusBtn","./directives/status/statusHistoryView","./directives/comments/commentsView","./directives/ago.watchBtn","./directives/gantt/ganttView","./directives/gantt/ganttListToggle","./directives/lookup-items/lookupItems","./directives/calendar/calendarListToggle","./directives/calendar/calendarViewToggle"],function(){}),define("core/states/commonMixins",["../moduleDef","angular"],function(module,angular){module.controller("ErrorHandlingCtrl",["$scope",function($scope){$scope.resetValidation=$scope.resetValidation||function(){$scope.validation={}},$scope.handleException=$scope.handleException||function(error){$scope.resetValidation(),$scope.validation.generalErrors=[error]}}]).controller("TabbedViewCtrl",["$scope","num","tabs",function($scope,num,tabs){$scope.num=num,$scope.tabs=tabs(num)}]).controller("ReportableListCtrl",["$scope","project","reportTypes","$controller",function($scope,project,reportTypes,$controller){angular.extend(this,$controller("ErrorHandlingCtrl",{$scope:$scope})),$scope.REPORT_TYPES=reportTypes,$scope.reportProject=project;var origFillReportParameters=$scope.fillReportParameters;$scope.fillReportParameters=function(settings,p){p.parameters={project:project,filter:$scope.filter,sorters:$scope.sortersArray,userId:$scope.currentUser.Id},angular.isFunction(origFillReportParameters)&&origFillReportParameters(settings,p)},$scope.onReportError=$scope.onReportError||function(error){$scope.handleException(error)}}]).controller("InlineEditCtrl",["$scope","project","method","afterUpdate","apinetService","$controller",function($scope,project,method,afterUpdate,apinetService,$controller){angular.extend(this,$controller("ErrorHandlingCtrl",{$scope:$scope}));var make=function(model,prop,value,valueProp){valueProp=valueProp||"id";var val=angular.isArray(value)?value.map(function(item){return item[valueProp]}):angular.isObject(value)&&!angular.isDate(value)?value[valueProp]:value;return{Id:model.Id,ModelVersion:model.ModelVersion,Prop:prop,Value:val}};afterUpdate=afterUpdate||angular.noop,$scope.onUpdateProp=function(model,prop,val){return apinetService.action({method:method,project:project,data:make(model,prop,val)}).then(function(response){return $scope.resetValidation(),angular.extend(model.validation||$scope.validation,response.validation),angular.extend(model,response.model),afterUpdate(model,prop),response.validation.success},$scope.handleException)},$scope.onCancelProp=function(){$scope.resetValidation()}}]).controller("BaseCardCtrl",["$scope","project","params","afterLoad","deleteParams","afterDeleteRoute","$state","apinetService","dialogService","i18n","$controller",function($scope,project,params,afterLoad,deleteParams,afterDeleteRoute,$state,apinetService,dialogService,i18n,$controller){angular.extend(this,$controller("ErrorHandlingCtrl",{$scope:$scope})),afterLoad=afterLoad||angular.noop,$scope.loading=!1,$scope.load=function(){$scope.loading=!0;var p=params(),promise=apinetService.action(p);promise.then(function(response){$scope.model=response,afterLoad(response)},$scope.handleException),promise["finally"](function(){$scope.loading=!1})},$scope.delete=function(){dialogService.confirm(i18n.msg("core.confirm.delete.title"),i18n.msg("core.confirm.delete.record")).then(function(){var p=deleteParams();apinetService.action(p).then(function(){$state.go(afterDeleteRoute,{project:project})},$scope.handleException)})}}]).controller("BaseCardsListCtrl",["$scope","project","detailsUrl","apinetService","$controller",function($scope,project,detailsUrl,apinetService,$controller){angular.extend(this,$controller("ErrorHandlingCtrl",{$scope:$scope})),$scope.toggleDetails=$scope.toggleDetails||function(item,url){item.details||angular.extend(item,{details:{loaded:!1,expanded:!1}}),item.details.expanded=!item.details.expanded,item.details.expanded&&item.details.loaded!==!0&&apinetService.action({method:url||detailsUrl,project:project,id:item.Id}).then(function(response){angular.extend(item.details,response),item.details.loaded=!0},$scope.handleException)}}]).controller("PrefilteredListCtrl",["$scope","defaultFilter",function($scope,defaultFilter){$scope.isFirstRequest=!0,$scope.$on("resetFilter",function(){$scope.filterApplied=$scope.isFirstRequest,$scope.filter=defaultFilter($scope.isFirstRequest),$scope.isFirstRequest=!1});var origCacheState=$scope.onCacheState;$scope.onCacheState=function(state){angular.extend(state,{isFirstRequest:$scope.isFirstRequest,requestParams:$scope.requestParams}),angular.isFunction(origCacheState)&&origCacheState(state)}}]).controller("ProjectImageUrlCtrl",["$scope","apinetService",function($scope,apinetService){$scope.projectImageUrl=$scope.projectImageUrl||function(model){return model.ImageId?(url=apinetService.apiUrl("core/projects/getProjectImage",model.ProjectCode),url+=url.indexOf("?")>=0?"&":"?",url+"project="+model.ProjectCode+"&imageId="+model.ImageId):void 0},$scope.projectThumbnailImageUrl=$scope.projectThumbnailImageUrl||function(model){var url=$scope.projectImageUrl(model);return url&&(url+="&thumbnail=true"),url}}])}),define("text!core/states/page.tpl.html",[],function(){return'<div bindonce="i18n.core">\r\n	<header>\r\n		<nav class="navbar navbar-default navbar-fixed-top">\r\n			<a class="navbar-brand" ui-sref="page.projects.projectsList" bo-text="i18n.core.application.landing"></a>\r\n\r\n			<a class=\'toggle-nav btn pull-left\' href="" ago-nav-toggler style="outline: none">\r\n				<i class=\'icon-reorder\'></i>\r\n			</a>\r\n\r\n			<ago-back-btn class="toggle-nav pull-left" style="outline: none"></ago-back-btn>\r\n\r\n			<ul bread-crumbs></ul>\r\n\r\n			<ul class="nav">\r\n				<li report-notifier></li>\r\n				<li event-notifier></li>\r\n				<li user-menu></li>\r\n			</ul>\r\n		</nav>\r\n	</header>\r\n\r\n	<div id="wrapper">\r\n		<div id=\'main-nav-bg\'></div>\r\n        <!--ago-sidebar style="overflow-y: auto"-->\r\n		<nav class=\'main-nav-fixed\' id=\'main-nav\'>\r\n			<div class=\'navigation\'>\r\n				<ul class="nav nav-stacked" ui-view="moduleMenu">\r\n				</ul>\r\n			</div>\r\n		</nav>\r\n		<section id="content" ui-view="content"></section>\r\n	</div>\r\n\r\n</div>\r\n'}),define("core/states/page",["../moduleDef","angular","text!./page.tpl.html"],function(module,angular,tpl){module.config(["$stateProvider",function($stateProvider){$stateProvider.state("page",{url:"","abstract":!0,template:tpl,resolve:{i18n:"i18n",apinetService:"apinetService",$timeout:"$timeout",currentUser:["securityAuthorization","$location","splashscreen",function(securityAuthorization,$location,splashscreen){return securityAuthorization.requireAuthenticatedUser().then(function(userInfo){return/\/project\/(\w+)?/g.exec($location.url())||splashscreen.hide(),userInfo})}]},controller:["$rootScope","currentUser",function($rootScope,currentUser){$rootScope.currentUser=currentUser}],onEnter:function($rootScope){$rootScope.breadcrumbs=[]},onExit:function($rootScope){$rootScope.breadcrumbs=[]}})}]).controller("HeaderCtrl",["$scope","security",function($scope,security){$scope.isAuthenticated=security.isAuthenticated}])}),define("text!core/states/userProfile.tpl.html",[],function(){return'<div class="container">\r\n	<div class="row" id="content-wrapper">\r\n		<div class="col-xs-12" style="padding-top: 5px">\r\n            <ago-error-msg></ago-error-msg>\r\n            <ago-box color="orange" large="true">\r\n                <ago-box-title>\r\n                    <i class="icon-user"></i>\r\n                    <span bindonce="i18n.core.profile" bo-text="i18n.core.profile.title"></span>\r\n                </ago-box-title>\r\n                <ago-box-content>\r\n                    <form name="userForm" class="form form-horizontal" novalidate bindonce="i18n.core.profile">\r\n                        <div class="row">\r\n                            <ago-form-item label="i18n.core.profile.fields.firstName" field="FirstName" vld="validation">\r\n                                <inline-text model="currentUser.FirstName" on-update="onUpdateProp(currentUser, \'FirstName\', val)"\r\n                                             on-cancel="onCancelProp()" input-col="col-xs-12" required></inline-text>\r\n                            </ago-form-item>\r\n                            <ago-form-item label="i18n.core.profile.fields.lastName" field="LastName">\r\n                                <inline-text model="currentUser.LastName" on-update="onUpdateProp(currentUser, \'LastName\', val)"\r\n                                             on-cancel="onCancelProp()" input-col="col-xs-12" required></inline-text>\r\n                            </ago-form-item>\r\n                        </div>\r\n\r\n                        <div class="row">\r\n                            <ago-form-item label="i18n.core.profile.fields.email" field="Email" vld="validation">\r\n                                <inline-email model="currentUser.Login" on-update="onUpdateProp(currentUser, \'Email\', val)"\r\n                                              on-cancel="onCancelProp()" input-col="col-xs-12" required></inline-email>\r\n                            </ago-form-item>\r\n                            <ago-form-item label="i18n.core.locale.label" field="PrefferedLang" vld="validation">\r\n                                <inline-select model="currentUser.PrefferedLang"\r\n                                               display-value="i18n.core.locale[currentUser.PrefferedLang || currentLocale]"\r\n                                               options="i18n.core.locale[l] for l in locales"\r\n                                               on-update="onUpdateProp(currentUser, \'PrefferedLang\', val)"\r\n                                               on-cancel="onCancelProp()"\r\n                                               input-class="col-xs-12" input-col="col-xs-12" required></inline-select>\r\n                            </ago-form-item>\r\n                        </div>\r\n\r\n                        <div class="row">\r\n                            <ago-form-item label="i18n.core.profile.fields.tz" field="PrefferedTimeZone" vld="validation">\r\n                                <inline-lookup model="currentUser.PrefferedTimeZone" input-col="col-xs-12"\r\n                                               on-update="onUpdateProp(currentUser, \'PrefferedTimeZone\', val.id)"\r\n                                               on-cancel="onCancelProp()"\r\n                                               required\r\n                                               input-lookup="core/users/lookupTimeZones"\r\n                                               placeholder="{{ i18n.core.profile.selectTimeZone }}">\r\n                                </inline-lookup>\r\n                            </ago-form-item>\r\n                            <ago-form-item label="i18n.core.profile.fields.digestTime" field="DigestTime">\r\n                                <inline-time model="currentUser.DigestTime" required\r\n                                             input-col="col-xs-12"\r\n                                             on-update="onUpdateProp(currentUser, \'DigestTime\', val)"\r\n                                             on-cancel="onCancelProp()">\r\n                                </inline-time>\r\n                            </ago-form-item>\r\n                        </div>\r\n                    </form>\r\n                </ago-box-content>\r\n            </ago-box>\r\n		</div>\r\n	</div>\r\n</div>\r\n'}),define("text!core/states/moduleMenu.tpl.html",[],function(){return'<li ng-class="{\'active\': $state.is(\'page.projects.projectsList\')}" bindonce="i18n.projects">\r\n	<a ui-sref="page.projects.projectsList">\r\n		<i class="icon-table"></i>\r\n		<span bo-text="i18n.projects.list.title"></span>\r\n	</a>\r\n</li>\r\n<li ng-class="{\'active\': $state.is(\'page.projects.calendar\')}" bindonce="i18n.core">\r\n    <a ui-sref="page.projects.calendar">\r\n        <i class="icon-calendar"></i>\r\n        <span bo-text="i18n.core.calendar.title"></span>\r\n    </a>\r\n</li>\r\n<li ng-class="{\'active\': $state.is(\'page.projects.tags\')}" bindonce="i18n.projects">\r\n	<a ui-sref="page.projects.tags">\r\n		<i class="icon-cog"></i>\r\n		<span bo-text="i18n.projects.tags.title"></span>\r\n	</a>\r\n</li>\r\n<li ng-class="{\'active\': $state.is(\'page.projects.reports\')}" bindonce="i18n.core">\r\n	<a ui-sref="page.projects.reports">\r\n		<i class="icon-print"></i>\r\n		<span bo-text="i18n.core.reporting.reports.title"></span>\r\n	</a>\r\n</li>\r\n'}),define("core/states/userProfile",["../moduleDef","angular","text!./userProfile.tpl.html","text!./moduleMenu.tpl.html","./page"],function(module,angular,tpl,menuTpl){var ctrl=function($scope,$rootScope,$window,i18n,apinetService,security,$controller){security.requestCurrentUser().then(function(u){$scope.currentUser=u}),angular.extend(this,$controller("ErrorHandlingCtrl",{$scope:$scope})),angular.extend(this,$controller("InlineEditCtrl",{$scope:$scope,project:null,method:"core/users/updateUserInfo",afterUpdate:function(model){$scope.currentUser=model,security.updateLoggedInInUser($scope.currentUser),$scope.setLocale($scope.currentUser.PrefferedLang)}})),angular.extend($scope,{i18n:$rootScope.i18n,locales:i18n.supportedLocales,currentLocale:i18n.locale,setLocale:function(locale){locale!==$scope.currentLocale&&-1!==$scope.locales.indexOf(locale)&&($scope.currentLocale=i18n.setLocale(locale))}})};module.config(["$stateProvider","securityAuthorizationProvider",function($stateProvider){$stateProvider.state({name:"page.userProfile",url:"/user/profile",onEnter:["$rootScope",function($rootScope){$rootScope.breadcrumbs.push({name:"core.profile.title",url:"page.userProfile"})}],onExit:["$rootScope",function($rootScope){$rootScope.breadcrumbs.splice($rootScope.breadcrumbs.length-1,1)}],views:{moduleMenu:{template:menuTpl},content:{template:tpl,controller:["$scope","$rootScope","$window","i18n","apinetService","security","$controller",ctrl]}}})}])}),define("core/states/project",["../moduleDef","require","angular","text!./moduleMenu.tpl.html","./page"],function(module,require,angular,moduleMenuTpl){module.config(["$stateProvider",function($stateProvider){$stateProvider.state("page.project",{url:"/project/:project",views:{content:{template:"<maintenance-notifier></maintenance-notifier><div ui-view></div>",controller:function($state,$rootScope,reloadInfo){if(!reloadInfo.reload&&"page.project"===$state.current.name){var moduleStartupState="page.project."+$rootScope.module,options=reloadInfo.go?{}:{location:"replace"};$state.go(moduleStartupState,null,options)}}},moduleMenu:{template:moduleMenuTpl}},resolve:{reloadInfo:["$state","$stateParams","$rootScope","$window","$timeout","projectInfoService","splashscreen",function($state,$stateParams,$rootScope,$window,$timeout,projectInfoService,splashscreen){var isModuleLoaded=function(module){return null!==$state.get("page.project."+module)};return projectInfoService.projectInfo($stateParams.project).then(function(response){var m=response.data.Module.toLowerCase(),v=response.data.Version.toLowerCase(),needReload=response.reload||!isModuleLoaded(m),needGo=needReload;return needReload&&response.sameModule&&isModuleLoaded(m)&&(needReload=!1),$rootScope.module=m,$rootScope.moduleVersion=v,$rootScope.currentProjectName=response.data.Name,needReload?(splashscreen.show(),$timeout(function(){$window.location.reload()})):splashscreen.hide(),{reload:needReload,go:needGo}},function(){return $rootScope.breadcrumbsHidden=!1,$state.go("page.projects.projectsList"),splashscreen.hide(),{reload:!1,go:!1}})}]},onEnter:["$state","$rootScope",function($state,$rootScope){$rootScope.breadcrumbsHidden=!0,$rootScope.breadcrumbs.push({name:"projects.list.title",url:"page.projects.projectsList"});var breadcrumb={name:$rootScope.currentProjectName,url:"page.project."+$rootScope.module,projectRoot:!0};$rootScope.breadcrumbs.length>1?$rootScope.breadcrumbs.splice(1,0,breadcrumb):$rootScope.breadcrumbs.push(breadcrumb),$rootScope.breadcrumbsHidden=!1}],onExit:["$rootScope",function($rootScope){var count=1;$rootScope.currentProjectName&&(count=2),$rootScope.breadcrumbs.splice($rootScope.breadcrumbs.length-count,count),delete $rootScope.module,delete $rootScope.moduleVersion,delete $rootScope.currentProjectName}]})}])}),define("core/states/projects",["../moduleDef","angular","text!./moduleMenu.tpl.html","./page"],function(module,angular,moduleMenuTpl){module.config(["$stateProvider",function($stateProvider){$stateProvider.state("page.projects",{"abstract":!0,views:{content:{template:"<div ui-view></div>"},moduleMenu:{template:moduleMenuTpl}},onEnter:function($rootScope){$rootScope.breadcrumbs.push({name:"projects.list.title",url:"page.projects.projectsList"})},onExit:function($rootScope){$rootScope.breadcrumbs.splice($rootScope.breadcrumbs.length-1,1)}})}])}),define("text!core/states/projects/processing.tpl.html",[],function(){return'<div class="container">\r\n	<h1>...</h1>\r\n</div>'}),define("core/states/projects/processing",["../../moduleDef","text!./processing.tpl.html","../projects"],function(module,tpl){module.config(["$stateProvider",function($stateProvider){$stateProvider.state({name:"page.projects.processing",url:"/projects/processing",template:tpl})}])}),define("text!core/states/projects/accessDenied.tpl.html",[],function(){return'<div class="container">\r\n	<h1>{{ i18n.msg(reasonTitle) || \'Error\' }}</h1>\r\n	<p>\r\n		{{ i18n.msg(reason) || \'Unknown error\' }}\r\n	</p>\r\n	<p ng-show="hasBack">\r\n		<a href="" ng-click="goBack()">Return back</a>\r\n	</p>\r\n</div>\r\n'}),define("core/states/projects/accessDenied",["../../moduleDef","text!./accessDenied.tpl.html","../projects"],function(module,tpl){module.config(["$stateProvider",function($stateProvider){$stateProvider.state({name:"page.projects.accessDenied",url:"/projects/accessDenied",views:{"":{template:tpl,controller:["$scope","errorPageService","$state",function($scope,errorPageService,$state){var err=errorPageService.getError();$scope.reason=err.reasonKey,$scope.reasonTitle=err.reasonTitleKey,$scope.hasBack=null!=err.backState,$scope.goBack=function(){$state.go(err.backState,err.backStateParams)}}]},"moduleMenu@page":{template:""}}})}])}),define("text!core/states/projects/projectsList.tpl.html",[],function(){return'<div class="container"\r\n     ng-controller="projectsListCtrl"\r\n     filtered-list="{method: \'core/projects/getProjects\'}"\r\n     initial-sorters="{ CreationTime: \'desc\' }">\r\n	<div class="row" id="content-wrapper">\r\n		<div class="col-xs-12">\r\n\r\n			<div filters-box="filter" sorters="sorters" meta="core/projects/projectMetadata" group="Projects"\r\n			        apply-enabled="applyEnabled" apply-filter="applyFilter" reset-filter="resetFilter" filter-applied="filterApplied"\r\n                    search-model="filter.simple.search" search-node="{path: \'Name\', op: \'like\'}" style="padding-top: 5px">\r\n				<ago-box-content>\r\n					<form class="form form-horizontal">\r\n						<div class="form-group" bindonce="i18n.projects">\r\n							<label class="col-md-3 control-label" bo-text="i18n.projects.list.filters.participation.label"></label>\r\n							<div class="col-md-9">\r\n								<select ng-model="filter.simple.Participation" class="form-control">\r\n									<option value="All" bo-text="i18n.projects.list.filters.participation.all"></option>\r\n									<option value="Participated" bo-text="i18n.projects.list.filters.participation.me"></option>\r\n								</select>\r\n							</div>\r\n						</div>\r\n						<div class="form-group" bindonce="i18n.core">\r\n							<label class="col-md-3 control-label" bo-text="i18n.core.fields.name"></label>\r\n							<div class="col-md-9">\r\n								<input ng-model="filter.simple.Name" filter-node="{path: \'Name\', op:\'like\'}" class="form-control" multiple />\r\n							</div>\r\n						</div>\r\n						<div class="form-group" bindonce="i18n.core">\r\n							<label class="col-md-3 control-label" bo-text="i18n.projects.fields.status"></label>\r\n							<div class="col-md-9">\r\n								<input ng-model="filter.simple.Status" filter-node="{path: \'Status\', op:\'=\'}"\r\n								       lookup="core/dictionary/lookupProjectStatuses" class="form-control" multiple />\r\n							</div>\r\n						</div>\r\n						<div class="form-group" bindonce="i18n.projects">\r\n							<label class="col-md-3 control-label" bo-text="i18n.projects.fields.tags"></label>\r\n							<div class="col-md-9">\r\n								<input ng-model="filter.simple.Tags" filter-node="{path: \'Tags.Tag\', op:\'=\'}"\r\n								       lookup="core/dictionary/lookupTags" request-params="{type: \'core.project\'}" class="form-control" multiple />\r\n							</div>\r\n						</div>\r\n					</form>\r\n				</ago-box-content>\r\n			</div>\r\n\r\n			<div class="row box">\r\n				<div class="col-xs-12">\r\n					<ago-box color="purple" large="true" header-class="{\'hidden-md\': true, \'hidden-lg\': true}">\r\n						<ago-box-title>\r\n							<i class="fa icon-table"></i>\r\n							<span bindonce="i18n.projects" bo-text="i18n.projects.list.title"></span>\r\n						</ago-box-title>\r\n						<ago-box-content>\r\n							<div class="box-toolbox box-toolbox-top">\r\n                                <ago-error-msg></ago-error-msg>\r\n								<a ui-sref="page.projects.projectCreate" class="btn btn-primary">\r\n									<i class="icon-plus icon-white"></i>\r\n									<span bindonce="i18n.core" bo-text="i18n.core.buttons.new"></span>\r\n								</a>\r\n\r\n                                <refresher active="indication.loading" on-refresh="refreshList()"></refresher>\r\n                                <div class="clearfix"></div>\r\n							</div>\r\n\r\n							<div ago-masonry="{columnWidth: \'.grid-sizer\'}" preserve-order="true" class="items-wall">\r\n                                <div class="grid-sizer col-xs-12 col-md-6"></div>\r\n								<div class="projectBox ago-masonry-brick col-xs-12 col-md-6 invisible"\r\n                                     bindonce ng-repeat="viewModel in models track by viewModel.VersionId">\r\n                                    <div class="box-content clearfix">\r\n										<a ui-sref="page.project({ project: viewModel.ProjectCode })" style="text-decoration: none">\r\n                                            <div class="box pull-left projIcon">\r\n                                                <div class="box-content">\r\n                                                    <img class="img-responsive" style="margin: 0 auto"\r\n                                                         src="https://placehold.it/120x120&text=Photo"\r\n                                                         bo-src="projectThumbnailImageUrl(viewModel)">\r\n                                                </div>\r\n                                            </div>\r\n											<div class="projectInfo">\r\n												<h3 class="title" bo-text="viewModel.Name"></h3>\r\n												<small bo-text="viewModel.Description"></small>\r\n											</div>\r\n										</a>\r\n										<div class="statusBox">\r\n											<span class="label label-warning" bo-text="viewModel.Status"></span>\r\n										</div>\r\n										<ago-tags view-model="viewModel" tag-type="\'core.project\'"\r\n											lookup-method="core/dictionary/lookupTags"\r\n											tag-method="core/projects/tagProject"\r\n											detag-method="core/projects/detagProject"\r\n											on-new-tag="doLayout()"\r\n											on-cancel-new-tag="doLayout()"\r\n											on-tag="doLayout()" on-detag="doLayout()">\r\n										</ago-tags>\r\n										<div class="clearfix"></div>\r\n									</div>\r\n								</div>\r\n							</div>\r\n                            <div class="clearfix"></div>\r\n\r\n							<div class="box-toolbox box-toolbox-bottom clearfix">\r\n								<!--<button type="button" class="btn btn-primary" ng-click="paging.page = paging.page + 1"-->\r\n                                        <!--bindonce="i18n.core" bo-text="i18n.core.buttons.more"></button>-->\r\n                                <next-page></next-page>\r\n\r\n                                <refresher active="indication.loading" on-refresh="refreshList()"></refresher>\r\n								<counter action="core/projects/getProjectsCount"></counter>\r\n							</div>\r\n						</ago-box-content>\r\n					</ago-box>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>'
}),requirejs.s.contexts._.nextTick=function(f){f()},require(["css"],function(css){css.addBuffer("core/states/projects/projectsList.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,define("core/states/projects/projectsList",["../../moduleDef","angular","text!./projectsList.tpl.html","jquery","../projects","css!./projectsList.css"],function(module,angular,tpl,$){module.config(["$stateProvider",function($stateProvider){$stateProvider.state({name:"page.projects.projectsList",url:"/projects/listview",template:tpl})}]).controller("projectsListCtrl",["$scope","$timeout","$rootScope","$controller",function($scope,$timeout,$rootScope,$controller){angular.extend(this,$controller("ProjectImageUrlCtrl",{$scope:$scope})),$scope.doLayout=function(){$timeout(function(){$(".items-wall").masonry("layout")},0,!1)};var offOpen=$rootScope.$on("sidebar:opened",$scope.doLayout),offClose=$rootScope.$on("sidebar:closed",$scope.doLayout),offChanged=$scope.$on("modelsChanged",function(){$timeout(function(){$scope.$broadcast("masonry.reloadItemsAndLayout")},0,!1)});$scope.$on("$destroy",function(){offOpen(),offClose(),offChanged()}),$scope.$on("resetFilter",function(){$scope.filter.simple={Participation:"All"},$scope.requestParams.mode="All"}),$scope.$watch("filter.simple.Participation",function(value){$scope.requestParams.mode=value||"All"},!0)}])}),define("text!core/states/projects/projectCreate.tpl.html",[],function(){return'<div class="container">\r\n	<div class="row" id="content-wrapper">\r\n		<div class="col-xs-12">\r\n\r\n			<div class="box" style="padding-top: 5px">\r\n				<div class="box-header purple-background">\r\n					<div class="title">\r\n						<i class="icon-plus"></i>\r\n						{{ i18n.projects.create.title }}\r\n					</div>\r\n				</div>\r\n\r\n				<div class="box-content">\r\n					<ago-error-msg></ago-error-msg>\r\n					\r\n					<form name="form" class="form form-horizontal" novalidate>\r\n						<!-- Project type -->\r\n                        <ago-new-form-item label="i18n.core.fields.type" field="Type" control="form.Type"\r\n                                           vld="validation">\r\n                            <input type="text" name="Type" lookup="core/dictionary/lookupProjectTypes"\r\n                                   ng-model="model.Type" placeholder="{{ i18n.projects.create.placeholders.type }}"\r\n                                   autofocus required class="form-control" />\r\n                        </ago-new-form-item>\r\n						<!-- Project code -->\r\n                        <ago-new-form-item label="i18n.projects.fields.code" field="ProjectCode" control="form.ProjectCode"\r\n                                vld="validation">\r\n                            <input type="text" name="ProjectCode" ng-model="model.ProjectCode"\r\n                                   ng-pattern="/^[a-zA-Z0-9_]{1,32}$/" required class="form-control" />\r\n                        </ago-new-form-item>\r\n                        <!-- Name -->\r\n                        <ago-new-form-item label="i18n.core.fields.name" field="Name" control="form.Name"\r\n                                vld="validation">\r\n                            <input type="text" name="Name" ng-model="model.Name" required class="form-control" />\r\n                        </ago-new-form-item>\r\n						<!-- VisibleForAll -->\r\n                        <ago-new-form-item label="i18n.projects.fields.public" field="VisibleForAll"\r\n                                control="form.VisibleForAll" vld="validation">\r\n                            <div class="checkbox">\r\n                                <input type="checkbox" name="VisibleForAll" ng-model="model.VisibleForAll" />\r\n                            </div>\r\n                        </ago-new-form-item>\r\n						<!-- Db instance -->\r\n                        <ago-new-form-item label="i18n.projects.fields.db" field="Storage" control="form.Storage"\r\n                                vld="validation">\r\n                            <input type="text" id="Server" name="Storage" lookup="core/projects/lookupDbInstances"\r\n                                   ng-model="model.Storage" placeholder="{{ i18n.projects.create.placeholders.db }}"\r\n                                   request-params="{projectTypeId: model.Type.id}" ng-disabled="!model.Type"\r\n                                   required class="form-control" />\r\n                        </ago-new-form-item>\r\n						<!-- Description -->\r\n                        <ago-new-form-item label="i18n.core.fields.description" field="Description"\r\n                                           control="form.Description" vld="validation">\r\n                            <textarea name="Description" ng-model="model.Description" rows="3" class="form-control"></textarea>\r\n                        </ago-new-form-item>\r\n						<!-- Tags -->\r\n                        <ago-new-form-item label="i18n.projects.fields.tags" field="Tags" control="form.Tags"\r\n                                vld="validation">\r\n                            <input type="text" name="Tags"\r\n                                   lookup="core/dictionary/lookupTags" ng-model="model.Tags"\r\n                                   request-params="{type: \'core.project\'}" multiple class="form-control"\r\n                                   placeholder="{{ i18n.tasks.create.placeholders.tags }}" />\r\n                        </ago-new-form-item>\r\n						<!--Tickets-->\r\n                        <ago-new-form-static-item label="i18n.projects.create.tickets" visible="true">\r\n                            <p class="form-control-static">{{ openTickets }}</p>\r\n                        </ago-new-form-static-item>\r\n						<!-- Action section -->\r\n						<div class="form-actions form-actions-padding-sm">\r\n							<div class="row">\r\n								<div class="col-md-10 col-md-offset-2">\r\n                                    <ago-spinner class="pull-left" active="creating" style="font-size: 2em; margin-right: 5px">\r\n                                    </ago-spinner>\r\n									<button type="button" class="btn btn-danger" ng-click="cancel()" ng-disabled="creating">\r\n                                        {{ i18n.core.buttons.cancel }}\r\n                                    </button>\r\n									<button type="button" class="btn btn-success" ng-click="create()"\r\n                                            ng-disabled="form.$invalid || creating">\r\n                                        {{ i18n.core.buttons.save }}\r\n                                    </button>\r\n								</div>\r\n							</div>\r\n						</div>			\r\n					</form>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n'}),define("core/states/projects/projectCreate",["../../moduleDef","angular","text!./projectCreate.tpl.html","../projects"],function(module,angular,tpl){module.config(["$stateProvider",function($stateProvider){var ctrl=function($scope,apinetService,$state,$location,defaults){angular.extend($scope,{model:{Type:defaults.type,Storage:defaults.storage},validation:{},openTickets:defaults.tickets,cancel:function(){$state.go("page.projects.projectsList")},handleException:function(error){$scope.creating=!1,$scope.resetValidation(),$scope.validation.generalErrors=[error]},handleValidationErrors:function(validation){$scope.resetValidation(),angular.extend($scope.validation,validation)},resetValidation:function(){$scope.validation={}},creating:!1,create:function(){$scope.resetValidation();var model=angular.copy($scope.model);model.Type&&(model.Type=model.Type.id);for(var tagIds=model.Tags||[],i=0;i<tagIds.length;i++)tagIds[i]=tagIds[i].id;$scope.creating=!0;var createTimeout=12e4;apinetService.action({method:"core/projects/createProject",model:model,storageId:model.Storage.id,tagIds:tagIds},createTimeout).then(function(result){if($scope.creating=!1,"undefined"==typeof result.success||result.success){var url="/project/"+$scope.model.ProjectCode+"/"+result.Type.Module.toLowerCase()+"-props";$location.url(url)}else $scope.handleValidationErrors(result)},$scope.handleException)}}),$scope.$watch("model.Type",function(newVal,oldVal){$scope.model.Storage&&newVal!==oldVal&&($scope.model.Storage=null)})};ctrl.$inject=["$scope","apinetService","$state","$location","defaults"],$stateProvider.state({name:"page.projects.projectCreate",url:"/projects/new",template:tpl,controller:ctrl,resolve:{defaults:["apinetService",function(apinetService){return apinetService.action({method:"core/projects/getNewProjectDefaults"})}]},onEnter:function($rootScope){$rootScope.breadcrumbs.push({name:"projects.create.title",url:"page.projects.projectCreate"})},onExit:function($rootScope){$rootScope.breadcrumbs.splice($rootScope.breadcrumbs.length-1,1)}})}])}),define("text!core/states/projects/register.tpl.html",[],function(){return'<div class="container">\r\n    <h1>{{ i18n.projects.register.title }}</h1>\r\n    <div>\r\n        <ago-error-msg></ago-error-msg>\r\n        <ago-spinner class="pull-left" active="processing" style="font-size: 2em">\r\n        </ago-spinner>\r\n        <span>{{ result }}</span>\r\n        <a ng-if="success" class="btn btn-default" ui-sref="page.project({ project: project })">\r\n            {{ projectName }}\r\n        </a>\r\n    </div>\r\n</div>'}),define("core/states/projects/register",["../../moduleDef","angular","text!./register.tpl.html"],function(module,angular,tpl){module.config(["$stateProvider",function($stateProvider){var controller=function($scope,apinetService,$stateParams,$controller){angular.extend(this,$controller("ErrorHandlingCtrl",{$scope:$scope}));var unwatch=$scope.$watch("i18n.core.errors",function(val){val&&(unwatch(),process())}),process=function(){$scope.processing=!0,apinetService.action({method:"core/projects/registerByInvitation",project:$stateParams.project,invitationId:$stateParams.invitation,deny:$stateParams.no}).then(function(response){response?($scope.result=$scope.i18n.msg("projects.register.success"),$scope.success=!0,$scope.project=$stateParams.project,$scope.projectName=response.Name):$scope.result=$scope.i18n.msg("projects.register.fail")},$scope.handleException)["finally"](function(){$scope.processing=!1})}};$stateProvider.state({name:"page.projects.register",url:"/projects/register?project&invitation&no",views:{"":{template:tpl,controller:["$scope","apinetService","$stateParams","$controller",controller]}}})}])}),define("text!core/states/reporting/templates.tpl.html",[],function(){return'<div class="container"\r\n	filtered-list="{method: \'core/reporting/getTemplates\'}"\r\n	initial-sorters="{ Name: \'asc\'}">\r\n	<div class="row" id="content-wrapper">\r\n		<div class="col-xs-12">\r\n			<div class="row">\r\n				<div class="col-xs-12">\r\n					<ago-tabs current-tab="templates" tab-settings="tabs" style="padding-top: 5px"></ago-tabs>\r\n				</div>\r\n			</div>\r\n\r\n            <div class="row">\r\n                <div class="col-xs-12">\r\n                    <div filters-box="filter" sorters="sorters" meta="core/reporting/templateMetadata" group="Reporting.Templates"\r\n                         apply-enabled="applyEnabled" apply-filter="applyFilter" reset-filter="resetFilter"\r\n                         filter-applied="filterApplied" style="padding-top: 5px">\r\n                        <ago-box-content>\r\n                            <form class="form form-horizontal">\r\n                                <div class="form-group">\r\n                                    <label class="col-md-3 control-label">{{ i18n.core.fields.name }}</label>\r\n                                    <div class="col-md-9">\r\n                                        <input ng-model="filter.simple.Name" filter-node="{path: \'Name\', op:\'like\'}" class="form-control" />\r\n                                    </div>\r\n                                </div>\r\n                            </form>\r\n                        </ago-box-content>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n			<ago-box color="purple" large="true">\r\n				<ago-box-title>\r\n					<i class="fa icon-file-alt"></i>\r\n					{{ i18n.core.reporting.templates.title }}\r\n				</ago-box-title>\r\n				<ago-box-content>\r\n					<div class="box-toolbox box-toolbox-top">\r\n						<ago-error-msg></ago-error-msg>\r\n\r\n						<div class="col-xs-7 col-sm-11" ago-uploader="uploadOptions">\r\n						</div>\r\n                        <refresher active="indication.loading" on-refresh="refreshList()"></refresher>\r\n                        <div class="clearfix"></div>\r\n					</div>\r\n\r\n					<div class="responsive-table">\r\n						<div class="scrollable-area">\r\n							<table class="table table-bordered">\r\n								<thead>\r\n									<tr>\r\n										<th class="col-xs-12 col-sm-8">{{ i18n.core.fields.name }}</th>\r\n										<th class="col-sm-2 hidden-xs">{{ i18n.core.fields.lastChangeTime }}</th>\r\n										<th class="col-sm-2 hidden-xs">{{ i18n.core.reporting.templates.fields.size }}</th>\r\n										<th class="onepct">&nbsp;</th>\r\n									</tr>\r\n								</thead>\r\n								<tbody>\r\n									<tr id="{{m.Id}}" ng-repeat="m in models">\r\n										<td class="col-xs-12 col-sm-7" style="white-space: normal">\r\n                                            <ago-file-link name="m.Name" download-url="downloadUrl(m)" on-error="onDownloadError(m)"></ago-file-link>\r\n											<div ago-uploader-inrow="itemUploadOptions(m)" drop-target="m.Id" class="col-xs-12"></div>\r\n										</td>\r\n										<td class="col-sm-2 hidden-xs">{{ m.LastChange | date:\'ago_datetime\' }}\r\n										<td class="col-sm-2 hidden-xs">{{ m.Size | formatFileSize }}</td>\r\n										<td class="onepct">\r\n											<ago-btn-delete title="{{ i18n.core.buttons.delete }}" ng-click="delete(m)"></ago-btn-delete>\r\n										</td>\r\n									</tr>\r\n								</tbody>\r\n							</table>\r\n						</div>\r\n					</div>\r\n\r\n					<div class="box-toolbox box-toolbox-bottom">\r\n						<button type="button" class="btn btn-primary" ng-click="paging.page = paging.page + 1">{{ i18n.core.buttons.more }}</button>\r\n\r\n                        <refresher active="indication.loading" on-refresh="refreshList()"></refresher>\r\n						<counter action="core/reporting/getTemplatesCount"></counter>\r\n					</div>\r\n				</ago-box-content>\r\n			</ago-box>\r\n		</div>\r\n	</div>\r\n</div>\r\n'}),define("core/states/reporting/templates",["../../moduleDef","angular","text!./templates.tpl.html","../page"],function(module,angular,template){module.config(["$stateProvider",function($stateProvider){$stateProvider.state({name:"page.project.templates","abstract":!0,views:{"":{template:template,controller:"reportTemplatesController"}},resolve:{tabs:function(){return{}}},onExit:function($rootScope){$rootScope.breadcrumbs.splice($rootScope.breadcrumbs.length-1,1)}})}]).controller("reportTemplatesController",["$scope","apinetService","dialogService","i18n","reportService","$stateParams","tabs",function($scope,apinetService,dialogService,i18n,reportService,$stateParams,tabs){$scope.tabs=tabs;var handleException=function(error){$scope.resetValidation(),$scope.validation.generalErrors=angular.isArray(error)?error:[error]};$scope.uploadOptions={url:reportService.templateUploadUrl($stateParams.project),done:function(e,data){$scope.handleResult(data.result)},fail:function(e,data){"abort"!==data.errorThrown&&handleException(data.result.message)},submit:function(e,data){angular.extend(data.formData,{project:$stateParams.project})}},$scope.itemUploadOptions=function(model){var itemOptions=angular.copy($scope.uploadOptions);return angular.extend(itemOptions,{maxNumberOfFiles:1,submit:function(e,data){angular.extend(data.formData,{project:$stateParams.project,templateId:model.Id})}}),itemOptions},$scope.handleResult=function(response){response&&response.files&&response.files.map(function(file){var idx=$scope.findIdexById(file.model.Id);0>idx?$scope.models.push(file.model):angular.extend($scope.models[idx],file.model)})},$scope.findIdexById=function(templateId){if(!templateId)return-1;var modelIndex=-1;return angular.forEach($scope.models,function(model,index){model.Id===templateId&&(modelIndex=index)}),modelIndex},$scope.delete=function(model){dialogService.confirm(i18n.msg("core.confirm.delete.title"),i18n.msg("core.confirm.delete.records")).then(function(){apinetService.action({method:"core/reporting/DeleteTemplate",project:$stateParams.project,templateId:model.Id}).then(function(){var index=$scope.models.indexOf(model);index>=0&&$scope.models.splice(index,1)},handleException)})},$scope.downloadUrl=function(template){return reportService.templateDownloadUrl(template.ProjectCode,template.Id)},$scope.onDownloadError=function(template){handleException(i18n.msg("core.errors.downloadError",{file:template.Name}))}}])}),define("text!core/states/reporting/reports.tpl.html",[],function(){return'<div class="container"\r\n	ng-controller="reportsController"\r\n	filtered-list="{method: \'core/reporting/getArchivedReports\'}"\r\n	initial-sorters="{ CreationTime: \'desc\'}">\r\n	<div class="row" id="content-wrapper">\r\n		<div class="col-xs-12">\r\n\r\n			<div filters-box="filter" sorters="sorters" meta="core/reporting/archivedReportMetadata" group="Reporting.ArchivedReports"\r\n                 apply-enabled="applyEnabled" apply-filter="applyFilter" reset-filter="resetFilter"\r\n                 filter-applied="filterApplied" style="padding-top: 5px">\r\n				<ago-box-content>\r\n					<form class="form form-horizontal">\r\n						<div class="form-group">\r\n							<label class="col-md-3 control-label">{{ i18n.core.fields.name }}</label>\r\n							<div class="col-md-9">\r\n								<input ng-model="filter.simple.Name" filter-node="{path: \'Name\', op:\'like\'}" class="form-control" />\r\n							</div>\r\n						</div>\r\n						<div class="form-group">\r\n							<label class="col-md-3 control-label">{{ i18n.core.reporting.reports.fields.completedAt }}</label>\r\n							<div class="col-md-9">\r\n								<div class="col-xs-5" style="padding-left: 0; padding-right: 0">\r\n									<input type="text" ng-model="filter.simple.lDate" bs-datepicker filter-node="{path: \'CreationTime\', op: \'>=\'}" class="form-control" />\r\n								</div>\r\n								<span class="col-xs-1" style="padding: 0; text-align: center">-</span>\r\n								<div class="col-xs-5" style="padding-left: 0; padding-right: 0">\r\n									<input type="text" ng-model="filter.simple.rDate" bs-datepicker filter-node="{path: \'CreationTime\', op: \'<\'}" class="form-control" />\r\n								</div>\r\n							</div>\r\n						</div>\r\n						<div class="form-group">\r\n							<label class="col-md-3 control-label">{{ i18n.core.reporting.reports.fields.type }}</label>\r\n							<div class="col-md-9">\r\n								<input ng-model="filter.simple.SettingsName" filter-node="{path: \'SettingsName\', op:\'like\'}" class="form-control" />\r\n							</div>\r\n						</div>\r\n						<div class="form-group">\r\n							<label class="col-md-3 control-label">{{ i18n.core.reporting.reports.fields.project }}</label>\r\n							<div class="col-md-9">\r\n								<input lookup="core/projects/lookupProjects" ng-model="filter.simple.Project" filter-node="{path: \'ProjectCode\', op: \'=\'}" class="form-control" multiple />\r\n							</div>\r\n						</div>\r\n						<div class="form-group">\r\n							<label class="col-md-3 control-label">{{ i18n.core.fields.type }}</label>\r\n							<div class="col-md-9">\r\n								<input lookup="core/dictionary/lookupProjectTypesByName" ng-model="filter.simple.ProjectType" filter-node="{path: \'ProjectType\', op: \'=\'}" class="form-control" multiple />\r\n							</div>\r\n						</div>\r\n					</form>\r\n				</ago-box-content>\r\n			</div>\r\n\r\n			<ago-box color="purple" large="true" header-class="{\'hidden-md\': true, \'hidden-lg\': true}">\r\n				<ago-box-title>\r\n					<i class="fa icon-bar-chart"></i>\r\n					{{ i18n.core.reporting.reports.title }}\r\n				</ago-box-title>\r\n				<ago-box-content>\r\n                    <div class="box-toolbox box-toolbox-top">\r\n                        <ago-error-msg></ago-error-msg>\r\n\r\n                        <refresher active="indication.loading" on-refresh="refreshList()"></refresher>\r\n                        <div class="clearfix"></div>\r\n                    </div>\r\n\r\n					<div class="responsive-table">\r\n						<div class="scrollable-area">\r\n							<table class="table table-bordered">\r\n								<thead>\r\n									<tr>\r\n										<th class="col-xs-12 col-sm-6 col-md-6">{{ i18n.core.fields.name }}</th>\r\n										<th class="col-sm-3 col-md-2 hidden-xs">{{ i18n.core.reporting.reports.fields.project }}</th>\r\n										<th class="col-sm-3 col-md-2 hidden-xs">{{ i18n.core.reporting.reports.fields.type }}</th>\r\n										<th class="col-md-2 hidden-sm hidden-xs">{{ i18n.core.fields.creationTime }}</th>\r\n									</tr>\r\n								</thead>\r\n								<tbody>\r\n									<tr ng-repeat="m in models">\r\n										<td class="col-xs-12 col-sm-6 col-md-6" style="white-space: normal">\r\n											<ago-file-link name="m.Name" download-url="downloadUrl(m)"></ago-file-link>\r\n											<small class="visible-xs text-muted">\r\n												{{ m.ProjectName }}, \r\n												{{ m.SettingsName }}, \r\n												{{ m.CreationTime | date:\'ago_datetime\' }}\r\n											</small>\r\n										</td>\r\n										<td class="col-sm-3 col-md-2 hidden-xs" style="white-space: normal">\r\n											{{ m.ProjectName }}\r\n											<small class="text-muted">{{ m.ProjectCode }}</small>\r\n										</td>\r\n										<td class="col-sm-3 col-md-2 hidden-xs" style="white-space: normal">\r\n											{{ m.SettingsName }}\r\n										</td>\r\n										<td class="col-md-2 hidden-sm hidden-xs" style="white-space: normal">\r\n											{{ m.CreationTime | date:\'ago_datetime\' }}\r\n										</td>\r\n									</tr>\r\n								</tbody>\r\n							</table>\r\n						</div>\r\n					</div>\r\n\r\n					<div class="box-toolbox box-toolbox-bottom">\r\n						<button type="button" class="btn btn-primary" ng-click="paging.page = paging.page + 1">{{ i18n.core.buttons.more }}</button>\r\n\r\n                        <refresher active="indication.loading" on-refresh="refreshList()"></refresher>\r\n						<counter action="core/reporting/getArchivedReportsCount"></counter>\r\n					</div>\r\n				</ago-box-content>\r\n			</ago-box>\r\n		</div>\r\n	</div>\r\n</div>\r\n'}),define("core/states/reporting/reports",["../../moduleDef","angular","text!./reports.tpl.html"],function(module,angular,template){module.config(["$stateProvider",function($stateProvider){$stateProvider.state({name:"page.projects.reports",url:"/projects/reports",template:template,onEnter:function($rootScope){$rootScope.breadcrumbs.push({name:"core.reporting.reports.title",url:"page.projects.reports"})},onExit:function($rootScope){$rootScope.breadcrumbs.splice($rootScope.breadcrumbs.length-1,1)}})}]).controller("reportsController",["$scope","apinetService","$window","i18n","reportService","$locale","$rootScope","REPORT_EVENTS",function($scope,apinetService,$window,i18n,reportService){$scope.downloadUrl=function(archiveRecord){return reportService.reportDownloadUrl(archiveRecord.ProjectCode,archiveRecord.ReportTaskId)}}])}),define("text!core/states/reporting/projectReports.tpl.html",[],function(){return'<div class="container"\r\n	ng-controller="projectReportsController"\r\n	filtered-list="{method: \'core/reporting/getReports\'}"\r\n	initial-sorters="{ CreationTime: \'desc\'}">\r\n	<div class="row" id="content-wrapper">\r\n        <div class="col-xs-12">\r\n			<div filters-box="filter" sorters="sorters" meta="core/reporting/reportTaskMetadata" group="Reporting.Reports"\r\n                 apply-enabled="applyEnabled" apply-filter="applyFilter" reset-filter="resetFilter"\r\n                 filter-applied="filterApplied" style="padding-top: 5px">\r\n				<ago-box-content>\r\n					<form class="form form-horizontal">\r\n						<div class="form-group">\r\n							<label class="col-md-3 control-label">{{ i18n.core.fields.name }}</label>\r\n							<div class="col-md-9">\r\n								<input ng-model="filter.simple.Name" filter-node="{path: \'Name\', op:\'like\'}" class="form-control" />\r\n							</div>\r\n						</div>\r\n						<div class="form-group">\r\n							<label class="col-md-3 control-label">{{ i18n.core.reporting.reports.fields.completedAt }}</label>\r\n							<div class="col-md-9">\r\n								<div class="col-xs-5" style="padding-left: 0; padding-right: 0">\r\n									<input type="text" ng-model="filter.simple.lDate" bs-datepicker filter-node="{path: \'CompletedAt\', op: \'>=\'}" class="form-control" />\r\n								</div>\r\n								<span class="col-xs-1" style="padding: 0; text-align: center">-</span>\r\n								<div class="col-xs-5" style="padding-left: 0; padding-right: 0">\r\n									<input type="text" ng-model="filter.simple.rDate" bs-datepicker filter-node="{path: \'CompletedAt\', op: \'<\'}" class="form-control" />\r\n								</div>\r\n							</div>\r\n						</div>\r\n						<div class="form-group">\r\n							<label class="col-md-3 control-label">{{ i18n.core.reporting.reports.fields.type }}</label>\r\n							<div class="col-md-9">\r\n								<input lookup="core/reporting/lookupSettings" ng-model="filter.simple.Settings" filter-node="{path: \'ReportSetting.Id\', op:\'=\'}" class="form-control" multiple />\r\n							</div>\r\n						</div>\r\n						<div class="form-group">\r\n							<label class="col-md-3 control-label">{{ i18n.core.reporting.reports.fields.state }}</label>\r\n							<div class="col-md-9">\r\n								<input lookup="core/reporting/lookupStates" ng-model="filter.simple.State" filter-node="{path: \'State\', op:\'=\'}" class="form-control" multiple />\r\n							</div>\r\n						</div>\r\n					</form>\r\n				</ago-box-content>\r\n			</div>\r\n\r\n			<ago-box color="purple" large="true" header-class="{\'hidden-md\': true, \'hidden-lg\': true}">\r\n				<ago-box-title>\r\n					<i class="fa icon-bar-chart"></i>\r\n					{{ i18n.core.reporting.reports.title }}\r\n				</ago-box-title>\r\n				<ago-box-content>\r\n                    <div class="box-toolbox box-toolbox-top">\r\n					    <ago-error-msg></ago-error-msg>\r\n\r\n                        <refresher active="indication.loading" on-refresh="refreshList()"></refresher>\r\n                        <div class="clearfix"></div>\r\n                    </div>\r\n\r\n					<div class="responsive-table">\r\n						<div class="scrollable-area">\r\n							<table class="table table-bordered">\r\n								<thead>\r\n									<tr>\r\n										<th class="col-xs-12 col-sm-8 col-md-6">{{ i18n.core.fields.name }}</th>\r\n										<th class="col-sm-4 col-md-2 hidden-xs">{{ i18n.core.reporting.reports.fields.state }}</th>\r\n										<th class="col-md-2 hidden-sm hidden-xs">{{ i18n.core.fields.creationTime }}</th>\r\n										<th class="col-md-2 hidden-sm hidden-xs">{{ i18n.core.reporting.reports.fields.progress }}</th>\r\n										<th class="onepct">&nbsp;</th>\r\n									</tr>\r\n								</thead>\r\n								<tbody>\r\n									<tr ng-repeat-start="m in models">\r\n										<td ng-switch="m.State" class="col-xs-12 col-sm-8 col-md-6" style="">\r\n                                            <details-btn open="m.expanded" toggle="m.expanded = !m.expanded"></details-btn>\r\n\r\n											<div ago-report-link report="m" style="display: inline-block; white-space: normal; margin-left: 5px"></div>\r\n\r\n											<button type="button" ng-show="m.State == \'NotStarted\' || m.State == \'Running\'" ng-click="cancel(m)" class="btn btn-sm btn-danger pull-right" style="margin-left: 5px">{{ i18n.core.buttons.cancel }}</button>\r\n											<a class="btn btn-sm btn-primary pull-right" ng-show="m.State == \'NotStarted\'" onclick="event.stopPropagation();" title="{{ i18n.core.reporting.position }}">{{ positions[m.Id] || \'?\' }}</a>\r\n										</td>\r\n										<td class="col-sm-4 col-md-2 hidden-xs">{{ m.StateName }}</td>\r\n										<td class="col-md-2 hidden-sm hidden-xs">{{ m.CreationTime | date:\'ago_datetime\' }}</td>\r\n										<td class="col-md-2 hidden-sm hidden-xs">{{ m.DataGenerationProgress }}% / {{ m.ReportGenerationProgress }}%</td>\r\n										<td class="onepct">\r\n											<ago-btn-delete title="{{ i18n.core.buttons.delete }}" ng-click="delete(m)"></ago-btn-delete>\r\n										</td>\r\n									</tr>\r\n									<tr ng-repeat-end ng-show="m.expanded" ng-init="m.expanded = false">\r\n										<td colspan="5">\r\n											<table class="table table-bordered">\r\n												<tr>\r\n													<td>{{ i18n.core.fields.creator }}</td>\r\n													<td>{{ m.Author }}</td>\r\n												</tr>\r\n												<tr>\r\n													<td>{{ i18n.core.reporting.reports.fields.startedAt }}</td>\r\n													<td>{{ m.StartedAt | date:\'ago_datelongtime\' }}</td>\r\n												</tr>\r\n												<tr>\r\n													<td>{{ i18n.core.reporting.reports.fields.completedAt }}</td>\r\n													<td>{{ m.CompletedAt | date:\'ago_datelongtime\' }}</td>\r\n												</tr>\r\n												<tr>\r\n													<td>{{ i18n.core.reporting.reports.fields.duration }}</td>\r\n													<td>{{ duration(m) }}</td>\r\n												</tr>\r\n												<tr ng-show="m.ErrorMsg" class="text-error">\r\n													<td>{{ i18n.core.reporting.reports.fields.errorMsg }}</td>\r\n													<td>{{ m.ErrorMsg }}</td>\r\n												</tr>\r\n												<tr ng-show="m.ErrorDetails" class="text-error">\r\n													<td>{{ i18n.core.reporting.reports.fields.errorDetails }}</td>\r\n													<td>{{ m.ErrorDetails }}</td>\r\n												</tr>\r\n											</table>\r\n										</td>\r\n									</tr>\r\n								</tbody>\r\n							</table>\r\n						</div>\r\n					</div>\r\n\r\n					<div class="box-toolbox box-toolbox-bottom">\r\n						<button type="button" class="btn btn-primary" ng-click="paging.page = paging.page + 1">{{ i18n.core.buttons.more }}</button>\r\n\r\n                        <refresher active="indication.loading" on-refresh="refreshList()"></refresher>\r\n						<counter action="core/reporting/getReportsCount"></counter>\r\n					</div>\r\n				</ago-box-content>\r\n			</ago-box>\r\n		</div>\r\n	</div>\r\n</div>\r\n'}),define("core/states/reporting/projectReports",["../../moduleDef","angular","text!./projectReports.tpl.html","../page"],function(module,angular,template){module.config(["$stateProvider",function($stateProvider){$stateProvider.state({name:"page.project.reports","abstract":!0,views:{"":{template:template}},onExit:function($rootScope){$rootScope.breadcrumbs.splice($rootScope.breadcrumbs.length-1,1)}})}]).controller("projectReportsController",["$scope","apinetService","dialogService","i18n","reportService","$locale","$rootScope","REPORT_EVENTS",function($scope,apinetService,dialogService,i18n,reportService,$locale,$rootScope,REPORT_EVENTS){var handleException=function(error){$scope.resetValidation(),$scope.validation.generalErrors=angular.isArray(error)?error:[error]},pluralDurationPart=function(cnt,type,omitZero){if(omitZero&&0>=cnt)return"";switch($locale.pluralCat(cnt)){case"one":case"few":case"many":case"other":var pcat=$locale.pluralCat(cnt);return cnt+" "+i18n.msg("core.reporting.reports.duration."+type+"."+pcat);case"zero":case"two":default:return""}};$scope.duration=function(report){if(!report.StartedAt)return"";var finish=report.CompletedAt?new Date(report.CompletedAt):new Date,start=new Date(report.StartedAt),f=Date.UTC(finish.getFullYear(),finish.getMonth(),finish.getDate(),finish.getHours(),finish.getMinutes(),finish.getSeconds()),s=Date.UTC(start.getFullYear(),start.getMonth(),start.getDate(),start.getHours(),start.getMinutes(),start.getSeconds()),ms=Math.abs(f-s),MS_PER_SECOND=1e3,MS_PER_MINUTE=60*MS_PER_SECOND,MS_PER_HOUR=60*MS_PER_MINUTE,hoursDiff=Math.floor(ms/MS_PER_HOUR),minutesDiff=Math.floor((ms-hoursDiff*MS_PER_HOUR)/MS_PER_MINUTE),secondsDiff=Math.floor((ms-(hoursDiff*MS_PER_HOUR+minutesDiff*MS_PER_MINUTE))/MS_PER_SECOND),secondsName=i18n.msg("core.reporting.reports.duration.seconds"),hours=pluralDurationPart(hoursDiff,"hours",!0);
return hours+" "+pluralDurationPart(minutesDiff,"minutes",""===hours)+(secondsDiff>0?" "+secondsDiff+" "+secondsName:"< 1 "+secondsName)},$scope.cancel=function(report){reportService.cancelReport(report.ProjectCode,report.Id).then(null,handleException)};var findById=function(id){if(!id)return null;for(var i=0;i<$scope.models.length;i++)if($scope.models[i].Id==id)return $scope.models[i];return null},deleteReport=function(id){var report=findById(id);if(report){var reportIndex=$scope.models.indexOf(report);reportIndex>=0&&$scope.models.splice(reportIndex,1)}};$scope.merge=function(e,arg){var changedReport=arg.report,report=findById(changedReport.Id);report&&angular.extend(report,changedReport)},$scope.delete=function(report){dialogService.confirm(i18n.msg("core.confirm.delete.title"),i18n.msg("core.confirm.delete.record")).then(function(){reportService.deleteReport(report.ProjectCode,report.Id).then(function(){deleteReport(report.Id)},handleException)})},$scope.positions=reportService.getQueuePositions(),$scope.$watch(function(){return reportService.getQueuePositions()},function(newValue){$scope.positions=newValue}),$rootScope.$on(REPORT_EVENTS.CREATED,function(e,arg){$scope.models.unshift(arg.report)}),$rootScope.$on(REPORT_EVENTS.RUNNED,$scope.merge),$rootScope.$on(REPORT_EVENTS.PROGRESS,$scope.merge),$rootScope.$on(REPORT_EVENTS.COMPLETED,$scope.merge),$rootScope.$on(REPORT_EVENTS.ABORTED,$scope.merge),$rootScope.$on(REPORT_EVENTS.ERROR,$scope.merge),$rootScope.$on(REPORT_EVENTS.CANCELED,$scope.merge),$rootScope.$on(REPORT_EVENTS.DELETED,function(e,arg){deleteReport(arg.report.Id)}),$rootScope.$on(REPORT_EVENTS.DOWNLOADED,$scope.merge)}])}),define("text!core/states/tags/tags.tpl.html",[],function(){return'<div class="container">\r\n	<div class="row" id="content-wrapper">\r\n		<div class="col-xs-12">\r\n\r\n			<ago-box color="purple" large="true" header-class="{\'hidden-md\': true, \'hidden-lg\': true}" style="margin-top: 5px">\r\n				<ago-box-title>\r\n					<i class="fa icon-cog"></i>\r\n					<span bindonce="i18n.projects" bo-text="i18n.projects.tags.title"></span>\r\n				</ago-box-title>\r\n				\r\n				<ago-box-content>\r\n					<div class="box-toolbox box-toolbox-top">\r\n						<ago-error-msg></ago-error-msg>\r\n\r\n						<form class="form-inline" role="form">\r\n							<div class="form-group col-xs-8" style="padding-left: 0">\r\n							    <select class="form-control" ng-model="currentType" ng-options="t.id as i18n.msg(t.code) for t in tagTypes"></select>\r\n							</div>\r\n						</form>\r\n\r\n						<div class="pull-right">\r\n                            <refresher active="loading" on-refresh="reload()"></refresher>\r\n							<button class="btn btn-success pull-right" title="{{ i18n.core.tags.addTag }}" ng-click="newTag()">\r\n								<i class="icon-plus"></i>\r\n							</button>\r\n						</div>\r\n                        <div class="clearfix"></div>\r\n					</div>\r\n					<div class="responsive-table">\r\n						<div class="scrollable-area">\r\n							<table class="table table-bordered">\r\n								<thead>\r\n									<tr>\r\n										<th class="col-xs-12 col-sm-6">{{ i18n.core.fields.name }}</th>\r\n										<th class="col-sm-6 hidden-xs">{{ i18n.core.fields.fullName }}</th>\r\n										<th class="onepct">&nbsp;</th>\r\n									</tr>\r\n								</thead>\r\n								<tbody>\r\n									<tr ng-repeat="model in models">\r\n										<td class="col-xs-12 col-sm-6" style="white-space: normal">\r\n											<inline-text model="model.Name" on-update="onUpdate(model, val)" on-cancel="onCancel(model)" input-class="span10" required></inline-text>\r\n											<span ng-show="model.validation.generalErrors" class="help-block alert-error">\r\n												{{ model.validation.generalErrors | joinBy }}\r\n											</span>\r\n											<span ng-show="model.validation.fieldErrors[\'Name\']" class="help-block alert-error">\r\n												{{ model.validation.fieldErrors[\'Name\'] | joinBy }}\r\n											</span>\r\n											<p ng-show="model.Name != model.FullName">\r\n												<small class="visible-xs text-muted">{{ model.FullName }}</small>\r\n											</p>\r\n										</td>\r\n										<td class="col-sm-6 hidden-xs">{{ model.FullName }}</td>\r\n										<td class="onepct">\r\n											<div class="btn-group-vertical">\r\n												<button ng-show="model.Id" class="btn btn-success btn-sm" title="{{ i18n.core.tags.addTag }}" ng-click="newTag(model)">\r\n													<i class="icon-plus"></i>\r\n												</button>\r\n												<ago-btn-delete title="{{ i18n.tasks.types.buttons.delete }}" ng-click="deleteTag(model)"></ago-btn-delete>\r\n											</div>\r\n										</td>\r\n									</tr>\r\n								</tbody>\r\n							</table>\r\n						</div>\r\n					</div>\r\n\r\n					<div class="box-toolbox box-toolbox-bottom">\r\n						<button type="button" class="btn btn-primary" ng-click="nextPage()">{{ i18n.core.buttons.more }}</button>\r\n\r\n                        <refresher active="loading" on-refresh="reload()"></refresher>\r\n						<counter action="core/dictionary/getTagsCount"></counter>\r\n					</div>\r\n				</ago-box-content>\r\n				\r\n			</ago-box>\r\n\r\n		</div>\r\n	</div>\r\n</div>'}),define("core/states/tags/tags",["../../moduleDef","angular","text!./tags.tpl.html","text!../moduleMenu.tpl.html"],function(module,angular,tpl){module.config(["$stateProvider",function($stateProvider){$stateProvider.state({name:"page.projects.tags",url:"/projects/tags",template:tpl,controller:"tagsCtrl",resolve:{tagTypes:function(){return[{id:"core.project",code:"projects.tags.type"}]}},onEnter:["$rootScope",function($rootScope){$rootScope.breadcrumbs.push({name:"projects.tags.title",url:"page.projects.tags"})}],onExit:["$rootScope",function($rootScope){$rootScope.breadcrumbs.splice($rootScope.breadcrumbs.length-1,1)}]})}]).controller("tagsCtrl",["$scope","dialogService","i18n","apinetService","$stateParams","tagTypes",function($scope,dialogService,i18n,apinetService,$stateParams,tagTypes){$scope.tagTypes=tagTypes,$scope.currentType=$scope.tagTypes.length>0?$scope.tagTypes[0].id:null,$scope.page=0,$scope.requestParams={type:$scope.currentType?$scope.currentType.id:null},$scope.loading=!1,$scope.resetValidation=function(){$scope.validation||($scope.validation={}),$scope.validation.generalErrors=[],$scope.validation.fieldErrors={}},$scope.handleError=function(error){$scope.resetValidation(),$scope.validation.generalErrors=[error]},$scope.reload=function(){$scope.page=0,$scope.models=[],$scope.load()},$scope.load=function(){$scope.loading=!0,apinetService.action({method:"core/dictionary/getTags",project:$stateParams.project,type:$scope.currentType,page:$scope.page}).then(function(response){response.length||($scope.page--,$scope.page<0&&($scope.page=0)),$scope.models=$scope.models||[];for(var i=0;i<response.length;i++)$scope.models.push(response[i]);$scope.loading=!1},function(error){$scope.page--,$scope.page<0&&($scope.page=0),$scope.handleError(error),$scope.loading=!1})},$scope.nextPage=function(){$scope.page++,$scope.load()},$scope.newTag=function(parent){var newModel={Name:i18n.msg("core.tags.newTag"),Parent:parent&&parent.Id?{Id:parent.Id}:null};if(!parent||!parent.Id)return void $scope.models.unshift(newModel);var index=$scope.models.indexOf(parent);0>index||(index++,index===$scope.models.length?$scope.models.push(newModel):$scope.models.splice(index,0,newModel))},$scope.onUpdate=function(model,name){$scope.resetValidation(),model.validation={},model.Id?$scope.updateTag(model,name):$scope.createTag(model,name)},$scope.onCancel=function(model){model.validation={}},$scope.createTag=function(model,name){name&&name.length&&apinetService.action({method:"core/dictionary/createTag",project:$stateParams.project,type:$scope.currentType,parentId:model.Parent&&model.Parent.Id?model.Parent.Id:null,name:name}).then(function(result){result.validation.success?angular.extend(model,result.model):model.validation=result.validation||{}},$scope.handleError)},$scope.updateTag=function(model,name){model.Id&&name&&name.length&&apinetService.action({method:"core/dictionary/updateTag",project:$stateParams.project,type:$scope.currentType,id:model.Id,name:name}).then(function(result){if(result.validation.success){if(angular.isArray(result.model))for(var i=0;i<result.model.length;i++)$scope.extendUpdatedModel(result.model[i])}else model.validation=result.validation||{}},$scope.handleError)},$scope.deleteTag=function(model){if(model.Id)dialogService.confirm(i18n.msg("core.confirm.delete.title"),i18n.msg("core.confirm.delete.record")).then(function(){$scope.resetValidation(),model.validation={},apinetService.action({method:"core/dictionary/deleteTag",project:$stateParams.project,type:$scope.currentType,id:model.Id}).then(function(result){if(result.validation.success){if(angular.isArray(result.model))for(var i=0;i<result.model.length;i++)$scope.removeDeletedModel(result.model[i])}else model.validation=result.validation||{}},$scope.handleError)});else for(var i=0;i<$scope.models.length;i++)if($scope.models[i]===model){$scope.models.splice(i,1);break}},$scope.extendUpdatedModel=function(updatedModel){for(var i=0;i<$scope.models.length;i++)if($scope.models[i].Id===updatedModel.Id){angular.extend($scope.models[i],updatedModel);break}},$scope.removeDeletedModel=function(id){for(var i=0;i<$scope.models.length;i++)if($scope.models[i].Id===id){$scope.models.splice(i,1);break}},$scope.$watch("currentType",function(){$scope.requestParams.type=$scope.currentType,$scope.load()})}])}),define("text!core/states/custom-props/customPropTypes.tpl.html",[],function(){return'<div class="container"\r\n     ng-controller="customPropTypesController"\r\n     filtered-list="{method: \'core/dictionary/getCustomPropertyTypes\'}"\r\n     initial-sorters="{ FullName: \'asc\'}">\r\n	<div class="row" id="content-wrapper">\r\n		<div class="col-xs-12">\r\n\r\n			<div filters-box="filter" sorters="sorters" meta="core/dictionary/customPropertyMetadata"\r\n			     group="CustomProperyTypes"\r\n			     apply-enabled="applyEnabled" apply-filter="applyFilter" reset-filter="resetFilter"\r\n			     filter-applied="filterApplied" style="padding-top: 5px">\r\n				<ago-box-content>\r\n					<form class="form form-horizontal">\r\n						<div class="form-group">\r\n							<label class="col-md-3 control-label">{{ i18n.core.fields.name }}</label>\r\n\r\n							<div class="col-md-9">\r\n								<input ng-model="filter.simple.Name" filter-node="{path: \'FullName\', op:\'like\'}"\r\n								       class="form-control"/>\r\n							</div>\r\n						</div>\r\n					</form>\r\n				</ago-box-content>\r\n			</div>\r\n\r\n			<ago-box color="purple" large="true" header-class="{\'hidden-md\': true, \'hidden-lg\': true}">\r\n				<ago-box-title>\r\n					<i class="fa icon-bar-chart"></i>\r\n					{{ i18n.core.customPropTypes.title }}\r\n				</ago-box-title>\r\n				<ago-box-content>\r\n                    <ago-hdict-view counter-url="core/dictionary/getCustomPropertyTypesCount">\r\n                        <ago-hdict-add-form>\r\n                            <custom-prop-type-add-form model="newParamType" vld="validation"\r\n                               ng-show="createFormVisible" on-update="create()" on-cancel="toggleCreateForm(false)">\r\n                           </custom-prop-type-add-form>\r\n                        </ago-hdict-add-form>\r\n                        <ago-hdict-header>\r\n                            <custom-prop-type-header></custom-prop-type-header>\r\n                        </ago-hdict-header>\r\n                        <ago-hdict-column>\r\n                            <custom-prop-type-column></custom-prop-type-column>\r\n                        </ago-hdict-column>\r\n                    </ago-hdict-view>\r\n				</ago-box-content>\r\n			</ago-box>\r\n		</div>\r\n	</div>\r\n</div>\r\n'}),define("core/states/custom-props/customPropTypes",["../../moduleDef","angular","text!./customPropTypes.tpl.html","../page"],function(module,angular,template){module.config(["$stateProvider",function($stateProvider){$stateProvider.state({name:"page.project.customPropTypes","abstract":!0,views:{"":{template:template}},onExit:function($rootScope){$rootScope.breadcrumbs.splice($rootScope.breadcrumbs.length-1,1)}})}]).controller("customPropTypesController",["$scope","$controller",function($scope,$controller){$scope.newParamType={parent:null,name:null,type:null,format:null,clear:function(){this.parent=null,this.name=null,this.type=null,this.format=null}},angular.extend(this,$controller("BaseHDictController",{$scope:$scope,createUrl:"core/dictionary/createCustomPropertyType",updateUrl:"core/dictionary/updateCustomPropertyType",deleteUrl:"core/dictionary/deleteCustomPropertyType",newModelFn:function(){return{Name:$scope.newParamType.name,ParentId:$scope.newParamType.parent?$scope.newParamType.parent.id:null,ValueType:$scope.newParamType.type.id,Format:$scope.newParamType.format}},afterCreateFn:function(){$scope.newParamType.clear()}}))}])}),define("text!core/states/events/eventsView.tpl.html",[],function(){return'<div class="container"\r\n     ng-controller="eventsCtrl"\r\n     filtered-list="{method: \'core/events/getEvents\'}"\r\n     initial-sorters="{ ActionTime: \'desc\'}">\r\n    <div class="row" id="content-wrapper">\r\n        <div class="col-xs-12">\r\n\r\n            <div filters-box="filter" sorters="sorters" meta="core/events/eventMetadata" group="Core.UserEvent"\r\n                 apply-enabled="applyEnabled" apply-filter="applyFilter" reset-filter="resetFilter"\r\n                 filter-applied="filterApplied" style="padding-top: 5px">\r\n                <ago-box-content>\r\n                    <form class="form form-horizontal">\r\n                        <div class="form-group">\r\n                            <label class="col-md-3 control-label control-label">{{ i18n.core.events.filter.title }}\r\n                            </label>\r\n                            <div class="col-md-9">\r\n                                <select ng-model="filter.simple.predefined" class="form-control">\r\n                                    <option value="all">{{i18n.core.events.filter.all}}</option>\r\n                                    <option value="unread">{{i18n.core.events.filter.unread}}</option>\r\n                                </select>\r\n                            </div>\r\n                        </div>\r\n                        <div class="form-group">\r\n                            <label class="col-md-3 control-label">{{ i18n.core.events.fields.action }}</label>\r\n                            <div class="col-md-9">\r\n                                <input ng-model="filter.simple.Action" class="form-control"\r\n                                       filter-node="{path: \'Action\', op:\'like\'}" />\r\n                            </div>\r\n                        </div>\r\n                        <div class="form-group">\r\n                            <label class="col-md-3 control-label">{{ i18n.core.events.fields.details }}</label>\r\n                            <div class="col-md-9">\r\n                                <input ng-model="filter.simple.ActionDetails" class="form-control"\r\n                                       filter-node="{path: \'ActionDetails\', op:\'like\'}" />\r\n                            </div>\r\n                        </div>\r\n                        <div class="form-group">\r\n                            <label class="col-md-3 control-label">{{ i18n.core.events.fields.initiator }}</label>\r\n                            <div class="col-md-9">\r\n                                <input ng-model="filter.simple.ActionUserName" class="form-control"\r\n                                       filter-node="{path: \'ActionUserName\', op:\'like\'}" />\r\n                            </div>\r\n                        </div>\r\n                        <div class="form-group">\r\n                            <label class="col-md-3 control-label">{{ i18n.core.events.fields.actionTime }}</label>\r\n                            <div class="col-md-9">\r\n                                <div class="col-xs-5" style="padding-left: 0; padding-right: 0">\r\n                                    <input type="text" ng-model="filter.simple.lDate" bs-datepicker\r\n                                           filter-node="{path: \'ActionTime\', op: \'>=\'}" class="form-control" />\r\n                                </div>\r\n                                <span class="col-xs-1" style="padding: 0; text-align: center">-</span>\r\n                                <div class="col-xs-5" style="padding-left: 0; padding-right: 0">\r\n                                    <input type="text" ng-model="filter.simple.rDate" bs-datepicker\r\n                                           filter-node="{path: \'ActionTime\', op: \'<\'}" class="form-control" />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div class="form-group">\r\n                            <label class="col-md-3 control-label">{{ i18n.core.events.fields.project }}</label>\r\n                            <div class="col-md-9">\r\n                                <input lookup="core/projects/lookupProjects" ng-model="filter.simple.Project"\r\n                                       filter-node="{path: \'ProjectCode\', op: \'=\'}" class="form-control" multiple />\r\n                            </div>\r\n                        </div>\r\n                    </form>\r\n                </ago-box-content>\r\n            </div>\r\n\r\n            <ago-box color="purple" large="true" header-class="{\'hidden-md\': true, \'hidden-lg\': true}">\r\n                <ago-box-title>\r\n                    <i class="fa icon-bar-chart"></i>\r\n                    {{ i18n.core.events.title }}\r\n                </ago-box-title>\r\n                <ago-box-content>\r\n                    <div class="box-toolbox box-toolbox-top">\r\n                        <ago-error-msg></ago-error-msg>\r\n\r\n                        <button class="btn btn-default" bindonce="i18n.core" bo-text="i18n.core.events.mark"\r\n                                ng-click="markAsRead()"></button>\r\n\r\n                        <refresher active="indication.loading" on-refresh="refreshList()"></refresher>\r\n                        <div class="clearfix"></div>\r\n                    </div>\r\n\r\n                    <div class="responsive-table">\r\n                        <div class="scrollable-area">\r\n                            <table class="table table-bordered">\r\n                                <thead>\r\n                                <tr>\r\n                                    <th class="col-xs-12 col-md-2">\r\n                                        <input type="checkbox" checker="items: \'models\', prop: \'selected\'" />\r\n                                        {{ i18n.core.events.fields.initiator }}\r\n                                    </th>\r\n                                    <th class="col-md-2 hidden-sm hidden-xs">{{ i18n.core.events.fields.item }}</th>\r\n                                    <th class="col-md-2 hidden-sm hidden-xs">{{ i18n.core.events.fields.action }}</th>\r\n                                    <th class="col-md-6 hidden-sm hidden-xs">{{ i18n.core.events.fields.details }}</th>\r\n                                </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                <tr ng-repeat="m in models" ng-class="{\'read\': m.IsRead, \'unread\': !m.IsRead}">\r\n                                    <td class="col-xs-12 col-md-2" style="white-space: normal">\r\n\r\n                                        <input type="checkbox" ng-if="!m.IsRead" ng-model="m.selected" class="pull-left" style="margin-right: 5px">\r\n\r\n                                        <div class="user hidden-xs hidden-sm">\r\n                                            <div class="avatar pull-left text-contrast">\r\n                                                <i class="lead icon-user" ng-if="m.ActionUserName && !m.ActionUserAvatar"></i>\r\n                                                <img width="23" height="23" ng-src="{{ m.ActionUserAvatar }}"\r\n                                                     ng-if="m.ActionUserAvatar"/>\r\n                                                <div class="sw-auth" ng-if="!m.ActionUserName">\r\n                                                    <div class="sw-img" style="width: 20px; height: 20px"></div>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div class="user-name action pull-left" style="margin-left: 5px">\r\n                                                <span class="text-contrast" ng-if="m.ActionUserName">\r\n                                                    {{ m.ActionUserName }}\r\n                                                </span>\r\n                                                <span class="text-contrast" ng-if="!m.ActionUserName">\r\n                                                    <i>{{ i18n.core.events.system }}</i>\r\n                                                </span>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div class="visible-xs visible-sm">\r\n                                            <div class="clearfix">\r\n                                                <a ng-href="{{ m.ProjectUrl }}" class="btn btn-sm pull-left"\r\n                                                   title="m.ProjectName">\r\n                                                    {{ m.ProjectName | textCut:25 }}\r\n                                                </a>\r\n                                                <a ng-href="{{ m.ItemUrl }}" class="btn btn-sm pull-left" style="margin-left: 5px">\r\n                                                    {{ m.ItemName }}\r\n                                                </a>\r\n                                                <em class="pull-left" style="margin-left: 5px">{{ m.Action }}</em>\r\n                                            </div>\r\n                                            <div class="clearfix" style="margin-top: 5px">\r\n                                                <span>{{ m.ActionDetails }}</span>\r\n                                            </div>\r\n                                            <div class="clearfix" style="margin-top: 5px">\r\n                                                <div class="user">\r\n                                                    <div class="avatar pull-left text-contrast">\r\n                                                        <i class="lead icon-user" ng-if="m.ActionUserName && !m.ActionUserAvatar"></i>\r\n                                                        <img width="23" height="23" ng-src="{{ m.ActionUserAvatar }}"\r\n                                                             ng-if="m.ActionUserAvatar"/>\r\n                                                        <div class="sw-auth" ng-if="!m.ActionUserName">\r\n                                                            <div class="sw-img" style="width: 20px; height: 20px"></div>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <div class="user-name action pull-left" style="margin-left: 5px">\r\n                                                        <span class="text-contrast" ng-if="m.ActionUserName">\r\n                                                            {{ m.ActionUserName }}\r\n                                                        </span>\r\n                                                        <span class="text-contrast" ng-if="!m.ActionUserName">\r\n                                                            <i>{{ i18n.core.events.system }}</i>\r\n                                                        </span>\r\n                                                    </div>\r\n                                                </div>\r\n\r\n                                                <ago-time-moment time="m.ActionTime" style="margin-left: 5px"></ago-time-moment>\r\n                                            </div>\r\n                                        </div>\r\n                                    </td>\r\n                                    <td class="col-md-2 hidden-sm hidden-xs" style="white-space: normal">\r\n                                        <a ng-href="{{ m.ItemUrl }}">\r\n                                            {{ m.ItemName }}\r\n                                        </a>\r\n                                        <a ng-href="#!/project/{{m.ProjectCode}}">\r\n                                            <small class="text-muted" style="display: block">{{ m.ProjectName }}</small>\r\n                                        </a>\r\n                                    </td>\r\n                                    <td class="col-md-2 hidden-sm hidden-xs" style="white-space: normal">\r\n                                        {{ m.Action }}\r\n                                        <ago-time-moment time="m.ActionTime"></ago-time-moment>\r\n                                    </td>\r\n                                    <td class="col-md-6 hidden-sm hidden-xs" style="white-space: normal">\r\n                                        {{ m.ActionDetails }}\r\n                                    </td>\r\n                                </tr>\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class="box-toolbox box-toolbox-bottom">\r\n                        <button type="button" class="btn btn-primary" ng-click="paging.page = paging.page + 1">{{ i18n.core.buttons.more }}</button>\r\n\r\n                        <refresher active="indication.loading" on-refresh="refreshList()"></refresher>\r\n                        <counter action="core/events/getEventsCount"></counter>\r\n                    </div>\r\n                </ago-box-content>\r\n            </ago-box>\r\n        </div>\r\n    </div>\r\n</div>\r\n'}),requirejs.s.contexts._.nextTick=function(f){f()},require(["css"],function(css){css.addBuffer("core/states/events/eventsView.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,define("core/states/events/eventsView",["../../moduleDef","angular","text!./eventsView.tpl.html","css!./eventsView.css"],function(module,angular,template){module.config(["$stateProvider",function($stateProvider){$stateProvider.state({name:"page.projects.events",url:"/projects/events",template:template,onEnter:function($rootScope){$rootScope.breadcrumbs.push({name:"core.events.title",url:"page.projects.events"})},onExit:function($rootScope){$rootScope.breadcrumbs.splice($rootScope.breadcrumbs.length-1,1)}})}]).controller("eventsCtrl",["$scope","apinetService","$rootScope","$q","$controller",function($scope,apinetService,$rootScope,$q,$controller){angular.extend(this,$controller("ErrorHandlingCtrl",{$scope:$scope})),$scope.isFirstRequest=!0,$scope.initialRequestParams={predefined:"unread"},$scope.$on("resetFilter",function(){var defaultPredefined=$scope.isFirstRequest?"unread":"all";$scope.filterApplied=$scope.isFirstRequest,$scope.isFirstRequest=!1,$scope.filter.simple={predefined:defaultPredefined},$scope.requestParams.predefined=defaultPredefined}),$scope.$watch("filter.simple.predefined",function(value){$scope.requestParams.predefined=value||"all"},!0),$scope.onCacheState=function(state){angular.extend(state,{isFirstRequest:$scope.isFirstRequest,requestParams:$scope.requestParams})},$scope.markAsRead=function(){var params={method:"core/events/markAsRead"},ids=[];angular.forEach($scope.models,function(m){m.selected&&m.selected===!0&&ids.push(m.Id)}),ids.length>0&&(params.ids=ids),apinetService.action(params).then(function(){$rootScope.$emit("event:markAsRead"),$scope.refreshList()},$scope.handleException)},$rootScope.$on("event:fired",function(e,arg){$scope.models.unshift(arg)})}])}),define("core/states",["./states/commonMixins","./states/page","./states/userProfile","./states/project","./states/projects","./states/projects/processing","./states/projects/accessDenied","./states/projects/projectsList","./states/projects/projectCreate","./states/projects/register","./states/reporting/templates","./states/reporting/reports","./states/reporting/projectReports","./states/tags/tags","./states/custom-props/customPropTypes","./states/events/eventsView"],function(){}),define("core/filters",["./moduleDef","angular"],function(module,angular){module.filter("yesNo",["i18n",function(i18n){return function(value,settings){return i18n.msg(value?settings&&settings.yes?settings.yes:"core.labels.yes":settings&&settings.no?settings.no:"core.labels.no")}}]).filter("yesNoEmpty",["i18n",function(i18n){return function(value){return i18n.msg(angular.isDefined(value)&&null!=value?value===!0?"core.labels.yes":"core.labels.no":"core.labels.none")}}]).filter("joinBy",function(){return function(input,delimiter,prop){return input=input||[],prop&&(input=input.map(function(v){return v[prop]})),input.join(delimiter||",")}}).filter("textCut",function(){return function(input,max){if(!input)return input;var result=angular.isString(input)?input:input.toString();return max=max||35,result.length<=max?result:result.substring(0,max-1)+""}}).filter("reverse",function(){return function(items){return items?items.slice().reverse():items}}).filter("unique",function(){return function(arr,prop,selector){var i,o={},l=arr.length,r=[];for(i=0;l>i;i++)o[arr[i][prop]]=selector&&o[arr[i][prop]]?selector(o[arr[i][prop]],arr[i]):arr[i];for(i in o)r.push(o[i]);return r}}).filter("numCut",function(){return function(input){if(!input)return input;var num=parseInt(input);return 10>num?num:"9+"}})}),requirejs.s.contexts._.nextTick=function(f){f()},require(["css"],function(css){css.addBuffer("core/assets/nav-fix.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,requirejs.s.contexts._.nextTick=function(f){f()},require(["css"],function(css){css.addBuffer("core/assets/form.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,requirejs.s.contexts._.nextTick=function(f){f()},require(["css"],function(css){css.addBuffer("core/assets/list.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,requirejs.s.contexts._.nextTick=function(f){f()},require(["css"],function(css){css.addBuffer("core/assets/bootstrap-hidden-display-fix.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,requirejs.s.contexts._.nextTick=function(f){f()},require(["css"],function(css){css.addBuffer("core/assets/ios-fixed-fix.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,requirejs.s.contexts._.nextTick=function(f){f()},require(["css"],function(css){css.addBuffer("core/assets/bootstrap-modal-scroll-fix.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,requirejs.s.contexts._.nextTick=function(f){f()},require(["css"],function(css){css.addBuffer("core/assets/select2-fix.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,requirejs.s.contexts._.nextTick=function(f){f()},require(["css"],function(css){css.addBuffer("core/assets/badge-fix.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,define("core/nls/en/angular",["angular"],function(angular){angular.module("ngLocale_en",[],["$provide",function($provide){var PLURAL_CATEGORY={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};$provide.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a","short":"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,macFrac:0,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,macFrac:0,maxFrac:2,minFrac:2,minInt:1,negPre:"(",negSuf:")",posPre:"",posSuf:""}]},id:"en",pluralCat:function(n){return 1==n?PLURAL_CATEGORY.ONE:PLURAL_CATEGORY.OTHER
}})}])}),define("core/nls/ru/angular",["angular"],function(angular){angular.module("ngLocale_ru",[],["$provide",function($provide){var PLURAL_CATEGORY={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};$provide.value("$locale",{DATETIME_FORMATS:{AMPMS:[" "," "],DAY:["","","","","","",""],MONTH:["","","","","","","","","","","",""],SHORTDAY:["","","","","","",""],SHORTMONTH:[".",".","",".","","","",".",".",".",".","."],fullDate:"EEEE, d MMMM y''.",longDate:"d MMMM y''.",medium:"dd.MM.yyyy H:mm:ss",mediumDate:"dd.MM.yyyy",mediumTime:"H:mm:ss","short":"dd.MM.yy H:mm",shortDate:"dd.MM.yy",shortTime:"H:mm"},NUMBER_FORMATS:{CURRENCY_SYM:".",DECIMAL_SEP:",",GROUP_SEP:"",PATTERNS:[{gSize:3,lgSize:3,macFrac:0,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,macFrac:0,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""}]},id:"ru",pluralCat:function(n){return n%10==1&&n%100!=11?PLURAL_CATEGORY.ONE:n==(0|n)&&n%10>=2&&4>=n%10&&(12>n%100||n%100>14)?PLURAL_CATEGORY.FEW:n%10==0||n==(0|n)&&n%10>=5&&9>=n%10||n==(0|n)&&n%100>=11&&14>=n%100?PLURAL_CATEGORY.MANY:PLURAL_CATEGORY.OTHER}})}])}),function(factory){"function"==typeof define&&define.amd?define("core/nls/ru/moment",["moment"],factory):"object"==typeof exports?module.exports=factory(require("../moment")):factory(window.moment)}(function(moment){function plural(word,num){var forms=word.split("_");return num%10===1&&num%100!==11?forms[0]:num%10>=2&&4>=num%10&&(10>num%100||num%100>=20)?forms[1]:forms[2]}function relativeTimeWithPlural(number,withoutSuffix,key){var format={mm:"__",hh:"__",dd:"__",MM:"__",yy:"__"};return"m"===key?withoutSuffix?"":"":number+" "+plural(format[key],+number)}function monthsCaseReplace(m,format){var months={nominative:"___________".split("_"),accusative:"___________".split("_")},nounCase=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(format)?"accusative":"nominative";return months[nounCase][m.month()]}function monthsShortCaseReplace(m,format){var monthsShort={nominative:"___________".split("_"),accusative:"___________".split("_")},nounCase=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(format)?"accusative":"nominative";return monthsShort[nounCase][m.month()]}function weekdaysCaseReplace(m,format){var weekdays={nominative:"______".split("_"),accusative:"______".split("_")},nounCase=/\[ ?[] ?(?:|)? ?\] ?dddd/.test(format)?"accusative":"nominative";return weekdays[nounCase][m.day()]}return moment.lang("ru",{months:monthsCaseReplace,monthsShort:monthsShortCaseReplace,weekdays:weekdaysCaseReplace,weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),monthsParse:[/^/i,/^/i,/^/i,/^/i,/^[|]/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i],longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., LT",LLLL:"dddd, D MMMM YYYY ., LT"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",lastDay:"[ ] LT",nextWeek:function(){return 2===this.day()?"[] dddd [] LT":"[] dddd [] LT"},lastWeek:function(){switch(this.day()){case 0:return"[ ] dddd [] LT";case 1:case 2:case 4:return"[ ] dddd [] LT";case 3:case 5:case 6:return"[ ] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:relativeTimeWithPlural,mm:relativeTimeWithPlural,h:"",hh:relativeTimeWithPlural,d:"",dd:relativeTimeWithPlural,M:"",MM:relativeTimeWithPlural,y:"",yy:relativeTimeWithPlural},meridiem:function(hour){return 4>hour?"":12>hour?"":17>hour?"":""},ordinal:function(number,period){switch(period){case"M":case"d":case"DDD":return number+"-";case"D":return number+"-";case"w":case"W":return number+"-";default:return number}},week:{dow:1,doy:7}})}),define("core/nls/en/module",["../../moduleDef","moment","angular"],function(module,moment,angular){module.service("core/nls/angular/en",["$locale",function($locale){return function(){angular.extend($locale,angular.injector(["ngLocale_en"]).get("$locale")),$locale.DATETIME_FORMATS.ago_date="MM/dd/yyyy",$locale.DATETIME_FORMATS.ago_datetime="MM/dd/yyyy HH:mm",$locale.DATETIME_FORMATS.ago_datelongtime="MM/dd/yyyy HH:mm:ss",$locale.DATETIME_FORMATS.ago_startWeek=0}}]),module.service("core/nls/moment/en",function(){return function(){moment.lang("en")}}),module.service("core/nls/module/en",["i18n",function(i18n){return function(){i18n.addMessages("core",{roles:{title:"Roles ({{role}})",nothing:"nothing"},locale:{label:"Language",ru:"Russian",en:"English"},labels:{yes:"Yes",no:"No",loading:"Loading",presentTime:"present time",none:"None",now:"Now"},placeholders:{replacementItem:"Substitute existing references with: (optional)"},buttons:{ok:"Ok",cancel:"Cancel",clear:"Clear",apply:"Apply",save:"Save",add:"Add","new":"New",load:"Load","delete":"Delete",deleteSelected:"Delete selected",edit:"Edit",more:"More",refresh:"Refresh",back:"Back",today:"Today",watch:"Subscribe",unwatch:"Unsubscribe",rollback:"Rollback",send:"Send"},fields:{name:"Name",fullName:"Full name",description:"Description",type:"Type",creationTime:"Creation time",lastChangeTime:"Last changed",creator:"Author",editor:"Editor",viewOrder:"Seq.#",predecessor:"Predecessor",ou:"OU",icon:"Icon",size:"Size",customProperties:{type:"Parameter",value:"Value"}},sorting:{ascending:"Ascending",descending:"Descending",title:"Sorting",availableFields:"Available fields",sortingFields:"Sorting fields",removeField:"Remove field"},errors:{title:"Error",unknown:"Unknown error",notFound:"Unknown server url (not found)",unavailable:"Server unavailable",general:"General server error",integerInRange:"Must be integer in range {{range}}",requiredField:"Required field",invalidFormat:"Invalid value format",min:"Must be greater than {{num}}",nothingToDelete:"Record for deletion not found (refresh page)",invalidProjectTitle:"Project not found",invalidProject:"Requested project not exist",accessDeniedTitle:"Access denied",accessDenied:"You does not have sufficient rigths to access this view",invalidRouteTitle:"Requested url not found",invalidRoute:"Requested url does not exist. Please, go back or start from home page",downloadError:"Download of file '{{ file }}' failed"},maintenance:{sheduled:"Maintenance planned for this project from {{startAt | date:'ago_datetime'}} to {{finishAt | date:'ago_datetime'}}",progress:"Maintenance in progress. Project in read-only mode. Finish planned at {{finishAt | date:'ago_datetime'}}"},confirm:{"delete":{title:"Confirm deletion",records:"Are you really want to delete this records?",record:"Are you really want to delete this record?"}},menu:{user:{currentUser:"User",profile:"Profile",messages:"Messages",reports:"Reports",system:"System",login:"Login"},dictionaries:"Dictionaries"},auth:{signInTitle:"Sign in",reconnectTitle:"Reconnect",autoSignIn:"Signing in...",credentials:{legend:"Please select login type"},buttons:{signIn:"Sign in",signOut:"Sign out",signInFacebook:"Facebook",signInTwitter:"Twitter",signInStructuredWay:"StructuredWay",google:"Google",demo:"Sign in as demo user",reconnect:"Reconnect"},reason:{notAuthorized:"You do not have the necessary access permissions.  Do you want to login as someone else?",notAuthenticated:"You must be logged in to access this part of the application.",notConnected:"Connection to server lost. Try again later."},errors:{invalidCredentials:"Login failed.  Please check your credentials and try again.",serverError:"There was a problem with authenticating: {{exception}}.",timedout:"Authentication timed out after 2 minutes.",canceled:"User cancel login process",noUserInfo:"Server did not return user info"}},filters:{title:"Filter",simple:"Simple",complex:"Complex",user:"Props",favorites:"Favorites",displayedRecords:"Currently showing: {{ count }} records",applyRequired:"Apply filter changes for records display",placeholders:{typeNode:"Property type",selectFavorite:"Select filter"},ops:{exists:"EXISTS",like:"CONTAINS",and:"AND",or:"OR",not:{exists:"NOT EXISTS",like:"NOT CONTAINS",and:"AND NOT"}},buttons:{newRootNode:"Add root node",rootNode:"root node",newNode:"Add",editNode:"Edit",deleteNode:"Delete"},errors:{unexpected:{op:"No operator allowed for this node type",value:"No value allowed for this node type",child:"No child nodes allowed for this node type"},missing:{op:"Operator is not specified",value:"Value is not specified"},invalid:{op:"Invalid operator"},expected:{guid:"Value must be unique identifier (Guid)","int":"Value must be integer","float":"Value must be number",bool:"Value must be boolean",date:"Value must be valid date","enum":"Value must be in list of allowed values"}}},application:{creator:"Company",landing:"Company"},profile:{title:"User profile",selectTimeZone:"Select time zone...",fields:{firstName:"First name",lastName:"Last name",email:"Email",tz:"Time zone",digestTime:"Send digests at"}},reporting:{selector:"Reports",title:"Report generation",report:"Select report",priority:{title:"Select priority type",byUser:"By project participant",byDate:"By date"},result:"Report file name (optional)",run:"Generate",viewAllProj:"View all project reports",viewAll:"View all reports",running:"Running reports",unread:"Unread reports",position:"Position in work queue",templates:{title:"Report templates",fields:{size:"File size"}},reports:{title:"User reports",fields:{state:"State",startedAt:"Started at",completedAt:"Completed at",duration:"Duration",progress:"Progress",errorMsg:"Error text",errorDetails:"Error details",project:"Project",type:"Report type"},duration:{hours:{one:"hour",few:"hours",many:"hours",other:"hours"},minutes:{one:"minute",few:"minutes",many:"minutes",other:"minutes"},seconds:"sec"}}},upload:{placeholder:"Drop files to upload here",addFiles:"Add files..."},tags:{addTag:"Add new tag",removeTag:"Remove tag",newTag:"Enter new tag name",searchTag:"Tag..."},activities:{title:"Activity",empty:"No activity found",moreUsers:"(+{{num}} more)",moreChanges:"(+{{num}} more)",mark:"Mark as read",filters:{period:{title:"Activity period",all:"All time","new":"New",today:"Today",yesterday:"Yesterday",thisWeek:"This week",pastWeek:"Past week",thisMonth:"This month",pastMonth:"Past month",period:"Date period"},dates:{from:"From",to:"to"}}},customPropTypes:{title:"User property types",fields:{valueType:"Value type",format:"View format"},placeholders:{parent:"Select predecessor",type:"Select value type"}},customProps:{title:"User properties",empty:"No user properties",placeholders:{selectType:"select type",string:"string",number:"number",date:"date"},numFormat:"Expected format 0##[.0##]"},statusHistory:{title:"Status history",fields:{status:"Status",author:"Set by",effectivePeriod:"Effective period",duration:"Duration"},period:"from {{start}} to {{finish}}",duration:{days:{one:"day",few:"days",many:"days",other:"days"},hours:{one:"hour",few:"hours",many:"hours",other:"hours"},minutes:"min"}},events:{title:"User events",mark:"Mark as read",fields:{action:"Action",details:"Details",initiator:"Initiator",actionTime:"Time",project:"Project",item:"Item"},filter:{title:"State",all:"All events",unread:"Unread events"},system:"System"},viewMode:{list:"List",gantt:"Chart",calendar:"Calendar",cards:"Cards"},calendar:{title:"Calendar",fields:{start:"Start",finish:"Finish"},buttons:{mode:"Calendar mode",today:"Today",month:"Month",basicDay:"Day",basicWeek:"Week",agendaWeek:"Agenda week",agendaDay:"Agenda day"}},expiration:{already:"Expired {{days}} {{daysText}}",will:"Will be expired {{days}} {{daysText}}"},duration:{days:{one:"day",few:"days",many:"days",other:"days"},hours:{one:"hour",few:"hours",many:"hours",other:"hours"},minutes:"min"},timespan:{day:"d",hour:"h",minute:"m",placeholder:"2d 3h 35m"}}),i18n.addMessages("projects",{fields:{code:"Project code","public":"Public project",status:"Status",tags:"Tags",db:"Server"},list:{title:"Projects",buttons:{add:"New project"},filters:{participation:{label:"Projects",all:"Any",me:"My"}}},create:{title:"New project",legend:"Creating new project",tickets:"Tickets left",placeholders:{type:"Select project type",db:"Select db instance"}},statuses:{title:"Statuses dictionary",buttons:{add:"New status"}},tags:{type:"Project tags",title:"Tags",placeholders:{"new":"New tag"}},settings:{title:"Project settings",publicTitle:"Yes (visible for all)",privateTitle:"No (visible only for members)",tabs:{overview:"Overview",members:"Members",invitations:"Invitations",templates:"Report templates"}},members:{title:"Members",placeholders:{newMember:"Select new member",ou:"Select OU...",role:"Select role...",roles:"Select roles..."},fields:{user:"Full name",suffix:"Name suffix",active:"Active",ou:"OU",role:"Role",roles:"Roles",current:"Current role and OU"},changeCurrent:"Change role and OU"},ous:{title:"Organization units",shared:"Shared OU's",placeholders:{name:"Enter OU name..."}},register:{title:"Process invitation to project",success:"Granted access to project",fail:"Invitation refused"},invitations:{title:"Invitations to project",filter:{custom:"By state",predefined:{all:"All",waiting:"Waiting",accepted:"Accepted",refused:"Refused"}},fields:{email:"Email",content:"Content",accepted:"Accepted",ouAndRole:"Initial OU and role",member:"Created member",subject:"Subject",body:"Body",sent:"Sent",sentAt:"Sent at"}}})}}])}),define("core/nls/ru/module",["../../moduleDef","moment","angular"],function(module,moment,angular){module.service("core/nls/angular/ru",["$locale",function($locale){return function(){angular.extend($locale,angular.injector(["ngLocale_ru"]).get("$locale")),$locale.DATETIME_FORMATS.ago_date="dd.MM.yyyy",$locale.DATETIME_FORMATS.ago_datetime="dd.MM.yyyy HH:mm",$locale.DATETIME_FORMATS.ago_datelongtime="dd.MM.yyyy HH:mm:ss",$locale.DATETIME_FORMATS.ago_startWeek=1}}]),module.service("core/nls/moment/ru",function(){return function(){moment.lang("ru")}}),module.service("core/nls/module/ru",["i18n",function(i18n){return function(){i18n.addMessages("core",{roles:{title:" ({{role}})",nothing:""},locale:{label:"",ru:"",en:""},labels:{yes:"",no:"",loading:" ",presentTime:" ",none:"",now:""},placeholders:{replacementItem:"   : ()"},buttons:{ok:"Ok",cancel:"",clear:"",apply:"",save:"",add:"","new":"",load:"","delete":"",deleteSelected:" ",edit:"",more:"",refresh:"",back:"",today:"",watch:"",unwatch:"",rollback:"",send:""},fields:{name:"",fullName:" ",description:"",type:"",creationTime:"",lastChangeTime:"",creator:"",editor:"",viewOrder:" /",predecessor:"",ou:"",icon:"",size:"",customProperties:{type:"",value:""}},sorting:{ascending:" ",descending:" ",title:"",availableFields:" ",sortingFields:" ",removeField:" "},errors:{title:"",unknown:" ",notFound:"    ",unavailable:" ",general:"  ",integerInRange:"      {{range}}",requiredField:" ",invalidFormat:"  ",min:"    {{num}}",nothingToDelete:"     ( )",invalidProjectTitle:"  ",invalidProject:"   ",accessDeniedTitle:" ",accessDenied:"      ",invalidRouteTitle:"   ",invalidRoute:"     . ,       ",downloadError:"  '{{ file }}'   "},maintenance:{sheduled:"      {{startAt | date:'ago_datetime'}}  {{finishAt | date:'ago_datetime'}}",progress:"      \"  \".    {{finishAt | date:'ago_datetime'}}"},confirm:{"delete":{title:" ",records:"    ?",record:"    ?"}},menu:{user:{currentUser:"",profile:"",messages:"",reports:"",system:"",login:""},dictionaries:""},auth:{signInTitle:"",reconnectTitle:"",autoSignIn:" ...",credentials:{legend:"  "},buttons:{signIn:"",signOut:"",signInFacebook:"Facebook",signInTwitter:"Twitter",signInStructuredWay:"StructuredWay",google:"Google",demo:"   ",reconnect:""},reason:{notAuthorized:"   .       ?",notAuthenticated:"   ,      .",notConnected:"   ,    ."},errors:{invalidCredentials:"    .   ,    .",serverError:"     : {{exception}}.",timedout:"     2  .",canceled:"   ",noUserInfo:"     "}},filters:{title:"",simple:"",complex:"",user:" ",favorites:"",displayedRecords:"  : {{ count }}",applyRequired:"  ,   ",placeholders:{typeNode:" ",selectFavorite:" "},ops:{exists:"",like:"",and:"",or:"",not:{exists:" ",like:" ",and:" "}},buttons:{newRootNode:"  ",rootNode:" ",newNode:"",editNode:"",deleteNode:""},errors:{unexpected:{op:"     ",value:"     ",child:"      "},missing:{op:"  ",value:"  "},invalid:{op:" "},expected:{guid:"    (Guid)","int":"   ","float":"   ",bool:'   ""  ""',date:"    ","enum":"     "}}},application:{creator:"",landing:""},profile:{title:" ",selectTimeZone:"  ...",fields:{firstName:"",lastName:"",email:"  ",tz:" ",digestTime:"  "}},reporting:{selector:"",title:" ",report:" ",priority:{title:"   ",byUser:"  ",byDate:" "},result:"   ()",run:"",viewAllProj:"  ",viewAll:" ",running:" ",unread:" ",position:"   ",templates:{title:" ",fields:{size:" "}},reports:{title:" ",fields:{state:"",startedAt:"",completedAt:"",duration:" ",progress:"% ",errorMsg:" ",errorDetails:"   ",project:"",type:" "},duration:{hours:{one:"",few:"",many:"",other:""},minutes:{one:"",few:"",many:"",other:""},seconds:""}}},upload:{placeholder:"    ",addFiles:" ..."},tags:{addTag:" ",removeTag:" ",newTag:"   ",searchTag:"..."},activities:{title:"",empty:"  ",moreUsers:"(+{{num}} )",moreChanges:"(+{{num}} )",mark:"",filters:{period:{title:" ",all:"","new":"",today:"",yesterday:"",thisWeek:"  ",pastWeek:"  ",thisMonth:"  ",pastMonth:"  ",period:"  "},dates:{from:"",to:""}}},customPropTypes:{title:"  ",fields:{valueType:" ",format:" "},placeholders:{parent:" ",type:"  "}},customProps:{title:". ",empty:"  ",placeholders:{selectType:" ",string:"",number:"",date:""},numFormat:"  0##[.0##]"},statusHistory:{title:" ",fields:{status:"",author:"",effectivePeriod:" ",duration:""},period:" {{start}}  {{finish}}",duration:{days:{one:"",few:"",many:"",other:""},hours:{one:"",few:"",many:"",other:""},minutes:""}},events:{title:"",mark:"",fields:{action:"",details:"",initiator:"",actionTime:"",project:"",item:""},filter:{title:"",all:" ",unread:" "},system:""},viewMode:{list:"",gantt:"",calendar:"",cards:""},calendar:{title:"",fields:{start:"",finish:""},buttons:{mode:" ",today:"",month:"",basicDay:"",basicWeek:"",agendaWeek:" ",agendaDay:" "}},expiration:{already:" {{days}} {{daysText}}",will:"   {{days}} {{daysText}}"},duration:{days:{one:"",few:"",many:"",other:""},hours:{one:"",few:"",many:"",other:""},minutes:""},timespan:{day:"",hour:"",minute:"",placeholder:"2 3 35"}}),i18n.addMessages("projects",{fields:{code:" ","public":" ",status:"",tags:"",db:""},list:{title:"",buttons:{add:" "},filters:{participation:{label:"",all:"",me:""}}},create:{title:" ",legend:"  ",tickets:" ",placeholders:{type:"  ",db:"  "}},statuses:{title:" ",buttons:{add:" "}},tags:{type:" ",title:"",placeholders:{"new":" "}},settings:{title:" ",publicTitle:" ( )",privateTitle:" (  )",tabs:{overview:"",members:"",invitations:"",templates:" "}},members:{title:"",placeholders:{newMember:" ",ou:" ...",role:" ...",roles:" ..."},fields:{user:"",suffix:"",active:"",ou:"",role:"",roles:"",current:"   "},changeCurrent:"   "},ous:{title:" ",shared:" ",placeholders:{name:"  ..."}},register:{title:"   ",success:"   ",fail:" "},invitations:{title:"  ",filter:{custom:" ",predefined:{all:"",waiting:" ",accepted:"",refused:""}},fields:{email:"",content:"",accepted:"",ouAndRole:"  ",member:" ",subject:"",body:"",sent:"",sentAt:" "}}})}}])}),define("core/nls/module",["core/nls/en/angular","core/nls/ru/angular","core/nls/ru/moment","core/nls/en/module","core/nls/ru/module"]),define("core/module",["module","./moduleDef","angular","moment","jquery-migrate","jquery-ui","./services","./directives","./states","./filters","css!./assets/nav-fix.css","css!./assets/form.css","css!./assets/list.css","css!./assets/bootstrap-hidden-display-fix.css","css!./assets/ios-fixed-fix.css","css!./assets/bootstrap-modal-scroll-fix.css","css!./assets/select2-fix.css","css!./assets/badge-fix.css","./nls/module"],function(requireModule,module,angular,moment){return module.constant("ProjectStatuses",{New:"New",Doing:"Doing",Done:"Done",Discarded:"Discarded",Closed:"Closed"}).constant("ProjectStatusViewSettings",{New:{"class":"btn-danger",icon:"icon-time"},Doing:{"class":"btn-primary",icon:"icon-cogs"},Done:{"class":"btn-warning",icon:"icon-ok"},Discarded:{"class":"btn-inverse",icon:"icon-pause"},Closed:{"class":"btn-success",icon:"icon-beer"}}).config(["$datepickerProvider","$timepickerProvider",function($datepickerProvider,$timepickerProvider){angular.extend($datepickerProvider.defaults,{dateType:"iso",dateFormat:"ago_date",autoclose:!0,container:"body",iconLeft:"icon-chevron-left",iconRight:"icon-chevron-right",useNative:!0}),angular.extend($timepickerProvider.defaults,{autoclose:!1,container:"body",iconUp:"icon-chevron-up",iconDown:"icon-chevron-down",useNative:!0})}]).config(["$uiViewScrollProvider",function($uiViewScroll){$uiViewScroll.useAnchorScroll()}]).constant("DEFAULT_PAGE_SIZE",20).constant("startupPath",{url:""}).constant("lazyLoadCyclingDefence",{key:"ago.lazyLoadCyclingDefence",test:function(url,storage){if(!url)return!0;var data=storage.getItem(this.key);return data=data?angular.fromJson(data):{url:null,count:0},data.url!==url?(data.url=url,data.count=0,storage.setItem(this.key,angular.toJson(data)),!0):(data.count++,storage.setItem(this.key,angular.toJson(data)),data.count<1)}}).config(["$locationProvider","$urlRouterProvider","startupPath","lazyLoadCyclingDefence",function($locationProvider,$urlRouterProvider,startupPath,lazyLoadCyclingDefence){$locationProvider.hashPrefix("!"),$urlRouterProvider.otherwise(function($injector,$location){var $window=$injector.get("$window");if(!$window.localStorage)throw new Error("Can not work without localStorage");if(!$window.sessionStorage)throw new Error("Can not work without sessionStorage");if(!lazyLoadCyclingDefence.test($location.url(),$window.sessionStorage))return $injector.get("errorPageService").setError("core.errors.invalidRoute","core.errors.invalidRouteTitle"),void $injector.get("$state").go("page.projects.accessDenied");startupPath.url=$location.absUrl();var path=($location.url(),$location.path().toLowerCase()),parts=path.split("/");if(parts.length&&(parts[0]||parts.shift(),"project"===parts[0]&&parts[1])){var projectInfoService=$injector.get("projectInfoService"),$state=$injector.get("$state"),$rootScope=$injector.get("$rootScope");return $rootScope.breadcrumbsHidden=!0,projectInfoService.projectInfo(parts[1],!0).then(function(){$window.location.reload()},function(){$rootScope.breadcrumbsHidden=!1,$state.go("page.projects.projectsList")}),path}return"/projects/listview"})}]).run(["i18n",function(i18n){i18n.registerLocalizationModule("core/nls/angular"),i18n.registerLocalizationModule("core/nls/moment"),i18n.registerLocalizationModule("core/nls/module"),i18n.sync()}]).run(["$rootScope","$state","$stateParams","i18n","apinetService","$window",function($rootScope,$state,$stateParams,i18n,apinetService,$window){$rootScope.$state=$state,$rootScope.$stateParams=$stateParams,$rootScope.moment=moment;var startupLang="en";if($window.isCordova&&$window.navigator.globalization.getPreferredLanguage(function(lang){var l=-1===lang.value.indexOf("-")?lang.value:lang.value.substring(0,lang.value.indexOf("-"));l="English"===l||"en"===l?"en":"ru"===l||"Russian"===l||""===l?"ru":"en",startupLang=l}),$window.document.cookie)for(var parts=window.document.cookie.split("; "),i=0;i<parts.length;i++)if(parts[i].indexOf("currentLocale")>=0){startupLang=parts[i].split("=")[1];break}apinetService.action({method:"core/users/getLocale"}).then(function(locale){i18n.setLocale(locale&&locale.length?locale:startupLang)},function(){i18n.setLocale(startupLang)})}])}),requirejs.s.contexts._.nextTick=function(f){f()},require(["css"],function(css){css.setBuffer('.ago-oneline {\r\n    padding-left: 0 !important;\r\n    padding-right: 0 !important;\r\n    width: 100%\r\n}\r\n\r\n.ago-oneline-task {\r\n    margin-top: 10px;\r\n    white-space: nowrap;\r\n}\r\n\r\n.ago-oneline-task:first-child {\r\n    margin-top: 0;\r\n}\r\n\r\n.ago-oneline-task .ago-oneline-actions {\r\n    vertical-align: top;\r\n}\r\n\r\n.ago-oneline-task .ago-oneline-toggle {\r\n    float: left;\r\n}\r\n\r\n.ago-oneline-task div.data {\r\n    display: inline-block;\r\n}\r\n\r\n.ago-oneline-task .ago-oneline-content {\r\n    float: left;\r\n    white-space: nowrap;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    vertical-align: middle;\r\n    line-height: 30px;\r\n    margin-left: 5px;\r\n}\r\n\r\n.ago-oneline-task .ago-counter .ch3 {\r\n    min-width: 3em;\r\n    max-width: 3em;\r\n    overflow: hidden;\r\n    display: inline-block;\r\n    vertical-align: middle;\r\n}\r\n\r\n.ago-oneline-task .ago-counter span {\r\n    min-width: 2em;\r\n    max-width: 2em;\r\n    overflow: hidden;\r\n    display: inline-block;\r\n    vertical-align: middle;\r\n}\r\n\r\n.ago-counters-wrapper {\r\n    float: right;\r\n    vertical-align: middle;\r\n    line-height: 30px;\r\n}\r\n\r\n@media (max-width: 767px) {\r\n    .ago-oneline-task .ago-oneline-toggle {\r\n        float: none;\r\n    }\r\n\r\n    .ago-oneline-task .ago-oneline-content {\r\n        display: inline-block;\r\n        float: none;\r\n    }\r\n\r\n    .ago-counters-wrapper {\r\n        display: block;\r\n        float: none;\r\n        margin-top: 10px;\r\n    }\r\n\r\n    .ago-counters {\r\n        float: right;\r\n    }\r\n}\r\n.task {\r\n    margin-bottom: 5px;\r\n}\r\n\r\n.task:last-child {\r\n    margin-bottom: 0;\r\n}\r\n\r\n.task .lgap {\r\n    margin-left: 5px;\r\n}\r\n\r\n.task .tgap {\r\n    margin-top: 3px;\r\n}\r\n\r\n.fc td.fc-header-left {\r\n    position: relative;\r\n    text-align: left;\r\n    right: 0;\r\n    top: 0;\r\n    width: auto;\r\n}\r\n\r\n/*fix for flatty theme, that override our status classes*/\r\n.fc-content .fc-event.label-primary .fc-event-inner {\r\n    background-color: #00acec;\r\n}\r\n.fc-content .fc-event.label-primary[href] .fc-event-inner {\r\n    background-color: #00acec;\r\n}\r\n\r\n.fc-content .fc-event.label-default .fc-event-inner {\r\n    background-color: #999999;\r\n}\r\n.fc-content .fc-event.label-default[href] .fc-event-inner {\r\n    background-color: #999999;\r\n}\r\n\r\n.fc-content .fc-event {\r\n    border-color: #777;\r\n}\r\n.task {\r\n    margin-bottom: 5px;\r\n}\r\n\r\n.task:last-child {\r\n    margin-bottom: 0;\r\n}\r\n\r\n.task .lgap {\r\n    margin-left: 5px;\r\n}\r\n\r\n.task .tgap {\r\n    margin-top: 3px;\r\n}\r\n\r\n.fc td.fc-header-left {\r\n    position: relative;\r\n    text-align: left;\r\n    right: 0;\r\n    top: 0;\r\n    width: auto;\r\n}\r\n\r\n/*fix for flatty theme, that override our status classes*/\r\n.fc-content .fc-event.label-primary .fc-event-inner {\r\n    background-color: #00acec;\r\n}\r\n.fc-content .fc-event.label-primary[href] .fc-event-inner {\r\n    background-color: #00acec;\r\n}\r\n\r\n.fc-content .fc-event.label-default .fc-event-inner {\r\n    background-color: #999999;\r\n}\r\n.fc-content .fc-event.label-default[href] .fc-event-inner {\r\n    background-color: #999999;\r\n}\r\n\r\n.fc-content .fc-event {\r\n    border-color: #777;\r\n}/*!\n * FullCalendar v1.6.6 Stylesheet\n * Docs & License: http://arshaw.com/fullcalendar/\n * (c) 2013 Adam Shaw\n */\n\n\n.fc {\n	direction: ltr;\n	text-align: left;\n	}\n	\n.fc table {\n	border-collapse: collapse;\n	border-spacing: 0;\n	}\n	\nhtml .fc,\n.fc table {\n	font-size: 1em;\n	}\n	\n.fc td,\n.fc th {\n	padding: 0;\n	vertical-align: top;\n	}\n\n\n\n/* Header\n------------------------------------------------------------------------*/\n\n.fc-header td {\n	white-space: nowrap;\n	}\n\n.fc-header-left {\n	width: 25%;\n	text-align: left;\n	}\n	\n.fc-header-center {\n	text-align: center;\n	}\n	\n.fc-header-right {\n	width: 25%;\n	text-align: right;\n	}\n	\n.fc-header-title {\n	display: inline-block;\n	vertical-align: top;\n	}\n	\n.fc-header-title h2 {\n	margin-top: 0;\n	white-space: nowrap;\n	}\n	\n.fc .fc-header-space {\n	padding-left: 10px;\n	}\n	\n.fc-header .fc-button {\n	margin-bottom: 1em;\n	vertical-align: top;\n	}\n	\n/* buttons edges butting together */\n\n.fc-header .fc-button {\n	margin-right: -1px;\n	}\n	\n.fc-header .fc-corner-right,  /* non-theme */\n.fc-header .ui-corner-right { /* theme */\n	margin-right: 0; /* back to normal */\n	}\n	\n/* button layering (for border precedence) */\n	\n.fc-header .fc-state-hover,\n.fc-header .ui-state-hover {\n	z-index: 2;\n	}\n	\n.fc-header .fc-state-down {\n	z-index: 3;\n	}\n\n.fc-header .fc-state-active,\n.fc-header .ui-state-active {\n	z-index: 4;\n	}\n	\n	\n	\n/* Content\n------------------------------------------------------------------------*/\n	\n.fc-content {\n	clear: both;\n	zoom: 1; /* for IE7, gives accurate coordinates for [un]freezeContentHeight */\n	}\n	\n.fc-view {\n	width: 100%;\n	overflow: hidden;\n	}\n	\n	\n\n/* Cell Styles\n------------------------------------------------------------------------*/\n\n.fc-widget-header,    /* <th>, usually */\n.fc-widget-content {  /* <td>, usually */\n	border: 1px solid #ddd;\n	}\n	\n.fc-state-highlight { /* <td> today cell */ /* TODO: add .fc-today to <th> */\n	background: #fcf8e3;\n	}\n	\n.fc-cell-overlay { /* semi-transparent rectangle while dragging */\n	background: #bce8f1;\n	opacity: .3;\n	filter: alpha(opacity=30); /* for IE */\n	}\n	\n\n\n/* Buttons\n------------------------------------------------------------------------*/\n\n.fc-button {\n	position: relative;\n	display: inline-block;\n	padding: 0 .6em;\n	overflow: hidden;\n	height: 1.9em;\n	line-height: 1.9em;\n	white-space: nowrap;\n	cursor: pointer;\n	}\n	\n.fc-state-default { /* non-theme */\n	border: 1px solid;\n	}\n\n.fc-state-default.fc-corner-left { /* non-theme */\n	border-top-left-radius: 4px;\n	border-bottom-left-radius: 4px;\n	}\n\n.fc-state-default.fc-corner-right { /* non-theme */\n	border-top-right-radius: 4px;\n	border-bottom-right-radius: 4px;\n	}\n\n/*\n	Our default prev/next buttons use HTML entities like &lsaquo; &rsaquo; &laquo; &raquo;\n	and we\'ll try to make them look good cross-browser.\n*/\n\n.fc-text-arrow {\n	margin: 0 .1em;\n	font-size: 2em;\n	font-family: "Courier New", Courier, monospace;\n	vertical-align: baseline; /* for IE7 */\n	}\n\n.fc-button-prev .fc-text-arrow,\n.fc-button-next .fc-text-arrow { /* for &lsaquo; &rsaquo; */\n	font-weight: bold;\n	}\n	\n/* icon (for jquery ui) */\n	\n.fc-button .fc-icon-wrap {\n	position: relative;\n	float: left;\n	top: 50%;\n	}\n	\n.fc-button .ui-icon {\n	position: relative;\n	float: left;\n	margin-top: -50%;\n	*margin-top: 0;\n	*top: -50%;\n	}\n	\n/*\n  button states\n  borrowed from twitter bootstrap (http://twitter.github.com/bootstrap/)\n*/\n\n.fc-state-default {\n	background-color: #f5f5f5;\n	background-image: -moz-linear-gradient(top, #ffffff, #e6e6e6);\n	background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#ffffff), to(#e6e6e6));\n	background-image: -webkit-linear-gradient(top, #ffffff, #e6e6e6);\n	background-image: -o-linear-gradient(top, #ffffff, #e6e6e6);\n	background-image: linear-gradient(to bottom, #ffffff, #e6e6e6);\n	background-repeat: repeat-x;\n	border-color: #e6e6e6 #e6e6e6 #bfbfbf;\n	border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);\n	color: #333;\n	text-shadow: 0 1px 1px rgba(255, 255, 255, 0.75);\n	box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);\n	}\n\n.fc-state-hover,\n.fc-state-down,\n.fc-state-active,\n.fc-state-disabled {\n	color: #333333;\n	background-color: #e6e6e6;\n	}\n\n.fc-state-hover {\n	color: #333333;\n	text-decoration: none;\n	background-position: 0 -15px;\n	-webkit-transition: background-position 0.1s linear;\n	   -moz-transition: background-position 0.1s linear;\n	     -o-transition: background-position 0.1s linear;\n	        transition: background-position 0.1s linear;\n	}\n\n.fc-state-down,\n.fc-state-active {\n	background-color: #cccccc;\n	background-image: none;\n	outline: 0;\n	box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05);\n	}\n\n.fc-state-disabled {\n	cursor: default;\n	background-image: none;\n	opacity: 0.65;\n	filter: alpha(opacity=65);\n	box-shadow: none;\n	}\n\n	\n\n/* Global Event Styles\n------------------------------------------------------------------------*/\n\n.fc-event-container > * {\n	z-index: 8;\n	}\n\n.fc-event-container > .ui-draggable-dragging,\n.fc-event-container > .ui-resizable-resizing {\n	z-index: 9;\n	}\n	 \n.fc-event {\n	border: 1px solid #3a87ad; /* default BORDER color */\n	background-color: #3a87ad; /* default BACKGROUND color */\n	color: #fff;               /* default TEXT color */\n	font-size: .85em;\n	cursor: default;\n	}\n\na.fc-event {\n	text-decoration: none;\n	}\n	\na.fc-event,\n.fc-event-draggable {\n	cursor: pointer;\n	}\n	\n.fc-rtl .fc-event {\n	text-align: right;\n	}\n\n.fc-event-inner {\n	width: 100%;\n	height: 100%;\n	overflow: hidden;\n	}\n	\n.fc-event-time,\n.fc-event-title {\n	padding: 0 1px;\n	}\n	\n.fc .ui-resizable-handle {\n	display: block;\n	position: absolute;\n	z-index: 99999;\n	overflow: hidden; /* hacky spaces (IE6/7) */\n	font-size: 300%;  /* */\n	line-height: 50%; /* */\n	}\n	\n	\n	\n/* Horizontal Events\n------------------------------------------------------------------------*/\n\n.fc-event-hori {\n	border-width: 1px 0;\n	margin-bottom: 1px;\n	}\n\n.fc-ltr .fc-event-hori.fc-event-start,\n.fc-rtl .fc-event-hori.fc-event-end {\n	border-left-width: 1px;\n	border-top-left-radius: 3px;\n	border-bottom-left-radius: 3px;\n	}\n\n.fc-ltr .fc-event-hori.fc-event-end,\n.fc-rtl .fc-event-hori.fc-event-start {\n	border-right-width: 1px;\n	border-top-right-radius: 3px;\n	border-bottom-right-radius: 3px;\n	}\n	\n/* resizable */\n	\n.fc-event-hori .ui-resizable-e {\n	top: 0           !important; /* importants override pre jquery ui 1.7 styles */\n	right: -3px      !important;\n	width: 7px       !important;\n	height: 100%     !important;\n	cursor: e-resize;\n	}\n	\n.fc-event-hori .ui-resizable-w {\n	top: 0           !important;\n	left: -3px       !important;\n	width: 7px       !important;\n	height: 100%     !important;\n	cursor: w-resize;\n	}\n	\n.fc-event-hori .ui-resizable-handle {\n	_padding-bottom: 14px; /* IE6 had 0 height */\n	}\n	\n	\n	\n/* Reusable Separate-border Table\n------------------------------------------------------------*/\n\ntable.fc-border-separate {\n	border-collapse: separate;\n	}\n	\n.fc-border-separate th,\n.fc-border-separate td {\n	border-width: 1px 0 0 1px;\n	}\n	\n.fc-border-separate th.fc-last,\n.fc-border-separate td.fc-last {\n	border-right-width: 1px;\n	}\n	\n.fc-border-separate tr.fc-last th,\n.fc-border-separate tr.fc-last td {\n	border-bottom-width: 1px;\n	}\n	\n.fc-border-separate tbody tr.fc-first td,\n.fc-border-separate tbody tr.fc-first th {\n	border-top-width: 0;\n	}\n	\n	\n\n/* Month View, Basic Week View, Basic Day View\n------------------------------------------------------------------------*/\n\n.fc-grid th {\n	text-align: center;\n	}\n\n.fc .fc-week-number {\n	width: 22px;\n	text-align: center;\n	}\n\n.fc .fc-week-number div {\n	padding: 0 2px;\n	}\n	\n.fc-grid .fc-day-number {\n	float: right;\n	padding: 0 2px;\n	}\n	\n.fc-grid .fc-other-month .fc-day-number {\n	opacity: 0.3;\n	filter: alpha(opacity=30); /* for IE */\n	/* opacity with small font can sometimes look too faded\n	   might want to set the \'color\' property instead\n	   making day-numbers bold also fixes the problem */\n	}\n	\n.fc-grid .fc-day-content {\n	clear: both;\n	padding: 2px 2px 1px; /* distance between events and day edges */\n	}\n	\n/* event styles */\n	\n.fc-grid .fc-event-time {\n	font-weight: bold;\n	}\n	\n/* right-to-left */\n	\n.fc-rtl .fc-grid .fc-day-number {\n	float: left;\n	}\n	\n.fc-rtl .fc-grid .fc-event-time {\n	float: right;\n	}\n	\n	\n\n/* Agenda Week View, Agenda Day View\n------------------------------------------------------------------------*/\n\n.fc-agenda table {\n	border-collapse: separate;\n	}\n	\n.fc-agenda-days th {\n	text-align: center;\n	}\n	\n.fc-agenda .fc-agenda-axis {\n	width: 50px;\n	padding: 0 4px;\n	vertical-align: middle;\n	text-align: right;\n	white-space: nowrap;\n	font-weight: normal;\n	}\n\n.fc-agenda .fc-week-number {\n	font-weight: bold;\n	}\n	\n.fc-agenda .fc-day-content {\n	padding: 2px 2px 1px;\n	}\n	\n/* make axis border take precedence */\n	\n.fc-agenda-days .fc-agenda-axis {\n	border-right-width: 1px;\n	}\n	\n.fc-agenda-days .fc-col0 {\n	border-left-width: 0;\n	}\n	\n/* all-day area */\n	\n.fc-agenda-allday th {\n	border-width: 0 1px;\n	}\n	\n.fc-agenda-allday .fc-day-content {\n	min-height: 34px; /* TODO: doesnt work well in quirksmode */\n	_height: 34px;\n	}\n	\n/* divider (between all-day and slots) */\n	\n.fc-agenda-divider-inner {\n	height: 2px;\n	overflow: hidden;\n	}\n	\n.fc-widget-header .fc-agenda-divider-inner {\n	background: #eee;\n	}\n	\n/* slot rows */\n	\n.fc-agenda-slots th {\n	border-width: 1px 1px 0;\n	}\n	\n.fc-agenda-slots td {\n	border-width: 1px 0 0;\n	background: none;\n	}\n	\n.fc-agenda-slots td div {\n	height: 20px;\n	}\n	\n.fc-agenda-slots tr.fc-slot0 th,\n.fc-agenda-slots tr.fc-slot0 td {\n	border-top-width: 0;\n	}\n\n.fc-agenda-slots tr.fc-minor th,\n.fc-agenda-slots tr.fc-minor td {\n	border-top-style: dotted;\n	}\n	\n.fc-agenda-slots tr.fc-minor th.ui-widget-header {\n	*border-top-style: solid; /* doesn\'t work with background in IE6/7 */\n	}\n	\n\n\n/* Vertical Events\n------------------------------------------------------------------------*/\n\n.fc-event-vert {\n	border-width: 0 1px;\n	}\n\n.fc-event-vert.fc-event-start {\n	border-top-width: 1px;\n	border-top-left-radius: 3px;\n	border-top-right-radius: 3px;\n	}\n\n.fc-event-vert.fc-event-end {\n	border-bottom-width: 1px;\n	border-bottom-left-radius: 3px;\n	border-bottom-right-radius: 3px;\n	}\n	\n.fc-event-vert .fc-event-time {\n	white-space: nowrap;\n	font-size: 10px;\n	}\n\n.fc-event-vert .fc-event-inner {\n	position: relative;\n	z-index: 2;\n	}\n	\n.fc-event-vert .fc-event-bg { /* makes the event lighter w/ a semi-transparent overlay  */\n	position: absolute;\n	z-index: 1;\n	top: 0;\n	left: 0;\n	width: 100%;\n	height: 100%;\n	background: #fff;\n	opacity: .25;\n	filter: alpha(opacity=25);\n	}\n	\n.fc .ui-draggable-dragging .fc-event-bg, /* TODO: something nicer like .fc-opacity */\n.fc-select-helper .fc-event-bg {\n	display: none\\9; /* for IE6/7/8. nested opacity filters while dragging don\'t work */\n	}\n	\n/* resizable */\n	\n.fc-event-vert .ui-resizable-s {\n	bottom: 0        !important; /* importants override pre jquery ui 1.7 styles */\n	width: 100%      !important;\n	height: 8px      !important;\n	overflow: hidden !important;\n	line-height: 8px !important;\n	font-size: 11px  !important;\n	font-family: monospace;\n	text-align: center;\n	cursor: s-resize;\n	}\n	\n.fc-agenda .ui-resizable-resizing { /* TODO: better selector */\n	_overflow: hidden;\n	}\n	\n	\n/*\nVersion: 3.5.2 Timestamp: Sat Nov  1 14:43:36 EDT 2014\n*/\n.select2-container {\n    margin: 0;\n    position: relative;\n    display: inline-block;\n    /* inline-block for ie7 */\n    zoom: 1;\n    *display: inline;\n    vertical-align: middle;\n}\n\n.select2-container,\n.select2-drop,\n.select2-search,\n.select2-search input {\n  /*\n    Force border-box so that % widths fit the parent\n    container without overlap because of margin/padding.\n    More Info : http://www.quirksmode.org/css/box.html\n  */\n  -webkit-box-sizing: border-box; /* webkit */\n     -moz-box-sizing: border-box; /* firefox */\n          box-sizing: border-box; /* css3 */\n}\n\n.select2-container .select2-choice {\n    display: block;\n    height: 26px;\n    padding: 0 0 0 8px;\n    overflow: hidden;\n    position: relative;\n\n    border: 1px solid #aaa;\n    white-space: nowrap;\n    line-height: 26px;\n    color: #444;\n    text-decoration: none;\n\n    border-radius: 4px;\n\n    background-clip: padding-box;\n\n    -webkit-touch-callout: none;\n      -webkit-user-select: none;\n         -moz-user-select: none;\n          -ms-user-select: none;\n              user-select: none;\n\n    background-color: #fff;\n    background-image: -webkit-gradient(linear, left bottom, left top, color-stop(0, #eee), color-stop(0.5, #fff));\n    background-image: -webkit-linear-gradient(center bottom, #eee 0%, #fff 50%);\n    background-image: -moz-linear-gradient(center bottom, #eee 0%, #fff 50%);\n    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr = \'#ffffff\', endColorstr = \'#eeeeee\', GradientType = 0);\n    background-image: linear-gradient(to top, #eee 0%, #fff 50%);\n}\n\nhtml[dir="rtl"] .select2-container .select2-choice {\n    padding: 0 8px 0 0;\n}\n\n.select2-container.select2-drop-above .select2-choice {\n    border-bottom-color: #aaa;\n\n    border-radius: 0 0 4px 4px;\n\n    background-image: -webkit-gradient(linear, left bottom, left top, color-stop(0, #eee), color-stop(0.9, #fff));\n    background-image: -webkit-linear-gradient(center bottom, #eee 0%, #fff 90%);\n    background-image: -moz-linear-gradient(center bottom, #eee 0%, #fff 90%);\n    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=\'#ffffff\', endColorstr=\'#eeeeee\', GradientType=0);\n    background-image: linear-gradient(to bottom, #eee 0%, #fff 90%);\n}\n\n.select2-container.select2-allowclear .select2-choice .select2-chosen {\n    margin-right: 42px;\n}\n\n.select2-container .select2-choice > .select2-chosen {\n    margin-right: 26px;\n    display: block;\n    overflow: hidden;\n\n    white-space: nowrap;\n\n    text-overflow: ellipsis;\n    float: none;\n    width: auto;\n}\n\nhtml[dir="rtl"] .select2-container .select2-choice > .select2-chosen {\n    margin-left: 26px;\n    margin-right: 0;\n}\n\n.select2-container .select2-choice abbr {\n    display: none;\n    width: 12px;\n    height: 12px;\n    position: absolute;\n    right: 24px;\n    top: 8px;\n\n    font-size: 1px;\n    text-decoration: none;\n\n    border: 0;\n    background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAAoCAYAAACiu5n/AAACLElEQVR42u3Zz0sUYRzH8bUISoyF1i5iXSooyYgOEXapZNYNojwU/aAfUAT9A4YhUgdxt1To0KFIBCMIvEcUEXntUtivpYuUhYFIdDBMmD69he/hObgsbSnb13ngdZjZhX3eO8/MDrMpSctKErwsg//HUSgU7uNYsB3hHla4CybqEoRPaMJGFCEMewxuxnsIk5iALPqg1yVdj9eQGUdjiuE1eAs+QOYztrsMJqwFk8EyHguW95klD+ZD08gsYvBFCBPYgHXBOT1UNpg3ncQpnAicRbrCCQ3j8SIf5QvYEWxvxnlb0mWDr0MIvcOaCiayC78gRKmlH+WDbaIjkJnDzgq/+VHIvMWqag3ehBkIAxXGdkAIDVRlsE24H9//4ty9hju4Hej710c5m83WYging32HMYjMnwSvx75UlQ+iOiDEaEMLZiA8dPc7TFQDnkGYxQ8Iz9Hs8k4riqIa4l5ApojVbm8tiduPL5CZRs5lMGFH8DNYxo+C5d3tMfgohJeow0qMQujxuqRb0RBsZ3DA2ZIuP5LgJDgJToKr4ZHOWjTOy+fzNa6DiezCFGReod1lMGF3IYzjMm5B5rirYIJyEJ4iHezfjW+YRr2n4EHE2LrAa1cg5DwFj2DWLlKljn67p+B+CIdKPAaOsddTcBOEKbTZvjp0Qvjo8Sp9DjJFfIVMjBsef4f34AHeYAxX0VfqMbDnfw97IXMTta6DLbobcxBa3Qdb9BPE2LZQ8G98530ecQi/2QAAAABJRU5ErkJggg==) right top no-repeat;\n    cursor: pointer;\n    outline: 0;\n}\n\n.select2-container.select2-allowclear .select2-choice abbr {\n    display: inline-block;\n}\n\n.select2-container .select2-choice abbr:hover {\n    background-position: right -11px;\n    cursor: pointer;\n}\n\n.select2-drop-mask {\n    border: 0;\n    margin: 0;\n    padding: 0;\n    position: fixed;\n    left: 0;\n    top: 0;\n    min-height: 100%;\n    min-width: 100%;\n    height: auto;\n    width: auto;\n    opacity: 0;\n    z-index: 9998;\n    /* styles required for IE to work */\n    background-color: #fff;\n    filter: alpha(opacity=0);\n}\n\n.select2-drop {\n    width: 100%;\n    margin-top: -1px;\n    position: absolute;\n    z-index: 9999;\n    top: 100%;\n\n    background: #fff;\n    color: #000;\n    border: 1px solid #aaa;\n    border-top: 0;\n\n    border-radius: 0 0 4px 4px;\n\n    -webkit-box-shadow: 0 4px 5px rgba(0, 0, 0, .15);\n            box-shadow: 0 4px 5px rgba(0, 0, 0, .15);\n}\n\n.select2-drop.select2-drop-above {\n    margin-top: 1px;\n    border-top: 1px solid #aaa;\n    border-bottom: 0;\n\n    border-radius: 4px 4px 0 0;\n\n    -webkit-box-shadow: 0 -4px 5px rgba(0, 0, 0, .15);\n            box-shadow: 0 -4px 5px rgba(0, 0, 0, .15);\n}\n\n.select2-drop-active {\n    border: 1px solid #5897fb;\n    border-top: none;\n}\n\n.select2-drop.select2-drop-above.select2-drop-active {\n    border-top: 1px solid #5897fb;\n}\n\n.select2-drop-auto-width {\n    border-top: 1px solid #aaa;\n    width: auto;\n}\n\n.select2-drop-auto-width .select2-search {\n    padding-top: 4px;\n}\n\n.select2-container .select2-choice .select2-arrow {\n    display: inline-block;\n    width: 18px;\n    height: 100%;\n    position: absolute;\n    right: 0;\n    top: 0;\n\n    border-left: 1px solid #aaa;\n    border-radius: 0 4px 4px 0;\n\n    background-clip: padding-box;\n\n    background: #ccc;\n    background-image: -webkit-gradient(linear, left bottom, left top, color-stop(0, #ccc), color-stop(0.6, #eee));\n    background-image: -webkit-linear-gradient(center bottom, #ccc 0%, #eee 60%);\n    background-image: -moz-linear-gradient(center bottom, #ccc 0%, #eee 60%);\n    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr = \'#eeeeee\', endColorstr = \'#cccccc\', GradientType = 0);\n    background-image: linear-gradient(to top, #ccc 0%, #eee 60%);\n}\n\nhtml[dir="rtl"] .select2-container .select2-choice .select2-arrow {\n    left: 0;\n    right: auto;\n\n    border-left: none;\n    border-right: 1px solid #aaa;\n    border-radius: 4px 0 0 4px;\n}\n\n.select2-container .select2-choice .select2-arrow b {\n    display: block;\n    width: 100%;\n    height: 100%;\n    background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAAoCAYAAACiu5n/AAACLElEQVR42u3Zz0sUYRzH8bUISoyF1i5iXSooyYgOEXapZNYNojwU/aAfUAT9A4YhUgdxt1To0KFIBCMIvEcUEXntUtivpYuUhYFIdDBMmD69he/hObgsbSnb13ngdZjZhX3eO8/MDrMpSctKErwsg//HUSgU7uNYsB3hHla4CybqEoRPaMJGFCEMewxuxnsIk5iALPqg1yVdj9eQGUdjiuE1eAs+QOYztrsMJqwFk8EyHguW95klD+ZD08gsYvBFCBPYgHXBOT1UNpg3ncQpnAicRbrCCQ3j8SIf5QvYEWxvxnlb0mWDr0MIvcOaCiayC78gRKmlH+WDbaIjkJnDzgq/+VHIvMWqag3ehBkIAxXGdkAIDVRlsE24H9//4ty9hju4Hej710c5m83WYging32HMYjMnwSvx75UlQ+iOiDEaEMLZiA8dPc7TFQDnkGYxQ8Iz9Hs8k4riqIa4l5ApojVbm8tiduPL5CZRs5lMGFH8DNYxo+C5d3tMfgohJeow0qMQujxuqRb0RBsZ3DA2ZIuP5LgJDgJToKr4ZHOWjTOy+fzNa6DiezCFGReod1lMGF3IYzjMm5B5rirYIJyEJ4iHezfjW+YRr2n4EHE2LrAa1cg5DwFj2DWLlKljn67p+B+CIdKPAaOsddTcBOEKbTZvjp0Qvjo8Sp9DjJFfIVMjBsef4f34AHeYAxX0VfqMbDnfw97IXMTta6DLbobcxBa3Qdb9BPE2LZQ8G98530ecQi/2QAAAABJRU5ErkJggg==) no-repeat 0 1px;\n}\n\nhtml[dir="rtl"] .select2-container .select2-choice .select2-arrow b {\n    background-position: 2px 1px;\n}\n\n.select2-search {\n    display: inline-block;\n    width: 100%;\n    min-height: 26px;\n    margin: 0;\n    padding-left: 4px;\n    padding-right: 4px;\n\n    position: relative;\n    z-index: 10000;\n\n    white-space: nowrap;\n}\n\n.select2-search input {\n    width: 100%;\n    height: auto !important;\n    min-height: 26px;\n    padding: 4px 20px 4px 5px;\n    margin: 0;\n\n    outline: 0;\n    font-family: sans-serif;\n    font-size: 1em;\n\n    border: 1px solid #aaa;\n    border-radius: 0;\n\n    -webkit-box-shadow: none;\n            box-shadow: none;\n\n    background: #fff url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAAoCAYAAACiu5n/AAACLElEQVR42u3Zz0sUYRzH8bUISoyF1i5iXSooyYgOEXapZNYNojwU/aAfUAT9A4YhUgdxt1To0KFIBCMIvEcUEXntUtivpYuUhYFIdDBMmD69he/hObgsbSnb13ngdZjZhX3eO8/MDrMpSctKErwsg//HUSgU7uNYsB3hHla4CybqEoRPaMJGFCEMewxuxnsIk5iALPqg1yVdj9eQGUdjiuE1eAs+QOYztrsMJqwFk8EyHguW95klD+ZD08gsYvBFCBPYgHXBOT1UNpg3ncQpnAicRbrCCQ3j8SIf5QvYEWxvxnlb0mWDr0MIvcOaCiayC78gRKmlH+WDbaIjkJnDzgq/+VHIvMWqag3ehBkIAxXGdkAIDVRlsE24H9//4ty9hju4Hej710c5m83WYging32HMYjMnwSvx75UlQ+iOiDEaEMLZiA8dPc7TFQDnkGYxQ8Iz9Hs8k4riqIa4l5ApojVbm8tiduPL5CZRs5lMGFH8DNYxo+C5d3tMfgohJeow0qMQujxuqRb0RBsZ3DA2ZIuP5LgJDgJToKr4ZHOWjTOy+fzNa6DiezCFGReod1lMGF3IYzjMm5B5rirYIJyEJ4iHezfjW+YRr2n4EHE2LrAa1cg5DwFj2DWLlKljn67p+B+CIdKPAaOsddTcBOEKbTZvjp0Qvjo8Sp9DjJFfIVMjBsef4f34AHeYAxX0VfqMbDnfw97IXMTta6DLbobcxBa3Qdb9BPE2LZQ8G98530ecQi/2QAAAABJRU5ErkJggg==) no-repeat 100% -22px;\n    background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAAoCAYAAACiu5n/AAACLElEQVR42u3Zz0sUYRzH8bUISoyF1i5iXSooyYgOEXapZNYNojwU/aAfUAT9A4YhUgdxt1To0KFIBCMIvEcUEXntUtivpYuUhYFIdDBMmD69he/hObgsbSnb13ngdZjZhX3eO8/MDrMpSctKErwsg//HUSgU7uNYsB3hHla4CybqEoRPaMJGFCEMewxuxnsIk5iALPqg1yVdj9eQGUdjiuE1eAs+QOYztrsMJqwFk8EyHguW95klD+ZD08gsYvBFCBPYgHXBOT1UNpg3ncQpnAicRbrCCQ3j8SIf5QvYEWxvxnlb0mWDr0MIvcOaCiayC78gRKmlH+WDbaIjkJnDzgq/+VHIvMWqag3ehBkIAxXGdkAIDVRlsE24H9//4ty9hju4Hej710c5m83WYging32HMYjMnwSvx75UlQ+iOiDEaEMLZiA8dPc7TFQDnkGYxQ8Iz9Hs8k4riqIa4l5ApojVbm8tiduPL5CZRs5lMGFH8DNYxo+C5d3tMfgohJeow0qMQujxuqRb0RBsZ3DA2ZIuP5LgJDgJToKr4ZHOWjTOy+fzNa6DiezCFGReod1lMGF3IYzjMm5B5rirYIJyEJ4iHezfjW+YRr2n4EHE2LrAa1cg5DwFj2DWLlKljn67p+B+CIdKPAaOsddTcBOEKbTZvjp0Qvjo8Sp9DjJFfIVMjBsef4f34AHeYAxX0VfqMbDnfw97IXMTta6DLbobcxBa3Qdb9BPE2LZQ8G98530ecQi/2QAAAABJRU5ErkJggg==) no-repeat 100% -22px, -webkit-gradient(linear, left bottom, left top, color-stop(0.85, #fff), color-stop(0.99, #eee));\n    background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAAoCAYAAACiu5n/AAACLElEQVR42u3Zz0sUYRzH8bUISoyF1i5iXSooyYgOEXapZNYNojwU/aAfUAT9A4YhUgdxt1To0KFIBCMIvEcUEXntUtivpYuUhYFIdDBMmD69he/hObgsbSnb13ngdZjZhX3eO8/MDrMpSctKErwsg//HUSgU7uNYsB3hHla4CybqEoRPaMJGFCEMewxuxnsIk5iALPqg1yVdj9eQGUdjiuE1eAs+QOYztrsMJqwFk8EyHguW95klD+ZD08gsYvBFCBPYgHXBOT1UNpg3ncQpnAicRbrCCQ3j8SIf5QvYEWxvxnlb0mWDr0MIvcOaCiayC78gRKmlH+WDbaIjkJnDzgq/+VHIvMWqag3ehBkIAxXGdkAIDVRlsE24H9//4ty9hju4Hej710c5m83WYging32HMYjMnwSvx75UlQ+iOiDEaEMLZiA8dPc7TFQDnkGYxQ8Iz9Hs8k4riqIa4l5ApojVbm8tiduPL5CZRs5lMGFH8DNYxo+C5d3tMfgohJeow0qMQujxuqRb0RBsZ3DA2ZIuP5LgJDgJToKr4ZHOWjTOy+fzNa6DiezCFGReod1lMGF3IYzjMm5B5rirYIJyEJ4iHezfjW+YRr2n4EHE2LrAa1cg5DwFj2DWLlKljn67p+B+CIdKPAaOsddTcBOEKbTZvjp0Qvjo8Sp9DjJFfIVMjBsef4f34AHeYAxX0VfqMbDnfw97IXMTta6DLbobcxBa3Qdb9BPE2LZQ8G98530ecQi/2QAAAABJRU5ErkJggg==) no-repeat 100% -22px, -webkit-linear-gradient(center bottom, #fff 85%, #eee 99%);\n    background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAAoCAYAAACiu5n/AAACLElEQVR42u3Zz0sUYRzH8bUISoyF1i5iXSooyYgOEXapZNYNojwU/aAfUAT9A4YhUgdxt1To0KFIBCMIvEcUEXntUtivpYuUhYFIdDBMmD69he/hObgsbSnb13ngdZjZhX3eO8/MDrMpSctKErwsg//HUSgU7uNYsB3hHla4CybqEoRPaMJGFCEMewxuxnsIk5iALPqg1yVdj9eQGUdjiuE1eAs+QOYztrsMJqwFk8EyHguW95klD+ZD08gsYvBFCBPYgHXBOT1UNpg3ncQpnAicRbrCCQ3j8SIf5QvYEWxvxnlb0mWDr0MIvcOaCiayC78gRKmlH+WDbaIjkJnDzgq/+VHIvMWqag3ehBkIAxXGdkAIDVRlsE24H9//4ty9hju4Hej710c5m83WYging32HMYjMnwSvx75UlQ+iOiDEaEMLZiA8dPc7TFQDnkGYxQ8Iz9Hs8k4riqIa4l5ApojVbm8tiduPL5CZRs5lMGFH8DNYxo+C5d3tMfgohJeow0qMQujxuqRb0RBsZ3DA2ZIuP5LgJDgJToKr4ZHOWjTOy+fzNa6DiezCFGReod1lMGF3IYzjMm5B5rirYIJyEJ4iHezfjW+YRr2n4EHE2LrAa1cg5DwFj2DWLlKljn67p+B+CIdKPAaOsddTcBOEKbTZvjp0Qvjo8Sp9DjJFfIVMjBsef4f34AHeYAxX0VfqMbDnfw97IXMTta6DLbobcxBa3Qdb9BPE2LZQ8G98530ecQi/2QAAAABJRU5ErkJggg==) no-repeat 100% -22px, -moz-linear-gradient(center bottom, #fff 85%, #eee 99%);\n    background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAAoCAYAAACiu5n/AAACLElEQVR42u3Zz0sUYRzH8bUISoyF1i5iXSooyYgOEXapZNYNojwU/aAfUAT9A4YhUgdxt1To0KFIBCMIvEcUEXntUtivpYuUhYFIdDBMmD69he/hObgsbSnb13ngdZjZhX3eO8/MDrMpSctKErwsg//HUSgU7uNYsB3hHla4CybqEoRPaMJGFCEMewxuxnsIk5iALPqg1yVdj9eQGUdjiuE1eAs+QOYztrsMJqwFk8EyHguW95klD+ZD08gsYvBFCBPYgHXBOT1UNpg3ncQpnAicRbrCCQ3j8SIf5QvYEWxvxnlb0mWDr0MIvcOaCiayC78gRKmlH+WDbaIjkJnDzgq/+VHIvMWqag3ehBkIAxXGdkAIDVRlsE24H9//4ty9hju4Hej710c5m83WYging32HMYjMnwSvx75UlQ+iOiDEaEMLZiA8dPc7TFQDnkGYxQ8Iz9Hs8k4riqIa4l5ApojVbm8tiduPL5CZRs5lMGFH8DNYxo+C5d3tMfgohJeow0qMQujxuqRb0RBsZ3DA2ZIuP5LgJDgJToKr4ZHOWjTOy+fzNa6DiezCFGReod1lMGF3IYzjMm5B5rirYIJyEJ4iHezfjW+YRr2n4EHE2LrAa1cg5DwFj2DWLlKljn67p+B+CIdKPAaOsddTcBOEKbTZvjp0Qvjo8Sp9DjJFfIVMjBsef4f34AHeYAxX0VfqMbDnfw97IXMTta6DLbobcxBa3Qdb9BPE2LZQ8G98530ecQi/2QAAAABJRU5ErkJggg==) no-repeat 100% -22px, linear-gradient(to bottom, #fff 85%, #eee 99%) 0 0;\n}\n\nhtml[dir="rtl"] .select2-search input {\n    padding: 4px 5px 4px 20px;\n\n    background: #fff url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAAoCAYAAACiu5n/AAACLElEQVR42u3Zz0sUYRzH8bUISoyF1i5iXSooyYgOEXapZNYNojwU/aAfUAT9A4YhUgdxt1To0KFIBCMIvEcUEXntUtivpYuUhYFIdDBMmD69he/hObgsbSnb13ngdZjZhX3eO8/MDrMpSctKErwsg//HUSgU7uNYsB3hHla4CybqEoRPaMJGFCEMewxuxnsIk5iALPqg1yVdj9eQGUdjiuE1eAs+QOYztrsMJqwFk8EyHguW95klD+ZD08gsYvBFCBPYgHXBOT1UNpg3ncQpnAicRbrCCQ3j8SIf5QvYEWxvxnlb0mWDr0MIvcOaCiayC78gRKmlH+WDbaIjkJnDzgq/+VHIvMWqag3ehBkIAxXGdkAIDVRlsE24H9//4ty9hju4Hej710c5m83WYging32HMYjMnwSvx75UlQ+iOiDEaEMLZiA8dPc7TFQDnkGYxQ8Iz9Hs8k4riqIa4l5ApojVbm8tiduPL5CZRs5lMGFH8DNYxo+C5d3tMfgohJeow0qMQujxuqRb0RBsZ3DA2ZIuP5LgJDgJToKr4ZHOWjTOy+fzNa6DiezCFGReod1lMGF3IYzjMm5B5rirYIJyEJ4iHezfjW+YRr2n4EHE2LrAa1cg5DwFj2DWLlKljn67p+B+CIdKPAaOsddTcBOEKbTZvjp0Qvjo8Sp9DjJFfIVMjBsef4f34AHeYAxX0VfqMbDnfw97IXMTta6DLbobcxBa3Qdb9BPE2LZQ8G98530ecQi/2QAAAABJRU5ErkJggg==) no-repeat -37px -22px;\n    background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAAoCAYAAACiu5n/AAACLElEQVR42u3Zz0sUYRzH8bUISoyF1i5iXSooyYgOEXapZNYNojwU/aAfUAT9A4YhUgdxt1To0KFIBCMIvEcUEXntUtivpYuUhYFIdDBMmD69he/hObgsbSnb13ngdZjZhX3eO8/MDrMpSctKErwsg//HUSgU7uNYsB3hHla4CybqEoRPaMJGFCEMewxuxnsIk5iALPqg1yVdj9eQGUdjiuE1eAs+QOYztrsMJqwFk8EyHguW95klD+ZD08gsYvBFCBPYgHXBOT1UNpg3ncQpnAicRbrCCQ3j8SIf5QvYEWxvxnlb0mWDr0MIvcOaCiayC78gRKmlH+WDbaIjkJnDzgq/+VHIvMWqag3ehBkIAxXGdkAIDVRlsE24H9//4ty9hju4Hej710c5m83WYging32HMYjMnwSvx75UlQ+iOiDEaEMLZiA8dPc7TFQDnkGYxQ8Iz9Hs8k4riqIa4l5ApojVbm8tiduPL5CZRs5lMGFH8DNYxo+C5d3tMfgohJeow0qMQujxuqRb0RBsZ3DA2ZIuP5LgJDgJToKr4ZHOWjTOy+fzNa6DiezCFGReod1lMGF3IYzjMm5B5rirYIJyEJ4iHezfjW+YRr2n4EHE2LrAa1cg5DwFj2DWLlKljn67p+B+CIdKPAaOsddTcBOEKbTZvjp0Qvjo8Sp9DjJFfIVMjBsef4f34AHeYAxX0VfqMbDnfw97IXMTta6DLbobcxBa3Qdb9BPE2LZQ8G98530ecQi/2QAAAABJRU5ErkJggg==) no-repeat -37px -22px, -webkit-gradient(linear, left bottom, left top, color-stop(0.85, #fff), color-stop(0.99, #eee));\n    background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAAoCAYAAACiu5n/AAACLElEQVR42u3Zz0sUYRzH8bUISoyF1i5iXSooyYgOEXapZNYNojwU/aAfUAT9A4YhUgdxt1To0KFIBCMIvEcUEXntUtivpYuUhYFIdDBMmD69he/hObgsbSnb13ngdZjZhX3eO8/MDrMpSctKErwsg//HUSgU7uNYsB3hHla4CybqEoRPaMJGFCEMewxuxnsIk5iALPqg1yVdj9eQGUdjiuE1eAs+QOYztrsMJqwFk8EyHguW95klD+ZD08gsYvBFCBPYgHXBOT1UNpg3ncQpnAicRbrCCQ3j8SIf5QvYEWxvxnlb0mWDr0MIvcOaCiayC78gRKmlH+WDbaIjkJnDzgq/+VHIvMWqag3ehBkIAxXGdkAIDVRlsE24H9//4ty9hju4Hej710c5m83WYging32HMYjMnwSvx75UlQ+iOiDEaEMLZiA8dPc7TFQDnkGYxQ8Iz9Hs8k4riqIa4l5ApojVbm8tiduPL5CZRs5lMGFH8DNYxo+C5d3tMfgohJeow0qMQujxuqRb0RBsZ3DA2ZIuP5LgJDgJToKr4ZHOWjTOy+fzNa6DiezCFGReod1lMGF3IYzjMm5B5rirYIJyEJ4iHezfjW+YRr2n4EHE2LrAa1cg5DwFj2DWLlKljn67p+B+CIdKPAaOsddTcBOEKbTZvjp0Qvjo8Sp9DjJFfIVMjBsef4f34AHeYAxX0VfqMbDnfw97IXMTta6DLbobcxBa3Qdb9BPE2LZQ8G98530ecQi/2QAAAABJRU5ErkJggg==) no-repeat -37px -22px, -webkit-linear-gradient(center bottom, #fff 85%, #eee 99%);\n    background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAAoCAYAAACiu5n/AAACLElEQVR42u3Zz0sUYRzH8bUISoyF1i5iXSooyYgOEXapZNYNojwU/aAfUAT9A4YhUgdxt1To0KFIBCMIvEcUEXntUtivpYuUhYFIdDBMmD69he/hObgsbSnb13ngdZjZhX3eO8/MDrMpSctKErwsg//HUSgU7uNYsB3hHla4CybqEoRPaMJGFCEMewxuxnsIk5iALPqg1yVdj9eQGUdjiuE1eAs+QOYztrsMJqwFk8EyHguW95klD+ZD08gsYvBFCBPYgHXBOT1UNpg3ncQpnAicRbrCCQ3j8SIf5QvYEWxvxnlb0mWDr0MIvcOaCiayC78gRKmlH+WDbaIjkJnDzgq/+VHIvMWqag3ehBkIAxXGdkAIDVRlsE24H9//4ty9hju4Hej710c5m83WYging32HMYjMnwSvx75UlQ+iOiDEaEMLZiA8dPc7TFQDnkGYxQ8Iz9Hs8k4riqIa4l5ApojVbm8tiduPL5CZRs5lMGFH8DNYxo+C5d3tMfgohJeow0qMQujxuqRb0RBsZ3DA2ZIuP5LgJDgJToKr4ZHOWjTOy+fzNa6DiezCFGReod1lMGF3IYzjMm5B5rirYIJyEJ4iHezfjW+YRr2n4EHE2LrAa1cg5DwFj2DWLlKljn67p+B+CIdKPAaOsddTcBOEKbTZvjp0Qvjo8Sp9DjJFfIVMjBsef4f34AHeYAxX0VfqMbDnfw97IXMTta6DLbobcxBa3Qdb9BPE2LZQ8G98530ecQi/2QAAAABJRU5ErkJggg==) no-repeat -37px -22px, -moz-linear-gradient(center bottom, #fff 85%, #eee 99%);\n    background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAAoCAYAAACiu5n/AAACLElEQVR42u3Zz0sUYRzH8bUISoyF1i5iXSooyYgOEXapZNYNojwU/aAfUAT9A4YhUgdxt1To0KFIBCMIvEcUEXntUtivpYuUhYFIdDBMmD69he/hObgsbSnb13ngdZjZhX3eO8/MDrMpSctKErwsg//HUSgU7uNYsB3hHla4CybqEoRPaMJGFCEMewxuxnsIk5iALPqg1yVdj9eQGUdjiuE1eAs+QOYztrsMJqwFk8EyHguW95klD+ZD08gsYvBFCBPYgHXBOT1UNpg3ncQpnAicRbrCCQ3j8SIf5QvYEWxvxnlb0mWDr0MIvcOaCiayC78gRKmlH+WDbaIjkJnDzgq/+VHIvMWqag3ehBkIAxXGdkAIDVRlsE24H9//4ty9hju4Hej710c5m83WYging32HMYjMnwSvx75UlQ+iOiDEaEMLZiA8dPc7TFQDnkGYxQ8Iz9Hs8k4riqIa4l5ApojVbm8tiduPL5CZRs5lMGFH8DNYxo+C5d3tMfgohJeow0qMQujxuqRb0RBsZ3DA2ZIuP5LgJDgJToKr4ZHOWjTOy+fzNa6DiezCFGReod1lMGF3IYzjMm5B5rirYIJyEJ4iHezfjW+YRr2n4EHE2LrAa1cg5DwFj2DWLlKljn67p+B+CIdKPAaOsddTcBOEKbTZvjp0Qvjo8Sp9DjJFfIVMjBsef4f34AHeYAxX0VfqMbDnfw97IXMTta6DLbobcxBa3Qdb9BPE2LZQ8G98530ecQi/2QAAAABJRU5ErkJggg==) no-repeat -37px -22px, linear-gradient(to bottom, #fff 85%, #eee 99%) 0 0;\n}\n\n.select2-drop.select2-drop-above .select2-search input {\n    margin-top: 4px;\n}\n\n.select2-search input.select2-active {\n    background: #fff url(data:image/gif;base64,R0lGODlhEAAQAPQAAP///wAAAPDw8IqKiuDg4EZGRnp6egAAAFhYWCQkJKysrL6+vhQUFJycnAQEBDY2NmhoaAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAAFdyAgAgIJIeWoAkRCCMdBkKtIHIngyMKsErPBYbADpkSCwhDmQCBethRB6Vj4kFCkQPG4IlWDgrNRIwnO4UKBXDufzQvDMaoSDBgFb886MiQadgNABAokfCwzBA8LCg0Egl8jAggGAA1kBIA1BAYzlyILczULC2UhACH5BAkKAAAALAAAAAAQABAAAAV2ICACAmlAZTmOREEIyUEQjLKKxPHADhEvqxlgcGgkGI1DYSVAIAWMx+lwSKkICJ0QsHi9RgKBwnVTiRQQgwF4I4UFDQQEwi6/3YSGWRRmjhEETAJfIgMFCnAKM0KDV4EEEAQLiF18TAYNXDaSe3x6mjidN1s3IQAh+QQJCgAAACwAAAAAEAAQAAAFeCAgAgLZDGU5jgRECEUiCI+yioSDwDJyLKsXoHFQxBSHAoAAFBhqtMJg8DgQBgfrEsJAEAg4YhZIEiwgKtHiMBgtpg3wbUZXGO7kOb1MUKRFMysCChAoggJCIg0GC2aNe4gqQldfL4l/Ag1AXySJgn5LcoE3QXI3IQAh+QQJCgAAACwAAAAAEAAQAAAFdiAgAgLZNGU5joQhCEjxIssqEo8bC9BRjy9Ag7GILQ4QEoE0gBAEBcOpcBA0DoxSK/e8LRIHn+i1cK0IyKdg0VAoljYIg+GgnRrwVS/8IAkICyosBIQpBAMoKy9dImxPhS+GKkFrkX+TigtLlIyKXUF+NjagNiEAIfkECQoAAAAsAAAAABAAEAAABWwgIAICaRhlOY4EIgjH8R7LKhKHGwsMvb4AAy3WODBIBBKCsYA9TjuhDNDKEVSERezQEL0WrhXucRUQGuik7bFlngzqVW9LMl9XWvLdjFaJtDFqZ1cEZUB0dUgvL3dgP4WJZn4jkomWNpSTIyEAIfkECQoAAAAsAAAAABAAEAAABX4gIAICuSxlOY6CIgiD8RrEKgqGOwxwUrMlAoSwIzAGpJpgoSDAGifDY5kopBYDlEpAQBwevxfBtRIUGi8xwWkDNBCIwmC9Vq0aiQQDQuK+VgQPDXV9hCJjBwcFYU5pLwwHXQcMKSmNLQcIAExlbH8JBwttaX0ABAcNbWVbKyEAIfkECQoAAAAsAAAAABAAEAAABXkgIAICSRBlOY7CIghN8zbEKsKoIjdFzZaEgUBHKChMJtRwcWpAWoWnifm6ESAMhO8lQK0EEAV3rFopIBCEcGwDKAqPh4HUrY4ICHH1dSoTFgcHUiZjBhAJB2AHDykpKAwHAwdzf19KkASIPl9cDgcnDkdtNwiMJCshACH5BAkKAAAALAAAAAAQABAAAAV3ICACAkkQZTmOAiosiyAoxCq+KPxCNVsSMRgBsiClWrLTSWFoIQZHl6pleBh6suxKMIhlvzbAwkBWfFWrBQTxNLq2RG2yhSUkDs2b63AYDAoJXAcFRwADeAkJDX0AQCsEfAQMDAIPBz0rCgcxky0JRWE1AmwpKyEAIfkECQoAAAAsAAAAABAAEAAABXkgIAICKZzkqJ4nQZxLqZKv4NqNLKK2/Q4Ek4lFXChsg5ypJjs1II3gEDUSRInEGYAw6B6zM4JhrDAtEosVkLUtHA7RHaHAGJQEjsODcEg0FBAFVgkQJQ1pAwcDDw8KcFtSInwJAowCCA6RIwqZAgkPNgVpWndjdyohACH5BAkKAAAALAAAAAAQABAAAAV5ICACAimc5KieLEuUKvm2xAKLqDCfC2GaO9eL0LABWTiBYmA06W6kHgvCqEJiAIJiu3gcvgUsscHUERm+kaCxyxa+zRPk0SgJEgfIvbAdIAQLCAYlCj4DBw0IBQsMCjIqBAcPAooCBg9pKgsJLwUFOhCZKyQDA3YqIQAh+QQJCgAAACwAAAAAEAAQAAAFdSAgAgIpnOSonmxbqiThCrJKEHFbo8JxDDOZYFFb+A41E4H4OhkOipXwBElYITDAckFEOBgMQ3arkMkUBdxIUGZpEb7kaQBRlASPg0FQQHAbEEMGDSVEAA1QBhAED1E0NgwFAooCDWljaQIQCE5qMHcNhCkjIQAh+QQJCgAAACwAAAAAEAAQAAAFeSAgAgIpnOSoLgxxvqgKLEcCC65KEAByKK8cSpA4DAiHQ/DkKhGKh4ZCtCyZGo6F6iYYPAqFgYy02xkSaLEMV34tELyRYNEsCQyHlvWkGCzsPgMCEAY7Cg04Uk48LAsDhRA8MVQPEF0GAgqYYwSRlycNcWskCkApIyEAOwAAAAAAAAAAAA==) no-repeat 100%;\n    background: url(data:image/gif;base64,R0lGODlhEAAQAPQAAP///wAAAPDw8IqKiuDg4EZGRnp6egAAAFhYWCQkJKysrL6+vhQUFJycnAQEBDY2NmhoaAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAAFdyAgAgIJIeWoAkRCCMdBkKtIHIngyMKsErPBYbADpkSCwhDmQCBethRB6Vj4kFCkQPG4IlWDgrNRIwnO4UKBXDufzQvDMaoSDBgFb886MiQadgNABAokfCwzBA8LCg0Egl8jAggGAA1kBIA1BAYzlyILczULC2UhACH5BAkKAAAALAAAAAAQABAAAAV2ICACAmlAZTmOREEIyUEQjLKKxPHADhEvqxlgcGgkGI1DYSVAIAWMx+lwSKkICJ0QsHi9RgKBwnVTiRQQgwF4I4UFDQQEwi6/3YSGWRRmjhEETAJfIgMFCnAKM0KDV4EEEAQLiF18TAYNXDaSe3x6mjidN1s3IQAh+QQJCgAAACwAAAAAEAAQAAAFeCAgAgLZDGU5jgRECEUiCI+yioSDwDJyLKsXoHFQxBSHAoAAFBhqtMJg8DgQBgfrEsJAEAg4YhZIEiwgKtHiMBgtpg3wbUZXGO7kOb1MUKRFMysCChAoggJCIg0GC2aNe4gqQldfL4l/Ag1AXySJgn5LcoE3QXI3IQAh+QQJCgAAACwAAAAAEAAQAAAFdiAgAgLZNGU5joQhCEjxIssqEo8bC9BRjy9Ag7GILQ4QEoE0gBAEBcOpcBA0DoxSK/e8LRIHn+i1cK0IyKdg0VAoljYIg+GgnRrwVS/8IAkICyosBIQpBAMoKy9dImxPhS+GKkFrkX+TigtLlIyKXUF+NjagNiEAIfkECQoAAAAsAAAAABAAEAAABWwgIAICaRhlOY4EIgjH8R7LKhKHGwsMvb4AAy3WODBIBBKCsYA9TjuhDNDKEVSERezQEL0WrhXucRUQGuik7bFlngzqVW9LMl9XWvLdjFaJtDFqZ1cEZUB0dUgvL3dgP4WJZn4jkomWNpSTIyEAIfkECQoAAAAsAAAAABAAEAAABX4gIAICuSxlOY6CIgiD8RrEKgqGOwxwUrMlAoSwIzAGpJpgoSDAGifDY5kopBYDlEpAQBwevxfBtRIUGi8xwWkDNBCIwmC9Vq0aiQQDQuK+VgQPDXV9hCJjBwcFYU5pLwwHXQcMKSmNLQcIAExlbH8JBwttaX0ABAcNbWVbKyEAIfkECQoAAAAsAAAAABAAEAAABXkgIAICSRBlOY7CIghN8zbEKsKoIjdFzZaEgUBHKChMJtRwcWpAWoWnifm6ESAMhO8lQK0EEAV3rFopIBCEcGwDKAqPh4HUrY4ICHH1dSoTFgcHUiZjBhAJB2AHDykpKAwHAwdzf19KkASIPl9cDgcnDkdtNwiMJCshACH5BAkKAAAALAAAAAAQABAAAAV3ICACAkkQZTmOAiosiyAoxCq+KPxCNVsSMRgBsiClWrLTSWFoIQZHl6pleBh6suxKMIhlvzbAwkBWfFWrBQTxNLq2RG2yhSUkDs2b63AYDAoJXAcFRwADeAkJDX0AQCsEfAQMDAIPBz0rCgcxky0JRWE1AmwpKyEAIfkECQoAAAAsAAAAABAAEAAABXkgIAICKZzkqJ4nQZxLqZKv4NqNLKK2/Q4Ek4lFXChsg5ypJjs1II3gEDUSRInEGYAw6B6zM4JhrDAtEosVkLUtHA7RHaHAGJQEjsODcEg0FBAFVgkQJQ1pAwcDDw8KcFtSInwJAowCCA6RIwqZAgkPNgVpWndjdyohACH5BAkKAAAALAAAAAAQABAAAAV5ICACAimc5KieLEuUKvm2xAKLqDCfC2GaO9eL0LABWTiBYmA06W6kHgvCqEJiAIJiu3gcvgUsscHUERm+kaCxyxa+zRPk0SgJEgfIvbAdIAQLCAYlCj4DBw0IBQsMCjIqBAcPAooCBg9pKgsJLwUFOhCZKyQDA3YqIQAh+QQJCgAAACwAAAAAEAAQAAAFdSAgAgIpnOSonmxbqiThCrJKEHFbo8JxDDOZYFFb+A41E4H4OhkOipXwBElYITDAckFEOBgMQ3arkMkUBdxIUGZpEb7kaQBRlASPg0FQQHAbEEMGDSVEAA1QBhAED1E0NgwFAooCDWljaQIQCE5qMHcNhCkjIQAh+QQJCgAAACwAAAAAEAAQAAAFeSAgAgIpnOSoLgxxvqgKLEcCC65KEAByKK8cSpA4DAiHQ/DkKhGKh4ZCtCyZGo6F6iYYPAqFgYy02xkSaLEMV34tELyRYNEsCQyHlvWkGCzsPgMCEAY7Cg04Uk48LAsDhRA8MVQPEF0GAgqYYwSRlycNcWskCkApIyEAOwAAAAAAAAAAAA==) no-repeat 100%, -webkit-gradient(linear, left bottom, left top, color-stop(0.85, #fff), color-stop(0.99, #eee));\n    background: url(data:image/gif;base64,R0lGODlhEAAQAPQAAP///wAAAPDw8IqKiuDg4EZGRnp6egAAAFhYWCQkJKysrL6+vhQUFJycnAQEBDY2NmhoaAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAAFdyAgAgIJIeWoAkRCCMdBkKtIHIngyMKsErPBYbADpkSCwhDmQCBethRB6Vj4kFCkQPG4IlWDgrNRIwnO4UKBXDufzQvDMaoSDBgFb886MiQadgNABAokfCwzBA8LCg0Egl8jAggGAA1kBIA1BAYzlyILczULC2UhACH5BAkKAAAALAAAAAAQABAAAAV2ICACAmlAZTmOREEIyUEQjLKKxPHADhEvqxlgcGgkGI1DYSVAIAWMx+lwSKkICJ0QsHi9RgKBwnVTiRQQgwF4I4UFDQQEwi6/3YSGWRRmjhEETAJfIgMFCnAKM0KDV4EEEAQLiF18TAYNXDaSe3x6mjidN1s3IQAh+QQJCgAAACwAAAAAEAAQAAAFeCAgAgLZDGU5jgRECEUiCI+yioSDwDJyLKsXoHFQxBSHAoAAFBhqtMJg8DgQBgfrEsJAEAg4YhZIEiwgKtHiMBgtpg3wbUZXGO7kOb1MUKRFMysCChAoggJCIg0GC2aNe4gqQldfL4l/Ag1AXySJgn5LcoE3QXI3IQAh+QQJCgAAACwAAAAAEAAQAAAFdiAgAgLZNGU5joQhCEjxIssqEo8bC9BRjy9Ag7GILQ4QEoE0gBAEBcOpcBA0DoxSK/e8LRIHn+i1cK0IyKdg0VAoljYIg+GgnRrwVS/8IAkICyosBIQpBAMoKy9dImxPhS+GKkFrkX+TigtLlIyKXUF+NjagNiEAIfkECQoAAAAsAAAAABAAEAAABWwgIAICaRhlOY4EIgjH8R7LKhKHGwsMvb4AAy3WODBIBBKCsYA9TjuhDNDKEVSERezQEL0WrhXucRUQGuik7bFlngzqVW9LMl9XWvLdjFaJtDFqZ1cEZUB0dUgvL3dgP4WJZn4jkomWNpSTIyEAIfkECQoAAAAsAAAAABAAEAAABX4gIAICuSxlOY6CIgiD8RrEKgqGOwxwUrMlAoSwIzAGpJpgoSDAGifDY5kopBYDlEpAQBwevxfBtRIUGi8xwWkDNBCIwmC9Vq0aiQQDQuK+VgQPDXV9hCJjBwcFYU5pLwwHXQcMKSmNLQcIAExlbH8JBwttaX0ABAcNbWVbKyEAIfkECQoAAAAsAAAAABAAEAAABXkgIAICSRBlOY7CIghN8zbEKsKoIjdFzZaEgUBHKChMJtRwcWpAWoWnifm6ESAMhO8lQK0EEAV3rFopIBCEcGwDKAqPh4HUrY4ICHH1dSoTFgcHUiZjBhAJB2AHDykpKAwHAwdzf19KkASIPl9cDgcnDkdtNwiMJCshACH5BAkKAAAALAAAAAAQABAAAAV3ICACAkkQZTmOAiosiyAoxCq+KPxCNVsSMRgBsiClWrLTSWFoIQZHl6pleBh6suxKMIhlvzbAwkBWfFWrBQTxNLq2RG2yhSUkDs2b63AYDAoJXAcFRwADeAkJDX0AQCsEfAQMDAIPBz0rCgcxky0JRWE1AmwpKyEAIfkECQoAAAAsAAAAABAAEAAABXkgIAICKZzkqJ4nQZxLqZKv4NqNLKK2/Q4Ek4lFXChsg5ypJjs1II3gEDUSRInEGYAw6B6zM4JhrDAtEosVkLUtHA7RHaHAGJQEjsODcEg0FBAFVgkQJQ1pAwcDDw8KcFtSInwJAowCCA6RIwqZAgkPNgVpWndjdyohACH5BAkKAAAALAAAAAAQABAAAAV5ICACAimc5KieLEuUKvm2xAKLqDCfC2GaO9eL0LABWTiBYmA06W6kHgvCqEJiAIJiu3gcvgUsscHUERm+kaCxyxa+zRPk0SgJEgfIvbAdIAQLCAYlCj4DBw0IBQsMCjIqBAcPAooCBg9pKgsJLwUFOhCZKyQDA3YqIQAh+QQJCgAAACwAAAAAEAAQAAAFdSAgAgIpnOSonmxbqiThCrJKEHFbo8JxDDOZYFFb+A41E4H4OhkOipXwBElYITDAckFEOBgMQ3arkMkUBdxIUGZpEb7kaQBRlASPg0FQQHAbEEMGDSVEAA1QBhAED1E0NgwFAooCDWljaQIQCE5qMHcNhCkjIQAh+QQJCgAAACwAAAAAEAAQAAAFeSAgAgIpnOSoLgxxvqgKLEcCC65KEAByKK8cSpA4DAiHQ/DkKhGKh4ZCtCyZGo6F6iYYPAqFgYy02xkSaLEMV34tELyRYNEsCQyHlvWkGCzsPgMCEAY7Cg04Uk48LAsDhRA8MVQPEF0GAgqYYwSRlycNcWskCkApIyEAOwAAAAAAAAAAAA==) no-repeat 100%, -webkit-linear-gradient(center bottom, #fff 85%, #eee 99%);\n    background: url(data:image/gif;base64,R0lGODlhEAAQAPQAAP///wAAAPDw8IqKiuDg4EZGRnp6egAAAFhYWCQkJKysrL6+vhQUFJycnAQEBDY2NmhoaAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAAFdyAgAgIJIeWoAkRCCMdBkKtIHIngyMKsErPBYbADpkSCwhDmQCBethRB6Vj4kFCkQPG4IlWDgrNRIwnO4UKBXDufzQvDMaoSDBgFb886MiQadgNABAokfCwzBA8LCg0Egl8jAggGAA1kBIA1BAYzlyILczULC2UhACH5BAkKAAAALAAAAAAQABAAAAV2ICACAmlAZTmOREEIyUEQjLKKxPHADhEvqxlgcGgkGI1DYSVAIAWMx+lwSKkICJ0QsHi9RgKBwnVTiRQQgwF4I4UFDQQEwi6/3YSGWRRmjhEETAJfIgMFCnAKM0KDV4EEEAQLiF18TAYNXDaSe3x6mjidN1s3IQAh+QQJCgAAACwAAAAAEAAQAAAFeCAgAgLZDGU5jgRECEUiCI+yioSDwDJyLKsXoHFQxBSHAoAAFBhqtMJg8DgQBgfrEsJAEAg4YhZIEiwgKtHiMBgtpg3wbUZXGO7kOb1MUKRFMysCChAoggJCIg0GC2aNe4gqQldfL4l/Ag1AXySJgn5LcoE3QXI3IQAh+QQJCgAAACwAAAAAEAAQAAAFdiAgAgLZNGU5joQhCEjxIssqEo8bC9BRjy9Ag7GILQ4QEoE0gBAEBcOpcBA0DoxSK/e8LRIHn+i1cK0IyKdg0VAoljYIg+GgnRrwVS/8IAkICyosBIQpBAMoKy9dImxPhS+GKkFrkX+TigtLlIyKXUF+NjagNiEAIfkECQoAAAAsAAAAABAAEAAABWwgIAICaRhlOY4EIgjH8R7LKhKHGwsMvb4AAy3WODBIBBKCsYA9TjuhDNDKEVSERezQEL0WrhXucRUQGuik7bFlngzqVW9LMl9XWvLdjFaJtDFqZ1cEZUB0dUgvL3dgP4WJZn4jkomWNpSTIyEAIfkECQoAAAAsAAAAABAAEAAABX4gIAICuSxlOY6CIgiD8RrEKgqGOwxwUrMlAoSwIzAGpJpgoSDAGifDY5kopBYDlEpAQBwevxfBtRIUGi8xwWkDNBCIwmC9Vq0aiQQDQuK+VgQPDXV9hCJjBwcFYU5pLwwHXQcMKSmNLQcIAExlbH8JBwttaX0ABAcNbWVbKyEAIfkECQoAAAAsAAAAABAAEAAABXkgIAICSRBlOY7CIghN8zbEKsKoIjdFzZaEgUBHKChMJtRwcWpAWoWnifm6ESAMhO8lQK0EEAV3rFopIBCEcGwDKAqPh4HUrY4ICHH1dSoTFgcHUiZjBhAJB2AHDykpKAwHAwdzf19KkASIPl9cDgcnDkdtNwiMJCshACH5BAkKAAAALAAAAAAQABAAAAV3ICACAkkQZTmOAiosiyAoxCq+KPxCNVsSMRgBsiClWrLTSWFoIQZHl6pleBh6suxKMIhlvzbAwkBWfFWrBQTxNLq2RG2yhSUkDs2b63AYDAoJXAcFRwADeAkJDX0AQCsEfAQMDAIPBz0rCgcxky0JRWE1AmwpKyEAIfkECQoAAAAsAAAAABAAEAAABXkgIAICKZzkqJ4nQZxLqZKv4NqNLKK2/Q4Ek4lFXChsg5ypJjs1II3gEDUSRInEGYAw6B6zM4JhrDAtEosVkLUtHA7RHaHAGJQEjsODcEg0FBAFVgkQJQ1pAwcDDw8KcFtSInwJAowCCA6RIwqZAgkPNgVpWndjdyohACH5BAkKAAAALAAAAAAQABAAAAV5ICACAimc5KieLEuUKvm2xAKLqDCfC2GaO9eL0LABWTiBYmA06W6kHgvCqEJiAIJiu3gcvgUsscHUERm+kaCxyxa+zRPk0SgJEgfIvbAdIAQLCAYlCj4DBw0IBQsMCjIqBAcPAooCBg9pKgsJLwUFOhCZKyQDA3YqIQAh+QQJCgAAACwAAAAAEAAQAAAFdSAgAgIpnOSonmxbqiThCrJKEHFbo8JxDDOZYFFb+A41E4H4OhkOipXwBElYITDAckFEOBgMQ3arkMkUBdxIUGZpEb7kaQBRlASPg0FQQHAbEEMGDSVEAA1QBhAED1E0NgwFAooCDWljaQIQCE5qMHcNhCkjIQAh+QQJCgAAACwAAAAAEAAQAAAFeSAgAgIpnOSoLgxxvqgKLEcCC65KEAByKK8cSpA4DAiHQ/DkKhGKh4ZCtCyZGo6F6iYYPAqFgYy02xkSaLEMV34tELyRYNEsCQyHlvWkGCzsPgMCEAY7Cg04Uk48LAsDhRA8MVQPEF0GAgqYYwSRlycNcWskCkApIyEAOwAAAAAAAAAAAA==) no-repeat 100%, -moz-linear-gradient(center bottom, #fff 85%, #eee 99%);\n    background: url(data:image/gif;base64,R0lGODlhEAAQAPQAAP///wAAAPDw8IqKiuDg4EZGRnp6egAAAFhYWCQkJKysrL6+vhQUFJycnAQEBDY2NmhoaAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAAFdyAgAgIJIeWoAkRCCMdBkKtIHIngyMKsErPBYbADpkSCwhDmQCBethRB6Vj4kFCkQPG4IlWDgrNRIwnO4UKBXDufzQvDMaoSDBgFb886MiQadgNABAokfCwzBA8LCg0Egl8jAggGAA1kBIA1BAYzlyILczULC2UhACH5BAkKAAAALAAAAAAQABAAAAV2ICACAmlAZTmOREEIyUEQjLKKxPHADhEvqxlgcGgkGI1DYSVAIAWMx+lwSKkICJ0QsHi9RgKBwnVTiRQQgwF4I4UFDQQEwi6/3YSGWRRmjhEETAJfIgMFCnAKM0KDV4EEEAQLiF18TAYNXDaSe3x6mjidN1s3IQAh+QQJCgAAACwAAAAAEAAQAAAFeCAgAgLZDGU5jgRECEUiCI+yioSDwDJyLKsXoHFQxBSHAoAAFBhqtMJg8DgQBgfrEsJAEAg4YhZIEiwgKtHiMBgtpg3wbUZXGO7kOb1MUKRFMysCChAoggJCIg0GC2aNe4gqQldfL4l/Ag1AXySJgn5LcoE3QXI3IQAh+QQJCgAAACwAAAAAEAAQAAAFdiAgAgLZNGU5joQhCEjxIssqEo8bC9BRjy9Ag7GILQ4QEoE0gBAEBcOpcBA0DoxSK/e8LRIHn+i1cK0IyKdg0VAoljYIg+GgnRrwVS/8IAkICyosBIQpBAMoKy9dImxPhS+GKkFrkX+TigtLlIyKXUF+NjagNiEAIfkECQoAAAAsAAAAABAAEAAABWwgIAICaRhlOY4EIgjH8R7LKhKHGwsMvb4AAy3WODBIBBKCsYA9TjuhDNDKEVSERezQEL0WrhXucRUQGuik7bFlngzqVW9LMl9XWvLdjFaJtDFqZ1cEZUB0dUgvL3dgP4WJZn4jkomWNpSTIyEAIfkECQoAAAAsAAAAABAAEAAABX4gIAICuSxlOY6CIgiD8RrEKgqGOwxwUrMlAoSwIzAGpJpgoSDAGifDY5kopBYDlEpAQBwevxfBtRIUGi8xwWkDNBCIwmC9Vq0aiQQDQuK+VgQPDXV9hCJjBwcFYU5pLwwHXQcMKSmNLQcIAExlbH8JBwttaX0ABAcNbWVbKyEAIfkECQoAAAAsAAAAABAAEAAABXkgIAICSRBlOY7CIghN8zbEKsKoIjdFzZaEgUBHKChMJtRwcWpAWoWnifm6ESAMhO8lQK0EEAV3rFopIBCEcGwDKAqPh4HUrY4ICHH1dSoTFgcHUiZjBhAJB2AHDykpKAwHAwdzf19KkASIPl9cDgcnDkdtNwiMJCshACH5BAkKAAAALAAAAAAQABAAAAV3ICACAkkQZTmOAiosiyAoxCq+KPxCNVsSMRgBsiClWrLTSWFoIQZHl6pleBh6suxKMIhlvzbAwkBWfFWrBQTxNLq2RG2yhSUkDs2b63AYDAoJXAcFRwADeAkJDX0AQCsEfAQMDAIPBz0rCgcxky0JRWE1AmwpKyEAIfkECQoAAAAsAAAAABAAEAAABXkgIAICKZzkqJ4nQZxLqZKv4NqNLKK2/Q4Ek4lFXChsg5ypJjs1II3gEDUSRInEGYAw6B6zM4JhrDAtEosVkLUtHA7RHaHAGJQEjsODcEg0FBAFVgkQJQ1pAwcDDw8KcFtSInwJAowCCA6RIwqZAgkPNgVpWndjdyohACH5BAkKAAAALAAAAAAQABAAAAV5ICACAimc5KieLEuUKvm2xAKLqDCfC2GaO9eL0LABWTiBYmA06W6kHgvCqEJiAIJiu3gcvgUsscHUERm+kaCxyxa+zRPk0SgJEgfIvbAdIAQLCAYlCj4DBw0IBQsMCjIqBAcPAooCBg9pKgsJLwUFOhCZKyQDA3YqIQAh+QQJCgAAACwAAAAAEAAQAAAFdSAgAgIpnOSonmxbqiThCrJKEHFbo8JxDDOZYFFb+A41E4H4OhkOipXwBElYITDAckFEOBgMQ3arkMkUBdxIUGZpEb7kaQBRlASPg0FQQHAbEEMGDSVEAA1QBhAED1E0NgwFAooCDWljaQIQCE5qMHcNhCkjIQAh+QQJCgAAACwAAAAAEAAQAAAFeSAgAgIpnOSoLgxxvqgKLEcCC65KEAByKK8cSpA4DAiHQ/DkKhGKh4ZCtCyZGo6F6iYYPAqFgYy02xkSaLEMV34tELyRYNEsCQyHlvWkGCzsPgMCEAY7Cg04Uk48LAsDhRA8MVQPEF0GAgqYYwSRlycNcWskCkApIyEAOwAAAAAAAAAAAA==) no-repeat 100%, linear-gradient(to bottom, #fff 85%, #eee 99%) 0 0;\n}\n\n.select2-container-active .select2-choice,\n.select2-container-active .select2-choices {\n    border: 1px solid #5897fb;\n    outline: none;\n\n    -webkit-box-shadow: 0 0 5px rgba(0, 0, 0, .3);\n            box-shadow: 0 0 5px rgba(0, 0, 0, .3);\n}\n\n.select2-dropdown-open .select2-choice {\n    border-bottom-color: transparent;\n    -webkit-box-shadow: 0 1px 0 #fff inset;\n            box-shadow: 0 1px 0 #fff inset;\n\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n\n    background-color: #eee;\n    background-image: -webkit-gradient(linear, left bottom, left top, color-stop(0, #fff), color-stop(0.5, #eee));\n    background-image: -webkit-linear-gradient(center bottom, #fff 0%, #eee 50%);\n    background-image: -moz-linear-gradient(center bottom, #fff 0%, #eee 50%);\n    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=\'#eeeeee\', endColorstr=\'#ffffff\', GradientType=0);\n    background-image: linear-gradient(to top, #fff 0%, #eee 50%);\n}\n\n.select2-dropdown-open.select2-drop-above .select2-choice,\n.select2-dropdown-open.select2-drop-above .select2-choices {\n    border: 1px solid #5897fb;\n    border-top-color: transparent;\n\n    background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #fff), color-stop(0.5, #eee));\n    background-image: -webkit-linear-gradient(center top, #fff 0%, #eee 50%);\n    background-image: -moz-linear-gradient(center top, #fff 0%, #eee 50%);\n    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=\'#eeeeee\', endColorstr=\'#ffffff\', GradientType=0);\n    background-image: linear-gradient(to bottom, #fff 0%, #eee 50%);\n}\n\n.select2-dropdown-open .select2-choice .select2-arrow {\n    background: transparent;\n    border-left: none;\n    filter: none;\n}\nhtml[dir="rtl"] .select2-dropdown-open .select2-choice .select2-arrow {\n    border-right: none;\n}\n\n.select2-dropdown-open .select2-choice .select2-arrow b {\n    background-position: -18px 1px;\n}\n\nhtml[dir="rtl"] .select2-dropdown-open .select2-choice .select2-arrow b {\n    background-position: -16px 1px;\n}\n\n.select2-hidden-accessible {\n    border: 0;\n    clip: rect(0 0 0 0);\n    height: 1px;\n    margin: -1px;\n    overflow: hidden;\n    padding: 0;\n    position: absolute;\n    width: 1px;\n}\n\n/* results */\n.select2-results {\n    max-height: 200px;\n    padding: 0 0 0 4px;\n    margin: 4px 4px 4px 0;\n    position: relative;\n    overflow-x: hidden;\n    overflow-y: auto;\n    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n}\n\nhtml[dir="rtl"] .select2-results {\n    padding: 0 4px 0 0;\n    margin: 4px 0 4px 4px;\n}\n\n.select2-results ul.select2-result-sub {\n    margin: 0;\n    padding-left: 0;\n}\n\n.select2-results li {\n    list-style: none;\n    display: list-item;\n    background-image: none;\n}\n\n.select2-results li.select2-result-with-children > .select2-result-label {\n    font-weight: bold;\n}\n\n.select2-results .select2-result-label {\n    padding: 3px 7px 4px;\n    margin: 0;\n    cursor: pointer;\n\n    min-height: 1em;\n\n    -webkit-touch-callout: none;\n      -webkit-user-select: none;\n         -moz-user-select: none;\n          -ms-user-select: none;\n              user-select: none;\n}\n\n.select2-results-dept-1 .select2-result-label { padding-left: 20px }\n.select2-results-dept-2 .select2-result-label { padding-left: 40px }\n.select2-results-dept-3 .select2-result-label { padding-left: 60px }\n.select2-results-dept-4 .select2-result-label { padding-left: 80px }\n.select2-results-dept-5 .select2-result-label { padding-left: 100px }\n.select2-results-dept-6 .select2-result-label { padding-left: 110px }\n.select2-results-dept-7 .select2-result-label { padding-left: 120px }\n\n.select2-results .select2-highlighted {\n    background: #3875d7;\n    color: #fff;\n}\n\n.select2-results li em {\n    background: #feffde;\n    font-style: normal;\n}\n\n.select2-results .select2-highlighted em {\n    background: transparent;\n}\n\n.select2-results .select2-highlighted ul {\n    background: #fff;\n    color: #000;\n}\n\n.select2-results .select2-no-results,\n.select2-results .select2-searching,\n.select2-results .select2-ajax-error,\n.select2-results .select2-selection-limit {\n    background: #f4f4f4;\n    display: list-item;\n    padding-left: 5px;\n}\n\n/*\ndisabled look for disabled choices in the results dropdown\n*/\n.select2-results .select2-disabled.select2-highlighted {\n    color: #666;\n    background: #f4f4f4;\n    display: list-item;\n    cursor: default;\n}\n.select2-results .select2-disabled {\n  background: #f4f4f4;\n  display: list-item;\n  cursor: default;\n}\n\n.select2-results .select2-selected {\n    display: none;\n}\n\n.select2-more-results.select2-active {\n    background: #f4f4f4 url(data:image/gif;base64,R0lGODlhEAAQAPQAAP///wAAAPDw8IqKiuDg4EZGRnp6egAAAFhYWCQkJKysrL6+vhQUFJycnAQEBDY2NmhoaAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAAFdyAgAgIJIeWoAkRCCMdBkKtIHIngyMKsErPBYbADpkSCwhDmQCBethRB6Vj4kFCkQPG4IlWDgrNRIwnO4UKBXDufzQvDMaoSDBgFb886MiQadgNABAokfCwzBA8LCg0Egl8jAggGAA1kBIA1BAYzlyILczULC2UhACH5BAkKAAAALAAAAAAQABAAAAV2ICACAmlAZTmOREEIyUEQjLKKxPHADhEvqxlgcGgkGI1DYSVAIAWMx+lwSKkICJ0QsHi9RgKBwnVTiRQQgwF4I4UFDQQEwi6/3YSGWRRmjhEETAJfIgMFCnAKM0KDV4EEEAQLiF18TAYNXDaSe3x6mjidN1s3IQAh+QQJCgAAACwAAAAAEAAQAAAFeCAgAgLZDGU5jgRECEUiCI+yioSDwDJyLKsXoHFQxBSHAoAAFBhqtMJg8DgQBgfrEsJAEAg4YhZIEiwgKtHiMBgtpg3wbUZXGO7kOb1MUKRFMysCChAoggJCIg0GC2aNe4gqQldfL4l/Ag1AXySJgn5LcoE3QXI3IQAh+QQJCgAAACwAAAAAEAAQAAAFdiAgAgLZNGU5joQhCEjxIssqEo8bC9BRjy9Ag7GILQ4QEoE0gBAEBcOpcBA0DoxSK/e8LRIHn+i1cK0IyKdg0VAoljYIg+GgnRrwVS/8IAkICyosBIQpBAMoKy9dImxPhS+GKkFrkX+TigtLlIyKXUF+NjagNiEAIfkECQoAAAAsAAAAABAAEAAABWwgIAICaRhlOY4EIgjH8R7LKhKHGwsMvb4AAy3WODBIBBKCsYA9TjuhDNDKEVSERezQEL0WrhXucRUQGuik7bFlngzqVW9LMl9XWvLdjFaJtDFqZ1cEZUB0dUgvL3dgP4WJZn4jkomWNpSTIyEAIfkECQoAAAAsAAAAABAAEAAABX4gIAICuSxlOY6CIgiD8RrEKgqGOwxwUrMlAoSwIzAGpJpgoSDAGifDY5kopBYDlEpAQBwevxfBtRIUGi8xwWkDNBCIwmC9Vq0aiQQDQuK+VgQPDXV9hCJjBwcFYU5pLwwHXQcMKSmNLQcIAExlbH8JBwttaX0ABAcNbWVbKyEAIfkECQoAAAAsAAAAABAAEAAABXkgIAICSRBlOY7CIghN8zbEKsKoIjdFzZaEgUBHKChMJtRwcWpAWoWnifm6ESAMhO8lQK0EEAV3rFopIBCEcGwDKAqPh4HUrY4ICHH1dSoTFgcHUiZjBhAJB2AHDykpKAwHAwdzf19KkASIPl9cDgcnDkdtNwiMJCshACH5BAkKAAAALAAAAAAQABAAAAV3ICACAkkQZTmOAiosiyAoxCq+KPxCNVsSMRgBsiClWrLTSWFoIQZHl6pleBh6suxKMIhlvzbAwkBWfFWrBQTxNLq2RG2yhSUkDs2b63AYDAoJXAcFRwADeAkJDX0AQCsEfAQMDAIPBz0rCgcxky0JRWE1AmwpKyEAIfkECQoAAAAsAAAAABAAEAAABXkgIAICKZzkqJ4nQZxLqZKv4NqNLKK2/Q4Ek4lFXChsg5ypJjs1II3gEDUSRInEGYAw6B6zM4JhrDAtEosVkLUtHA7RHaHAGJQEjsODcEg0FBAFVgkQJQ1pAwcDDw8KcFtSInwJAowCCA6RIwqZAgkPNgVpWndjdyohACH5BAkKAAAALAAAAAAQABAAAAV5ICACAimc5KieLEuUKvm2xAKLqDCfC2GaO9eL0LABWTiBYmA06W6kHgvCqEJiAIJiu3gcvgUsscHUERm+kaCxyxa+zRPk0SgJEgfIvbAdIAQLCAYlCj4DBw0IBQsMCjIqBAcPAooCBg9pKgsJLwUFOhCZKyQDA3YqIQAh+QQJCgAAACwAAAAAEAAQAAAFdSAgAgIpnOSonmxbqiThCrJKEHFbo8JxDDOZYFFb+A41E4H4OhkOipXwBElYITDAckFEOBgMQ3arkMkUBdxIUGZpEb7kaQBRlASPg0FQQHAbEEMGDSVEAA1QBhAED1E0NgwFAooCDWljaQIQCE5qMHcNhCkjIQAh+QQJCgAAACwAAAAAEAAQAAAFeSAgAgIpnOSoLgxxvqgKLEcCC65KEAByKK8cSpA4DAiHQ/DkKhGKh4ZCtCyZGo6F6iYYPAqFgYy02xkSaLEMV34tELyRYNEsCQyHlvWkGCzsPgMCEAY7Cg04Uk48LAsDhRA8MVQPEF0GAgqYYwSRlycNcWskCkApIyEAOwAAAAAAAAAAAA==) no-repeat 100%;\n}\n\n.select2-results .select2-ajax-error {\n    background: rgba(255, 50, 50, .2);\n}\n\n.select2-more-results {\n    background: #f4f4f4;\n    display: list-item;\n}\n\n/* disabled styles */\n\n.select2-container.select2-container-disabled .select2-choice {\n    background-color: #f4f4f4;\n    background-image: none;\n    border: 1px solid #ddd;\n    cursor: default;\n}\n\n.select2-container.select2-container-disabled .select2-choice .select2-arrow {\n    background-color: #f4f4f4;\n    background-image: none;\n    border-left: 0;\n}\n\n.select2-container.select2-container-disabled .select2-choice abbr {\n    display: none;\n}\n\n\n/* multiselect */\n\n.select2-container-multi .select2-choices {\n    height: auto !important;\n    height: 1%;\n    margin: 0;\n    padding: 0 5px 0 0;\n    position: relative;\n\n    border: 1px solid #aaa;\n    cursor: text;\n    overflow: hidden;\n\n    background-color: #fff;\n    background-image: -webkit-gradient(linear, 0% 0%, 0% 100%, color-stop(1%, #eee), color-stop(15%, #fff));\n    background-image: -webkit-linear-gradient(top, #eee 1%, #fff 15%);\n    background-image: -moz-linear-gradient(top, #eee 1%, #fff 15%);\n    background-image: linear-gradient(to bottom, #eee 1%, #fff 15%);\n}\n\nhtml[dir="rtl"] .select2-container-multi .select2-choices {\n    padding: 0 0 0 5px;\n}\n\n.select2-locked {\n  padding: 3px 5px 3px 5px !important;\n}\n\n.select2-container-multi .select2-choices {\n    min-height: 26px;\n}\n\n.select2-container-multi.select2-container-active .select2-choices {\n    border: 1px solid #5897fb;\n    outline: none;\n\n    -webkit-box-shadow: 0 0 5px rgba(0, 0, 0, .3);\n            box-shadow: 0 0 5px rgba(0, 0, 0, .3);\n}\n.select2-container-multi .select2-choices li {\n    float: left;\n    list-style: none;\n}\nhtml[dir="rtl"] .select2-container-multi .select2-choices li\n{\n    float: right;\n}\n.select2-container-multi .select2-choices .select2-search-field {\n    margin: 0;\n    padding: 0;\n    white-space: nowrap;\n}\n\n.select2-container-multi .select2-choices .select2-search-field input {\n    padding: 5px;\n    margin: 1px 0;\n\n    font-family: sans-serif;\n    font-size: 100%;\n    color: #666;\n    outline: 0;\n    border: 0;\n    -webkit-box-shadow: none;\n            box-shadow: none;\n    background: transparent !important;\n}\n\n.select2-container-multi .select2-choices .select2-search-field input.select2-active {\n    background: #fff url(data:image/gif;base64,R0lGODlhEAAQAPQAAP///wAAAPDw8IqKiuDg4EZGRnp6egAAAFhYWCQkJKysrL6+vhQUFJycnAQEBDY2NmhoaAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAAFdyAgAgIJIeWoAkRCCMdBkKtIHIngyMKsErPBYbADpkSCwhDmQCBethRB6Vj4kFCkQPG4IlWDgrNRIwnO4UKBXDufzQvDMaoSDBgFb886MiQadgNABAokfCwzBA8LCg0Egl8jAggGAA1kBIA1BAYzlyILczULC2UhACH5BAkKAAAALAAAAAAQABAAAAV2ICACAmlAZTmOREEIyUEQjLKKxPHADhEvqxlgcGgkGI1DYSVAIAWMx+lwSKkICJ0QsHi9RgKBwnVTiRQQgwF4I4UFDQQEwi6/3YSGWRRmjhEETAJfIgMFCnAKM0KDV4EEEAQLiF18TAYNXDaSe3x6mjidN1s3IQAh+QQJCgAAACwAAAAAEAAQAAAFeCAgAgLZDGU5jgRECEUiCI+yioSDwDJyLKsXoHFQxBSHAoAAFBhqtMJg8DgQBgfrEsJAEAg4YhZIEiwgKtHiMBgtpg3wbUZXGO7kOb1MUKRFMysCChAoggJCIg0GC2aNe4gqQldfL4l/Ag1AXySJgn5LcoE3QXI3IQAh+QQJCgAAACwAAAAAEAAQAAAFdiAgAgLZNGU5joQhCEjxIssqEo8bC9BRjy9Ag7GILQ4QEoE0gBAEBcOpcBA0DoxSK/e8LRIHn+i1cK0IyKdg0VAoljYIg+GgnRrwVS/8IAkICyosBIQpBAMoKy9dImxPhS+GKkFrkX+TigtLlIyKXUF+NjagNiEAIfkECQoAAAAsAAAAABAAEAAABWwgIAICaRhlOY4EIgjH8R7LKhKHGwsMvb4AAy3WODBIBBKCsYA9TjuhDNDKEVSERezQEL0WrhXucRUQGuik7bFlngzqVW9LMl9XWvLdjFaJtDFqZ1cEZUB0dUgvL3dgP4WJZn4jkomWNpSTIyEAIfkECQoAAAAsAAAAABAAEAAABX4gIAICuSxlOY6CIgiD8RrEKgqGOwxwUrMlAoSwIzAGpJpgoSDAGifDY5kopBYDlEpAQBwevxfBtRIUGi8xwWkDNBCIwmC9Vq0aiQQDQuK+VgQPDXV9hCJjBwcFYU5pLwwHXQcMKSmNLQcIAExlbH8JBwttaX0ABAcNbWVbKyEAIfkECQoAAAAsAAAAABAAEAAABXkgIAICSRBlOY7CIghN8zbEKsKoIjdFzZaEgUBHKChMJtRwcWpAWoWnifm6ESAMhO8lQK0EEAV3rFopIBCEcGwDKAqPh4HUrY4ICHH1dSoTFgcHUiZjBhAJB2AHDykpKAwHAwdzf19KkASIPl9cDgcnDkdtNwiMJCshACH5BAkKAAAALAAAAAAQABAAAAV3ICACAkkQZTmOAiosiyAoxCq+KPxCNVsSMRgBsiClWrLTSWFoIQZHl6pleBh6suxKMIhlvzbAwkBWfFWrBQTxNLq2RG2yhSUkDs2b63AYDAoJXAcFRwADeAkJDX0AQCsEfAQMDAIPBz0rCgcxky0JRWE1AmwpKyEAIfkECQoAAAAsAAAAABAAEAAABXkgIAICKZzkqJ4nQZxLqZKv4NqNLKK2/Q4Ek4lFXChsg5ypJjs1II3gEDUSRInEGYAw6B6zM4JhrDAtEosVkLUtHA7RHaHAGJQEjsODcEg0FBAFVgkQJQ1pAwcDDw8KcFtSInwJAowCCA6RIwqZAgkPNgVpWndjdyohACH5BAkKAAAALAAAAAAQABAAAAV5ICACAimc5KieLEuUKvm2xAKLqDCfC2GaO9eL0LABWTiBYmA06W6kHgvCqEJiAIJiu3gcvgUsscHUERm+kaCxyxa+zRPk0SgJEgfIvbAdIAQLCAYlCj4DBw0IBQsMCjIqBAcPAooCBg9pKgsJLwUFOhCZKyQDA3YqIQAh+QQJCgAAACwAAAAAEAAQAAAFdSAgAgIpnOSonmxbqiThCrJKEHFbo8JxDDOZYFFb+A41E4H4OhkOipXwBElYITDAckFEOBgMQ3arkMkUBdxIUGZpEb7kaQBRlASPg0FQQHAbEEMGDSVEAA1QBhAED1E0NgwFAooCDWljaQIQCE5qMHcNhCkjIQAh+QQJCgAAACwAAAAAEAAQAAAFeSAgAgIpnOSoLgxxvqgKLEcCC65KEAByKK8cSpA4DAiHQ/DkKhGKh4ZCtCyZGo6F6iYYPAqFgYy02xkSaLEMV34tELyRYNEsCQyHlvWkGCzsPgMCEAY7Cg04Uk48LAsDhRA8MVQPEF0GAgqYYwSRlycNcWskCkApIyEAOwAAAAAAAAAAAA==) no-repeat 100% !important;\n}\n\n.select2-default {\n    color: #999 !important;\n}\n\n.select2-container-multi .select2-choices .select2-search-choice {\n    padding: 3px 5px 3px 18px;\n    margin: 3px 0 3px 5px;\n    position: relative;\n\n    line-height: 13px;\n    color: #333;\n    cursor: default;\n    border: 1px solid #aaaaaa;\n\n    border-radius: 3px;\n\n    -webkit-box-shadow: 0 0 2px #fff inset, 0 1px 0 rgba(0, 0, 0, 0.05);\n            box-shadow: 0 0 2px #fff inset, 0 1px 0 rgba(0, 0, 0, 0.05);\n\n    background-clip: padding-box;\n\n    -webkit-touch-callout: none;\n      -webkit-user-select: none;\n         -moz-user-select: none;\n          -ms-user-select: none;\n              user-select: none;\n\n    background-color: #e4e4e4;\n    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=\'#eeeeee\', endColorstr=\'#f4f4f4\', GradientType=0);\n    background-image: -webkit-gradient(linear, 0% 0%, 0% 100%, color-stop(20%, #f4f4f4), color-stop(50%, #f0f0f0), color-stop(52%, #e8e8e8), color-stop(100%, #eee));\n    background-image: -webkit-linear-gradient(top, #f4f4f4 20%, #f0f0f0 50%, #e8e8e8 52%, #eee 100%);\n    background-image: -moz-linear-gradient(top, #f4f4f4 20%, #f0f0f0 50%, #e8e8e8 52%, #eee 100%);\n    background-image: linear-gradient(to bottom, #f4f4f4 20%, #f0f0f0 50%, #e8e8e8 52%, #eee 100%);\n}\nhtml[dir="rtl"] .select2-container-multi .select2-choices .select2-search-choice\n{\n    margin: 3px 5px 3px 0;\n    padding: 3px 18px 3px 5px;\n}\n.select2-container-multi .select2-choices .select2-search-choice .select2-chosen {\n    cursor: default;\n}\n.select2-container-multi .select2-choices .select2-search-choice-focus {\n    background: #d4d4d4;\n}\n\n.select2-search-choice-close {\n    display: block;\n    width: 12px;\n    height: 13px;\n    position: absolute;\n    right: 3px;\n    top: 4px;\n\n    font-size: 1px;\n    outline: none;\n    background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAAoCAYAAACiu5n/AAACLElEQVR42u3Zz0sUYRzH8bUISoyF1i5iXSooyYgOEXapZNYNojwU/aAfUAT9A4YhUgdxt1To0KFIBCMIvEcUEXntUtivpYuUhYFIdDBMmD69he/hObgsbSnb13ngdZjZhX3eO8/MDrMpSctKErwsg//HUSgU7uNYsB3hHla4CybqEoRPaMJGFCEMewxuxnsIk5iALPqg1yVdj9eQGUdjiuE1eAs+QOYztrsMJqwFk8EyHguW95klD+ZD08gsYvBFCBPYgHXBOT1UNpg3ncQpnAicRbrCCQ3j8SIf5QvYEWxvxnlb0mWDr0MIvcOaCiayC78gRKmlH+WDbaIjkJnDzgq/+VHIvMWqag3ehBkIAxXGdkAIDVRlsE24H9//4ty9hju4Hej710c5m83WYging32HMYjMnwSvx75UlQ+iOiDEaEMLZiA8dPc7TFQDnkGYxQ8Iz9Hs8k4riqIa4l5ApojVbm8tiduPL5CZRs5lMGFH8DNYxo+C5d3tMfgohJeow0qMQujxuqRb0RBsZ3DA2ZIuP5LgJDgJToKr4ZHOWjTOy+fzNa6DiezCFGReod1lMGF3IYzjMm5B5rirYIJyEJ4iHezfjW+YRr2n4EHE2LrAa1cg5DwFj2DWLlKljn67p+B+CIdKPAaOsddTcBOEKbTZvjp0Qvjo8Sp9DjJFfIVMjBsef4f34AHeYAxX0VfqMbDnfw97IXMTta6DLbobcxBa3Qdb9BPE2LZQ8G98530ecQi/2QAAAABJRU5ErkJggg==) right top no-repeat;\n}\nhtml[dir="rtl"] .select2-search-choice-close {\n    right: auto;\n    left: 3px;\n}\n\n.select2-container-multi .select2-search-choice-close {\n    left: 3px;\n}\n\nhtml[dir="rtl"] .select2-container-multi .select2-search-choice-close {\n    left: auto;\n    right: 2px;\n}\n\n.select2-container-multi .select2-choices .select2-search-choice .select2-search-choice-close:hover {\n  background-position: right -11px;\n}\n.select2-container-multi .select2-choices .select2-search-choice-focus .select2-search-choice-close {\n    background-position: right -11px;\n}\n\n/* disabled styles */\n.select2-container-multi.select2-container-disabled .select2-choices {\n    background-color: #f4f4f4;\n    background-image: none;\n    border: 1px solid #ddd;\n    cursor: default;\n}\n\n.select2-container-multi.select2-container-disabled .select2-choices .select2-search-choice {\n    padding: 3px 5px 3px 5px;\n    border: 1px solid #ddd;\n    background-image: none;\n    background-color: #f4f4f4;\n}\n\n.select2-container-multi.select2-container-disabled .select2-choices .select2-search-choice .select2-search-choice-close {    display: none;\n    background: none;\n}\n/* end multiselect */\n\n\n.select2-result-selectable .select2-match,\n.select2-result-unselectable .select2-match {\n    text-decoration: underline;\n}\n\n.select2-offscreen, .select2-offscreen:focus {\n    clip: rect(0 0 0 0) !important;\n    width: 1px !important;\n    height: 1px !important;\n    border: 0 !important;\n    margin: 0 !important;\n    padding: 0 !important;\n    overflow: hidden !important;\n    position: absolute !important;\n    outline: 0 !important;\n    left: 0px !important;\n    top: 0px !important;\n}\n\n.select2-display-none {\n    display: none;\n}\n\n.select2-measure-scrollbar {\n    position: absolute;\n    top: -10000px;\n    left: -10000px;\n    width: 100px;\n    height: 100px;\n    overflow: scroll;\n}\n\n/* Retina-ize icons */\n\n@media only screen and (-webkit-min-device-pixel-ratio: 1.5), only screen and (min-resolution: 2dppx)  {\n    .select2-search input,\n    .select2-search-choice-close,\n    .select2-container .select2-choice abbr,\n    .select2-container .select2-choice .select2-arrow b {\n        background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAABQCAYAAADSm7GJAAADFElEQVR42u2dsW4TQRBAI0ERCYpDpAUdJX/hAlxQ3SekovYXIIvKEiBRIUF1lHT+BP+Br0TCCCsFLW5cmCS3jKWNNFrdZu+EOG7sd9Irkl0p8r3s7Mzs5XLinIMD5uhvAIIBwYBgaMnNNZvNyj0nkUvPQbAdtDjnCSU3zkGwEbS4iOToHATbE6wptVwEGyUhcaW/JkTbT7JcCpIse4K7SC4pk4wRXreE5ZUMUwezgh03lT0YyKKBOhjoZHUi1oCf7mkYohd9ACVFrj50HgxzmtQifKwF15L1fxC8UD9/EQxzHtxC8KiD4FHPNWMhuIACwd33h3kLuXOZ2mc4yyLRZS1kCG6H3uc2Mbl+LO9Z8FRwEaYINnpDdWKVIEdwC/QVC4l97nk6sUqwQHA3wbGEa9Sj4CCxSlIguHtZMg8Tq/4Edy/bLNXB4/G4FKJ1sJ7zTwTrhMuTU3f+NVqc84SSG+bEJR99a3BoaHERybE5HDYYFKwptVwEGyUhcRX5PufBRoiH4Tg80WFMcBfJPJNljfC6JSzzVCUrGMHswUAWDdTBQCcLOveiCdEBnCYBb9kBBAOCAcGAYEDw0XP0NwDBgGBAMCAYEAwIHvD7QzJhIlSCE2rF0o9lav4eBBt5JWHR8EfzdYATfgkFgg2g5J4LdSD1WrjyXDeIPkfwsNErV6/Y38J34aXwWHgkvBJWwi74RSgQPGD8nrtRwrbCe+G0YX9+KHzyc2rPRsgQPFzBEyVrJ7xLvNTsjvBBuFQreYLg4Qpeqv32m3BP+YxJPhUulOAKwQMl2HsnymNK8mudeCF44IK9rCcdBD8XrhBsS/BTBBOibwTPCNEGCFqSX4X7LeSeCRdK8BLBwy6TdIPjo3A3kUF/pkyy1+ioPVsv8KxB7gPhi7BVcndCpqYheKCtSt1+vBR+CG+EZ8IL4a3wU69cRYlgC4cN4UFD/LDBNVAi2NZxYa0Ixe5ikhFs58B/2SC48mOZUMYkI/jw/61diWDzgtOSEWxdcFpyhWDTgtOSEWxccCgZwfZJ9akrJXiKYEDwMfAHMSYobVemsdsAAAAASUVORK5CYII=) !important;\n        background-repeat: no-repeat !important;\n        background-size: 60px 40px !important;\n    }\n\n    .select2-search input {\n        background-position: 100% -21px !important;\n    }\n}\ndiv.ago-box div.box-header-clickable {\n  cursor: pointer;\n  *cursor: hand;\n}.input-group-btn > .counter {\r\n    float: none !important;\r\n    margin-left: 0px !important;\r\n}.tag {\r\n	display: inline-block;\r\n	float: left;\r\n	min-width: 10px;\r\n	padding: 3px 7px;\r\n	font-size: 12px;\r\n	font-weight: bold;\r\n	line-height: 1;\r\n	color: #ffffff;\r\n	text-align: left;\r\n    white-space: normal;\r\n	vertical-align: baseline;\r\n	background-color: #999999;\r\n	border-radius: 10px;\r\n	margin-right: 3px;\r\n    margin-top: 5px;\r\n}\r\n\r\n.tag:first-child {\r\n	margin-left: 0;	\r\n}\r\n\r\n.tag > a {\r\n	color: #ffffff;\r\n	font-size: 17px;\r\n	line-height: 12px;\r\n	position: relative;\r\n	top: 2px;\r\n}\r\n.tag > a:hover {\r\n	color: #ffffff;\r\n	text-decoration: none;\r\n}\r\n\r\nspan.tag:after {\r\n	content: "\\00a0";\r\n}\r\n \r\nspan.tag:last-child:after {\r\n	content: "";\r\n}\r\n\r\n.newTagBtn {\r\n    float: left;\r\n}\r\n@media(max-width:640px) {\r\n    div.datepicker {\r\n        min-width: 100%;\r\n        max-width: 100%;\r\n        left: 0 !important;\r\n    }\r\n}\r\n\r\n@media(min-width:640px) {\r\n    div.datepicker {\r\n        min-width: 200px;\r\n        max-width: 320px;\r\n    }\r\n}\r\n\r\n.datepicker table > tbody > tr > td {\r\n	padding: 1px;\r\n}\r\n/*!\r\n * Tab drop for Bootstrap\r\n *\r\n * Copyright 2012 Stefan Petre\r\n * Licensed under the Apache License v2.0\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n */\r\n.nav-tabs,\r\n.nav-pills {\r\n  position: relative;\r\n}\r\n.loading {\r\n    text-align: center;\r\n}\r\n\r\n.loading i {\r\n    vertical-align: text-top;\r\n}\r\n\r\ndiv.loading{\r\n    font-size: 6em;\r\n}\r\n\r\ndiv.loading.loading-small {\r\n    margin-right: 5px;\r\n    font-size: 2em;\r\n}.refresher {\r\n    margin-left: 5px;\r\n    color: #333333;\r\n}\r\n\r\n.input-group-btn > .refresher {\r\n    float: none !important;\r\n    margin-left: 0px !important;\r\n}\r\n.time-moment {\r\n    white-space: nowrap;\r\n}\r\n.details-btn.a {\r\n    margin-left: 3px\r\n}\r\n.file-upload {\r\n  padding-left: 0 !important;\r\n}\r\n\r\n.fileinput-button {\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n.fileinput-button input {\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  margin: 0;\r\n  opacity: 0;\r\n  -ms-filter: \'alpha(opacity=0)\';\r\n  direction: ltr;\r\n  cursor: pointer;\r\n}\r\n\r\n.file-upload-dropzone_hover {\r\n  background-color: #ff7171;\r\n}\r\n\r\n/* Fixes for IE < 8 */\r\n@media screen\\9 {\r\n  .fileinput-button input {\r\n    filter: alpha(opacity=0);\r\n    font-size: 100%;\r\n    height: 100%;\r\n  }\r\n}.filtered-list .filters-box .title {\n  width: 50%;\n  margin-top: -1px;\n}\n\n@media (max-width: 768px) {\n  .filtered-list .filters-box .title {\n    width: 55%;\n  }\n}\n\n.filtered-list .filters-box .title label {\n  margin: 0;\n  line-height: 33px;\n}\n\n.filtered-list .filters-box .title label > i:first-child {\n  margin-right: 10px;\n  margin-left: 10px;\n}\n\n.filtered-list .filters-box .title label > i:nth-child(2) {\n  margin-right: 10px;\n  margin-left: -10px;\n}\n\n.filtered-list .filters-box .ago-box {\n  margin-bottom: 5px;\n}\n\n.filtered-list .box-toolbox label.pull-left {\n  margin: 0;\n  line-height: 33px;\n}\n\n.filtered-list .filteringComponent .nodePanel .nodeData {\n  padding: 5px;\n  margin-bottom: 5px;\n  background-color: #fafafa;\n  border: 1px solid rgba(0, 0, 0, 0.14);\n  -webkit-border-radius: 4px;\n     -moz-border-radius: 4px;\n          border-radius: 4px;\n  box-sizing: border-box;\n}\n\n.filtered-list .filteringComponent .nodePanel .nodeData .form-group {\n  margin: 0 5px;\n}\n\n.filtered-list .filteringComponent .nodePanel .nodeData .pathLookup a {\n  display: block;\n  width: 100%;\n  height: 34px;\n  padding: 6px 12px;\n  font-size: 14px;\n  line-height: 1.42857;\n  color: #555555;\n  vertical-align: middle;\n  background-color: white;\n  border: 1px solid #cccccc;\n  border-radius: 4px;\n  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);\n          box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);\n  -webkit-transition: border-color ease-in-out 0.15s, box-shadow ease-in-out 0.15s;\n          transition: border-color ease-in-out 0.15s, box-shadow ease-in-out 0.15s;\n}\n\n.filtered-list .filteringComponent .nodePanel .nodeData .pathLookup a:focus {\n  border-color: #66afe9;\n  outline: 0;\n  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 8px rgba(102, 175, 233, 0.6);\n          box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 8px rgba(102, 175, 233, 0.6);\n}\n\n.filtered-list .filteringComponent .nodePanel .nodeData .pathLookup a[disabled],\n.filtered-list .filteringComponent .nodePanel .nodeData .pathLookup a[readonly] {\n  cursor: not-allowed;\n  background-color: #eeeeee;\n}\n\n.filtered-list .filteringComponent .nodePanel .nodeData .errorsList {\n  margin-bottom: 15px;\n  color: #cc360c;\n  list-style-type: square;\n}\n\n.filtered-list .filteringComponent .nodePanel .nodeData:hover {\n  cursor: pointer;\n  background-color: #E8F1FF;\n}\n\n.filtered-list .filteringComponent .nodePanel .nodeData.hasError {\n  background-color: #ffddd9;\n}\n\n.filtered-list .filteringComponent .nodePanel .nodeChildren {\n  margin: 0 0 0 20px;\n}.editable {\r\n	cursor: pointer;\r\n}\r\n\r\n.waiting {\r\n	content: url(data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH+GkNyZWF0ZWQgd2l0aCBhamF4bG9hZC5pbmZvACH5BAAKAAAAIf8LTkVUU0NBUEUyLjADAQAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQACgABACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkEAAoAAgAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkEAAoAAwAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkEAAoABAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQACgAFACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQACgAGACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAAKAAcALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==);\r\n}\r\n\r\nform *[inline-edit] span.editable,\r\nform *[inline-edit] small.editable {\r\n	/* from form-control-static */\r\n	margin-bottom: 0;\r\n	padding-top: 7px;\r\n	display: block;\r\n	/* from form-control */\r\n	min-height: 34px;\r\n}\r\n\r\n.table tbody > tr > td span.editable,\r\n.table tbody > tr > td small.editable {\r\n	/* from form-control-static */\r\n	display: block;\r\n	/* from form-control */\r\n	min-height: 34px;\r\n}ul.ous {\r\n    display: inline;\r\n    margin: 0;\r\n    padding: 0;\r\n}\r\n\r\nul.ous li {\r\n    float: left;\r\n    display: inline;\r\n    list-style: none;\r\n    margin: 0;\r\n    padding: 0;\r\n}\r\n\r\nul.ous li:after {\r\n    content: ",\\00a0";\r\n}\r\n\r\nul.ous li:last-child:after {\r\n    content: "";\r\n}\r\nul.roles {\r\n    display: inline;\r\n    margin: 0;\r\n    padding: 0;\r\n}\r\n\r\nul.roles li {\r\n    float: left;\r\n    display: inline;\r\n    list-style: none;\r\n    margin: 0;\r\n    padding: 0;\r\n}\r\n\r\nul.roles li:after {\r\n    content: "\\00a0";\r\n}\r\n\r\nul.roles li:last-child:after {\r\n    content: "";\r\n}\r\n/*\r\n@license\r\n\r\ndhtmlxGantt v.3.1.0 Stardard\r\nThis software is covered by GPL license. You also can obtain Commercial or Enterprise license to use it in non-GPL project - please contact sales@dhtmlx.com. Usage without proper license is prohibited.\r\n\r\n(c) Dinamenta, UAB.\r\n*/\r\n.gridHoverStyle,.gridSelection,.timelineSelection{background-color:#fff3a1}.gantt_grid_scale .gantt_grid_head_cell{color:#a6a6a6;border-top:none!important;border-right:none!important}.gantt_grid_data .gantt_cell{border-right:none;color:#454545}.gantt_task_link .gantt_link_arrow_right{border-width:6px;margin-top:-3px}.gantt_task_link .gantt_link_arrow_left{border-width:6px;margin-left:-6px;margin-top:-3px}.gantt_task_link .gantt_link_arrow_down,.gantt_task_link .gantt_link_arrow_top{border-width:6px}.gantt_task_line .gantt_task_progress_drag{bottom:-4px;height:16px;margin-left:-8px;width:16px}.chartHeaderBg{background-color:#fff}.gantt_task .gantt_task_scale .gantt_scale_cell{color:#a6a6a6;border-right:1px solid #ebebeb}.gantt_row.gantt_project,.gantt_row.odd.gantt_project{background-color:#edffef}.gantt_task_row.gantt_project,.gantt_task_row.odd.gantt_project{background-color:#f5fff6}.gantt_task_line.gantt_project{background-color:#65c16f;border:1px solid #3c9445}.gantt_task_line.gantt_project .gantt_task_progress{background-color:#46ad51}.buttonBg{background:#fff}.gantt_cal_light .gantt_btn_set{margin:5px 10px}.gantt_btn_set.gantt_cancel_btn_set{background:#fff;color:#454545;border:1px solid #cecece}.gantt_btn_set.gantt_save_btn_set{background:#3db9d3;text-shadow:0 -1px 0 #248a9f;color:#fff}.gantt_btn_set.gantt_delete_btn_set{background:#ec8e00;text-shadow:0 -1px 0 #a60;color:#fff}.gantt_cal_light_wide{padding-left:0!important;padding-right:0!important}.gantt_cal_light_wide .gantt_cal_larea{border-left:none!important;border-right:none!important}.dhtmlx_popup_button.dhtmlx_ok_button{background:#3db9d3;text-shadow:0 -1px 0 #248a9f;color:#fff;font-weight:700;border-width:0}.dhtmlx_popup_button.dhtmlx_cancel_button{font-weight:700;color:#454544}.gantt_qi_big_icon.icon_edit{color:#454545;background:#fff}.gantt_qi_big_icon.icon_delete{text-shadow:0 -1px 0 #a60;background:#ec8e00;color:#fff;border-width:0}.gantt_container{font-family:Arial;font-size:13px;border:1px solid #cecece;position:relative;white-space:nowrap}.gantt_grid{border-right:1px solid #cecece}.gantt_task_scroll{overflow-x:scroll}.gantt_task{position:relative}.gantt_grid,.gantt_task{overflow-x:hidden;overflow-y:hidden;display:inline-block;vertical-align:top}.gantt_grid_scale,.gantt_task_scale{color:#6b6b6b;font-size:12px;border-bottom:1px solid #cecece;background-color:#fff}.gantt_scale_line{box-sizing:border-box;-moz-box-sizing:border-box;border-top:1px solid #cecece}.gantt_scale_line:first-child{border-top:none}.gantt_grid_head_cell{display:inline-block;vertical-align:top;border-right:1px solid #cecece;text-align:center;position:relative;cursor:default;height:100%;-moz-user-select:-moz-none;-webkit-user-select:none;-user-select:none;overflow:hidden}.gantt_scale_line{clear:both}.gantt_grid_data{width:100%;overflow:hidden}.gantt_row{position:relative;-webkit-user-select:none;-moz-user-select:none;-moz-user-select:-moz-none}.gantt_add,.gantt_grid_head_add{width:100%;height:100%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NTQ3MjMyMENDNkI0MTFFMjk4MTI5QTg3MDhFNDVDQTkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NTQ3MjMyMERDNkI0MTFFMjk4MTI5QTg3MDhFNDVDQTkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1NDcyMzIwQUM2QjQxMUUyOTgxMjlBODcwOEU0NUNBOSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1NDcyMzIwQkM2QjQxMUUyOTgxMjlBODcwOEU0NUNBOSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PshZT8UAAABbSURBVHjaYrTdeZmBEsCER+4wEP+H4sPkGGCDg020ARR7gb4GIAcYDKMDdPnDyAbYkGG5DVW9cIQMvUdBBAuUY4vDz8iAcZinA2zgCHqAYQMseAywJcYFAAEGAM+UFGuohFczAAAAAElFTkSuQmCC);background-position:center center;background-repeat:no-repeat;cursor:pointer;position:relative;-moz-opacity:.3;opacity:.3}.gantt_grid_head_cell.gantt_grid_head_add{-moz-opacity:.6;opacity:.6;top:0}.gantt_grid_head_cell.gantt_grid_head_add:hover{-moz-opacity:1;opacity:1}.gantt_grid_data .gantt_row.odd:hover,.gantt_grid_data .gantt_row:hover{background-color:#fff3a1}.gantt_grid_data .gantt_row.odd:hover .gantt_add,.gantt_grid_data .gantt_row:hover .gantt_add{-moz-opacity:1;opacity:1}.gantt_row,.gantt_task_row{border-bottom:1px solid #ebebeb;background-color:#fff}.gantt_row.odd,.gantt_task_row.odd{background-color:#fff}.gantt_cell,.gantt_grid_head_cell,.gantt_row,.gantt_scale_cell,.gantt_task_cell,.gantt_task_row{box-sizing:border-box;-moz-box-sizing:border-box}.gantt_grid_head_cell,.gantt_scale_cell{line-height:inherit}.gantt_grid_scale .gantt_grid_column_resize_wrap{cursor:col-resize;position:absolute;width:13px}.gantt_grid_column_resize_wrap .gantt_grid_column_resize{background-color:#cecece;height:100%;width:1px;margin:0 auto}.gantt_grid .gantt_grid_resize_wrap{cursor:col-resize;position:absolute;width:13px;z-index:1}.gantt_grid_resize_wrap .gantt_grid_resize{background-color:#cecece;width:1px;margin:0 auto}.gantt_drag_marker.gantt_grid_resize_area{background-color:rgba(231,231,231,.5);border-left:1px solid #cecece;border-right:1px solid #cecece;height:100%;width:100%;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}.gantt_cell{display:inline-block;vertical-align:top;border-right:1px solid #ebebeb;padding-left:6px;padding-right:6px;height:100%;overflow:hidden;white-space:nowrap;font-size:13px}.gantt_grid_data .gantt_last_cell,.gantt_grid_scale .gantt_last_cell,.gantt_task_bg .gantt_last_cell,.gantt_task_scale .gantt_last_cell{border-right-width:0}.gantt_task_bg{overflow:hidden}.gantt_scale_cell{display:inline-block;white-space:nowrap;overflow:hidden;border-right:1px solid #cecece;text-align:center;height:100%}.gantt_task_cell{display:inline-block;height:100%;border-right:1px solid #ebebeb}.gantt_ver_scroll{width:0;background-color:transparent;height:1px;overflow-x:hidden;overflow-y:scroll;display:none;position:absolute;right:0}.gantt_ver_scroll>div{width:1px;height:1px}.gantt_hor_scroll{height:0;background-color:transparent;width:100%;clear:both;overflow-x:scroll;overflow-y:hidden;display:none}.gantt_hor_scroll>div{width:5000px;height:1px}.gantt_tree_indent{width:15px;height:100%;display:inline-block}.gantt_tree_content,.gantt_tree_icon{vertical-align:top}.gantt_tree_icon{width:28px;height:100%;display:inline-block;background-repeat:no-repeat;background-position:center center}.gantt_tree_content{height:100%;display:inline-block}.gantt_tree_icon.gantt_open{background-image:url(data:image/gif;base64,R0lGODlhEgASALMJAMrKyt3d3ejp6d7f3+/v75aWlvf39////wAAAP///wAAAAAAAAAAAAAAAAAAAAAAACH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4wLWMwNjAgNjEuMTM0Nzc3LCAyMDEwLzAyLzEyLTE3OjMyOjAwICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6M0I5RTczQjVDMDdBMTFFMTgxRjc4Mzk4M0Q3MjVFQzAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6M0I5RTczQjZDMDdBMTFFMTgxRjc4Mzk4M0Q3MjVFQzAiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozQjlFNzNCM0MwN0ExMUUxODFGNzgzOTgzRDcyNUVDMCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozQjlFNzNCNEMwN0ExMUUxODFGNzgzOTgzRDcyNUVDMCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAEAAAkALAAAAAASABIAAARJMMlJq704661B+SAIXAVhnKhBFKSZnmuLImhslXPN3ibi+6pdBXc4IIpB2YkGE1IKAoL0ICUInJNCYMDtDgJYiScUGnHO6LQkAgA7);width:18px;cursor:pointer}.gantt_tree_icon.gantt_close{background-image:url(data:image/gif;base64,R0lGODlhEgASALMJAMrKyt3d3ejp6d7f3+/v75aWlvf39wAAAP///////wAAAAAAAAAAAAAAAAAAAAAAACH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4wLWMwNjAgNjEuMTM0Nzc3LCAyMDEwLzAyLzEyLTE3OjMyOjAwICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzY0QzNGM0VDMDdBMTFFMUE3MDlCNUM2QjU1NDA5RjgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MzY0QzNGM0ZDMDdBMTFFMUE3MDlCNUM2QjU1NDA5RjgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozNjRDM0YzQ0MwN0ExMUUxQTcwOUI1QzZCNTU0MDlGOCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozNjRDM0YzREMwN0ExMUUxQTcwOUI1QzZCNTU0MDlGOCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAEAAAkALAAAAAASABIAAARDMMlJq704661B+SAIXAVhnKhBFKSZnmv7wqxVzmpd3Uff5zKEUAi0uV4xm4DAbBIEOkohMKhaB4HoxBMKjTjgsFgSAQA7);width:18px;cursor:pointer}.gantt_tree_icon.gantt_blank{width:18px}.gantt_tree_icon.gantt_folder_open{background-image:url(data:image/gif;base64,R0lGODlhEgASAJECAJeXl7Gvrf///wAAACH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4wLWMwNjAgNjEuMTM0Nzc3LCAyMDEwLzAyLzEyLTE3OjMyOjAwICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NTdDRDM3QzVDMDZEMTFFMUJGMzhFMDhCN0RGRjBGQ0YiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NTdDRDM3QzZDMDZEMTFFMUJGMzhFMDhCN0RGRjBGQ0YiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1N0NEMzdDM0MwNkQxMUUxQkYzOEUwOEI3REZGMEZDRiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMzdDNEMwNkQxMUUxQkYzOEUwOEI3REZGMEZDRiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAEAAAIALAAAAAASABIAAAIzlI+pywcPm3mhWgkCsjBOvVkimElG9ZlCBlXd+2XjjLKg5GqoeZXqvsOQXK/ijUZTKVUFADs=)}.gantt_tree_icon.gantt_folder_closed{background-image:url(data:image/gif;base64,R0lGODlhEgASAJECAJeXl7Gvrf///wAAACH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4wLWMwNjAgNjEuMTM0Nzc3LCAyMDEwLzAyLzEyLTE3OjMyOjAwICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NTAyMTU1RTNDMDZEMTFFMUJGNzZCRThBRkFCRjg4MTIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NTAyMTU1RTRDMDZEMTFFMUJGNzZCRThBRkFCRjg4MTIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1MDIxNTVFMUMwNkQxMUUxQkY3NkJFOEFGQUJGODgxMiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1MDIxNTVFMkMwNkQxMUUxQkY3NkJFOEFGQUJGODgxMiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAEAAAIALAAAAAASABIAAAIwlI+pywcPm3mhWgkCsjBOvVkimElG9ZlCuYIY6TYs+6bmHDO4igfdD3GNhheV0VQAADs=)}.gantt_tree_icon.gantt_file{background-image:url(data:image/gif;base64,R0lGODlhEgASAJECAJeXl7Gvrf///wAAACH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4wLWMwNjAgNjEuMTM0Nzc3LCAyMDEwLzAyLzEyLTE3OjMyOjAwICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NzkxQzI4RjZDMDZEMTFFMTgwRjhBQURDQzI3NDU3QUEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NzkxQzI4RjdDMDZEMTFFMTgwRjhBQURDQzI3NDU3QUEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo3OTFDMjhGNEMwNkQxMUUxODBGOEFBRENDMjc0NTdBQSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3OTFDMjhGNUMwNkQxMUUxODBGOEFBRENDMjc0NTdBQSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAEAAAIALAAAAAASABIAAAIylI+pwN16QJiUQiFThRlJm3RRFYSlR5qXMKmXaMDuuMoyOi8n/e6xn8NMHETgh5RaKQsAOw==)}.gantt_grid_head_cell .gantt_sort{position:absolute;right:5px;top:8px;width:7px;height:13px;background-repeat:no-repeat;background-position:center center}.gantt_grid_head_cell .gantt_sort.gantt_asc{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAANCAYAAABlyXS1AAAARUlEQVR4nGNgQAKGxib/GbABkIS7b8B/DAUwCRiGK0CXwFBAb1DfP/U/LszwHwi2X7qFgUEArBtdAVwCBmAKMCSQFSDzAWXXaOHsXeqkAAAAAElFTkSuQmCC)}.gantt_grid_head_cell .gantt_sort.gantt_desc{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAANCAYAAABlyXS1AAAARUlEQVR42mNgQAL1/VP/M2ADIIntF2/9x1AAlrh0C47hCmA60DFYwX88gIFGwNDY5D8uDFbg7hvwHx2jmIBTAlkB0e4BAEjlaNtBWJPnAAAAAElFTkSuQmCC)}.gantt_inserted,.gantt_updated{font-weight:700}.gantt_deleted{text-decoration:line-through}.gantt_invalid{background-color:FFE0E0}.gantt_error{color:red}.gantt_status{right:1px;padding:5px 10px;background:rgba(155,155,155,.1);position:absolute;top:1px;-webkit-transition:opacity .2s;transition:opacity .2s;opacity:0}.gantt_status.gantt_status_visible{opacity:1}#gantt_ajax_dots span{-webkit-transition:opacity .2s;transition:opacity .2s;background-repeat:no-repeat;opacity:0}#gantt_ajax_dots span.gantt_dot_visible{opacity:1}.dhtmlx_message_area{position:fixed;right:5px;width:250px;z-index:1000}.dhtmlx-info{min-width:120px;font-family:Arial;z-index:10000;margin:5px 5px 10px;-webkit-transition:all .5s ease;-moz-transition:all .5s ease;-o-transition:all .5s ease;transition:all .5s ease}.dhtmlx-info.hidden{height:0;padding:0;border-width:0;margin:0;overflow:hidden}.dhtmlx_modal_box{overflow:hidden;display:inline-block;min-width:250px;width:250px;text-align:center;position:fixed;z-index:20000;box-shadow:3px 3px 3px rgba(0,0,0,.07);font-family:Arial;border-radius:6px;border:1px solid #cecece;background:#fff}.dhtmlx_popup_title{border-top-left-radius:6px;border-top-right-radius:6px;border-width:0}.dhtmlx_button,.dhtmlx_popup_button{border:1px solid #cecece;height:30px;line-height:30px;display:inline-block;margin:0 5px;border-radius:4px;background:#fff}.dhtmlx-info,.dhtmlx_button,.dhtmlx_popup_button{user-select:none;-webkit-user-select:none;-moz-user-select:-moz-none;cursor:pointer}.dhtmlx_popup_text{overflow:hidden}.dhtmlx_popup_controls{border-radius:6px;padding:10px}.dhtmlx_popup_button{min-width:100px}div.dhx_modal_cover{background-color:#000;cursor:default;filter:alpha(opacity=20);opacity:.2;position:fixed;z-index:19999;left:0;top:0;width:100%;height:100%;border:none;zoom:1}.dhtmlx-info img,.dhtmlx_modal_box img{float:left;margin-right:20px}.dhtmlx-alert-error,.dhtmlx-confirm-error{border:1px solid red}.dhtmlx_button input,.dhtmlx_popup_button div{border-radius:4px;font-size:14px;-moz-box-sizing:content-box;box-sizing:content-box;padding:0;margin:0;vertical-align:top}.dhtmlx_popup_title{color:#fff;text-shadow:1px 1px #000;height:40px;line-height:40px;font-size:20px}.dhtmlx_popup_text{margin:15px 15px 5px;font-size:14px;color:#000;min-height:30px;border-radius:6px}.dhtmlx-error,.dhtmlx-info{font-size:14px;color:#000;box-shadow:3px 3px 3px rgba(0,0,0,.07);padding:0;background-color:#FFF;border-radius:3px;border:1px solid #fff}.dhtmlx-info div{padding:5px 10px;background-color:#fff;border-radius:3px;border:1px solid #cecece}.dhtmlx-error{background-color:#d81b1b;border:1px solid #ff3c3c;box-shadow:3px 3px 3px rgba(0,0,0,.07)}.dhtmlx-error div{background-color:#d81b1b;border:1px solid #940000;color:#FFF}.gantt_data_area div,.gantt_grid div{-ms-touch-action:none;-webkit-tap-highlight-color:transparent}.gantt_data_area{position:relative;overflow-x:hidden;overflow-y:hidden;-moz-user-select:-moz-none;-webkit-user-select:none;-user-select:none}.gantt_links_area{position:absolute;left:0;top:0}.gantt_side_content,.gantt_task_content,.gantt_task_progress{line-height:inherit;overflow:hidden;height:100%}.gantt_task_content{font-size:12px;color:#fff;width:100%;top:0;position:absolute;white-space:nowrap;text-align:center}.gantt_task_progress{text-align:center;z-index:0;background:#299cb4}.gantt_task_line{-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px;position:absolute;-moz-box-sizing:border-box;box-sizing:border-box;background-color:#3db9d3;border:1px solid #2898b0;-webkit-user-select:none;-moz-user-select:none;-moz-user-select:-moz-none}.gantt_task_line.gantt_drag_move div{cursor:move}.gantt_touch_move,.gantt_touch_progress .gantt_touch_resize{-moz-transform:scale(1.02,1.1);-o-transform:scale(1.02,1.1);-webkit-transform:scale(1.02,1.1);transform:scale(1.02,1.1);-moz-transform-origin:50%;-o-transform-origin:50%;-webkit-transform-origin:50%;transform-origin:50%}.gantt_touch_progress .gantt_task_progress_drag,.gantt_touch_resize .gantt_task_drag{-moz-transform:scaleY(1.3);-o-transform:scaleY(1.3);-webkit-transform:scaleY(1.3);transform:scaleY(1.3);-moz-transform-origin:50%;-o-transform-origin:50%;-webkit-transform-origin:50%;transform-origin:50%}.gantt_side_content{position:absolute;white-space:nowrap;color:#6e6e6e;bottom:7px;font-size:11px}.gantt_side_content.gantt_left{right:100%;padding-right:15px}.gantt_side_content.gantt_right{left:100%;padding-left:15px}.gantt_side_content.gantt_link_crossing{bottom:8.75px}.gantt_link_arrow,.gantt_task_link .gantt_line_wrapper{position:absolute;cursor:pointer}.gantt_line_wrapper div{background-color:#ffa011}.gantt_task_link:hover .gantt_line_wrapper div{box-shadow:0 0 5px 0 #ffa011}.gantt_task_link div.gantt_link_arrow{background-color:transparent;border-style:solid;width:0;height:0}.gantt_link_control{position:absolute;width:13px;top:0}.gantt_link_control div{display:none;cursor:pointer;box-sizing:border-box;position:relative;top:50%;margin-top:-7.5px;vertical-align:middle;border:1px solid #929292;-webkit-border-radius:6.5px;-moz-border-radius:6.5px;border-radius:6.5px;height:13px;width:13px;background-color:#f0f0f0}.gantt_link_control div:hover{background-color:#fff}.gantt_link_control.task_left{left:-13px}.gantt_link_control.task_right{right:-13px}.gantt_link_target .gantt_link_control div,.gantt_task_line.gantt_selected .gantt_link_control div,.gantt_task_line:hover .gantt_link_control div{display:block}.gantt_link_source,.gantt_link_target{box-shadow:0 0 3px #3db9d3}.gantt_link_target.link_finish_allow,.gantt_link_target.link_start_allow{box-shadow:0 0 3px #ffbf5e}.gantt_link_target.link_finish_deny,.gantt_link_target.link_start_deny{box-shadow:0 0 3px #e87e7b}.link_finish_allow .gantt_link_control.task_right div,.link_start_allow .gantt_link_control.task_left div{background-color:#ffbf5e;border-color:#ffa011}.link_finish_deny .gantt_link_control.task_right div,.link_start_deny .gantt_link_control.task_left div{background-color:#e87e7b;border-color:#dd3e3a}.gantt_link_arrow_right{border-width:4px 0 4px 6px;border-top-color:transparent!important;border-right-color:transparent!important;border-bottom-color:transparent!important;border-color:#ffa011;margin-top:-1px}.gantt_link_arrow_left{border-width:4px 6px 4px 0;margin-top:-1px;border-top-color:transparent!important;border-color:#ffa011;border-bottom-color:transparent!important;border-left-color:transparent!important}.gantt_link_arrow_top{border-width:0 4px 6px;border-color:#ffa011;border-top-color:transparent!important;border-right-color:transparent!important;border-left-color:transparent!important}.gantt_link_arrow_down{border-width:4px 6px 0 4px;border-color:#ffa011;border-right-color:transparent!important;border-bottom-color:transparent!important;border-left-color:transparent!important}.gantt_task_drag,.gantt_task_progress_drag{cursor:w-resize;height:100%;display:none;position:absolute}.gantt_task_line.gantt_selected .gantt_task_drag,.gantt_task_line.gantt_selected .gantt_task_progress_drag,.gantt_task_line:hover .gantt_task_drag,.gantt_task_line:hover .gantt_task_progress_drag{display:block}.gantt_task_drag{width:6px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAACCAYAAAB7Xa1eAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3QYDDjkw3UJvAwAAABRJREFUCNdj/P//PwM2wASl/6PTAKrrBf4+lD8LAAAAAElFTkSuQmCC);z-index:1;top:0}.gantt_task_drag.task_left{left:0}.gantt_task_drag.task_right{right:0}.gantt_task_progress_drag{height:8px;width:8px;bottom:-4px;margin-left:-4px;background-position:bottom;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAYAAAB24g05AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MkY3Rjk0RUVDMkYzMTFFMkI1OThEQTA3ODU0OTkzMEEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MkY3Rjk0RUZDMkYzMTFFMkI1OThEQTA3ODU0OTkzMEEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoyRjdGOTRFQ0MyRjMxMUUyQjU5OERBMDc4NTQ5OTMwQSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoyRjdGOTRFREMyRjMxMUUyQjU5OERBMDc4NTQ5OTMwQSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PobPBzIAAADkSURBVHjaYpk2bRoDDsAExL1QdjEQ/8OmiAWHZk4gXqymqhQM4ty6fU8OSMUA8XdiDBAB4k0a6iqWRga6EKcwMQXduHlnL5DpB8Rv0J2JDFSA+JiOtgZcMwiA2CAxkBxUDVYDLEAKgIpV9XQ0MZwFEgPJAZnHoWpRDAgC4n2W5saiQKfjClQGkBxQDciL+6B6wAbkA/EqJwdrTkUFOQZCAKQGpBbIXA3SCzJggo+XK7OEuBgDsQCkFqgHrBfsBT5eHgZSAUwP2IBfv36TbABMDygdtK1Zv6UESLORaAbIhG6AAAMAKN8wE24DXWcAAAAASUVORK5CYII=);background-repeat:no-repeat;z-index:2}.gantt_link_tooltip{box-shadow:3px 3px 3px #888;background-color:#fff;border-left:1px dotted #cecece;border-top:1px dotted #cecece;font-family:Tahoma;font-size:8pt;color:#444;padding:6px;line-height:20px}.gantt_link_direction{height:0;border:0 #ffa011;border-bottom-style:dashed;border-bottom-width:2px;transform-origin:0 0;-ms-transform-origin:0 0;-webkit-transform-origin:0 0;z-index:2;margin-left:1px;position:absolute}.gantt_grid_data .gantt_row.gantt_selected,.gantt_grid_data .gantt_row.odd.gantt_selected,.gantt_task_row.gantt_selected{background-color:#fff3a1}.gantt_task_row.gantt_selected .gantt_task_cell{border-right-color:#ffec6e}.gantt_task_line.gantt_selected{box-shadow:0 0 5px #299cb4}.gantt_task_line.gantt_project.gantt_selected{box-shadow:0 0 5px #46ad51}.gantt_task_line.gantt_milestone{visibility:hidden;background-color:#d33daf;border:0 solid #61164f;box-sizing:content-box;-moz-box-sizing:content-box}.gantt_task_line.gantt_milestone div{visibility:visible}.gantt_task_line.gantt_milestone .gantt_task_content{background:inherit;border:inherit;border-width:1px;border-radius:inherit;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);-o-transform:rotate(45deg);transform:rotate(45deg)}.gantt_task_line.gantt_task_inline_color{border-color:#999}.gantt_task_line.gantt_task_inline_color .gantt_task_progress{background-color:#363636;opacity:.2}.gantt_task_line.gantt_task_inline_color.gantt_project.gantt_selected,.gantt_task_line.gantt_task_inline_color.gantt_selected{box-shadow:0 0 5px #999}.gantt_task_link.gantt_link_inline_color:hover .gantt_line_wrapper div{box-shadow:0 0 5px 0 #999}.gantt_critical_task{background-color:#e63030;border-color:#9d3a3a}.gantt_critical_task .gantt_task_progress{background-color:rgba(0,0,0,.4)}.gantt_critical_link .gantt_line_wrapper>div{background-color:#e63030}.gantt_critical_link .gantt_link_arrow{border-color:#e63030}.gantt_unselectable,.gantt_unselectable div{-webkit-user-select:none;-moz-user-select:none;-moz-user-select:-moz-none}.gantt_cal_light{-webkit-tap-highlight-color:transparent;background:#fff;border-radius:6px;font-family:Arial;border:1px solid #cecece;color:#6b6b6b;font-size:12px;position:absolute;z-index:10001;width:550px;height:250px;box-shadow:3px 3px 3px rgba(0,0,0,.07)}.gantt_cal_light select{font-family:Arial;border:1px solid #cecece;font-size:13px;padding:2px;margin:0}.gantt_cal_ltitle{padding:7px 10px;overflow:hidden;white-space:nowrap;-webkit-border-radius:6px 6px 0 0;-moz-border-radius-topleft:6px;-moz-border-radius-bottomleft:0;-moz-border-radius-topright:6px;-moz-border-radius-bottomright:0;border-radius:6px 6px 0 0}.gantt_cal_ltitle span{white-space:nowrap}.gantt_cal_lsection{color:#727272;font-weight:700;padding:12px 0 5px 10px}.gantt_cal_lsection .gantt_fullday{float:right;margin-right:5px;font-size:12px;font-weight:400;line-height:20px;vertical-align:top;cursor:pointer}.gantt_cal_lsection{font-size:13px}.gantt_cal_ltext{padding:2px 10px;overflow:hidden}.gantt_cal_ltext textarea{overflow:auto;font-family:Arial;font-size:13px;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;border:1px solid #cecece;height:100%;width:100%;outline:0!important;resize:none}.gantt_time{font-weight:700}.gantt_cal_light .gantt_title{padding-left:10px}.gantt_cal_larea{border:1px solid #cecece;border-left:none;border-right:none;background-color:#fff;overflow:hidden;height:1px}.gantt_btn_set{margin:10px 7px 5px 10px;padding:5px 15px 5px 10px;float:left;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;border-width:0;border-color:#cecece;border-style:solid;height:32px;font-weight:700;background:#fff;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;cursor:pointer}.gantt_btn_set div{float:left;font-size:13px;height:22px;line-height:22px;background-repeat:no-repeat;vertical-align:middle}.gantt_save_btn{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTk1OUU5RDFDMzA0MTFFMkExMUZBQTdDNDAzOUE5RjMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTk1OUU5RDJDMzA0MTFFMkExMUZBQTdDNDAzOUE5RjMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoxOTU5RTlDRkMzMDQxMUUyQTExRkFBN0M0MDM5QTlGMyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoxOTU5RTlEMEMzMDQxMUUyQTExRkFBN0M0MDM5QTlGMyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PjDroXYAAAEXSURBVHjaYvz//z8DJYCRUgPIAUxAbAnEHiAHMIBcQCwGaRYXF3e6evXqoffv39/dv38/CymaGSUkJBzv3LlzCsj///fv3wdAihkkIQnEvkAshU8zLy+v7a1bt06ANP/79+87kDIAy505cybq06dPr3p7ezuwGQLTfOPGjWP/ESAZLg8kPKBO+g01RBJNszWyZqC6uSgWgIg/f/4shxnS2dnZBjMEqNkSFGBImi8CKTYMA4BYCGjIczRDHC5dunQQSfN7IKWI4UUkjjdMMdCwnw8ePLjwHxV4Yw1gZA5Q47z/2EELzhhCE+ABGvIQWSeQvwcU38QaAML2wHj+C/X3MyAlijeB4ZBoBOIPQGxJKIVSnBsBAgwABddBclWfcZUAAAAASUVORK5CYII=);margin-top:2px;width:21px}.gantt_cancel_btn{margin-top:2px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDkzMDA3MzlDMzA0MTFFMjg2QTVFMzFEQzgwRkJERDYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MDkzMDA3M0FDMzA0MTFFMjg2QTVFMzFEQzgwRkJERDYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowOTMwMDczN0MzMDQxMUUyODZBNUUzMURDODBGQkRENiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowOTMwMDczOEMzMDQxMUUyODZBNUUzMURDODBGQkRENiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PmYuYOUAAAEdSURBVHjaYvz//z8DJYAFXWDlypU8QKoIiD2A2AwqfAqIdwBxX3h4+Bdk9YzILgBqtgdS84FYEYeF94E4EWjIQZgAE5LmQCB1AKoZZKMPEAtAMYh9GSp3AKjWD8UFQAEhIPshEIOc3wHENUBb/qJ57SyQMoJyPwKxElDNO1gYFEE17wMKVmIJlzNQzeegrjaA6qmBecEbSvfh0GwMxGeBhoPoemQ9MAO0kEIbl2YTqPAFKK2IbMB3AjabYIkRZmQD7kNpMyI0G0PpO8gGbIUFJj7NQDk2INWIrIcJKfBAKcwJqvkcDs0TgFgXGo19KCkRmpDWQdWDEk0NUoCBoq0FqhkE/IEWbKJKUmZEz43QzFSKIzN1481M5ACAAAMAlfl/lCwRpagAAAAASUVORK5CYII=);width:20px}.gantt_delete_btn{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MjFENzI3NUNDMzA0MTFFMjhBNjJGQTc3MUIyQzYzNEYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MjFENzI3NURDMzA0MTFFMjhBNjJGQTc3MUIyQzYzNEYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoyMUQ3Mjc1QUMzMDQxMUUyOEE2MkZBNzcxQjJDNjM0RiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoyMUQ3Mjc1QkMzMDQxMUUyOEE2MkZBNzcxQjJDNjM0RiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PmUD0gAAAABvSURBVHjaYvz//z8DIyMjAxYQicReji4J0ofKQNP8HwmgGQbXB8IsWGwDSSwDuioKjY9uBthVjFAXYHUGAQA2kYmBUoAUBpGk0LAwgBvwH+YX4mkwptgLowYMRgOITUyYKRFIN/wnDjQgJySAAAMApryKzL8wjfUAAAAASUVORK5CYII=);margin-top:2px;width:20px}.gantt_cal_cover{width:100%;height:100%;position:absolute;z-index:10000;top:0;left:0;background-color:#000;opacity:.1;filter:alpha(opacity=10)}.gantt_custom_button{padding:0 3px;font-family:Arial;font-size:13px;font-weight:400;margin-right:10px;margin-top:-5px;cursor:pointer;float:right;height:21px;width:90px;border:1px solid #CECECE;text-align:center;-webkit-border-radius:4px;-moz-border-radius:4px;-ms-border-radius:4px;-o-border-radius:4px;border-radius:4px}.gantt_custom_button div{cursor:pointer;float:none;height:21px;line-height:21px;vertical-align:middle}.gantt_custom_button div:first-child{display:none}.gantt_cal_light_wide{width:580px;padding:2px 4px}.gantt_cal_light_wide .gantt_cal_larea{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;border:1px solid #cecece}.gantt_cal_light_wide .gantt_cal_lsection{border:0;float:left;text-align:right;width:80px;height:20px;padding:5px 10px 0 0}.gantt_cal_light_wide .gantt_wrap_section{position:relative;padding:10px 0;overflow:hidden;border-bottom:1px solid #ebebeb}.gantt_cal_light_wide .gantt_section_time{overflow:hidden;padding-top:2px!important;padding-right:0;height:20px!important}.gantt_cal_light_wide .gantt_cal_ltext{padding-right:0}.gantt_cal_light_wide .gantt_cal_larea{padding:0 10px;width:100%}.gantt_cal_light_wide .gantt_section_time{background:0 0}.gantt_cal_light_wide .gantt_cal_checkbox label{padding-left:0}.gantt_cal_light_wide .gantt_cal_lsection .gantt_fullday{float:none;margin-right:0;font-weight:700;cursor:pointer}.gantt_cal_light_wide .gantt_custom_button{position:absolute;top:0;right:0;margin-top:2px}.gantt_cal_light_wide .gantt_repeat_right{margin-right:55px}.gantt_cal_light_wide.gantt_cal_light_full{width:738px}.gantt_cal_wide_checkbox input{margin-top:8px;margin-left:14px}.gantt_cal_light input{font-size:13px}.gantt_section_time{background-color:#fff;white-space:nowrap;padding:5px 10px;padding-top:2px!important}.gantt_section_time .gantt_time_selects{float:left;height:25px}.gantt_section_time .gantt_time_selects select{height:23px;padding:2px;border:1px solid #cecece}.gantt_duration{width:100px;height:23px;float:left;white-space:nowrap;margin-left:20px;line-height:23px}.gantt_duration .gantt_duration_dec,.gantt_duration .gantt_duration_inc,.gantt_duration .gantt_duration_value{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;text-align:center;vertical-align:top;height:100%;border:1px solid #cecece}.gantt_duration .gantt_duration_value{width:40px;padding:3px 4px;border-left-width:0;border-right-width:0}.gantt_duration .gantt_duration_dec,.gantt_duration .gantt_duration_inc{width:20px;padding:1px 1px 3px;background:#fff}.gantt_duration .gantt_duration_dec{-moz-border-top-left-radius:4px;-moz-border-bottom-left-radius:4px;-webkit-border-top-left-radius:4px;-webkit-border-bottom-left-radius:4px;border-top-left-radius:4px;border-bottom-left-radius:4px}.gantt_duration .gantt_duration_inc{margin-right:4px;-moz-border-top-right-radius:4px;-moz-border-bottom-right-radius:4px;-webkit-border-top-right-radius:4px;-webkit-border-bottom-right-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:4px}.gantt_cal_quick_info{border:1px solid #cecece;border-radius:6px;position:absolute;z-index:300;box-shadow:3px 3px 3px rgba(0,0,0,.07);background-color:#fff;width:300px;transition:left .5s ease,right .5s;-moz-transition:left .5s ease,right .5s;-webkit-transition:left .5s ease,right .5s;-o-transition:left .5s ease,right .5s}.gantt_no_animate{transition:none;-moz-transition:none;-webkit-transition:none;-o-transition:none}.gantt_cal_quick_info.gantt_qi_left .gantt_qi_big_icon{float:right}.gantt_cal_qi_title{-webkit-border-radius:6px 6px 0 0;-moz-border-radius-topleft:6px;-moz-border-radius-bottomleft:0;-moz-border-radius-topright:6px;-moz-border-radius-bottomright:0;border-radius:6px 6px 0 0;padding:5px 0 8px 12px;color:#454545;background-color:#fff;border-bottom:1px solid #cecece}.gantt_cal_qi_tdate{font-size:14px;font-weight:700}.gantt_cal_qi_tcontent{font-size:13px}.gantt_cal_qi_content{padding:16px 8px;font-size:13px;color:#454545;overflow:hidden}.gantt_cal_qi_controls{-webkit-border-radius:0 0 6px 6px;-moz-border-radius-topleft:0;-moz-border-radius-bottomleft:6px;-moz-border-radius-topright:0;-moz-border-radius-bottomright:6px;border-radius:0 0 6px 6px;padding-left:7px}.gantt_cal_qi_controls .gantt_menu_icon{margin-top:6px;background-repeat:no-repeat}.gantt_cal_qi_controls .gantt_menu_icon.icon_edit{width:20px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH3QYFCjI5ZQj5bAAAAFNJREFUOMvt0zEOACAIA0DkwTymH8bJTRTKZGJXyaWEKPKTCQAH4Ls37cItcDUzsxHNDLZNhCq7Gt1wh9ErV7EjyGAhyGLphlnsClWuS32rn0czAV+vNGrM/LBtAAAAAElFTkSuQmCC)}.gantt_cal_qi_controls .gantt_menu_icon.icon_delete{width:20px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MjFENzI3NUNDMzA0MTFFMjhBNjJGQTc3MUIyQzYzNEYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MjFENzI3NURDMzA0MTFFMjhBNjJGQTc3MUIyQzYzNEYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoyMUQ3Mjc1QUMzMDQxMUUyOEE2MkZBNzcxQjJDNjM0RiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoyMUQ3Mjc1QkMzMDQxMUUyOEE2MkZBNzcxQjJDNjM0RiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PmUD0gAAAABvSURBVHjaYvz//z8DIyMjAxYQicReji4J0ofKQNP8HwmgGQbXB8IsWGwDSSwDuioKjY9uBthVjFAXYHUGAQA2kYmBUoAUBpGk0LAwgBvwH+YX4mkwptgLowYMRgOITUyYKRFIN/wnDjQgJySAAAMApryKzL8wjfUAAAAASUVORK5CYII=)}.gantt_qi_big_icon{font-size:13px;border-radius:4px;font-weight:700;background:#fff;margin:5px 9px 8px 0;min-width:60px;line-height:32px;vertical-align:middle;padding:0 10px 0 5px;cursor:pointer;border:1px solid #cecece}.gantt_cal_qi_controls div{float:left;height:32px;text-align:center;line-height:32px}.gantt_tooltip{box-shadow:3px 3px 3px rgba(0,0,0,.07);background-color:#fff;border-left:1px solid rgba(0,0,0,.07);border-top:1px solid rgba(0,0,0,.07);font-family:Arial;font-size:8pt;color:#454545;padding:10px;position:absolute;z-index:500}.gantt_marker{height:100%;width:2px;top:0;position:absolute;text-align:center;background-color:rgba(255,0,0,.4);-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}.gantt_marker .gantt_marker_content{padding:5px;background:inherit;color:#fff;position:absolute;font-size:12px;line-height:12px;opacity:.8}.gantt_marker_area{position:absolute;top:0;left:0}.gantt_noselect{-moz-user-select:-moz-none;-webkit-user-select:none;-user-select:none}.gantt_drag_marker{position:absolute;font-family:Arial;font-size:13px}.gantt_drag_marker .gantt_tree_icon.gantt_blank,.gantt_drag_marker .gantt_tree_icon.gantt_close,.gantt_drag_marker .gantt_tree_icon.gantt_open,.gantt_drag_marker .gantt_tree_indent{display:none}.gantt_drag_marker,.gantt_drag_marker .gantt_row.odd{background-color:#fff}.gantt_drag_marker .gantt_row{border-left:1px solid #d2d2d2;border-top:1px solid #d2d2d2}.gantt_drag_marker .gantt_cell{border-color:#d2d2d2}.gantt_row.gantt_over,.gantt_task_row.gantt_over{background-color:#0070fe}.gantt_row.gantt_transparent .gantt_cell{opacity:.7}.gantt_task_row.gantt_transparent{background-color:#f8fdfd}.dhtmlx_popup_button.dhtmlx_delete_button{background:#3db9d3;text-shadow:0 -1px 0 #248a9f;color:#fff;font-weight:700;border-width:0}.gantt {\r\n    margin: 0;\r\n    padding: 0;\r\n    height: 100%;\r\n    overflow: hidden;\r\n}\r\n\r\n@media(max-width:767px) {\r\n    .gantt {\r\n        padding-right: 10px;\r\n    }\r\n}\r\n\r\n.gantt_tooltip {\r\n    max-width: 400px;\r\n}\r\n\r\n.gantt_tooltip .gantt_tooltip_content {\r\n    white-space: normal;\r\n}\r\nul.lookup-items {\r\n    display: inline;\r\n    margin: 0;\r\n    padding: 0;\r\n}\r\n\r\nul.lookup-items li {\r\n    display: inline-block;\r\n    list-style: none;\r\n}\r\n\r\nul.lookup-items li.badge {\r\n    margin-top: 2px;\r\n    margin-right: 5px;\r\n    white-space: normal;\r\n    text-align: left;\r\n}\r\n\r\nul.lookup-items li:after {\r\n    content: ",\\00a0";\r\n}\r\n\r\nul.lookup-items li.badge:after {\r\n    content: "\\00a0";\r\n}\r\n\r\nul.lookup-items li:last-child:after {\r\n    content: "";\r\n    margin-right: 0px;\r\n}\r\ndiv.projectBox {\n  margin-bottom: 10px;\n}\n\ndiv.projectBox.invisible {\n  visibility: hidden;\n}\n\ndiv.projectBox.loaded {\n  visibility: visible !important;\n}\n\ndiv.projectBox div.projIcon {\n  margin-bottom: 0;\n}\n\ndiv.projectBox div.projIcon .box-content {\n  padding-top: 0;\n  padding-left: 0;\n  border: none;\n  box-shadow: none;\n}\n\ndiv.projectBox div.projectInfo {\n  min-height: 72px;\n  margin-bottom: 5px;\n  margin-left: 72px;\n}\n\ndiv.projectBox div.projectInfo h3 {\n  margin-top: 5px;\n  margin-bottom: 5px;\n}\n\ndiv.projectBox div.tagsBox {\n  margin-right: 60px;\n}\n\ndiv.projectBox div.statusBox {\n  float: right;\n  width: 50px;\n  text-align: right;\n}.read {\r\n    font-weight: normal;\r\n    background: none repeat scroll 0 0 rgba(243, 243, 243, 0.85);\r\n}\r\n\r\n.unread {\r\n    font-weight: bold;\r\n}\r\n@media(max-width:768px) {\r\n    header .navbar .navbar-brand {\r\n        display: none;\r\n    }\r\n\r\n    header .navbar .toggle-nav {\r\n        margin-left: 0 !important;\r\n    }\r\n}\r\n.opaque {\r\n	opacity: 1;\r\n    filter: alpha(opacity=100);\r\n    background-color: rgb(255,255,255);\r\n    background-color: rgba(255,255,255,1);\r\n}\r\n\r\n.status-prev {\r\n	text-align: center;\r\n	white-space: nowrap;\r\n	padding: 3px;\r\n	color: #7F7F7F;\r\n}\r\n\r\n.status-curr {\r\n	font-weight: bold;\r\n	text-align: center;\r\n	white-space: nowrap;\r\n	color: #BE0000;\r\n	padding: 3px;\r\n}\r\n\r\n.status-next {\r\n	color: #0000FF;\r\n	padding: 3px;\r\n	cursor: pointer;\r\n}\r\n\r\nspan.help-block.has-error {\r\n    color: #b94a48\r\n}\r\n\r\n@media (min-width: 992px) {\r\n	.form-horizontal label.control-label.col-md-12 {\r\n		text-align: left;\r\n	}\r\n}\r\n\r\n@media (min-width: 768px) {\r\n    .form-horizontal label.control-label.col-md-4 {\r\n        text-align: left;\r\n    }\r\n    /* for ago-details-item with large=true */\r\n    .form-horizontal label.control-label.large {\r\n        text-align: left;\r\n    }\r\n}\r\n\r\n/* before remove that test if dropdown menus and datepicker correct showed in box-toolbox */\r\n.box .box-content .box-toolbox {\r\n	overflow: visible !important;\r\n}\r\n\r\n.gray-background {\r\n    background-color: #ccc;\r\n}\r\n\r\n.chat ul > li {\r\n    border-top: 1px solid #dddddd;\r\n    border-left: 1px solid #dddddd;\r\n    border-right: 1px solid #dddddd;\r\n    border-bottom: none !important;\r\n}\r\n.chat ul > li:last-child {\r\n    border-bottom: 1px solid #dddddd !important;\r\n}\r\n\r\n@media (max-width: 991px) {\r\n    .btn-group > .btn + .dropdown-toggle {\r\n        padding-left: 12px !important;\r\n        padding-right: 12px !important;\r\n    }\r\n}\r\n.onepct {\r\n	width: 1%;\r\n}\r\n\r\n.clip-content {\r\n	text-overflow: ellipsis; \r\n	overflow: hidden; \r\n	white-space: normal;\r\n	color: #656b6b;\r\n}\r\n\r\n.preformatted {\r\n    display: block;\r\n    margin: 0 0 10px;\r\n    word-break: break-all;\r\n    word-wrap: break-word;\r\n    white-space: pre-wrap;\r\n}\r\n\r\n.responsive-table .scrollable-area {\r\n	overflow-x: hidden !important;\r\n}\r\n\r\n.responsive-table .scrollable-area table.table {\r\n	margin-bottom: 0;\r\n}\r\n\r\n.items-wall {\r\n    margin: 0px -10px;\r\n}\r\n\r\na.ago-counter {\r\n    text-decoration: none;\r\n}\r\n\r\na:hover.ago-counter{\r\n    text-decoration: none;\r\n}\r\n/*while waiting bootstrap with hidden-xs-inline hidden-xs-block use this fix*/\r\n\r\n.inline-block{display:inline-block;}\r\n.inline-block.visible-xs{display:none!important;}@media(max-width:767px){.inline-block.visible-xs{display:inline-block!important;}\r\n}@media(min-width:768px) and (max-width:991px){.inline-block.visible-xs.visible-sm{display:inline-block!important;}\r\n}@media(min-width:992px) and (max-width:1199px){.inline-block.visible-xs.visible-md{display:inline-block!important;}\r\n}@media(min-width:1200px){.inline-block.visible-xs.visible-lg{display:inline-block!important;}\r\n}.inline-block.visible-sm{display:none!important;}@media(max-width:767px){.inline-block.visible-sm.visible-xs{display:inline-block!important;}\r\n}@media(min-width:768px) and (max-width:991px){.inline-block.visible-sm{display:inline-block!important;}\r\n}@media(min-width:992px) and (max-width:1199px){.inline-block.visible-sm.visible-md{display:inline-block!important;}\r\n}@media(min-width:1200px){.inline-block.visible-sm.visible-lg{display:inline-block!important;}\r\n}.inline-block.visible-md{display:none!important;}@media(max-width:767px){.inline-block.visible-md.visible-xs{display:inline-block!important;}\r\n}@media(min-width:768px) and (max-width:991px){.inline-block.visible-md.visible-sm{display:inline-block!important;}\r\n}@media(min-width:992px) and (max-width:1199px){.inline-block.visible-md{display:inline-block!important;}\r\n}@media(min-width:1200px){.inline-block.visible-md.visible-lg{display:inline-block!important;}\r\n}.inline-block.visible-lg{display:none!important;}@media(max-width:767px){.inline-block.visible-lg.visible-xs{display:inline-block!important;}\r\n}@media(min-width:768px) and (max-width:991px){.inline-block.visible-lg.visible-sm{display:inline-block!important;}\r\n}@media(min-width:992px) and (max-width:1199px){.inline-block.visible-lg.visible-md{display:inline-block!important;}\r\n}@media(min-width:1200px){.inline-block.visible-lg{display:inline-block!important;}\r\n}.inline-block.hidden-xs{display:inline-block!important;}@media(max-width:767px){.inline-block.hidden-xs{display:none!important;}\r\n}@media(min-width:768px) and (max-width:991px){.inline-block.hidden-xs.hidden-sm{display:none!important;}\r\n}@media(min-width:992px) and (max-width:1199px){.inline-block.hidden-xs.hidden-md{display:none!important;}\r\n}@media(min-width:1200px){.inline-block.hidden-xs.hidden-lg{display:none!important;}\r\n}.inline-block.hidden-sm{display:inline-block!important;}@media(max-width:767px){.inline-block.hidden-sm.hidden-xs{display:none!important;}\r\n}@media(min-width:768px) and (max-width:991px){.inline-block.hidden-sm{display:none!important;}\r\n}@media(min-width:992px) and (max-width:1199px){.inline-block.hidden-sm.hidden-md{display:none!important;}\r\n}@media(min-width:1200px){.inline-block.hidden-sm.hidden-lg{display:none!important;}\r\n}.inline-block.hidden-md{display:inline-block!important;}@media(max-width:767px){.inline-block.hidden-md.hidden-xs{display:none!important;}\r\n}@media(min-width:768px) and (max-width:991px){.inline-block.hidden-md.hidden-sm{display:none!important;}\r\n}@media(min-width:992px) and (max-width:1199px){.inline-block.hidden-md{display:none!important;}\r\n}@media(min-width:1200px){.inline-block.hidden-md.hidden-lg{display:none!important;}\r\n}.inline-block.hidden-lg{display:inline-block!important;}@media(max-width:767px){.inline-block.hidden-lg.hidden-xs{display:none!important;}\r\n}@media(min-width:768px) and (max-width:991px){.inline-block.hidden-lg.hidden-sm{display:none!important;}\r\n}@media(min-width:992px) and (max-width:1199px){.inline-block.hidden-lg.hidden-md{display:none!important;}\r\n}@media(min-width:1200px){.inline-block.hidden-lg{display:none!important;}}body.fixfixed #main-nav.main-nav-fixed {\r\n    position: absolute !important;\r\n}\r\nbody.fixfixed header .navbar.navbar-fixed-top{\r\n    position: absolute !important;\r\n}\r\n.modal {\r\n    overflow-y: auto !important;\r\n}\r\n\r\nbody.modal-open {\r\n    margin-right: 0 !important;\r\n}\r\n\r\nbody.modal-open,\r\n.modal-open .navbar-fixed-top,\r\n.modal-open .navbar-fixed-bottom {\r\n    margin-right: 0 !important;\r\n}\r\n.select2-container.form-control > a.select2-choice {\r\n    height: 100%;\r\n}\r\n\r\n.select2-container .select2-choice > .select2-chosen {\r\n    white-space: normal !important;\r\n}\r\n\r\n/**\r\n * Select2 widgets in Bootstrap Input Groups\r\n *\r\n * When Select2 widgets are combined with other elements using Bootstrap 3\'s\r\n * "Input Group" component, we don\'t want specific edges of the Select2 container\r\n * to have a border-radius.\r\n *\r\n * In Bootstrap 2, input groups required a markup where these style adjustments\r\n * could be bound to a CSS-class identifying if the additional elements are appended,\r\n * prepended or both.\r\n *\r\n * Bootstrap 3 doesn\'t rely on these classes anymore, so we have to use our own.\r\n * Use .select2-bootstrap-prepend and .select2-bootstrap-append on a Bootstrap 3 .input-group\r\n * to let the contained Select2 widget know which edges should not be rounded as they are\r\n * directly followed by another element.\r\n *\r\n * @see http://getbootstrap.com/components/#input-groups\r\n */\r\n.input-group.select2-bootstrap-prepend [class^="select2-choice"] {\r\n    border-bottom-left-radius: 0 !important;\r\n    border-top-left-radius: 0 !important;\r\n}\r\n\r\n.input-group.select2-bootstrap-append [class^="select2-choice"] {\r\n    border-bottom-right-radius: 0 !important;\r\n    border-top-right-radius: 0 !important;\r\n}\r\n\r\n.select2-dropdown-open [class^="select2-choice"] {\r\n    border-bottom-right-radius: 0 !important;\r\n    border-bottom-left-radius: 0 !important;\r\n}\r\n\r\n.select2-dropdown-open.select2-drop-above [class^="select2-choice"] {\r\n    border-top-right-radius: 0 !important;\r\n    border-top-left-radius: 0 !important;\r\n}\r\n\r\n/**\r\n * Adjust alignment of Bootstrap 3 buttons in Bootstrap 3 Input Groups to address\r\n * Multi Select2\'s height which - depending on how many elements have been selected -\r\n * may grown higher than their initial size.\r\n */\r\n.select2-bootstrap-append .select2-container-multiple,\r\n.select2-bootstrap-append .input-group-btn,\r\n.select2-bootstrap-append .input-group-btn .btn,\r\n.select2-bootstrap-prepend .select2-container-multiple,\r\n.select2-bootstrap-prepend .input-group-btn,\r\n.select2-bootstrap-prepend .input-group-btn .btn {\r\n    vertical-align: top;\r\n}\r\n.badge.badge-primary {\r\n    background-color: #00acec;\r\n}\r\n\r\n.badge.badge-primary[href] {\r\n    background-color: #00acec;\r\n}\r\n\r\n.label.label-primary {\r\n    background-color: #00acec;\r\n}\r\n\r\n.label.label-primary[href] {\r\n    background-color: #00acec;\r\n}\r\n\r\na.badge {\r\n    white-space: normal;\r\n    text-align: left;\r\n}\r\n')
}),requirejs.s.contexts._.nextTick=requirejs.nextTick;