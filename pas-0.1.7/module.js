define("pas/moduleDef",["angular","../core/common/tasks/module"],function(angular){return angular.module("pas.module",["core.module","common.tasks"])}),define("pas/states/commonMixins",["../moduleDef","angular"],function(module,angular){module.controller("MultipleDeleteCtrl",["$scope","project","deleteUrl","patchParams","confirmTitle","confirmText","apinetService","i18n","dialogService","$controller",function($scope,project,deleteUrl,patchParams,confirmTitle,confirmText,apinetService,i18n,dialogService,$controller){angular.extend(this,$controller("ErrorHandlingCtrl",{$scope:$scope}));var isSelected=function(model){return model.selected&&model.selected===!0};$scope.hasSelected=function(){for(var i=0;i<$scope.models.length;i++)if(isSelected($scope.models[i]))return!0;return!1};var removeFromModels=function(modelsToRemove){for(var i=0;i<modelsToRemove.length;i++){var index=$scope.models.indexOf(modelsToRemove[i]);0>index||$scope.models.splice(index,1)}};$scope.deleteSelected=function(){var title=i18n.msg(confirmTitle||"core.confirm.delete.title"),text=i18n.msg(confirmText||"core.confirm.delete.records");dialogService.confirm(title,text).then(function(){for(var ids=[],modelsToRemove=[],i=0;i<$scope.models.length;i++)isSelected($scope.models[i])&&(ids.push($scope.models[i].Id),modelsToRemove.push($scope.models[i]));if(!(ids.length<=0)){$scope.resetValidation();var params={method:deleteUrl,project:project,ids:ids};angular.isFunction(patchParams)&&patchParams(params),apinetService.action(params).then(function(){removeFromModels(modelsToRemove)},$scope.handleException)}})}}]).controller("BaseFlatDictCtrl",["$scope","$stateParams","i18n","apinetService","dialogService","$controller","createUrl","updateUrl","deleteUrl","newModelFn","afterCreateFn",function($scope,$stateParams,i18n,apinetService,dialogService,$controller,createUrl,updateUrl,deleteUrl,newModelFn,afterCreateFn){angular.extend(this,$controller("ErrorHandlingCtrl",{$scope:$scope})),$scope.createFormVisible=!1,$scope.create=function(){var model=newModelFn();apinetService.action({method:createUrl,project:$stateParams.project,model:model}).then(function(result){result.validation.success?($scope.models.push(result.model),$scope.toggleCreateForm(!1),angular.isFunction(afterCreateFn)&&afterCreateFn()):$scope.validation=result.validation||{}},$scope.handleException)},$scope["delete"]=function(model){dialogService.confirm(i18n.msg("core.confirm.delete.title"),i18n.msg("core.confirm.delete.record")).then(function(){apinetService.action({method:deleteUrl,project:$stateParams.project,id:model.Id}).then(function(){var idx=$scope.models.indexOf(model);$scope.models.splice(idx,1)},$scope.handleException)})},$scope.updateProp=function(model,prop,val){var valueProp="id";val=angular.isArray(val)?val.map(function(item){return item[valueProp]}):angular.isObject(val)&&!angular.isDate(val)?val[valueProp]:val;var arg={Id:model.Id,ModelVersion:model.ModelVersion,Prop:prop,Value:val};return apinetService.action({method:updateUrl,project:$stateParams.project,model:arg}).then(function(result){return result.validation.success?angular.extend(model,result.model):model.validation=result.validation||{},result.validation.success},$scope.handleError)},$scope.onCancel=function(model){model.validation={}},$scope.toggleCreateForm=function(visible){$scope.createFormVisible=visible}}])}),define("text!pas/states/activity/activityList.tpl.html",[],function(){return'<div class="container"\r\n     ng-controller="projectActivityCtrl"\r\n     filtered-list="{method: \'pas/activity/getOverallActivities\'}"\r\n     initial-sorters="{ }">\r\n	<div class="row" id="content-wrapper">\r\n		<div class="col-xs-12">\r\n\r\n			<!-- Filter -->\r\n			<div filters-box="filter" sorters="sorters" meta="pas/activity/overallActivityMetadata" group="Tasks.Activity"\r\n			     apply-enabled="applyEnabled" apply-filter="applyFilter" reset-filter="resetFilter"\r\n			     sorters-hidden="true" filter-applied="filterApplied" style="padding-top: 5px">\r\n				<div class="row">\r\n					<form class="col-xs-12 form form-horizontal" bindonce="i18n.core">\r\n						<div class="form-group">\r\n							<label class="col-lg-2 col-sm-4 col-xs-5 control-label"\r\n							       bo-text="i18n.core.activities.filters.period.title"></label>\r\n\r\n							<div class="col-lg-10 col-sm-8 col-xs-7">\r\n								<select ng-model="filter.simple.period" class="form-control">\r\n                                    <option value="all" bo-text="i18n.core.activities.filters.period.all"></option>\r\n                                    <option value="new" bo-text="i18n.core.activities.filters.period.new"></option>\r\n									<option value="today" bo-text="i18n.core.activities.filters.period.today"></option>\r\n									<option value="yesterday" bo-text="i18n.core.activities.filters.period.yesterday"></option>\r\n									<option value="thisWeek" bo-text="i18n.core.activities.filters.period.thisWeek"></option>\r\n									<option value="pastWeek" bo-text="i18n.core.activities.filters.period.pastWeek"></option>\r\n									<option value="thisMonth" bo-text="i18n.core.activities.filters.period.thisMonth"></option>\r\n									<option value="pastMonth" bo-text="i18n.core.activities.filters.period.pastMonth"></option>\r\n									<option value="period" bo-text="i18n.core.activities.filters.period.period"></option>\r\n								</select>\r\n							</div>\r\n						</div>\r\n						<div class="form-group" ng-show="filter.simple.period == \'period\'">\r\n							<label class="col-lg-2 col-sm-4 col-xs-5 control-label"\r\n							       bo-text="i18n.core.activities.filters.dates.from"></label>\r\n\r\n							<div class="col-lg-10 col-sm-8 col-xs-7">\r\n								<input bs-datepicker class="form-control" ng-model="filter.simple.fromDate"/>\r\n							</div>\r\n						</div>\r\n                        <div class="form-group" ng-show="filter.simple.period == \'period\'">\r\n                            <label class="col-lg-2 col-sm-4 col-xs-5 control-label"\r\n                                   bo-text="i18n.core.activities.filters.dates.to"></label>\r\n\r\n                            <div class="col-lg-10 col-sm-8 col-xs-7">\r\n                                <input bs-datepicker class="form-control" ng-model="filter.simple.toDate"/>\r\n                            </div>\r\n                        </div>\r\n					</form>\r\n				</div>\r\n			</div>\r\n\r\n			<!-- Content -->\r\n			<ago-box color="purple" large="true"\r\n			         header-class="{\'hidden-md\': true, \'hidden-lg\': true}">\r\n				<ago-box-title>\r\n					<i class="fa icon-activities"></i>\r\n					<span bindonce="i18n.core" bo-text="i18n.core.activities.title"></span>\r\n				</ago-box-title>\r\n\r\n				<ago-box-content>\r\n					<div class="box-toolbox box-toolbox-top">\r\n						<ago-error-msg></ago-error-msg>\r\n\r\n                        <button class="btn btn-default" bindonce="i18n.core" bo-text="i18n.core.activities.mark"\r\n                                ng-click="markAsRead()"></button>\r\n\r\n						<refresher active="indication.loading" on-refresh="refreshList()"></refresher>\r\n						<div class="clearfix"></div>\r\n					</div>\r\n\r\n					<div class="alert alert-warning" ng-show="models.length == 0" bindonce="i18n.core"\r\n					     bo-text="i18n.core.activities.empty">\r\n					</div>\r\n\r\n                    <div class="row activity">\r\n                        <ul class="col-xs-12 list-unstyled list-hover">\r\n                            <li bindonce ng-repeat="model in models">\r\n                                <div class="clearfix">\r\n                                    <small bo-if="model.ActivityTime" class="date pull-right text-muted">\r\n                                        <span class="timeago fade has-tooltip in" data-placement="top"\r\n                                              bo-attr\r\n                                              bo-attr-data-original-title="model.ActivityTime | date:\'ago_date\'"\r\n                                              bo-text="moment(model.ActivityTime).fromNow()">\r\n                                        </span>\r\n                                        <i class="icon-time"></i>\r\n                                    </small>\r\n\r\n                                    <div class="action activity-item">\r\n                                        <strong>\r\n                                            <a bo-if="isTaskItem(model)"\r\n                                               ui-sref="page.project.taskActivity({ num: model.ItemName })">\r\n                                                {{ model.ActivityItem }}\r\n                                            </a>\r\n                                        </strong>\r\n                                        <strong bo-if="!isTaskItem(model)">\r\n                                            {{ model.ActivityItem }}\r\n                                        </strong>\r\n                                    </div>\r\n\r\n                                    <div class="inline-block user" ng-repeat="user in model.Users">\r\n                                        <div class="avatar pull-left text-contrast">\r\n                                            <i class="lead icon-user" bo-if="!user.AvatarUrl"></i>\r\n                                            <img width="23" height="23" bo-src="user.AvatarUrl"\r\n                                                 bo-if="user.AvatarUrl"/>\r\n                                        </div>\r\n                                        <div class="user-name action pull-left">\r\n                                            <span class="text-contrast" bo-text="user.Name"></span>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div bo-if="model.MoreUsers" class="inline-block more-users">\r\n                                        <span class="action pull-left text-contrast" bindonce="i18n.core"\r\n                                              bo-text="\'core.activities.moreUsers\' | i18n:{ num: model.MoreUsers }"></span>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div class="action">\r\n                                    <ul class="changes">\r\n                                        <li bindonce ng-repeat="change in model.Changes" bo-text="change"\r\n                                            bo-class="{\'last\': $last}"></li>\r\n\r\n                                        <li bo-if="model.MoreChanges" class="more-changes"\r\n                                            bo-text="\'core.activities.moreChanges\' | i18n:{ num: model.MoreChanges }"></li>\r\n                                    </ul>\r\n\r\n                                    <div class="btn-group pull-right" bo-if="isTaskItem(model)">\r\n                                        <a href="" class="btn btn-primary btn-sm" ng-click="toggle(model)">\r\n                                            <i class="fa" ng-class="{ \'icon-chevron-up\': model.details.expanded, \'icon-chevron-down\': !model.details.expanded }"></i>\r\n                                        </a>\r\n                                    </div>\r\n                                    <div class="clearfix"></div>\r\n                                </div>\r\n\r\n                                <!--Task details (as short info)-->\r\n                                <div class="task-details" ng-show="model.details.expanded">\r\n                                    <span ng-hide="model.details.loaded" bindonce="i18n.core" bo-text="i18n.core.labels.loading + \'...\'"></span>\r\n                                    <task-short-info model="model.details" ng-show="model.details.loaded"></task-short-info>\r\n                                </div>\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n\r\n                    <div class="box-toolbox box-toolbox-bottom">\r\n                        <next-page></next-page>\r\n\r\n                        <refresher active="indication.loading" on-refresh="refreshList()"></refresher>\r\n                        <counter action="pas/activity/getOverallActivitiesCount"></counter>\r\n                    </div>\r\n				</ago-box-content>\r\n			</ago-box>\r\n		</div>\r\n	</div>\r\n</div>\r\n'}),define("text!pas/states/moduleMenu.tpl.html",[],function(){return'<li ng-class="{\'active\': $state.is(\'page.projects.projectsList\')}" bindonce="i18n.projects">\r\n    <a ui-sref="page.projects.projectsList">\r\n        <i class="icon-table"></i>\r\n        <span bo-text="i18n.projects.list.title"></span>\r\n    </a>\r\n</li>\r\n\r\n<li ng-controller="userRoleCtrl" bindonce="current">\r\n	<a href="" class="dropdown-collapse" style="min-height: 42px; line-height: normal">\r\n		<i class=\'icon-user\'></i>\r\n        <i class=\'icon-angle-down angle-down\'></i>\r\n        <div style="display: inline-block; padding-top: 5px">\r\n		    <span bo-text="current.role.text"></span>\r\n            <small class="text-muted" bo-text="current.ou.text" style="display: block"></small>\r\n        </div>\r\n	</a>\r\n	<ul class="nav nav-stacked">\r\n		<li>\r\n            <ago-project-member-current-selector current="current" member-id="current.memberId"\r\n                    ou-lookup-url="pas/project/lookupOUs"\r\n                    role-lookup-url="pas/project/lookupRoles">\r\n            </ago-project-member-current-selector>\r\n            <button class="btn btn-default col-sm-offset-3" ng-click="switch()" ng-disabled="!filled()"\r\n                    bindonce="i18n.projects.members" bo-text="i18n.projects.members.changeCurrent">\r\n            </button>\r\n		</li>\r\n	</ul>\r\n</li>\r\n\r\n<li bo-class="{\'active\': $state.is(\'page.project.pas\')}" bindonce="i18n.core">\r\n    <a ui-sref="page.project.pas({ itemId: null })">\r\n        <i class="icon-bar-chart"></i>\r\n        <span bo-text="i18n.core.activities.title"></span>\r\n    </a>\r\n</li>\r\n\r\n<li bo-class="{\'active\': $state.is(\'page.project.pas-orders\')}" bindonce="i18n.pas.orders">\r\n    <a ui-sref="page.project.pas-orders">\r\n        <i class="fa icon-ticket"></i>\r\n        <span bo-text="i18n.pas.orders.title"></span>\r\n    </a>\r\n</li>\r\n<li bo-class="{\'active\': $state.is(\'page.project.pas-tasks\')}" bindonce="i18n.pas.tasks">\r\n	<a ui-sref="page.project.pas-tasks">\r\n		<i class="fa icon-tasks"></i>\r\n		<span bo-text="i18n.pas.tasks.title"></span>\r\n	</a>\r\n</li>\r\n<li bo-class="{\'active\': $state.is(\'page.project.pas-docs\')}" bindonce="i18n.pas.docs">\r\n    <a ui-sref="page.project.pas-docs">\r\n        <i class="fa icon-file-text"></i>\r\n        <span bo-text="i18n.pas.docs.title"></span>\r\n    </a>\r\n</li>\r\n<li bo-class="{\'active\': $state.is(\'page.project.pas-objects\')}" bindonce="i18n.pas.obj">\r\n    <a ui-sref="page.project.pas-objects">\r\n        <i class="fa icon-building"></i>\r\n        <span bo-text="i18n.pas.obj.title"></span>\r\n    </a>\r\n</li>\r\n\r\n<li>\r\n    <a class="dropdown-collapse" href="">\r\n        <i class="icon-cog"></i>\r\n        <span bindonce="i18n.pas.menu" bo-text="i18n.pas.menu.dictionaries"></span>\r\n        <i class="icon-angle-down angle-down"></i>\r\n    </a>\r\n    <ul class="nav nav-stacked" bindonce="i18n.pas">\r\n        <li bo-class="{\'active\': $state.is(\'page.project.common-taskType.pas\')}">\r\n            <a ui-sref="page.project.common-taskType.pas">\r\n                <i class="icon-cog"></i>\r\n                <span bindonce="i18n.common.tasks" bo-text="i18n.common.tasks.taskType.title"></span>\r\n            </a>\r\n        </li>\r\n        <li bo-class="{\'active\': $state.is(\'page.project.pas-docType\')}">\r\n            <a ui-sref="page.project.pas-docType">\r\n                <i class="icon-cog"></i>\r\n                <span bo-text="i18n.pas.docType.title"></span>\r\n            </a>\r\n        </li>\r\n        <li bo-class="{\'active\': $state.is(\'page.project.pas-objType\')}">\r\n            <a ui-sref="page.project.pas-objType">\r\n                <i class="icon-cog"></i>\r\n                <span bo-text="i18n.pas.objType.title"></span>\r\n            </a>\r\n        </li>\r\n        <li bo-class="{\'active\': $state.is(\'page.project.pas-address\')}">\r\n            <a ui-sref="page.project.pas-address">\r\n                <i class="icon-cog"></i>\r\n                <span bo-text="i18n.pas.address.title"></span>\r\n            </a>\r\n        </li>\r\n        <li bo-class="{\'active\': $state.is(\'page.project.pas-company\')}">\r\n            <a ui-sref="page.project.pas-company">\r\n                <i class="icon-cog"></i>\r\n                <span bo-text="i18n.pas.company.title"></span>\r\n            </a>\r\n        </li>\r\n        <li bo-class="{\'active\': $state.is(\'page.project.pas-unit\')}">\r\n            <a ui-sref="page.project.pas-unit">\r\n                <i class="icon-cog"></i>\r\n                <span bo-text="i18n.pas.unit.title"></span>\r\n            </a>\r\n        </li>\r\n        <li bo-class="{\'active\': $state.is(\'page.project.pas-serviceType\')}">\r\n            <a ui-sref="page.project.pas-serviceType">\r\n                <i class="icon-cog"></i>\r\n                <span bo-text="i18n.pas.serviceType.title"></span>\r\n            </a>\r\n        </li>\r\n        <li bo-class="{\'active\': $state.is(\'page.project.customPropTypes.pas\')}" bindonce="i18n.core">\r\n            <a ui-sref="page.project.customPropTypes.pas">\r\n                <i class="icon-cog"></i>\r\n                <span bo-text="i18n.core.customPropTypes.title"></span>\r\n            </a>\r\n        </li>\r\n        <!--<li bo-class="{\'active\': $state.is(\'page.project.tasksTags\')}" bindonce="i18n.projects">-->\r\n            <!--<a ui-sref="page.project.tasksTags">-->\r\n                <!--<i class="icon-cog"></i>-->\r\n                <!--<span bo-text="i18n.projects.tags.title"></span>-->\r\n            <!--</a>-->\r\n        <!--</li>-->\r\n    </ul>\r\n</li>\r\n\r\n<li bo-class="{\'active\': $state.is(\'page.project.reports.pas\')}" bindonce="i18n.core">\r\n    <a ui-sref="page.project.reports.pas">\r\n        <i class="icon-print"></i>\r\n        <span bo-text="i18n.core.reporting.reports.title"></span>\r\n    </a>\r\n</li>\r\n\r\n<li bo-class="{\'active\': $state.is(\'page.project.pas-projProps\') || $state.is(\'page.project.pas-projMembers\') || $state.is(\'page.project.templates.pas\')}"\r\n        bindonce="i18n.projects">\r\n    <a ui-sref="page.project.pas-projProps">\r\n        <i class="icon-info"></i>\r\n        <span bo-text="i18n.projects.settings.title"></span>\r\n    </a>\r\n</li>\r\n'}),requirejs.s.contexts._.nextTick=function(f){f()},require(["css"],function(css){css.addBuffer("pas/states/activity/activity.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,define("pas/states/activity/activityList",["../../moduleDef","angular","text!./activityList.tpl.html","text!../moduleMenu.tpl.html","css!./activity.css"],function(module,angular,tpl,moduleMenuTpl){module.config(["$stateProvider",function($stateProvider){$stateProvider.state({name:"page.project.pas",url:"/pas",views:{"":{template:tpl},"moduleMenu@page":{template:moduleMenuTpl}},onEnter:["$rootScope",function($rootScope){$rootScope.breadcrumbs.push({name:"core.activities.title",url:"page.project.pas"})}],onExit:["$rootScope",function($rootScope){$rootScope.breadcrumbs.splice($rootScope.breadcrumbs.length-1,1)}]})}]).controller("projectActivityCtrl",["$scope","$stateParams","apinetService",function($scope,$stateParams,apinetService){$scope.isFirstRequest=!0,$scope.initialRequestParams={predefined:"new"},$scope.$on("resetFilter",function(){var defaultPredefined=$scope.isFirstRequest?"new":"all";$scope.filterApplied=$scope.isFirstRequest,$scope.isFirstRequest=!1,$scope.filter.simple={period:defaultPredefined},$scope.requestParams.predefined=defaultPredefined}),$scope.$watch("filter.simple.period",function(value){$scope.requestParams.predefined=value||"all"},!0),$scope.$watch("filter.simple.fromDate",function(value){$scope.requestParams.fromDate=value},!0),$scope.$watch("filter.simple.toDate",function(value){$scope.requestParams.toDate=value},!0);var handleException=function(error){$scope.resetValidation(),$scope.validation.generalErrors=[error]};$scope.markAsRead=function(){apinetService.action({method:"pas/activity/markAsRead",project:$stateParams.project}).then(function(){$scope.refreshList()},handleException)},$scope.isTaskItem=function(model){return"TaskModel"==model.ItemType},$scope.toggle=function(item){item.details||angular.extend(item,{details:{loaded:!1,expanded:!1}}),item.details.expanded=!item.details.expanded,item.details.expanded&&item.details.loaded===!0},$scope.onCacheState=function(state){angular.extend(state,{isFirstRequest:$scope.isFirstRequest,requestParams:$scope.requestParams})}}])}),define("text!pas/states/task/taskList.tpl.html",[],function(){return'<div class="container"\r\n     ng-controller="pas-taskListCtrl"\r\n     filtered-list="{method: \'pas/tasks/getTasks\'}"\r\n     initial-sorters="{ InternalSeqNumber: \'desc\' }">\r\n    <div class="row" id="content-wrapper">\r\n        <div class="col-xs-12">\r\n\r\n            <!-- Filter -->\r\n            <pas-task-filter></pas-task-filter>\r\n\r\n            <!-- Content -->\r\n            <ago-box color="purple" large="true" header-class="{\'hidden-md\': true, \'hidden-lg\': true}">\r\n                <ago-box-title>\r\n                    <i class="fa icon-tasks"></i>\r\n                    <span bindonce="i18n.pas.tasks" bo-text="i18n.pas.tasks.title"></span>\r\n                </ago-box-title>\r\n\r\n                <ago-box-content>\r\n                    <div class="box-toolbox box-toolbox-top">\r\n                        <ago-error-msg></ago-error-msg>\r\n\r\n                        <div>\r\n                            <common-tasks-create-task-btn sref="page.project.pas-taskCreate" current="editables.selectedTask">\r\n                            </common-tasks-create-task-btn>\r\n\r\n                            <ago-report-selector project="reportProject" report-types="REPORT_TYPES"\r\n                                                 on-error="onReportError(error)"\r\n                                                 on-get-params="fillReportParameters(settings, parameters)">\r\n                            </ago-report-selector>\r\n\r\n                            <ago-view-mode modes="viewModes" settings="viewModeSettings" mode="viewMode"></ago-view-mode>\r\n\r\n                            <refresher active="indication.loading" on-refresh="refreshList()"></refresher>\r\n                            <ago-watch-btn code="PAS.Task" item-id="null" class="pull-right"></ago-watch-btn>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div ng-if="viewMode === viewModes.list">\r\n                        <common-tasks-task-oneline models="models" sorters="sorters" api-prefix="pas/tasks"\r\n                           view-state="page.project.pas-taskProps" create-state="page.project.pas-taskCreate"\r\n                           comments-state="page.project.pas-taskComments" files-state="page.project.pas-taskFiles">\r\n                        </common-tasks-task-oneline>\r\n                    </div>\r\n                    <div ng-if="viewMode === viewModes.cards">\r\n                        <pas-task-cards models="models" toggle-details="toggleDetails(model)" show-links="true"></pas-task-cards>\r\n                    </div>\r\n                    <div ng-if="viewMode === viewModes.gantt">\r\n                        <common-tasks-task-gantt models="models" select="selectTask(task)" api-prefix="pas/tasks"\r\n                             module="pas" task-link-template="#!/project/{{task.ProjectCode}}/pas-tasks/{{task.SeqNumber}}">\r\n                        </common-tasks-task-gantt>\r\n                    </div>\r\n                    <div class="clearfix"></div>\r\n\r\n                    <div class="box-toolbox box-toolbox-bottom">\r\n                        <button type="button" class="btn btn-primary" ng-click="paging.page = paging.page + 1"\r\n                                bindonce="i18n.core" bo-text="i18n.core.buttons.more"></button>\r\n\r\n                        <refresher active="indication.loading" on-refresh="refreshList()"></refresher>\r\n                        <counter action=\'pas/tasks/getTasksCount\'></counter>\r\n                    </div>\r\n                </ago-box-content>\r\n            </ago-box>\r\n\r\n        </div>\r\n    </div>\r\n</div>\r\n'}),define("pas/states/task/taskList",["../../moduleDef","angular","text!./taskList.tpl.html","text!../moduleMenu.tpl.html"],function(module,angular,tpl,moduleMenuTpl){var ctrl=function($scope,$controller){angular.extend(this,$controller("commonTasksTaskListCtrl",{$scope:$scope,apiPrefix:"pas/tasks",reportTypes:["pas-task-list"]}))};module.config(["$stateProvider",function($stateProvider){$stateProvider.state({name:"page.project.pas-tasks",url:"/pas-tasks",views:{"":{template:tpl},"moduleMenu@page":{template:moduleMenuTpl}},onEnter:["$rootScope",function($rootScope){$rootScope.breadcrumbs.push({name:"pas.tasks.title",url:"page.project.pas-tasks"})}],onExit:["$rootScope",function($rootScope){$rootScope.breadcrumbs.splice($rootScope.breadcrumbs.length-1,1)}]})}]).controller("pas-taskListCtrl",["$scope","$controller",ctrl])}),define("pas/states/task/taskType",["../../moduleDef","angular","text!../moduleMenu.tpl.html"],function(module,angular,menuTpl){module.config(["$stateProvider",function($stateProvider){$stateProvider.state({name:"page.project.common-taskType.pas",url:"/classifier/taskType",views:{"moduleMenu@page":{template:menuTpl}},onEnter:["$rootScope",function($rootScope){$rootScope.breadcrumbs.push({name:"common.tasks.taskType.title",url:"page.project.common-taskType.pas"})}]})}]).controller("taskTypeCtrl",["$scope","$controller",function($scope,$controller){angular.extend(this,$controller("commonTaskTypeCtrl",{$scope:$scope,apiPrefix:"pas/dictionary"}))}])}),define("text!pas/states/task/create.tpl.html",[],function(){return'<div class="container" ng-controller="pasTaskCreateCtrl">\r\n    <div class="row" id="content-wrapper">\r\n        <div class="col-xs-12">\r\n\r\n            <common-tasks-create-task tasks-api="pas/tasks" dictionary-api="pas/dictionary"\r\n                                      task-sref="page.project.pas-taskProps">\r\n                <!-- Linked doc (if present) -->\r\n                <ago-new-form-static-item label="i18n.pas.tasks.create.linkedDoc" visible="document">\r\n                    <div class="checkbox">\r\n                        <label>\r\n                            <input type="checkbox" ng-model="model.useLink">\r\n                            {{ i18n.pas.tasks.create.useLink }}\r\n                        </label>\r\n                    </div>\r\n                    <pas-doc-info num="{{ document }}"></pas-doc-info>\r\n                </ago-new-form-static-item>\r\n\r\n                <!-- Linked order (if present) -->\r\n                <ago-new-form-static-item label="i18n.pas.tasks.create.order" visible="order">\r\n                    <div class="checkbox">\r\n                        <label>\r\n                            <input type="checkbox" ng-model="model.useLink">\r\n                            {{ i18n.pas.tasks.create.useLink }}\r\n                        </label>\r\n                    </div>\r\n                    <pas-order-info num="{{ order }}"></pas-order-info>\r\n                </ago-new-form-static-item>\r\n\r\n                <!-- Linked object (if present) -->\r\n                <ago-new-form-static-item label="i18n.pas.tasks.create.linkedObject" visible="obj">\r\n                    <div class="checkbox">\r\n                        <label>\r\n                            <input type="checkbox" ng-model="model.useLink">\r\n                            {{ i18n.pas.tasks.create.useLink }}\r\n                        </label>\r\n                    </div>\r\n                    <pas-object-info num="{{ obj }}"></pas-object-info>\r\n                </ago-new-form-static-item>\r\n            </common-tasks-create-task>\r\n\r\n        </div>\r\n    </div>\r\n</div>\r\n'}),define("pas/states/task/create",["../../moduleDef","angular","text!./create.tpl.html","text!../moduleMenu.tpl.html"],function(module,angular,tpl,moduleMenuTpl){module.config(["$stateProvider",function($stateProvider){$stateProvider.state({name:"page.project.pas-taskCreate",url:"/pas/tasks/create?doc&order&obj&primary&startWith&startAfter",views:{"":{template:tpl},"moduleMenu@page":{template:moduleMenuTpl}},onEnter:["$rootScope",function($rootScope){$rootScope.breadcrumbs.push({name:"pas.tasks.title",url:"page.project.pas-tasks"}),$rootScope.breadcrumbs.push({name:"common.tasks.create.title",url:"page.project.pas-taskCreate"})}],onExit:["$rootScope",function($rootScope){$rootScope.breadcrumbs.splice($rootScope.breadcrumbs.length-2,2)}]})}]).controller("pasTaskCreateCtrl",["$scope","$stateParams","apinetService","$state","$controller",function($scope,$stateParams,apinetService,$state,$controller){$scope.document=$stateParams.doc,$scope.order=$stateParams.order,$scope.obj=$stateParams.obj,angular.extend(this,$controller("commonTaskCreateCtrl",{$scope:$scope,settings:{apiPrefix:"pas/tasks",initModel:function(model){return angular.extend(model,{useLink:!0})},modelToRequest:function(model,request){angular.extend(request,{Order:$stateParams.order,LinkOrder:model.useLink}),model.useLink&&angular.extend(request,{Document:$stateParams.doc,Object:$stateParams.obj})},moveTo:function(nextAction,taskNum){"goToTask"===nextAction?$state.go("page.project.pas-taskProps",{num:taskNum,project:$stateParams.project}):"goToPrimary"===nextAction?$state.go("page.project.pas-taskProps",{num:$stateParams.primary,project:$stateParams.project}):"goToList"===nextAction&&$state.go("page.project.pas-tasks",{project:$stateParams.project})}}}))}])}),define("text!pas/states/task/view/activity.tpl.html",[],function(){return'<div class="container" ng-controller="pasTaskActivityCtrl">\r\n    <div class="row" id="content-wrapper">\r\n        <div class="col-xs-12">\r\n            <div class="row">\r\n                <div class="col-xs-12">\r\n                    <ago-tabs current-tab="activity" tab-settings="tabs"></ago-tabs>\r\n                </div>\r\n            </div>\r\n\r\n            {{ TODO }}\r\n        </div>\r\n    </div>\r\n</div>\r\n'}),define("pas/states/task/view/activity",["../../../moduleDef","angular","text!./activity.tpl.html","text!../../moduleMenu.tpl.html"],function(module,angular,tpl,menuTpl){module.config(["$stateProvider",function($stateProvider){$stateProvider.state({name:"page.project.pas-taskActivity",url:"/pas-tasks/:num/activity",views:{"":{template:tpl},"moduleMenu@page":{template:menuTpl}},onEnter:["$rootScope","$stateParams",function($rootScope,$stateParams){$rootScope.breadcrumbs.push({name:"pas.tasks.title",url:"page.project.pas-tasks"}),$rootScope.breadcrumbs.push({name:$stateParams.num,url:"page.project.pas-taskProps({num: '"+$stateParams.num+"'})"})}],onExit:["$rootScope",function($rootScope){$rootScope.breadcrumbs.splice($rootScope.breadcrumbs.length-2,2)}]})}]).controller("pasTaskActivityCtrl",["$scope","$stateParams","pas.taskTabs","$controller",function($scope,$stateParams,taskTabs,$controller){angular.extend(this,$controller("TabbedViewCtrl",{$scope:$scope,num:$stateParams.num,tabs:taskTabs})),$scope.TODO="TODO: Task activity view"}])}),define("text!pas/states/task/view/props.tpl.html",[],function(){return'<div class="container" ng-controller="pasTaskPropsCtrl">\r\n    <div class="row" id="content-wrapper">\r\n        <div class="col-xs-12">\r\n            <div class="row">\r\n                <div class="col-xs-12">\r\n                    <ago-tabs current-tab="props" tab-settings="tabs"></ago-tabs>\r\n                </div>\r\n            </div>\r\n\r\n            <div class="row">\r\n                <div class="col-xs-12">\r\n                    <ago-error-msg></ago-error-msg>\r\n                    <ago-box color="purple" large="true">\r\n                        <ago-box-title>\r\n                            <i class="icon-table"></i>\r\n                            <span bindonce="i18n.pas.tasks" bo-text="i18n.pas.tasks.props.title"></span>\r\n                        </ago-box-title>\r\n                        <ago-box-content>\r\n                            <div class="box-toolbox box-toolbox-top">\r\n                                <common-tasks-status-actions></common-tasks-status-actions>\r\n                                <common-tasks-assign-all-btn></common-tasks-assign-all-btn>\r\n\r\n                                <refresher active="loading" on-refresh="load()"></refresher>\r\n                                <button class="btn btn-danger pull-right" ng-click="delete()" ng-disabled="loading"\r\n                                        style="margin-left: 5px">\r\n                                    <i class="icon-remove"></i>\r\n                                    <span class="inline-block hidden-xs" bindonce="i18n.core" bo-text="i18n.core.buttons.delete"></span>\r\n                                </button>\r\n                                <ago-watch-btn code="PAS.Task" item-id="model.Id" class="pull-right"></ago-watch-btn>\r\n                                <div class="clearfix"></div>\r\n                            </div>\r\n\r\n                            <form class="form form-horizontal" novalidate bindonce="i18n.pas.tasks">\r\n                                <common-tasks-props-num-type-part type-lookup-url="pas/dictionary/lookupTaskTypes">\r\n                                </common-tasks-props-num-type-part>\r\n\r\n                                <common-tasks-props-participants-part></common-tasks-props-participants-part>\r\n\r\n                                <common-tasks-props-content-part></common-tasks-props-content-part>\r\n\r\n                                <common-tasks-props-timeline-part task-lookup-url="pas/tasks/lookupTasks"\r\n                                                                  task-props-state="page.project.pas-taskProps">\r\n                                </common-tasks-props-timeline-part>\r\n\r\n                                <common-tasks-props-status-priority-part\r\n                                        status-lookup-url="pas/dictionary/lookupTaskStatuses"\r\n                                        priority-lookup-url="pas/dictionary/lookupTaskPriorities">\r\n                                </common-tasks-props-status-priority-part>\r\n\r\n                                <common-tasks-props-primary-security-part\r\n                                        task-lookup-url="pas/tasks/lookupTasks"\r\n                                        executor-lookup-url="pas/tasks/lookupTaskExecutors"\r\n                                        task-props-state="page.project.pas-taskProps">\r\n                                </common-tasks-props-primary-security-part>\r\n\r\n                                <div class="row">\r\n                                    <ago-form-item label="i18n.core.fields.ou" field="OrgUnit" vld="validation" large="true">\r\n                                        <inline-lookup model="model.OrgUnit" input-col="col-xs-12" required\r\n                                                       on-update="onUpdateProp(model, \'OrgUnit\', val)"\r\n                                                       on-cancel="onCancelProp()"\r\n                                                       input-lookup="pas/project/lookupOUs">\r\n                                        </inline-lookup>\r\n                                    </ago-form-item>\r\n                                </div>\r\n\r\n                                <common-tasks-props-author-part></common-tasks-props-author-part>\r\n                            </form>\r\n                        </ago-box-content>\r\n                    </ago-box>\r\n                </div>\r\n            </div>\r\n\r\n            <div class="row">\r\n                <div class="col-xs-12">\r\n                    <custom-properties model="model" collapsed="customPropsCollapsed"\r\n                                       create-url="pas/tasks/editParam"\r\n                                       update-url="pas/tasks/editParam"\r\n                                       delete-url="pas/tasks/deleteParam"></custom-properties>\r\n                </div>\r\n            </div>\r\n\r\n            <div class="row">\r\n                <div class="col-xs-12">\r\n                    <pas-task-linked-records task-id="model.Id" task-num="model.SeqNumber" input="true" collapsed="inputCollapsed"\r\n                                         orders="model.InputOrders"\r\n                                         docs="model.InputDocuments"\r\n                                         objects="model.InputObjects"\r\n                                         files="model.InputFiles">\r\n                     </pas-task-linked-records>\r\n                </div>\r\n            </div>\r\n\r\n            <div class="row">\r\n                <div class="col-xs-12">\r\n                    <pas-task-linked-records task-id="model.Id" task-num="model.SeqNumber" input="false" collapsed="outputCollapsed"\r\n                                         orders="model.OutputOrders"\r\n                                         docs="model.OutputDocuments"\r\n                                         objects="model.OutputObjects"\r\n                                         files="model.OutputFiles" enable-create="true">\r\n                    </pas-task-linked-records>\r\n                </div>\r\n            </div>\r\n\r\n            <div class="row">\r\n                <div class="col-xs-12">\r\n                    <common-tasks-agreements-view model="model" collapsed="agreementsCollapsed" api-prefix="pas">\r\n                    </common-tasks-agreements-view>\r\n                </div>\r\n            </div>\r\n\r\n            <div class="row">\r\n                <div class="col-xs-12">\r\n                    <ago-status-history model="model.StatusHistory" view-settings="taskStatusViewSettings"\r\n                            change="changeStatus" collapsed="statusHistoryCollapsed">\r\n                    </ago-status-history>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'
}),define("pas/states/task/view/props",["../../../moduleDef","angular","text!./props.tpl.html","text!../../moduleMenu.tpl.html"],function(module,angular,tpl,menuTpl){module.config(["$stateProvider",function($stateProvider){$stateProvider.state({name:"page.project.pas-taskProps",url:"/pas-tasks/:num",views:{"":{template:tpl},"moduleMenu@page":{template:menuTpl}},onEnter:["$rootScope","$stateParams",function($rootScope,$stateParams){$rootScope.breadcrumbs.push({name:"pas.tasks.title",url:"page.project.pas-tasks"}),$rootScope.breadcrumbs.push({name:$stateParams.num,url:"page.project.pas-taskProps({num: '"+$stateParams.num+"'})"})}],onExit:["$rootScope",function($rootScope){$rootScope.breadcrumbs.splice($rootScope.breadcrumbs.length-2,2)}]})}]).controller("pasTaskPropsCtrl",["$scope","pas.taskTabs","$controller",function($scope,taskTabs,$controller){angular.extend(this,$controller("commonTasksTaskProps",{$scope:$scope,tabs:taskTabs,apiPrefix:"pas/tasks",listRouteName:"page.project.pas-tasks",saveStateFn:function(state){return angular.extend(state,{subtasksCollapsed:$scope.subtasksCollapsed})}}))}])}),define("text!pas/states/task/view/subtasks.tpl.html",[],function(){return'<div class="container"\r\n     ng-controller="pas-taskSubtasksCtrl"\r\n     filtered-list="{method: \'pas/tasks/getSubtasks\'}"\r\n     initial-sorters="{ InternalSeqNumber: \'desc\' }">\r\n    <div class="row" id="content-wrapper">\r\n        <div class="col-xs-12">\r\n\r\n            <div class="row">\r\n                <div class="col-xs-12">\r\n                    <ago-tabs current-tab="subtasks" tab-settings="tabs"></ago-tabs>\r\n                </div>\r\n            </div>\r\n\r\n            <div class="row">\r\n                <div class="col-xs-12">\r\n                    <!-- Filter -->\r\n                    <pas-task-filter></pas-task-filter>\r\n\r\n                    <!-- Content -->\r\n                    <ago-box color="purple" large="true" header-class="{\'hidden-md\': true, \'hidden-lg\': true}">\r\n                        <ago-box-title>\r\n                            <i class="fa icon-tasks"></i>\r\n                            <span bindonce="i18n.pas.tasks" bo-text="i18n.pas.tasks.title"></span>\r\n                        </ago-box-title>\r\n\r\n                        <ago-box-content>\r\n                            <div class="box-toolbox box-toolbox-top">\r\n                                <ago-error-msg></ago-error-msg>\r\n\r\n                                <div>\r\n                                    <common-tasks-create-task-btn sref="page.project.pas-taskCreate"\r\n                                                                  primary="num" current="editables.selectedTask">\r\n                                    </common-tasks-create-task-btn>\r\n\r\n                                    <ago-view-mode modes="viewModes" settings="viewModeSettings" mode="viewMode"></ago-view-mode>\r\n\r\n                                    <refresher active="indication.loading" on-refresh="refreshList()"></refresher>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div ng-if="viewMode === viewModes.list">\r\n                                <common-tasks-task-oneline models="models" sorters="sorters" api-prefix="pas/tasks"\r\n                                   view-state="page.project.pas-taskProps" create-state="page.project.pas-taskCreate"\r\n                                   comments-state="page.project.pas-taskComments" files-state="page.project.pas-taskFiles">\r\n                                </common-tasks-task-oneline>\r\n                            </div>\r\n                            <div ng-if="viewMode === viewModes.cards">\r\n                                <pas-task-cards models="models" toggle-details="toggleDetails(model)" show-links="true"></pas-task-cards>\r\n                            </div>\r\n                            <div ng-if="viewMode === viewModes.gantt">\r\n                                <common-tasks-task-gantt models="models" select="selectTask(task)" api-prefix="pas/tasks"\r\n                                    module="pas" task-link-template="#!/project/{{task.ProjectCode}}/pas-tasks/{{task.SeqNumber}}">\r\n                                </common-tasks-task-gantt>\r\n                            </div>\r\n                            <div class="clearfix"></div>\r\n\r\n                            <div class="box-toolbox box-toolbox-bottom">\r\n                                <button type="button" class="btn btn-primary" ng-click="paging.page = paging.page + 1"\r\n                                        bindonce="i18n.core" bo-text="i18n.core.buttons.more"></button>\r\n\r\n                                <refresher active="indication.loading" on-refresh="refreshList()"></refresher>\r\n                                <counter action=\'pas/tasks/getSubtasksCount\'></counter>\r\n                            </div>\r\n                        </ago-box-content>\r\n                    </ago-box>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'}),define("pas/states/task/view/subtasks",["../../../moduleDef","angular","text!./subtasks.tpl.html","text!./../../moduleMenu.tpl.html"],function(module,angular,tpl,moduleMenuTpl){var ctrl=function($scope,$stateParams,$controller,taskTabs){$scope.initialRequestParams={num:$stateParams.num},$scope.onCacheKey=function(key){return key+"_"+$stateParams.num},angular.extend(this,$controller("commonTasksTaskListCtrl",{$scope:$scope,apiPrefix:"pas/tasks",reportTypes:["pas-task-list"]})),angular.extend(this,$controller("TabbedViewCtrl",{$scope:$scope,num:$stateParams.num,tabs:taskTabs}))};module.config(["$stateProvider",function($stateProvider){$stateProvider.state({name:"page.project.pas-taskSubtasks",url:"/pas-tasks/:num/subtasks",views:{"":{template:tpl},"moduleMenu@page":{template:moduleMenuTpl}},onEnter:["$rootScope","$stateParams",function($rootScope,$stateParams){$rootScope.breadcrumbs.push({name:"pas.tasks.title",url:"page.project.pas-tasks"}),$rootScope.breadcrumbs.push({name:$stateParams.num,url:"page.project.pas-taskProps({num: '"+$stateParams.num+"'})"})}],onExit:["$rootScope",function($rootScope){$rootScope.breadcrumbs.splice($rootScope.breadcrumbs.length-2,2)}]})}]).controller("pas-taskSubtasksCtrl",["$scope","$stateParams","$controller","pas.taskTabs",ctrl])}),define("text!pas/states/task/view/comments.tpl.html",[],function(){return'<div class="container" ng-controller="pasTaskCommentsCtrl"\r\n     filtered-list="{\'method\': \'pas/tasks/getComments\', \'num\': num}">\r\n    <ago-comments-view create-url="pas/tasks/createComment"></ago-comments-view>\r\n</div>\r\n'}),define("pas/states/task/view/comments",["../../../moduleDef","angular","text!./comments.tpl.html","text!../../moduleMenu.tpl.html"],function(module,angular,tpl,menuTpl){module.config(["$stateProvider",function($stateProvider){$stateProvider.state({name:"page.project.pas-taskComments",url:"/pas-tasks/:num/comments",views:{"":{template:tpl},"moduleMenu@page":{template:menuTpl}},onEnter:["$rootScope","$stateParams",function($rootScope,$stateParams){$rootScope.breadcrumbs.push({name:"pas.tasks.title",url:"page.project.pas-tasks"}),$rootScope.breadcrumbs.push({name:$stateParams.num,url:"page.project.pas-taskProps({num: '"+$stateParams.num+"'})"})}],onExit:["$rootScope",function($rootScope){$rootScope.breadcrumbs.splice($rootScope.breadcrumbs.length-2,2)}]})}]).controller("pasTaskCommentsCtrl",["$scope","$stateParams","pas.taskTabs","$controller",function($scope,$stateParams,taskTabs,$controller){angular.extend(this,$controller("TabbedViewCtrl",{$scope:$scope,num:$stateParams.num,tabs:taskTabs})),$scope.initialRequestParams={num:$scope.num},$scope.onCacheKey=function(key){return key+"_"+$scope.num}}])}),define("text!pas/states/task/view/files.tpl.html",[],function(){return'<div class="container" ng-controller="pasTaskFilesCtrl"\r\n     filtered-list="{method: \'pas/tasks/getFiles\'}"\r\n     initial-sorters="{Name: \'asc\'}">\r\n    <div class="row" id="content-wrapper">\r\n        <div class="col-xs-12">\r\n            <div class="row">\r\n                <div class="col-xs-12">\r\n                    <ago-tabs current-tab="files" tab-settings="tabs"></ago-tabs>\r\n                </div>\r\n            </div>\r\n\r\n            <files-view models="models" owner-id="num"\r\n                        filter-meta="pas/tasks/TaskFilesMetadata" filter-group="PAS.TaskFiles"\r\n                        upload-url="pas/tasks/uploadFiles" rename-url="pas/tasks/renameFile"\r\n                        delete-url="pas/tasks/deleteFiles">\r\n            </files-view>\r\n        </div>\r\n    </div>\r\n</div>\r\n'}),define("pas/states/task/view/files",["../../../moduleDef","angular","text!./files.tpl.html","text!../../moduleMenu.tpl.html"],function(module,angular,tpl,menuTpl){module.config(["$stateProvider",function($stateProvider){$stateProvider.state({name:"page.project.pas-taskFiles",url:"/pas-tasks/:num/files",views:{"":{template:tpl},"moduleMenu@page":{template:menuTpl}},onEnter:["$rootScope","$stateParams",function($rootScope,$stateParams){$rootScope.breadcrumbs.push({name:"pas.tasks.title",url:"page.project.pas-tasks"}),$rootScope.breadcrumbs.push({name:$stateParams.num,url:"page.project.pas-taskProps({num: '"+$stateParams.num+"'})"})}],onExit:function($rootScope){$rootScope.breadcrumbs.splice($rootScope.breadcrumbs.length-2,2)}})}]).controller("pasTaskFilesCtrl",["$scope","$stateParams","pas.taskTabs","$controller",function($scope,$stateParams,taskTabs,$controller){angular.extend(this,$controller("TabbedViewCtrl",{$scope:$scope,num:$stateParams.num,tabs:taskTabs})),$scope.initialRequestParams={ownerId:$scope.num},$scope.$on("resetFilter",function(){$scope.requestParams.ownerId=$scope.num}),$scope.onCacheKey=function(key){return key+"_"+$scope.num}}])}),define("text!pas/states/doc/docList.tpl.html",[],function(){return'<div class="container"\r\n     ng-controller="pas-docsListCtrl"\r\n     filtered-list="{method: \'pas/documents/getDocs\'}"\r\n     initial-sorters="{ InternalSeqNumber: \'desc\' }">\r\n    <div class="row" id="content-wrapper">\r\n        <div class="col-xs-12">\r\n            <div filters-box="filter" sorters="sorters" meta="pas/documents/docMetadata" group="PAS.Document"\r\n                 apply-enabled="applyEnabled" apply-filter="applyFilter" reset-filter="resetFilter"\r\n                 filter-applied="filterApplied" style="padding-top: 5px">\r\n                <form class="form form-horizontal" bindonce="i18n.pas">\r\n                    <!--<div class="form-group">-->\r\n                        <!--<label class="col-md-3 control-label" bo-text="i18n.pas.tasks.filters.custom"></label>-->\r\n                        <!--<div class="col-md-9">-->\r\n                            <!--<select ng-model="filter.simple.Combined" class="form-control">-->\r\n                                <!--<option value="all" bo-text="i18n.pas.tasks.filters.predefined.all"></option>-->\r\n                                <!--<option value="myNotClosed" bo-text="i18n.pas.tasks.filters.predefined.myNotClosed"></option>-->\r\n                                <!--<option value="notClosed" bo-text="i18n.pas.tasks.filters.predefined.notClosed"></option>-->\r\n                                <!--<option value="overdue" bo-text="i18n.pas.tasks.filters.predefined.overdue"></option>-->\r\n                                <!--<option value="dayLeft" bo-text="i18n.pas.tasks.filters.predefined.dayLeft"></option>-->\r\n                                <!--<option value="weekLeft" bo-text="i18n.pas.tasks.filters.predefined.weekLeft"></option>-->\r\n                                <!--<option value="noLimit" bo-text="i18n.pas.tasks.filters.predefined.noLimit"></option>-->\r\n                                <!--<option value="closedToday" bo-text="i18n.pas.tasks.filters.predefined.closedToday"></option>-->\r\n                                <!--<option value="closedYesterday" bo-text="i18n.pas.tasks.filters.predefined.closedYesterday"></option>-->\r\n                            <!--</select>-->\r\n                        <!--</div>-->\r\n                    <!--</div>-->\r\n                    <div class="form-group">\r\n                        <label class="col-md-3 control-label" bo-text="i18n.pas.docs.fields.status"></label>\r\n                        <div class="col-md-9">\r\n                            <input lookup="pas/dictionary/lookupDocumentStatuses" ng-model="filter.simple.Status"\r\n                                   filter-node="{path: \'Status\', op: \'=\'}" class="form-control" multiple />\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label class="col-md-3 control-label" bo-text="i18n.pas.docs.fields.seqNumber"></label>\r\n                        <div class="col-md-9">\r\n                            <input lookup="pas/documents/lookupDocuments" ng-model="filter.simple.SeqNumber"\r\n                                   filter-node="{path: \'Id\', op: \'=\'}" class="form-control" multiple />\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label class="col-md-3 control-label" bo-text="i18n.pas.docs.fields.type"></label>\r\n                        <div class="col-md-9">\r\n                            <input lookup="pas/dictionary/lookupDocumentTypes" ng-model="filter.simple.Type"\r\n                                   filter-node="{path: \'Type.FullName\', op: \'like\'}" class="form-control" multiple />\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label class="col-md-3 control-label" bo-text="i18n.pas.docs.fields.content"></label>\r\n                        <div class="col-md-9">\r\n                            <input type="text" ng-model="filter.simple.Content"\r\n                                   filter-node="{path: \'Content\', op:\'like\'}" class="form-control"  />\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n\r\n                <filters-box-more-filters>\r\n                    <ago-box color="muted" border="muted" caption="{{ i18n.core.filters.user }}" title-click-collapse padding collapsed="propsFilterCollapsed">\r\n                        <div user-filter filter-ng-model="filter.user"></div>\r\n                    </ago-box>\r\n                </filters-box-more-filters>\r\n            </div>\r\n\r\n            <ago-box color="purple" large="true" header-class="{\'hidden-md\': true, \'hidden-lg\': true}">\r\n                <ago-box-title>\r\n                    <i class="fa icon-file-text"></i>\r\n                    <span bindonce="i18n.pas.docs" bo-text="i18n.pas.docs.title"></span>\r\n                </ago-box-title>\r\n\r\n                <ago-box-content>\r\n                    <div class="box-toolbox box-toolbox-top">\r\n                        <ago-error-msg></ago-error-msg>\r\n\r\n                        <div>\r\n                            <a ui-sref="page.project.pas-docCreate" class="btn btn-primary">\r\n                                <i class="icon-plus icon-white"></i>\r\n                                <span class="inline-block hidden-xs" bindonce="i18n.core" bo-text="i18n.pas.docs.create.title"></span>\r\n                            </a>\r\n\r\n                            <ago-report-selector project="reportProject" report-types="REPORT_TYPES"\r\n                                                 on-error="onReportError(error)"\r\n                                                 on-get-params="fillReportParameters(settings, parameters)">\r\n                             </ago-report-selector>\r\n\r\n                            <refresher active="indication.loading" on-refresh="refreshList()"></refresher>\r\n                            <ago-watch-btn code="PAS.Document" item-id="null" class="pull-right"></ago-watch-btn>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <pas-doc-cards models="models" toggle-details="toggleDetails(model)" show-links="true"></pas-doc-cards>\r\n                    <div class="clearfix"></div>\r\n\r\n                    <div class="box-toolbox box-toolbox-bottom">\r\n                        <button type="button" class="btn btn-primary" ng-click="paging.page = paging.page + 1"\r\n                                bindonce="i18n.core" bo-text="i18n.core.buttons.more"></button>\r\n\r\n                        <refresher active="indication.loading" on-refresh="refreshList()"></refresher>\r\n                        <counter action=\'pas/documents/getDocsCount\'></counter>\r\n                    </div>\r\n                </ago-box-content>\r\n            </ago-box>\r\n\r\n        </div>\r\n    </div>\r\n</div>\r\n'}),define("pas/states/doc/docList",["../../moduleDef","angular","text!./docList.tpl.html","text!../moduleMenu.tpl.html"],function(module,angular,tpl,moduleMenuTpl){module.config(["$stateProvider",function($stateProvider){$stateProvider.state({name:"page.project.pas-docs",url:"/pas-docs",views:{"":{template:tpl},"moduleMenu@page":{template:moduleMenuTpl}},onEnter:["$rootScope",function($rootScope){$rootScope.breadcrumbs.push({name:"pas.docs.title",url:"page.project.pas-docs"})}],onExit:["$rootScope",function($rootScope){$rootScope.breadcrumbs.splice($rootScope.breadcrumbs.length-1,1)}]})}]).controller("pas-docsListCtrl",["$scope","$stateParams","$controller",function($scope,$stateParams,$controller){angular.extend(this,$controller("BaseCardsListCtrl",{$scope:$scope,project:$stateParams.project,detailsUrl:"pas/documents/getDocDetails"})),angular.extend(this,$controller("ReportableListCtrl",{$scope:$scope,project:$stateParams.project,reportTypes:["pas-docs-list"]})),angular.extend(this,$controller("PrefilteredListCtrl",{$scope:$scope,defaultFilter:function(isFirstRequest){var defaultPredefined=isFirstRequest?"myNotClosed":"all";return $scope.requestParams.predefined=defaultPredefined,{simple:{Combined:defaultPredefined}}}})),$scope.$watch("filter.simple.Combined",function(value){$scope.requestParams.predefined=value||"all"},!0)}])}),define("text!pas/states/doc/doc-type/docTypeView.tpl.html",[],function(){return'<div class="container"\r\n     ng-controller="pasDocTypeCtrl"\r\n     filtered-list="{method: \'pas/dictionary/getDocumentTypes\'}"\r\n     initial-sorters="{ FullName: \'asc\'}">\r\n    <div class="row" id="content-wrapper">\r\n        <div class="col-xs-12">\r\n\r\n            <div filters-box="filter" sorters="sorters" meta="pas/dictionary/DocumentTypeMetadata"\r\n                 group="PAS.DocType"\r\n                 apply-enabled="applyEnabled" apply-filter="applyFilter" reset-filter="resetFilter"\r\n                 filter-applied="filterApplied" style="padding-top: 5px">\r\n                <ago-box-content>\r\n                    <form class="form form-horizontal">\r\n                        <div class="form-group">\r\n                            <label class="col-md-3 control-label">{{ i18n.core.fields.name }}</label>\r\n\r\n                            <div class="col-md-9">\r\n                                <input ng-model="filter.simple.FullName" filter-node="{path: \'FullName\', op:\'like\'}"\r\n                                       class="form-control"/>\r\n                            </div>\r\n                        </div>\r\n                    </form>\r\n                </ago-box-content>\r\n            </div>\r\n\r\n            <ago-box color="purple" large="true" header-class="{\'hidden-md\': true, \'hidden-lg\': true}">\r\n                <ago-box-title>\r\n                    <i class="icon-cog"></i>\r\n                    {{ i18n.pas.docType.title }}\r\n                </ago-box-title>\r\n                <ago-box-content>\r\n                    <ago-hdict-view counter-url="pas/dictionary/getDocumentTypesCount">\r\n                        <ago-hdict-add-form>\r\n                            <ago-hdict-default-add-form model="newModel" vld="validation"\r\n                                parent-url="pas/dictionary/lookupDocumentTypes"\r\n                                ng-show="createFormVisible" on-update="create()" on-cancel="toggleCreateForm(false)">\r\n                            </ago-hdict-default-add-form>\r\n                        </ago-hdict-add-form>\r\n                        <ago-hdict-header>\r\n                            <ago-hdict-fullname-header></ago-hdict-fullname-header>\r\n                        </ago-hdict-header>\r\n                        <ago-hdict-column>\r\n                            <ago-hdict-fullname-column></ago-hdict-fullname-column>\r\n                        </ago-hdict-column>\r\n                    </ago-hdict-view>\r\n                </ago-box-content>\r\n            </ago-box>\r\n        </div>\r\n    </div>\r\n</div>\r\n'}),define("pas/states/doc/doc-type/docType",["../../../moduleDef","angular","text!./docTypeView.tpl.html","text!../../moduleMenu.tpl.html"],function(module,angular,template,menuTemplate){module.config(["$stateProvider",function($stateProvider){$stateProvider.state({name:"page.project.pas-docType",url:"/pas/classifier/docType",views:{"":{template:template},"moduleMenu@page":{template:menuTemplate}},onEnter:["$rootScope",function($rootScope){$rootScope.breadcrumbs.push({name:"pas.docType.title",url:"page.project.pas-docType"})}],onExit:["$rootScope",function($rootScope){$rootScope.breadcrumbs.splice($rootScope.breadcrumbs.length-1,1)}]})}]).controller("pasDocTypeCtrl",["$scope","$controller",function($scope,$controller){angular.extend(this,$controller("BaseHDictFullNameCtrl",{$scope:$scope,actionPrefix:"pas/dictionary",entityType:"DocumentType"}))}])}),define("text!pas/states/doc/create.tpl.html",[],function(){return'<div class="container" ng-controller="pasDocCreateCtrl">\r\n    <div class="row" id="content-wrapper">\r\n        <div class="col-xs-12">\r\n\r\n            <div class="box" style="margin-top: 5px">\r\n                <div class="box-header purple-background">\r\n                    <div class="title">\r\n                        <i class="icon-plus"></i>\r\n                        {{ i18n.pas.docs.create.title }}\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="box-content">\r\n                    <ago-error-msg></ago-error-msg>\r\n\r\n                    <form name="form" class="form form-horizontal" novalidate>\r\n                        <!-- Type -->\r\n                        <ago-new-form-item label="i18n.pas.docs.fields.type" field="Type" control="form.docType" vld="validation">\r\n                            <div class="input-group select2-bootstrap-append">\r\n                                <input type="text" id="docType" name="docType" lookup="pas/dictionary/lookupDocumentTypes"\r\n                                   ng-model="model.type" placeholder="{{ i18n.pas.docs.create.placeholders.type }}"\r\n                                   required class="form-control" />\r\n                                <span class="input-group-btn">\r\n                                    <a class="btn btn-success" ui-sref="page.project.pas-docType">\r\n                                        <icon class="icon-arrow-right"></icon>\r\n                                    </a>\r\n                                </span>\r\n                            </div>\r\n                        </ago-new-form-item>\r\n\r\n                        <!-- Content -->\r\n                        <ago-new-form-item label="i18n.pas.docs.fields.content" field="Content" control="form.content" vld="validation">\r\n                            <textarea name="content" ng-model="model.content" rows="3" class="form-control" required></textarea>\r\n                        </ago-new-form-item>\r\n\r\n                        <!--Document to link-->\r\n                        <ago-new-form-static-item label="i18n.pas.docs.create.linkedTask" visible="task">\r\n                            <pas-task-info num="{{ task }}"></pas-task-info>\r\n                        </ago-new-form-static-item>\r\n\r\n                        <!-- Goto section -->\r\n                        <div class="form-group">\r\n                            <label class="col-md-2 control-label">{{ i18n.pas.docs.create.afterCreation }}:</label>\r\n                            <div class="col-md-10">\r\n                                <label class="radio radio-inline">\r\n                                    <input type="radio" ng-model="nextAction" value="goToDoc">{{ i18n.pas.docs.create.goToTask }}\r\n                                </label>\r\n                                <label class="radio radio-inline">\r\n                                    <input type="radio" ng-model="nextAction" value="goToList">{{ i18n.pas.docs.create.goToList }}\r\n                                </label>\r\n                                <label class="radio radio-inline">\r\n                                    <input type="radio" ng-model="nextAction" value="stayHere">{{ i18n.pas.docs.create.stayHere }}\r\n                                </label>\r\n                            </div>\r\n                        </div>\r\n                        <!-- Action section -->\r\n                        <div class="form-actions form-actions-padding-sm">\r\n                            <div class="row">\r\n                                <div class="col-md-10 col-md-offset-2">\r\n                                    <button type="button" class="btn" ng-click="cancel()">{{ i18n.core.buttons.cancel }}</button>\r\n                                    <button type="button" class="btn btn-success" ng-click="create()" ng-disabled="form.$invalid">{{ i18n.core.buttons.save }}</button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </form>\r\n\r\n                </div><!-- box-content -->\r\n            </div><!-- box -->\r\n\r\n        </div><!-- col-xs-12 -->\r\n    </div><!-- row -->\r\n</div><!-- container -->\r\n'}),define("pas/states/doc/create",["../../moduleDef","angular","text!./create.tpl.html","text!../moduleMenu.tpl.html"],function(module,angular,tpl,moduleMenuTpl){module.config(["$stateProvider",function($stateProvider){$stateProvider.state({name:"page.project.pas-docCreate",url:"/pas/docs/create?task",views:{"":{template:tpl},"moduleMenu@page":{template:moduleMenuTpl}},onEnter:["$rootScope",function($rootScope){$rootScope.breadcrumbs.push({name:"pas.docs.title",url:"page.project.pas-docs"}),$rootScope.breadcrumbs.push({name:"pas.docs.create.title",url:"page.project.pas-docCreate"})}],onExit:["$rootScope",function($rootScope){$rootScope.breadcrumbs.splice($rootScope.breadcrumbs.length-2,2)}]})}]).controller("pasDocCreateCtrl",["$scope","$stateParams","apinetService","$state","pas.newModels","$controller",function($scope,$stateParams,apinetService,$state,newModels,$controller){angular.extend(this,$controller("ErrorHandlingCtrl",{$scope:$scope})),$scope.cancel=function(){$state.go("page.project.pas-docs")},$scope.create=function(){var req=modelToRequest();apinetService.action({method:"pas/documents/createDocument",project:$stateParams.project,model:req}).then(function(response){response.validation.success?($scope.model=initModel(),"goToDoc"===$scope.nextAction?$state.go("page.project.pas-docProps",{num:response.model,project:$stateParams.project}):"goToList"===$scope.nextAction?$state.go("page.project.pas-docs",{project:$stateParams.project}):"stayHere"===$scope.nextAction&&$scope.form.$setPristine()):($scope.resetValidation(),angular.extend($scope.validation,response.validation))},$scope.handleException)};var initModel=function(){return newModels.doc({type:null,content:null,taskId:null})};$scope.model=newModels.doc()||initModel(),$scope.task=$stateParams.task,$scope.nextAction="goToDoc";var modelToRequest=function(){var m=$scope.model;return{Type:m.type.id,Content:m.content,Task:$stateParams.task}}}])}),define("text!pas/states/doc/view/activity.tpl.html",[],function(){return'<div class="container" ng-controller="pasDocActivityCtrl">\r\n    <div class="row" id="content-wrapper">\r\n        <div class="col-xs-12">\r\n            <div class="row">\r\n                <div class="col-xs-12">\r\n                    <ago-tabs current-tab="activity" tab-settings="tabs"></ago-tabs>\r\n                </div>\r\n            </div>\r\n\r\n            {{ TODO }}\r\n        </div>\r\n    </div>\r\n</div>\r\n'}),define("pas/states/doc/view/activity",["../../../moduleDef","angular","text!./activity.tpl.html","text!../../moduleMenu.tpl.html"],function(module,angular,tpl,menuTpl){module.config(["$stateProvider",function($stateProvider){$stateProvider.state({name:"page.project.pas-docActivity",url:"/pas-docs/:num/activity",views:{"":{template:tpl},"moduleMenu@page":{template:menuTpl}},onEnter:["$rootScope","$stateParams",function($rootScope,$stateParams){$rootScope.breadcrumbs.push({name:"pas.docs.title",url:"page.project.pas-docs"}),$rootScope.breadcrumbs.push({name:$stateParams.num,url:"page.project.pas-docProps({num: '"+$stateParams.num+"'})"})}],onExit:["$rootScope",function($rootScope){$rootScope.breadcrumbs.splice($rootScope.breadcrumbs.length-2,2)}]})}]).controller("pasDocActivityCtrl",["$scope","$stateParams","pas.docTabs","$controller",function($scope,$stateParams,docTabs,$controller){angular.extend(this,$controller("TabbedViewCtrl",{$scope:$scope,num:$stateParams.num,tabs:docTabs})),$scope.TODO="TODO: Document activity view"}])}),define("text!pas/states/doc/view/props.tpl.html",[],function(){return'<div class="container" ng-controller="pasDocPropsCtrl">\r\n    <div class="row" id="content-wrapper">\r\n        <div class="col-xs-12">\r\n            <div class="row">\r\n                <div class="col-xs-12">\r\n                    <ago-tabs current-tab="props" tab-settings="tabs"></ago-tabs>\r\n                </div>\r\n            </div>\r\n\r\n            <div class="row">\r\n                <div class="col-xs-12">\r\n                    <ago-error-msg></ago-error-msg>\r\n                    <ago-box color="purple" large="true">\r\n                        <ago-box-title>\r\n                            <i class="icon-table"></i>\r\n                            <span bindonce="i18n.pas.docs" bo-text="i18n.pas.docs.props.title"></span>\r\n                        </ago-box-title>\r\n                        <ago-box-content>\r\n                            <div class="box-toolbox box-toolbox-top clearfix">\r\n                                <div class="btn-group">\r\n                                    <ago-status-btn ng-repeat="s in model.StatusHistory.Next" status="s"\r\n                                        change="changeStatus" view-settings="docStatusViewSettings">\r\n                                    </ago-status-btn>\r\n                                </div>\r\n\r\n                                <refresher active="loading" on-refresh="load()"></refresher>\r\n                                <button class="btn btn-danger pull-right" ng-click="delete()" ng-disabled="loading"\r\n                                        style="margin-left: 5px">\r\n                                    <i class="icon-remove"></i>\r\n                                    <span class="inline-block hidden-xs" bindonce="i18n.core" bo-text="i18n.core.buttons.delete"></span>\r\n                                </button>\r\n                                <ago-watch-btn code="PAS.Document" item-id="model.Id" class="pull-right"\r\n                                               style="margin-left: 5px">\r\n                                </ago-watch-btn>\r\n                                <div class="clearfix"></div>\r\n                            </div>\r\n\r\n                            <form class="form form-horizontal" novalidate bindonce="i18n.pas.docs">\r\n                                <div class="row">\r\n                                    <ago-form-static-item label="i18n.pas.docs.fields.seqNumber">\r\n                                        {{ model.SeqNumber }}\r\n                                    </ago-form-static-item>\r\n                                    <ago-form-item label="i18n.pas.docs.fields.type" field="Type" vld="validation">\r\n                                        <inline-lookup model="model.Type" input-col="col-xs-12" required\r\n                                                       on-update="onUpdateProp(model, \'Type\', val)"\r\n                                                       on-cancel="onCancelProp()"\r\n                                                       input-lookup="pas/dictionary/lookupDocumentTypes">\r\n                                        </inline-lookup>\r\n                                    </ago-form-item>\r\n                                </div>\r\n\r\n                                <div class="row">\r\n                                    <ago-form-item label="i18n.pas.docs.fields.content" field="Content" vld="validation">\r\n                                        <inline-text-area model="model.Content" input-col="col-xs-12" input-rows="5"\r\n                                                          on-update="onUpdateProp(model, \'Content\', val)"\r\n                                                          on-cancel="onCancelProp()"></inline-text-area>\r\n                                    </ago-form-item>\r\n                                    <ago-form-item label="i18n.pas.docs.fields.status" field="Status" vld="validation">\r\n                                        <inline-lookup model="model.Status" input-col="col-xs-12" required\r\n                                                       on-update="onUpdateProp(model, \'Status\', val)"\r\n                                                       on-cancel="onCancelProp()"\r\n                                                       input-lookup="pas/dictionary/lookupDocumentStatuses">\r\n                                        </inline-lookup>\r\n                                    </ago-form-item>\r\n                                </div>\r\n\r\n                                <div class="row">\r\n                                    <ago-form-item label="i18n.pas.docs.fields.object" fields="Object" vld="validation">\r\n                                        <inline-lookup model="model.Object" input-col="col-xs-12"\r\n                                                       on-update="onUpdateProp(model, \'Object\', val)"\r\n                                                       on-cancel="onCancelProp()"\r\n                                                       input-lookup="pas/objects/lookupObjects"\r\n                                                       input-lookup-options="allowClear: true"\r\n                                                       placeholder="{{ i18n.pas.docs.props.selectObject }}">\r\n                                        </inline-lookup>\r\n                                        <button class="btn" ng-if="!model.Object" ng-click="makeObjectFromDoc()"\r\n                                                bindonce="i18n.pas.docs" bo-text="i18n.pas.docs.props.newObject"></button>\r\n                                    </ago-form-item>\r\n                                    <ago-form-item label="i18n.core.fields.ou" field="OrgUnit" vld="validation">\r\n                                        <inline-lookup model="model.OrgUnit" input-col="col-xs-12" required\r\n                                                       on-update="onUpdateProp(model, \'OrgUnit\', val)"\r\n                                                       on-cancel="onCancelProp()"\r\n                                                       input-lookup="pas/project/lookupOUs">\r\n                                        </inline-lookup>\r\n                                    </ago-form-item>\r\n                                </div>\r\n\r\n                                <div class="row">\r\n                                    <ago-form-static-item label="i18n.core.fields.creator">\r\n                                        {{ model.Author }}\r\n                                    </ago-form-static-item>\r\n                                    <ago-form-static-item label="i18n.core.fields.creationTime">\r\n                                        {{ model.CreationTime | date:\'ago_datetime\' }}\r\n                                    </ago-form-static-item>\r\n                                </div>\r\n                            </form>\r\n                        </ago-box-content>\r\n                    </ago-box>\r\n                </div>\r\n            </div>\r\n\r\n            <div class="row">\r\n                <div class="col-xs-12">\r\n                    <custom-properties model="model" collapsed="customPropsCollapsed"\r\n                                       create-url="pas/documents/editParam"\r\n                                       update-url="pas/documents/editParam"\r\n                                       delete-url="pas/documents/deleteParam"></custom-properties>\r\n                </div>\r\n            </div>\r\n\r\n            <div class="row">\r\n                <div class="col-xs-12">\r\n                    <ago-status-history model="model.StatusHistory" view-settings="docStatusViewSettings"\r\n                                        change="changeStatus" collapsed="statusHistoryCollapsed">\r\n                    </ago-status-history>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n</div>\r\n'
}),define("pas/states/doc/view/props",["../../../moduleDef","angular","text!./props.tpl.html","text!../../moduleMenu.tpl.html"],function(module,angular,tpl,menuTpl){module.config(["$stateProvider",function($stateProvider){$stateProvider.state({name:"page.project.pas-docProps",url:"/pas-docs/:num",views:{"":{template:tpl},"moduleMenu@page":{template:menuTpl}},onEnter:["$rootScope","$stateParams",function($rootScope,$stateParams){$rootScope.breadcrumbs.push({name:"pas.docs.title",url:"page.project.pas-docs"}),$rootScope.breadcrumbs.push({name:$stateParams.num,url:"page.project.pas-docProps({num: '"+$stateParams.num+"'})"})}],onExit:["$rootScope",function($rootScope){$rootScope.breadcrumbs.splice($rootScope.breadcrumbs.length-2,2)}]})}]).controller("pasDocPropsCtrl",["$scope","$stateParams","pas.docTabs","$controller","stateCacheService","documentStatusViewSettings","$state",function($scope,$stateParams,docTabs,$controller,stateCacheService,docStatusViewSettings,$state){var stateCacheKey=function(){return"pas/documents/getDocument_"+$stateParams.num},saveState=function(){stateCacheService.cacheState(stateCacheKey(),{model:angular.copy($scope.model),customPropsCollapsed:$scope.customPropsCollapsed,statusHistoryCollapsed:$scope.statusHistoryCollapsed})};angular.extend(this,$controller("ErrorHandlingCtrl",{$scope:$scope})),angular.extend(this,$controller("TabbedViewCtrl",{$scope:$scope,num:$stateParams.num,tabs:docTabs})),angular.extend(this,$controller("InlineEditCtrl",{$scope:$scope,project:$stateParams.project,method:"pas/documents/updateDocument",afterUpdate:saveState})),angular.extend(this,$controller("BaseCardCtrl",{$scope:$scope,project:$stateParams.project,params:function(){return{method:"pas/documents/getDocument",project:$stateParams.project,num:$stateParams.num}},afterLoad:saveState,deleteParams:function(){return{method:"pas/documents/deleteDocument",project:$stateParams.project,docId:$scope.model.Id}},afterDeleteRoute:"page.project.pas-docs"})),$scope.changeStatus=function(newStatus){$scope.onUpdateProp($scope.model,"Status",newStatus)},$scope.makeObjectFromDoc=function(){$state.go("page.project.pas-objCreate",{project:$stateParams.project,doc:$stateParams.num})},$scope.docStatusViewSettings=docStatusViewSettings,$scope.customPropsCollapsed=!1,$scope.statusHistoryCollapsed=!1,$scope.$watch("customPropsCollapsed",saveState),$scope.$watch("statusHistoryCollapsed",saveState),stateCacheService.restoreState(stateCacheKey(),$scope),$scope.load(),$scope.resetValidation()}])}),define("text!pas/states/doc/view/files.tpl.html",[],function(){return'<div class="container" ng-controller="pasDocFilesCtrl"\r\n     filtered-list="{method: \'pas/documents/getFiles\'}"\r\n     initial-sorters="{Name: \'asc\'}">\r\n    <div class="row" id="content-wrapper">\r\n        <div class="col-xs-12">\r\n            <div class="row">\r\n                <div class="col-xs-12">\r\n                    <ago-tabs current-tab="files" tab-settings="tabs"></ago-tabs>\r\n                </div>\r\n            </div>\r\n\r\n            <files-view models="models" owner-id="num"\r\n                        filter-meta="pas/documents/DocumentFilesMetadata" filter-group="PAS.DocumentFiles"\r\n                        upload-url="pas/documents/uploadFiles" rename-url="pas/documents/renameFile"\r\n                        delete-url="pas/documents/deleteFiles">\r\n            </files-view>\r\n        </div>\r\n    </div>\r\n</div>\r\n'}),define("pas/states/doc/view/files",["../../../moduleDef","angular","text!./files.tpl.html","text!../../moduleMenu.tpl.html"],function(module,angular,tpl,menuTpl){module.config(["$stateProvider",function($stateProvider){$stateProvider.state({name:"page.project.pas-docFiles",url:"/pas-docs/:num/files",views:{"":{template:tpl},"moduleMenu@page":{template:menuTpl}},onEnter:["$rootScope","$stateParams",function($rootScope,$stateParams){$rootScope.breadcrumbs.push({name:"pas.docs.title",url:"page.project.pas-docs"}),$rootScope.breadcrumbs.push({name:$stateParams.num,url:"page.project.pas-docProps({num: '"+$stateParams.num+"'})"})}],onExit:["$rootScope",function($rootScope){$rootScope.breadcrumbs.splice($rootScope.breadcrumbs.length-2,2)}]})}]).controller("pasDocFilesCtrl",["$scope","$stateParams","pas.docTabs","$controller",function($scope,$stateParams,docTabs,$controller){angular.extend(this,$controller("TabbedViewCtrl",{$scope:$scope,num:$stateParams.num,tabs:docTabs})),$scope.initialRequestParams={ownerId:$scope.num},$scope.$on("resetFilter",function(){$scope.requestParams.ownerId=$scope.num}),$scope.onCacheKey=function(key){return key+"_"+$scope.num}}])}),define("text!pas/states/obj/objList.tpl.html",[],function(){return'<div class="container"\r\n     ng-controller="pas-objListCtrl"\r\n     filtered-list="{method: \'pas/objects/getObjects\'}"\r\n     initial-sorters="{ InternalSeqNumber: \'desc\' }">\r\n    <div class="row" id="content-wrapper">\r\n        <div class="col-xs-12">\r\n            <div filters-box="filter" sorters="sorters" meta="pas/objects/objMetadata" group="PAS.Object"\r\n                 apply-enabled="applyEnabled" apply-filter="applyFilter" reset-filter="resetFilter"\r\n                 filter-applied="filterApplied" style="padding-top: 5px">\r\n                <form class="form form-horizontal" bindonce="i18n.pas">\r\n                    <div class="form-group">\r\n                        <label class="col-md-3 control-label" bo-text="i18n.pas.obj.fields.seqNumber"></label>\r\n                        <div class="col-md-9">\r\n                            <input lookup="pas/objects/lookupObjects" ng-model="filter.simple.SeqNumber"\r\n                                   filter-node="{path: \'Id\', op: \'=\'}" class="form-control" multiple />\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label class="col-md-3 control-label" bo-text="i18n.pas.obj.fields.cadastralNumber"></label>\r\n                        <div class="col-md-9">\r\n                            <input ng-model="filter.simple.CadastralNumber" class="form-control"\r\n                                   filter-node="{path: \'CadastralNumber\', op: \'like\'}"/>\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label class="col-md-3 control-label" bo-text="i18n.pas.obj.fields.type"></label>\r\n                        <div class="col-md-9">\r\n                            <input lookup="pas/dictionary/lookupObjectTypes" ng-model="filter.simple.Type"\r\n                                   filter-node="{path: \'Type.FullName\', op: \'like\'}" class="form-control" multiple />\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label class="col-md-3 control-label" bo-text="i18n.pas.obj.fields.address"></label>\r\n                        <div class="col-md-9">\r\n                            <input type="text" ng-model="filter.simple.Addresses" class="form-control"\r\n                                   filter-node="{path: \'Addresses.Address.FullName\', op:\'like\', split:\',/\'}"/>\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n\r\n                <filters-box-more-filters>\r\n                    <ago-box color="muted" border="muted" caption="{{ i18n.core.filters.user }}" title-click-collapse padding collapsed="propsFilterCollapsed">\r\n                        <div user-filter filter-ng-model="filter.user"></div>\r\n                    </ago-box>\r\n                </filters-box-more-filters>\r\n            </div>\r\n\r\n            <ago-box color="purple" large="true" header-class="{\'hidden-md\': true, \'hidden-lg\': true}">\r\n                <ago-box-title>\r\n                    <i class="fa icon-building"></i>\r\n                    <span bindonce="i18n.pas.obj" bo-text="i18n.pas.obj.title"></span>\r\n                </ago-box-title>\r\n\r\n                <ago-box-content>\r\n                    <div class="box-toolbox box-toolbox-top">\r\n                        <ago-error-msg></ago-error-msg>\r\n\r\n                        <div>\r\n                            <a ui-sref="page.project.pas-objCreate" class="btn btn-primary">\r\n                                <i class="icon-plus icon-white"></i>\r\n                                <span class="inline-block hidden-xs" bindonce="i18n.core" bo-text="i18n.pas.obj.create.title"></span>\r\n                            </a>\r\n\r\n                            <ago-report-selector project="reportProject" report-types="REPORT_TYPES"\r\n                                                 on-error="onReportError(error)"\r\n                                                 on-get-params="fillReportParameters(settings, parameters)">\r\n                            </ago-report-selector>\r\n\r\n                            <refresher active="indication.loading" on-refresh="refreshList()"></refresher>\r\n                            <ago-watch-btn code="PAS.Object" item-id="null" class="pull-right"></ago-watch-btn>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <pas-obj-cards models="models" toggle-details="toggleDetails(model)" show-links="true"></pas-obj-cards>\r\n                    <div class="clearfix"></div>\r\n\r\n                    <div class="box-toolbox box-toolbox-bottom">\r\n                        <button type="button" class="btn btn-primary" ng-click="paging.page = paging.page + 1"\r\n                                bindonce="i18n.core" bo-text="i18n.core.buttons.more"></button>\r\n\r\n                        <refresher active="indication.loading" on-refresh="refreshList()"></refresher>\r\n                        <counter action=\'pas/objects/getObjectsCount\'></counter>\r\n                    </div>\r\n                </ago-box-content>\r\n            </ago-box>\r\n\r\n        </div>\r\n    </div>\r\n</div>\r\n'}),define("pas/states/obj/objList",["../../moduleDef","angular","text!./objList.tpl.html","text!../moduleMenu.tpl.html"],function(module,angular,tpl,moduleMenuTpl){module.config(["$stateProvider",function($stateProvider){$stateProvider.state({name:"page.project.pas-objects",url:"/pas-objects",views:{"":{template:tpl},"moduleMenu@page":{template:moduleMenuTpl}},onEnter:["$rootScope",function($rootScope){$rootScope.breadcrumbs.push({name:"pas.obj.title",url:"page.project.pas-objects"})}],onExit:["$rootScope",function($rootScope){$rootScope.breadcrumbs.splice($rootScope.breadcrumbs.length-1,1)}]})}]).controller("pas-objListCtrl",["$scope","$controller","$stateParams",function($scope,$controller,$stateParams){angular.extend(this,$controller("BaseCardsListCtrl",{$scope:$scope,project:$stateParams.project,detailsUrl:"pas/objects/getObjectDetails"})),angular.extend(this,$controller("ReportableListCtrl",{$scope:$scope,project:$stateParams.project,reportTypes:["pas-obj-list"]}))}])}),define("text!pas/states/obj/obj-type/objTypeView.tpl.html",[],function(){return'<div class="container"\r\n     ng-controller="pasObjTypeCtrl"\r\n     filtered-list="{method: \'pas/dictionary/getObjectTypes\'}"\r\n     initial-sorters="{ FullName: \'asc\'}">\r\n    <div class="row" id="content-wrapper">\r\n        <div class="col-xs-12">\r\n\r\n            <div filters-box="filter" sorters="sorters" meta="pas/dictionary/ObjectTypeMetadata"\r\n                 group="PAS.ObjType"\r\n                 apply-enabled="applyEnabled" apply-filter="applyFilter" reset-filter="resetFilter"\r\n                 filter-applied="filterApplied" style="padding-top: 5px">\r\n                <ago-box-content>\r\n                    <form class="form form-horizontal">\r\n                        <div class="form-group">\r\n                            <label class="col-md-3 control-label">{{ i18n.core.fields.name }}</label>\r\n\r\n                            <div class="col-md-9">\r\n                                <input ng-model="filter.simple.FullName" filter-node="{path: \'FullName\', op:\'like\'}"\r\n                                       class="form-control"/>\r\n                            </div>\r\n                        </div>\r\n                    </form>\r\n                </ago-box-content>\r\n            </div>\r\n\r\n            <ago-box color="purple" large="true" header-class="{\'hidden-md\': true, \'hidden-lg\': true}">\r\n                <ago-box-title>\r\n                    <i class="icon-cog"></i>\r\n                    {{ i18n.pas.objType.title }}\r\n                </ago-box-title>\r\n                <ago-box-content>\r\n                    <ago-hdict-view counter-url="pas/dictionary/getObjectTypesCount">\r\n                        <ago-hdict-add-form>\r\n                            <ago-hdict-default-add-form model="newModel" vld="validation"\r\n                                parent-url="pas/dictionary/lookupObjectTypes"\r\n                                ng-show="createFormVisible" on-update="create()" on-cancel="toggleCreateForm(false)">\r\n                            </ago-hdict-default-add-form>\r\n                        </ago-hdict-add-form>\r\n                        <ago-hdict-header>\r\n                            <ago-hdict-fullname-header></ago-hdict-fullname-header>\r\n                        </ago-hdict-header>\r\n                        <ago-hdict-column>\r\n                            <ago-hdict-fullname-column></ago-hdict-fullname-column>\r\n                        </ago-hdict-column>\r\n                    </ago-hdict-view>\r\n                </ago-box-content>\r\n            </ago-box>\r\n        </div>\r\n    </div>\r\n</div>\r\n'}),define("pas/states/obj/obj-type/objType",["../../../moduleDef","angular","text!./objTypeView.tpl.html","text!../../moduleMenu.tpl.html"],function(module,angular,template,menuTemplate){module.config(["$stateProvider",function($stateProvider){$stateProvider.state({name:"page.project.pas-objType",url:"/pas/classifier/objType",views:{"":{template:template},"moduleMenu@page":{template:menuTemplate}},onEnter:["$rootScope",function($rootScope){$rootScope.breadcrumbs.push({name:"pas.objType.title",url:"page.project.pas-objType"})}],onExit:["$rootScope",function($rootScope){$rootScope.breadcrumbs.splice($rootScope.breadcrumbs.length-1,1)}]})}]).controller("pasObjTypeCtrl",["$scope","$controller",function($scope,$controller){angular.extend(this,$controller("BaseHDictFullNameCtrl",{$scope:$scope,actionPrefix:"pas/dictionary",entityType:"ObjectType"}))}])}),define("text!pas/states/obj/address/addressView.tpl.html",[],function(){return'<div class="container"\r\n     ng-controller="pasAddressCtrl"\r\n     filtered-list="{method: \'pas/dictionary/getAddresses\'}"\r\n     initial-sorters="{ FullName: \'asc\'}">\r\n    <div class="row" id="content-wrapper">\r\n        <div class="col-xs-12">\r\n\r\n            <div filters-box="filter" sorters="sorters" meta="pas/dictionary/AddressMetadata"\r\n                 group="PAS.Address"\r\n                 apply-enabled="applyEnabled" apply-filter="applyFilter" reset-filter="resetFilter"\r\n                 filter-applied="filterApplied" style="padding-top: 5px">\r\n                <ago-box-content>\r\n                    <form class="form form-horizontal">\r\n                        <div class="form-group">\r\n                            <label class="col-md-3 control-label">{{ i18n.core.fields.name }}</label>\r\n\r\n                            <div class="col-md-9">\r\n                                <input ng-model="filter.simple.FullName" filter-node="{path: \'FullName\', op:\'like\'}"\r\n                                       class="form-control"/>\r\n                            </div>\r\n                        </div>\r\n                    </form>\r\n                </ago-box-content>\r\n            </div>\r\n\r\n            <ago-box color="purple" large="true" header-class="{\'hidden-md\': true, \'hidden-lg\': true}">\r\n                <ago-box-title>\r\n                    <i class="icon-cog"></i>\r\n                    {{ i18n.pas.address.title }}\r\n                </ago-box-title>\r\n                <ago-box-content>\r\n                    <ago-hdict-view counter-url="pas/dictionary/getAddressesCount">\r\n                        <ago-hdict-add-form>\r\n                            <ago-hdict-default-add-form model="newModel" vld="validation"\r\n                                parent-url="pas/dictionary/lookupAddresses" ng-show="createFormVisible"\r\n                                on-update="create()" on-cancel="toggleCreateForm(false)">\r\n                            </ago-hdict-default-add-form>\r\n                        </ago-hdict-add-form>\r\n                        <ago-hdict-header>\r\n                            <ago-hdict-fullname-header></ago-hdict-fullname-header>\r\n                        </ago-hdict-header>\r\n                        <ago-hdict-column>\r\n                            <ago-hdict-fullname-column></ago-hdict-fullname-column>\r\n                        </ago-hdict-column>\r\n                    </ago-hdict-view>\r\n                </ago-box-content>\r\n            </ago-box>\r\n        </div>\r\n    </div>\r\n</div>\r\n'}),define("pas/states/obj/address/address",["../../../moduleDef","angular","text!./addressView.tpl.html","text!../../moduleMenu.tpl.html"],function(module,angular,template,menuTemplate){module.config(["$stateProvider",function($stateProvider){$stateProvider.state({name:"page.project.pas-address",url:"/pas/classifier/address",views:{"":{template:template},"moduleMenu@page":{template:menuTemplate}},onEnter:["$rootScope",function($rootScope){$rootScope.breadcrumbs.push({name:"pas.address.title",url:"page.project.pas-address"})}],onExit:["$rootScope",function($rootScope){$rootScope.breadcrumbs.splice($rootScope.breadcrumbs.length-1,1)}]})}]).controller("pasAddressCtrl",["$scope","$controller",function($scope,$controller){angular.extend(this,$controller("BaseHDictFullNameCtrl",{$scope:$scope,actionPrefix:"pas/dictionary",entityType:"Address"}))}])}),define("text!pas/states/obj/create.tpl.html",[],function(){return'<div class="container" ng-controller="pasObjCreateCtrl">\r\n    <div class="row" id="content-wrapper">\r\n        <div class="col-xs-12">\r\n\r\n            <div class="box" style="margin-top: 5px">\r\n                <div class="box-header purple-background">\r\n                    <div class="title">\r\n                        <i class="icon-plus"></i>\r\n                        {{ i18n.pas.obj.create.title }}\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="box-content">\r\n                    <ago-error-msg></ago-error-msg>\r\n\r\n                    <form name="form" class="form form-horizontal" novalidate>\r\n                        <!-- Type -->\r\n                        <ago-new-form-item label="i18n.pas.obj.fields.type" field="Type" control="form.objType" vld="validation">\r\n                            <div class="input-group select2-bootstrap-append">\r\n                                <input type="text" id="objType" name="objType" lookup="pas/dictionary/lookupObjectTypes"\r\n                                   ng-model="model.type" placeholder="{{ i18n.pas.obj.create.placeholders.type }}"\r\n                                   required class="form-control" />\r\n                                <span class="input-group-btn">\r\n                                    <a class="btn btn-success" ui-sref="page.project.pas-objType">\r\n                                        <icon class="icon-arrow-right"></icon>\r\n                                    </a>\r\n                                </span>\r\n                            </div>\r\n                        </ago-new-form-item>\r\n\r\n                        <!-- Address -->\r\n                        <ago-new-form-item label="i18n.pas.obj.fields.address" field="Address" control="form.address" vld="validation">\r\n                            <div class="input-group select2-bootstrap-append">\r\n                                <input type="text" id="address" name="address" lookup="pas/dictionary/lookupAddresses"\r\n                                   ng-model="model.address" class="form-control">\r\n                                <span class="input-group-btn">\r\n                                    <a class="btn btn-success" ui-sref="page.project.pas-address">\r\n                                        <icon class="icon-arrow-right"></icon>\r\n                                    </a>\r\n                                </span>\r\n                            </div>\r\n                        </ago-new-form-item>\r\n\r\n                        <!-- Cadastral number -->\r\n                        <ago-new-form-item label="i18n.pas.obj.fields.cadastralNumber" field="CadastralNumber"\r\n                                           control="form.cadnum" vld="validation">\r\n                            <input name="cadnum" ng-model="model.cadastralNumber" class="form-control">\r\n                        </ago-new-form-item>\r\n\r\n                        <!-- Linked doc (if present) -->\r\n                        <ago-new-form-static-item label="i18n.pas.obj.create.linkedDoc" visible="document">\r\n                            <pas-doc-info num="{{ document }}"></pas-doc-info>\r\n                        </ago-new-form-static-item>\r\n\r\n                        <!-- Goto section -->\r\n                        <div class="form-group">\r\n                            <label class="col-md-2 control-label">{{ i18n.pas.obj.create.afterCreation }}:</label>\r\n                            <div class="col-md-10">\r\n                                <label class="radio radio-inline">\r\n                                    <input type="radio" ng-model="nextAction" value="goToObject">{{ i18n.pas.obj.create.goToTask }}\r\n                                </label>\r\n                                <label class="radio radio-inline">\r\n                                    <input type="radio" ng-model="nextAction" value="goToList">{{ i18n.pas.obj.create.goToList }}\r\n                                </label>\r\n                                <label class="radio radio-inline">\r\n                                    <input type="radio" ng-model="nextAction" value="stayHere">{{ i18n.pas.obj.create.stayHere }}\r\n                                </label>\r\n                            </div>\r\n                        </div>\r\n                        <!-- Action section -->\r\n                        <div class="form-actions form-actions-padding-sm">\r\n                            <div class="row">\r\n                                <div class="col-md-10 col-md-offset-2">\r\n                                    <button type="button" class="btn" ng-click="cancel()">{{ i18n.core.buttons.cancel }}</button>\r\n                                    <button type="button" class="btn btn-success" ng-click="create()" ng-disabled="form.$invalid">{{ i18n.core.buttons.save }}</button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </form>\r\n\r\n                </div><!-- box-content -->\r\n            </div><!-- box -->\r\n\r\n        </div><!-- col-xs-12 -->\r\n    </div><!-- row -->\r\n</div><!-- container -->\r\n'}),define("pas/states/obj/create",["../../moduleDef","angular","text!./create.tpl.html","text!../moduleMenu.tpl.html"],function(module,angular,tpl,moduleMenuTpl){module.config(["$stateProvider",function($stateProvider){$stateProvider.state({name:"page.project.pas-objCreate",url:"/pas/objects/create?doc",views:{"":{template:tpl},"moduleMenu@page":{template:moduleMenuTpl}},onEnter:["$rootScope",function($rootScope){$rootScope.breadcrumbs.push({name:"pas.obj.title",url:"page.project.pas-objects"}),$rootScope.breadcrumbs.push({name:"pas.obj.create.title",url:"page.project.pas-objCreate"})}],onExit:["$rootScope",function($rootScope){$rootScope.breadcrumbs.splice($rootScope.breadcrumbs.length-2,2)}]})}]).controller("pasObjCreateCtrl",["$scope","$stateParams","apinetService","$state","pas.newModels","$controller",function($scope,$stateParams,apinetService,$state,newModels,$controller){angular.extend(this,$controller("ErrorHandlingCtrl",{$scope:$scope})),$scope.cancel=function(){$state.go("page.project.pas-objects")},$scope.create=function(){var req=modelToRequest();apinetService.action({method:"pas/objects/createObject",project:$stateParams.project,model:req}).then(function(response){response.validation.success?($scope.model=initModel(),"goToObject"===$scope.nextAction?$state.go("page.project.pas-objectProps",{num:response.model,project:$stateParams.project}):"goToList"===$scope.nextAction?$state.go("page.project.pas-objects",{project:$stateParams.project}):"stayHere"===$scope.nextAction&&$scope.form.$setPristine()):($scope.resetValidation(),angular.extend($scope.validation,response.validation))},$scope.handleException)};var initModel=function(){return newModels.obj({type:null,address:null,cadastralNumber:null})};$scope.model=newModels.obj()||initModel(),$scope.document=$stateParams.doc,$scope.nextAction="goToObject";var modelToRequest=function(){var m=$scope.model;return{Type:m.type.id,Address:m.address?m.address.id:null,CadastralNumber:m.cadastralNumber,Document:$stateParams.doc}}}])}),define("text!pas/states/obj/view/activity.tpl.html",[],function(){return'<div class="container" ng-controller="pasObjectActivityCtrl">\r\n    <div class="row" id="content-wrapper">\r\n        <div class="col-xs-12">\r\n            <div class="row">\r\n                <div class="col-xs-12">\r\n                    <ago-tabs current-tab="activity" tab-settings="tabs"></ago-tabs>\r\n                </div>\r\n            </div>\r\n\r\n            {{ TODO }}\r\n        </div>\r\n    </div>\r\n</div>\r\n'}),define("pas/states/obj/view/activity",["../../../moduleDef","angular","text!./activity.tpl.html","text!../../moduleMenu.tpl.html"],function(module,angular,tpl,menuTpl){module.config(["$stateProvider",function($stateProvider){$stateProvider.state({name:"page.project.pas-objectActivity",url:"/pas-objects/:num/activity",views:{"":{template:tpl},"moduleMenu@page":{template:menuTpl}},onEnter:["$rootScope","$stateParams",function($rootScope,$stateParams){$rootScope.breadcrumbs.push({name:"pas.obj.title",url:"page.project.pas-objects"}),$rootScope.breadcrumbs.push({name:$stateParams.num,url:"page.project.pas-objectProps({num: '"+$stateParams.num+"'})"})}],onExit:["$rootScope",function($rootScope){$rootScope.breadcrumbs.splice($rootScope.breadcrumbs.length-2,2)}]})}]).controller("pasObjectActivityCtrl",["$scope","$stateParams","pas.objectTabs","$controller",function($scope,$stateParams,objectTabs,$controller){angular.extend(this,$controller("TabbedViewCtrl",{$scope:$scope,num:$stateParams.num,tabs:objectTabs})),$scope.TODO="TODO: Property object activity view"}])}),define("text!pas/states/obj/view/props.tpl.html",[],function(){return'<div class="container" ng-controller="pasObjectPropsCtrl">\r\n    <div class="row" id="content-wrapper">\r\n        <div class="col-xs-12">\r\n            <div class="row">\r\n                <div class="col-xs-12">\r\n                    <ago-tabs current-tab="props" tab-settings="tabs"></ago-tabs>\r\n                </div>\r\n            </div>\r\n\r\n            <div class="row">\r\n                <div class="col-xs-12">\r\n                    <ago-error-msg></ago-error-msg>\r\n                    <ago-box color="purple" large="true">\r\n                        <ago-box-title>\r\n                            <i class="icon-table"></i>\r\n                            <span bindonce="i18n.pas.obj" bo-text="i18n.pas.obj.props.title"></span>\r\n                        </ago-box-title>\r\n                        <ago-box-content>\r\n                            <div class="box-toolbox box-toolbox-top clearfix">\r\n                                <refresher active="loading" on-refresh="load()"></refresher>\r\n                                <button class="btn btn-danger pull-right" ng-click="delete()" ng-disabled="loading"\r\n                                        bindonce="i18n.core" bo-text="i18n.core.buttons.delete">\r\n                                </button>\r\n                                <ago-watch-btn code="PAS.Object" item-id="model.Id" class="pull-right"></ago-watch-btn>\r\n                            </div>\r\n\r\n                            <form class="form form-horizontal" novalidate bindonce="i18n.pas.obj">\r\n                                <div class="row">\r\n                                    <ago-form-static-item label="i18n.pas.obj.fields.seqNumber">\r\n                                        {{ model.SeqNumber }}\r\n                                    </ago-form-static-item>\r\n                                    <ago-form-item label="i18n.pas.obj.fields.type" field="Type" vld="validation">\r\n                                        <inline-lookup model="model.Type" input-col="col-xs-12" required\r\n                                                       on-update="onUpdateProp(model, \'Type\', val)"\r\n                                                       on-cancel="onCancelProp()"\r\n                                                       input-lookup="pas/dictionary/lookupObjectTypes">\r\n                                        </inline-lookup>\r\n                                    </ago-form-item>\r\n                                </div>\r\n\r\n                                <div class="row">\r\n                                    <ago-form-item label="i18n.pas.obj.fields.address" field="Addresses"\r\n                                                   vld="validation" large="true">\r\n                                        <inline-lookup input-col="col-xs-12" model="model.Addresses"\r\n                                                       on-update="onUpdateProp(model, \'Addresses\', val)" on-cancel="onCancelProp()"\r\n                                                       input-lookup="pas/dictionary/lookupAddresses" multiple>\r\n                                            <pas-addresses model="model.Addresses"></pas-addresses>\r\n                                        </inline-lookup>\r\n                                    </ago-form-item>\r\n                                </div>\r\n\r\n                                <div class="row">\r\n                                    <ago-form-item label="i18n.pas.obj.fields.cadastralNumber" field="CadastralNumber"\r\n                                                   vld="validation">\r\n                                        <inline-text model="model.CadastralNumber" input-col="col-xs-12"\r\n                                                     on-update="onUpdateProp(model, \'CadastralNumber\', val)"\r\n                                                     on-cancel="onCancelProp()"></inline-text>\r\n                                    </ago-form-item>\r\n                                    <ago-form-item label="i18n.core.fields.ou" field="OrgUnit" vld="validation">\r\n                                        <inline-lookup model="model.OrgUnit" input-col="col-xs-12" required\r\n                                                       on-update="onUpdateProp(model, \'OrgUnit\', val)"\r\n                                                       on-cancel="onCancelProp()"\r\n                                                       input-lookup="pas/project/lookupOUs">\r\n                                        </inline-lookup>\r\n                                    </ago-form-item>\r\n                                </div>\r\n\r\n                                <div class="row">\r\n                                    <ago-form-static-item label="i18n.core.fields.creator">\r\n                                        {{ model.Author }}\r\n                                    </ago-form-static-item>\r\n                                    <ago-form-static-item label="i18n.core.fields.creationTime">\r\n                                        {{ model.CreationTime | date:\'ago_datetime\' }}\r\n                                    </ago-form-static-item>\r\n                                </div>\r\n                            </form>\r\n                        </ago-box-content>\r\n                    </ago-box>\r\n                </div>\r\n            </div>\r\n\r\n            <div class="row">\r\n                <div class="col-xs-12">\r\n                    <custom-properties model="model" collapsed="customPropsCollapsed"\r\n                                       create-url="pas/objects/editParam"\r\n                                       update-url="pas/objects/editParam"\r\n                                       delete-url="pas/objects/deleteParam"></custom-properties>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'
}),define("pas/states/obj/view/props",["../../../moduleDef","angular","text!./props.tpl.html","text!../../moduleMenu.tpl.html"],function(module,angular,tpl,menuTpl){module.config(["$stateProvider",function($stateProvider){$stateProvider.state({name:"page.project.pas-objectProps",url:"/pas-objects/:num",views:{"":{template:tpl},"moduleMenu@page":{template:menuTpl}},onEnter:["$rootScope","$stateParams",function($rootScope,$stateParams){$rootScope.breadcrumbs.push({name:"pas.obj.title",url:"page.project.pas-objects"}),$rootScope.breadcrumbs.push({name:$stateParams.num,url:"page.project.pas-objectProps({num: '"+$stateParams.num+"'})"})}],onExit:["$rootScope",function($rootScope){$rootScope.breadcrumbs.splice($rootScope.breadcrumbs.length-2,2)}]})}]).controller("pasObjectPropsCtrl",["$scope","$stateParams","pas.objectTabs","$controller","stateCacheService",function($scope,$stateParams,objectTabs,$controller,stateCacheService){var stateCacheKey=function(){return"pas/objects/getObject_"+$stateParams.num},saveState=function(){stateCacheService.cacheState(stateCacheKey(),{model:angular.copy($scope.model),customPropsCollapsed:$scope.customPropsCollapsed})};angular.extend(this,$controller("ErrorHandlingCtrl",{$scope:$scope})),angular.extend(this,$controller("TabbedViewCtrl",{$scope:$scope,num:$stateParams.num,tabs:objectTabs})),angular.extend(this,$controller("InlineEditCtrl",{$scope:$scope,project:$stateParams.project,method:"pas/objects/updateObject",afterUpdate:saveState})),angular.extend(this,$controller("BaseCardCtrl",{$scope:$scope,project:$stateParams.project,params:function(){return{method:"pas/objects/getObject",project:$stateParams.project,num:$stateParams.num}},afterLoad:saveState,deleteParams:function(){return{method:"pas/objects/deleteObject",project:$stateParams.project,objectId:$scope.model.Id}},afterDeleteRoute:"page.project.pas-objects"})),$scope.customPropsCollapsed=!1,$scope.$watch("customPropsCollapsed",saveState),stateCacheService.restoreState(stateCacheKey(),$scope),$scope.load(),$scope.resetValidation()}])}),define("text!pas/states/obj/view/docs.tpl.html",[],function(){return'<div class="container" ng-controller="pasObjectDocsCtrl"\r\n     filtered-list="{method: \'pas/documents/getObjectDocs\'}"\r\n     initial-sorters="{ InternalSeqNumber: \'desc\' }">\r\n    <div class="row" id="content-wrapper">\r\n        <div class="col-xs-12">\r\n            <div class="row">\r\n                <div class="col-xs-12">\r\n                    <ago-tabs current-tab="docs" tab-settings="tabs"></ago-tabs>\r\n                </div>\r\n            </div>\r\n\r\n            <div filters-box="filter" sorters="sorters" meta="pas/documents/docMetadata" group="PAS.Document"\r\n                 apply-enabled="applyEnabled" apply-filter="applyFilter" reset-filter="resetFilter"\r\n                 filter-applied="filterApplied" style="padding-top: 5px">\r\n                <form class="form form-horizontal" bindonce="i18n.pas">\r\n                    <div class="form-group">\r\n                        <label class="col-md-3 control-label" bo-text="i18n.pas.docs.fields.status"></label>\r\n                        <div class="col-md-9">\r\n                            <input lookup="pas/dictionary/lookupDocumentStatuses" ng-model="filter.simple.Status" filter-node="{path: \'Status\', op: \'=\'}" class="form-control" multiple />\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label class="col-md-3 control-label" bo-text="i18n.pas.docs.fields.seqNumber"></label>\r\n                        <div class="col-md-9">\r\n                            <input lookup="pas/documents/lookupDocuments" ng-model="filter.simple.SeqNumber" filter-node="{path: \'Id\', op: \'=\'}" class="form-control" multiple />\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label class="col-md-3 control-label" bo-text="i18n.pas.docs.fields.type"></label>\r\n                        <div class="col-md-9">\r\n                            <input lookup="pas/dictionary/lookupDocumentTypes" ng-model="filter.simple.Type" filter-node="{path: \'Type\', op: \'=\'}" class="form-control" multiple />\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label class="col-md-3 control-label" bo-text="i18n.pas.docs.fields.content"></label>\r\n                        <div class="col-md-9">\r\n                            <input type="text" ng-model="filter.simple.Content" filter-node="{path: \'Content\', op:\'like\'}" class="form-control"  />\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n\r\n                <filters-box-more-filters>\r\n                    <ago-box color="muted" border="muted" caption="{{ i18n.core.filters.user }}" title-click-collapse padding collapsed="propsFilterCollapsed">\r\n                        <div user-filter filter-ng-model="filter.user"></div>\r\n                    </ago-box>\r\n                </filters-box-more-filters>\r\n            </div>\r\n\r\n            <ago-box color="purple" large="true" header-class="{\'hidden-md\': true, \'hidden-lg\': true}">\r\n                <ago-box-title>\r\n                    <i class="fa icon-file-text"></i>\r\n                    <span bindonce="i18n.pas.docs" bo-text="i18n.pas.docs.title"></span>\r\n                </ago-box-title>\r\n\r\n                <ago-box-content>\r\n                    <div class="box-toolbox box-toolbox-top clearfix">\r\n                        <ago-error-msg></ago-error-msg>\r\n\r\n                        <div>\r\n                            <refresher active="indication.loading" on-refresh="refreshList()"></refresher>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <pas-doc-cards models="models" toggle-details="toggleDetails(model)" show-links="true"></pas-doc-cards>\r\n                    <div class="clearfix"></div>\r\n\r\n                    <div class="box-toolbox box-toolbox-bottom">\r\n                        <button type="button" class="btn btn-primary" ng-click="paging.page = paging.page + 1"\r\n                                bindonce="i18n.core" bo-text="i18n.core.buttons.more"></button>\r\n\r\n                        <refresher active="indication.loading" on-refresh="refreshList()"></refresher>\r\n                        <counter action=\'pas/documents/getObjectDocsCount\'></counter>\r\n                    </div>\r\n                </ago-box-content>\r\n            </ago-box>\r\n\r\n        </div>\r\n    </div>\r\n</div>\r\n'}),define("pas/states/obj/view/docs",["../../../moduleDef","angular","text!./docs.tpl.html","text!../../moduleMenu.tpl.html"],function(module,angular,tpl,menuTpl){module.config(["$stateProvider",function($stateProvider){$stateProvider.state({name:"page.project.pas-objectDocs",url:"/pas-objects/:num/docs",views:{"":{template:tpl},"moduleMenu@page":{template:menuTpl}},onEnter:["$rootScope","$stateParams",function($rootScope,$stateParams){$rootScope.breadcrumbs.push({name:"pas.obj.title",url:"page.project.pas-objects"}),$rootScope.breadcrumbs.push({name:$stateParams.num,url:"page.project.pas-objectProps({num: '"+$stateParams.num+"'})"})}],onExit:["$rootScope",function($rootScope){$rootScope.breadcrumbs.splice($rootScope.breadcrumbs.length-2,2)}]})}]).controller("pasObjectDocsCtrl",["$scope","$stateParams","pas.objectTabs","$controller",function($scope,$stateParams,objectTabs,$controller){angular.extend(this,$controller("TabbedViewCtrl",{$scope:$scope,num:$stateParams.num,tabs:objectTabs})),angular.extend(this,$controller("BaseCardsListCtrl",{$scope:$scope,project:$stateParams.project,detailsUrl:"pas/documents/getDocDetails"})),$scope.initialRequestParams={num:$scope.num},$scope.onCacheKey=function(key){return key+"_objectDocs_"+$scope.num}}])}),define("text!pas/states/obj/view/map.tpl.html",[],function(){return'<div class="container" ng-controller="pasObjectMapCtrl">\r\n    <div class="row" id="content-wrapper">\r\n        <div class="col-xs-12">\r\n            <div class="row">\r\n                <div class="col-xs-12">\r\n                    <ago-tabs current-tab="map" tab-settings="tabs"></ago-tabs>\r\n                </div>\r\n            </div>\r\n\r\n            {{ TODO }}\r\n        </div>\r\n    </div>\r\n</div>\r\n'}),define("pas/states/obj/view/map",["../../../moduleDef","angular","text!./map.tpl.html","text!../../moduleMenu.tpl.html"],function(module,angular,tpl,menuTpl){module.config(["$stateProvider",function($stateProvider){$stateProvider.state({name:"page.project.pas-objectMap",url:"/pas-objects/:num/map",views:{"":{template:tpl},"moduleMenu@page":{template:menuTpl}},onEnter:["$rootScope","$stateParams",function($rootScope,$stateParams){$rootScope.breadcrumbs.push({name:"pas.obj.title",url:"page.project.pas-objects"}),$rootScope.breadcrumbs.push({name:$stateParams.num,url:"page.project.pas-objectProps({num: '"+$stateParams.num+"'})"})}],onExit:["$rootScope",function($rootScope){$rootScope.breadcrumbs.splice($rootScope.breadcrumbs.length-2,2)}]})}]).controller("pasObjectMapCtrl",["$scope","$stateParams","pas.objectTabs","$controller",function($scope,$stateParams,objectTabs,$controller){angular.extend(this,$controller("TabbedViewCtrl",{$scope:$scope,num:$stateParams.num,tabs:objectTabs})),$scope.TODO="TODO: Property object map and bounds view"}])}),define("text!pas/states/obj/view/files.tpl.html",[],function(){return'<div class="container" ng-controller="pasObjectFilesCtrl"\r\n     filtered-list="{method: \'pas/objects/getFiles\'}"\r\n     initial-sorters="{Name: \'asc\'}">\r\n    <div class="row" id="content-wrapper">\r\n        <div class="col-xs-12">\r\n            <div class="row">\r\n                <div class="col-xs-12">\r\n                    <ago-tabs current-tab="files" tab-settings="tabs"></ago-tabs>\r\n                </div>\r\n            </div>\r\n\r\n            <files-view models="models" owner-id="num"\r\n                        filter-meta="pas/objects/ObjectsFilesMetadata" filter-group="PAS.ObjectFiles"\r\n                        upload-url="pas/objects/uploadFiles" rename-url="pas/objects/renameFile"\r\n                        delete-url="pas/objects/deleteFiles">\r\n            </files-view>\r\n        </div>\r\n    </div>\r\n</div>\r\n'}),define("pas/states/obj/view/files",["../../../moduleDef","angular","text!./files.tpl.html","text!../../moduleMenu.tpl.html"],function(module,angular,tpl,menuTpl){module.config(["$stateProvider",function($stateProvider){$stateProvider.state({name:"page.project.pas-objectFiles",url:"/pas-objects/:num/files",views:{"":{template:tpl},"moduleMenu@page":{template:menuTpl}},onEnter:["$rootScope","$stateParams",function($rootScope,$stateParams){$rootScope.breadcrumbs.push({name:"pas.obj.title",url:"page.project.pas-objects"}),$rootScope.breadcrumbs.push({name:$stateParams.num,url:"page.project.pas-objectProps({num: '"+$stateParams.num+"'})"})}],onExit:["$rootScope",function($rootScope){$rootScope.breadcrumbs.splice($rootScope.breadcrumbs.length-2,2)}]})}]).controller("pasObjectFilesCtrl",["$scope","$stateParams","pas.objectTabs","$controller",function($scope,$stateParams,objectTabs,$controller){angular.extend(this,$controller("TabbedViewCtrl",{$scope:$scope,num:$stateParams.num,tabs:objectTabs})),$scope.initialRequestParams={ownerId:$scope.num},$scope.$on("resetFilter",function(){$scope.requestParams.ownerId=$scope.num}),$scope.onCacheKey=function(key){return key+"_"+$scope.num}}])}),define("text!pas/states/project/props.tpl.html",[],function(){return'<div class="container" ng-controller="pasProjectPropsCtrl">\r\n    <ago-project-info load-url="pas/project/getProject" update-url="pas/project/updateProject"\r\n                      tag-url="pas/project/tagProject" detag-url="pas/project/detagProject">\r\n    </ago-project-info>\r\n</div>\r\n'}),define("pas/states/project/props",["../../moduleDef","angular","text!./props.tpl.html","text!../moduleMenu.tpl.html"],function(module,angular,tpl,moduleMenuTpl){module.config(["$stateProvider",function($stateProvider){$stateProvider.state({name:"page.project.pas-projProps",url:"/pas-props",views:{"":{template:tpl},"moduleMenu@page":{template:moduleMenuTpl}},onEnter:["$rootScope",function($rootScope){$rootScope.breadcrumbs.push({name:"projects.settings.title",url:"page.project.pas-projProps"})}],onExit:["$rootScope",function($rootScope){$rootScope.breadcrumbs.splice($rootScope.breadcrumbs.length-1,1)}]})}]).controller("pasProjectPropsCtrl",["$scope","$stateParams","pas.projectTabs","$controller",function($scope,$stateParams,projectTabs,$controller){angular.extend(this,$controller("TabbedViewCtrl",{$scope:$scope,num:$stateParams.project,tabs:projectTabs}))}])}),define("text!pas/states/project/members.tpl.html",[],function(){return'<div class="container" ng-controller="pasProjectMembersCtrl"\r\n     filtered-list="{method: \'pas/project/getMembers\'}"\r\n     initial-sorters="{FullName: \'asc\'}">\r\n    <div class="row" id="content-wrapper">\r\n        <div class="col-xs-12">\r\n            <ago-project-members metadata-url="pas/project/projectMemberMetadata" filter-group="Project.Members"\r\n                 add-url="pas/project/addMember" remove-url="pas/project/removeMember"\r\n                 update-url="pas/project/updateMember"\r\n                 add-permission-url="pas/project/addPermission" remove-permission-url="pas/project/removePermission"\r\n                 change-current-url="pas/project/changeMemberCurrent" change-roles-url="pas/project/changeMemberRoles"\r\n                 role-lookup-url="pas/project/lookupRoles" ou-lookup-url="pas/project/lookupOUs">\r\n            </ago-project-members>\r\n        </div>\r\n    </div>\r\n</div>\r\n'}),define("pas/states/project/members",["../../moduleDef","angular","text!./members.tpl.html","text!../moduleMenu.tpl.html"],function(module,angular,tpl,moduleMenuTpl){module.config(["$stateProvider",function($stateProvider){$stateProvider.state({name:"page.project.pas-projMembers",url:"/project/members",views:{"":{template:tpl},"moduleMenu@page":{template:moduleMenuTpl}},onEnter:["$rootScope",function($rootScope){$rootScope.breadcrumbs.push({name:"projects.members.title",url:"page.project.pas-projMembers"})}],onExit:["$rootScope",function($rootScope){$rootScope.breadcrumbs.splice($rootScope.breadcrumbs.length-1,1)}]})}]).controller("pasProjectMembersCtrl",["$scope","$stateParams","pas.projectTabs","$controller",function($scope,$stateParams,projectTabs,$controller){angular.extend(this,$controller("ErrorHandlingCtrl",{$scope:$scope})),angular.extend(this,$controller("TabbedViewCtrl",{$scope:$scope,num:$stateParams.project,tabs:projectTabs}))}])}),define("text!pas/states/project/ous.tpl.html",[],function(){return'<div class="container" ng-controller="pasProjectOUsCtrl"\r\n     filtered-list="{method: \'pas/project/getOUs\'}"\r\n     initial-sorters="{Name: \'asc\'}">\r\n    <div class="row" id="content-wrapper">\r\n        <div class="col-xs-12">\r\n            <ago-project-ous metadata-url="pas/project/orgUnitMetadata" filter-group="Project.OU"\r\n                 add-url="pas/project/addOU" remove-url="pas/project/removeOU"\r\n                 update-url="pas/project/updateOU" ou-lookup-url="pas/project/lookupOUs"\r\n                 counter-url="pas/project/getOUsCount"></ago-project-ous>\r\n        </div>\r\n    </div>\r\n</div>\r\n'}),define("pas/states/project/ous",["../../moduleDef","angular","text!./ous.tpl.html","text!../moduleMenu.tpl.html"],function(module,angular,tpl,moduleMenuTpl){module.config(["$stateProvider",function($stateProvider){$stateProvider.state({name:"page.project.pas-projOUs",url:"/project/ous",views:{"":{template:tpl},"moduleMenu@page":{template:moduleMenuTpl}},onEnter:["$rootScope",function($rootScope){$rootScope.breadcrumbs.push({name:"projects.ous.title",url:"page.project.pas-projOUs"})}],onExit:["$rootScope",function($rootScope){$rootScope.breadcrumbs.splice($rootScope.breadcrumbs.length-1,1)}]})}]).controller("pasProjectOUsCtrl",["$scope","$stateParams","pas.projectTabs","$controller",function($scope,$stateParams,projectTabs,$controller){angular.extend(this,$controller("ErrorHandlingCtrl",{$scope:$scope})),angular.extend(this,$controller("TabbedViewCtrl",{$scope:$scope,num:$stateParams.project,tabs:projectTabs}))}])}),define("pas/states/project/templates",["../../moduleDef","angular","text!../moduleMenu.tpl.html"],function(module,angular,moduleMenuTpl){module.config(["$stateProvider",function($stateProvider){$stateProvider.state({name:"page.project.templates.pas",url:"/project/templates",views:{"moduleMenu@page":{template:moduleMenuTpl}},onEnter:["$rootScope","tabs","pas.projectTabs","$stateParams",function($rootScope,tabs,projectTabs,$stateParams){$rootScope.breadcrumbs.push({name:"core.reporting.templates.title",url:"page.project.templates.pas"});var pasProjectTabs=projectTabs($stateParams.project);angular.extend(tabs,pasProjectTabs)}]})}])}),define("text!pas/states/project/invitations.tpl.html",[],function(){return'<div class="container"\r\n     ng-controller="pasProjectInvitationsCtrl"\r\n     filtered-list="{method: \'pas/project/getInvitations\'}"\r\n     initial-sorters="{CreationTime: \'desc\'}">\r\n\r\n    <ago-project-invitations metadata-url="pas/project/projectInvitationMetadata" filter-group="Project.Invitations"\r\n                             add-url="pas/project/addInvitation" remove-url="pas/project/removeInvitation"\r\n                             update-url="pas/project/updateInvitation" send-url="pas/project/sendInvitation"\r\n                             role-lookup-url="pas/project/lookupRoles" ou-lookup-url="pas/project/lookupOUs"\r\n                             counter-url="pas/project/getInvitationsCount" sent-log-url="pas/project/getSentLog">\r\n    </ago-project-invitations>\r\n</div>\r\n'}),define("pas/states/project/invitations",["../../moduleDef","jquery","angular","text!./invitations.tpl.html","text!../moduleMenu.tpl.html"],function(module,$,angular,tpl,menuTpl){module.config(["$stateProvider",function($stateProvider){$stateProvider.state({name:"page.project.pas-projInvitations",url:"/project/invitations",views:{"":{template:tpl},"moduleMenu@page":{template:menuTpl}},onEnter:["$rootScope",function($rootScope){$rootScope.breadcrumbs.push({name:"projects.invitations.title",url:"page.project.pas-projInvitations"})}],onExit:["$rootScope",function($rootScope){$rootScope.breadcrumbs.splice($rootScope.breadcrumbs.length-1,1)}]})}]).controller("pasProjectInvitationsCtrl",["$scope","$stateParams","pas.projectTabs","$controller",function($scope,$stateParams,projectTabs,$controller){angular.extend(this,$controller("ErrorHandlingCtrl",{$scope:$scope})),angular.extend(this,$controller("TabbedViewCtrl",{$scope:$scope,num:$stateParams.project,tabs:projectTabs}))}])}),define("text!pas/states/order/orderList.tpl.html",[],function(){return'<div class="container" ng-controller="pas-orderListCtrl"\r\n     filtered-list="{method: \'pas/orders/getOrders\'}"\r\n     initial-sorters="{ InternalSeqNumber: \'desc\' }">\r\n    <div class="row" id="content-wrapper">\r\n        <div class="col-xs-12">\r\n\r\n            <!-- Filter -->\r\n            <div filters-box="filter" sorters="sorters" meta="pas/orders/orderMetadata" group="PAS.Order"\r\n                 apply-enabled="applyEnabled" apply-filter="applyFilter" reset-filter="resetFilter"\r\n                 search-model="filter.simple.search" search-node="{op: \'||\', items: [{path: \'Content\', op: \'like\'}, {path: \'FromCompany.FullName\', op: \'like\'}]}"\r\n                 filter-applied="filterApplied" style="padding-top: 5px">\r\n                <form class="form form-horizontal" bindonce="i18n.pas">\r\n                    <div class="form-group">\r\n                        <label class="col-md-3 control-label" bo-text="i18n.core.filters.favorites"></label>\r\n                        <div class="col-md-9">\r\n                            <filter-loader filter="filter" group="PAS.Order"></filter-loader>\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label class="col-md-3 control-label" bo-text="i18n.pas.orders.filters.custom"></label>\r\n                        <div class="col-md-9">\r\n                            <select ng-model="filter.simple.Combined" class="form-control">\r\n                                <option value="all" bo-text="i18n.pas.orders.filters.predefined.all"></option>\r\n                                <option value="myNotClosed" bo-text="i18n.pas.orders.filters.predefined.myNotClosed"></option>\r\n                                <option value="notClosed" bo-text="i18n.pas.orders.filters.predefined.notClosed"></option>\r\n                                <option value="overdue" bo-text="i18n.pas.orders.filters.predefined.overdue"></option>\r\n                                <option value="dayLeft" bo-text="i18n.pas.orders.filters.predefined.dayLeft"></option>\r\n                                <option value="weekLeft" bo-text="i18n.pas.orders.filters.predefined.weekLeft"></option>\r\n                                <option value="noLimit" bo-text="i18n.pas.orders.filters.predefined.noLimit"></option>\r\n                                <option value="closedToday" bo-text="i18n.pas.orders.filters.predefined.closedToday"></option>\r\n                                <option value="closedYesterday" bo-text="i18n.pas.orders.filters.predefined.closedYesterday"></option>\r\n                                <option value="attention" bo-text="i18n.pas.orders.filters.predefined.attention"></option>\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label class="col-md-3 control-label" bo-text="i18n.pas.orders.fields.status"></label>\r\n                        <div class="col-md-9">\r\n                            <input lookup="pas/dictionary/lookupOrderStatuses" ng-model="filter.simple.Status"\r\n                                   filter-node="{path: \'Status\', op: \'=\'}" class="form-control" multiple />\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label class="col-md-3 control-label" bo-text="i18n.pas.orders.filters.statusHistory"></label>\r\n                        <div class="col-md-9">\r\n                            <input lookup="pas/dictionary/lookupOrderStatuses" ng-model="filter.simple.shStatus"\r\n                                   filter-node="{path: \'StatusHistory.Status\', op: \'=\'}" class="form-control" multiple />\r\n                            <div class="col-xs-5" style="padding-left: 0; padding-right: 0">\r\n                                <input type="text" ng-model="filter.simple.shLowDate" bs-datepicker\r\n                                       filter-node="{path: \'StatusHistory.Start\', op: \'>=\'}" class="form-control" />\r\n                            </div>\r\n                            <span class="col-xs-1" style="padding: 0; text-align: center; line-height: 35px">-</span>\r\n                            <div class="col-xs-5" style="padding-left: 0; padding-right: 0">\r\n                                <input type="text" ng-model="filter.simple.shHighDate" bs-datepicker\r\n                                       filter-node="{path: \'StatusHistory.Start\', op: \'<\'}" class="form-control" />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label class="col-md-3 control-label" bo-text="i18n.pas.orders.fields.seqNumber"></label>\r\n                        <div class="col-md-9">\r\n                            <input lookup="pas/orders/lookupOrders" ng-model="filter.simple.SeqNumber"\r\n                                   filter-node="{path: \'Id\', op: \'=\'}" class="form-control" multiple />\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label class="col-md-3 control-label" bo-text="i18n.pas.orders.fields.from"></label>\r\n                        <div class="col-md-9">\r\n                            <input lookup="pas/dictionary/lookupCompanies" ng-model="filter.simple.FromCompany"\r\n                                   filter-node="{path: \'FromCompany.FullName\', op: \'like\'}" class="form-control" multiple />\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label class="col-md-3 control-label" bo-text="i18n.pas.orders.fields.dueDate"></label>\r\n                        <div class="col-md-9">\r\n                            <div class="col-xs-5" style="padding-left: 0; padding-right: 0">\r\n                                <input type="text" ng-model="filter.simple.lDate" bs-datepicker\r\n                                       filter-node="{path: \'DueDate\', op: \'>=\'}" class="form-control" />\r\n                            </div>\r\n                            <span class="col-xs-1" style="padding: 0; text-align: center; line-height: 35px">-</span>\r\n                            <div class="col-xs-5" style="padding-left: 0; padding-right: 0">\r\n                                <input type="text" ng-model="filter.simple.rDate" bs-datepicker\r\n                                       filter-node="{path: \'DueDate\', op: \'<\'}" class="form-control" />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label class="col-md-3 control-label" bo-text="i18n.pas.orders.filters.runningTaskType"></label>\r\n                        <div class="col-md-9">\r\n                            <input lookup="pas/dictionary/lookupTaskTypes" ng-model="filter.simple.RunningTaskType"\r\n                                   filter-node="{path: \'Tasks\', op: \'&&\', items: [{path: \'TypeId\', op: \'=\'}]}"\r\n                                   class="form-control" multiple />\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label class="col-md-3 control-label" bo-text="i18n.pas.orders.filters.closedTaskType"></label>\r\n                        <div class="col-md-9">\r\n                            <input lookup="pas/dictionary/lookupTaskTypes" ng-model="filter.simple.ClosedTaskType"\r\n                                   filter-node="{path: \'Tasks\', op: \'&&\', items: [{path: \'TypeId\', op: \'=\'}]}"\r\n                                   class="form-control" multiple />\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n\r\n                <filters-box-more-filters>\r\n                    <ago-box color="muted" border="muted" caption="{{ i18n.core.filters.user }}" title-click-collapse padding collapsed="propsFilterCollapsed">\r\n                        <div user-filter filter-ng-model="filter.user"></div>\r\n                    </ago-box>\r\n                </filters-box-more-filters>\r\n\r\n            </div>\r\n\r\n            <!-- Content -->\r\n            <ago-box color="purple" large="true" header-class="{\'hidden-md\': true, \'hidden-lg\': true}">\r\n                <ago-box-title>\r\n                    <i class="fa icon-ticket"></i>\r\n                    <span bindonce="i18n.pas.orders" bo-text="i18n.pas.orders.title"></span>\r\n                </ago-box-title>\r\n\r\n                <ago-box-content>\r\n                    <div class="box-toolbox box-toolbox-top">\r\n                        <ago-error-msg></ago-error-msg>\r\n\r\n                        <div>\r\n                            <a ui-sref="page.project.pas-orderCreate" class="btn btn-primary">\r\n                                <i class="icon-plus icon-white"></i>\r\n                                <span class="inline-block hidden-xs" bindonce="i18n.core" bo-text="i18n.pas.orders.create.title"></span>\r\n                            </a>\r\n\r\n                            <ago-report-selector project="reportProject" report-types="REPORT_TYPES"\r\n                                                 on-error="onReportError(error)"\r\n                                                 on-get-params="fillReportParameters(settings, parameters)">\r\n                            </ago-report-selector>\r\n\r\n                            <refresher active="indication.loading" on-refresh="refreshList()"></refresher>\r\n                            <ago-watch-btn code="PAS.Order" item-id="null" class="pull-right"></ago-watch-btn>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <pas-order-cards models="models" toggle-details="toggleDetails(model)" show-links="true"></pas-order-cards>\r\n                    <div class="clearfix"></div>\r\n\r\n                    <div class="box-toolbox box-toolbox-bottom">\r\n                        <button type="button" class="btn btn-primary" ng-click="paging.page = paging.page + 1"\r\n                                bindonce="i18n.core" bo-text="i18n.core.buttons.more"></button>\r\n\r\n                        <refresher active="indication.loading" on-refresh="refreshList()"></refresher>\r\n                        <counter action=\'pas/orders/getOrdersCount\'></counter>\r\n                    </div>\r\n                </ago-box-content>\r\n            </ago-box>\r\n        </div>\r\n    </div>\r\n</div>\r\n'}),define("pas/states/order/orderList",["../../moduleDef","angular","text!./orderList.tpl.html","text!../moduleMenu.tpl.html"],function(module,angular,tpl,moduleMenuTpl){module.config(["$stateProvider",function($stateProvider){$stateProvider.state({name:"page.project.pas-orders",url:"/pas-orders",views:{"":{template:tpl},"moduleMenu@page":{template:moduleMenuTpl}},onEnter:["$rootScope",function($rootScope){$rootScope.breadcrumbs.push({name:"pas.orders.title",url:"page.project.pas-orders"})}],onExit:["$rootScope",function($rootScope){$rootScope.breadcrumbs.splice($rootScope.breadcrumbs.length-1,1)}]})}]).controller("pas-orderListCtrl",["$scope","$stateParams","$controller","taskStatuses",function($scope,$stateParams,$controller,taskStatuses){$scope.$watch("filter.simple.Combined",function(value){$scope.requestParams.predefined=value||"all"},!0),$scope.fillReportParameters=function(settings,p){p.parameters.predefined=$scope.requestParams.predefined||"all"},angular.extend(this,$controller("BaseCardsListCtrl",{$scope:$scope,project:$stateParams.project,detailsUrl:"pas/orders/getOrderDetails"})),angular.extend(this,$controller("ReportableListCtrl",{$scope:$scope,project:$stateParams.project,reportTypes:["pas-order-list"]})),angular.extend(this,$controller("PrefilteredListCtrl",{$scope:$scope,defaultFilter:function(isFirstRequest){var defaultPredefined=isFirstRequest?"notClosed":"all";return $scope.requestParams.predefined=defaultPredefined,{simple:{Combined:defaultPredefined}}}}));var decorateTaskTypeFilterWithStatus=function(node,statuses){if(node&&node.items&&node.items.length>0){for(var typeNode=null,statusNode=null,i=0;i<node.items.length;i++)"Status"===node.items[i].path?statusNode=node.items[i]:"TypeId"===node.items[i].path&&(typeNode=node.items[i]);statusNode||(statusNode={path:"Status",op:"="},node.items.push(statusNode)),angular.isArray(typeNode.value)&&typeNode.value.length>0?statusNode.value=statuses:delete statusNode.value,delete node.value}},runningStatuses=[{id:taskStatuses.InProgress},{id:taskStatuses.Completed}],closedStatus=[{id:taskStatuses.Closed}];
$scope.$watch("filter.simple.RunningTaskType",function(val){decorateTaskTypeFilterWithStatus(val,runningStatuses)}),$scope.$watch("filter.simple.ClosedTaskType",function(val){decorateTaskTypeFilterWithStatus(val,closedStatus)})}])}),define("text!pas/states/order/company/companyView.tpl.html",[],function(){return'<div class="container" ng-controller="pasCompanyCtrl"\r\n     filtered-list="{method: \'pas/dictionary/getCompanies\'}"\r\n     initial-sorters="{ FullName: \'asc\'}">\r\n    <div class="row" id="content-wrapper">\r\n        <div class="col-xs-12">\r\n\r\n            <div filters-box="filter" sorters="sorters" meta="pas/dictionary/CompanyMetadata"\r\n                 group="PAS.Company"\r\n                 apply-enabled="applyEnabled" apply-filter="applyFilter" reset-filter="resetFilter"\r\n                 filter-applied="filterApplied" style="padding-top: 5px">\r\n                <ago-box-content>\r\n                    <form class="form form-horizontal">\r\n                        <div class="form-group">\r\n                            <label class="col-md-3 control-label">{{ i18n.core.fields.name }}</label>\r\n\r\n                            <div class="col-md-9">\r\n                                <input ng-model="filter.simple.FullName" filter-node="{path: \'FullName\', op:\'like\'}"\r\n                                       class="form-control"/>\r\n                            </div>\r\n                        </div>\r\n                    </form>\r\n                </ago-box-content>\r\n            </div>\r\n\r\n            <ago-box color="purple" large="true" header-class="{\'hidden-md\': true, \'hidden-lg\': true}">\r\n                <ago-box-title>\r\n                    <i class="icon-cog"></i>\r\n                    {{ i18n.pas.company.title }}\r\n                </ago-box-title>\r\n                <ago-box-content>\r\n                    <ago-hdict-view counter-url="pas/dictionary/getCompaniesCount">\r\n                        <ago-hdict-add-form>\r\n                            <ago-hdict-default-add-form model="newModel" vld="validation"\r\n                                parent-url="pas/dictionary/lookupCompanies" ng-show="createFormVisible"\r\n                                on-update="create()" on-cancel="toggleCreateForm(false)">\r\n                            </ago-hdict-default-add-form>\r\n                        </ago-hdict-add-form>\r\n                        <ago-hdict-header>\r\n                            <ago-hdict-fullname-header></ago-hdict-fullname-header>\r\n                        </ago-hdict-header>\r\n                        <ago-hdict-column>\r\n                            <ago-hdict-fullname-column></ago-hdict-fullname-column>\r\n                        </ago-hdict-column>\r\n                    </ago-hdict-view>\r\n                </ago-box-content>\r\n            </ago-box>\r\n        </div>\r\n    </div>\r\n</div>\r\n'}),define("pas/states/order/company/company",["../../../moduleDef","angular","text!./companyView.tpl.html","text!../../moduleMenu.tpl.html"],function(module,angular,template,menuTemplate){module.config(["$stateProvider",function($stateProvider){$stateProvider.state({name:"page.project.pas-company",url:"/pas/classifier/company",views:{"":{template:template},"moduleMenu@page":{template:menuTemplate}},onEnter:["$rootScope",function($rootScope){$rootScope.breadcrumbs.push({name:"pas.company.title",url:"page.project.pas-company"})}],onExit:["$rootScope",function($rootScope){$rootScope.breadcrumbs.splice($rootScope.breadcrumbs.length-1,1)}]})}]).controller("pasCompanyCtrl",["$scope","$controller",function($scope,$controller){angular.extend(this,$controller("BaseHDictFullNameCtrl",{$scope:$scope,actionPrefix:"pas/dictionary",entityType:"Company"}))}])}),define("text!pas/states/order/unit/unitView.tpl.html",[],function(){return'<div class="container" ng-controller="pasUnitCtrl"\r\n     filtered-list="{method: \'pas/dictionary/getUnits\'}"\r\n     initial-sorters="{ Name: \'asc\'}">\r\n    <div class="row" id="content-wrapper">\r\n        <div class="col-xs-12">\r\n\r\n            <div filters-box="filter" sorters="sorters" meta="pas/dictionary/UnitMetadata"\r\n                 group="PAS.Unit"\r\n                 apply-enabled="applyEnabled" apply-filter="applyFilter" reset-filter="resetFilter"\r\n                 filter-applied="filterApplied" style="padding-top: 5px">\r\n                <ago-box-content>\r\n                    <form class="form form-horizontal">\r\n                        <div class="form-group">\r\n                            <label class="col-md-3 control-label">{{ i18n.core.fields.name }}</label>\r\n\r\n                            <div class="col-md-9">\r\n                                <input ng-model="filter.simple.Name" filter-node="{path: \'Name\', op:\'like\'}"\r\n                                       class="form-control"/>\r\n                            </div>\r\n                        </div>\r\n                    </form>\r\n                </ago-box-content>\r\n            </div>\r\n\r\n            <ago-box color="purple" large="true" header-class="{\'hidden-md\': true, \'hidden-lg\': true}">\r\n                <ago-box-title>\r\n                    <i class="icon-cog"></i>\r\n                    {{ i18n.pas.unit.title }}\r\n                </ago-box-title>\r\n                <ago-box-content>\r\n                    <ago-hdict-view counter-url="pas/dictionary/getUnitsCount">\r\n                        <ago-hdict-add-form>\r\n                            <pas-unit-add-form model="newUnit" vld="validation"\r\n                               ng-show="createFormVisible" on-update="create()" on-cancel="toggleCreateForm(false)">\r\n                            </pas-unit-add-form>\r\n                        </ago-hdict-add-form>\r\n                        <ago-hdict-header>\r\n                            <pas-unit-header></pas-unit-header>\r\n                        </ago-hdict-header>\r\n                        <ago-hdict-column>\r\n                            <pas-unit-column></pas-unit-column>\r\n                        </ago-hdict-column>\r\n                    </ago-hdict-view>\r\n                </ago-box-content>\r\n            </ago-box>\r\n        </div>\r\n    </div>\r\n</div>\r\n'}),define("pas/states/order/unit/unit",["../../../moduleDef","angular","text!./unitView.tpl.html","text!../../moduleMenu.tpl.html"],function(module,angular,template,menuTemplate){module.config(["$stateProvider",function($stateProvider){$stateProvider.state({name:"page.project.pas-unit",url:"/pas/classifier/unit",views:{"":{template:template},"moduleMenu@page":{template:menuTemplate}},onEnter:["$rootScope",function($rootScope){$rootScope.breadcrumbs.push({name:"pas.unit.title",url:"page.project.pas-unit"})}],onExit:["$rootScope",function($rootScope){$rootScope.breadcrumbs.splice($rootScope.breadcrumbs.length-1,1)}]})}]).controller("pasUnitCtrl",["$scope","$controller",function($scope,$controller){$scope.newUnit={name:null,type:null,abbr:null,clear:function(){this.name=null,this.type=null,this.abbr=null}},angular.extend(this,$controller("BaseFlatDictCtrl",{$scope:$scope,createUrl:"pas/dictionary/createUnit",updateUrl:"pas/dictionary/updateUnit",deleteUrl:"pas/dictionary/deleteUnit",newModelFn:function(){return{Name:$scope.newUnit.name,Type:$scope.newUnit.type.id,Abbr:$scope.newUnit.abbr}},afterCreateFn:function(){$scope.newUnit.clear()}}))}])}),define("text!pas/states/order/service-type/serviceTypeView.tpl.html",[],function(){return'<div class="container" ng-controller="pasServiceTypeCtrl"\r\n     filtered-list="{method: \'pas/dictionary/getServiceTypes\'}"\r\n     initial-sorters="{ FullName: \'asc\'}">\r\n    <div class="row" id="content-wrapper">\r\n        <div class="col-xs-12">\r\n\r\n            <div filters-box="filter" sorters="sorters" meta="pas/dictionary/ServiceTypeMetadata"\r\n                 group="PAS.ServiceType"\r\n                 apply-enabled="applyEnabled" apply-filter="applyFilter" reset-filter="resetFilter"\r\n                 filter-applied="filterApplied" style="padding-top: 5px">\r\n                <ago-box-content>\r\n                    <form class="form form-horizontal">\r\n                        <div class="form-group">\r\n                            <label class="col-md-3 control-label">{{ i18n.core.fields.name }}</label>\r\n\r\n                            <div class="col-md-9">\r\n                                <input ng-model="filter.simple.FullName" filter-node="{path: \'FullName\', op:\'like\'}"\r\n                                       class="form-control"/>\r\n                            </div>\r\n                        </div>\r\n                    </form>\r\n                </ago-box-content>\r\n            </div>\r\n\r\n            <ago-box color="purple" large="true" header-class="{\'hidden-md\': true, \'hidden-lg\': true}">\r\n                <ago-box-title>\r\n                    <i class="icon-cog"></i>\r\n                    {{ i18n.pas.serviceType.title }}\r\n                </ago-box-title>\r\n                <ago-box-content>\r\n                    <ago-hdict-view counter-url="pas/dictionary/getServiceTypesCount" def-col-class="hidden-xs hidden-sm col-md-1">\r\n                        <ago-hdict-add-form>\r\n                            <pas-service-type-add-form model="newModel" vld="validation"\r\n                               ng-show="createFormVisible" on-update="create()" on-cancel="toggleCreateForm(false)">\r\n                            </pas-service-type-add-form>\r\n                        </ago-hdict-add-form>\r\n                        <ago-hdict-header>\r\n                            <pas-service-type-header></pas-service-type-header>\r\n                        </ago-hdict-header>\r\n                        <ago-hdict-column>\r\n                            <pas-service-type-column></pas-service-type-column>\r\n                        </ago-hdict-column>\r\n                    </ago-hdict-view>\r\n                </ago-box-content>\r\n            </ago-box>\r\n        </div>\r\n    </div>\r\n</div>\r\n'}),define("pas/states/order/service-type/serviceType",["../../../moduleDef","angular","text!./serviceTypeView.tpl.html","text!../../moduleMenu.tpl.html"],function(module,angular,template,menuTemplate){module.config(["$stateProvider",function($stateProvider){$stateProvider.state({name:"page.project.pas-serviceType",url:"/pas/classifier/serviceType",views:{"":{template:template},"moduleMenu@page":{template:menuTemplate}},onEnter:["$rootScope",function($rootScope){$rootScope.breadcrumbs.push({name:"pas.serviceType.title",url:"page.project.pas-serviceType"})}],onExit:["$rootScope",function($rootScope){$rootScope.breadcrumbs.splice($rootScope.breadcrumbs.length-1,1)}]})}]).controller("pasServiceTypeCtrl",["$scope","$controller",function($scope,$controller){$scope.newModel={parent:null,name:null,unit:null,cost:null,clear:function(){this.parent=null,this.name=null,this.unit=null,this.cost=null}},angular.extend(this,$controller("BaseHDictController",{$scope:$scope,createUrl:"pas/dictionary/createServiceType",updateUrl:"pas/dictionary/updateServiceType",deleteUrl:"pas/dictionary/deleteServiceType",newModelFn:function(){return{Name:$scope.newModel.name,ParentId:$scope.newModel.parent?$scope.newModel.parent.id:null,DefaultUnitId:$scope.newModel.unit?$scope.newModel.unit.id:null,DefaultCost:$scope.newModel.cost?$scope.newModel.cost:null}},afterCreateFn:function(){$scope.newModel.clear()}}))}])}),define("text!pas/states/order/create.tpl.html",[],function(){return'<div class="container" ng-controller="pasOrderCreateCtrl">\r\n    <div class="row" id="content-wrapper">\r\n        <div class="col-xs-12">\r\n\r\n            <div class="box" style="margin-top: 5px">\r\n                <div class="box-header purple-background">\r\n                    <div class="title">\r\n                        <i class="icon-plus"></i>\r\n                        {{ i18n.pas.orders.create.title }}\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="box-content">\r\n                    <ago-error-msg></ago-error-msg>\r\n\r\n                    <form name="form" class="form form-horizontal" novalidate>\r\n                        <!-- From company -->\r\n                        <ago-new-form-item label="i18n.pas.orders.fields.from" field="FromCompany"\r\n                                           control="form.fromCompany" vld="validation">\r\n                            <div class="input-group select2-bootstrap-append">\r\n                                <input type="text" id="fromCompany" name="fromCompany" lookup="pas/dictionary/lookupCompanies"\r\n                                   ng-model="model.fromCompany" placeholder="{{ i18n.pas.orders.create.placeholders.from }}"\r\n                                   required class="form-control" />\r\n                                <span class="input-group-btn">\r\n                                    <a class="btn btn-success" ui-sref="page.project.pas-company">\r\n                                        <icon class="icon-arrow-right"></icon>\r\n                                    </a>\r\n                                </span>\r\n                            </div>\r\n                        </ago-new-form-item>\r\n\r\n                        <!-- To company -->\r\n                        <ago-new-form-item label="i18n.pas.orders.fields.to" field="ToCompany"\r\n                                           control="form.toCompany" vld="validation">\r\n                            <div class="input-group select2-bootstrap-append">\r\n                                <input type="text" id="toCompany" name="toCompany" lookup="pas/dictionary/lookupCompanies"\r\n                                   ng-model="model.toCompany" placeholder="{{ i18n.pas.orders.create.placeholders.to }}"\r\n                                   class="form-control" />\r\n                                <span class="input-group-btn">\r\n                                    <a class="btn btn-success" ui-sref="page.project.pas-company">\r\n                                        <icon class="icon-arrow-right"></icon>\r\n                                    </a>\r\n                                </span>\r\n                            </div>\r\n                        </ago-new-form-item>\r\n\r\n                        <ago-new-form-item label="i18n.pas.orders.fields.content" field="Content"\r\n                                control="form.content" vld="validation">\r\n                            <textarea name="content" ng-model="model.content" rows="3" class="form-control" required></textarea>\r\n                        </ago-new-form-item>\r\n\r\n                        <!-- Due date -->\r\n                        <ago-new-form-item label="i18n.pas.orders.fields.dueDate" field="DueDate" control="form.dueDate" vld="validation">\r\n                            <input id="dueDate" name="dueDate" bs-datepicker ng-model="model.dueDate" class="form-control" />\r\n                        </ago-new-form-item>\r\n\r\n                        <!-- Goto section -->\r\n                        <div class="form-group">\r\n                            <label class="col-md-2 control-label">{{ i18n.pas.orders.create.afterCreation }}:</label>\r\n                            <div class="col-md-10">\r\n                                <label class="radio radio-inline">\r\n                                    <input type="radio" ng-model="nextAction" value="goToOrder">{{ i18n.pas.orders.create.goToOrder }}\r\n                                </label>\r\n                                <label class="radio radio-inline">\r\n                                    <input type="radio" ng-model="nextAction" value="goToList">{{ i18n.pas.orders.create.goToList }}\r\n                                </label>\r\n                                <label class="radio radio-inline">\r\n                                    <input type="radio" ng-model="nextAction" value="stayHere">{{ i18n.pas.orders.create.stayHere }}\r\n                                </label>\r\n                            </div>\r\n                        </div>\r\n                        <!-- Action section -->\r\n                        <div class="form-actions form-actions-padding-sm">\r\n                            <div class="row">\r\n                                <div class="col-md-10 col-md-offset-2">\r\n                                    <button type="button" class="btn" ng-click="cancel()">{{ i18n.core.buttons.cancel }}</button>\r\n                                    <button type="button" class="btn btn-success" ng-click="create()" ng-disabled="form.$invalid">{{ i18n.core.buttons.save }}</button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </form>\r\n\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n</div>\r\n'}),define("pas/states/order/create",["../../moduleDef","angular","text!./create.tpl.html","text!../moduleMenu.tpl.html"],function(module,angular,tpl,moduleMenuTpl){module.config(["$stateProvider",function($stateProvider){$stateProvider.state({name:"page.project.pas-orderCreate",url:"/pas/orders/create",views:{"":{template:tpl},"moduleMenu@page":{template:moduleMenuTpl}},onEnter:function($rootScope){$rootScope.breadcrumbs.push({name:"pas.orders.title",url:"page.project.pas-orders"}),$rootScope.breadcrumbs.push({name:"pas.orders.create.title",url:"page.project.pas-orderCreate"})},onExit:function($rootScope){$rootScope.breadcrumbs.splice($rootScope.breadcrumbs.length-2,2)}})}]).controller("pasOrderCreateCtrl",["$scope","$stateParams","apinetService","$state","pas.newModels","$controller",function($scope,$stateParams,apinetService,$state,newModels,$controller){angular.extend(this,$controller("ErrorHandlingCtrl",{$scope:$scope})),$scope.cancel=function(){$state.go("page.project.pas-orders")},$scope.create=function(){var req=modelToRequest();apinetService.action({method:"pas/orders/createOrder",project:$stateParams.project,model:req}).then(function(response){response.validation.success?($scope.model=initModel(),"goToOrder"===$scope.nextAction?$state.go("page.project.pas-orderProps",{num:response.model,project:$stateParams.project}):"goToList"===$scope.nextAction?$state.go("page.project.pas-orders",{project:$stateParams.project}):"stayHere"===$scope.nextAction&&$scope.form.$setPristine()):($scope.resetValidation(),angular.extend($scope.validation,response.validation))},$scope.handleException)};var initModel=function(){return newModels.order({fromCompany:null,toCompany:null,content:null,dueDate:null})};$scope.model=newModels.order()||initModel(),$scope.nextAction="goToOrder",$scope.validation={};var modelToRequest=function(){var m=$scope.model;return{FromCompany:m.fromCompany.id,ToCompany:m.toCompany?m.toCompany.id:null,Content:m.content,DueDate:m.dueDate}}}])}),define("text!pas/states/order/view/activity.tpl.html",[],function(){return'<div class="container" ng-controller="pasOrderActivityCtrl">\r\n    <div class="row" id="content-wrapper">\r\n        <div class="col-xs-12">\r\n            <div class="row">\r\n                <div class="col-xs-12">\r\n                    <ago-tabs current-tab="activity" tab-settings="tabs"></ago-tabs>\r\n                </div>\r\n            </div>\r\n\r\n            {{ TODO }}\r\n        </div>\r\n    </div>\r\n</div>\r\n'}),define("pas/states/order/view/activity",["../../../moduleDef","angular","text!./activity.tpl.html","text!../../moduleMenu.tpl.html"],function(module,angular,tpl,menuTpl){module.config(["$stateProvider",function($stateProvider){$stateProvider.state({name:"page.project.pas-orderActivity",url:"/pas-orders/:num/activity",views:{"":{template:tpl},"moduleMenu@page":{template:menuTpl}},onEnter:["$rootScope","$stateParams",function($rootScope,$stateParams){$rootScope.breadcrumbs.push({name:"pas.orders.title",url:"page.project.pas-orders"}),$rootScope.breadcrumbs.push({name:$stateParams.num,url:"page.project.pas-orderProps({num: '"+$stateParams.num+"'})"})}],onExit:function($rootScope){$rootScope.breadcrumbs.splice($rootScope.breadcrumbs.length-2,2)}})}]).controller("pasOrderActivityCtrl",["$scope","$stateParams","pas.orderTabs","$controller",function($scope,$stateParams,orderTabs,$controller){angular.extend(this,$controller("TabbedViewCtrl",{$scope:$scope,num:$stateParams.num,tabs:orderTabs})),$scope.TODO="TODO: Order activity view"}])}),define("text!pas/states/order/view/props.tpl.html",[],function(){return'<div class="container" ng-controller="pasOrderPropsCtrl">\r\n    <div class="row" id="content-wrapper">\r\n        <div class="col-xs-12">\r\n            <div class="row">\r\n                <div class="col-xs-12">\r\n                    <ago-tabs current-tab="props" tab-settings="tabs"></ago-tabs>\r\n                </div>\r\n            </div>\r\n\r\n            <div class="row">\r\n                <div class="col-xs-12">\r\n                    <ago-error-msg></ago-error-msg>\r\n                    <ago-box color="purple" large="true">\r\n                        <ago-box-title>\r\n                            <i class="icon-table"></i>\r\n                            <span bindonce="i18n.pas.tasks" bo-text="i18n.pas.tasks.props.title"></span>\r\n                        </ago-box-title>\r\n                        <ago-box-content>\r\n                            <div class="box-toolbox box-toolbox-top">\r\n                                <div class="btn-group">\r\n                                    <ago-status-btn ng-repeat="s in model.StatusHistory.Next" status="s"\r\n                                                    change="changeStatus"\r\n                                                    view-settings="viewSettings">\r\n                                    </ago-status-btn>\r\n                                </div>\r\n\r\n                                <refresher active="loading" on-refresh="load()"></refresher>\r\n                                <button class="btn btn-danger pull-right" ng-click="delete()" ng-disabled="loading"\r\n                                        style="margin-left: 5px">\r\n                                    <i class="icon-remove"></i>\r\n                                    <span class="inline-block hidden-xs" bindonce="i18n.core" bo-text="i18n.core.buttons.delete"></span>\r\n                                </button>\r\n                                <ago-watch-btn code="PAS.Order" item-id="model.Id" class="pull-right"></ago-watch-btn>\r\n                                <div class="clearfix"></div>\r\n                            </div>\r\n\r\n                            <form class="form form-horizontal" novalidate bindonce="i18n.pas.order">\r\n                                <div class="row">\r\n                                    <ago-form-static-item label="i18n.pas.orders.fields.seqNumber">\r\n                                        {{ model.SeqNumber }}\r\n                                    </ago-form-static-item>\r\n                                    <ago-form-item label="i18n.pas.orders.fields.status" field="Status" vld="validation">\r\n                                        <inline-lookup model="model.Status" input-col="col-xs-12" required\r\n                                           on-update="onUpdateProp(model, \'Status\', val)" on-cancel="onCancelProp()"\r\n                                           input-lookup="pas/dictionary/lookupOrderStatuses">\r\n                                        </inline-lookup>\r\n                                    </ago-form-item>\r\n                                </div>\r\n\r\n                                <div class="row">\r\n                                    <ago-form-item label="i18n.pas.orders.fields.from" field="FromCompany" vld="validation">\r\n                                        <inline-lookup model="model.FromCompany" input-col="col-xs-12" required\r\n                                           on-update="onUpdateProp(model, \'FromCompany\', val)" on-cancel="onCancelProp()"\r\n                                           input-lookup="pas/dictionary/lookupCompanies">\r\n                                        </inline-lookup>\r\n                                    </ago-form-item>\r\n                                    <ago-form-item label="i18n.pas.orders.fields.to" field="ToCompany" vld="validation">\r\n                                        <inline-lookup model="model.ToCompany" input-col="col-xs-12"\r\n                                            on-update="onUpdateProp(model, \'ToCompany\', val)" on-cancel="onCancelProp()"\r\n                                            input-lookup="pas/dictionary/lookupCompanies"\r\n                                            input-lookup-options="allowClear: true"\r\n                                            placeholder="{{ i18n.pas.orders.props.toCompanyPlaceholder }}">\r\n                                        </inline-lookup>\r\n                                    </ago-form-item>\r\n                                </div>\r\n\r\n                                <div class="row">\r\n                                    <ago-form-item label="i18n.pas.orders.fields.managers" field="Managers" vld="validation">\r\n                                        <inline-lookup input-col="col-xs-12" model="model.Managers"\r\n                                                       on-update="onUpdateProp(model, \'Managers\', val)"\r\n                                                       on-cancel="onCancelProp()"\r\n                                                       input-lookup="core/projects/lookupParticipant" multiple>\r\n                                            <pas-executors model="model.Managers"></pas-executors>\r\n                                        </inline-lookup>\r\n                                    </ago-form-item>\r\n                                    <ago-form-item label="i18n.pas.orders.fields.dueDate" field="DueDate" vld="validation">\r\n                                        <inline-date model="model.DueDate" input-col="col-xs-12"\r\n                                             on-update="onUpdateProp(model, \'DueDate\', val)" on-cancel="onCancelProp()">\r\n                                         </inline-date>\r\n                                    </ago-form-item>\r\n                                </div>\r\n\r\n                                <div class="row">\r\n                                    <ago-form-item label="i18n.pas.orders.fields.content" field="Content" vld="validation">\r\n                                        <inline-text-area model="model.Content" input-col="col-xs-12" input-rows="5"\r\n                                                          on-update="onUpdateProp(model, \'Content\', val)"\r\n                                                          on-cancel="onCancelProp()" required></inline-text-area>\r\n                                    </ago-form-item>\r\n                                    <ago-form-item label="i18n.core.fields.ou" field="OrgUnit" vld="validation">\r\n                                        <inline-lookup model="model.OrgUnit" input-col="col-xs-12" required\r\n                                                       on-update="onUpdateProp(model, \'OrgUnit\', val)"\r\n                                                       on-cancel="onCancelProp()"\r\n                                                       input-lookup="pas/project/lookupOUs">\r\n                                        </inline-lookup>\r\n                                    </ago-form-item>\r\n                                </div>\r\n\r\n                                <div class="row">\r\n                                    <ago-form-static-item label="i18n.core.fields.creator">\r\n                                        {{ model.Author }}\r\n                                    </ago-form-static-item>\r\n                                    <ago-form-static-item label="i18n.core.fields.creationTime">\r\n                                        {{ model.CreationTime | date:\'ago_datetime\' }}\r\n                                    </ago-form-static-item>\r\n                                </div>\r\n                            </form>\r\n                        </ago-box-content>\r\n                    </ago-box>\r\n                </div>\r\n            </div>\r\n\r\n            <div class="row">\r\n                <div class="col-xs-12">\r\n                    <pas-services-view model="model" collapsed="servicesCollapsed">\r\n                    </pas-services-view>\r\n                </div>\r\n            </div>\r\n\r\n            <div class="row">\r\n                <div class="col-xs-12">\r\n                    <custom-properties model="model" collapsed="customPropsCollapsed"\r\n                                       create-url="pas/orders/editParam"\r\n                                       update-url="pas/orders/editParam"\r\n                                       delete-url="pas/orders/deleteParam"></custom-properties>\r\n                </div>\r\n            </div>\r\n\r\n            <div class="row">\r\n                <div class="col-xs-12">\r\n                    <ago-status-history model="model.StatusHistory" view-settings="viewSettings"\r\n                                        change="changeStatus" collapsed="statusHistoryCollapsed">\r\n                    </ago-status-history>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'}),define("pas/states/order/view/props",["../../../moduleDef","angular","text!./props.tpl.html","text!../../moduleMenu.tpl.html"],function(module,angular,tpl,menuTpl){module.config(["$stateProvider",function($stateProvider){$stateProvider.state({name:"page.project.pas-orderProps",url:"/pas-orders/:num",views:{"":{template:tpl},"moduleMenu@page":{template:menuTpl}},onEnter:["$rootScope","$stateParams",function($rootScope,$stateParams){$rootScope.breadcrumbs.push({name:"pas.orders.title",url:"page.project.pas-orders"}),$rootScope.breadcrumbs.push({name:$stateParams.num,url:"page.project.pas-orderProps({num: '"+$stateParams.num+"'})"})}],onExit:["$rootScope",function($rootScope){$rootScope.breadcrumbs.splice($rootScope.breadcrumbs.length-2,2)}]})}]).controller("pasOrderPropsCtrl",["$scope","$stateParams","pas.orderTabs","stateCacheService","orderStatusViewSettings","$controller",function($scope,$stateParams,orderTabs,stateCacheService,orderStatusViewSettings,$controller){var stateCacheKey="pas/orders/getOrder_"+$stateParams.num,saveState=function(){stateCacheService.cacheState(stateCacheKey,{model:angular.copy($scope.model),servicesCollapsed:$scope.servicesCollapsed,customPropsCollapsed:$scope.customPropsCollapsed,statusHistoryCollapsed:$scope.statusHistoryCollapsed})};angular.extend(this,$controller("ErrorHandlingCtrl",{$scope:$scope})),angular.extend(this,$controller("TabbedViewCtrl",{$scope:$scope,num:$stateParams.num,tabs:orderTabs})),angular.extend(this,$controller("InlineEditCtrl",{$scope:$scope,project:$stateParams.project,method:"pas/orders/updateOrder",afterUpdate:saveState})),angular.extend(this,$controller("BaseCardCtrl",{$scope:$scope,project:$stateParams.project,params:function(){return{method:"pas/orders/getOrder",project:$stateParams.project,num:$stateParams.num}},afterLoad:saveState,deleteParams:function(){return{method:"pas/orders/deleteOrder",project:$stateParams.project,orderId:$scope.model.Id}},afterDeleteRoute:"page.project.pas-orders"})),$scope.changeStatus=function(newStatus){$scope.onUpdateProp($scope.model,"Status",newStatus)},$scope.viewSettings=orderStatusViewSettings,$scope.servicesCollapsed=!1,$scope.customPropsCollapsed=!1,$scope.statusHistoryCollapsed=!1,$scope.$watch("servicesCollapsed",saveState),$scope.$watch("customPropsCollapsed",saveState),$scope.$watch("statusHistoryCollapsed",saveState),stateCacheService.restoreState(stateCacheKey,$scope),$scope.load(),$scope.resetValidation()
}])}),define("text!pas/states/order/view/tasks.tpl.html",[],function(){return'<div class="container"\r\n     ng-controller="pasOrderTasksCtrl"\r\n     filtered-list="{method: \'pas/tasks/getOrderTasks\'}"\r\n     initial-sorters="{ InternalSeqNumber: \'desc\' }">\r\n    <div class="row" id="content-wrapper">\r\n        <div class="col-xs-12">\r\n\r\n            <div class="row">\r\n                <div class="col-xs-12">\r\n                    <ago-tabs current-tab="tasks" tab-settings="tabs"></ago-tabs>\r\n                </div>\r\n            </div>\r\n\r\n            <div class="row">\r\n                <div class="col-xs-12">\r\n                    <!-- Filter -->\r\n                    <pas-task-filter></pas-task-filter>\r\n\r\n                    <!-- Content -->\r\n                    <ago-box color="purple" large="true" header-class="{\'hidden-md\': true, \'hidden-lg\': true}">\r\n                        <ago-box-title>\r\n                            <i class="fa icon-tasks"></i>\r\n                            <span bindonce="i18n.pas.tasks" bo-text="i18n.pas.tasks.title"></span>\r\n                        </ago-box-title>\r\n\r\n                        <ago-box-content>\r\n                            <div class="box-toolbox box-toolbox-top">\r\n                                <ago-error-msg></ago-error-msg>\r\n\r\n                                <div>\r\n                                    <common-tasks-create-task-btn sref="page.project.pas-taskCreate"\r\n                                          current="editables.selectedTask" link="linkOrder(params)">\r\n                                    </common-tasks-create-task-btn>\r\n\r\n                                    <ago-view-mode modes="viewModes" settings="viewModeSettings" mode="viewMode"></ago-view-mode>\r\n\r\n                                    <refresher active="indication.loading" on-refresh="refreshList()"></refresher>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div ng-if="viewMode === viewModes.list">\r\n                                <common-tasks-task-oneline models="models" sorters="sorters" api-prefix="pas/tasks"\r\n                                   view-state="page.project.pas-taskProps" create-state="page.project.pas-taskCreate"\r\n                                   comments-state="page.project.pas-taskComments" files-state="page.project.pas-taskFiles">\r\n                                </common-tasks-task-oneline>\r\n                            </div>\r\n                            <div ng-if="viewMode === viewModes.cards">\r\n                                <pas-task-cards models="models" toggle-details="toggleDetails(model)" show-links="true"></pas-task-cards>\r\n                            </div>\r\n                            <div ng-if="viewMode === viewModes.gantt">\r\n                                <common-tasks-task-gantt models="models" select="selectTask(task)" api-prefix="pas/tasks"\r\n                                     module="pas" task-link-template="#!/project/{{task.ProjectCode}}/pas-tasks/{{task.SeqNumber}}">\r\n                                </common-tasks-task-gantt>\r\n                            </div>\r\n                            <div class="clearfix"></div>\r\n\r\n                            <div class="box-toolbox box-toolbox-bottom">\r\n                                <button type="button" class="btn btn-primary" ng-click="paging.page = paging.page + 1"\r\n                                        bindonce="i18n.core" bo-text="i18n.core.buttons.more"></button>\r\n\r\n                                <refresher active="indication.loading" on-refresh="refreshList()"></refresher>\r\n                                <counter action=\'pas/tasks/getOrderTasksCount\'></counter>\r\n                            </div>\r\n                        </ago-box-content>\r\n                    </ago-box>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'}),define("pas/states/order/view/tasks",["../../../moduleDef","angular","text!./tasks.tpl.html","text!../../moduleMenu.tpl.html"],function(module,angular,tpl,menuTpl){module.config(["$stateProvider",function($stateProvider){$stateProvider.state({name:"page.project.pas-orderTasks",url:"/pas-orders/:num/tasks",views:{"":{template:tpl},"moduleMenu@page":{template:menuTpl}},onEnter:["$rootScope","$stateParams",function($rootScope,$stateParams){$rootScope.breadcrumbs.push({name:"pas.orders.title",url:"page.project.pas-orders"}),$rootScope.breadcrumbs.push({name:$stateParams.num,url:"page.project.pas-orderProps({num: '"+$stateParams.num+"'})"})}],onExit:["$rootScope",function($rootScope){$rootScope.breadcrumbs.splice($rootScope.breadcrumbs.length-2,2)}]})}]).controller("pasOrderTasksCtrl",["$scope","$stateParams","pas.orderTabs","$controller",function($scope,$stateParams,orderTabs,$controller){angular.extend(this,$controller("TabbedViewCtrl",{$scope:$scope,num:$stateParams.num,tabs:orderTabs})),angular.extend(this,$controller("commonTasksTaskListCtrl",{$scope:$scope,apiPrefix:"pas/tasks",reportTypes:["pas-task-list"]})),$scope.initialRequestParams={order:$scope.num},$scope.onCacheKey=function(key){return key+"_orderTasks_"+$scope.num},$scope.linkOrder=function(params){params.order=$scope.num}}])}),define("text!pas/states/order/view/docs.tpl.html",[],function(){return'<div class="container" ng-controller="pasOrderDocsCtrl"\r\n     filtered-list="{method: \'pas/documents/getOrderDocs\'}"\r\n     initial-sorters="{ InternalSeqNumber: \'desc\' }">\r\n    <div class="row" id="content-wrapper">\r\n        <div class="col-xs-12">\r\n            <div class="row">\r\n                <div class="col-xs-12">\r\n                    <ago-tabs current-tab="docs" tab-settings="tabs"></ago-tabs>\r\n                </div>\r\n            </div>\r\n\r\n            <div filters-box="filter" sorters="sorters" meta="pas/documents/docMetadata" group="PAS.Document"\r\n                 apply-enabled="applyEnabled" apply-filter="applyFilter" reset-filter="resetFilter"\r\n                 filter-applied="filterApplied" style="padding-top: 5px">\r\n                <form class="form form-horizontal" bindonce="i18n.pas">\r\n                    <div class="form-group">\r\n                        <label class="col-md-3 control-label" bo-text="i18n.pas.docs.fields.status"></label>\r\n                        <div class="col-md-9">\r\n                            <input lookup="pas/dictionary/lookupDocumentStatuses" ng-model="filter.simple.Status" filter-node="{path: \'Status\', op: \'=\'}" class="form-control" multiple />\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label class="col-md-3 control-label" bo-text="i18n.pas.docs.fields.seqNumber"></label>\r\n                        <div class="col-md-9">\r\n                            <input lookup="pas/documents/lookupDocuments" ng-model="filter.simple.SeqNumber" filter-node="{path: \'Id\', op: \'=\'}" class="form-control" multiple />\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label class="col-md-3 control-label" bo-text="i18n.pas.docs.fields.type"></label>\r\n                        <div class="col-md-9">\r\n                            <input lookup="pas/dictionary/lookupDocumentTypes" ng-model="filter.simple.Type" filter-node="{path: \'Type\', op: \'=\'}" class="form-control" multiple />\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label class="col-md-3 control-label" bo-text="i18n.pas.docs.fields.content"></label>\r\n                        <div class="col-md-9">\r\n                            <input type="text" ng-model="filter.simple.Content" filter-node="{path: \'Content\', op:\'like\'}" class="form-control"  />\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n\r\n                <filters-box-more-filters>\r\n                    <ago-box color="muted" border="muted" caption="{{ i18n.core.filters.user }}" title-click-collapse padding collapsed="propsFilterCollapsed">\r\n                        <div user-filter filter-ng-model="filter.user"></div>\r\n                    </ago-box>\r\n                </filters-box-more-filters>\r\n            </div>\r\n\r\n            <ago-box color="purple" large="true" header-class="{\'hidden-md\': true, \'hidden-lg\': true}">\r\n                <ago-box-title>\r\n                    <i class="fa icon-file-text"></i>\r\n                    <span bindonce="i18n.pas.docs" bo-text="i18n.pas.docs.title"></span>\r\n                </ago-box-title>\r\n\r\n                <ago-box-content>\r\n                    <div class="box-toolbox box-toolbox-top clearfix">\r\n                        <ago-error-msg></ago-error-msg>\r\n\r\n                        <div>\r\n                            <refresher active="indication.loading" on-refresh="refreshList()"></refresher>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <pas-doc-cards models="models" toggle-details="toggleDetails(model)" show-links="true"></pas-doc-cards>\r\n                    <div class="clearfix"></div>\r\n\r\n                    <div class="box-toolbox box-toolbox-bottom">\r\n                        <button type="button" class="btn btn-primary" ng-click="paging.page = paging.page + 1"\r\n                                bindonce="i18n.core" bo-text="i18n.core.buttons.more"></button>\r\n\r\n                        <refresher active="indication.loading" on-refresh="refreshList()"></refresher>\r\n                        <counter action=\'pas/documents/getOrderDocsCount\'></counter>\r\n                    </div>\r\n                </ago-box-content>\r\n            </ago-box>\r\n\r\n        </div>\r\n    </div>\r\n</div>\r\n'}),define("pas/states/order/view/docs",["../../../moduleDef","angular","text!./docs.tpl.html","text!../../moduleMenu.tpl.html"],function(module,angular,tpl,menuTpl){module.config(["$stateProvider",function($stateProvider){$stateProvider.state({name:"page.project.pas-orderDocs",url:"/pas-orders/:num/docs",views:{"":{template:tpl},"moduleMenu@page":{template:menuTpl}},onEnter:["$rootScope","$stateParams",function($rootScope,$stateParams){$rootScope.breadcrumbs.push({name:"pas.orders.title",url:"page.project.pas-orders"}),$rootScope.breadcrumbs.push({name:$stateParams.num,url:"page.project.pas-orderProps({num: '"+$stateParams.num+"'})"})}],onExit:["$rootScope",function($rootScope){$rootScope.breadcrumbs.splice($rootScope.breadcrumbs.length-2,2)}]})}]).controller("pasOrderDocsCtrl",["$scope","$stateParams","pas.orderTabs","$controller",function($scope,$stateParams,orderTabs,$controller){angular.extend(this,$controller("TabbedViewCtrl",{$scope:$scope,num:$stateParams.num,tabs:orderTabs})),angular.extend(this,$controller("BaseCardsListCtrl",{$scope:$scope,project:$stateParams.project,detailsUrl:"pas/documents/getDocDetails"})),$scope.initialRequestParams={num:$scope.num},$scope.onCacheKey=function(key){return key+"_orderDocs_"+$scope.num}}])}),define("text!pas/states/order/view/comments.tpl.html",[],function(){return'<div class="container" ng-controller="pasOrderCommentsCtrl"\r\n     filtered-list="{\'method\': \'pas/orders/getComments\', \'num\': num}">\r\n    <ago-comments-view create-url="pas/orders/createComment"></ago-comments-view>\r\n</div>\r\n'}),define("pas/states/order/view/comments",["../../../moduleDef","angular","text!./comments.tpl.html","text!../../moduleMenu.tpl.html"],function(module,angular,tpl,menuTpl){module.config(["$stateProvider",function($stateProvider){$stateProvider.state({name:"page.project.pas-orderComments",url:"/pas-orders/:num/comments",views:{"":{template:tpl},"moduleMenu@page":{template:menuTpl}},onEnter:["$rootScope","$stateParams",function($rootScope,$stateParams){$rootScope.breadcrumbs.push({name:"pas.orders.title",url:"page.project.pas-orders"}),$rootScope.breadcrumbs.push({name:$stateParams.num,url:"page.project.pas-orderProps({num: '"+$stateParams.num+"'})"})}],onExit:["$rootScope",function($rootScope){$rootScope.breadcrumbs.splice($rootScope.breadcrumbs.length-2,2)}]})}]).controller("pasOrderCommentsCtrl",["$scope","$stateParams","pas.orderTabs","$controller",function($scope,$stateParams,orderTabs,$controller){angular.extend(this,$controller("TabbedViewCtrl",{$scope:$scope,num:$stateParams.num,tabs:orderTabs})),$scope.initialRequestParams={num:$scope.num},$scope.onCacheKey=function(key){return key+"_"+$scope.num}}])}),define("text!pas/states/order/view/files.tpl.html",[],function(){return'<div class="container" ng-controller="pasOrderFilesCtrl"\r\n     filtered-list="{method: \'pas/orders/getFiles\'}"\r\n     initial-sorters="{Name: \'asc\'}">\r\n    <div class="row" id="content-wrapper">\r\n        <div class="col-xs-12">\r\n            <div class="row">\r\n                <div class="col-xs-12">\r\n                    <ago-tabs current-tab="files" tab-settings="tabs"></ago-tabs>\r\n                </div>\r\n            </div>\r\n\r\n            <files-view models="models" owner-id="num"\r\n                        filter-meta="pas/orders/OrderFilesMetadata" filter-group="PAS.OrderFiles"\r\n                        upload-url="pas/orders/uploadFiles" rename-url="pas/orders/renameFile"\r\n                        delete-url="pas/orders/deleteFiles">\r\n            </files-view>\r\n        </div>\r\n    </div>\r\n</div>\r\n'}),define("pas/states/order/view/files",["../../../moduleDef","angular","text!./files.tpl.html","text!../../moduleMenu.tpl.html"],function(module,angular,tpl,menuTpl){module.config(["$stateProvider",function($stateProvider){$stateProvider.state({name:"page.project.pas-orderFiles",url:"/pas-orders/:num/files",views:{"":{template:tpl},"moduleMenu@page":{template:menuTpl}},onEnter:["$rootScope","$stateParams",function($rootScope,$stateParams){$rootScope.breadcrumbs.push({name:"pas.orders.title",url:"page.project.pas-orders"}),$rootScope.breadcrumbs.push({name:$stateParams.num,url:"page.project.pas-orderProps({num: '"+$stateParams.num+"'})"})}],onExit:["$rootScope",function($rootScope){$rootScope.breadcrumbs.splice($rootScope.breadcrumbs.length-2,2)}]})}]).controller("pasOrderFilesCtrl",["$scope","$stateParams","pas.orderTabs","$controller",function($scope,$stateParams,orderTabs,$controller){angular.extend(this,$controller("TabbedViewCtrl",{$scope:$scope,num:$stateParams.num,tabs:orderTabs})),$scope.initialRequestParams={ownerId:$scope.num},$scope.$on("resetFilter",function(){$scope.requestParams.ownerId=$scope.num}),$scope.onCacheKey=function(key){return key+"_"+$scope.num}}])}),define("pas/states/pasCustomPropTypes",["../moduleDef","angular","text!./moduleMenu.tpl.html"],function(module,angular,moduleMenuTpl){module.config(["$stateProvider",function($stateProvider){$stateProvider.state({name:"page.project.customPropTypes.pas",url:"/pas/classifier/userProps",views:{"moduleMenu@page":{template:moduleMenuTpl}},onEnter:["$rootScope",function($rootScope){$rootScope.breadcrumbs.push({name:"core.customPropTypes.title",url:"page.project.customPropTypes.pas"})}]})}])}),define("pas/states/pasReports",["../moduleDef","angular","text!./moduleMenu.tpl.html"],function(module,angular,moduleMenuTpl){module.config(["$stateProvider",function($stateProvider){$stateProvider.state({name:"page.project.reports.pas",url:"/pas/reports",views:{"moduleMenu@page":{template:moduleMenuTpl}},onEnter:["$rootScope",function($rootScope){$rootScope.breadcrumbs.push({name:"core.reporting.reports.title",url:"page.project.reports.pas"})}]})}])}),define("pas/states",["./states/commonMixins","./states/activity/activityList","./states/task/taskList","./states/task/taskType","./states/task/create","./states/task/view/activity","./states/task/view/props","./states/task/view/subtasks","./states/task/view/comments","./states/task/view/files","./states/doc/docList","./states/doc/doc-type/docType","./states/doc/create","./states/doc/view/activity","./states/doc/view/props","./states/doc/view/files","./states/obj/objList","./states/obj/obj-type/objType","./states/obj/address/address","./states/obj/create","./states/obj/view/activity","./states/obj/view/props","./states/obj/view/docs","./states/obj/view/map","./states/obj/view/files","./states/project/props","./states/project/members","./states/project/ous","./states/project/templates","./states/project/invitations","./states/order/orderList","./states/order/company/company","./states/order/unit/unit","./states/order/service-type/serviceType","./states/order/create","./states/order/view/activity","./states/order/view/props","./states/order/view/tasks","./states/order/view/docs","./states/order/view/comments","./states/order/view/files","./states/pasCustomPropTypes","./states/pasReports"],function(){}),define("text!pas/directives/taskCards.tpl.html",[],function(){return'<div ago-masonry="{columnWidth: \'.grid-sizer\'}" preserve-order="true" class="items-wall">\r\n    <div class="grid-sizer col-xs-12" ng-class="{\'col-sm-6\': !!!oneColumn}"></div>\r\n    <div class="items-box ago-masonry-brick col-xs-12" ng-class="{\'col-sm-6\': !!!oneColumn}"\r\n         bindonce ng-repeat="model in models track by model.VersionId">\r\n        <div class="box-content clearfix">\r\n            <div class="row">\r\n                <common-tasks-task-card-header view-state="page.project.pas-taskProps"\r\n                                               create-state="page.project.pas-taskCreate">\r\n                </common-tasks-task-card-header>\r\n\r\n                <div class="clearfix" ng-if="model.Order"></div>\r\n                <div class="col-xs-12" ng-if="model.Order" style="margin-top: 5px">\r\n                    <ul class="links">\r\n                        <li>\r\n                            <a ui-sref="page.project.pas-orderTasks({num: model.Order.SeqNumber})">\r\n                                <i class="fa icon-ticket"></i>\r\n                            </a>\r\n                        </li>\r\n                        <li>\r\n                            <a class="badge badge-success" ui-sref="page.project.pas-orderProps({num: model.Order.SeqNumber})">\r\n                                <i class="icon-pushpin" bo-if="model.Order.SeqNumber === num"></i>&nbsp;\r\n                                <span bo-text="model.Order.SeqNumber"></span>&nbsp;<span bo-text="model.Order.FromCompany"></span>\r\n                            </a>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n\r\n                <div class="clearfix" ng-if="showLinks && model.InputItems.length > 0"></div>\r\n                <div class="col-xs-12" ng-if="showLinks && model.InputItems.length > 0" style="margin-top: 5px">\r\n                    <pas-task-linked-items ng-if="showLinks && model.InputItems.length > 0"\r\n                                           icon="icon-signin" num="model.SeqNumber" items="model.InputItems"\r\n                                           show-links="true" more="model.MoreInputItems">\r\n                    </pas-task-linked-items>\r\n                </div>\r\n\r\n                <div class="clearfix" ng-if="showLinks && model.OutputItems"></div>\r\n                <div class="col-xs-12" ng-if="showLinks && model.OutputItems" style="margin-top: 5px">\r\n                    <pas-task-linked-items ng-if="showLinks && model.OutputItems"\r\n                                           icon="icon-signout" num="model.SeqNumber" items="model.OutputItems"\r\n                                           show-links="true" more="model.MoreOutputItems">\r\n                    </pas-task-linked-items>\r\n                </div>\r\n\r\n                <common-tasks-task-card-footer view-state="page.project.pas-taskProps"\r\n                                               comments-state="page.project.pas-taskComments"\r\n                                               files-state="page.project.pas-taskFiles"\r\n                                               activity-state="page.project.pas-taskActivity">\r\n                </common-tasks-task-card-footer>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'}),requirejs.s.contexts._.nextTick=function(f){f()},require(["css"],function(css){css.addBuffer("pas/directives/cards.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,define("pas/directives/taskCards",["../moduleDef","angular","text!./taskCards.tpl.html","css!./cards.css"],function(module,angular,tpl){module.directive("pasTaskCards",function(){return{restrict:"E",replace:!0,template:tpl,controller:["$scope","$controller",function($scope,$controller){angular.extend(this,$controller("commonTasksTaskCardsCtrl",{$scope:$scope,apiPrefix:"pas/tasks"}))}],scope:{models:"=",toggleDetails:"&",showLinks:"=",oneColumn:"@"}}})}),define("text!pas/directives/executorsView.tpl.html",[],function(){return'<ul class="executors">\r\n	<li ng-repeat="e in executors">{{ e.text }}</li>\r\n</ul>'}),requirejs.s.contexts._.nextTick=function(f){f()},require(["css"],function(css){css.addBuffer("pas/directives/executorsView.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,define("pas/directives/executorsView",["../moduleDef","angular","text!./executorsView.tpl.html","css!./executorsView.css"],function(module,angular,tpl){module.directive("pasExecutors",function(){return{restrict:"E",replace:!0,template:tpl,scope:{executors:"=model"}}})}),define("pas/directives/baseCards",["../moduleDef","angular","jquery"],function(module,angular,$){return function(name,template,statusViewSettingsName,extender){module.directive(name,["$timeout","$rootScope","$injector",function($timeout,$rootScope,$injector){return{restrict:"E",replace:!0,template:template,controller:["$scope","$rootScope","$injector",function($scope,$rootScope,$injector){$scope.i18n=$rootScope.i18n,$scope.moment=$rootScope.moment,angular.isDefined(statusViewSettingsName)&&($scope.statusViewSettings=$injector.get(statusViewSettingsName))}],scope:{models:"=",toggleDetails:"&",showLinks:"=",oneColumn:"@",action:"&"},link:function($scope,elm,attr){$scope.doLayout=function(){$timeout(function(){$(".items-wall").masonry("layout")},0,!0)},$scope.toggle=function(model){if($scope.toggleDetails({model:model}),$scope.doLayout(),!model.details.loaded)var unwatch=$scope.$watch(function(){return model.details.loaded},function(newVal){newVal&&(unwatch(),$scope.doLayout())})};var offOpen=$rootScope.$on("sidebar:opened",$scope.doLayout),offClose=$rootScope.$on("sidebar:closed",$scope.doLayout),offChanged=$scope.$parent.$on("modelsChanged",function(){$timeout(function(){$scope.$broadcast("masonry.reloadItemsAndLayout")},0,!1)});$scope.$on("$destroy",function(){offOpen(),offClose(),offChanged()}),angular.isFunction(extender)&&extender($scope,attr,$injector)}}}])}}),define("text!pas/directives/docCards.tpl.html",[],function(){return'<div ago-masonry="{columnWidth: \'.grid-sizer\'}" preserve-order="true" class="items-wall">\r\n    <div class="grid-sizer col-xs-12" ng-class="{\'col-sm-6\': !!!oneColumn}"></div>\r\n    <div class="items-box ago-masonry-brick col-xs-12" ng-class="{\'col-sm-6\': !!!oneColumn}"\r\n         bindonce ng-repeat="model in models track by model.VersionId">\r\n        <div class="box-content clearfix">\r\n            <div class="row">\r\n                <div class="col-xs-12">\r\n                    <input type="checkbox" class="selector checkbox" ng-model="model.selected">\r\n                    <pas-doc-num num="model.SeqNumber"></pas-doc-num>\r\n\r\n                    <span bo-text="model.Type"></span>\r\n\r\n	                <div class="btn-group pull-right">\r\n		                <ago-status-btn class="btn-sm disabled" status="model.Status" view-settings="statusViewSettings">\r\n		                </ago-status-btn>\r\n	                </div>\r\n\r\n                    <span bo-if="model.Content">\r\n                        <span class="clip-content" bo-text="model.Content"></span>\r\n                    </span>\r\n                </div>\r\n\r\n                <div class="clearfix" ng-if="model.Object"></div>\r\n\r\n                <div class="col-xs-12" ng-if="model.Object" style="margin-top: 5px">\r\n                    <h4>\r\n                        <i class="pull-left icon-building"></i>\r\n                    </h4>\r\n                    <a class="badge badge-info pull-left" ui-sref="page.project.pas-objectProps({ num: model.Object.SeqNumber })">\r\n                        <span bo-text="model.Object.SeqNumber"></span>&nbsp;\r\n                        <span bo-text="model.Object.CadastralNumber"></span>\r\n                    </a>\r\n                    <span class="pull-left" style="margin-left: 5px" ng-if="model.Object.Address">\r\n                        {{ model.Object.Address }}\r\n                    </span>\r\n                    <span class="pull-left" style="margin-left: 5px" ng-if="model.Object.MoreAddresses > 0">\r\n                        {{ \'pas.docs.fields.moreAddresses\' | i18n:{count: model.Object.MoreAddresses} }}\r\n                    </span>\r\n                </div>\r\n\r\n                <!-- Add the extra clearfix for only the required viewport -->\r\n                <div class="clearfix"></div>\r\n\r\n                <div class="col-xs-12">\r\n                    <details-btn open="model.details.expanded" toggle="toggle(model)"></details-btn>\r\n\r\n                    <a href="" ui-sref="page.project.pas-docActivity({ num: model.SeqNumber })">\r\n                        <ago-time-moment time="model.LastChangeTime"></ago-time-moment>\r\n                    </a>\r\n\r\n                    <div class="clearfix"></div>\r\n                </div>\r\n\r\n\r\n                <div class="clearfix"></div>\r\n\r\n                <pas-doc-details class="col-xs-12" item="model"></pas-doc-details>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'}),define("pas/directives/docCards",["./baseCards","text!./docCards.tpl.html","css!./cards.css"],function(factory,tpl){factory("pasDocCards",tpl,"documentStatusViewSettings")}),define("text!pas/directives/objCards.tpl.html",[],function(){return'<div ago-masonry="{columnWidth: \'.grid-sizer\'}" preserve-order="true" class="items-wall">\r\n    <div class="grid-sizer col-xs-12" ng-class="{\'col-sm-6\': !!!oneColumn}"></div>\r\n    <div class="items-box ago-masonry-brick col-xs-12" ng-class="{\'col-sm-6\': !!!oneColumn}"\r\n         bindonce ng-repeat="model in models track by model.VersionId">\r\n        <div class="box-content clearfix">\r\n            <div class="row">\r\n                <div class="col-xs-12">\r\n                    <input type="checkbox" class="selector checkbox" ng-model="model.selected">\r\n                    <pas-obj-num num="model.SeqNumber"></pas-obj-num>\r\n\r\n                    <span bo-text="model.Type"></span>\r\n                    <strong bo-text="model.CadastralNumber || i18n.msg(\'pas.obj.empty.cadastralNumber\')"></strong>\r\n                </div>\r\n\r\n                <div class="clearfix" bo-if="model.Addresses"></div>\r\n\r\n                <div class="col-xs-12" bo-if="model.Addresses">\r\n                    <pas-addresses model="model.Addresses"></pas-addresses>\r\n                </div>\r\n\r\n                <div class="clearfix" ng-if="showLinks && model.Documents.length > 0"></div>\r\n\r\n                <pas-linked-docs num="model.SeqNumber" items="model.Documents" icon="icon-file-text"\r\n                                 ng-if="showLinks && model.Documents.length > 0">\r\n                </pas-linked-docs>\r\n\r\n                <div class="clearfix"></div>\r\n\r\n                <div class="col-xs-12">\r\n                    <details-btn open="model.details.expanded" toggle="toggle(model)"></details-btn>\r\n\r\n                    <a href="" ui-sref="page.project.pas-objectActivity({ num: model.SeqNumber})">\r\n                        <ago-time-moment time="model.LastChangeTime"></ago-time-moment>\r\n                    </a>\r\n\r\n                    <div class="clearfix"></div>\r\n                </div>\r\n\r\n                <div class="clearfix"></div>\r\n\r\n                <pas-obj-details class="col-xs-12" item="model"></pas-obj-details>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'}),define("pas/directives/objCards",["./baseCards","text!./objCards.tpl.html","css!./cards.css"],function(factory,tpl){factory("pasObjCards",tpl)}),define("text!pas/directives/addressesView.tpl.html",[],function(){return'<ul class="addresses">\r\n    <li ng-repeat="a in addresses" bindonce bo-text="a.text"></li>\r\n</ul>\r\n'}),requirejs.s.contexts._.nextTick=function(f){f()},require(["css"],function(css){css.addBuffer("pas/directives/addressesView.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,define("pas/directives/addressesView",["../moduleDef","angular","text!./addressesView.tpl.html","css!./addressesView.css"],function(module,angular,tpl){module.directive("pasAddresses",function(){return{restrict:"E",replace:!0,template:tpl,scope:{addresses:"=model"}}})}),define("text!pas/directives/orderCards.tpl.html",[],function(){return'<div ago-masonry="{columnWidth: \'.grid-sizer\'}" preserve-order="true" class="items-wall">\r\n    <div class="grid-sizer col-xs-12" ng-class="{\'col-sm-6\': !!!oneColumn}"></div>\r\n    <div class="items-box ago-masonry-brick col-xs-12" ng-class="{\'col-sm-6\': !!!oneColumn}"\r\n         bindonce ng-repeat="model in models track by model.VersionId">\r\n        <div class="box-content clearfix">\r\n            <div class="row">\r\n                <div class="col-xs-12">\r\n                    <input type="checkbox" class="selector checkbox" ng-model="model.selected">\r\n                    <pas-order-num num="model.SeqNumber"></pas-order-num>\r\n\r\n                    <div class="btn-group pull-right">\r\n                        <ago-status-btn class="btn-sm disabled" status="model.Status" view-settings="statusViewSettings">\r\n                        </ago-status-btn>\r\n                    </div>\r\n\r\n                    <strong bo-text="model.FromCompany"></strong>\r\n                </div>\r\n\r\n                <div class="clearfix" bo-if="model.ToCompany"></div>\r\n\r\n                <div class="col-xs-12" bo-if="model.ToCompany">\r\n                    <strong bo-text="model.ToCompany"></strong>\r\n                </div>\r\n\r\n                <div class="clearfix" bo-if="model.TasksVisible"></div>\r\n                <div class="col-xs-12" bo-if="model.TasksVisible">\r\n                    <pas-order-tasks num="model.SeqNumber" items="model.Tasks"\r\n                                     open="model.OpenTasksCount" all="model.TasksCount" more="model.MoreTasks">\r\n                    </pas-order-tasks>\r\n                    <span bo-if="model.TasksWarning" class="label label-important">{{ i18n.pas.orders.tasksWarning }}</span>\r\n                    <div class="clearfix"></div>\r\n                </div>\r\n\r\n                <div class="clearfix" style="margin-top: 5px"></div>\r\n\r\n                <div class="col-xs-12">\r\n                    <span class="clip-content">{{ model.Content }}</span>\r\n                </div>\r\n\r\n                <div class="clearfix" ng-if="model.Services" style="margin-top: 5px"></div>\r\n                <div class="col-xs-12" ng-if="model.Services">\r\n                    <table class="table" style="margin-bottom: 0">\r\n                        <tbody>\r\n                        <tr ng-repeat="s in model.Services">\r\n                            <td style="white-space: normal">{{ s.Name }}</td>\r\n                            <td style="text-align: right">{{ s.TotalCost | number:2 }}</td>\r\n                        </tr>\r\n                        </tbody>\r\n                        <tfoot>\r\n                        <tr>\r\n                            <td colspan="2" style="text-align: right">\r\n                                <strong>{{ model.TotalCost | number:2 }}</strong>\r\n                            </td>\r\n                        </tr>\r\n                        </tfoot>\r\n                    </table>\r\n                </div>\r\n\r\n                <div class="clearfix"></div>\r\n\r\n                <div class="col-xs-12">\r\n                    <details-btn open="model.details.expanded" toggle="toggle(model)"></details-btn>\r\n\r\n                    <pas-executors model="model.Managers"></pas-executors>\r\n\r\n                    <em bo-if="model.DueDate" bo-text="model.DueDate | date:\'ago_date\'" style="margin-left: 5px"></em>\r\n                    <expiration visible="model.DaysToDueDate" expired="model.IsExpired" days="model.DaysToDueDate"\r\n                            style="margin-left: 5px">\r\n                    </expiration>\r\n\r\n                    <a href="" ui-sref="page.project.pas-orderActivity({ num: model.SeqNumber })" style="margin-left: 5px">\r\n                        <ago-time-moment time="model.LastChangeTime"></ago-time-moment>\r\n                    </a>\r\n\r\n                    <div class="clearfix"></div>\r\n                </div>\r\n\r\n                <div class="clearfix"></div>\r\n\r\n                <pas-order-details class="col-xs-12" item="model"></pas-order-details>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'
}),define("pas/directives/orderCards",["./baseCards","text!./orderCards.tpl.html","css!./cards.css"],function(factory,tpl){factory("pasOrderCards",tpl,"orderStatusViewSettings")}),define("text!pas/directives/servicesView.tpl.html",[],function(){return'<div>\r\n    <ago-box color="blue" title-click-collapse collapsible="true" large="true" collapsed="collapsed">\r\n        <ago-box-title>\r\n            <i class="icon-table"></i>\r\n            <span bindonce="i18n.pas.tasks" bo-text="i18n.pas.orders.services.title"></span>\r\n        </ago-box-title>\r\n        <ago-box-actions>\r\n            <a class="btn btn-xs btn-link">\r\n                <i class="fa" ng-class="{ \'icon-chevron-up\': !collapsed, \'icon-chevron-down\': collapsed }"></i>\r\n            </a>\r\n        </ago-box-actions>\r\n        <ago-box-content>\r\n            <div class="box-toolbox box-toolbox-top">\r\n                <ago-error-msg></ago-error-msg>\r\n\r\n                <button type="button" class="btn btn-success" ng-click="toggle()" ng-hide="addMode">\r\n                    <icon class="icon-plus"></icon>\r\n                </button>\r\n\r\n                <div class="row" ng-show="addMode">\r\n                    <div class="col-xs-12">\r\n                        <form name="form" class="form form-horizontal" novalidate bindonce="i18n.pas.orders">\r\n                            <div class="form-group" ng-class="{\'has-error\': form.st.$invalid || validation.fieldErrors[\'ServiceType\']}">\r\n                                <label class="col-md-2 control-label" bo-text="i18n.pas.orders.services.fields.type"></label>\r\n                                <div class="col-md-10">\r\n                                    <input type="text" name="st" ng-model="newModel.type" class="form-control" required\r\n                                           lookup="pas/dictionary/lookupServiceTypesExtended">\r\n                                    <span ng-show="form.st.$error.required" class="help-block has-error">\r\n                                        * {{ i18n.core.errors.requiredField }}\r\n                                    </span>\r\n                                    <span ng-show="validation.fieldErrors[\'ServiceType\']" class="help-block has-error">\r\n                                        {{ validation.fieldErrors[\'ServiceType\'] | joinBy }}\r\n                                    </span>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class="form-group" ng-class="{\'has-error\': form.u.$invalid || validation.fieldErrors[\'Unit\']}">\r\n                                <label class="col-md-2 control-label" bo-text="i18n.pas.orders.services.fields.unit"></label>\r\n                                <div class="col-md-10">\r\n                                    <input type="text" name="u" ng-model="newModel.unit" class="form-control" required\r\n                                           lookup="pas/dictionary/lookupUnits">\r\n                                    <span ng-show="form.u.$error.required" class="help-block has-error">\r\n                                        * {{ i18n.core.errors.requiredField }}\r\n                                    </span>\r\n                                    <span ng-show="validation.fieldErrors[\'Unit\']" class="help-block has-error">\r\n                                        {{ validation.fieldErrors[\'Unit\'] | joinBy }}\r\n                                    </span>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class="form-group" ng-class="{\'has-error\': form.q.$invalid || validation.fieldErrors[\'Quantity\']}">\r\n                                <label class="col-md-2 control-label" bo-text="i18n.pas.orders.services.fields.quantity"></label>\r\n                                <div class="col-md-10">\r\n                                    <input type="number" name="q" ng-model="newModel.quantity" class="form-control"\r\n                                           required min="0.0001">\r\n                                    <span ng-show="form.q.$error.required" class="help-block has-error">\r\n                                        * {{ i18n.core.errors.requiredField }}\r\n                                    </span>\r\n                                    <span ng-show="form.q.$error.number" class="help-block has-error">\r\n                                        * {{ i18n.core.errors.invalidFormat }}\r\n                                    </span>\r\n                                    <span ng-show="form.q.$error.min" class="help-block has-error">\r\n                                        * {{ \'core.errors.min\' | i18n:{num: 0} }}\r\n                                    </span>\r\n                                    <span ng-show="validation.fieldErrors[\'Quantity\']" class="help-block has-error">\r\n                                        {{ validation.fieldErrors[\'Quantity\'] | joinBy }}\r\n                                    </span>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class="form-group" ng-class="{\'has-error\': form.c.$invalid || validation.fieldErrors[\'Cost\']}">\r\n                                <label class="col-md-2 control-label" bo-text="i18n.pas.orders.services.fields.cost"></label>\r\n                                <div class="col-md-10">\r\n                                    <input type="number" name="c" ng-model="newModel.cost" class="form-control"\r\n                                           required min="0.0001">\r\n                                    <span ng-show="form.c.$error.required" class="help-block has-error">\r\n                                        * {{ i18n.core.errors.requiredField }}\r\n                                    </span>\r\n                                    <span ng-show="form.c.$error.number" class="help-block has-error">\r\n                                        * {{ i18n.core.errors.invalidFormat }}\r\n                                    </span>\r\n                                    <span ng-show="form.c.$error.min" class="help-block has-error">\r\n                                        * {{ \'core.errors.min\' | i18n:{num: 0} }}\r\n                                    </span>\r\n                                    <span ng-show="validation.fieldErrors[\'Cost\']" class="help-block has-error">\r\n                                        {{ validation.fieldErrors[\'Cost\'] | joinBy }}\r\n                                    </span>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class="form-actions form-actions-padding-sm">\r\n                                <div class="row">\r\n                                    <div class="col-md-10 col-md-offset-2">\r\n                                        <button type="button" class="btn" ng-click="cancel()">{{ i18n.core.buttons.cancel }}</button>\r\n                                        <button type="button" class="btn btn-success" ng-click="create()" ng-disabled="form.$invalid">{{ i18n.core.buttons.save }}</button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="responsive-table">\r\n                <div class="scrollable-area">\r\n                    <table class="table table-bordered">\r\n                        <thead>\r\n                        <tr bindonce="i18n.pas.orders">\r\n                            <th class="col-xs-12 col-sm-4" bo-text="i18n.pas.orders.services.fields.type"></th>\r\n                            <th class="col-sm-2 hidden-xs" bo-text="i18n.pas.orders.services.fields.unit"></th>\r\n                            <th class="col-sm-2 hidden-xs" bo-text="i18n.pas.orders.services.fields.quantity"></th>\r\n                            <th class="col-sm-2 hidden-xs" bo-text="i18n.pas.orders.services.fields.cost"></th>\r\n                            <th class="col-sm-2 hidden-xs" bo-text="i18n.pas.orders.services.fields.total"></th>\r\n                            <th class="onepct hidden-xs">&nbsp;</th>\r\n                        </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                        <tr bindonce ng-repeat="s in model.Services">\r\n                            <td class="col-xs-12 col-sm-4" style="white-space: normal">\r\n                                <inline-lookup model="s.ServiceType" input-col="col-xs-12" required\r\n                                               on-update="onUpdateProp(s, \'ServiceType\', val)" on-cancel="onCancelProp(s)"\r\n                                               input-lookup="pas/dictionary/lookupServiceTypes">\r\n                                </inline-lookup>\r\n                                <span ng-show="s.validation.fieldErrors[\'ServiceType\']" class="help-block has-error">\r\n                                    {{ s.validation.fieldErrors[\'ServiceType\'] | joinBy }}\r\n                                </span>\r\n\r\n                                <span class="visible-xs text-muted">\r\n                                    {{ s.Quantity }} {{ s.Unit.text }} * {{ s.Cost | number:2 }} = {{ s.TotalCost | number:2 }}\r\n                                </span>\r\n                            </td>\r\n                            <td class="col-sm-2 hidden-xs">\r\n                                <inline-lookup model="s.Unit" input-col="col-xs-12" required\r\n                                               on-update="onUpdateProp(s, \'Unit\', val)" on-cancel="onCancelProp(s)"\r\n                                               input-lookup="pas/dictionary/lookupUnits">\r\n                                </inline-lookup>\r\n                                <span ng-show="s.validation.fieldErrors[\'Unit\']" class="help-block has-error">\r\n                                    {{ s.validation.fieldErrors[\'Unit\'] | joinBy }}\r\n                                </span>\r\n                            </td>\r\n                            <td class="col-sm-2 hidden-xs">\r\n                                <inline-number model="s.Quantity" view-model="s.Quantity | number:2"\r\n                                               input-col="col-xs-12" required num-min="0.0001"\r\n                                               on-update="onUpdateProp(s, \'Quantity\', val)" on-cancel="onCancelProp(s)">\r\n                               </inline-number>\r\n                                <span ng-show="s.validation.fieldErrors[\'Quantity\']" class="help-block has-error">\r\n                                    {{ s.validation.fieldErrors[\'Quantity\'] | joinBy }}\r\n                                </span>\r\n                            </td>\r\n                            <td class="col-sm-2 hidden-xs">\r\n                                <inline-number model="s.Cost" view-model="s.Cost | number:2"\r\n                                               input-col="col-xs-12" required num-min="0.0001"\r\n                                               on-update="onUpdateProp(s, \'Cost\', val)" on-cancel="onCancelProp(s)">\r\n                                </inline-number>\r\n                                <span ng-show="s.validation.fieldErrors[\'Cost\']" class="help-block has-error">\r\n                                    {{ s.validation.fieldErrors[\'Cost\'] | joinBy }}\r\n                                </span>\r\n                            </td>\r\n                            <td class="col-sm-2 hidden-xs">\r\n                                {{ s.TotalCost | number:2 }}\r\n                            </td>\r\n\r\n                            <td class="onepct hidden-xs">\r\n                                <ago-btn-delete ng-click="remove(s)" ng-show="isEditable()"\r\n                                    bindonce="i18n.core" bo-title="i18n.core.buttons.delete"></ago-btn-delete>\r\n                            </td>\r\n                        </tr>\r\n                        </tbody>\r\n                        <tfoot>\r\n                            <tr>\r\n                                <td colspan="5" style="text-align: right">\r\n                                    <strong>{{ calcTotalCost() | number:2 }}</strong>\r\n                                </td>\r\n                                <td class="onepct hidden-xs"></td>\r\n                            </tr>\r\n                        </tfoot>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        </ago-box-content>\r\n    </ago-box>\r\n</div>\r\n'}),define("pas/directives/servicesView",["../moduleDef","angular","text!./servicesView.tpl.html"],function(module,angular,tpl){module.directive("pasServicesView",["apinetService","dialogService","i18n","$stateParams","$controller",function(apinetService,dialogService,i18n,$stateParams,$controller){return{restrict:"E",template:tpl,controller:["$scope","$rootScope",function($scope,$rootScope){$scope.i18n=$rootScope.i18n}],scope:{model:"=",collapsed:"="},link:function($scope){angular.extend(this,$controller("ErrorHandlingCtrl",{$scope:$scope})),$scope.newModel={type:null,unit:null,quantity:null,cost:null,clear:function(){this.type=null,this.unit=null,this.quantity=null,this.cost=null}},$scope.$watch("newModel.type",function(val){val&&(val.DefaultUnit&&($scope.newModel.unit=val.DefaultUnit),val.DefaultCost&&($scope.newModel.cost=val.DefaultCost))}),$scope.isEditable=function(){return!0},$scope.addMode=!1,$scope.toggle=function(){$scope.addMode=!$scope.addMode},$scope.calcTotalCost=function(){var total=0;return $scope.model&&angular.forEach($scope.model.Services,function(s){total+=s.TotalCost}),total},$scope.cancel=function(){$scope.newModel.clear(),$scope.toggle()},$scope.create=function(){apinetService.action({method:"pas/orders/addService",project:$stateParams.project,orderId:$scope.model.Id,serviceTypeId:$scope.newModel.type.id,unitId:$scope.newModel.unit.id,quantity:$scope.newModel.quantity,cost:$scope.newModel.cost}).then(function(response){response&&response.validation.success===!0?($scope.model.Services.push(response.model),$scope.toggle()):$scope.validation=response.validation},$scope.handleException)},$scope.remove=function(service){dialogService.confirm(i18n.msg("core.confirm.delete.title"),i18n.msg("core.confirm.delete.record")).then(function(){apinetService.action({method:"pas/orders/removeService",project:$stateParams.project,orderId:$scope.model.Id,serviceId:service.Id}).then(function(response){if(response===!0){var index=$scope.model.Services.indexOf(service);index>=0&&$scope.model.Services.splice(index,1)}else $scope.handleException(i18n.msg("core.errors.nothingToDelete"))},$scope.handleException)})},$scope.onCancelProp=function(service){service.validation={}};var make=function(model,prop,value,valueProp){valueProp=valueProp||"id";var val=angular.isArray(value)?value.map(function(item){return item[valueProp]}):angular.isObject(value)&&!angular.isDate(value)?value[valueProp]:value;return{Id:model.Id,ModelVersion:model.ModelVersion,Prop:prop,Value:val}};$scope.onUpdateProp=function(service,prop,val){return apinetService.action({method:"pas/orders/updateService",project:$stateParams.project,data:make(service,prop,val)}).then(function(response){return $scope.resetValidation(),service.validation={},angular.extend(service.validation,response.validation),angular.extend(service,response.model),response.validation.success},$scope.handleException)}}}}])}),define("text!pas/directives/taskLinkedRecords.tpl.html",[],function(){return'<div>\r\n    <ago-box color="blue" title-click-collapse collapsible="true" large="true" collapsed="collapsed">\r\n        <ago-box-title>\r\n            <i ng-class="{\'icon-step-forward\': !!input, \'icon-step-backward\': !!!input}"></i>\r\n            <span bindonce="i18n.pas.tasks" bo-text="(!!input ? \'pas.tasks.links.input\' : \'pas.tasks.links.output\')|i18n"></span>\r\n        </ago-box-title>\r\n        <ago-box-actions>\r\n            <a class="btn btn-xs btn-link">\r\n                <i class="fa" ng-class="{ \'icon-chevron-up\': !collapsed, \'icon-chevron-down\': collapsed }"></i>\r\n            </a>\r\n        </ago-box-actions>\r\n\r\n        <ago-box-content>\r\n            <div class="box-toolbox box-toolbox-top" bindonce="i18n.pas.tasks">\r\n                <ago-error-msg></ago-error-msg>\r\n\r\n                <div class="dropdown pull-right" ng-hide="editables.state">\r\n                    <a class="btn dropdown-toggle" data-toggle="dropdown" href="">\r\n                        <span bo-text="i18n.pas.tasks.links.buttons.dropdown"></span>\r\n                        <span class="caret"></span>\r\n                    </a>\r\n                    <ul class="dropdown-menu">\r\n                        <li><a ng-click="goToState(\'addOrder\')" href="" bo-text="i18n.pas.tasks.links.buttons.addOrder"></a></li>\r\n                        <li><a ng-click="goToState(\'addDoc\')" href="" bo-text="i18n.pas.tasks.links.buttons.addDoc"></a></li>\r\n                        <li><a ng-click="goToState(\'addObject\')" href="" bo-text="i18n.pas.tasks.links.buttons.addObject"></a></li>\r\n                        <li><a ng-click="goToState(\'addFile\')" href="" bo-text="i18n.pas.tasks.links.buttons.addFile"></a></li>\r\n                        <li class="divider" ng-if="!!enableCreate"></li>\r\n                        <li ng-if="!!enableCreate"><a ng-click="goToNewDoc()" href="" bo-text="i18n.pas.tasks.links.buttons.newDoc"></a></li>\r\n                        <li class="divider"></li>\r\n                        <li><a ng-click="removeSelected()" href="" bo-text="i18n.pas.tasks.links.buttons.remove"></a></li>\r\n                    </ul>\r\n                </div>\r\n                <div class="clearfix"></div>\r\n\r\n                <div class="row" ng-if="editables.state == \'addOrder\'">\r\n                    <div class="col-xs-12">\r\n                        <div class="input-group">\r\n                            <input type="text" lookup="pas/orders/lookupOrders" class="form-control"\r\n                                   ng-model="editables.order"\r\n                                   bo-attr bo-attr-placeholder="i18n.pas.tasks.links.placeholder">\r\n                            <span class="input-group-btn" bindonce="i18n.core">\r\n                                <button type="button" class="btn" ng-click="goToState(null)"\r\n                                        bo-title="i18n.core.buttons.cancel">\r\n                                    <i class="icon-reply"></i>\r\n                                </button>\r\n                                <button type="button" class="btn" ng-click="addOrder()" ng-disabled="!editables.order"\r\n                                        bo-title="i18n.core.buttons.add">\r\n                                    <i class="icon-ok"></i>\r\n                                </button>\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="row" ng-if="editables.state == \'addDoc\'">\r\n                    <div class="col-xs-12">\r\n                        <div class="input-group">\r\n                            <input type="text" lookup="pas/documents/lookupDocuments" class="form-control"\r\n                                   ng-model="editables.doc"\r\n                                   bo-attr bo-attr-placeholder="i18n.pas.tasks.links.placeholder">\r\n                            <span class="input-group-btn" bindonce="i18n.core">\r\n                                <button type="button" class="btn" ng-click="goToState(null)"\r\n                                        bo-title="i18n.core.buttons.cancel">\r\n                                    <i class="icon-reply"></i>\r\n                                </button>\r\n                                <button type="button" class="btn" ng-click="addDoc()" ng-disabled="!editables.doc"\r\n                                        bo-title="i18n.core.buttons.add">\r\n                                    <i class="icon-ok"></i>\r\n                                </button>\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="row" ng-if="editables.state == \'addObject\'">\r\n                    <div class="col-xs-12">\r\n                        <div class="input-group">\r\n                            <input type="text" lookup="pas/objects/lookupObjects" class="form-control"\r\n                                   ng-model="editables.object"\r\n                                   bo-attr bo-attr-placeholder="i18n.pas.tasks.links.placeholder">\r\n                            <span class="input-group-btn" bindonce="i18n.core">\r\n                                <button type="button" class="btn" ng-click="goToState(null)"\r\n                                        bo-title="i18n.core.buttons.cancel">\r\n                                    <i class="icon-reply"></i>\r\n                                </button>\r\n                                <button type="button" class="btn" ng-click="addObject()" ng-disabled="!editables.object"\r\n                                        bo-title="i18n.core.buttons.add">\r\n                                    <i class="icon-ok"></i>\r\n                                </button>\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="row" ng-if="editables.state == \'addFile\'">\r\n                    <div class="col-xs-12">\r\n                        <div class="col-xs-2 col-sm-10" ago-uploader="uploadOptions()">\r\n                        </div>\r\n                        <button type="button" class="btn pull-right" ng-click="goToState(null)"\r\n                                bo-title="i18n.core.buttons.cancel">\r\n                            <i class="icon-reply"></i>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div class="row" bindonce="i18n.pas">\r\n                <div class="col-lg-6 col-xs-12" ng-if="orders.length > 0">\r\n                    <span class="text-muted" bo-text="i18n.pas.orders.title"></span>\r\n                    <pas-order-cards models="orders" toggle-details="toggleOrderDetails(model)" show-links="true"\r\n                                     one-column="true">\r\n                    </pas-order-cards>\r\n                </div>\r\n                <div class="col-lg-6 col-xs-12" ng-if="docs.length > 0">\r\n                    <span class="text-muted" bo-text="i18n.pas.docs.title"></span>\r\n                    <pas-doc-cards models="docs" toggle-details="toggleDocDetails(model)" show-links="true"\r\n                                   one-column="true">\r\n                    </pas-doc-cards>\r\n                </div>\r\n\r\n                <div class="clearfix visible-lg" ng-if="orders.length > 0 && docs.length > 0"></div>\r\n\r\n                <div class="col-lg-6 col-xs-12" ng-if="objects.length > 0">\r\n                    <span class="text-muted" bo-text="i18n.pas.obj.title"></span>\r\n                    <pas-obj-cards models="objects" toggle-details="toggleObjDetails(model)" show-links="true"\r\n                                   one-column="true">\r\n                    </pas-obj-cards>\r\n                </div>\r\n\r\n                <div class="clearfix visible-lg" ng-if="objects.length > 0 && (docs.length <= 0 || orders.length <= 0)"></div>\r\n\r\n                <div class="col-lg-6 col-xs-12" ng-if="files.length > 0">\r\n                    <span class="text-muted" bo-text="i18n.pas.tasks.links.files"></span>\r\n                    <div>\r\n                        <span bindonce ng-repeat="f in files">\r\n                            <input type="checkbox" class="selector checkbox" ng-model="f.selected" style="display: inline">\r\n                            <i class="icon-paper-clip"></i>\r\n                            <ago-file-link name="f.Name" download-url="downloadUrl(f)" on-error="onDownloadError(f)">\r\n                            </ago-file-link>\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </ago-box-content>\r\n    </ago-box>\r\n</div>\r\n'}),define("pas/directives/taskLinkedRecords",["../moduleDef","angular","text!./taskLinkedRecords.tpl.html"],function(module,angular,tpl){module.directive("pasTaskLinkedRecords",["apinetService","dialogService","i18n","taskStatuses","$stateParams","$state","$controller",function(apinetService,dialogService,i18n,taskStatuses,$stateParams,$state,$controller){return{restrict:"E",template:tpl,controller:["$scope","$rootScope",function($scope,$rootScope){$scope.i18n=$rootScope.i18n}],scope:{taskId:"=",taskNum:"=",input:"=",collapsed:"=",orders:"=",docs:"=",objects:"=",files:"=",enableCreate:"@"},link:function($scope){angular.extend(this,$controller("ErrorHandlingCtrl",{$scope:$scope})),angular.extend(this,$controller("BaseCardsListCtrl",{$scope:$scope,project:$stateParams.project,detailsUrl:null})),$scope.downloadUrl=function(file){return apinetService.downloadUrl("file/"+$stateParams.project+"/"+file.Id,$stateParams.project)},$scope.onDownloadError=function(file){$scope.handleException(i18n.msg("core.errors.downloadError",{file:file.Name}))},$scope.toggleOrderDetails=function(order){$scope.toggleDetails(order,"pas/orders/getOrderDetails")},$scope.toggleDocDetails=function(doc){$scope.toggleDetails(doc,"pas/documents/getDocDetails")},$scope.toggleObjDetails=function(obj){$scope.toggleDetails(obj,"pas/objects/getObjectDetails")},$scope.editables={state:null,order:null,doc:null,object:null,clear:function(){this.state=null,this.order=null,this.doc=null,this.object=null}},$scope.goToState=function(state){$scope.editables.state=state,$scope.editables.state||$scope.editables.clear()};var link=function(params,target){var p=angular.extend({project:$stateParams.project,taskId:$scope.taskId,asInput:!!$scope.input},params);apinetService.action(p).then(function(response){response&&response.validation&&response.validation.success===!0?(target.push(response.model),$scope.editables.clear()):$scope.validation=response.validation},$scope.handleException)};$scope.addOrder=function(){link({method:"pas/tasks/linkOrder",orderId:$scope.editables.order.id},$scope.orders)},$scope.addDoc=function(){link({method:"pas/tasks/linkDocument",docId:$scope.editables.doc.id},$scope.docs)},$scope.addObject=function(){link({method:"pas/tasks/linkObject",objectId:$scope.editables.object.id},$scope.objects)},$scope.removeSelected=function(){dialogService.confirm(i18n.msg("core.confirm.delete.title"),i18n.msg("core.confirm.delete.records")).then(function(){var selected=[],orders=[],docs=[],objects=[],files=[];angular.forEach($scope.orders,function(order){order.selected&&(selected.push(order.Id),orders.push(order))}),angular.forEach($scope.docs,function(doc){doc.selected&&(selected.push(doc.Id),docs.push(doc))}),angular.forEach($scope.objects,function(obj){obj.selected&&(selected.push(obj.Id),objects.push(obj))}),angular.forEach($scope.files,function(file){file.selected&&(selected.push(file.Id),files.push(file))}),selected.length<=0||apinetService.action({method:"pas/tasks/unlinkItems",project:$stateParams.project,taskId:$scope.taskId,ids:selected,fromInput:$scope.input}).then(function(){for(var orderIndex=0;orderIndex<orders.length;orderIndex++){var idx=$scope.orders.indexOf(orders[orderIndex]);$scope.orders.splice(idx,1)}for(var docIndex=0;docIndex<docs.length;docIndex++){var idx=$scope.docs.indexOf(docs[docIndex]);$scope.docs.splice(idx,1)}for(var objIndex=0;objIndex<objects.length;objIndex++){var idx=$scope.objects.indexOf(objects[objIndex]);$scope.objects.splice(idx,1)}for(var fileIndex=0;fileIndex<files.length;fileIndex++){var idx=$scope.files.indexOf(files[fileIndex]);$scope.files.splice(idx,1)}},$scope.handleException)})},$scope.uploadOptions=function(){return{url:apinetService.apiUrl("pas/tasks/uploadIOFiles",$stateParams.project),done:function(e,data){$scope.handleUploadResult(data.result),$scope.$apply()},stop:function(){$scope.editables.clear(),$scope.$apply()},fail:function(e,data){"abort"!==data.errorThrown&&($scope.handleException(data.result.message),$scope.$apply())},submit:function(e,data){angular.extend(data.formData,{project:$stateParams.project,ownerId:$scope.taskNum,asInput:$scope.input})}}},$scope.findIndexById=function(fileId){if(!fileId)return-1;var modelIndex=-1;return angular.forEach($scope.files,function(model,index){model.Id===fileId&&(modelIndex=index)}),modelIndex},$scope.handleUploadResult=function(response){response&&response.files&&response.files.map(function(file){var idx=$scope.findIndexById(file.model.Id);0>idx?$scope.files.push(file.model):$scope.files[idx]=file.model})},$scope.goToNewDoc=function(){$state.go("page.project.pas-docCreate",{task:$scope.taskNum})}}}}])}),define("text!pas/directives/taskFilter.tpl.html",[],function(){return'<div>\r\n<div filters-box="filter" sorters="sorters" meta="pas/tasks/taskMetadata" group="PAS.Task"\r\n     apply-enabled="applyEnabled" apply-filter="applyFilter" reset-filter="resetFilter"\r\n     search-model="filter.simple.search" search-node="{op: \'||\', items: [{path: \'SeqNumber\', op: \'like\'}, {path: \'Content\', op: \'like\'}]}"\r\n     filter-applied="filterApplied" style="padding-top: 5px">\r\n    <form class="form form-horizontal" bindonce="i18n.pas">\r\n        <div class="form-group">\r\n            <label class="col-md-3 control-label" bo-text="i18n.core.filters.favorites"></label>\r\n            <div class="col-md-9">\r\n                <filter-loader filter="filter" group="PAS.Task"></filter-loader>\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label class="col-md-3 control-label" bo-text="i18n.common.tasks.filters.role.title"></label>\r\n            <div class="col-md-9">\r\n                <select ng-model="filter.simple.roleFilter" class="form-control">\r\n                    <option value="any" bo-text="i18n.common.tasks.filters.role.any"></option>\r\n                    <option value="meExecutor" bo-text="i18n.common.tasks.filters.role.meExecutor"></option>\r\n                    <option value="meManager" bo-text="i18n.common.tasks.filters.role.meManager"></option>\r\n                    <option value="meAgreemer" bo-text="i18n.common.tasks.filters.role.meAgreemer"></option>\r\n                </select>\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label class="col-md-3 control-label" bo-text="i18n.common.tasks.filters.state.title"></label>\r\n            <div class="col-md-9">\r\n                <select ng-model="filter.simple.stateFilter" class="form-control">\r\n                    <option value="any" bo-text="i18n.common.tasks.filters.state.any"></option>\r\n                    <option value="overdue" bo-text="i18n.common.tasks.filters.state.overdue"></option>\r\n                    <option value="notClosed" bo-text="i18n.common.tasks.filters.state.notClosed"></option>\r\n                    <option value="completedAndNotAgreed" bo-text="i18n.common.tasks.filters.state.completedAndNotAgreed"></option>\r\n                    <option value="dayLeft" bo-text="i18n.common.tasks.filters.state.dayLeft"></option>\r\n                    <option value="weekLeft" bo-text="i18n.common.tasks.filters.state.weekLeft"></option>\r\n                    <option value="closedToday" bo-text="i18n.common.tasks.filters.state.closedToday"></option>\r\n                    <option value="closedYesterday" bo-text="i18n.common.tasks.filters.state.closedYesterday"></option>\r\n                    <option value="running" bo-text="i18n.common.tasks.filters.state.running"></option>\r\n                </select>\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label class="col-md-3 control-label" bo-text="i18n.pas.tasks.fields.status"></label>\r\n            <div class="col-md-9">\r\n                <input lookup="pas/dictionary/lookupTaskStatuses" ng-model="filter.simple.Status"\r\n                       filter-node="{path: \'Status\', op: \'=\'}" class="form-control" multiple />\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label class="col-md-3 control-label" bo-text="i18n.pas.tasks.filters.statusHistory"></label>\r\n            <div class="col-md-9">\r\n                <input lookup="pas/dictionary/lookupTaskStatuses" ng-model="filter.simple.shStatus"\r\n                       filter-node="{path: \'StatusHistory.Status\', op: \'=\'}" class="form-control" multiple />\r\n                <div class="col-xs-5" style="padding-left: 0; padding-right: 0">\r\n                    <input type="text" ng-model="filter.simple.shLowDate" bs-datepicker\r\n                           filter-node="{path: \'StatusHistory.Start\', op: \'>=\'}" class="form-control" />\r\n                </div>\r\n                <span class="col-xs-1" style="padding: 0; text-align: center; line-height: 35px">-</span>\r\n                <div class="col-xs-5" style="padding-left: 0; padding-right: 0">\r\n                    <input type="text" ng-model="filter.simple.shHighDate" bs-datepicker\r\n                           filter-node="{path: \'StatusHistory.Start\', op: \'<\'}" class="form-control" />\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label class="col-md-3 control-label" bo-text="i18n.pas.tasks.fields.seqNumber"></label>\r\n            <div class="col-md-9">\r\n                <input lookup="pas/tasks/lookupTasks" ng-model="filter.simple.SeqNumber"\r\n                       filter-node="{path: \'Id\', op: \'=\'}" class="form-control" multiple />\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label class="col-md-3 control-label" bo-text="i18n.pas.tasks.fields.type"></label>\r\n            <div class="col-md-9">\r\n                <input lookup="pas/dictionary/lookupTaskTypes" ng-model="filter.simple.TaskType"\r\n                       filter-node="{path: \'Type.FullName\', op: \'like\'}" class="form-control" multiple />\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label class="col-md-3 control-label" bo-text="i18n.pas.tasks.fields.dueDate"></label>\r\n            <div class="col-md-9">\r\n                <!-- Can\'t use filter-node on two ng-models or nested ng-models, so, use this hack filter-node="{path: \'DueDate\', op: \'>=\'}"-->\r\n                <datetimepicker ng-model="filter.simple.lDate.value"></datetimepicker>\r\n                <datetimepicker ng-model="filter.simple.rDate.value"></datetimepicker>\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label class="col-md-3 control-label" bo-text="i18n.pas.tasks.fields.executors"></label>\r\n            <div class="col-md-9">\r\n                <input lookup="core/projects/lookupParticipant" ng-model="filter.simple.Executors"\r\n                       filter-node="{path: \'Executors.Executor.Id\', op: \'=\'}" class="form-control" multiple />\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label class="col-md-3 control-label" bo-text="i18n.pas.tasks.fields.content"></label>\r\n            <div class="col-md-9">\r\n                <input type="text" ng-model="filter.simple.Content"\r\n                       filter-node="{path: \'Content\', op:\'like\'}" class="form-control"  />\r\n            </div>\r\n        </div>\r\n    </form>\r\n\r\n    <filters-box-more-filters>\r\n        <ago-box color="muted" border="muted" caption="{{ i18n.core.filters.user }}" title-click-collapse padding collapsed="propsFilterCollapsed">\r\n            <div user-filter filter-ng-model="filter.user"></div>\r\n        </ago-box>\r\n    </filters-box-more-filters>\r\n</div>\r\n</div>'
}),define("pas/directives/taskFilter",["../moduleDef","angular","text!./taskFilter.tpl.html"],function(module,angular,tpl){module.directive("pasTaskFilter",[function(){return{restrict:"E",replace:!0,template:tpl,scope:!1}}])}),define("pas/directives/details/factory",["../../moduleDef","angular"],function(module){return function(name,template){module.directive(name,["$timeout","apinetService","$stateParams",function($timeout,apinetService,$stateParams){return{restrict:"E",replace:!0,template:template,controller:["$scope","$rootScope",function($scope,$rootScope){$scope.i18n=$rootScope.i18n}],scope:{item:"=",toggleDetails:"&"},link:function($scope){$scope.downloadUrl=function(file){return apinetService.downloadUrl("file/"+$stateParams.project+"/"+file.id,$stateParams.project)}}}}])}}),define("text!pas/directives/details/docDetails.tpl.html",[],function(){return'<div ng-show="item.details.expanded">\r\n    <span ng-hide="item.details.loaded" bindonce="i18n.core" bo-text="i18n.core.labels.loading + \'...\'"></span>\r\n    <form class="form-horizontal" ng-show="item.details.loaded" bindonce="item">\r\n        <div class="row">\r\n\r\n            <!--Object-->\r\n            <ago-details-item label="i18n.pas.docs.fields.object" ng-show="item.details.Object">\r\n                <p class="form-control-static" bindonce="item.details.Object" bo-text="item.details.Object.text"></p>\r\n            </ago-details-item>\r\n        </div>\r\n    </form>\r\n</div>\r\n'}),define("pas/directives/details/docDetails",["./factory","text!./docDetails.tpl.html"],function(factory,tpl){factory("pasDocDetails",tpl)}),define("text!pas/directives/details/objDetails.tpl.html",[],function(){return'<div ng-show="item.details.expanded">\r\n    <span ng-hide="item.details.loaded" bindonce="i18n.core" bo-text="i18n.core.labels.loading + \'...\'"></span>\r\n    <form class="form-horizontal" ng-show="item.details.loaded" bindonce="item">\r\n        <div class="row">\r\n            <!--TODO-->\r\n            <!--<ago-details-item label="i18n.pas.obj.fields.docs" ng-show="item.details.Documents">-->\r\n                <!--<span bindonce ng-repeat="d in item.details.Documents">-->\r\n                    <!--<i class="icon-file-text"></i>-->\r\n                    <!--<span bo-text="d.text"></span>-->\r\n                <!--</span>-->\r\n            <!--</ago-details-item>-->\r\n        </div>\r\n    </form>\r\n</div>\r\n'}),define("pas/directives/details/objDetails",["./factory","text!./objDetails.tpl.html"],function(factory,tpl){factory("pasObjDetails",tpl)}),define("text!pas/directives/details/orderDetails.tpl.html",[],function(){return'<div ng-show="item.details.expanded">\r\n    <span ng-hide="item.details.loaded" bindonce="i18n.core" bo-text="i18n.core.labels.loading + \'...\'"></span>\r\n    <form class="form-horizontal" ng-show="item.details.loaded" bindonce="item">\r\n        <div class="row">\r\n\r\n            <ago-details-item label="i18n.core.customProps.title" large="true" ng-show="item.details.Parameters">\r\n                <table class="table">\r\n                    <tbody>\r\n                    <tr ng-repeat="p in item.details.Parameters">\r\n                        <td>{{ p.Type.text }}</td>\r\n                        <td>{{ p.Value }}</td>\r\n                    </tr>\r\n                    </tbody>\r\n                </table>\r\n            </ago-details-item>\r\n\r\n            <ago-details-item label="i18n.pas.orders.fields.agreements" ng-show="item.details.Agreements">\r\n                <span ng-repeat="a in item.details.Agreements">\r\n                    <div style="white-space: nowrap">\r\n                        <i bo-class="{\'icon-check\': a.Done, \'icon-check-empty\': !a.Done}"></i>\r\n                        <span bo-text="a.Agreemer"></span>\r\n                        <expiration visible="!a.Done && a.ExpirationDays" expired="a.IsExpired" days="a.ExpirationDays">\r\n                        </expiration>\r\n                    </div>\r\n                    <em bo-if="a.AgreedAt" bo-text="a.AgreedAt | date:\'ago_date\'"></em>\r\n                    <small bo-if="a.Comment" bo-text="\' (\' + a.Comment + \')\'"></small>\r\n                </span>\r\n            </ago-details-item>\r\n\r\n            <ago-details-item label="\'pas.orders.fields.topFiles\' | i18n:{ count: 5 }" ng-show="item.details.Files">\r\n                <span bindonce ng-repeat="f in item.details.Files">\r\n                    <i class="icon-paper-clip"></i>\r\n                    <ago-file-link  name="f.text" download-url="downloadUrl(f)"></ago-file-link>\r\n                </span>\r\n            </ago-details-item>\r\n        </div>\r\n    </form>\r\n</div>\r\n'}),define("pas/directives/details/orderDetails",["./factory","text!./orderDetails.tpl.html"],function(factory,tpl){factory("pasOrderDetails",tpl)}),define("pas/directives/short-info/baseInfo",["../../moduleDef","angular"],function(module,angular){return function(name,template,statusViewSettings,method){module.directive(name,["$rootScope","$stateParams","apinetService","$injector",function(){return{restrict:"E",replace:!0,template:template,scope:{num:"@",loading:"=",onError:"&"},controller:["$scope","$rootScope","$stateParams","apinetService","$injector",function($scope,$rootScope,$stateParams,apinetService,$injector){$scope.i18n=$rootScope.i18n,angular.isDefined(statusViewSettings)&&null!=statusViewSettings&&($scope.vs=$injector.get(statusViewSettings)),$scope.$watch("num",function(){$scope.num&&($scope.loading&&($scope.loading=!0),apinetService.action({method:method,project:$stateParams.project,num:$scope.num}).then(function(response){$scope.model=response,$scope.loading&&($scope.loading=!1)},function(error){if($scope.loading&&($scope.loading=!1),!angular.isFunction($scope.onError))throw error;$scope.onError({error:error})}))})}]}}])}}),define("text!pas/directives/short-info/taskInfo.tpl.html",[],function(){return'<div class="row">\r\n    <div class="col-xs-12">\r\n        <pas-task-num num="model.SeqNumber"></pas-task-num>\r\n        <span>{{ model.Type }}</span>\r\n\r\n        <ago-status-btn status="model.Status" class="disabled pull-right" view-settins="vs"></ago-status-btn>\r\n\r\n        <span ng-if="model.Content">\r\n            <span class="clip-content">{{ model.Content }}</span>\r\n        </span>\r\n    </div>\r\n\r\n    <div class="clearfix"></div>\r\n\r\n    <div class="col-xs-12">\r\n        <pas-executors model="model.Executors"></pas-executors>\r\n        <em ng-if="model.DueDate" style="margin-left: 5px">{{ model.DueDate | date:\'ago_date\' }}</em>\r\n    </div>\r\n</div>\r\n'}),define("pas/directives/short-info/taskInfo",["./baseInfo","text!./taskInfo.tpl.html"],function(factory,tpl){factory("pasTaskInfo",tpl,"taskStatusViewSettings","pas/tasks/getTaskInfo")}),define("text!pas/directives/short-info/docInfo.tpl.html",[],function(){return'<div class="row">\r\n    <div class="col-xs-12">\r\n        <pas-doc-num num="model.SeqNumber"></pas-doc-num>\r\n        <span>{{ model.Type }}</span>\r\n\r\n        <ago-status-btn status="model.Status" class="disabled pull-right" view-settins="vs"></ago-status-btn>\r\n\r\n        <span ng-if="model.Content">\r\n            <span class="clip-content">{{ model.Content }}</span>\r\n        </span>\r\n    </div>\r\n</div>\r\n'}),define("pas/directives/short-info/docInfo",["./baseInfo","text!./docInfo.tpl.html"],function(factory,tpl){factory("pasDocInfo",tpl,"documentStatusViewSettings","pas/documents/getDocumentInfo")}),define("text!pas/directives/short-info/orderInfo.tpl.html",[],function(){return'<div class="row">\r\n    <div class="col-xs-12">\r\n        <pas-order-num num="model.SeqNumber"></pas-order-num>\r\n        <span>{{ model.FromCompany }}</span>\r\n\r\n        <ago-status-btn status="model.Status" class="disabled pull-right" view-settins="vs"></ago-status-btn>\r\n\r\n        <span ng-if="model.ToCompany">\r\n            {{ model.ToCompany }}\r\n        </span>\r\n    </div>\r\n</div>\r\n'}),define("pas/directives/short-info/orderInfo",["./baseInfo","text!./orderInfo.tpl.html"],function(factory,tpl){factory("pasOrderInfo",tpl,"orderStatusViewSettings","pas/orders/getOrderInfo")}),define("text!pas/directives/short-info/objectInfo.tpl.html",[],function(){return'<div class="row" bindonce="model">\r\n    <div class="col-xs-12">\r\n        <pas-obj-num num="model.SeqNumber"></pas-obj-num>\r\n\r\n        <span bo-text="model.Type"></span>\r\n        <strong bo-text="model.CadastralNumber || i18n.msg(\'pas.obj.empty.cadastralNumber\')"></strong>\r\n    </div>\r\n\r\n    <div class="clearfix" bo-if="model.Addresses"></div>\r\n\r\n    <div class="col-xs-12" bo-if="model.Addresses">\r\n        <pas-addresses model="model.Addresses"></pas-addresses>\r\n    </div>\r\n</div>\r\n'}),define("pas/directives/short-info/objectInfo",["./baseInfo","text!./objectInfo.tpl.html"],function(factory,tpl){factory("pasObjectInfo",tpl,null,"pas/objects/getObjectInfo")}),define("pas/directives/go-num/baseGoNum",["../../moduleDef","angular"],function(module){return function(name,template){module.directive(name,["$rootScope","$stateParams",function(){return{restrict:"E",replace:!0,template:template,scope:{num:"=",gonum:"="}}}])}}),define("text!pas/directives/go-num/taskNum.tpl.html",[],function(){return'<a ui-sref="page.project.pas-taskProps({ num: gonum || num })" class="btn btn-sm btn-warning">\r\n    <strong>{{ num || \'…\' }}</strong>\r\n</a>\r\n'}),define("pas/directives/go-num/taskNum",["./baseGoNum","text!./taskNum.tpl.html"],function(factory,tpl){factory("pasTaskNum",tpl)}),define("text!pas/directives/go-num/docNum.tpl.html",[],function(){return'<a ui-sref="page.project.pas-docProps({ num: gonum || num })" class="btn btn-sm btn-primary">\r\n    <strong>{{ num || \'…\' }}</strong>\r\n</a>\r\n'}),define("pas/directives/go-num/docNum",["./baseGoNum","text!./docNum.tpl.html"],function(factory,tpl){factory("pasDocNum",tpl)}),define("text!pas/directives/go-num/objNum.tpl.html",[],function(){return'<a ui-sref="page.project.pas-objectProps({ num: gonum || num })" class="btn btn-sm btn-info">\r\n    <strong>{{ num || \'…\' }}</strong>\r\n</a>\r\n'}),define("pas/directives/go-num/objNum",["./baseGoNum","text!./objNum.tpl.html"],function(factory,tpl){factory("pasObjNum",tpl)}),define("text!pas/directives/go-num/orderNum.tpl.html",[],function(){return'<a ui-sref="page.project.pas-orderProps({ num: gonum || num })" class="btn btn-sm btn-success">\r\n    <strong>{{ num || \'…\' }}</strong>\r\n</a>\r\n'}),define("pas/directives/go-num/orderNum",["./baseGoNum","text!./orderNum.tpl.html"],function(factory,tpl){factory("pasOrderNum",tpl)}),define("pas/directives/linked-items/factory",["../../moduleDef","angular"],function(module){return function(name,template){module.directive(name,[function(){return{restrict:"E",replace:!0,template:template,scope:{num:"=",items:"=",icon:"@"}}}])}}),define("text!pas/directives/linked-items/linkedDocs.tpl.html",[],function(){return'<div class="col-xs-12">\r\n    <a ui-sref="page.project.pas-objectDocs({ num: num })">\r\n        <h4>\r\n            <i class="pull-left {{ icon }}"></i>\r\n        </h4>\r\n    </a>\r\n    <ul class="links">\r\n        <li ng-repeat="i in items" bindonce>\r\n            <a class="badge badge-primary" ui-sref="page.project.pas-docProps({ num: i.SeqNumber })">\r\n                <span bo-text="i.SeqNumber"></span>&nbsp;<span bo-text="i.Type"></span>\r\n            </a>\r\n        </li>\r\n    </ul>\r\n</div>\r\n'}),define("pas/directives/linked-items/linkedDocs",["./factory","text!./linkedDocs.tpl.html"],function(factory,tpl){factory("pasLinkedDocs",tpl)}),define("text!pas/directives/linked-items/taskLinkedItems.tpl.html",[],function(){return'<ul class="links">\r\n    <li>\r\n        <a ui-sref="page.project.pas-taskProps({ num: num })">\r\n            <i class="{{ icon }}"></i>\r\n        </a>\r\n    </li>\r\n    <li ng-repeat="i in items" bindonce ng-switch on="i.ItemType">\r\n        <a ng-switch-when="Order" class="badge badge-success" ui-sref="page.project.pas-orderProps({ num: i.SeqNumber })">\r\n            <i class="icon-pushpin" bo-if="i.SeqNumber == context"></i>&nbsp;\r\n            <span bo-text="i.SeqNumber"></span>&nbsp;<span bo-text="i.FromCompany"></span>\r\n        </a>\r\n\r\n        <a ng-switch-when="Document" class="badge badge-primary" ui-sref="page.project.pas-docProps({ num: i.SeqNumber })">\r\n            <i class="icon-pushpin" bo-if="i.SeqNumber == context"></i>&nbsp;\r\n            <span bo-text="i.SeqNumber"></span>&nbsp;<span bo-text="i.Type"></span>\r\n        </a>\r\n\r\n        <a ng-switch-when="Object" class="badge badge-info" ui-sref="page.project.pas-objectProps({ num: i.SeqNumber })">\r\n            <i class="icon-pushpin" bo-if="i.SeqNumber == context"></i>&nbsp;\r\n            <span bo-text="i.SeqNumber"></span>&nbsp;<span bo-text="i.Type"></span>&nbsp;<span bo-text="Info"></span>\r\n        </a>\r\n\r\n        <span ng-switch-default>\r\n            <i class="icon-paper-clip"></i>\r\n            <ago-file-link name="i.Name" download-url="downloadUrl(i)">\r\n            </ago-file-link>\r\n        </span>\r\n    </li>\r\n    <li>\r\n        <a ui-sref="page.project.pas-taskProps({ num: num })"\r\n           ng-if="more > 0"\r\n           bo-text="\'pas.tasks.links.moreItems\' | i18n:{num: more}"></a>\r\n    </li>\r\n</ul>\r\n'}),define("pas/directives/linked-items/taskLinkedItems",["../../moduleDef","angular","text!./taskLinkedItems.tpl.html"],function(module,angular,tpl){module.directive("pasTaskLinkedItems",["apinetService","$stateParams",function(apinetService,$stateParams){return{restrict:"E",replace:!0,template:tpl,scope:{num:"=",items:"=",icon:"@",more:"="},controller:["$scope","$rootScope",function($scope,$rootScope){$scope.i18n=$rootScope.i18n,$scope.context=$stateParams.num}],link:function($scope){$scope.downloadUrl=function(file){return apinetService.downloadUrl("file/"+$stateParams.project+"/"+file.Id,$stateParams.project)}}}}])}),define("text!pas/directives/linked-items/orderTasks.tpl.html",[],function(){return'<div>\r\n    <ul class="links">\r\n        <li>\r\n            <a ui-sref="page.project.pas-orderTasks({ num: num })" bo-title="i18n.pas.orders.orderTasks">\r\n                <i class="icon-tasks"></i>\r\n                <span class="badge" bo-text="open + \' / \' + all"\r\n                      bo-title="i18n.pas.orders.tasksCounter"></span>\r\n            </a>\r\n        </li>\r\n        <li ng-repeat="i in items" bindonce>\r\n            <a class="badge {{ viewSettings[i.Status.id].badgeClass }}" ui-sref="page.project.pas-taskProps({ num: i.SeqNumber })">\r\n                <span bo-text="i.SeqNumber"></span>&nbsp;<i class="{{viewSettings[i.Status.id].icon}}"></i>&nbsp;<span bo-text="i.Type"></span>\r\n            </a>\r\n        </li>\r\n        <li>\r\n            <a ui-sref="page.project.pas-orderProps({ num: num })"\r\n               ng-if="more > 0"\r\n               bo-text="\'pas.tasks.links.moreItems\' | i18n:{num: more}"></a>\r\n        </li>\r\n    </ul>\r\n</div>\r\n'}),define("pas/directives/linked-items/orderTasks",["../../moduleDef","angular","text!./orderTasks.tpl.html"],function(module,angular,tpl){module.directive("pasOrderTasks",[function(){return{restrict:"E",replace:!0,template:tpl,scope:{num:"=",items:"=",open:"=",all:"=",more:"="},controller:["$scope","$rootScope","taskStatusViewSettings",function($scope,$rootScope,vs){$scope.i18n=$rootScope.i18n,$scope.viewSettings=vs}]}}])}),define("text!pas/states/order/unit/unitHeader.tpl.html",[],function(){return'<tr bindonce="i18n.pas.unit">\r\n    <th class="col-xs-12 col-sm-6" bo-text="i18n.core.fields.name"></th>\r\n    <th class="hidden-xs col-sm-3" bo-text="i18n.pas.unit.fields.type"></th>\r\n    <th class="hidden-xs col-sm-3" bo-text="i18n.pas.unit.fields.abbr"></th>\r\n</tr>\r\n'}),define("pas/states/order/unit/unitHeader",["../../../moduleDef","angular","text!./unitHeader.tpl.html"],function(module,angular,tpl){module.directive("pasUnitHeader",function(){return{restrict:"E",replace:!0,template:tpl}})}),define("text!pas/states/order/unit/unitColumn.tpl.html",[],function(){return'<tr>\r\n    <td class="col-xs-12 col-sm-6">\r\n        <inline-text model="m.Name" view-model="m.Name" on-update="updateProp(m, \'Name\', val)" on-cancel="onCancel(m)"\r\n             required></inline-text>\r\n        <span ng-show="m.validation.generalErrors" class="help-block has-error">\r\n            {{ m.validation.generalErrors | joinBy }}\r\n        </span>\r\n        <span ng-show="m.validation.fieldErrors[\'Name\']" class="help-block has-error">\r\n            {{ m.validation.fieldErrors[\'Name\'] | joinBy }}\r\n        </span>\r\n\r\n        <small class="visible-xs text-muted">{{ m.Type.text }}, {{ m.Abbr }}</small>\r\n    </td>\r\n    <td class="hidden-xs col-sm-3">\r\n        <inline-lookup model="m.Type" view-model="m.Type" on-update="updateProp(m, \'Type\', val)" on-cancel="onCancel(m)"\r\n               input-lookup="pas/dictionary/lookupUnitTypes" required></inline-lookup>\r\n        <span ng-show="m.validation.generalErrors" class="help-block has-error">\r\n            {{ m.validation.generalErrors | joinBy }}\r\n        </span>\r\n        <span ng-show="m.validation.fieldErrors[\'Type\']" class="help-block has-error">\r\n            {{ m.validation.fieldErrors[\'Type\'] | joinBy }}\r\n        </span>\r\n    </td>\r\n    <td class="hidden-xs col-sm-3">\r\n        <inline-text model="m.Abbr" view-model="m.Abbr" on-update="updateProp(m, \'Abbr\', val)" on-cancel="onCancel(m)"\r\n                     required></inline-text>\r\n        <span ng-show="m.validation.generalErrors" class="help-block has-error">\r\n            {{ m.validation.generalErrors | joinBy }}\r\n        </span>\r\n        <span ng-show="m.validation.fieldErrors[\'Abbr\']" class="help-block has-error">\r\n            {{ m.validation.fieldErrors[\'Abbr\'] | joinBy }}\r\n        </span>\r\n    </td>\r\n</tr>\r\n'}),define("pas/states/order/unit/unitColumn",["../../../moduleDef","angular","text!./unitColumn.tpl.html"],function(module,angular,tpl){module.directive("pasUnitColumn",function(){return{restrict:"E",replace:!0,template:tpl}})}),define("text!pas/states/order/unit/unitAddForm.tpl.html",[],function(){return'<form name="createUnitForm" class="form form-horizontal" novalidate>\r\n    <!--Name-->\r\n    <ago-new-form-item label="i18n.core.fields.name" field="Name" control="createUnitForm.Name" vld="validation">\r\n        <input name="Name" type="text" class="form-control" ng-model="model.name" required>\r\n    </ago-new-form-item>\r\n\r\n    <!--Type-->\r\n    <ago-new-form-item label="i18n.pas.unit.fields.type" field="Type"\r\n                       control="createUnitForm.Type" vld="validation">\r\n        <input name="Type" type="text" class="form-control" ng-model="model.type"\r\n               lookup="pas/dictionary/lookupUnitTypes" required\r\n               placeholder="{{ i18n.pas.unit.placeholders.type }}">\r\n    </ago-new-form-item>\r\n\r\n    <!--Abbr-->\r\n    <ago-new-form-item label="i18n.pas.unit.fields.abbr" field="Abbr" control="createUnitForm.Abbr"\r\n                       vld="validation">\r\n        <input name="Abbr" type="text" class="form-control" ng-model="model.abbr" required>\r\n    </ago-new-form-item>\r\n\r\n    <div class="form-actions form-actions-padding-sm">\r\n        <div class="row">\r\n            <div class="col-md-10 col-md-offset-2" bindonce="i18n.core">\r\n                <button type="button" class="btn" ng-click="onCancel()" bo-text="i18n.core.buttons.cancel"></button>\r\n                <button type="button" class="btn btn-success" ng-click="onUpdate()" bo-text="i18n.core.buttons.save"\r\n                        ng-disabled="createUnitForm.$invalid"></button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</form>\r\n'}),define("pas/states/order/unit/unitAddForm",["../../../moduleDef","angular","text!./unitAddForm.tpl.html"],function(module,angular,tpl){module.directive("pasUnitAddForm",function(){return{restrict:"E",replace:!0,template:tpl,scope:{model:"=",validation:"=vld",onUpdate:"&",onCancel:"&"},controller:["$scope","$rootScope",function($scope,$rootScope){$scope.i18n=$rootScope.i18n}]}})}),define("text!pas/states/order/service-type/serviceTypeHeader.tpl.html",[],function(){return'<tr bindonce="i18n.pas.serviceType">\r\n    <th class="col-xs-12 col-sm-8 col-md-6" bo-text="i18n.core.fields.name"></th>\r\n    <th class="hidden-xs col-sm-2 col-md-2" bo-text="i18n.pas.serviceType.fields.unit"></th>\r\n    <th class="hidden-xs col-sm-2 col-md-2" bo-text="i18n.pas.serviceType.fields.cost"></th>\r\n</tr>\r\n'}),define("pas/states/order/service-type/serviceTypeHeader",["../../../moduleDef","angular","text!./serviceTypeHeader.tpl.html"],function(module,angular,tpl){module.directive("pasServiceTypeHeader",function(){return{restrict:"E",replace:!0,template:tpl}})}),define("text!pas/states/order/service-type/serviceTypeColumn.tpl.html",[],function(){return'<tr>\r\n    <td class="col-xs-12 col-sm-8 col-md-6" style="white-space: normal">\r\n        <inline-text model="m.Name" view-model="m.FullName" on-update="updateProp(m, \'Name\', val)" on-cancel="onCancel(m)"\r\n                     required></inline-text>\r\n        <span ng-show="m.validation.generalErrors" class="help-block has-error">\r\n            {{ m.validation.generalErrors | joinBy }}\r\n        </span>\r\n        <span ng-show="m.validation.fieldErrors[\'Name\']" class="help-block has-error">\r\n            {{ m.validation.fieldErrors[\'Name\'] | joinBy }}\r\n        </span>\r\n\r\n        <small class="visible-xs text-muted">{{ m.DefaultUnit.text }} {{ m.DefaultCost }}</small>\r\n    </td>\r\n    <td class="hidden-xs col-sm-2 col-md-2">\r\n        <inline-lookup model="m.DefaultUnit" view-model="m.DefaultUnit" on-update="updateProp(m, \'DefaultUnit\', val)"\r\n           on-cancel="onCancel(m)" input-lookup="pas/dictionary/lookupUnits" input-lookup-options="allowClear: true"\r\n           placeholder="{{ i18n.pas.serviceType.placeholders.unit }}"></inline-lookup>\r\n        <span ng-show="m.validation.generalErrors" class="help-block has-error">\r\n            {{ m.validation.generalErrors | joinBy }}\r\n        </span>\r\n        <span ng-show="m.validation.fieldErrors[\'DefaultUnit\']" class="help-block has-error">\r\n            {{ m.validation.fieldErrors[\'DefaultUnit\'] | joinBy }}\r\n        </span>\r\n    </td>\r\n    <td class="hidden-xs col-sm-2 col-md-2">\r\n        <inline-text model="m.DefaultCost" view-model="m.DefaultCost" on-update="updateProp(m, \'DefaultCost\', val)"\r\n            on-cancel="onCancel(m)"></inline-text>\r\n        <span ng-show="m.validation.generalErrors" class="help-block has-error">\r\n            {{ m.validation.generalErrors | joinBy }}\r\n        </span>\r\n        <span ng-show="m.validation.fieldErrors[\'DefaultCost\']" class="help-block has-error">\r\n            {{ m.validation.fieldErrors[\'DefaultCost\'] | joinBy }}\r\n        </span>\r\n    </td>\r\n</tr>\r\n'}),define("pas/states/order/service-type/serviceTypeColumn",["../../../moduleDef","angular","text!./serviceTypeColumn.tpl.html"],function(module,angular,tpl){module.directive("pasServiceTypeColumn",function(){return{restrict:"E",replace:!0,template:tpl}})}),define("text!pas/states/order/service-type/serviceTypeAddForm.tpl.html",[],function(){return'<form name="form" class="form form-horizontal" novalidate>\r\n    <!--Parent-->\r\n    <ago-new-form-item label="i18n.core.fields.predecessor" field="Parent" control="form.Parent" vld="validation">\r\n        <input name="Parent" type="text" class="form-control" ng-model="model.parent"\r\n               lookup="pas/dictionary/lookupServiceTypes"\r\n               placeholder="{{ i18n.pas.serviceType.placeholders.parent }}">\r\n    </ago-new-form-item>\r\n\r\n    <!--Name-->\r\n    <ago-new-form-item label="i18n.core.fields.name" field="Name" control="form.Name" vld="validation">\r\n        <input name="Name" type="text" class="form-control" ng-model="model.name" required>\r\n    </ago-new-form-item>\r\n\r\n    <!--DefaultUnit-->\r\n    <ago-new-form-item label="i18n.pas.serviceType.fields.unit" field="DefaultUnit"\r\n                       control="form.Unit" vld="validation">\r\n        <input name="Unit" type="text" class="form-control" ng-model="model.unit"\r\n               lookup="pas/dictionary/lookupUnits" lookup-options="{allowClear: true}"\r\n               placeholder="{{ i18n.pas.serviceType.placeholders.unit }}">\r\n        <span class="help-block">{{ i18n.pas.serviceType.byDefault }}</span>\r\n    </ago-new-form-item>\r\n\r\n    <!--DefaultCose-->\r\n    <ago-new-form-item label="i18n.pas.serviceType.fields.cost" field="DefaultCost" control="form.Cost"\r\n                       vld="validation">\r\n        <input name="Cost" type="text" class="form-control" ng-model="model.cost">\r\n        <span class="help-block">{{ i18n.pas.serviceType.byDefault }}</span>\r\n    </ago-new-form-item>\r\n\r\n    <div class="form-actions form-actions-padding-sm">\r\n        <div class="row">\r\n            <div class="col-md-10 col-md-offset-2" bindonce="i18n.core">\r\n                <button type="button" class="btn" ng-click="onCancel()" bo-text="i18n.core.buttons.cancel"></button>\r\n                <button type="button" class="btn btn-success" ng-click="onUpdate()" bo-text="i18n.core.buttons.save"\r\n                        ng-disabled="form.$invalid"></button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</form>\r\n'}),define("pas/states/order/service-type/serviceTypeAddForm",["../../../moduleDef","angular","text!./serviceTypeAddForm.tpl.html"],function(module,angular,tpl){module.directive("pasServiceTypeAddForm",function(){return{restrict:"E",replace:!0,template:tpl,scope:{model:"=",validation:"=vld",onUpdate:"&",onCancel:"&"},controller:["$scope","$rootScope",function($scope,$rootScope){$scope.i18n=$rootScope.i18n}]}})}),define("pas/directives",["./directives/taskCards","./directives/executorsView","./directives/docCards","./directives/objCards","./directives/addressesView","./directives/orderCards","./directives/servicesView","./directives/taskLinkedRecords","./directives/taskFilter","./directives/details/docDetails","./directives/details/objDetails","./directives/details/orderDetails","./directives/short-info/taskInfo","./directives/short-info/docInfo","./directives/short-info/orderInfo","./directives/short-info/objectInfo","./directives/go-num/taskNum","./directives/go-num/docNum","./directives/go-num/objNum","./directives/go-num/orderNum","./directives/linked-items/linkedDocs","./directives/linked-items/taskLinkedItems","./directives/linked-items/orderTasks","./states/order/unit/unitHeader","./states/order/unit/unitColumn","./states/order/unit/unitAddForm","./states/order/service-type/serviceTypeHeader","./states/order/service-type/serviceTypeColumn","./states/order/service-type/serviceTypeAddForm"],function(){}),define("pas/services/tabs",["../moduleDef"],function(module){var mi=function(name,sref,code,all,unread){return{name:name,sref:sref,code:code,allProp:all,unreadProp:unread}};module.service("pas.taskTabs",[function(){return function(num){return{items:[mi("props","page.project.pas-taskProps({num: '"+num+"'})","pas.tabs.props",void 0,"HasPropChanges"),mi("subtasks","page.project.pas-taskSubtasks({num: '"+num+"'})","pas.tabs.subtasks","SubtasksCount","HasSubtasksChanges"),mi("comments","page.project.pas-taskComments({num: '"+num+"'})","pas.tabs.comments","CommentsCount","HasCommentsChanges"),mi("files","page.project.pas-taskFiles({num: '"+num+"'})","pas.tabs.files","FilesCount","HasFilesChanges"),mi("activity","page.project.pas-taskActivity({num: '"+num+"'})","core.activities.title","ActivitiesCount","HasUnreadActivities")],action:"pas/tasks/getCounters",params:{task:num}}}}]),module.service("pas.objectTabs",[function(){return function(num){return{items:[mi("props","page.project.pas-objectProps({num: '"+num+"'})","pas.tabs.props",void 0,"HasPropChanges"),mi("docs","page.project.pas-objectDocs({num: '"+num+"'})","pas.tabs.docs","DocsCount","HasDocsChanges"),mi("map","page.project.pas-objectMap({num: '"+num+"'})","pas.tabs.map"),mi("files","page.project.pas-objectFiles({num: '"+num+"'})","pas.tabs.files","FilesCount","HasFilesChanges"),mi("activity","page.project.pas-objectActivity({num: '"+num+"'})","core.activities.title","ActivitiesCount","HasUnreadActivities")],action:"pas/objects/getCounters",params:{obj:num}}}}]),module.service("pas.docTabs",[function(){return function(num){return{items:[mi("props","page.project.pas-docProps({num: '"+num+"'})","pas.tabs.props",void 0,"HasPropChanges"),mi("files","page.project.pas-docFiles({num: '"+num+"'})","pas.tabs.files","FilesCount","HasFilesChanges"),mi("activity","page.project.pas-docActivity({num: '"+num+"'})","core.activities.title","ActivitiesCount","HasUnreadActivities")],action:"pas/documents/getCounters",params:{doc:num}}}}]),module.service("pas.projectTabs",[function(){return function(num){return{items:[mi("props","page.project.pas-projProps({project: '"+num+"'})","pas.tabs.props",void 0,"HasPropChanges"),mi("members","page.project.pas-projMembers({project: '"+num+"'})","pas.tabs.members","MembersCount"),mi("ous","page.project.pas-projOUs({project: '"+num+"'})","pas.tabs.ous","OUsCount"),mi("invite","page.project.pas-projInvitations({project: '"+num+"'})","projects.settings.tabs.invitations","InvitationsCount"),mi("templates","page.project.templates.pas({project: '"+num+"'})","pas.tabs.templates","TemplatesCount")],action:"pas/project/getCounters"}}}]),module.service("pas.orderTabs",[function(){return function(num){return{items:[mi("props","page.project.pas-orderProps({num: '"+num+"'})","pas.tabs.props",void 0,"HasPropChanges"),mi("tasks","page.project.pas-orderTasks({num: '"+num+"'})","pas.tabs.tasks","TasksCount","HasTasksChanges"),mi("docs","page.project.pas-orderDocs({num: '"+num+"'})","pas.tabs.docs","DocsCount"),mi("comments","page.project.pas-orderComments({num: '"+num+"'})","pas.tabs.comments","CommentsCount","HasCommentsChanges"),mi("files","page.project.pas-orderFiles({num: '"+num+"'})","pas.tabs.files","FilesCount","HasFilesChanges"),mi("activity","page.project.pas-orderActivity({num: '"+num+"'})","core.activities.title","ActivitiesCount","HasUnreadActivities")],action:"pas/orders/getCounters",params:{order:num}}}}])}),define("pas/services/newModelsService",["../moduleDef","angular"],function(module){module.factory("pas.newModels",[function(){var newOrderModel=null,newTaskModel=null,newDocModel=null,newObjModel=null;return{order:function(m){return m&&(newOrderModel=m),newOrderModel},task:function(m){return m&&(newTaskModel=m),newTaskModel},doc:function(m){return m&&(newDocModel=m),newDocModel},obj:function(m){return m&&(newObjModel=m),newObjModel}}}])}),define("pas/services",["./services/tabs","./services/newModelsService"],function(){}),define("pas/nls/en/module",["../../moduleDef"],function(module){module.service("pas/nls/module/en",["i18n",function(i18n){return function(){i18n.addMessages("pas",{menu:{dictionaries:"Dictionaries"},tasks:{title:"Tasks",filters:{custom:"Predefinded",predefined:{all:"All tasks",meExecutorAndNotClosed:"I am an executor",meManagerAndNotClosed:"I am a manager",meAgreemerAndNotAgreed:"Need an agreement",notClosed:"Not closed",overdue:"Overdue tasks",dayLeft:"1 day to deadline",weekLeft:"1 week to deadline",closedToday:"Closed today",closedYesterday:"Closed yesterday",running:"Running"},statusHistory:"Status history"},fields:{status:"Status",seqNumber:"Seq number",type:"Type",startDate:"Start date",dueDate:"Finish date",estimatedTime:"Estimated time, h",predecessors:"Predecessors",predecessorsByStart:"Start with",predecessorsByEnd:"Start after",managers:"Managers",executors:"Executors",content:"Content",agreements:"Agreements",topFiles:"Files (top {{count}})",primary:"Primary task",executorCanCloseTask:"Executor can close task"},canClose:{allowed:"Allowed",restricted:"Forbidden"},create:{title:"New task",placeholders:{type:"Select task type",predecessors:"Select tasks"},constraints:"Constraints",newSubTask:"New subtask",primaryTask:"Main task",useTask:"Create as subtask for this task",linkedDoc:"Input document",order:"Order",linkedObject:"Input object",useLink:"Link with task",afterCreation:"After creation",goToPrimary:"Navigate to main task",goToTask:"Navigate to created task",goToList:"Navigate to task list",stayHere:"Create another task",byStart:"By start",byEnd:"By finish",byStartDependencies:"Start with",byEndDependencies:"Start after"},props:{title:"Properties",selectOrder:"Select order..."},docs:{newDoc:"Create document (output) for this task",unlink:"Unlink",confirmTitle:"Confirm unlink documents",confirmText:"Are you really want to unlink this documents?"},comments:{title:"Comments",placeholder:"Type new comment...",fields:{text:"Comment"}},links:{input:"Input",output:"Output",files:"Files",buttons:{dropdown:"Action",addOrder:"Add order",addDoc:"Add document",addObject:"Add object",addFile:"Add file",newDoc:"New document",remove:"Remove selected"},placeholder:"Select item...",moreItems:"(+{{num}} more)"},subtasks:{title:"Subtasks"}},orders:{title:"Orders",tasksCounter:"Tasks (open / total)",tasksWarning:"No running tasks",orderTasks:"Order tasks",filters:{custom:"Predefinded",predefined:{all:"All orders",myNotClosed:"My not closed",notClosed:"Not closed",overdue:"Overdue orders",dayLeft:"1 day to deadline",weekLeft:"1 week to deadline",noLimit:"Without deadline",closedToday:"Closed today",closedYesterday:"Closed yesterday",attention:"Attention"},statusHistory:"Status history",runningTaskType:"Running task type",closedTaskType:"Closed task type"},fields:{status:"Status",seqNumber:"Seq number",from:"From company",to:"To company",content:"Content",managers:"Managers",dueDate:"Due date",agreements:"Agreements",topFiles:"Files (top {{count}})"},create:{title:"New order",placeholders:{from:"Select from company",to:"Select to company"},afterCreation:"After creation",goToOrder:"Navigate to created order",goToList:"Navigate to orders list",stayHere:"Create another order"},props:{title:"Properties",toCompanyPlaceholder:"Select company (optional)"},services:{title:"Services",fields:{type:"Service",unit:"Unit",quantity:"Quantity",cost:"Cost",total:"Total"}}},docs:{title:"Documents",fields:{status:"Status",seqNumber:"Seq number",type:"Type",content:"Content",object:"Object",moreAddresses:" (+ {{count}} more)"},create:{title:"New document",placeholders:{type:"Select document type"},linkedTask:"Task (input)",afterCreation:"After creation",goToTask:"Navigate to created document",goToList:"Navigate to documents list",stayHere:"Create another document"},props:{title:"Properties",newObject:"New object from document",selectObject:"Select object (optional)"}},obj:{title:"Objects",fields:{seqNumber:"Seq number",cadastralNumber:"Cadastral number",address:"Address",type:"Type",docs:"Documents"},empty:{cadastralNumber:"<Not set>"},create:{title:"New object",placeholders:{type:"Select object type"},linkedDoc:"Document",afterCreation:"After creation",goToTask:"Navigate to created object",goToList:"Navigate to objects list",stayHere:"Create another object"},props:{title:"Properties"}},tabs:{props:"Properties",comments:"Comments",files:"Files",tasks:"Tasks",docs:"Documents",map:"Map",members:"Members",templates:"Report templates",ous:"OU",subtasks:"Subtasks"},docType:{title:"Document types"},objType:{title:"Object types"},address:{title:"Addresses"},company:{title:"Companies & employees"},unit:{title:"Measure units",fields:{type:"Type",abbr:"Abbr"},placeholders:{type:"Select type..."}},serviceType:{title:"Service types",fields:{unit:"Default unit",cost:"Default cost"},placeholders:{parent:"Select predecessor (optional)",unit:"Select unit..."},byDefault:"value by default"}})
}}])}),define("pas/nls/ru/module",["../../moduleDef"],function(module){module.service("pas/nls/module/ru",["i18n",function(i18n){return function(){i18n.addMessages("pas",{menu:{dictionaries:"Справочники"},tasks:{title:"Задачи",filters:{custom:"Составной",predefined:{all:"Все задачи",meExecutorAndNotClosed:"Я - исполнитель",meManagerAndNotClosed:"Я - менеджер",meAgreemerAndNotAgreed:"Необходимо мое согласование",notClosed:"Незакрытые",overdue:"Просроченные",dayLeft:"Срок 1 день",weekLeft:"Срок 7 дней",closedToday:"Закрытые сегодня",closedYesterday:"Закрытые вчера",running:"Выполняющиеся"},statusHistory:"История статусов"},fields:{status:"Статус",seqNumber:"№ п/п",type:"Тип",startDate:"Дата начала",dueDate:"Дата окончания",estimatedTime:"Планируемое время, ч",predecessors:"Предшественники",predecessorsByStart:"Начать вместе с",predecessorsByEnd:"Начать после",managers:"Менеджеры",executors:"Исполнители",content:"Содержание",agreements:"Согласования",topFiles:"Файлы (первые {{count}})",primary:"Главная задача",executorCanCloseTask:"Исполнитель может закрыть задачу"},canClose:{allowed:"Разрешено",restricted:"Запрещено"},create:{title:"Новая задача",placeholders:{type:"Выберите тип задачи",predecessors:"Выберите задачи"},constraints:"Constraints",newSubTask:"Новая подзадача",primaryTask:"Главная задача",useTask:"Создать как подзадачу этой задачи",linkedDoc:"Документ (вход)",order:"Заявка",linkedObject:"Объект (вход)",useLink:"Связать с задачей",afterCreation:"После создания",goToPrimary:"Перейти к главной задаче",goToTask:"Перейти к созданной задаче",goToList:"Перейти в список задач",stayHere:"Создать другую задачу",byStart:"По началу",byEnd:"По окончанию",byStartDependencies:"Начать вместе с",byEndDependencies:"Начать после"},props:{title:"Свойства",selectOrder:"Выберите заявку..."},docs:{newDoc:"Создать документ (выход) для этой задачи",unlink:"Удалить связи",confirmTitle:"Подтверждение удаления связей",confirmText:"Вы действительно хотите удалить связи этих документов с задачей?"},comments:{title:"Комментарии",placeholder:"Напишите свой комментарий ...",fields:{text:"Комментарий"}},links:{input:"Вход",output:"Выход",files:"Файлы",buttons:{dropdown:"Действия",addOrder:"Добавить заявку",addDoc:"Добавить документ",addObject:"Добавить объект",addFile:"Добавить файл",newDoc:"Создать документ",remove:"Удалить отмеченные"},placeholder:"Выберите запись...",moreItems:"(+{{num}} еще)"},subtasks:{title:"Подзадачи"}},orders:{title:"Заявки",tasksCounter:"Задачи (не закрыто / всего)",tasksWarning:"Нет выполняющихся задач",orderTasks:"Задачи заявки",filters:{custom:"Составной",predefined:{all:"Все заявки",myNotClosed:"Мои незакрытые",notClosed:"Незакрытые",overdue:"Просроченные",dayLeft:"Срок 1 день",weekLeft:"Срок 7 дней",noLimit:"Без даты окончания",closedToday:"Закрытые сегодня",closedYesterday:"Закрытые вчера",attention:"Внимание"},statusHistory:"История статусов",runningTaskType:"Тип исп. задач",closedTaskType:"Тип закр. задач"},fields:{status:"Статус",seqNumber:"№ п/п",from:"От кого",to:"Кому",content:"Содержание",managers:"Менеджеры",dueDate:"Срок",agreements:"Согласования",topFiles:"Файлы (первые {{count}})"},create:{title:"Новая заявка",placeholders:{from:"От кого...",to:"Кому... (опционально)"},afterCreation:"После создания",goToOrder:"Перейти к созданной заявке",goToList:"Перейти в список заявок",stayHere:"Создать другую заявку"},props:{title:"Свойства",toCompanyPlaceholder:"Выберите компанию (опционально)"},services:{title:"Услуги",fields:{type:"Услуга",unit:"Ед. измерения",quantity:"Количество",cost:"Цена за ед.",total:"Стоимость"}}},docs:{title:"Документы",fields:{status:"Статус",seqNumber:"№ п/п",type:"Тип",content:"Содержание",object:"Объект",moreAddresses:" (+ еще {{count}})"},create:{title:"Новый документ",placeholders:{type:"Выберите тип документа"},linkedTask:"Задача (вход)",afterCreation:"После создания",goToTask:"Перейти к созданному документу",goToList:"Перейти в список документов",stayHere:"Создать другой документ"},props:{title:"Свойства",newObject:"Новый объект из документа",selectObject:"Выберите объект (опционально)"}},obj:{title:"Объекты",fields:{seqNumber:"№ п/п",cadastralNumber:"Кадастровый номер",address:"Адрес",type:"Тип",docs:"Документы"},empty:{cadastralNumber:"<Неизвестен>"},create:{title:"Новый объект",placeholders:{type:"Выберите тип объекта"},linkedDoc:"Документ",afterCreation:"После создания",goToTask:"Перейти к созданному объекту",goToList:"Перейти в список объектов",stayHere:"Создать другой объект"},props:{title:"Свойства"}},tabs:{props:"Свойства",comments:"Комментарии",files:"Файлы",tasks:"Задачи",docs:"Документы",map:"Карта",members:"Участники",templates:"Шаблоны отчетов",ous:"ОЕ",subtasks:"Подзадачи"},docType:{title:"Типы документов"},objType:{title:"Типы объектов"},address:{title:"Адреса"},company:{title:"Организации и сотрудники"},unit:{title:"Единицы измерения",fields:{type:"Тип",abbr:"Сокращение"},placeholders:{type:"Выберите тип..."}},serviceType:{title:"Виды услуг",fields:{unit:"Ед. измерения",cost:"Стоимость"},placeholders:{parent:"Выберите предшественника (опционально)",unit:"Выберите ед. измерения..."},byDefault:"значение по умолчанию"}})}}])}),define("pas/nls/module",["pas/nls/en/module","pas/nls/ru/module"]),requirejs.s.contexts._.nextTick=function(f){f()},require(["css"],function(css){css.addBuffer("pas/assets/pas-styles.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,define("pas/module",["./moduleDef","./states","./directives","./services","./nls/module","css!./assets/pas-styles.css"],function(module){return module.constant("pasDocumentStatuses",{Draft:"Draft",Registered:"Registered"}).constant("documentStatusViewSettings",{Draft:{"class":"btn-danger",icon:"icon-time"},Registered:{"class":"btn-success",icon:"icon-beer"}}).constant("pasOrderStatuses",{New:"New",Agreement:"Agreement",AdvanceWait:"AdvanceWait",Doing:"Doing",Done:"Done",Closing:"Closing",Closed:"Closed"}).constant("orderStatusViewSettings",{New:{"class":"btn-danger",icon:"icon-time"},Agreement:{"class":"btn-default",icon:"icon-star-half-empty"},AdvanceWait:{"class":"btn-info",icon:"icon-star"},Doing:{"class":"btn-primary",icon:"icon-cogs"},Done:{"class":"btn-warning",icon:"icon-ok"},Closing:{"class":"btn-inverse",icon:"icon-pause"},Closed:{"class":"btn-success",icon:"icon-beer"}}).run(["i18n",function(i18n){i18n.registerLocalizationModule("pas/nls/module"),i18n.sync()}])}),requirejs.s.contexts._.nextTick=function(f){f()},require(["css"],function(css){css.setBuffer('.activity {\r\n    padding-top: 0;\r\n    padding-bottom: 0;\r\n    white-space: normal;\r\n}\r\n\r\n.activity > ul > li {\r\n    border-bottom: 1px solid #dddddd;\r\n    padding: 10px;\r\n}\r\n\r\n.activity > ul > li:last-child {\r\n    border-bottom: none;\r\n    padding-bottom: 0;\r\n}\r\n\r\n.activity .activity-item {\r\n    margin-right: 20px;\r\n}\r\n\r\n.activity .user {\r\n    white-space: nowrap;\r\n}\r\n\r\n.activity .user .avatar {\r\n    margin-right: 10px;\r\n}\r\n\r\n.activity .user .user-name {\r\n    margin-right: 10px;\r\n}\r\n\r\n.activity .more-users span {\r\n    height: 23px;\r\n}\r\n\r\n.activity .task-details {\r\n    margin-top: 5px;\r\n}\r\n\r\n.activity ul.changes {\r\n    display: inline;\r\n    margin: 0;\r\n    padding: 0;\r\n}\r\n\r\n.activity ul.changes li {\r\n    float: left;\r\n    display: inline;\r\n    list-style: none;\r\n    margin: 0;\r\n    padding: 0;\r\n}\r\n\r\n.activity ul.changes li:after {\r\n    content: ",\\00a0";\r\n}\r\n\r\n.activity ul.changes li.last:after {\r\n    content: "";\r\n}\r\n\r\n.activity ul.changes li.more-changes:before {\r\n    content: "\\00a0";\r\n}\r\n\r\n.activity ul.changes li.more-changes:after {\r\n    content: "";\r\n}\r\ndiv.items-box {\r\n    margin-bottom: 10px;\r\n}\r\n\r\ndiv.items-box .time-moment {\r\n    margin-left: 5px;\r\n}\r\n\r\ndiv.items-box .details-btn {\r\n    margin-top: 5px;\r\n}\r\n\r\ndiv.items-box ul.links {\r\n    display: inline;\r\n    margin: 0;\r\n    padding: 0;\r\n}\r\n\r\ndiv.items-box ul.links li {\r\n    float: left;\r\n    display: inline;\r\n    list-style: none;\r\n    margin: 2px 0 0 5px;\r\n    padding: 0;\r\n}\r\n\r\ndiv.items-box ul.links li:first-child {\r\n    margin-left: 0;\r\n}\r\n\r\ndiv.items-box ul.links li:after {\r\n    content: "\\0020";\r\n}\r\n\r\ndiv.items-box ul.links li:last-child:after {\r\n    content: "";\r\n}\r\n\r\ndiv.items-box ul.links li > a {\r\n    text-decoration: none;\r\n}\r\n\r\ndiv.items-box input[type="checkbox"].selector {\r\n    display: inline-block;\r\n    margin-right: 6px;\r\n}\r\nul.executors {\r\n	display: inline;\r\n	margin: 0;\r\n	padding: 0;\r\n}\r\n \r\nul.executors li {\r\n	float: left;\r\n	display: inline;\r\n	list-style: none;\r\n	margin: 0;\r\n	padding: 0;\r\n}\r\n \r\nul.executors li:after {\r\n	content: ",\\00a0";\r\n}\r\n \r\nul.executors li:last-child:after {\r\n	content: "";\r\n}ul.addresses {\r\n    float: left;\r\n    margin: 0;\r\n    padding: 0;\r\n}\r\n\r\nul.addresses li {\r\n    float: left;\r\n    display: inline;\r\n    list-style: none;\r\n    margin: 0;\r\n    padding: 0;\r\n}\r\n\r\nul.addresses li:after {\r\n    content: ",\\00a0";\r\n}\r\n\r\nul.addresses li:last-child:after {\r\n    content: "";\r\n}\r\n.ago-tabs {\r\n    margin-top: 5px;\r\n}\r\n')}),requirejs.s.contexts._.nextTick=requirejs.nextTick;